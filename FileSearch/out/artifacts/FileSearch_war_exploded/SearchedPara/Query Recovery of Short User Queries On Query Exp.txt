 User queries to search engines are observed to predomi-nantly contain inflected content words but lack stopwords and capitalization. Thus, they often resemble natural lan-guage queries after case folding and stopword removal. Query recovery aims to generate a linguistically well-formed query from a given user query as input to provide natural lan-guage processing tasks and cross-language information re-trieval (CLIR). The evaluation of query translation shows that translation scores (NIST and BLEU) decrease after case folding, stopword removal, and stemming. A baseline method for query recovery reconstructs capitalization and stopwords, which considerably increases translation scores and significantly increases mean average precision for a stan-dard CLIR task.
 Categories and Subject Descriptors: H.3.3 [INFORMATION STORAGE AND RETRIEVAL] In-formation Search and Retrieval X  Query formulation, Search process General Terms: Experimentation, Performance, Measure-ment Keywords: Query Reformulation, Query Expansion, CLIR
Query processing for experimental information retrieval (IR) systems typically involves transforming the original user query (OQ) by successively applying case folding (CF), stop-word removal (SR), and stemming (ST). However, real user queries to search engines usually consist of 2-3 words [5, 6] and seldom take the form of full sentences or questions [4]. Thus, they already resemble results from query preprocess-ing (as shown in Table 1) in that they typically lack capital-ization and stopwords, but still contain full word forms. This paper proposes query recovery (QR), a method which seeks to restore a fully capitalized query with syntactic structure from its input. For example, the query embargo iraq (topic C046) is transformed into The embargo against Iraq , which results in a better query translation for CLIR.

Reconstructing punctuation and capitalization has been applied to automatic speech recognition and machine trans-lation (MT) [1, 2], but focuses on processing full text instead of short queries. Query modification for IR has been con-cerned with query expansion by adding content terms to the query (see, for example [7]). In contrast, QR aims to expand a query by adding stopwords and capitalization.
Our experiments and analyses are performed on the fol-lowing corpora and data sets: The Excite query log (ENEx) of user queries, as distributed in the Pig query log anal-ysis tool 1 ; the 1M sentence English (EN1M) and 3M sen-tence German corpus from the Leipzig Corpora Collection 2 the English and German Wikipedia article names (ENWi) 3 ; and the titles of 160 English and German topics which have been used in ad-hoc retrieval experiments at CLEF from 2003-2006 (see, for example [3]).

Results of an analysis of this data are shown in Table 1, confirming that the average length of user queries (in col-umn ENEx) is 2-3 words. In addition, the following obser-vations can be made: user queries rarely contain stopwords, punctuation symbols (e.g.  X ! X  ,  X ? X  ), or numeric terms; spe-cial characters (e.g. quotation marks or  X - X  ) often indicate queries with special syntax, e.g. a phrase search or exclu-sion of terms. Topic titles contain capitalization in expected places, e.g. at the beginning of sentences. Thus, the propor-tion of capitalized words is actually much higher in compar-ison with corpora containing full sentences. Compared to the original and processed CLEF topic titles (OQ-ST), user queries are most similar to topic titles after CF and SR with respect to their average length in tokens, the number of low-ercase words, stopwords, and stems (base forms). Users of-ten enter full word forms as query terms (52.9% stems, 47.1% non-stems for ENEx), assuming that the search engine will handle morphological variation or exact matching of query terms. In contrast, topic titles after stemming mostly con-sist of stems only (94.9% stems).
A user query can be represented as a sequence of con-tent words W i . Between any two tokens W i and W i +1 stopword sequence S i occurs (a special case is the empty se-quence). Thus, a query is a sequence of content words and stopword sequences ( S 0 , W 1 , S 1 , . . . , S n  X  1 , W
The baseline QR method uses the 1M sentence English and 3M sentence German corpora and the Wikipedia article names as training data. The method consists of replacing http://hadoop.apache.org/pig/ http://corpora.uni-leipzig.de/ http://dumps.wikimedia.org/ Table 1: Analysis of English corpora and topics.
 entries 0.94M 1M 5.24M 160 160 160 160 tokens 2.45M 25.1M 16.8M 577 577 458 458 avg. length 2.6 25.1 3.2 3.6 3.6 2.9 2.9 uppercase [%] 0.7 13.8 66.6 45.8 0.00 0.0 0.0 lowercase [%] 81.8 70.6 17.7 50.6 96.4 99.2 99.2 numeric [%] 4.9 2.1 2.4 0.5 0.5 0.8 0.8 punct. [%] 6.8 11.2 5.3 2.3 2.3 0.0 0.0 special [%] 5.8 2.3 7.9 0.8 0.8 0.0 0.0 stopwords [%] 7.8 49.0 11.7 18.3 18.3 0.0 1.3 non-stopw. [%] 92.2 51.0 88.3 81.7 81.7 100.0 98.7 stem [%] 52.9 28.5 8.3 13.6 47.7 47.7 94.9 non-stem [%] 47.1 71.5 91.7 86.4 52.3 52.3 5.1 Processing EN DE  X  EN DE EN  X  DE OQ 9.45/0.97 5.80/0.37 9.66/1.00 5.30/0.39 CF 4.65/0.22 4.26/0.21 2.47/0.07 5.07/0.37 SR 3.34/0.10 2.98/0.10 0.49/0.00 4.00/0.14 ST 1.15/0.00 2.09/0.06 0.20/0.00 1.67/0.00
QR 6.79/0.32 4.84/0.20 5.72/0.24 4.31/0.21 lowercase words W i in the input with the most frequent capi-talized variant found in the training corpus and inserting the most frequent stopword sequence S i occurring between two words W i and W i +1 . If W i is unknown, its initial character is capitalized, according to the observation by [1] that most out-of-vocabulary words are proper nouns (which are capi-talized in English and German). If W i or W i +1 is unknown, the empty stopword sequence is selected for S i .
The effect of QR for NLP is investigated by evaluating the baseline method for query translation, which is a typical task for CLIR. Translation experiments and CLIR experiments are based on the CLEF topic titles (C041-C200), which are capitalized, contain stopwords and full word forms. For com-parison with real user queries, the original topics are pre-processed by applying case folding (CF), stopword removal (SR), and stemming (ST). Table 2 shows NIST and BLEU scores for CLEF topics after query processing and trans-lation by the Google translate web service 4 . The original parallel English (EN) and German (DE) topics and variants with corrected orthography were used as reference trans-lations. Query translation scores decrease after each pro-cessing step, i.e. translating queries lacking stopwords, case information, or full word forms adversely affects MT qual-ity. As expected, QR for short queries reverses the effects of CF and SR and increases the the quality of translations. For monolingual QR, the English (German) queries achieve 71.8% (59.2%) of the score for the original queries. For a translation of queries after QR to English (German), the baseline QR yields 83.4% (81.3%) of the NIST score for translating the original query. The QR scores are consid-erably higher than scores for processed queries. http://translate.google.com/ SR 0.241 0.221 0.350 0.335 QR 0.241 0.235 (+6.5%)  X  0.350 0.353 (+5.2%)  X 
OQ 0.241 0.237 (+7.5%) 0.350 0.342 (+1.9%) Results for IR experiments on the English and German CLEF ad hoc document collections are shown in Table 3. Significance using the Wilcoxon test with p &lt; 5% is indi-cated by  X   X   X . For comparison with an upper baseline, per-formance for the unprocessed original queries (OQ) is also shown. MAP does not change at all for monolingual IR ex-periments, i.e. applying processing steps to the query twice (e.g. stemming) will not affect IR results. For bilingual IR, a slight but significant increase in MAP is observed for query translation after QR (more specifically: after CF, SR, and QR have been applied) compared to query translation after SR (SR and CF). Stemming was not included as a prepro-cessing step because users do not typically enter stems in queries. For DE  X  EN, QR achieves almost the same MAP compared to using OQ, which demonstrates the usefulness of QR for CLIR. For EN  X  DE, MAP is even slightly higher, due to hyphenated compounds in the German translation of recovered topics, i.e. compound splitting.
The major findings are: User queries to search engines lack capitalization and stopwords, and are most similar to topic titles after CF and SR (e.g. in average length). Restoring capitalization and adding stopwords to user queries benefits MT and CLIR which was shown by calculating translation scores for various processing stages and after QR. Transla-tion scores for the baseline QR are considerably higher than for preprocessed queries. The proposed baseline QR method serves as a proof of concept for different approaches at QR (e.g. with language models). Future work will include re-covery of questions for question answering.

