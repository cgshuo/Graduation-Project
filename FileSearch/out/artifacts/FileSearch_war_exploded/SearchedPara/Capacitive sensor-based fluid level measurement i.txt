 1. Introduction
Capacitive sensors are increasingly becoming a substitute for the mechanical devices in the industrial and automotive applica-tions, as they provide the benefits of long-term reliability even in hostile environments. A capacitive sensor has no moving parts. It determines the fluid level based on the changing capacitance value. The capacitance depends on the dielectric constant, the area of the conducting plate, and the separation distance of the plates. If the properties of a capacitor remain fixed, except for its dielectric constant, then the capacitance in terms of its dielectric constant can be calculated as follows: C  X  e where C is the capacitance in farads (F), e y is the relative static permittivity (dielectric constant) of the material between the plates, e 0 is the permittivity of free space, A is the area of each plate in square metres, and d is the separation distance of the two plates.

The capacitance value is proportional to the dielectric constant of the material that separates the two conducting plates (Serway and Jewett, 2004) . Therefore, any change in the fluid level will correspond to a change in the dielectric constant, hence the capacitance value.

The fluid level measurement will experience error in level readings for applications where the storage tank is non-stationary, such as an automotive fuel tank. Due to the nature of the driving conditions, a fuel tank is normally subjected to acceleration, which induces slosh waves in the fuel tank. A level sensor might erroneously sense these fluctuations in the fluid to be the actual levels of the fluid, thereby producing inaccurate fluid level reading.

A fuel tank may contain contaminants and could also experi-ence variations in the temperature. Results from the Design of
Experiments (DOE) have indicated significant effects of tempera-ture variations and contaminants on the fuel level measurement.
The influence of temperature variations along with contamination can result in shifts in the dielectric constants. The response of the sensors in such environments could be influenced by the environmental parameters in a nonlinear manner (Patra, 2004) .
Several methods have been used to compensate for these dynamic effects. Kobayashi and Obayashi (1983) used an averaging method that simply averages the fuel volume signal during various vehicle conditions detected by the speed sensor. The averaging methods Kobayashi and Obayashi (1983) ,
Tsuchida (1981) , and Kobayashi and Kita (1982) could be useful in approximating the liquid level while the liquid fluctuates but it nevertheless gives inaccurate results especially at varying temperature levels. Fig. 1 shows the errors obtained using the averaging method in a fuel tank filled with 45 L of fuel at various levels of acceleration. Artificial Neural Networks (ANN) can be used to effectively solve such problems. Intelligent machines and sensors can be developed with neural networks that are obliged to operate in dynamic environment without compromising accuracy.
Patra et al. (2008) and Song (2007) have used neural networks to develop intelligent sensors that compensate for the nonlinear environmental parameters.
 the fluid level in a dynamic environment without compromising the accuracy. To reduce the complexity of the problem, the capacitive sensor was calibrated to the ambient temperature and fuel type; thereby the influence of temperature and contamina-tion factors on the fluid level measurement could be ignored. The principal focus of this work is related to eliminating the effects of liquid slosh on fluid level measurement using an artificial neural network approach. 2. Neural network-based approach
A fuel tank containing fluid will exhibit slosh waves whenever the walls of the container experience acceleration (Wiesche, 2003). The induced slosh pattern will produce natural sloshing frequencies, which are associated with the shape of the storage tank and the existing quantity of the fluid.
The capacitive sensor output will exhibit the slosh patterns produced in the fuel tank when it is sampled at a high sampling rate.

Artificial neural network can be trained with different signals signifying different slosh patterns to determine the actual fuel volume residing in the tank. Feature extraction is performed in signal pre-processing by applying Fourier Transformation on the raw sensor signal, which can reduce the size of the input data as well as increase the speed and performance of the neural network.
A low-pass filter that eliminates high frequencies (over 150 Hz) is also applied in signal pre-processing. Fig. 2 illustrates the system block diagram that was used to develop the neural network approach to fluid level measurement.

An accumulated sampled signal of 10 s duration is converted into the following two forms, which is then fed into the neural network: Frequency response  X  representing slosh waves Average volume  X  representing average value of the fluid
The capacitive sensor was calibrated to the ambient fuel and temperature, therefore, the effects of temperature and contam-ination can be assumed as insignificant. 3. Network topologies
The following two commonly used network topologies are investigated in developing the presented neural network based fluid level measurement system: Static Feed-Forward Network
Dynamic Networks (with and without feedback) 3.1. Static feed-forward network
Feed-forward Backpropagation (BP) neural network is the static network, where signals travel in one direction only, i.e. from input to output. There is no loop or feedback between neurons and their inputs and outputs, which makes them straight forward. Backpropagation network topology is extensively used in pattern recognition. Fig. 3 illustrates the structural diagram of the
BP network that takes the signal features and produces the fluid volume figure as the output.

Volume  X  p  X  X  purelin b LW  X  t ansig  X  IW p  X  b 1  X  X  X  b 2 where p is the input signal of length R; IW and LW are input and layer weights, respectively; b 1,2 are the bias values of each neuron.
The network consists of S 1 number of neurons with tansig and purelin as the transfer functions.
 3.2. Dynamic neural network
Dynamic neural networks have memory that can remember the past values and states of the network. The output of the dynamic network depends not only on the current input values but also on the previous inputs, outputs or states of the network (Demuth et al., 2008). Dynamic neural networks are divided into two types: Feed-forward Time-Delay Networks Feedback or Recurrent Networks
Distributed Time-Delay Neural Network (DTDNN) is the feed-forward dynamic network that has Tapped Delay Line (TDL) memory at the input as well as throughout the network (Demuth et al., 2008). There is no feedback connection in distributed TDNN.
Fig. 4 shows the structure of the DTDNN network that produces the volume output based on the current as well as past input signals.

In recurrent or feedback neural network topology, signals can travel in both directions, i.e. forward and backward. The dynamic state of this network continuously changes until it reaches an equilibrium state. The system state stays at equilibrium until another input is received which causes the system to reconsider its state and a new equilibrium state is produced. Nonlinear
Autoregressive Network with Exogenous Inputs (NARX) is the dynamic neural network with feedback connections that were used here to eliminate the effects of sloshing on fluid level measurement. Fig. 5 shows the structure of the NARX network that produces the output volume by considering the current as well as previous input, output, and network state values. 4. Experimental setup network with some sample signals and their corresponding target values. Two experiments were performed to obtain the network coefficients (IW, LW, and b 1,2 ), and to simulate the networks to determine the accuracy of the system. 4.1. Training data of the tank. The fuel tank was filled at approximately 50 X 75% of the total tank capacity, which corresponded to volume levels 40, 45, 50, and 55 L. These four volume values were used to demonstrate the effectiveness of the capacitive sensing approach to fluid level measurement. In the future, a full mapping study will be performed on a fuel tank from empty to full volume in increments of 1 L.
 producing acceleration and hence the slosh waves within the tank. The actuator was controlled by a pulse timer. The slosh frequency or the cycle of linear actuator could be selected from 0 to 2 Hz at an interval of 0.2 Hz. The fuel temperature was determined to be 15 1 C, which was assumed to have stayed constant throughout the experiment.

The level signal from the capacitive sensor was acquired through LabVIEW software and a Data Acquisition Card, which was connected to the capacitive sensor. The capacitive signal representing the fuel level was sampled and recorded at 100 Hz.
Fig. 6 illustrates the experiment setup used to acquire the sample signals. 4.2. Test data
Field trials were undertaken to acquire some sample data for the purpose of validating the neural network. A tank with the same shape profile as used in the previous experiment (Training
Data) was mounted in the vehicle. The tank was filled with volumes 40, 45, 50, and 55 L of fuel. The capacitive sensor was attached to the fuel tank to record the fuel level and temperature under various driving conditions. All signal data was logged on a computer using the LabVIEW software. Field trials were carried out under conditions of varying acceleration for some time to create slosh waves in the fuel tank.

Figs. 7 X 9 outline the varying speed, acceleration, and the resultant slosh waves generated during the field trials when the fuel tank contained 40 L of fuel. 5. Simulation results
Three types of neural network architectures were investigated using the MATLAB software, once the training and the test data from the experiments were obtained. Fig. 10 illustrates the
Acceleration (m/s X )
Slosh Frequency (Hz) procedure that was followed to train and validate the neural networks.

The training data at various tank volumes and slosh frequen-cies was stored in several files. These signals were loaded and classified in terms of their frequency response and their average value. Fig. 11 shows the average fuel level over 10 s obtained at various initial volumes and slosh frequencies. It can be seen that the average volume at various acceleration or slosh levels is not constant.

The values of the frequency coefficients were obtained by using the MATLAB X  X  FFT function in signal pre-processing. These coefficients representing different slosh waves were stored in a 129 number long array. The frequency and the average value of the signals, along with the temperature value, which was recorded to be at 15 1 C, were all bundled in an array of cells, which were finally fed into the neural network ( Fig. 12 ).

All networks were trained with  X  X rainlm X  , which is the default network training function in MATLAB. Table 1 shows the network parameters for each type of investigated neural networks.
Average Level Reading (L) validating the three types of neural networks ( Figs. 13 X 15 ). tank using different neural network topologies. In practical conditions, the input data to the neural network will be randomly out of sequence, due to the effects of sloshing. Therefore the network verification was performed by feeding the out of sequence signal data into the neural networks. The results show that the static Feed-forward Backpropagation (BP) neural network provided the most accurate results.

Table 2 shows the average and maximum errors obtained by using the averaging method and the three investigated network topologies. 6. Summary
The neural network approach was used to accurately deter-mine the fuel level in an automotive fuel tank under dynamic conditions. A maximum error of 8.7% was obtained using the
Distributed Time-Delay Neural Network (DTDNN), whereas the performance of the NARX network was observed to be better that produced a maximum error of 2.6%. The static Feed-forward
Backpropagation Neural Network showed even better perfor-mance by producing a maximum error of 0.11%. The reason of the
BP network to have out performed the DTDNN and NARX networks might be related to the limited amount of training samples. The error in fuel level readings obtained by using the neural network approach is substantially less than that which is obtained by using the averaging method. 7. Future work
Neural networks will be used to compensate for the effects of other factors such as contamination and temperature. Liquid shift caused by tilt angles will also be considered in the future. With the rising microprocessor speed, it will be possible to train the neural networks in real time, which will further increase the accuracy of the measurement system.
 References
