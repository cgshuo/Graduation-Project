 Social networks such as Sina Weibo and Twitter have become very popular because they are regarded by people as the reflection and extension of their real-life. To most people, the friendship is an indispensable part of their lives in both virtual and real social space. How to recommend friends in social networks has received substantial interest from both academia and industry. Traditional friend recommendation methods in social network mainly focus on finding friends with common interests es timated with the contents of their published posts and the following relationships [1,2]. However, these methods may only suggest  X  X imilar X  people to be friends, which is only suitable for virtual social space instead of the real world. For example, if friends locate in some places faraway from each other, it is difficult for them to take part in a local party or meet together to do some interesting things. Therefore, it is ea sy to recommend friends in social network, but it is relatively hard to make friends not only in social network but also in real world. There are many scholars studying how to predict locations [3,4], which makes it possible to recommend friends considering location information besides contents. Considering locations into our recommendation ensures that recommended friends can m eet the real world needs.

Our method is based on the following assumptions: (i) people are more likely to be friends if their lives share more location overlaps besides the common interests; and (ii) the more active users are in social network, the more likely they are recommended [5]. In this paper, t he common interests between two users are estimated with the content similarity of their published posts. Users X  location sequences with frequencies are detected from their posts and they are used to compute the location overlaps between them. If the common interests scores of two users are the same to the target user (the user we want to recommend friends to him), the one with more location overlaps with the target user will be more likely to be recommended to him. In addition, without lose of generality, how active users are in Sina Weibo is evaluated with the number of their published posts. Finally, we compute the recommendation scores of users combining above three factors and recommend the top n users as potential friends to the target user.

The rest of this paper is organized as follows. Section 2 gives some related work. Section 3 describes the friend recommendation method. Section 4 discusses the corresponding experiments and some metrics to evaluate our method and baselines. Section 5 makes conclusions and introduces our future work. There are many social networks which h ave employed recommendation systems to provide user experiences. Such as F acebook [2], it employed recommendation system by friends-of-friends method to r ecommend friends to users. The intuition is derived from the idea that it is more possible for a person to know friends of their friends rather than a random perso n [6]. Chen et al. [7] compared different friend recommendation algorithms in an enterprise social network and found that the algorithms based on information about the social network can find more known users while the algorithms checking for content similarity are more suited for discovering new friends.

Friend recommendation in social networks can be viewed as a link prediction problem [8] in complex networks. LibenNowell et al. firstly discussed link predic-tion in social networks and compared lots of methods based on node proximity [9]. These methods mainly utilize the structural information of a given social network. Kwon et al. proposed a method in [10] consisting three stages; (i) com-puting the friendship score using physical context; (ii) computing the friendship score using social context; and (iii) combining all of the friendship scores and recommending friends by the scoring values. The paper proposed by Hannon et al. in [1] is another typical friend recommendation method based on contents.
Just using contents to recommend friends can X  X  meet our requirement. There are papers using locations for recommending friends. For example, Wan et al. proposed a method to recommend friends according to the informational utility, which stood for the degree to which a friend satisfied the target user X  X  unfulfilled informational need, called informational friend recommendation in [11], and Chu et al. proposed a brand-new friend recommendation approach in [12]. The main concept is to recommend friends who have the similar interests or another thing with self to users. This paper is to recommend friends that are close in the real life. After recommending a friend to a user, there are scholars studying group recommendation such as [13,14,15] and so on. Bian et al. proposed a novel model for team recommendation to help users find interesting teams in social network [13], Deng et al. focused on studying how to improve group recommendations by making research on people interact with each other depending on their person-alities or their closeness in [14]. At the same time, Nguyen et al. studied how to improve group recommendation procedure in [16]. Without loss of generality, we use Sina W eibo as the social network to recommend friends in this paper. One post refers to an original microblogging including some words published by a user in Sina Weibo. The user here may have three kinds of posts: (i) original posts published by him directly; (ii) forwarded posts with some comments of him; and (iii) forwarded posts without any comments of him. For the (ii), we keep the comments and remove the forwarded words. For the (iii), we remove these posts. Before introducing our model, we introduce symbols used in this paper and their corresponding descriptions in Table 1.

In order to recommend friends to a user suitable for not only in social network but also the real world, we propose a novel approach which combines users X  published posts, their location sequences detected from the posts and how active they are in Sina Weibo to predicate w hether they can become friends. Our method supposes that people are more likely to be friends if their lives share more location overlaps besides the co mmon interests and the more active the recommended users are, the more likel y they are recommended [5]. Based on above assumptions, we give the model of our friend recommendation as follows. a post X  X  published time, b i represents the post X  X  contents and l i is a published location (the location may be unknown). For this sequence, our method attempts to calculate the recommendation scor es between the other users and user u and recommend the top n users to him. We use P ( u, r ) to represent the probability we recommend user r to user u . r represents a recommended user and it has the same form with u . It is based on the common interests, location overlaps and howactiveusersareinSinaWeibo.So, P ( u, r ) is defined as Where I ( u, r ) evaluates the common interests between the user u and r , L ( u, r ) measures the location overlaps between u and r not considering the time factor, and pop ( r ) means how active user r is in Sina Weibo. We use pop ( r )not pop ( u ) because we want to recommend user r to user u . In the following sections, we will discuss them respectively. In this equation, I ( u, u )and L ( u, u )areboth1andwe don X  X  recommend a user to himself, so user u is excluded from the denominator. 3.1 Common Interests As stated earlier, our method bases on a premise that friends must have some common interests. If w e want to recommend user r to user u , we should first evaluate their common interests. Time factor is important for calculating the common interests, because use rs X  interests may drift over time. In a general sense, a user does not change his interests frequently, that is, his interests usually do not drift in a short period. So, we merge all posts published in one month into adocument d and get the document set D .Then I ( u, r ) is defined as: where d i u and d i r are the words vectors of d i u (document of user u that is in the i th month and d i u  X  D u )and d i r , and we use the tool ICTCLAS 1 to get these words. t i and t j are the published time of documents d i u and d j r which are represented in months. | t i  X  t j | measures the gap and when the gap between t i and t j is large, the decay is fast. M ( u )and M ( r ) represent how many months user u and user r publish posts in Sina Weibo. 3.2 Location Overlaps Location overlaps we mention here ref er to the same locations between two users not considering time factor. If tw o users have common interests, the more overlaps between their locations, the more likely they will become friends. In this situation, the recommended users can par ticipate in some parties or meetings together with the target user in real life.

Before getting location overlaps betw een users, we need to detect their past locations and corresponding frequencies. According to the location detection method proposed in the previous work [3], we first get users X  locations. Paper [3] defines a Chinese location library and trains words distribution over locations based on the data getting from Wiki 2 . That means we get all locations in the and get the frequency a user goes to a location. e ij shows the probability of user u i (a target user or a recommended user) went to location l j according to his past locations. We use the e ij to predict the probability the user u i goes or will go to location l j now or future. For a user u i ,themethodweget e ij is defined as Where  X  ( u i ,l j )isthetimesuser u i goes to location l j . For the locations where the user u i never go there in our dataset, we consider the attendance time as once. After getting frequencies of all us ers go to all locations, we have the user location matrix E U .
 Where L is the Chinese location library we defined before. Under the common interests, if the more location overlaps, the more likely they get to be friends in real life. The matrix L S is the location frequency probability matrix and it is defined as L ( u, r ) measures the location overlaps between user u and user r not considering the time factor and it is just one element in the matrix L S . 3.3 How Active Users Are How active users are in Sina Weibo is significant for friend recommendation especially for real-life needs. The more active users in the virtual social network space are, the more likely they will participate in some real activities. So, we need to know how active the recommended users are. pop ( r ) is just used to measure how active the user r is in Sina Weibo and it can be defined as where N r is the quantity of posts published by user r ,andmax r  X  U N r denotes the max number of posts published by users in the user set U . The largest post number in U is 185457 in our dataset.

Fig. 1 shows the relative activity of users in Sina Weibo. The X axis represents user id and the Y axis represents relativ e activity of users. This figure confirms that the most and the least users are small.
Now, we give the algorithm of our method for recommending top n friends to the user u  X  U . The algorithm is shown in Algorithm 1. At the beginning of the algorithm, we need to know the location sequences of all users in the user set U , then, for two users u and r where u represents the target user and r rep-resents the recommended user, the algorithm contains three steps: (i) compute the common interests between u and r ; (ii) compute location overlaps between u and r ; (iii) compute how active the user r is in our dataset; and (iv) compute the recommendation score between user u and user r . At last, we recommend the top n users to the target user u according to the reco mmendation scores. In this section, we detail an experimental study of our method. The goals of the experiments are to understand: (i) whether friend recommendation based on common interests, location overlap s and how active users are in Sina Weibo can not only meet social network needs but also real-life needs; (ii) whether our method can significantly outperform the traditional friend recommendation Algorithm 1. Location-sensitive friends recommendation methods in terms of Precision , Recal l and F 1 measures and (iii) whether consid-ering how active users are and location overlaps can improve the recommendation results. 4.1 DataSet We have to collect the dataset since there is no standard corpus for evaluating our recommendation results. We collect real data from Sina Weibo. We first select 1000 active users and crawl all their posts published from Aug. 2009 to Apr. 2014. If the number of a user X  X  published posts is smaller than 10, we remove the user. After that, there remains 769 users. Wh en the dataset is large, we can use the common interests to excl ude some users and then use our method to recommend friends. For each user, we randomly collect 10 carers X  posts if the user has more than 10 carers in Sina Weibo. We use user u to show a user and user r to show another user, if user u cares user r in Sina Weibo, we say user r is user u  X  X  carer. These carers and the original users consis t of user collection. Although we collect users according to this rule, the relationship is complex and it is a network. In the experiment, we assume that we don X  X  know the relationship between users in our collection. The statistical information of the dataset is shown in Table 2.
For a post, if it contains GPS information, we use the GPS information di-rectly. Otherwise, we use the method propo sed in [3] to detect whether it contains a location and if it contains we use the detected location. If not, the location is unknown.

There is one point we want to stress, although we use Sina Weibo dataset to evaluate our experiment results, our mo del can be used for other datasets if they contains locations.
 4.2 Baseline Methods There are five baseline methods we comp ared in this paper. The first method is a random recommendation method, which is defined as RR . The second method uses the location information for friend recommendation proposed by Wan et al. in [11], represented as LO . The third method is based on the common interests proposed by Hannon et al. in [1], denoted as TS . The fourth and fifth baseline methods are extended from LO and TS considering how active users are. They are represented as ALO and AT S separately. 4.3 Evaluation Measures We use standard measures Precision , Recal l and F 1 to evaluate friends recom-mendation results. If a recommended fri end generated by the methods agrees with the true friend in Sina Weibo, w e view it as a correct recommendation. Precision is the fraction of recommended f riends that are correct.
 Recal l is the fraction of correct reco mmendations that are detected.
F 1-score is calculated using following function: F 1 = 2*( Precision * Recal l )/ ( Precision + Recal l ).

In this paper, we don X  X  recommend only one friend to a target user. If we use n to measure how many friends we recommend to a user, p @ n means the Precision we recommend top n friends. Where n i =1 correct i means how many friends we recommended are right. Note that all measures above are macro-average for all users. 4.4 Results and Discussion For each user u in the dataset, our method recommends n ( n =1 , 2 , ..., 10 in the experiments) possible friends in descending order of scores. Fig. 2 reports the p @1, p @2, p @5 and p @10 ( p @ n means the precision for the top@n recom-mendation.) for the original baseline friend recommendation approaches and our method considering common i nterests, location overlaps and how active users are in Sina Weibo. First, note the strong positive impact of considering how active users are and location overlaps. With considering how active users are alone, ALO and AT S methods have big improvements than the LO and TS methods separately. The gaps indicate that the active users in social network are more likely to make friends with other users. So, taking how active users are in social network into consideration can improve our recommendation results. Consider-ing the location overlaps, our method has a big improvement than the AT S method which just consider how active users are and common interests. This result is encouraging and it also shows that our method improves the recom-mendation results besides meeting the social network needs and real life needs. As a negative result, we can see the p oor performance of random recommenda-tion method, which has Precision about 0.00012 in our dataset. This indicates that common interests and location overl aps help users become friends in social network.

Just considering the average of p @ n means that the system can recommend friends better on average, but it doesn X  X  give strong insight into the distribution of p @ n . Hence, we have a distribution of p @ n in Fig. 3, which shows the user distribution of p @ n . For example, in Fig. 3, there is one point (2 , 0 . 026), which means that when we recommend 10 friends to all users, there are about 2.6% users making more than two friends in our recommendation. From the figure, we can see that there is no user making more than five friends in our top 10 recommendation. Compared our method with baselines, our method is the best and the improvement is huge. Although the LO , TS ALO and AT S models are worse than our method, they are better than the RR model. Fig. 2 and Fig. 3 show that no matter how many friends to recommend, our method has a big improvement than baselines on average and distribution.

When we see the Recal l and F 1 metrics, we don X  X  consider RR method be-causewecan X  X calculatethe Recal l and F 1 values for this method. Fig. 4 shows the recommendation results for all baselines and our method in Precision , Re-cal l and F 1 for the top 1 recommendation. This figure demonstrates that our method can significantly outperform the baselines according to these three mea-sures. For the Recal l and F 1 metrics, our method is not high, but it is better than the four baselines which are almost 0. We further analyze these friends we recommend false. They have following features: (i) some users don X  X  have enough posts; and (ii) there are not enough locations. These two reasons fur-ther confirms that common int erests and location overlaps are both important in our experiment. Furthermore, since location overlaps are important, we study whether users in Sina Weibo have geographic features. Five groups are divided based on the frequency a user goes to one location and it is shown in Fig. 5. From this figure, we observe that there are 364 users in our dataset go to a lot of locations. On the other hand, there are 1321 users stay in one location all the time. There are about 32% users in our dataset have a frequency larger than 60% which confirms regional factor exists in our dataset. In this paper, we propose a new method to recommend friends in social network from the perspective of not just common i nterests, but also real-life needs. We consider three characteris tics to select friends for a user. First, we use posts similarity to evaluate us ers X  common interests whic h is a basic factor between friends. Second, we use users X  location overlaps which promise the target users and recommended users can be friends in the real life. Third, we use the amount of published posts to simulate how active users are in Sina Weibo which implies that the recommended friends are active in Sina Weibo and they are more likely to make friends with others. The experimental results on Sina Weibo dataset show that our method significantly outperforms the current baseline methods in Precision , Recal l and F 1.

In the future, we plan to consider the d istances between users in real life for any given time to further improve the performance. On the other hand, we can use users X  hometown information in the recommendation which can further improve the performance of our method.
 Acknowledgement. This work is supported by the Natural Science Founda-tion of China under Grant No. 61272240 and 61103151, the Doctoral Fund of Ministry of Education of China under Grant No. 20110131110028, the Natu-ral Science Foundation of Shandong Pr ovince under Grant No. ZR2012FM037, the Excellent Middle-Aged and Youth Scientists of Shandong Province under Grant No. BS2012DX017 and the Fundamental Research Funds of Shandong University.

