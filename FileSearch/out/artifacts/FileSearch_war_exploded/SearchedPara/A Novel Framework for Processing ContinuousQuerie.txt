 C on t in u o us quer i es on m ovin g o b j ects mea n st o get the in sta n ta n e o us quer y resu l ts acc o rd in gt o the freque n tcha n g in g o fm ovin g o b j ects  X  p o s i t ion s .I t i sbe -c o m in g in creas in g ly i mp o rta n t due t o the wi de a v a il ab ili t yo f in e x pe n s iv ea n d c o mpact p o s i t ionin gde vi ces , the e vol ut ion o fm o b il ec o mmu ni cat ion sa n dthe n eed f o r i mpr ov ed lo cat ion-based ser vi ces .D ue t oi ts c o mp l e xi t y, se v era l tech -ni ques ( re vi e w ed in S ect ion 2 ) ha v ebee n de v e lo ped in the l ast fe wy ears f o r c on t in u o us ra n ge a n d KNN quer i es .Mo st o f the pr o p o sed a l g o r i thms per io d -i ca lly e v a l uate the mu l t i p l equer i es , m o re i mp o rta n t ly, the y ad o pt the i dea o f shared e x ecut ion w h i ch mea n st o re -use the quer y resu l ts a n dre -e v a l uate only the quer i es a ff ected b yo b j ect o rquer y updates .T heref o re , the y des i g nv ar io us tech ni ques a n d data structures t o a i dthest o rage a n dc o mputat ion, w h i ch seems rather c o mp li cated a n dhardt o u n dersta n d .

Wi th the ad v e n t o fm o der n Ch i p M u l t i-P r o cess o rs ( C MP s ), c on t in u o us quer y a l g o r i thms n eed t o be adapted t o e x p loi tsuchmu l t i-c o re des i g n s .Mo der n C MP s in tegrate mu l t i p l ec o res a n dpr ovi de hard w are supp o rt f o rpara ll e l pr o cess in g . Unli ke ru nnin g on s in g l ec o re C PU s , mu l t i threaded pr o gram ru nnin g on C MP s ca ni mp l eme n trea l para ll e li sm , because each c o re c o u l d supp o rt at l east on e thread .B ased on th i s o bser v at ion, o ur i dea t o s olv e the pr o b l em o fmu l t i p l e c on t in u o us quer i es i st o e x p lo re th i sk in d o fpara ll e li sm .W ed ono t use shared e x ecut ion bet w ee n quer i es ,on the c on trar yw ere -e v a l uate a ll the quer i es per io d -i ca lly. To acce l erate the w h ol e data set updates a n dre -e v a l uat ion, w epr o p o se a mu l t i-thread in g based frame wo rk .Tov er i f y the e ff ect iv e n ess o ftheframe wo rk , w epr o p o se t wo KNN a l g o r i thms .Soo ur a i m i st o test w hetheram o re d i rect a l g o r i thm a n dhard w are supp o rted mecha ni sm ca n pr ovi de effic i e n tpr o cess in g . Mo re ov er ,w earguethat w esh o u l d take the hard w are de v e lo pme n t in t o c on s i d -erat ion w he n des i g nin g n e w a l g o r i thms a n ds o met i mes c o mp li cated a l g o r i thms are no t n ecessar y.

C on tr i but ion s o fth i s paper ca n be summar i zed as f ollow s : 1. W epr o p o se a ge n era l mu l t i-thread in g based frame wo rk f o rc on t in u o us quer i es . 2 .B ased on the frame wo rk ,w epr o p o se a nov e l quer y gr i d in de x based KNN 3. B ased on the frame wo rk ,w epr o p o se a d i rect m ovin g o b j ect gr i d in de x based 4 .W ec on duct e x te n s iv ee x per i me n ts t o sh ow the e ff ects o fd iff ere n t parame -C on t in u o us quer i es on m ovin g o b j ects ca n be c l ass i fied in t o t wo c l asses .T he c on t in u o us ra n ge quer i es a n dthec on t in u o us Kn earest n e i ghb o r (KNN) quer i es .
P rabhakar et a l.[1-2 ] pr o p o sed the Q -in de x, w h i ch in de x es ra n ge quer i es us -in ga n R -tree -li ke structure .A teache v a l uat ion step ,only th o se o b j ects that ha v em ov ed s in ce the pre vio us e v a l uat ion step are e v a l uated aga in st the Q -in de x. Mo kbe l et a l.[3-4 ] pr o p o sed sca l ab l e in creme n ta l hash -based a l g o r i thms SINA a n d S E A-C NN f o rra n ge a n d KNN quer i es .SINA a n d S E A-C NN in de x b o th quer i es a n d o b j ects , a n dach i e v esca l ab ili t y b y emp loyin gsharede x ecu -t ion a n d in creme n ta l e v a l uat ion o fc on t in u o us quer i es .Y ueta l.[5] pr o p o sed a meth o d , hereafter referred t o as YPK-C NN, f o rc on t in u o us m oni t o r in g o fe x act KNN quer i es .W he n re -e v a l uat in ga n e xi st in gquer y q ,YPK-C NN makes use o f i ts pre vio us resu l t in o rder t o restr i ct the search space .A sa n e n ha n ceme n t , Mo urat i d i seta l.[6] prese n ted a tech ni que ca ll ed C PM that defi n es a c on cep -tua l part i t ionin g o fthespaceb yo rga ni z in ggr i dce ll s in t o recta n g l es .Lo cat ion updates are ha n d l ed only w he no b j ects fa ll in t o the vi c ini t yo fquer i es , he n ce i mpr ovin gs y stem thr o ughput .

T he ab ov emeth o ds tr i es t o m ini m i ze the e x ecut ion t i me o fa l g o r i thms , h ow-e v er , t wo o ther a l g o r i thms w ere pr o p o sed t o m ini m i ze the c o mmu ni cat ion c o st bet w ee n c li e n ta n dser v er .H ueta l.[ 7 ] first addressed the lo cat ion update i s -sue a n dpr o p o sed a ge n er i cframe wo rk f o rm oni t o r in gc on t in u o us spat i a l quer i es ov er m ovin g o b j ects w h i ch m ini m i zes the c o mmu ni cat ion c o st .H seuh et a l.[ 8 ] pr o p o sed a part i t ion-based l az y update appr o ach that s i g ni fica n t ly reduces u n-n ecessar ylo cat ion updates b y ma in ta inin ga Lo cat ion In f o rmat ion T ab l e (LIT) on each m ovin g o b j ect .F urther ,Mo urat i d i seta l.[9] stud i ed m oni t o r in gm ov-in g o b j ects in r o ad n et wo rks .By us in g the pr o pert i es o fthespat i a ln et wo rk a n dthe n et wo rk c on stra in t character i st i c o fthem ov eme n ts o fm ovin g o b j ects , re -e v a l uat ion o fthemu l t i p l equer i es c o u l d be reduced .D em i r y urek et a l[11] pr o-p o sed a ER -C KNN meth o d w h i ch uses the Euc li dea n d i sta n ce t o gu i de search in g on r o ad n et wo rks .

To summar i ze , m o st o ftheab ov e -me n t ion ed c on t in u o us quer y tech ni ques ad o pt a mem o r y based quer y pr o cess in gframe wo rk a n d o fte n use the gr i d in de x t o st o re e i ther the m ovin g o b j ects o rthemu l t i p l equer i es t o a i dthe w h ol equer y pr o cess .T he c o re i dea o fm o st a l g o r i thms i st o des i g n the search strateg yino rder t o m ini m i ze the access t o the m ovin g o b j ect dataset w he n e v er updat in g o rquer y-in g .Allo fthemuseas in g l ethreadt o dea lwi th the mu l t i p l equer i es a l th o ugh the yo fte n share the e x ecut ion s .Non e o fthemtr y t o e x p loi t the capab ili t i es o f m o der n C MP s , a n dthec on t in u o us quer y a l g o r i thm i s o fte n t o s o me e x te n tt oo c o mp li cated .T h o se are the p oin ts w here o ur wo rk ca n be d i st in gu i shed fr o m . T he pr o b l em t o be s olv ed ca n be descr i bed as : u n der the c on d i t ion that the in g , g iv e the up t o date quer y resu l ts acc o rd in gt o these cha n ges . C o mpared t o the trad i t ion a l meth o ds ,w eusemu l t i-thread in gtech nolo g y t o re -c o mpute a ll the quer i es in each per io da n dtr y t o e x p lo re the para ll e l capab ili t yo fm o der n C MP s .T heref o re ,w epr o p o se a M u l t i-T hread in gbased F rame wo rk f o rC on t in-u o us Quer i es (MF CQ ), li ke Fi gure 1 sh ow s .

T he ma in i dea o fdes i g nin gtheframe wo rk i s :on mu l t i-c o re p l atf o rm ,w e tra n sf o rm the c on t in u o us quer i es in t o per io d i ca lly e v a l uated quer i es ,in each per io da ll quer i es a n d o b j ects are pr o cessed thr o ugh three seque n t i a l stages ,i. e . the updat in g stage , the o pt i m i zat ion stage a n dthee x ecut ion stage .In each stage mu l t i-thread in g i susedt o fi ni sh the c o rresp on d in gtask .MF CQ i s deemed t o be age n era l frame wo rk f o rthef ollowin greas on s :(1) i t i sc o mpat i b l e wi th v ar io us quer y t y pes .By us in gth i sframe wo rk ,w eca n e x ecute b o th the ra n ge quer y a n d KNN quer y t o gether wi th o ther t y p i ca l quer y t y pes .( 2 )i t i sc o mpat i b l e wi th v ar io us in de x meth o ds a n d o pt i m i zat ion meth o ds .To e x p l a in these be n efits ,w e will prese n tt wo d iff ere n t in de x based KNN a l g o r i thms respect iv e ly in sect ion 4 a n d 5. H ere w efirstg iv es o me deta il ed e x p l a n at ion s on each stage in MF CQ . 3.1 The Data Updating Stage In the pr o b l em o fc on t in u o us m oni t o r in g o fm ovin g o b j ects , the p o s i t ion s o fthe m ovin g o b j ects a n dthequer i es are c on t in u o us ly cha n g in g .T heref o re ,w e n eed t o update a n dgetthe l atest in f o rmat ion o f o b j ects a n dquer i es bef o re pr o cess in g the quer i es , mak in g sure that the quer y resu l ts are in sta n ta n e o us a n dc o rrect .
A s w ead o pt a per io d i ca l pr o cess in gstrateg y, w e n eed t o bu ff er the updated data in aper io d .W euset wo bu ff er queues ( as sh own in the l eft o f Fi gure 1) t o st o re these updated data .In the beg innin g o feachper io d ,w eusemu l t i p l e threads t o update the m ovin g o b j ects a n dquer i es in t o the i rc o rresp on d in gdata structures .

In the pract i ca li mp l eme n tat ion, w estud y t wo data st o rage meth o ds w h i ch are in acc o rda n ce wi th the quer y a l g o r i thms :on e i s in de xin gthequer i es wi th gr i d , a n dus in ga lin ear li st t o st o re m ovin g o b j ects ; the o ther i s in de xin gthe m ovin g o b j ects wi th gr i d , a n dus in ga lin ear li st t o st o re quer i es .To be c on crete , w he n us in gmu l t i p l e threads t o update the first k in d o f structures w eset w r i te lo cks t o the ce ll s o fthequer y gr i d in de x, only b y acqu i r in gthe lo ck ca n athread w r i tes n e w data .Al s ow eset w r i te lo cks t o the o b j ect li st .Si m il ar o perat ion s are set on the sec on dk in d o f structures . 3.2 The Optimization Stage B ecause datasets are st o red d i rect ly in the ma in mem o r y, w ec o u l duses o me tech ni ques t oo pt i m i ze the cache access .H ere w epr o p o se a s o rt in gbased o pt i-m i zat ion tech ni que .

T ake the first k in d o f data structures f o re x amp l e .In the quer y a l g o r i thm that will be e x p l a in ed in sect ion 4 ,w euseeach o fthe o b j ects st o red in the li st t o search the gr i d in de x. D ur in gth i spr o cess ,i f w est o re the m ovin g o b j ects f ollowin gthe i rarr ivin gseque n ce , the n the cache access h i trate o fthequer y in de x based a l g o r i thm ma y be decreased .T h i s phe no me non c o u l dbee x p l a in ed b yFi gure 2 .

In the quer yin de x based a l g o r i thm , quer i es are in de x ed acc o rd in gt o the i r spat i a l re l at ion wi th the ce ll s .Fo reach o b j ect ,i ts ce ll i sc o mputed a n dthe quer i es that be lon gt o the ce ll are accessed . C on s i der the e x amp l esh own in Fi gure 2 .T he o rder in w h i ch the o b j ects appear in the li st i ssh own on the l eft o f the figure in the  X  X n s o rted li st  X . Ce ll(0,3) i s the first ce ll t o be accessed f o r w efirstpr o cess o b j ect P 1 .How e v er ,w he nw epr o cess o b j ect P 2 , ce ll(0,0) must be accessed w h i ch mea n s in de x data in ce ll(0,3) ma y be rep l aced o uts i de the cache , resu l t in g in acachem i ss w he nw epr o cess the f ollowin g o b j ect P 3 as i t will a l s o access ce ll(0,3). T h i s phe no me non sh ow sus i f w ec o u l ds o rt the o b j ect li st acc o rd in gt o the o b j ects  X  spat i a l ad j ace n c y, the n the cache h i tratema y be in creased . O n the r i ght o f Fi gure 2 i sthes o rted li st .No t i c in gthat , th i sk in d o f s o rt in g o pt i m i zat ion d o es n X  tstressa ny c on stra in ts on o b j ects  X  m ov eme n t .Si m il ar t o the quer yin de x, w he nw euse o b j ect in de x based quer y a l g o r i thm w ec o u l d a l s o s o rt the quer yli st .

W eusethe Hil bert -cur v e [10] t o s o rt the li st .I tmapsthe o b j ects / quer i es that lo cated in the same gr i dt o as in g l ed i me n s ion a lv a l ue .W euseth i s v a l ue as the ke y t o s o rt , a ny fam o us s o rt a l g o r i thm ca n be used .Ino ur e x per i me n t ,w euse mu l t i-threaded merge s o rt f o rth i s o pt i m i zat ion stage . 3.3 The Execution Stage In fact , the first t wo stages in MF CQ prepare data f o rthe l ast stage .In the e x ecut ion stage , the frame wo rk ca ll sthequer y a l g o r i thm t o get the fi n a l resu l ts f o reachquer y.

In th i s stage ,w ead o pt the data para ll e l meth o ds that u ni f o rm ly part i t ion s the lin ear li st t o equa l s i zed wo rk set . Each thread takes on e wo rk set as the i r in put .In the quer yin de x based a l g o r i thm , mu l t i p l e threads ma y c on curre n t ly w r i te the same quer y resu l t li st .In th i ss i tuat ion, w eset w r i te lo cks t o the resu l t li st t o a voi d w r i t in gc onfli cts . In th i s sect ion w epr o p o se a Q uer yin de x based KNN Quer y a l g o r i thm ,i. e . Q -KNN. 4.1 Building the Query Index W ebu il dagr i d in de x f o rmu l t i p l equer i es t o he l pfi l ter the mass iv e o b j ects .T he gr i d in de xi sat wo d i me n s ion a l space part i t ion ed in t o  X   X   X  ce ll s .In each ce ll w e keep t wo li sts f o rthest o rage o fquer i es .Fi gure 3i sa n e x amp l e o fthequer y in de x. Fi gure 3i sa 6  X  6 gr i d . Each ce ll keeps t wo li sts ca ll ed the M a inli st a n dthe S ec on dar yli st st o r in gthefu lly c ov ered o rpart ly ov er l apped quer i es .T ake the ce ll(1, 4 ) as a n e x amp l e , curre n t ly only Q 1 fu lly c ov ers th i sce ll a n d no o ther quer i es are ov er l apped wi th i t , s o the M a inli st o fce ll(1, 4 ) st o res Q 1 a n dthe S ec on dar yli st st o res no th in g .Fo rce ll( 4 ,3), there d o es n X  te xi st a ny quer y that fu lly c ov ers th i sce ll, w h il e Q 1 a n d Q 2 are part ly ov er l apped wi th i t .T hus i ts M a inli st st o res no th in ga n dthe S ec on dar yli st st o res Q 1 a n d Q 2 .
Fo rra n ge quer i es ,i t i seas y a n dd i rect t o bu il dsuch in de x acc o rd in gt o the spat i a l re l at ion sbet w ee n ra n ge quer y a n dthece ll. How e v er f o r KNN quer y, w e n eed add i t ion a l tech ni ques .W efirstc o mpute a h i st o gram that keeps the n umber o f o b j ects in each ce ll. T he nw e j udge w hether the ce ll that a quer y res i des in c on ta in m o re tha nKo b j ects ,i f y es ,w ec o mpute the ma xi mum d i sta n ce bet w ee n the quer y a n dthef o ur c o r n ers in the ce ll. U s in gthed i sta n ce as rad i us ,w edra w ac i rc l e .Fin a lly, add the quer y t o the li sts o fthece ll sthatarec ov ered b yo r ov er l apped wi th the c i rc l e .I f the curre n tce ll d o es n X  tc on ta in e no ugh Ko b j ects , the nw eaddadd i t ion a l 8ce ll sar o u n dthece n tra l ce ll u n t il at l east Ko b j ects are f o u n d . 4.2 Q-KNN Query Algorithm L et Q = { q 1 , ... ,q | Q | } be the quer y set , X = X 1  X  X 2  X  ...  X  X n = { x 1 , ... ,x | X | } be the o b j ect set . X i su ni f o rm ly part i t ion ed in t o subsets that are pr o cessed b y each thread .Fo r each subset X i , a l g o r i thm 1 sh ow s the pr o cess .T he quer y pr o cess f ol-low stheseque n ce : f o reach o b j ect in X i , in lin e2thea l g o r i thm i de n t i fies the ce ll that the o b j ect res i des in b y ca llin gthefu n ct ion GetCell() .F r o m lin e 3 t o 7 ,i t searches the M a inli st in the lo cated ce ll, i fthe n umber o f o b j ects in the ce ll i s l ess tha nK, the n add the o b j ect t o the resu l t li st ,o ther wi se i t updates the resu l t li st acc o rd in gt o d i sta n ce c o mpar in g .F r o m lin e8t o1 4 , the a l g o r i thm searches the S ec on dar yli st in the ab ov es i m il ar w a y. T he reas on w h yw euset wo i terat ion s i s that quer i es in the M a inli st i sm o re li ke t o c on ta in the curre n t o b j ect , s o d i sta n ce c o mpar in gca n be reduced .
 In th i s sect ion w epr o p o se a M ovin g o b j ect in de x based KNN Quer y a l g o r i thm , i. e . M-KNN.

T he meth o dt o bu il dam ovin g o b j ect in de xi sd i rect a n deas y. W emapthe m ovin g o b j ects t o the gr i dce ll sacc o rd in gt o the i rspat i a llo cat ion s .In each ce ll w eusea li st t o st o re the p oin ters t o the m ovin g o b j ects .
T he M-KNN a l g o r i thm ca n be e x p l a in ed b yFi gure 4 .W e descr i be the quer y pr o cess thr o ugh a 3-NN e x amp l e .Fi rst , the o b j ect li st o fthece ll that the quer y res i des in i ssearched ,i f the curre n tce ll d o es n X  tc on ta in e no ugh Ko b j ects , the n the ad j ace n t8ce ll sar o u n dthece ll are searched , r i ght now w efi n d 3o b j ects a n d take them as the 3-NN quer y resu l ts .A fter that ,w ec o mpute the ma xi mum d i sta n ce bet w ee n the 3-NN sa n dthequer y. T ak in gthema xi mum d i sta n ce as the rad i us ,w ethe n search the ce ll sthatare ov er l apped wi th the c i rc l e , a n dfi n a lly fi n d that the rea l3-NN sare p 1 , p 2 , p 4 .
In the quer y e x ecut ion stage ,w eu ni f o rm ly part i t ion the quer i es in t o se v era l subsets that are pr o cessed b y mu l t i p l e threads .Fo reachquer y, a l g o r i thm 2 sh ow s the pr o cess .T he i dea o f M-KNN a l g o r i thm i ss i m il ar t o the o b j ect in de x based quer y a l g o r i thm pr o p o sed in YPK-C NN, the d iff ere n ce i s in the th i rd step w e only add the ov er l apped ce ll s , h ow e v er ,inYPK-C NN add i t ion a l 4darkb l ack ce ll s in Fi gure 4 will be added in t o the T empCe llLi st .
 In th i s sect ion, w ec on duct e x te n s iv ee x per i me n ts t o e v a l uate the perf o rma n ce o f o ur pr o p o sed t wo a l g o r i thms u n der the MF CQ frame wo rk , m o re ov er w ec o mpare i t wi th the YPK-C NN a l g o r i thm .

W eusethreed iff ere n tk in ds o fC PU p l atf o rm : as in g l ec o re C PU In te l Ce l er on 3. 2G H z , a dua l c o re C PU In te lP e n t i um E22 00 2 . 2G H z wi th 1M L 2cachea n d aquadc o re C PU In te l C o re 2 Quad Q82 00 wi th 4 ML 2cache . Each o fthe p l atf o rms has 1 G B mem o r ywi th Win d ow s XP in sta ll ed .D ua l c o re p l atf o rm i s take n as the defau l te nvi r on me n t .All the me n t ion ed a l g o r i thms are i mp l eme n ted in C ++ u n der the Vi sua lS tud io 2 005 de v e lo pme n te nvi r on me n t .

T he m ovin g o b j ects a n dquer i es are s yn thet i ca lly ge n erated .T ab l e 1 summa -r i zes the parameters u n der inv est i gat ion, a lon g wi th the i rra n ges a n ddefau l t v a l ues .T he am o u n t o f the data i sb i gger tha n that o fdatausedb y the pre v a l e n t a l g o r i thms .No t i c in gthat in Q -KNN w eupdatea ll the o b j ects per io d i ca lly a n d defi n ethequer y ag ili t y as the rat io o fthecha n ged spat i a l quer i es t o the t o ta l quer i es .How e v er , in M-KNN, w edefi n ethe o b j ect ag ili t y as the rat io o fthe n umber o f o b j ects that m ov e o uts i de o fthe i r o r i g in a l ce ll st o the t o ta ln umber o f o b j ects , a n dthequer y ag ili t yi sthesame wi th that in Q -KNN. W ec on tr ol the o b j ect ag ili t y thr o ugh cha n g in gthe o b j ects  X  speed .

In the f ollowin ge x per i me n ts the C PU t i me i sc o mp o sed o f three parts : the updat in gt i me , the o pt i m i zat ion t i me a n dthee x ecut ion t i me .W eru n the frame -wo rk 10 per io ds a n dc o mpute the a v erage C PU t i me as the perf o rma n ce metr i c . 6.1 Effects of the Cell Size and Object Distribution to the Fi rst ,w etestthee ff ects o fthece ll s i ze a n d o b j ect d i str i but ion t o d iff ere n t a l g o r i thms that are used in the frame wo rk .Fi gure 5 a n d 6 sh ow the resu l ts respect iv e ly.

Fi gure 5 sh ow sthee ff ects o fthece ll s i ze t o the pr o p o sed a l g o r i thms u n der defau l tdataam o u n t .P erf o rma n ce o ftheQ -KNN a l g o r i thm in creases wi th the ce ll s i ze , h ow e v er w he n the ce ll s i ze i sb i gger tha n 500, the perf o rma n ce in creases s li ght ly. Fo r M-KNN a l g o r i thm , there e xi sts a no pt i ma l ce ll s i ze .In the l ater e x per i me n ts ,w ech o se ce ll s i ze 500 f o rQ -KNN a n d 600 f o r M-KNN.
 Fi gure 6 sh ow sthee ff ects o f o b j ect d i str i but ion t o the pr o p o sed a l g o r i thm . T he ske w ed data set i sc o mp o sed o f 10% o fthe o b j ects d i str i buted u ni f o rm ly ov er the w h ol ereg ion a n d o ther 90% o fthe o b j ects f o rm f o ur Gauss i a n c l usters . Quer i es are u ni f o rm ly d i str i buted .Fo rQ -KNN a l g o r i thm , data d i str i but ion has l ess e ff ect t oi ts perf o rma n ce .W he no b j ect d i str i but ion i sske w ed , the perf o r -ma n ce decreased s li ght ly. B ecause o b j ect d i str i but ion only a ff ects the quer yin-de x bu il d in gpr o cess , h ow e v er the in de x bu il d in gacc o u n ts f o rasma ll part o fthe w h ol epr o cess .Fo r M-KNN a l g o r i thm , data ske wn ess has b i gger e ff ect .B ecause w he no b j ect d i str i but ion i sske w ed , pr o cess in g on equer yn eeds t o search m o re ce ll s w h i ch mea n sm o re d i sta n ce c o mpar in g .In the l ater e x per i me n ts ,w eusethe u ni f o rm data . 6.2 Effects of Data Agility to the Framework N e x t ,w etestthee ff ects o fdataag ili t y t o the frame wo rk .
Fi gure 7 ( a ) sh ow sthee ff ects o f o b j ect ag ili t y. Fo rQ -KNN a l g o r i thm ,w e update a ll o b j ects per io d i ca lly, s oo b j ect ag ili t yi s no tc on s i dered here .Fo r M-KNN a l g o r i thm ,o b j ect ag ili t yonly a ff ects the perf o rma n ce o f in de x updat in g , the b i gger ag ili t y the m o re in de x updat in gt i me .How e v er f o rgr i d in de x, updat in g t i me i sfar l ess tha n the quer yin gt i me , s o the perf o rma n ce decrease i s no te vi de n t .
Fi gure 7 ( b ) sh ow sthee ff ects o fquer y ag ili t y. Fo rQ -KNN, the b i gger quer y ag ili t y the m o re quer yin de x updat in gt i me .How e v er , f o r M-KNN as w e keep a u ni f o rmed quer y dataset , a n dper io d i ca lly re -c o mpute a ll quer i es , s o the quer y ag ili t y d o es n X  tha v e o b vio us e ff ect on the quer y perf o rma n ce . 6.3 Performance of Q-KNN under Different CPU Platforms T he f ollowin ge x per i me n t tests the perf o rma n ce o fQ -KNN u n der d iff ere n tC PU p l atf o rms .T he perf o rma n ce cur v e o f M-KNN i ss i m il ar .

Fi rst ,w eusethedefau l t parameters t o test the perf o rma n ce o fQ -KNN u n der d iff ere n tC PU sb y sett in gd iff ere n tthread n umbers .A sfigure8sh ow s ,on s in g l e c o re p l atf o rm , mu l t i-thread in gca n X  tbr in gperf o rma n ce i mpr ov eme n t ,on the c on trar ywi th the gr ow th o fthread n umbers the C PU c o st bec o mes l arger .T h i s i s because on s in g l ec o re C PU, w eca n X  trea li ze the rea l para ll e li sm , thread s wi tch bec o mes a b o tt l e n eck w he n us in gmu l t i-thread in g .How e v er ,on dua l c o re o rquad c o re C PU p l atf o rm , mu l t i-thread in ghas v er y e vi de n tperf o rma n ce super io r i t y. W he n thread n umber i sequa l t o the C PU c o re n umber , the perf o rma n ce get o pt i ma l. How e v er w he n the thread n umber i sb i gger tha n the c o re n umber , perf o rma n ce a l s o decrease li ke that e x ecuted on s in g l ec o re C PU.

T he n, w etestQ -KNN on dua l c o re a n dquadc o re C PU p l atf o rms , a n dset the thread n umbers t o 2a n d4separate ly. A s Fi gure 9 sh ow s ,wi th d iff ere n t am o u n t o f datasets , Q -KNN e x ecuted on quad c o re C PU p l atf o rm has much better perf o rma n ce as much as t wi ce the perf o rma n ce o fthate x ecuted on dua l c o re C PU w h i ch dem on strate that the mu l t i-threaded frame wo rk has v er y g oo d sca l ab ili t y.
 6.4 Comparisons between Different Algorithms Fin a lly, w etest o ur pr o p o sed a l g o r i thms t o gether wi th the YPK-C NN a l g o r i thm b y us in gd iff ere n tdataam o u n t .

Fi gure 10 sh ow sthatu n der d iff ere n tam o u n t o f o b j ects a n dquer i es , the pr o-p o sed a l g o r i thms e x ecuted u n der the MF CQ frame wo rk i sm o re effic i e n ttha n the YPK-C NN a l g o r i thm .T hat v er i fies o ur o b j ect iv e w h i ch i st o sh ow the e ff ec -t iv e n ess o fe x p lo r in g the para ll e l capab ili t yo fm o der n C MP s .
Fi gure 10 a l s o sh ow sthatu n der m o st c i rcumsta n ces , the Q -KNN a l g o r i thm i s better tha n the M-KNN a l g o r i thm , e x cept in the case w he n the n umber o f m ovin g o b j ects i smuchb i gger tha n that o fthequer i es . In th i spaper ,w erec on s i der the pr o b l em o fc on t in u o us quer i es on m ovin g o b -j ects .W e w a n tt o test w hether a m o re d i rect a l g o r i thm that are stre n gthe n ed b y mu l t i-thread in gtech nolo g y ca no utperf o rm the trad i t ion a lin creme n ta l but s o-ph i st i cated a l g o r i thms .T hus ,w edes i g n amu l t i-thread in g based frame wo rk f o r c on t in u o us quer i es a n dpr o p o se t wo KNN a l g o r i thms .T he e x per i me n ta l resu l ts sh ow that the pr o p o sed frame wo rk i sm o re effic i e n ttha n the trad i t ion a lYPK-C NN a l g o r i thm ,w h i ch v er i fies o ur i dea .T he pr o p o sed a l g o r i thms ca n be eas ily m o d i fied t o supp o rt ra n ge quer i es .So, t o summar i ze w e deem that o ur pr o p o sed frame wo rk that i sc o mpat i b l e wi th v ar io us in de x es a n dquer y a l g o r i thms i s nov e l a n dge n era l.

W ebe li e v e that future research sh o u l dtakefu lly c on s i derat ion o fthem o der n hard w are capab ili t i es . Our future research will in c l ude : c o mpar in gtheframe wo rk wi th o ther a l g o r i thms such as the C PM a l g o r i thm .F urther m o re ,w e will stud y o pt i m i zat ion meth o ds w he n m ix ed t y pes o fquer i es c on curre n t ly e x ecute u n der MF CQ .
 Acknowledgments. T h i s research i s supp o rted b y the N at ion a lHi gh -T ech Research a n d D e v e lo pme n t Pl a no fCh in a ( 8 63) No. 2 00 8 AA1 2 A 2 11, N at ion a l S c i e n ce Fo u n dat ion Ch in a ,No. 4 06010 8 0.

