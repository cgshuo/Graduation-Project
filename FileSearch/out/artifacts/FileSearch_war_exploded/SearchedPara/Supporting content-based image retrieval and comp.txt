 1. Introduction
In medicine, two types of resources are becoming widely used: the Content-based Image Retrieval (CBIR) and the Com-consistency of image interpretation by using the computer results as a second opinion. Similar to CAD systems, CBIR uses information extracted from images to represent them. However, the main purpose of a CBIR system is to retrieve  X  X  X ases X  on elaborating a new image report, besides making the training and the diagnosing process faster. Moreover, CAD and CBIR tively relate low-level features (automatically extracted from image pixels) to high-level semantics based on the human patterns relating low-level and high-level image data as well.

In this work, association rules are employed to support both CAD and CBIR systems. Comparisons among the usage of most cases.
 This paper is structured as follows. Section 2 presents the background. Section 3 details the proposed methods FAR and direction for this work. 2. Background and related work compared instead of the images in the content-based image retrieval. When working with image datasets, performing exact  X  function to quantify how close (or similar) each pair of vectors is.

From the image processing point of view, it is important to gather as much features as possible to represent the images,
Moreover, in several situations, many features are correlated, meaning that they bring redundant information about the among the images of a given dataset? X  two feature vectors F  X f f 1 ; ... ; f n g and G  X f g 1 ; ... ; g marized in Table 1 .

In this paper we propose to employ association rules to weight features according to their significance, promoting con-based queries.
 tackles datasets with multi-valued classes. Another well-known feature selection technique is the Decision Tree Method pruned decision tree as the best subset, i.e., the set of features appearing in any path to a leaf node. applied to market basket analysis. The problem of mining association rules was firstly stated in [10], as follows. Let which are rules generated using statistical measurements. Our proposed method employs the StARMiner algorithm [11] according to their relevance, making a new and enhanced representation of the images.
 set of medical images, x j an image class, T x j 2 T the subset of images of class x  X  Z  X  and r f i  X  Z  X  be, respectively, the mean and standard deviation of the values of feature f rithm uses three thresholds defined by the user: c min  X  the minimum confidence to reject the hypothesis
H allowed between the average of the feature f i in images from a class x
D max  X  the maximum standard deviation of f i allowed in a given class. StARMiner mines rules of the form x hypothesis H 0 is rejected and the conditions given in Eqs. (1) and (2) are satisfied.
A rule x j ! f i , returned by the algorithm, relates a feature f behavior in images of class x j . This property indicates that f selection as explained in Section 3.

CAD systems employ image mining, a more complex process than the traditional data mining. Similarly to CBIR systems, algorithms used in medical image analyses are based on classification methods. However, relevant research that applies association rules in CAD systems have also been successfully developed.

An associative classifier was presented in [12]. It works as described as follows. In the pre-processing phase, images are cropped and enhanced using histogram equalization. The features mean, variance, skewness and kurtosis are ex-tracted from the images, and combined to other descriptors (e.g. breast position and type of tissue) to compose the im-the rules. The rules that can be generalized are pruned. Given a new example, the classifier counts the number of rules that are satisfied and chooses its class. The major drawback in this method is the low confidence allowed to mine the rules. Low confidence can generates many rules that mislead the classifier results and make the classification process extremely slow.

Association rules are used in [14] to classify mammograms as follows. First, features of shape are extracted from each the loss of significant information to mine rules with high confidence.

A framework to obtain association rules relating objects to categories of brain tumors was presented in [15]. It uses a by domain experts are used to restrict some itemsets to occur only in the head or body of a rule, reducing the number of the findings in the medical images.

Ordonez et al. [16] defined useful constraints and methods of association rule summarization to mine association rules who determines the appropriate intervals. While Ordonez et al. works with high-level image data, our proposed method works with low-level data automatically extracted from the images.

In this paper, we detail the methods FAR and IDEA. FAR is a new method that employs association rules to reduce the by the radiologist. Moreover, a prototype incorporating the IDEA method was experienced by radiologists, who demon-strated enormous interest in employing the system in their daily work. 3. Proposed methods
In this section we discuss the FAR and the IDEA association rule-based methods. The FAR method is proposed to improve tistical association rules. The IDEA method uses association rules to suggest diagnosis for new images. 3.1. The FAR method
F eature selection through A ssociation R ules (FAR) is a new method that incorporates association rules to promote con-weight the image features. Suppose that the images were classified in m high-level classes X  X f x ture f i , StARMiner aims at finding rules of the form x j x ! f i is found, it means that the feature f i well discriminates the images from class x features f i are those that generate rules x j ! f i , for every x the same way, the least discriminant features are those that do not generate any rule, meaning that they have a uniform behavior among all classes. Thus, to weight a feature f i
Eq. (3), obtained empirically, shows the weighting assigned to each feature f performed over the feature vector, and when q  X  1, all features are weighted according to their relevance. The values w tained are employed as the weights of the Weighted Minkowski distance. Hence, the equation of the distance function used in the FAR method is: The steps of the proposed method are illustrated in Fig. 1 .

The FAR method is executed in two phases: training and test phases. The training phase is composed of three steps: (1) the training phase to perform similarity searches. 3.2. The IDEA method
IDEA is also a supervised method that mines association rules relating visual features automatically extracted from images with the reports given by radiologists about the training images. The reports are composed of a set of keywords. Fig. 2 shows the pipeline execution of IDEA and Algorithm 1 summarizes its steps.
 Algorithm 1. The steps of the IDEA Method.
 Input : Training images, a test image
Output : Report (set of keywords). 1: Extract features of the training images 2: Execute Omega algorithm 3: Mine association rules 4: Extract features of the test image 5: Execute ACE 6: Return the suggested report (set of keywords) pose the diagnosis of the test image. We discuss each step of the IDEA method bellow. 3.3. Feature extraction
When dealing with medical images, the earliest phase of a CAD system demands to extract the main image features detailed in the section of experiments.
 3.4. The Omega algorithm
Omega is a novel supervised algorithm that performs discretization of continuous values. Omega processes each feature separately and discretizes a range of N sorted values in 4 N steps, having linear cost on N . Let f be a feature and f of the feature f in the image i . Omega uses a data structure that links each instance value f refer to an image instance I i as the pair  X  f i ; c i  X  . Let U belongs to an interval T k  X  X  U k ; U k  X  1 if and only if U not add any gain to the learning algorithm.
 sistency rate.

In Step 2 , Omega restricts the minimum frequency that a bin must present, avoiding a huge number of cut points. Omega fewer bins result from this step. However, some caution should be taken before adjusting the H example of the cut points found in Step 1 that are eliminated in the Step 2 of Omega, using H
In Step 3 , Omega fuses consecutive intervals, measuring the inconsistency rate to determine which intervals should be merged. Let M T k be the majority class of an interval T k
In Eq. (5), j T k j is the number of instances in the interval T rates below or equal an input threshold f max  X  0 6 f max that is eliminated in Step 3, using f max  X  0 : 35. The inconsistency rates f respectively f T 2  X  0 = 2  X  0 and f T 3  X  1 = 3  X  0 : 33. Since T f returned by the algorithm.
 feature, Omega computes the global inconsistency f G value, according to Eq. (6).
The feature selection criterion employed by Omega removes from the set of features every feature whose global inconsis-tency value is greater than an input threshold f G max  X  0 improve accuracy as well as to speed up the learning algorithm. 3.5. Association rule mining
The IDEA method employs the Apriori algorithm [13] to mine association rules. The output of the Omega algorithm and are used as input to the ACE algorithm. 3.6. The ACE algorithm by ACE in the suggested diagnosis if the following conditions are satisfied: confidence that h belongs to the diagnosis of the image. A threshold of minimum weight w limit the weight of an itemset in the suggested diagnosis. If w
Therefore, if 4 5 P w min , the itemset h  X f benign g is returned by the algorithm, otherwise it is discarded. 4. Experiments In this section, we present results of experiments performed to highlight the efficacy and effectiveness of both FAR and
IDEA methods. 4.1. Evaluating the FAR method
One important issue related to CBIR systems is how to evaluate their efficacy. A standard approach to evaluate the accu-P&amp;R graphs, the closer the curve to the top of the graph, the better the retrieval technique is. the experiments were the ones described in Section 2. The feature vectors were acquired from the Haralick descriptors (a texture-based extractor). The feature vectors obtained were indexed using the Metric Access Method (MAM) Slim-tree obtained from co-occurrence matrix that have been largely used for texture-based image representation. The features ob-tained from the Haralick descriptors to our experiments were variance, step, entropy, energy, homogeneity, 3rd order mo-ment, and inverse variance. These descriptors were combined in a single feature vector with 140 elements.
Due to space limitations, we show the results obtained from one representative dataset using only one type of feature dataset), and the test set composed of 528 images (75% of the MRI dataset).

The P&amp;R graphs of Fig. 6 correspond to the experiments performed on the MRI dataset represented by the texture-based extractor. In Fig. 6 , the graphs (a), (b), (c), (d), (e) and (f) correspond to the results using L selection (removing the irrelevant features, but not weighting); (3) the FAR method, using q  X  0 (weighting features and (5) the Relief-F algorithm and (6) the DTM algorithm. In the proposed method, the use of q  X  0 leads to dimensionality of 20% on the feature vector size.

As afore mentioned Fig. 6 shows the P&amp;R graphs obtained. Analyzing these graphs, we observe that the proposed tech-
In Fig. 6 b, the proposed technique achieves a considerable gain in the precision around 20% using q  X  0 (promoting dimensionality of feature vectors.
 distance function, the FAR method using q  X  1 and q  X  0 also presents a gain in precision. results.
 and show that it can be extended to other distance functions beyond the traditional Minkowski family and other types of features (although not shown here), presenting a notable gain in the precision of similarity queries.
Concluding, this experiment shows that FAR, in almost all cases, outperformed the precision obtained by traditional fea-precision of them. 4.2. Evaluating the IDEA method
Due to space limitations, we present only one experiment using the ROI dataset performed to validate the IDEA method to ing and the remaining images for training. The parameters of the Omega algorithm were set to H f max  X  0 : 3, which are the tuning parameters of the algorithm. The values of minimum support minsup = 0.005 and minimum confidence minconf = 1.0 were used as Apriori input parameters. The value w employed as ACE input parameter. The ROI dataset consists of 446 images of Regions of Interest (ROIs) comprising tumoral tissues, taken from mammograms collected from the Breast Imaging Reporting and Data System of the Department of Radi-diagnosis composed of three main parts: (amorph, pleomorph, linear, benign); 2. BI-RADS (Breast Imaging Reporting and Data System): six levels (0 X 5); 3. Histology : cyst, fibrosis, fatty tissue, etc. (total of 25 keywords).

In the feature extraction step, the images were segmented and features of texture, shape and color were extracted from the segmented regions. The segmentation process was performed eliminating image regions with gray level smaller than shown in Table 2 were extracted from the segmented regions and used to compose the feature vector representation of the images.

The Omega algorithm was applied to the image feature vector, which removed the 13th feature. It means that the 13th where 662 rules were mined. One example of rule mined in this step of IDEA method is:
The association rules generated and the test images were submitted to the ACE algorithm, which produced suggestions of images given by specialists and by biopsy results.

To validate the IDEA method in the task of determining the BI-RADS level of the images, we compared it with three other
BI-RADS categorization has a fuzzy separation among consecutive levels, even for a radiologist, and has high similarity among consecutive levels, we considered correct if the BI-RADS level suggested by the methods is the same or adjacent to the level annotated by the radiologist in the image report.

Note that the IDEA method leads to the highest values of accuracy and sensitivity. Moreover, IDEA suggests a set of key-are more feasible to be achieved employing association rules than applying other mining techniques.
In a batch execution, the test images were submitted to the IDEA system and the accuracy obtained considering the main the employed features represent more the BI-RADS level of the lesion than the morphological properties of the images.
A prototype, called the IDEA System, was implemented incorporating the IDEA method. The IDEA system was evaluated system shows the weight of each diagnosis keyword between parentheses. The weight indicates the level of certainty that the respective keyword will belong to the final diagnosis given by the radiologist. 5. Conclusions In this paper we propose to employ association rules to support two types of medical systems: CBIR and CAD. To improve on the statistical association rules mined using the image features and the image categories. The experiment performed employing the FAR method shows that the proposed method improves the precision of the query results up to 38%, always outperforming the precision obtained by the original features, while decreasing the memory and processing costs. We also values of accuracy and sensitivity when compared with other well-known classifiers (C4.5, Naive Bayes, and 1-Nearest the other methods should built a new model for each keyword returned, increasing the complexity of the process and the ation rules than applying other mining techniques. Radiologists who evaluated the system demonstrated good acceptance that association rules can be successfully employed to improve the medical CBIR and CAD systems, enhancing, speeding up and bringing more confidence to the work of the radiologists in their day-to-day task of analyzing medical images.
Future work includes comparing the time required to analyze the images and the precision of the radiologists using the proposed methods and without using them. Also, the methods can be added to the PACS of the Clinical Hospital of the Uni-versity of S X o Paulo at Ribeir X o Preto to be extensively used and evaluated.

References
