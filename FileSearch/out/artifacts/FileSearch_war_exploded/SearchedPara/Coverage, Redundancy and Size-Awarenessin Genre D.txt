 There is increasing awareness in the Recommender Systems field that diversity is a key property that enhances the useful-ness of recommendations. Genre information can serve as a means to measure and enhance the diversity of recommenda-tions and is readily available in domains such as movies, mu-sic or books. In this work we propose a new Binomial frame-work for defining genre diversity in recommender systems that takes into account three key properties: genre coverage , genre redundancy and recommendation list size-awareness . We show that methods previously proposed for measuring and enhancing recommendation diversity  X  X ncluding those adapted from search result diversification X  fail to address adequately these three properties. We also propose an ef-ficient greedy optimization technique to optimize Binomial diversity. Experiments with the Netflix dataset show the properties of our framework and comparison with state of the art methods.

Recommender Systems [1] are intelligent personalized In-formation Retrieval tools where the information need of a user is fully or partially expressed by means of her profile or history rather than a query. The Recommender Systems literature has mostly focused on optimizing the accuracy of their results, either by predicting the preference for an item by a user (rating prediction task) or by selecting a list of items to present to the user (top-N recommendation task). Focusing solely on accuracy involves the risk of producing dull recommendations that do not capture all the facets of interest to the users. Additional properties such as diversity, novelty, explicability and context-awareness are key to ex-pand the users X  options and make recommendations more informative and useful. This paper tackles the diversity problem for recommendations.

Most users have quite diverse tastes even within the same domain such as movies or books. For example, in the movie
W ork conducted during research stay at Telef  X onica Re-search.
 domain the same user may like Action but also Drama movies. Standard recommender systems, especially content based al-gorithms [1], fail to address this diversity of tastes. Rec-ommendation list diversification techniques can solve the user X  X  need for more varied recommendations and help her discover new products (music, movies, apps). Diversity is a list-wise property that has been shown to enhance the user satisfaction with respect to the recommendations [14]. Sev-eral notions of diversity have been proposed in the field and, although they are closely related, they are not equivalent. In this paper we focus on the notion of intra-list diversity [22], i.e., providing a list of varied recommendations that covers the different interests of the user. We define the notion of diversity using genres, which are used in domains such as books, movies and music.

We analyze the properties of genres and their utility in pro-viding diverse recommendations. We postulate three impor-tant properties that genre-based diverse recommendations should fulfill: 1) genre coverage , that is, each genre should be represented in a recommendation list according to both the interest of the user and its specificity; 2) redundancy : while it is important that all genres are represented it is equally important not to over-represent a particular genre  X  this is particularly important in domains where items can have more than one genre; and 3) recommendation list size-awareness , which focuses on the common screen space limi-tation to offer recommendations, and how it influences genre coverage and redundancy. Our analysis of state of the art diversification methods and metrics shows that they do not properly or fully address these three properties. We pro-pose a new Binomial framework that takes into account all the aforementioned properties. The framework consists of a metric to assess the diversity of recommendations and a greedy re-ranking strategy to optimize the diversity of rec-ommendations. We report experiments on a widely-known dataset for recommendation  X  Netflix 1  X  showing the prop-erties of our framework, and comparing it to state of the art methods.
We start by reviewing the related work and positioning our research with respect to the state-of-the-art. First, we present diversity as a key dimension of recommendation util-ity, and compare it to notions of diversity developed in the field of Information Retrieval. Second, we present the cur-rent state-of-the-art techniques for modeling recommenda-tion diversity that our work compares to.
Along with the progress targeting accuracy in Recom-mender Systems, researchers have realized that improving h ttp://www.netflixprize.com/ recommendations X  usefulness and user satisfaction may re-q uire more than being accurate. In particular, Herlocker et al. [10] stated that accuracy alone may not give users of recommender systems an effective and satisfying experience. McNee et al. [13] further specified that there are properties other than accuracy that have an effect on user satisfaction, namely coverage, diversity, novelty or serendipity.
Diversity in Recommender Systems, that is, addressing the user X  X  varied tastes and his/her need for diverse recom-mendations, has been shown to help improve the attractive-ness and usefulness of recommendations [14]. In this paper we focus on the so-called intra-list distance as defined by Ziegler et al. [22], i.e., how different are the items in a rec-ommendation list with respect to each other. In [22], Ziegler et al. propose taxonomies of products that are used to define a similarity metric between items, although other sources of diversity could be considered. For instance, in our previous work [19] we used movie genres as the source of diversity. On the other hand, Kabutoya et al. [12] and Shi et al. [17] extract latent topic models from the users X  interactions with the system in order to create diverse recommendations.
The problem of intra-list diversity in Recommender Sys-tems is related to search result diversification [7]. Users of general-purpose commercial search engines tend to submit short queries to represent their information needs. Such brevity in queries tends to lead to ambiguity  X  the query could have many possible interpretations  X  and underspeci-fication,  X  the topic the query refers to may have different facets. A way to cope with this problem is the diversifica-tion of web search results i.e., presenting lists of documents that cover as many interpretations or facets as possible of the original query as early as possible in the ranking [15]. The term subtopic is a commonly used word in this area for referring to query interpretations or facets altogether.
Different frameworks for measuring and enhancing the di-versity of recommendation lists have been proposed in the Recommender Systems and Information Retrieval literature. We briefly recall here the most closely related and relevant research to the scope of our work. Based on different princi-ples, most of them propose re-ranking an initial recommen-dation list so that diverse items can be shown early in the list. The most common approach is based on greedy selec-tion, which tends to achieve a good and efficient approxi-mation to an optimal re-ranking. Methods of this type fit in the algorithmic structure described in Algorithm 1. The algorithm depends on the specific definition of an objective function f obj which defines the marginal utility of an item with respect to items ranked above it.
 Algorithm 1 A greedy selection of the items in recommen-dation list R to produce a re-ranked list S .

One of the earliest and best-known proposals for diversity i n Recommender Systems is the  X  X opic list diversification X  from Ziegler et al.[22], to which we will refer as pair-wise framework throughout this paper. This framework defines a diversity metric called intra-list similarity (ILS), as the sum of similarities between all pairs of items in the recom-mendation: where sim is a similarity measure between items. In previ-ous work [18], we defined an extension to this metric known as expected intra-list diversity (EILD), which allows to con-sider the relevance and position of the recommended items. Ziegler et al. also proposed a greedy re-ranking strategy to optimize ILS which is structurally equivalent to the max-imal marginal relevance (MMR) by Carbonell and Gold-stein [5]: where  X  is a trade-off parameter between the original ranking and the diversity component and rel ( i ) is the relevance of the item i . Zhang and Hurley [21] also considered the problem of optimizing ILS as a quadratic optimization problem.
Another major line of work in measuring and enhancing diversity comes from search result diversification. In partic-ular, the intent-aware framework [2] considers the sum of the weighted marginal relevance of each subtopic s of a query, as it is the case of the intent-aware version of the ERR metric [6]: where p ( s ) is the probability of s being the intended subtopic behind the query. Santos et al. [15] proposed the explicit query aspect diversification (xQuAD), a re-ranking approach that optimizes intent-aware metrics by enhancing the cover-age of the different subtopics while minimizing their redun-dancy: where p ( i | s ) is the probability of choosing item i given the subtopic s . The IA-Select re-ranking approach of Agrawal et al. [2], with minor differences, can be considered as a sub-case of xQuAD with  X  = 1 . 0. This intent-aware framework was adapted to Recommender Systems in [19], by translating the concept of query subtopic to user aspects.

A third approach is the more recent proportionality framework by Dang and Croft [9] for search result diversifi-cation. They emphasize the need for covering each subtopic of the search query by offering a number of relevant docu-ments proportional to the interest of the subtopic they cover. The basis for measuring this proportionality is the so-called disproportionality metric, defined as: where v s is the expected number of documents that cover the subtopic s , k R s the actual number of documents, and n NR the number of non relevant documents. On top of DP, Dang and Croft propose a cumulative proportionality metric (CPR) that is the basis of their study. Analogously to the other proposals they define a greedy re-ranking approach, the proportionality method (PM), inspired on a seat assign-ment system for legislative elections in some countries: w here s  X  indicates the least-covered subtopic in S . Note that this proportionality framework admits a straightfor-ward adaptation to recommendation similar to that of the intent-aware framework.
A s defined in the Merriam-Webster dictionary 2 , a genre is  X  X  category of artistic, musical, or literary composition characterized by a particular style, form, or content X . We argue that genres can be used as the source for defining diversity as they:  X  explicitly define a conventional style of an item that has a common interpretation among users,  X  have the potential of representing the different tastes of individual users,  X  are well accepted for media categorization and are already available in most online media catalogs for movies, litera-ture, music, etc.  X  and it is safe to assume that the user will perceive the di-versity of the recommendation list if the genres are diver-sified among the recommended items. Other alternatives such as using item-to-item distance based on consump-tion patterns may have an effect on the inherent diversity of the recommendation, although this may not directly translate to a user perception of diversity.

Genres, nonetheless, present some particularities that need to be addressed to be used effectively. First, genres can have different levels of generality: for example, in the movie domain  X  X rama X  represents a very broad and vaguely de-fined style with many diverse movies belonging to this genre. On the other hand,  X  X estern X  is a quite specific movie type which is usually devoted to telling stories in the American Wild West. This generality is also reflected in the number of items for each genre. See Table 1 for the number of movies in each genre in the Netflix data set. We observe that the generality of each genre is also related to the perception of redundancy in a recommendation list. For example, three random westerns in a short recommendation list of five items feels more redundant than three random dramas. We will ex-ploit this observation when defining our probabilistic model.
S econd, genres do not usually define disjoint or isolated categories in their domains, and it is generally difficult to es-tablish a precise hierarchy among them. For example,  X  X he Lord of the Rings X  by Tolkien can be classified as Adven-ture, Fiction, High fantasy and British literature all at once. Moreover, careless use of sub-genres can lead to lower per-ceived diversity. For example, heavy metal and white metal  X  two closely related sub-genres  X  share the same musical techniques, modes of dress and performance and could be perceived as similar by a listener.

In order to illustrate the aforementioned properties of gen-res, we present the case of movie recommendations of the Netflix dataset. This dataset contains one hundred million ratings (from 1 to 5 stars) from 480,000 to 17,770 different movies. Using IMDb 3 , we found genre information for 9,320 movies in the dataset accounting for 83% of the ratings in the dataset. h ttp://www.merriam-webster.com http://www.imdb.com/
As seen in Table 1 the number of movies for each genre varies greatly, from 4,408 movies in X  X rama X  to only 1 movie in  X  X ews X . Genres do not form disjoint categories, as seen in Figure 1, which shows the overlap between the top 5 genres by a Venn diagram. One can see that, for instance, there are only 76 pure  X  X omance X  movies, and the other 96% of movies in this genre overlap with at least one other genre. Other genres also have a high degree of overlap. In fact, there is no clear hierarchical structure between the genres. It also seems that overlaps between genres do not follow any particular distribution. Furthermore, pairwise overlaps be-tween genres are not wide enough as to establish any clear sub-genre relationship between one another; even the nar-rowest and most specific genres (for example, Crime) have only partial overlaps ( &lt; 60%) with more general genres such as Drama. Figure 1: Venn diagram for the 5 most frequent gen-r es in the Netflix dataset.
We all have an intuitive idea of what genre diversity means for a list of movies. Yet when it comes to translating the intuition to a mathematical expression that reflects degrees of diversity by a numeric value, one has to be more specific about what the value should reflect. In particular, drawing from the IR diversity literature [2, 5, 20], two different di-mensions should be considered to this respect, namely genre coverage and redundancy. We take them as required prop-erties that a genre-based recommendation diversity metric should capture. Furthermore, we argue that these dimen-sions should be captured in a way that takes into account the properties of genres discussed and exemplified in Section 3. Moreover, we add to these a third and new requirement, size-awareness, which has not been explicitly considered in prior work. We briefly discuss each of these three properties next.
Coverage is the simplest and most obvious property. Since most users enjoy items from a variety of genres, it is impor-tant that the recommendation list covers as many of them as possible. Moreover, this coverage should be proportional: even when a user is interested in several genres, the person-alized importance of each genre is not equal. Therefore, the more a user is interested in a given genre, the more impor-tant it is that it is covered in the recommendation list.
Second, r edundancy should also be considered. It is not enough to have a high coverage of genres in order to have a diverse recommendation list. We may put it this way: it is as important to present items that cover a certain genre as to present other items that do not cover it. This notion of redundancy should take into account the preferences for the user as well as how general each genre is. Consider the extreme example shown in Table 2 where three movies are recommended to a user. Even if these 3 movies cover a total of 6 genres, the diversity is not quite perceivable. This is because all three movies cover a very narrow Western genre which makes the recommendation list highly redundant.
Finally, size-awareness . Coverage and redundancy should depend on the length of the recommendation list. Since the rise of mobile devices, the issue of having limited screen real estate to show recommendations requires a careful selection of what to display in that list. We also improve over existing diversity enhancing techniques by specifically addressing the recommendation list size. For example, when generating a short recommendation list one should only recommend items from the most relevant genres. In a longer list we could have higher genre redundancy depending on the generality of the involved genres. To the best of our knowledge this kind of adaptation has not been explored in prior work on search or recommendation diversity.

The reviewed techniques in Section 2.2 do not satisfy all these properties, in particular:  X  The intra-list similarity of Ziegler et al. [22] is defined as a pairwise property of elements in a list. A pair-wise property does not translate however as directly as we may expect to a list-wise property as we are stating. Further, it is not trivial to consider a similarity measure that takes into account by itself the generality of different genres and the user-specific importance of each of them. Essentially equivalent to the approach by Ziegler et al, the MMR scheme [5] displays the same limitations.  X  The intent-aware framework (IA-metrics, IA-select and xQuAD) [2, 15] considers coverage and redundancy, but as to the latter, the scheme does not fully capture the view that it is equally important to present items that cover a certain genre as to present other items that do not cover it. Specifically, the redundancy component of ERR-IA and xQuAD reduces the contribution of items that cover redundant genres, rather than discounting them as neg-ative from the list diversity value. Thus, items covering a redundant genre will contribute positively to the diver-sity even though the contribution diminishes with each additional occurrence of the genre. Furthermore, this re-dundancy does not detract at all from the contribution of additional genres the items can have in addition to the redundant one  X  that is, the genres are assumed to be totally independent from each other. The example in Ta-ble 2 illustrates this effect: it is fine (diversity-wise) in the context of this framework that all the movies in the recommendation list be westerns, as long as they cover also other genres. As a consequence, the diversifications are biased to retrieve items that cover many genres. We may reasonably question the implicit assumption in this scheme that multiple genres in the same item will pro-cure the same diversity perception as multiple genres over different items.  X  The work by Dang and Croft [9] does cover an idea of user-centric proportionality, but redundancy is not penalized and therefore, it may also suffer from the same problems as xQuAD for genre diversity.  X  None of the prior search or recommendation diversifica-tion methods takes into account the size of the retrieved list that will be presented to (or browsed by) the user.
The diversification schemes have therefore no means to consider this information to enhance diversity at a partic-ular rank cutoff.

Table 2: Example of redundant recommendations
A na  X   X ve approach for creating diverse recommendations consists in making a random selection of items. This ap-proach offers highly diverse recommendations, but it tends to approximate the poorest possible output in terms of the relevance of recommendations for the user interests, which makes it an option of little practical use. Still, the nature of the selection of genres in a random recommendation pro-vides a meaningful basis to build a revised notion of diver-sity upon it. In particular, we propose to use a binomial distribution to model how a personalized recommendation would match a random recommendation in terms of the di-versity of genres, using the binomial distribution to model the likelihood that a given genre will appear by chance in a recommendation, and take this as a reference to assess the diversity value of a given genre distribution among recom-mended items. In essence, this approach means considering random item recommendation as the optimal approach in terms of pure genre diversity, and using a binomial distribu-tion as the model for the genre distribution resulting from random item sampling.
The binomial distribution is the discrete probability dis-tribution of the number k of successes in a sequence of N independent Bernoulli trials with the same probability of success p . A random variable that follows this distribution, X  X  B ( N, p ), has the following probability mass function:
We base our definition of a genre diversity metric on top of this as follows. For each genre, we measure its coverage and redundancy using binomial distributions. We consider the selection of an item covering each genre as a Bernoulli trial, whereby for each genre, a recommendation list can be viewed as a sequence of Bernoulli trials. It must be noticed that these trials are not independent: a recommendation list is actually a selection without replacement. However, given that the typical recommendation list size is usually much smaller than the set of movies covering each genre, we can treat these trials as if they were independent, and therefore use the binomial distribution to model how likely is a genre to appear in a recommendation list.

More formally, for an item i and a set of genres G ( i ) covered by the item i , we consider the Bernoulli experi-ment of whether a randomly sampled genre g belongs to G ( i ). Given a set of items S , we denote the number of items belonging to that genre  X  the number of successes  X  as k S g = |{ i  X  S : g  X  G ( i ) }| . Given a recommendation list R of size N , we take the probability of a genre p g as a mea-sure of how  X  X dequate X  is the number k R g of items covering a genre g in that recommendation. As required in Section 4, this probability should take into account the generality of a genre and also the relevance of each genre for the user. We propose to combine global genre distribution statistics and personalized user preferences to estimate p g as follows.
On one side, the relevance of a genre for the user u can be estimated by using historical data, i.e., considering the local proportion p  X  X  g of the items the user has had some interaction with, denoted as I u . On the other side, the generality of the genre can be estimated by the global proportion p  X  g of items in the user preferences covering it. To join both global and local probabilities, we propose a simple linear combination:
With all the components of genre-based binomial distribu-tions, we now define scores for the coverage and redundancy of a recommendation list R . We measure coverage as a prop-erty defined by the genres that are present in the recommen-dation list and those that are not. The maximum coverage would be achieved when all the genres of interest are covered in the recommendation list. However, this maximum is not always reachable, especially in small recommendation lists. Therefore, when some genres cannot be covered, the cover-age should reflect the loss caused by their absence, which should be proportional to their importance. We thus define the coverage score as the product for the genres not repre-sented in the recommendation list of their probabilities of not being randomly selected according to X g , normalized by the | G | -th root:
We define redundancy, in turn, only by the genres covered in the recommendation list. The moment one genre appears more than once in a recommendation list, it can be poten-tially redundant, although not all genres will be equally af-fected. We model the redundancy of a genre appearing k times in a recommendation list by a  X  X emaining tolerance X  score that reflects how probable it would be that the genre appeared at least k times in a random list:
P ( X g  X  k | X g &gt; 0) = 1  X  Some examples of this  X  X emaining tolerance X  score are il-lustrated in Figure 2. The non-redundancy score is conse-quently defined as the product of the  X  X emaining tolerance X  scores for each covered genre, normalized by the | G ( R ) | -th root:
NonRed ( R ) = Y
Finally, the Binomial Diversity metric is defined as the product of both components: The previous definition can be adapted to consider only the relevant recommended items by re-defining k R g as the num-ber of relevant items covering the genre g and the number of trials N as the number of relevant recommended items.
Note that binomial relevance satisfies all the properties de-scribed in Section 4. It maximizes the coverage of the genres according to their p g . It takes into account user preferences via p  X  X  g . It penalizes over-represented genres by rapidly de-creasing their redundancy score. Lastly, it is adapted to the recommendation length by parameter N . F igure 2: P ( X  X  k | X &gt; 0) for different values of p and k of binomial distributions with N = 20 (contin-uous lines are drawn just as a reference).
A greedy re-ranking approach to optimize binomial diver-sity can be straightforwardly derived from the proposed met-ric scheme by just defining an objective function that linearly combines relevance and binomial diversity as follows: where the relevance component rel ( i ) can be defined as the score that the baseline recommender system assigns to the items for the target user, and the diversity component is the difference in terms of the binomial diversity in Equation 12 after adding the candidate item to the re-ranked recommen-dation list:
Because we are combining variables with different ranges and distributions, in the practical implementation of the ob-jective function we need to normalize both scores. In our experiments we do so by transforming them to z-scores, that is, we subtract their mean and divide by the standard devi-ation: norm X ( x ) = x  X   X  X  X 
I n addition to the empirical behavior of the proposed scheme, the Binomial Diversity metric fulfills qualitative properties that further specify the requirements stated ear-lier in Section 4. These properties can be formalized by four postulates shown in Table 3, which we propose as a basis on which diversification metrics can be analyzed and compared to each other, providing a clear way to show properties of each metric, identify and report the differences, in a similar perspective as proposed in [3]. Each postulate presents a rule, which expresses a simple idea on how we can reason about the genre-based diversity. We represent each of the postulates by providing two ranked lists of items (displayed horizontally in the table) with minimal differences. The ranked list denoted by  X  X etter X  should have strictly higher diversity that the one denoted by X  X orse X . For example, the first postulate expresses the idea that a ranked list of two items that cover two genres ( a and b ) is more diverse than a list of two items that cover only one genre ( a ). We mark a method with  X  X es X  only if the metric complies with the postulate, otherwise we indicate to what extent the metric fails to satisfy the postulated inequality (either the metric yields the opposite inequality, or is insensitive to the differ-ence between the two lists). We can see that all of the state of the art methods fail at least one of the tests, and only our proposed Binomial Diversity that combines Coverage and NonRed properties complies with all the postulates. For illustration, we show in the same table the diversity score that each of the analyzed diversification metric assigns to the prototypical lists.

In order to further illustrate how the diversification metric works and to show the benefits of the genre-based approach, we may examine the working example shown in Table 4. The example shows the top 20 recommended movies by the item-based kNN method ( R 0  X  R 1 ) for a sample user from the Netflix dataset, and the re-ranking of this list by the bino-mial diversification ( R 0  X  R 2 ), shown by the movies that are removed ( R 1 ) and added ( R 2 ) as a result of the re-ranking. The first row of the table summarizes the user taste profile ( p ), i.e. what fraction of movies of each genre he has rated. We see that the user is inclined towards Drama, Comedy and Action movies. We may also notice that the user sel-dom watched War movies. Both recommendation lists have an overlap of 11 movies ( R 0 ) that are shown below the user profile information. If we compare the differences between both recommendation lists  X  the kNN baseline R 0  X  R 1 and its diversification by the binomial scheme R 0  X  R 2 , we see that the baseline promotes Action and War movies that are over-represented in the final list of 20 movies, thus creat-ing a highly redundant recommendation. The recommender under-represents other genres such as Comedy which plays a major part in the user profile. The binomial diversifica-tion, on the other hand, uses the p  X  X  g and the list size as the reference for how many movies of each genre it should select to avoid redundancy. There are already 7 Action movies in the list and, therefore, it promotes several Comedies in-stead. Moreover, it includes new genres such as Animation, Children X  X  and Mystery that help improve the coverage score. This leads to a significant increase of the diversification score for the diversified list.
In order to show the properties of the Binomial Diver-sity framework, we have carried out two experiments on two common datasets for movie recommendation: the Movie-Lens1M 4 collection and the data from the Netflix Prize. In h ttp://movielens.umn.edu/ t he case of the Netflix Prize, no genre information was pro-vided in the data, so we extracted that information from IMDb. Discarding the movies for which we could not find genres, the resulting dataset includes 83 million ratings (on a 1-5 scale) by 480,000 users for 9,320 movies classified into 28 different genres. Due to the similarities between the re-sults for both datasets and the space limit, we only report and discuss the results for the Netflix dataset.
We split the rating data into training and test in a 5-fold cross validation. We followed a common evaluation proce-dure [4, 8] in which for each target user the recommenders are required to rank a list which includes both relevant and non-relevant items. The relevant items include all those hav-ing a test rating for the target user, where the rating value is above a threshold. In the set of irrelevant items we include all movies with a test rating value below the threshold, plus a set of 1000 randomly sampled movies.

We take for our experiment two baseline collaborative fil-tering (CF) algorithms: an item-based nearest neighbors rec-ommender [16] (Item-kNN) and the implicit Matrix Factor-ization algorithm (iMF) by Hu et al. [11]. We additionally include two non-personalized systems for further reference: recommendation by item popularity (PopRec) and random recommendation (Random). On each of the CF baselines, we applied the diversification approaches described in Sec-tion 2.2 (MMR, PM and xQuAD) and our Binomial diver-sification. The optimal value of the  X  parameter in these diversifiers is set by a grid search in the [0 , 1] interval by steps of 0 . 1. We additionally report as a reference the ef-fects of random re-ranking.

We evaluate the diversity of the recommendations with respect to genres by our proposed Binomial Diversity met-ric (BinomDiv), plus the diversity metrics presented in Sec-tion 2.2: EILD, ERR-IA and CPR. We report two addi-corresponding baseline (Wilcoxon p &lt; 0 . 05 ). tional simple diversity metrics: subtopic recall [20] (S-recall), which is the total number of returned genres (as a ratio on the total number of genres in the collection) in a recom-mendation; and the average number of subtopics (genres) per item (SPI), which will serve as a reference to study the bias discussed in Section 4 for the intent-aware framework. We consider two variants for the BinomDiv, EILD, CPR and S-recall metrics: one, denoted as all , where the genres of all recommended items are taken into account to mea-sure the diversity of the list, and another, denoted as rel , in which only those items relevant to the user are taken into ac-count. Complementarily to the diversity metrics, we report the normalized discount cumulative gain (nDCG) to check the relevance-based effectiveness (regardless of diversity) of all configurations.
Table 5 shows the results for all the recommender base-lines without any diversification step. All the metrics are evaluated at a 20 ranking cut-off. The algorithms are sorted by their nDCG score. We omit in this table the rel variants since they strongly correlate with nDCG when comparing recommendation algorithms with very different levels of ac-curacy, and thus they are not informative. For the metrics BinomDiv and CPR we show three alternatives (see Equa-tion 8): global or non-personalized (  X  = 0 . 0), intermediate (  X  = 0 . 5) and fully personalized (  X  = 1 . 0).
As we can see, the random recommender, as expected, has a very low accuracy, but scores very high for all diver-sity metrics, especially the non-personalized ones (BinomDiv and CPR with  X  = 0 . 0, EILD and S-recall). The popularity-based recommendation has a much higher accuracy than the random recommendations, but has generally lower scores for diversity metrics, specially in BinomDiv, where it is in gen-eral the worst alternative. The personalized recommenders, which have a higher accuracy than the non-personalized rec-ommenders, tend to score low in terms of non-personalized diversity metrics (BinomDiv and CPR with  X  = 0 . 0, EILD and S-recall), but clearly improve in BinomDiv and CPR when the user history is considered (  X  &gt; 0 . 0).
The results from Table 5 show consistent results, show-ing that random recommendations are diverse in nature, and personalized recommendations may benefit from a re-ranking diversification step.
We present in Table 6 the results of diversifying the iMF recommendation baseline. Diversifications of the other per-sonalized recommendation (Item-kNN) were also carried out with similar outcomes, but we omit them because of the space limit. All the metrics are computed again at a 20 ranking cut-off. The  X  parameter in BinomDiv (metric and diversifier) and CPR is set to 0 . 5. As mentioned before, the  X  parameter value (shown in parenthesis) for the bino-mial, PM, MMR and xQuAD diversifications is the one that maximizes the corresponding objective metric: BinomDiv-rel, CPR-rel, EILD-rel and ERR-IA, respectively.

A first overall trend we may observe is that, in terms of nDCG, all the diversifications involve a decrease in the ac-curacy of the recommendations, showing an also expectable trade-off between relevance and diversity. Second, each di-versifier is always the best option with respect to its target metric, with the exception of PM, which is outperformed by BinomDiv in CPR-all and by xQuAD in CPR-rel. This can be explained because PM does not optimize directly the formulation of CPR (see Equations 5 and 7), while the rest of the diversifiers optimize directly their target met-ric. Third, for CPR-rel the improvements over the baseline are almost imperceptible, and restricted to xQuAD. This shows that a diversification algorithm (and the metric it is intended to target) devised for a search task may not get the expected results in a recommendation setting with a differ-ent subtopic-document (in our case, genre-item) distribution patterns, which is one of the motivations for our framework.
As to the intent-aware framework  X  X he xQuAD diversifier and the ERR-IA metric X  and the proportionality framework  X  X he PM diversifier and the CPR metric X , the results evi-dence one of the problems pointed out in Section 4, namely the accumulation of genres without any penalization for re-dundancy. The SPI values show how the xQuAD and PM strategies notably increase the average number of genres per item in the diversified recommendations, which, as discussed in Section 4, does not necessarily fit well with an effective notion of diversity in recommendation. Regarding the met-rics, ERR-IA and CPR-rel show a clear correlation with SPI, a bias that narrows the informativeness of this metric in a recommendation setting. F igure 3: Relative difference over the iMF recom-mender baseline of the binomial, PM, MMR and xQuAD diversifiers on Netflix. Table 7: Results at cutoffs N = 5 , 10, 20 for the Binomial Diversity metric and diversifier (  X  = 0 . 5 ) on Netflix. Bold indicates the best diversification cut-off for a each metric cut-off in each dataset.
Another key observation in the diversity-specific analysis concerns the relation between the frameworks. To facilitate the analysis of the results of Table 6, we show in Figure 3 the relative improvements over the baseline. The cross-wise rela-tionships between diversifications and metrics from different frameworks show interesting findings. Overall, we can see in the figure that the binomial diversifier improves over the baseline when measured with BinomDiv, CPR-all and EILD, showing that the binomial framework is able to promote the proportionality of CPR-all and the dissimilarity of items of EILD by improving the coverage and non-redundancy of the recommendations. In turn, the proportionality of PM does not seem sufficient to promote the diversity when measured with BinomDiv, while the dissimilarity of MMR improves the coverage and non-redundancy of BinomDiv. The intent-aware framework shows some relation with the proportional-ity framework, most probably caused by the aforementioned accumulation of genres without penalization of redundancy, and does not offer improvements in the other frameworks. All these observations support our postulation that the bi-nomial framework is able to capture and procure coverage while avoiding redundancy, uncovering a diversity angle be-yond what the other frameworks can capture.

Finally, in order to evaluate the size-awareness of our Bi-nomial framework, Table 7 shows the correspondence, using the iMF baseline, between the cut-off of the binomial diver-sification algorithm (the N in 13) and the cut-off of the bi-nomial diversity metric. For each diversification cut-off, the results correspond to the best  X  of the objective function. As expected, the best diversification cut-off always agrees with the cut-off of the diversity metric, in both all and rel variants. This shows that our approach is able to leverage knowledge of the desired result set size in order to bring an additional made-to-fit improvement at the targeted cut-off, a feature that is not supported in any prior framework.
We tackle in this paper the problem of diversity using genre information in Recommender Systems. An analysis of the properties of genres helps us define the requirements that a genre-based definition of diversity in recommenda-tion should satisfy, namely coverage, non-redundancy and recommendation list size-awareness. We propose a binomial framework that satisfies these properties. A metric is de-fined upon this framework, and a greedy re-ranking algo-rithm that optimizes it. Experiments on two movie recom-mendation datasets validate the consistency of our frame-work, illustrate its properties, and show they comply with the stated requirements. As future work, we will extend our experiments to other datasets, such as music and books, and carry out user studies to further analyze and contrast the behavior and properties of the proposed framework.
