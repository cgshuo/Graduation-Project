 LinkedIn has grown to become a platform hosting diverse sources of information ranging from member profiles, jobs, professional groups, slideshows etc. Given the existence of multiple sources, when a member issues a query like  X  X oft-ware engineer X , the member could look for software engi-neer profiles, jobs or professional groups. To tackle this problem, we exploit a data-driven approach that extracts searcher intents from their profile data and recent activities at a large scale. The intents such as job seeking, hiring, content consuming are used to construct features to person-alize federated search experience. We tested the approach on the LinkedIn homepage and A/B tests show significant improvements in member engagement. As of writing this pa-per, the approach powers all of federated search on LinkedIn homepage.
 H.4 [ Information Systems Applications ]: Miscellaneous Theory Federated search, social network, ranking, machine learning, information retrieval
LinkedIn has grown over the years from a professional net-working site to becoming a platform containing multiple pro-fessional information sources such as member profiles, jobs, professional groups, member posts and slideshows. At the same time, the member base has also increased quickly and currently has more than 350 million members. The mem-bers visit the site for various reasons ranging from search-ing and recruiting candidates to looking for jobs or finding Figure 1: LinkedIn Federated Search Result Page for Query  X  X oftware Engineer X  professional content etc. As the number of information ver-ticals and member base increase, the problem of serving the right information to fulfill each individual member X  X  infor-mation need becomes more and more critical. This problem contains two subtasks including selecting the right verticals and aggregating the vertical results into a single ranking (See Figure 1) and typically is referred as federated search.
The area of federated search originated from meta search and has been actively researched in the field of informa-tion retrieval [5] and particularly in the context of Web search. Diaz [2] addresses the problem of vertical selection, i.e., whether or not to show a specific item above the Web results given a query. Ponnuswami et. al. [4] and Arguello et. al. [1] propose machine learning approaches for aggre-gating vertical results into single search result pages. They demonstrate effectiveness of the approaches on Bing search. More recently, Lefortier et. al. [3] present a way to blend individual vertical results and individual Web results with a case study on Yandex video search.

However, the problem of federated search on LinkedIn presents unique challenges. First, the level of personal-ization in a platform like LinkedIn is much deeper than general Web search. For instance, if a member enters a query like  X  X oftware engineer X , depending on if he or she is a recruiter, job seeker or professional content consumer, the member could expect to see software engineers X  profiles, jobs or slideshows on the topic. Second, individual results and blocks of results from different verticals are often associated with different features. Moreover, even if a feature is com-mon, it is not equally important to them. This challenge is similar to federated Web search. Nonetheless, unlike Web search which typically blends either blocks of results [1][4] or individual results [3] from different verticals, our system ag-gregates both individual results (e.g. jobs as shown in Figure 1) and blocks of vertical results (e.g. people and professional group verticals). Thus, the system has to normalize features and eventually make relevance scores comparable across re-sult verticals and result types (individual vs. block). Third, in Web search, Web results are typically the primary verti-cal thus they can be used as a  X  X ivot X  to normalize scores of the other verticals [4]. In our problem, the primary verticals vary depending on queries and other search context which could includes searcher X  X  data, past activities, location etc.
To overcome these challenges, we propose a data-driven approach to personalize federated search. Specifically, we mine members X  data and their recent activities at a large scale to understand whether or not they currently have in-tent of hiring, job seeking or content consuming etc. This insight coupled with other signals are used to select verticals and aggregate vertical results into a single search result page personally relevant to each of our members. To make these signals comparable across different result categories, includ-ing verticals and result types (block vs. individual), we con-struct composite features combining the signals for each of the categories. Then, we let learning algorithms estimate different weights for all of the combinations (i.e., normalize the signals across the result categories) from training data.
A/B tests done on the LinkedIn homepage shows improve-ments in member engagement and downstream traffic to the verticals. At the time of this writing, the work currently powers all of the federated search on the LinkedIn home-page. We organize the rest of the paper as follows. Section 2 details how we formulate federated search problem and our proposed approach. Section 3 describes searcher intent features and other signals used in the system. We discuss ex-perimental results in Section 4. Finally, concluding remarks can be found in Section 5.
Given a pair of (query, searcher) , our task is to select from a list of all possible verticals including people (mem-bers), jobs, companies, professional groups, member posts, slideshows etc. a primary vertical and a set of secondary verticals, then rank the primary individual results and the secondary vertical blocks in a single ranked list as shown in Figure 1, without changing the order in the primary verti-cal. The reason for this constraint is two fold. First, we believe the base ranker of each vertical is the best one to rank results within its domain. Second, this keeps member experience consistent between federated search and vertical search.

The overall framework is described in Figure 2. When a member issues a query q , the query is passed to verticals and triggers the corresponding vertical search engines to get
Figure 2: Federated Search Overall Framework the top K results for each. In preliminary vertical selection phase, the federated scorer extracts features (which are de-scribed later in Section 3) and computes a relevance score for each of the verticals. The top vertical is selected as the primary one and the rest are selected as candidates for sec-ondary verticals. Then, in aggregation phase, these candi-dates compete with individual results in the primary vertical to form the final ranking. Note that these candidates are not guaranteed to show up in the ranking. Instead, depending on queries, searchers and vertical results, all, some or none of these candidates could be selected. The aggregation al-gorithm and the process of training the federated scorer are described in the next subsections.
In this section we discuss how our aggregation algorithm works. Input to the algorithm includes results from the pri-mary vertical P along with all the candidate secondary ver-tical clusters C and a federated scorer f s . We go through each of primary vertical result P i computing the relevance score for this result using the federated scorer (the second loop in Algorithm 1). We compare this score with the rel-evance scores of all candidate secondary vertical clusters. If the former is higher, we pick the primary vertical result for i th position. If on the other hand there exists a candi-date secondary vertical cluster that has a higher relevance score than the primary result, we add the secondary vertical cluster to the aggregated rank list and move on to the next primary result. We repeat this process till we position all the primary results. Any secondary vertical results left are dropped.
As presented above, the purpose of federated scorer is to provide a universal relevance score for each vertical block as well as each vertical individual result. The scores have to be comparable across verticals (for preliminary vertical Algorithm 1: Federated Search Aggregation Algorithm Input : Individual results from primary vertical P
Output : Aggregated result ranked list sortedSecondaryV erticals  X  []; rankList  X  []; for i=1 to len(C) do end j  X  1; for i=1 to len(P) do end return rankList selection) and between vertical blocks and vertical individual results (for result aggregation). In this work, we train a federated scorer predicting probability that a vertical block or vertical individual result gets clicked if it appears on a search result page (SERP) shown to the member.
 Traditionally, ground truth data is labeled by human judges. However, this approach is expensive and not scalable. More-over, it is very hard for the judges to judge the relevance on behalf of some other member, making it challenging to apply the approach for personalized settings. Thus, in this work the training data is collected from click logs via a random-ization experiment exposed to a small random fraction of LinkedIn search traffic. In this experiment, given a query we apply some business rules to come up with a few eligi-ble verticals. We randomly pick one as a primary vertical and leave the others as secondary ones. Then, we randomly insert the secondary verticals (as blocks of results) into the primary ranking without re-ordering the primary individual results. Clicked results (either primary individual results or secondary vertical blocks) are labeled positive and skipped results (unclicked ones ranked above the last clicked result in a ranking) are labeled as negative. The results ranked below the last clicked one are dropped since it is unknown if the member ignored these results or simply did not see them. The benefit of randomization is that it avoids the bias to-wards the original vertical selection and ranking. Given the training data, we apply logistic regression to train a feder-ated scorer. The features used to train the scorer are de-scribed in the next section.
A query can be ambiguous in the light of all information that exists in multiple verticals. For example, if a member enters a query like  X  X achine learning X , he or she could be interested in recruiting machine learning people, looking for jobs related to machine learning, finding professional groups on the topic to join, discovering content on the topic or some of the use cases. To tackle this issue, we take a data-driven approach to personalize search results. For instance, if we know that the member is currently looking for a job, he or she is likely to be more interested in job results than the other verticals. Similarly, if the member is hiring machine learning scientists, people results should be more important to him or her.

Intents of searchers such as job seeking, hiring, content consuming etc. are inferred from their profiles and past behaviors. At a high level, if a user X  X  title is recruiter, he or she is likely to have hiring intent. Similarly, if a user is a final year student, he or she could have job seeking intent. Another source of data used to infer user intents is their recent activities. For example, if users recently searched or applied for jobs, they tend to have job seeking intent. We train a machine-learned model combining all of the signals to predict intents for all of the member base. The model is run on a daily basic to update members X  intents dynamically. It is worth noting that a member could have multiple intents at the same time.

A remaining challenge is that some evidence such as know-ing a searcher has job seeking intent might be associated one or a few verticals (e.g. job vertical), but not all of them. Some evidence might be related to multiple verti-cals but with different levels of importance. To overcome this issue, we construct composite features , capturing both searcher intents and result categories including both verti-cals and result types (individual or block). For instance, the feature below only fires if the searcher has job seeking intent and the result is a block of jobs. Otherwise, it has value of zero. We create all of the combinations of intents and result categories and learn different weights for them. In essence, we let the learning algorithm associate each of the evidence with the categories and normalize them across the categories from training data.
The feature category aims to capture the intents (result categories) of queries. Specifically, we mine historical click logs to estimate p(result category | query) , for instance the probability that members click on professional group verti-cal block for the query  X  X eadership X . These probabilities are computed offline for every head query and use this insight to construct the features online. One issue of this approach is that the probabilities are biased towards the previous ver-tical selection and ranking algorithms. Resolving this is a future direction of this work.
We also exploit information provided by vertical first pass rankers (base rankers) to construct features. One exam-ple could be relevance scores from the first pass rankers. These features also have an effect of minimizing the inconsis-tency between the federated scorer and the first pass rankers (recall that the order in the primary vertical is kept un-changed). One issue with this kind of information is that the relevance scores might not be calibrated well across ver-ticals. To resolve this issue, we again construct composite features like relevance score if result is an individual job or a slideshow vertical block. For the later, we compute relevance score for each block by averaging scores of the top results in the block. Then, we let the learning algorithm normalize the scores across result categories by learning different weights for the features from the training data. Baseline is a legacy federated search algorithm at LinkedIn. It uses a set of business rules based on past member in-teraction with verticals associated with keywords and rele-vance scores returned by vertical ranking functions. It can be viewed as a function on the feature sets described in Sec-tions 3.2 and 3.3. Although the function is manually defined, it has been running on live traffic for a relatively long time and have been iteratively refined. The key difference be-tween the baseline and the new approach is that the later is highly personalized by using searcher intent as a key signal.
We conducted A/B test for sufficient duration of time (6 weeks) to account for any novelty effect. A query is first tagged for existence of entities like names , job titles , skills etc. As we are interested in exploratory search, we only experimented with non-name queries. Based on this condi-tion, a random portion of LinkedIn federated search traffic from our world-wide member base is used for A/B testing. The federated search combines results from all of seven ver-ticals available on LinkedIn including people, job, company, university, group, slideshow and members X  posts. The traf-fic is then randomly split into control and treatment buck-ets. Each bucket ends up with several hundreds of thousand searches. Searches in the control bucket are processed by the baseline and the treatment bucket uses the proposed approach. We look at three metrics including primary verti-cal click-throught-rate (CTR), secondary vertical CTR and secondary vertical switches. The difference between the sec-ond and the third metrics is that the former is defined on clicks on individual results within secondary clusters while the later is based on clicks on cluster headers that take users to vertical search pages.

Table 1 shows that the proposed approach is better than the baseline on all of the metrics (all of the improvements are statistically significant). Specifically, the proposed ap-proach is 0 . 62% better than the baseline on primary vertical CTR. In terms of secondary vertical engagement, the pro-posed approach largely improves over the baseline: 4 . 31% and 10 . 66% improvements on secondary vertical CTR and secondary vertical switches. It is somewhat surprising that the improvement on primary vertical CTR is much lower than on secondary vertical CTR. It is probably because the proposed approach shows more relevant secondary ver-ticals, members are more likely to switch to secondary ver-tical search result pages (10 . 66% higher). Thus, they have less chance to engage in the primary results. A deep dive into log data also reveals that the baseline tends to over-emphasize primary results and on average ranks secondary vertical clusters lower in result pages. Fully understanding and modeling the trade-off between member engagement on primary and secondary results is another future direction of this work.
 Table 1: Metrics improvements of treatment over baseline. Due to business sensitivity, we only show relative improvements instead of absolute metric values.
In this paper, we present the problem of personalized fed-erated search at LinkedIn and propose a data-driven ap-proach for this problem. Our approach takes into account members X  data and activities to infer their intents such as hiring and job seeking. This insight combined with other sig-nals are used to select primary and candidate secondary ver-ticals and then to aggregate primary individual results and the secondary clusters into a personalized ranking. Though presented in LinkedIn federated search context, the approach is applicable other domains where vertical selection and ag-gregation are highly personalized. Our A/B tests show that the approach could significantly improve user engagement. The approach is currently serving all of federated search on LinkedIn homepage.

One future direction of this work is to remove the bias to-wards the previous vertical selection and ranking algorithms in the current keyword intent features. Another direction is to understand and model the trade-off between member engagement on primary verticals and engagement on sec-ondary verticals. Given the insight, we will determine the best balance in terms of member experience. [1] J. Arguello, F. Diaz, and J. Callan. Learning to [2] F. Diaz. Integration of news content into web results. In [3] D. Lefortier, P. Serdyukov, F. Romanenko, and [4] A. K. Ponnuswami, K. Pattabiraman, D. Brand, and [5] M. Shokouhi and L. Si. Federated search. Foundations
