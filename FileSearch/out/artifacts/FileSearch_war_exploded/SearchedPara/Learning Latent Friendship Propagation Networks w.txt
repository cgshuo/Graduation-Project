 It X  X  well known that the transitivity of friendship is a popular soci-ological principl e in social networks. However, it X  s still unknown that to what extent people X  X  friend-making behaviors follow this principle and to what extent it can benefit the link prediction task.
In this paper, we try to adopt this sociological principle to explain the evolution of networks and study the latent friendship propaga-tion. Unlike traditional link prediction approaches, we model link formation as results of individuals X  friend-making behaviors com-bined with personal interests. We propose the Latent Friendship Propagation Network (LFPN), which depicts the evolution progress of one X  X  egocentric network and reveals future growth potentials driven by the transitivity of friendship based on personal interests. We model individuals X  social behaviors using the Latent Friend-ship Propagation Model (LFPM), a probabilistic generative model from which the LFPN can be learned effectively. To evaluate the power of the friendship propagation in link prediction, we design LFPN-RW which models the friend-making behavior as a random walk upon the LFPN naturally and captures the co-influence effect of the friend circles as well as personal interests to provide more accurate prediction.

Experimental results on real-world datasets show that LFPN-RW outperforms the state-of-the-art approaches. This convinces that the transitivity of friendship actually plays important roles in the evolution of social networks.
 H.2.8 [ DATABASE MANAGEMENT ]: Database Applications X  Data mining ;J.4[ SOCIAL AND BEHAVIORAL SCIENCES ]: Sociology Link Prediction; Social Networks; Transitivity of Friendship; Friend-ship Propagation; Interest Awareness  X  Corresponding authors: Chaokun Wang and Jianmin Wang.

The evolution of social networks has attracted considerable at-tention recently. Since the seminal work of Liben-Nowell and K-leinberg [18], it has been formulated as the link prediction task which studies the formation and variation of the links in the net-work. Both unsupervised and supervised approaches have been proposed, based on the current obs ervations of the network, utiliz-ing the structural or vertex-intrinsic features [19][9][20][1]. Most approaches treat the network as an evolving graph and each indi-vidual as a general vertex in the graph, while ignoring the initiative of individuals as active participants in the evolution of the social network.

From another point of view, people X  X  social behaviors have been studied by sociologists long ago [28]. They have found many inter-esting and popular phenomena [23][21][26][8], which are also ver-ified in online social networks by computer scientists [12][5][24] [11][27]. Among these phenomena is triadic closure [26][8], which states that two persons with common friends will likely become friends in the future. The sociological principle under this phe-nomenon is the transitivity of friendship [26][15]. Although re-searchers have found that most of new links close an open triangle [16], not all open triangles will be closed with equal probabilities. It X  X  still unknown how this principle works in real world, and to what extent it can promote the evolution of social networks and furthermore benefit the link prediction task.

In this paper, we study the evolution of social network based on one of the well-known sociological principles, i.e. the transitivi-ty of friendship. We address the above problems by positing that there is some underlying unknown network over which friendships propagate, and the evolution of social networks can be regarded as results of the friendship propagation based on common user inter-ests. We formulate such network as the Latent Friendship Propa-gation Network (LFPN), which depicts the growth process of one X  X  ego-centric social network driven by the friendship propagation via the co-influence effect of the friend circles with common user in-terests, and also captures the trend of friendship propagation on the whole network. In LFPN, we assume one, denoted by the ego ,ex-pands her social circles mainly via her existing friends, who act as intermediaries and introduce new friends to the ego explicitly or implicitly based on common interests.

We demonstrate the proposed LFPN with a toy example. Fig. 1(a) shows an egocentric network with a as the ego, which we mark as purple. The blue vertices are a  X  X  friends; the green ones show the friends of a  X  X  friends. The connections among the blue and green vertices are omitted for brevity. Given the plain structure of an egocentric network, we can hardly observe the implicit intrinsic individuals in the network. structures and relations within it. The LFPN shows a 3-layer hi-erarchical network for the original network. Fig. 1(b) shows the partial view of the ego a . While the first layer is the ego herself, the second layer, the local layer , consists of all her current friends and the directed edges as representation of the friendship propagation traces along which a created relationships with each one. In this figurewecanseethat a made friends with b directly, and via b she became friends of e , and furthermore she created friendship with d via b and e . Through the local layer as intermediaries a can make more new friends in the global layer in which the edges among in-dividuals represent the potential friendship propagation directions in the whole network. While the local layer is defined for each ego and visualizes the growth of one X  X  friend circles by showing the intermediaries for each of her friends, the global layer is inferred based upon all the local layers and defined for the whole network. A more complete LFPN with multiple egos is shown in Fig. 1(c).
However, learning the LFPN is challenging because the network over which friendship propagation takes place is usually unknown and unobserved. Thus, the first challenge is, how we can lever-age one X  X  social behaviors to infer all the potential intermediaries and furthermore learn the structure of the friendship propagation network?
While traditional approaches for link prediction are usually based on the topological features, LFPN provides a hierarchical view of one X  X  friend circles from which we can observe the evolution of networks from the perspective of the ego, who drives this evolution progress. This leaves us the second challenge: to what extent the transitivity of friendship influences th e network evolution, whether there is a co-influence effect of the friend circle, and how they can be utilized to predict future shapes of the network?
Along with the transitivity of friendship, another factor which affects one X  X  social behaviors is the personal interests. In this s-tudy, we X  X e also interested in the challenge that how the personal interests, along with the friendship propagation, affect the creation of friendships?
To address these challenges we study how the LFPN can be in-ferred based on behavior modeling, and further utilized for predict-ing or recommending new links. To the best of our knowledge, this is the first time that the transitivity of friendship is deeply in-vestigated and the link formation is studied based on the behavior modeling. The main contributions of this paper can be summarized as follows.

Firstly, we formulate the LFPN , which depicts the evolution traces of one X  X  egocentric social network and potential friendship propagation traces on the whole network based on the transitivity of friendship with interest awareness.

We design LFPM (Latent Friendship Propagation Model), a prob-abilistic generative model for the friend-making behaviors of indi-viduals in social networks. LFPM models the interest-aware friend-ship propagation driven by the transitivity of friendship. Given the time-stamped individuals X  social behavior histories, we can learn the hidden LFPN based on LFPM effectively. It should be noted that both the friendship propagation and personal interests are in-ferred from the social behaviors only, and no other evidences are included.

Furthermore, we put forward a new method for link prediction utilizing the transitivity of friendship and personal interests based on the LFPN. We simulate the link creation using a random walk of an ego on the two layers of the LFPN. Firstly, she seeks for a preferred intermediary in her local layer of the LFPN, and via this intermediary she goes to the global layer where she makes new friends. We name this process as LFPN-RW (Random Walk upon LFPN), in which the random walk is guided by the friendship propagation based on the co-influence effect of friend circles and personal interests.

We conduct extensive experiments on real-world datasets. Ex-perimental results show that the inferred LFPN actually contains important knowledge about the network evolution and can benefit the link prediction significantly. The rest of this paper is organized as follows. We formulate the LFPN in Section 2. Methods for inferring the LFPN are developed in Section 3. Afterwards we present LFPN-RW, the new approach for link prediction upon LFPN in Section 4. In Section 5, we dis-cuss the experimental results. We review related work in Section 6 and conclude this study in Section 7.
In this section, we introduce the concepts related to LFPN. As shown in Fig. 1(c), the LFPN G is composed of three layers: the ego, the local layer and the global layer. In the following we first define the local layer and global layer respectively, and then give the definition of the LFPN.

Let G = { G 1 ,G 2 ,  X  X  X  ,G T } denote an evolving social network where G t =( V t ,E t ) is a directed graph denoting the snapshot of the network at time t . Each vertex in V t represents an individ-ual in the network, and the edges in E t indicate the friendships during the period t (i.e. the time from t  X  1 to t ), and thus we have G t = G t  X  1  X   X  G t .We X  X luse G to denote any snapshot of the evolving G for simplicity. Furthermore, for each snapshot G t we the interactions among individuals in t . The interactions include co-authoring a paper in scholar collaboration network, leaving a message on Facebook, etc.

It should be noted that although the network G is directed here, the problem discussed in this paper is also applicable to undirected networks which can be transformed to directed networks.
In this paper, we study how E grows in social networks, i.e. the formation of friendships. Based on the transitivity of friendship, when two individuals become friends, we assume their common friends act as the role of  X  intermediaries  X .
 Definition 1. Latent Friendship Propagation Triple ( LFP Triple ). For three vertices u , z and v in G , ( u, z, v ) is named as an LFP Triple if u makes friends with v via z . u is called the initiator of this tuple and z is the intermediary.

Each LFP Triple ( u, z, v ) is associated with an intermediation probability p ( z | u, v ) which denotes the probability that z has acted as the intermediary for u to makes friends with v . We use F t ( u ) to denote the set of friends of u at time t ,and F ( u, v ) to denote the set of common friends of u and v at time t . As each common friend in F t ( u, v ) may act as the intermediary, the intermediation probability satisfies:
If u doesn X  X  have any common friends with v , we assume u makes friends with v directly.

Definition 2. The local layer of ego u on an LFPN G , denoted as
G L ( u ) , consists of all the friends of u . For each LFP Triple ( u, z, v ) initiated by u there is a corresponding local LFP edge
The local layer of the LFPN is defined for each ego u . Each friend of the ego u  X  X  L ( u ) can play the role of intermediary for u to make more new friends. We use the intermediary preference probability p ( u z ) to measure u  X  X  preference for each friend z as the intermediary.

We define the cross-layer edges from the ego to the local layer as intermediary preference edges .

Definition 3. For each friend z  X  X  L ( u ) ,there X  X an intermedi-ary preference edge u, z pointing from the ego u to z in the local layer, whose weight w E u,z = p ( u z ) .

Definition 4. Each LFP Triple ( u, z, v ) derives an LFP Pattern z v , indicating that one X  X  friendship with z is likely to propagate to v .

Each LFP Pattern is associated with a friendship propagation probability p ( z v ) which denotes the extent to which z is will-ingtorecommend v to her friends and the friends of z are likely to make friends with v in the future.

Definition 5. The global layer of an LFPN G , denoted as G G consists of all the individuals of the given social network. For each LFP Pattern z v there X  X  a corresponding global LFP edge z,v in G G , whose weight w G z,v = p ( z v ) .
 The global layer is defined for the whole network based on the LFP Patterns. It can be interpreted as the aggregation of all the local layers . Each vertex has its direct projection on the global layer so we don X  X  define the cross-layer from the local to global layer again. Now we can give the definition of LFPN.

X ( u ) The interaction collection of individual u  X ,  X ,  X ,  X  The prior parameters for  X , X , X , X  , respectively Definition 6. The Latent Friendship Propagation Network (LF-PN) G for a given social network G is a weighted 3-layer net-work consisting the ego layers { u } ,the local layers for each ego {G L ( u ) } ,andthe global layer G G .

The local layer shows the inferred traces for the evolution his-tory of one X  X  current egocentric network, while the global layer indicates the possible traces for the friendship propagation on the whole social network in the future. The global layer can also be regarded as a friend-recommendation network, as in some sense it X  X  the recommendation among people that promotes the friend-ship propagation.
In this section, we develop effective algorithms for the inference of LFPN for the given social network. Before proceeding, we for-mulate our problem as follows: LFPN Inference Problem . Given an evolving social network G = { G 1 ,G 2 ,  X  X  X  ,G t } and the associated interaction sets { X 1 ,X 2 ,  X  X  X  ,X t } , the LFPN inference problem is to infer the LF-As each snapshot is a subgraph of any of later snapshots, each LFPN also contains the structures of the LFPN inferred from the earlier snapshots. However, the weights of the same edges are not necessarily equal because the network is evolving and the propaga-tion patterns are also varying.

In the remainder of this section, we first introduce the LFPM model for learning the LFPN on a single snapshot, and then present the inference framework for LFPM. We discuss the inference of LFPN on an evolving network at last.
Each LFP Triple ( u, z, v ) implies the assumption that the friend-making behavior is a 2-step process: u selects z as an intermediary firstandthenvia z she makes friends with v . Meanwhile this pro-cess is inevitably influenced by the interests of u . LFP Patterns are the aggregation of LFP Triples, and both of them are the basic elements for LFPN. Thus the preliminary problem for the LFPN inference is to find all the LFP Triples. In other words, given each friendship between u and v , we need to infer the intermediary z .
To model this process and infer the intermediaries of each friend-ship, we propose the Latent Friendship Propagation Model (LFP-M), a probabilistic generative model for the social behaviors in so-cial networks. In this paper we only consider the social behaviors like friend-making and interactions. LFPM models the generative process for individuals X  social behaviors as follows: 1. Sample the number of individuals U  X  Poisson ( ). 2. For each of the K interest areas c , sample its reputation dis-3. For each individual u : 4. For each individual u : We draw the graphical representation of LFPM in Fig. 2. In LFP-M, each interest area is modelled as a distribution over individuals. Each ego is modelled as a distribution of her intermediaries, i.e. the individuals that may make recommendations to her, and each intermediary as a distribution over the friends of this intermediary. Thus, the set of new friends of an ego can be modelled as the mix-ture of her intermediaries and interest areas. Specifically, the inter-mediary preference distribution  X  describes through whom an ego prefers to make new friends, and friendship strength distribution  X  models the closeness of an ego with each of her friends. Such close-ness can be reflected by both the frequency of their interactions and the willingness of the ego to recommend her friends to others. We use the interest preference distribution  X  to model one X  X  interest preference in friend-making behaviors, and regard the reputation distribution  X  as a global reputation ranking of all individuals in each interest area. It X  X  natural to assume that one prefers to make friends with someone with higher reputation in her preferred area. It should be noted that the interests here are learned only from the social behavior histories, rather than external profiles.
To improve the inference performance, we adopt heuristic prun-ing by constraining that for each individual her intermediary pref-erence distribution and friendship strength distribution are only de-fined over her current friends, based on the assumption that only the current friends of ego u may act as u  X  X  intermediaries, and that an intermediary z can only recommend and interact with the current friends of z . This is different from traditional topic models like L-DA[2], which defines the distributions over the whole space. Thus in our model, each individual maintains a unique sampling space for herself. Correspondingly, the prior distributions for  X  and  X  are also required to be defined on the corresponding pruned space for each individual. That X  X  why the priors  X  and  X  need to be defined for each individual u and are placed within the big box labelled U in the graphical model shown in Fig. 2.

LFPM applies to a snapshot G t and tries to infer the friendship propagation in the expansion of one X  X  egocentric network in peri-od t . For the social behaviors that happen in period t , the hidden distributions  X  and  X  of LFPM can be naturally interpreted as the intermediary preference probabilities w E of each ego and friend-ship propagation probabilities w G in the LFPN in period t , respec-tively. Each possible intermediary assignment for each friendship is an LFP Triple and the sampling probability can be regarded as the intermediation probabilities w L . With the inferred LFP Triples and the weights w E ,w L and w G we can construct the LFPN
Exact inference for LFPM is generally intractable. In this sub-section we present the framewo rk for LFPM inference using Gibbs sampling, a special case of Markov-Chain Monte Carlo (MCMC) simulation, which can emulate high-dimensional probability distri-butions by the stationary behavior of a Markov chain.

Firstly, the joint probability of all observed and unobserved data can be stated as follows (with the distributions integrated out):
P ( C, Z, X, Y ;  X ,  X ,  X ,  X  ) where B (  X  ) is the multinomial Beta function. For the details of other notations please refer to Table 1.

We infer the model by updating the estimation for unobserved variables c and z iteratively. In each iteration, we sample c and z for each new friendship i according to the cond itional probability p ( c i | C  X  i ,Z,X,Y ;  X ,  X ,  X ,  X  ) and p ( z i | C, Z  X  i ,X,Y Y and X are the new friendship and the interaction data, respec-tively. C and Z are estimations for the interest area and intermedi-
The sampling probabilities can be estimated by Algorithm 1 LFPM Inference using Gibbs Sampling Require: Ensure: 2: Assign interest areas for each new friendship randomly 3: Assign intermediaries for each new friendship randomly 4: while not finished do 5: for each individual u who has new friends do 6: for each new friend v  X  Y ( u ) do 7: Sample interest area using Eq. 3 8: Sample intermediary using Eq. 4 9: end for 10: end for 11: end while 12: Update distributions  X ,  X , X , X  using Eq. 5  X  8 13: Record all the sampling distributions for topics and intermedi-14: return  X , X , X , X ,P c ,P z
Given the estimations for all unobserved data, we can estimate the hidden distributions:
Algorithm 1 presents the inference framework. Firstly, it initial-izes the friends set F before period t , and the new friendships Y that emerge in t . The interest area and intermediary for each new friendship are initialized randomly before the iteration. Next in Line 4 X 11 the interest and intermediary are updated for each new friendship using Eq. 3 and 4, iteratively. The iteration is repeated until converge or the count of iterations reaches a given threshold. The hidden distributions can be estimated using Eq. 5 -8.
In LFPM all behaviors are assumed to be independent with each other, and the correlation among the behaviors is ignored, which will lead to the loss of knowledge carried by the temporal behavior sequence. To minimizing this loss, we can split the evolving social network G into fine-grained snapshots G 1 ,G 2 ,  X  X  X  ,G t and infer the LFPM model on each snapshot, and thus we can build the cor-responding LFPN G 1 , G 2 ,  X  X  X  , G t respectively. However, each is also a snapshot of the evolving G and only carries the information of the behaviors in t , but ignores the knowledge of the previous be-havior history. For learning the complete evolving LFPN, we apply the LFPM in cascade, during which the later models can inherit the knowledge learned from the previous models.

The knowledge accumulation in cascade LFPM is achieved by the prior parameters, which can significantly influence the behaviour of the model by bringing important priori knowledge[10]. Via the priors, the knowledge in the previous period can be transferred in-Algorithm 2 Building Evolving LFPN Require: Ensure: 1: Split G into T subgraphs by discrete periods 2: for each period t  X  T do 3: Initialize the priors for t using the previous model according 6: {In the following we omit the subscript t of weights and 7: for each ego u  X  G t do 8: Add new friends of u in t to G L ( u ) t 9: for each friend z  X  X  L ( u ) t do 10: Add cross-layer edge u, z and set w E u,z  X   X  u,z 11: end for 12: for each LFP Triple ( u, z, v ) initiated by u do 13: Add local LFP edge z,v to G L ( u ) t 15: end for 16: end for 17: Add new individuals to G G t 18: for each LFP Pattern ( z,v ) derived from the LFP Triples do 19: Add global LFP edge z,v to G G t 21: end for 22: end for 23: return G 1 , G 2 ,  X  X  X  , G t to the next period successively. We define the priors of the LFPM at time t as the linear combination of the accumulated knowledge from previous models encoded by the priors and the new knowl-edge encoded by the statistics in the last period t  X  1 as follows: where  X  is a cascade damping factor. A higher  X  means to inherit more priori information from the earlier models. For the first model
While cascade LFPM allows knowledge accumulation in the mod-el inference on the sequential snapshots, the LFPN can also inherit the structures from previous periods. By adding the new structures and updating the weights learned from the LFPM for each period, we can always get the up-to-date evolving LFPN for the evolving social network. The details are given in Algorithm 2.
LFPN adopts the transitivity of friendship to explain the evolu-tion of social networks and shows the potential friendship propa-gation in the network. An interesting problem is, to what extent the LFPN can model the hidden power which drives the growth of social networks. We study this by applying LFPN in the tradition-al link prediction problem in social networks. We formulate the problem as follows:
LFPN based Link Prediction Problem . Given an LFPN G t inferred from a snapshot G t of the evolving social network G at node, R/S: average candidate friendships of each ego.
 time t , our problem is to predict the new friendships in period t i.e.  X  E t +1 .
 Here we don X  X  consider the new-coming vertices in the network. Random Walk (RW) provides an effective node proximity measure for predicting new links [31][1]. However, traditional RW regards the social network as a plain graph while ignoring the motivation of individuals. Unlike them, we predict new links based on behavior modeling. We design a new random walk upon the LFPN, LFPN-RW . In LFPN-RW, we treat the creation of new friendship as the result of friendship propagation in the network. In this way, LFPN-RW captures the co-influence effect of the friend circles on one X  X  friend-making behaviors, rather than considering them as indepen-dent events. Furthermore, the personal interests are also taken into consideration by being incorporated within the weights of edges.
To predict the new friends of u , consider a random walker who starts the LFPN-RW from the ego u . Then LFPN-RW operates on the local and global layer of the LFPN successively, modeling the 2-step friend-making process. The walk on local layer allows one to find an intermediary first, and to make new friends via this in-termediary on the global layer next. The basic assumption for the random walk on the local layer is that one should prefer the inter-mediary whom she knows via her preferred intermediaries; and that for the random walk on the global layer is that one should be likely to make friends with those recommended by important people.
We introduce the process of LFPN-RW for u as follows. Firstly, the walker goes to any vertex z  X  X  L ( u ) with the intermediary preference probability w E u,z ,andwalksin G L ( u ) randomly. At each vertex, the walker can go to next vertex along any local LFP edge with probability 1  X   X  , or go back to the ego u with probability  X  and then restart the walk.

When the walker stops at some vertex z  X  X  L ( u ) , before jump-ing to the ego u , she jumps to the projection of z in the global layer G G , and starts the random walk on G G to find a new friend. Arriv-ing at any vertex in G G , the walker may go to any of its neighbors along the global LFP edges with probability 1  X   X  , or just stop there with probability  X  and then jump back to the ego u directly.
Before proceeding, we revise the weight definition of the edges in LFPN to combine the global propagation probabilities and per-sonal interests in the random walk from u : where C is the collection of interest areas. Eq. 13 biases the local layer using global propagation probabilities. Meanwhile, Eq. 14 biases the global layer by incorporating the personal interests, and thus ensures that the friendship is more likely to propagate to those with higher reputation in u  X  X  preferred interest areas in the random walk of u .
 of the random walk initialized from the ego u in G L ( u ) respectively. They satisfy: (assuming all the weights in LFPN are normalized) r r where  X  is the restart probability in the walk. r L ( u ) ( regarded as the probability that u will select z as the intermediary in a friend-making behavior, and r G ( u ) ( v ) as the probability that u decides to make friends with v finally. This can be used to predict or recommend new friends for u .
In this section, we demonstrate the effectiveness of our model through comprehensive experiment s on multiple real-world dataset-s. We introduce our experimental settings in the first two subsec-tions, and afterwards present and discuss the details of the experi-mental results.
We construct 6 real-world datasets from Arxiv 1 , an archive for electronic preprints of scientific papers in the fields of mathematics, physics, etc. The datasets include cond-mat (Condensed Matter), hep-ex (High Energy Physics -Experiment), hep-lat (High Energy Physics -Lattice), hep-ph (High Energy Physics -Phenomenolo-gy), hep-th (High Energy Physics -Theory) and nucl-ex (Nuclear Experiment). For each dataset, we use the network evolution histo-ry in 1998 X 2000 as the training set and predict the new links emerg-ing in 2001 X 2003. Here we only make predictions for the egos who have been in the network up to 1998. And then for each ego, we select her/his 2-hop neighbors as candidate friends for prediction, because it X  X  found that most of the new links connect two individ-uals with common friends[16][1]. The statistics of the datasets are shown in Table 2.
Baselines. We compare our method with other 9 popular link prediction methods, which can be classified into 5 sorts.
Arxiv: http://arxiv.org/
All of the above methods are based on link structures while SRW utilizes more external features.

Evaluation Metrics. We evaluate the prediction performance of the above algorithms using 3 metrics: MAP (Mean Average Pre-cision), P@10 and AUC (Area Under the ROC Curve). General-ly, MAP measures how well the algorithm ranks positive instances above negative instances, P@10 measures the precision of the top 10 predictions given by the algorithm, and AUC measures how well the algorithm distinguishes positive instances from negative instances.

Parameter Settings . For LFPM, we set the default priors  X  0  X  0 =1 , X  0 =  X  0 =0 . 1 , and the number of interest areas K as they are shown appropriate in our experiments. For each LFP-M, we run Gibbs sampling for 20 iterations at most. The cascade damping factor for LFPM  X  =0 . 5 .

In LFPN-RW , RWR , MERW and SRW , we set the restart proba-bility  X  =0 . 15 , and the number of iterations of random walk is limited to 100. For SimRank , we set the decay factor C =0 the maximum number of iterations as 6, as in [13]. For MF and MF-BL , we set the number of hidden features as 20.

For SRW , we select the Wilcoxon-Mann-Whitney (WMW) loss function and logical edge strength function, as reported the best in [1]. We select the two-hop neighbors of each ego as the negative instances for that in our settings only the two-hop neighbors are considered as the candidate friends for prediction. We apply the gradient descent method to solve the optimization problem and the iteration is executed at most 20 times. The features for SRW include number of friends of the two individuals, number of their common friends, Jaccard coefficient and Adamic/Adar score.
We present the evaluation results in Table 3. As highlighted in bold, LFPN-RW consistently outperforms other methods on most datasets and most metrics.

LaFT-Proximity is a proximity measure based on the LaFT-Tree, another work which tries to explain link formation using the tran-sitivity of friendship. Though LaFT-Proximity shows better perfor-mance than other local neighbourhood based measures, including Jaccard and Adamic/Adar , it fails when compared with more com-plex algorithms which can utilize more global network information. LaFT-Proximity is always worse than our LFPN-RW , demonstrat-ing the importance and effectiveness of modeling interests in LFPM and capturing the co-influence of friend circles in LFPN-RW .
By utilizing the global network topological struct ure for proxim-ity measure, random walk based methods, including RWR , MERW and SRW , show better performance than other baselines. In most occasions their performance exceeds Adamic/Adar and Jaccard , the two best local measures reported in [19]. However, the vari-ants of RWR , MERW and SRW , are not always better than RWR as expected. SRW outperforms the RWR on cond-mat and hep-lat on MAP and AUC, but becomes worse on hep-ph . MERW fails to improve the performance of RWR on most of our datasets. Both MERW and SRW try to weight the edges in the graph based on the topological features; on the contrary, LFPN-RW weights the edges by modeling the behaviors of individuals and capturing the co-influence of friend circles based on the common user interests, and thus achieves better improvement over RWR than MERW and SRW .On hep-lat , hep-ph and nucl-ex , LFPN-RW achieves on av-erage 0.04 higher AUC and 0.03 higher MAP as compared to RWR . Furthermore, we notice that LFPN-RW is not only accurate but al-so more stable than others. This convinces us that the LFPN can capture the important information about the network growth and people X  X  friend-making behaviors.

It is important to note that, unlike SRW which requires feature extraction from both positive and negative instances, LFPN esti-mates the weighted network from only the  X  X ositive instances X , and no other features are considered.

Th e performance of LFPN-RW far exceeds that of MF which tries to capture the effect of intermediary by matrix factorization, and that of its improved version MF-BL . While in matrix factoriza-tion we can explain the latent feature space as the intermediation effect, these methods cannot u tilize the internal relations among individuals X  friend-making behaviors and thus the intermediation effect cannot be modelled well. Figure 3: The effect of knowledge accumulation in Cascade LF-PM on the link prediction performance of LFPN-RW. Figure 4: The performance of dynamic link prediction for each year. Figure 5: The variance of link prediction performance of LFPN-RW with different damping factor  X  in Cascade LFPM.
In this subsection, we study to what extent the knowledge accu-mulation in Cascade LFPM can influence the learned LFPN and the link prediction performance based on LFPN. We conduct this study by three questions: (1) Does a longer training time mean more ac-cumulated knowledge and thus promise better performance in link prediction? (2) As time goes by, with more knowledge accumulat-ed in cascades, will the prediction performance increase continu-ously? (3) How should we control the amount of the accumulated knowledge that be passed from one period to the next?
We answer the first question by examining the performance vari-ance of LFPN-RW on the LFPNs with different length of train-ing time. Longer training time means more earlier knowledge is learned and accumulated, and afterwards reflected in the final LFP-N. Fig. 3 shows the experimental results. Here we split the training data into multiple cascades by y ear and each cascade corresponds to one year. For the sake of readability we only show the results on hep-lat and nucl-ex , and similar results are observed on other datasets. When the number of training cascades is 0, our LFPN-RW decays to RWR . LFPN-RW with one training cascade only utilizes Figure 6: The variance of link prediction performance of LFPN-RW with different  X  in LFPN-RW. the knowledge of the current period and outperforms that with no training cascade, i.e. RWR , on both datasets and both metrics. The AUC of LFPN-RW increases with the number of training cascades in the beginning, and then tends to be stable after 4 training cas-cades. This indicates that the accumulated knowledge in the recent time can really improve the performance; however, the knowledge too far in the past has little effect because people X  X  behaviors and interests are changing with time. This finding proves that our ap-proach is more feasible as when only little training data are given it can still show promising performance.

To answer the second question, we conduct dynamic link pre-diction tasks on the datasets. For fixed individuals in the first year in each dataset, we make yearly link prediction which predicts the new links for the next year given the network in each year, and study how the performance will vary. As time goes by and the number of friends of each individual keeps growing, there will be more candidate friendships than new emerging friendships in each year, so it X  X  difficult to compare the performance on a sequential basis. Thus we compare LFPN-RW with RWR in each year. The results are presented in Fig. 4. The curves of RWR and LFPN-RW are quite similar on both datasets. We observe that LFPN-RW is not only always better than RWR , but also more stable, as shown in the more smooth curve. RWR will perform worse if there exist outliers in the network; however, LFPN becomes increasingly robust with continuous knowledge accumulation. Furthermore, in nucl-ex and later time of hep-lat , we see the improvement of LFPN-RW over RWR increases with time.

Finally, we study how we can control the extent of knowledge accumulation by the cascade damping factor  X  in LFPM inference for better link prediction performance. The choice of  X  faces the trade-off between the knowledge learned in the new period and that accumulated from previous models. Just think of the extreme cases. When  X  =0 , each LFPM is trained in each period independently, without the accumulated knowledge; however, when  X  =1 ,all previous knowledge is passed to the next model, with equal impor-tance as the new knowledge. Typically, we set a higher  X  when less data is observed in the specific period. Otherwise, if we observe sufficient data for the current model, we can lower the influence of the previous models on the current one by setting a smaller  X  . When evaluating on real data we observe that  X  plays an important role in the cascade inference procedure. For the sake of readability, we only show some representative curves in Fig. 5. We can see  X  in the range from 0.3 to 0.5 seems to be most appropriate.
In LFPN-RW, we treat the creation of a new friendship as a result of friendship propagation in the network and model the link predic-tion as a random walk upon the LFPN, taking the co-influence ef-Figure 7: Comparison of link prediction performance of LFPN-RW with/without interest awareness. fect of the friend circles on one X  X  friend-making behaviors into con-sideration naturally. In this subsection we study how we can benefit from the co-influence effect. In the LFPN-RW, the restart prob-ability  X  controls how  X  X ar X  the walker wanders on the network; a smaller value allows the walker to walk farther and increases the co-influence of the friend circles on one X  X  friend-making behaviors, and a larger value enhances the direct influence of one X  X  current friends. As shown in Fig. 6, in our evaluations we see the lower value of  X  tends to achieve better performance. This demonstrates the importance of the co-influence captured in our LFPN-RW. Fur-thermore, the performance will decrease if  X &lt; 0 . 3 because the direct influence from the current friends is reduced too much. To achieve better performance, one needs to make trade-off between the influence from current friends and the co-influence of friend circles in specific networks.
In LFPM and LFPN-RW, we assume that the creation of friend-ship is the result of friendship propagation, which would be influ-enced by both the transitivity of friendship and the personal inter-ests. In this subsection, we investigate how personal interests will influence the link prediction performance. We remove the interest factors, including  X  and  X  , from LFPM and LFPN-RW, and get a new algorithm denoted by LFPN-RW without Interest Awareness . Correspondingly, our original algorithm can be denoted by LFPN-RW with Interest Awareness . We compare the performance of the new algorithm with our original algorithm on all the datasets and the results are shown in Fig. 7. We can see the latter outperforms the former on most datasets. It should be noted that we don X  X  intro-duce external personal profiles to learn the personal interests. This convinces us that the personal interests can be well captured from the social behaviors of the individuals and the topological struc-ture of the network, and furthermore can benefit the link prediction using LFPN-RW, i.e. the LFPN-RW with Interest Awareness here, which models the friendship propagation with interest awareness.
In this subsection we study the convergence speed of our LFPM inference and LFPN-RW.

In Fig. 8 we investigate how the performance of LFPN-RW varies with the number of iterations of LFPM. From the two representative curves on hep-lat and nucl-ex , we see the performance increases quickly, and then LFPM converges in nearly 15 iterations.
Fig. 9 shows the performance variance with the number of iter-ations in LFPN-RW. Experimental results on hep-lat and nucl-ex demonstrate the LFPN-RW converges in about 30 iterations.
Link prediction is a classical problem which attracts many at-Figure 8: The variance of link prediction performance of LFPN-RW with increasing number of iterations in LFPM. Figure 9: The variance of link prediction performance of LFPN-RW with increasing number of iterations in LFPN-RW. tentions. The general approach for link prediction is based on the proximity measuring in the network. One branch of this method is based on the local neighbourhood structures, such as common neighbors , Jaccard coefficient and Adamic/Adar , all of which were surveyed by Liben-Nowell and Kleinberg [19]. Another popular approach utilizes the random walk to measure the node proximity on the whole network, including Random Walk with Restarts (R-WR) [25], SimRank [13] and Katz [14]. Approaches have also been proposed to improve the traditional random walk by adjusting the transition probabilities , including randomized shortest-path (RSP) dissimilarity [29] and Maximum Entropy Random Walk(MERW) [4][17]. Supervised Random Walk(SRW) was proposed to learn the transition probabilities with a supervised method [1]. However, su-pervised methods face the imbalance problem [20][22] and require elaborate feature extraction; on the contrary, our LFPN-RW models personal behaviors depending only on the positive instances. Fur-thermore, we identify personal interests from their social relations only, without other node-specific attributes.

It X  X  also interesting to study how the network evolves [16] and how people make friends [12]. Researchers have found many in-teresting patterns, such as preferential attachment [23], triadic clo-sure [27], reciprocity [24][11] and homophily [5]. The transitivity of friendship has been noticed long ago [26][28] and used to explain the phenomenon of triadic closure in social networks [15]. Recent-ly, the role of triadic closure in the link formation in social networks was further verified [7][27][3][6]. However, it hasn X  X  been studied that how the triadic closure and the transitivity of friendship drive the microscopic evolution of social networks. Yin et al. proposed a matrix factorization approach for link prediction by considering the hidden features as the recommendation of intermediaries [30]. Their work is a bit similar with ours; however, they ignore the se-quential relationship among the social behaviors and cannot model the actual contribution of each intermediary on the link formation.
Our previous work [32] primarily focuses on how to capture the expansion traces of one X  X  social network. It does not explore the dimension of personal interest and model its impact on network expansion. Neither does it utilize the concept of friend circles to capture the co-influence effect of one X  X  friends based on interest awareness as in our paper.
Modeling people X  X  social behaviors and furthermore understand-ing their motivations are important for us to know how the social network emerges, evolves and vanishes eventually, as the people are the dominant players in social networks. In this paper, we model people X  X  friend-making behaviors using the LFPM, a gen-erative model driven by the famous sociological principle of the transitivity of friendship and personal interests. The inferred LFP-N incorporates rich knowledge about the patterns of individuals X  X  behaviors and the growth potentials of the social network, with the co-influence of friend circles and personal interest well modeled. Furthermore, we propose LFPN-RW, which treats the link predic-tion task as a random walk on the LFPN, guided by the interest-aware friendship propagation. Our approach achieves promising performance in experimental studies, which leads us to draw the conclusion that the transitivity of friendship really plays important roles in the evolution of social networks and can be utilized to ana-lyze the network evolution if well modeled with interest awareness.
We would like to thank the anonymous reviewers for their valu-able comments and suggestions to improve this paper. This work is supported in part by the National Natural Science Foundation of China (No. 61170064, No. 61073005, No. 61133002), the Nation-al High Technology Research and Development Program of Chi-na (No. 2012AA011002), US NSF through grants IIS-0905215, CNS-1115234, IIS-0914934, DBI-0960443, and OISE-1129076, and Huawei grant. [1] L. Backstrom and J. Leskovec. Supervised random walks: [2] D. M. Blei, A. Y. Ng, and M. I. Jordan. Latent dirichlet [3] M. J. Brzozowski and D. M. Romero. Who should I follow? [4] Z. Burda, J. Duda, J. M. Luck, and B. Waclaw. Localization [5] M. De Choudhury. Tie f ormation on twitte r: Homophily and [6] M. Doroud, P. Bhattacharyya, S. F. Wu, and D. Felmlee. The [7] S. A. Golder and S. Yardi. Structural predictors of tie [8] M. S. Granovetter. The Strength of Weak Ties. The American [9] M.A.Hasan,V.Chaoji,S.Salem,andM.Zaki.Link [10] G. Heinrich. Parameter estimation for text analysis. Version [11] J. Hopcroft, T. Lou, and J. Tang. Who will follow you back?: [12] H. Hu and X. Wang. How people make friends in social [13] G. Jeh and J. Widom. Simrank: a measure of [14] L. Katz. A new status index derived from sociometric [15] D. Krackhardt and M. S. Handcock. Heider vs simmel: [16] J. Leskovec, L. Backstrom, R. Kumar, and A. Tomkins. [17] R.-H. Li, J. X. Yu, and J. Liu. Link prediction: the power of [18] D. Liben-Nowell and J. Kleinberg. The link prediction [19] D. Liben-Nowell and J. Kleinberg. The link-prediction [20] R. N. Lichtenwalter, J. T. Lussier, and N. V. Chawla. New [21] M. McPherson, L. Smith-Lovin, and J. M. Cook. Birds of a [22] A. K. Menon and C. Elkan. Link prediction via matrix [23] M. E. J. Newman. Clusterin g and preferential attachment in [24] V.-A. Nguyen, E.-P. Lim, H.-H. Tan, J. Jiang, and A. Sun. Do [25] J.-Y. Pan, H.-J. Yang, C. Faloutsos, and P. Duygulu. [26] A. Rapoport. Spread of information through a population [27] D. M. Romero and J. Kleinberg. The directed closure process [28] G. Simmel and K. H. Wolff. The Sociology of Georg Simmel . [29] L. Yen, M. Saerens, A. Mantrach, and M. Shimbo. A family [30] D. Yin, L. Hong, and B. D. Davison. Structural link analysis [31] Z. Yin, M. Gupta, T. Weninger, and J. Han. A unified [32] J. Zhang, C. Wang, J. Wang, and P. S. Yu. LaFT-Tree:
