 Ranking algorithms, e.g., the Pagerank algorithm, have been one of the major tech-nologies in search engines. Unfortunately, traditional ranking algorithms are based on Besides, the textual-relevance-based ranking approach does not consider the relation-ship between textual keywords and location names in a query. On the other hand, many Web pages are associated with certain locations, e.g., news report, retailer pro-18.6% of them contained a geographic predicates and 14.8% of them included a loca-tion name. Therefore, how to extract locations for Web pages and use them in Web search has been a hot and critical issue in current research on Web search [2-4]. 
In this paper, we present a new location-aware ranking algorithm for Web search, which is called MapRank . MapRank aims to improve the ranking performance for spatial textual Web queries that contain both textual keywords and location words. The algorithm considers both textual and location relevance between Web pages and querying terms when returning the results, and can improve the effectiveness of Web search engines. The contributions of the paper can be summarized as follows: (1) We propose a new ranking algorithm named MapRank for spatial textual Web queries. MapRank is implemented using a two-staged strategy, namely an offline stage extracting and building &lt; keyword , location, score &gt; pairs for Web pages and an online stage computing the final ranking score. The new algorithm considers both textual and location relevance in the rankin g process, and also takes into account the relationship between keywords and locations in a Web page. (2) We conduct comparison experiments on various real datasets crawled from New York Time, to measure the performance of the MapRank algorithm. The expe-rimental results show that the proposed MapRank algorithm has the best performance with respect to different spatial textual queries. However, as the  X  X n X  relation is the most appropriate one for Web search, spatial textual queries in Web search engines can be simplified as &lt; what , where &gt;. Location-related ranking algorithms are specially designed to cope with spatial textual queries in Web search engines. Basically, a location-related ranking algorithm has to consider The challenging issues are to determine location relevance and combine textual and location relevance during the ranking process. 
There are two major methods to compute the location relevance. One of them is to utilize the relation words in queries [5-7]. For example, many spatial queries contain some spatial relation words such as  X  X nside X ,  X  X verlap X , and  X  X earby X . The other type does not use the explicit spatial relation words in queries, but determines spatial rela-instance, the spatial object  X  X aris X  in the query can be mapped into a determined geo-graphic extent. 
Answering spatial textual queries need to consider both textual and location relev-ance. The native way is to combine them using a linear-weighted method. Some other works do not use the combination of textual relevance and location relevance. Li et al. [10] introduced a topic model to determine the topic of Web queries as well as Web pages. As a topic usually has a distribution among geographic extent, they proposed to utilize a Gauss formula to simulate the geographic distribution of a topic. The geo-graphic distribution model of topics is then taken to determine the ranking scores of Web pages. Some researchers proposed ranking mechanisms which combines various metrics in textual relevance computation and location relevance determination. For example, Martins et al. [11] proposed an SVM-based optimized MAP method, called SVMmap, and Cai et al. [12] proposed the GeoVSM, which is a geographic optimized VSM model. 
More recent works on spatial textual query processing are conducted by Gao Cong locations in SWORS are with the similar semantics in traditional geographical infor-mation systems. Therefore, spatial queries involving geographical relations such as  X  X earby X  and  X  X lose to X  have to be resolved by some new indexing structures, e.g., IR-Tree [3]. Regarding the ranking techniques, SWORS considered both textual and spatial relevance, which was similar with the previous solutions. 3.1 The Basic Idea MapRank is a location-aware ranking algorithm for spatial textual Web search. It considers both textual relevance and locatio n relevance of Web page. The basic idea of MapRank can be described as follows: (1) MapRank considers the association of keywords and locations when computing the scores of Web pages. In particular, we map each keyword in a Web page with a spe-cific focused location and then calculate the location-constrained score of each keyword. which the location represents the most relevant focused location of the given keyword. (2) We use a two-staged design to implement the MapRank algorithm. The first The second online stage is to compute the final ranking scores for all the Web pages. In the second stage, we combine two factors, namely the relevance between the que-rying location and the focused locations in Web page, and location-constrained key-word score, to achieve a tradeoff between location relevance and textual relevance. The main difference between MapRank and other existing ranking algorithms is that it combines the focused locations of Web page into the ranking algorithm. Further-solution to integrate textual and location relevance into the ranking algorithm. 3.2 Constructing &lt;keyword, location, score&gt; Pairs The focused location refers to the most a ppropriate location associated with a Web page. The extraction of focused locations is performed by the algorithm discussed in our previous work [13]. It returns a set of focused locations for each Web page. 
Generally, a spatial textual query contains several keywords and one location word. Moreover, the keywords and the location word in most spatial textual queries usually imply some relationships which repr esent users X  indeed searching needs. For example, a query  X  X assachusetts population statistics X  actually means that users want to find the population statistics of the state  X  X assachusetts X . Here, the text keywords  X  X opulation statistics X  and the location word  X  X assachusetts X  in the query have an intrinsic relationship. In general, the relationship between a keyword and a location keyword is mostly related with the location. 
Current search engines deals with the text keywords and location words individually and ignores the relationship between the keywords and locations. Our MapRank algo-relationship between keywords and locations when performing the ranking task. This idea is motivated by the temporal textual ranking approach proposed in [14]. Basically, we first find the most relevant focused location for each keyword, and construct &lt; key-word , location &gt; pairs. After that, we compute the location-constrained ranking score of each keyword, which finally forms the list of &lt; keyword , location , score &gt;. 
We use three constant values to measure the scores for &lt;keyword, location&gt; pairs, namely TITLE_SCORE, SENT_SCORE, and PARA_SCORE. The TITLE_SCORE is used to represent the score of &lt;keyword, location&gt; when the keyword and asso-SENT_SCORE is used when the keyword an d associated location word are both con-tained in the same sentence, but not in the title. The PARA_SCORE is used when the keyword and associated location word are bot h contained in the same paragraph, but not in the same sentence. Generally, we have the following assumption: TITLE_SCORE &gt; SENT_SCORE &gt; PARA_SCORE. 3.3 Computing the Ranking Scores of Web Pages When users post a query to the search engine, the final ranking scores of Web pages are computed dynamically. In this paper, the final ranking score of a Web page is calculated based on two factors, namely the relevance between the querying location and the focused locations in Web page, and location-constrained keyword score. 
Given a Web page D , a set of querying keywords, say &gt; &lt; algorithm (as shown in Fig.1). 
In Fig.1, we emphasize the location relevance between the user query and Web pages. This is done by introducing location relevance into the computing procedure of ranking scores, as defined by the formula 3.1. l =  X  X SA/Massachusetts/Peak Stone X , g =  X  X SA/Arizona X , common ( l , g ) is 1 and max ( l , g ) is 3. To evaluate the performance of MapRank, we conduct an experiment on a dataset crawled from New York Time, which contains 311,187 Web pages ranging from 2006 to 2011. For every Web page in the dataset, we cut the page into words using HTMLParser (http://htmlparser.sourceforge.net/) and use using the stop-words data-base provided by SMART (http://www.lextek.com/manuals/onix/stopwords2.html) to filter stop words. Then we stem the keywords using the Porter Stemmer tool (http://tartarus.org/~martin/PorterStemmer/). After that, we extract the focused loca-tracted keywords are maintained in Lucene 3.5, which will be used when executing comparison algorithms. 
In the experiments, we run 16 spatial textual queries and use two metrics to meas-ure the performance of each algorithm, i.e., MAP and NDCG. We implement the algorithms using Java under the developing environment ObjectWebLomboz. The test machine has an Intel Dual Core Processor, 2GB of main memory, and is running Windows XP Professional. 
Figure 2(a) shows the MAP@5 and MAP@10 scores of MapRank and other four competitor algorithms, namely Textual Ranking (TR), Linear Weighted Ranking (LWR), Improved Weighted Ranking (IWR), and DS Ranking (DSR). The LWR approach uses the linear weighted sum of textual relevance and location relevance as the ranking score of Web page. The IWR appro ach is similar with the linear weighted ranking one, except that it uses an improved way to determine the parameter  X  . the basis of the description of textual words and location words. The DSR approach is based on the Dempster-Shafer (DS) theory of evidence, and uses different types of evidences to determine the possibility of an event [15]. The textual relevance and location relevance can be regarded as two individual evidences for spatial textual ranking. In our experiment, we use the weight of importance for each textual word and location word to determine the uncertain ty of those two evidences, and rank Web pages according to the uncertainty. Figure 2(b) shows the different NDCG scores. As shown in Fig.2, MapRank gets the best MAP and NDCG scores in all cases. In this paper, we introduce the MapRank algorithm which is based on the association between the focused locations of Web page and keywords. It presents an appropriate tradeoff between textual relevance and location relevance. The experimental results show that the MapRank algorithm has better performance for spatial textual queries than its competitors. Next we will integrate our algorithm with temporal information in Web pages. Acknowledgement. This paper is supported by the National Science Foundation of China (No. 60776801 and No. 71273010), the National Science Foundation of Anhui Province (no. 1208085MG117), and the USTC Youth Innovation Foundation. 
