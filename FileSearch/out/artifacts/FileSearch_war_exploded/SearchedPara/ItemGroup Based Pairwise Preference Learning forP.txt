 Collaborative filtering with implicit feedbacks has been steadi-ly receiving more attention, since the abundant implicit feed-backs are more easily collected while explicit feedbacks are not necessarily always available. Several recent work ad-dress this problem well utilizing pairwise ranking method with a fundamental assumption that a user prefers items with positive feedbacks to the items without observed feed-backs, which also implies that the items without observed feedbacks are treated equally without distinction. Howev-er, users have their own preference on different items with different degrees which can be modeled into a ranking re-lationship. In this paper, we exploit this prior informa-tion of a user X  X  preference from the nearest neighbor set by the neighbors X  implicit feedbacks, which can split item-s into different item groups with specific ranking relation-s. We propose a novel PRIGP(Personalized Ranking with Item Group based Pairwise preference learning) algorithm to integrate item based pairwise preference and item group based pairwise preference into the same framework. Experi-mental results on three real-world datasets demonstrate the proposed method outperforms the competitive baselines on several ranking-oriented evaluation metrics.
 H.3.3 [ Information Search and Retrieval ]: Information Filtering Collaborative filtering; Implicit feedback; Pairwise prefer-ence; Item group
Recommender systems, as an increasingly critical tools in dealing with information overload on the Internet, have at-tracted immense amounts of research recently. Collaborative Filtering(CF) [5, 7, 9], which is a content-free recommenda-tion technique, widely performs as a core in recommender systems. The underlying assumption of CF is that users with common interests in the past would behave much more similarly on items in the future. Most recent literature of CF is focused on improving the accuracy of regression on users X  ratings [3, 9] or personalized ranking of items [10] by effec-tively exploiting explicit feedbacks (e.g., typically numerical ratings).

However, in most real-world scenarios, explicit feedbacks are not necessarily always available while the abundant im-plicit or one-class feedbacks [5, 7] are more easily collected such as  X  X licks X  on web pages or  X  X ought X  in e-commercial websites. Some pointwise methods [2, 5] regard the observed implicit feedback on an item as a user rating 1 and the un-observed as 0 such that the problem can be addressed by utilizing CF algorithms for explicit feedbacks with various weighting or sampling strategies. Recently, some pairwise methods [7, 12] are proposed with a more proper assump-tion that a user prefers items with observed feedbacks to items without feedbacks. Note that the assumption of pair-wise preference essentially attempts to cope with the issue of personalized ranking directly, which leads to better rec-ommendation performance than pointwise methods. One of the most widely studied pairwise methods is bayesian per-sonalized ranking(BPR) [7] which shows a promising result in handling problems of recommendation with implicit feed-backs. And with its success, various extended methods from distinct aspects for BPR are proposed, e.g., it is extended from two dimensions to three dimensions in [8] by adopting the concept of tensors and scenarios of multiple domains are handled in [4] applying collective matrix factorization.
However, there still exists a challenging problem, which lies in the assumption of pairwise preference over two items. Previous pairwise methods (e.g., BPR) are simply built on the assumption that a user prefers an item with a positive feedback to an item without an observed feedback, which al-so implies that items without observed feedbacks are treated with no distinction or preference. Nevertheless, a user would have his/her own preference on different items though the items were not observed by him/her before. As a matter of fact, it is reasonable to believe that a user X  X  preference on dif-ferent items is usually presented in specific ranking relations, which indicates that a user has individual prior preference on different items with different degrees. A recommender system should tend to rank higher those items with greater prior preference for a user. Thereby, prior information for a user should be exploited for a better recommendation.
In this paper, we propose a novel approach which incor-porates users X  prior preference, which were not considered before, into the algorithms based on the pairwise preference assumption of item level and construct an unified frame-work. In a typical CF system, a user X  X  nearest neighbors (most similar users according to historical feedbacks) usu-ally share similar interests with that user. Then the items with more positive implicit feedbacks from a user X  X  near-est neighbor set could be more possibly liked by him/her, such that a user X  X  prior preference on items can be discov-ered. The core concept item group is defined in our work as a subset of items with the same cumulative number of implicit feedbacks from nearest neighbor set. Thus, ranking relations of items for a user from his/her prior preference can be reflected by the item groups with different positive feedback numbers. Our approach constructs an item group based pairwise preference for the specific ranking relations of items and combine it with item based pairwise prefer-ence to formalise a novel framework PRIGP( P ersonalized R anking with I tem G roup based P airwise preference learn-ing). Experiments on three real-world datasets demonstrate the effectiveness of our model.
In a real world scenario, we have a set of users U with size n and a set of items I with size m . Each user u  X  U has expressed their positive feedbacks on a set of items I + u Moreover, in a user based system, a user u can have fair-ly similar behaviors with a set of users who constitute the nearest neighbor set denoted as N u with size of |N u | . Con-sequently, based on the implicit feedbacks of users and in-formation from neighbors, our goal is to recommend a per-sonalized ranking list of items to a user from the item set,
The basic assumption of pairwise preference of two items can be formally represented as where  X  r ui denotes preference of a user u on an item i and the relation  X  r ui &gt;  X  r uj indicates user u could have more interests on the item i with a positive feedback than on the item j without an observed feedback. By this item-level assump-tion, we can further infer the ordinal relations for items in
There are various methods [7, 12] based on the assumption of pairwise preference over two items, which are develope-d from different perspectives of classification [7] or regres-sion [12]. In our framework, to model the item based pair-wise preference, we adopt a similar formulation employed in BPR [7]. Note that our approach is a framework that is not limited to applying BPR.

BPR attempts to maximize the joint probabilities of users X  preference on items in their corresponding I + u more than in likelihood loss, we can eventually formalize the item based pairwise preference as minimizing the following criterion
BPR-Opt =  X  Fi gure 1: Illustration of Item Group Based Pair-wise Preference. The set f u n 1 ; :::; u n 4 g are the nearest neighbor set of u 0 . Items are split into g (0) u , g (1) and g (4) u while g (3) u =  X  , according to implicit feed-backs from neighbors. Thus we have the relation-ships  X  r where  X  x uij ( X ) is computed as  X  r ui ( X )  X   X  r uj ( X ) with  X  to be parameters for representing  X  r ui and ( x ) = 1 1+ e x th e logistic sigmoid function defining the likelihood of pair-wise preference. More generally, by denoting L ( I + u ; I\I +  X   X  the item based pairwise preference learning as where L ( I + u ; I\I + u ) is regarded as a loss function that mea-sures the item based pairwise ranking loss for user u and R ( X ) a regularization term to prevent overfitting.
Previous item based pairwise methods improperly assume that items in the unobserved subset are treated without dif-ferences. However, a user may show his/her own preference on different sets of items with different degrees, though the items were not observed by him/her before. Since the rec-ommender system will provide a ranking list of the unob-served items to the users for personalized recommendation, it should tend to rank these items higher for that user. For each user, there can exist a nearest neighbor set that consist-s of users who behave similarly with that user. Therefore, effectively exploiting the collaborative information from the nearest neighbor set can serve to discover users X  prior prefer-ence information. In this section, we will show how to infer this prior preference information of a specific user from near-est neighbor set and propose a framework to make person-alized ranking by incorporating item group based pairwise preference and the item based pairwise preference.
We define item group of a user u as the set of items that have the same number of observed feedbacks from his/her nearest neighbors, which can be formulated as follows where g ( k ) u is u  X  X  item group with k feedbacks for each mem-ber in it, O u ( i ) denotes the number of feedbacks from u  X  X  nearest neighbor set, Z is the set of integers and k varies from 0 to |N u | . Thereby, we assume that a user u is like-ly to express more preference on an item group with more observed feedbacks from neighbors than an item group with less. We denote G u = { g (0) u ; g (1) u ; :::; g ( jN u set of item groups for user u . Then, the preference relations a mong item groups w.r.t. a user u  X  U can be formalised as where  X  r group. If there exists a g ( k ) u whose size is 0, we can just ignore that item group in Eq. 4. For the above method, we can approximate a user X  X  prior preference with different degree on different item groups via implicit feedbacks of nearest neighbors. The item group based pairwise preference can be explained by a toy example illustrated in Fig. 1. Specifically, nearest neighbors are determined by cosine similarity of two users X  implicit feedbacks.

Then, we will show how to model item group based pair-wise preference of a user. For a user u  X  U , we can define u  X  X  preference on the k th item group as  X  r into a likelihood probability form of pairwise preference over item groups for each user as where p ( X  r item groups g ( s ) u and g ( t ) u . By introducing the negative log likelihood loss function, we construct an item group based pairwise ranking loss in the following form where  X  x
Combining the item based and item group based pairwise ranking loss, we can eventually get our unified framework as where is a tradeoff parameter used to control the confi-dence of the pairwise preference among item groups w.r.t. a user and R ( X ) is a regularization term. Therefore, our model PRIGP are obtained. Note that our model is a gen-eral framework and it will reduce to the original item based pairwise methods if = 0 or |N u | = 0.
 More specifically, in our model, the parameter  X  = { U u  X  R 1 d ; V i  X  R 1 d ; b i  X  R ; u  X  U ; i  X  I} where U u , V the user and item latent factor vectors respectively and b is the item bias. And the parameter regularization term is computed as R ( X ) = 1 2 || b i || 2 ]. Thereby, the preference on the item i of a us-er u is generated by  X  r ui = U u V T i + b i . Moreover, we can compute u  X  X  preference on the k th item group as  X  r U  X  b we can predict the preference scores of user u on item i  X  items can be recommended to u by sorting predicted scores.
For obtaining a better optimization and boosting the train-ing speed, bootstrapping based stochastic gradient descent method is introduced to learn our model in Eq. 7. We omit the detailed iteration algorithm due to the space limit, and the similar updating method is described in [6, 7].
To empirically evaluate our method on the recommen-dation with implicit feedbacks, we perform experiments on three real-world datasets: MovieLens100K 1 , Douban 2 and Ciao 3 . MovieLens100K is a widely used benchmark dataset for CF. Douban is a well-known website for users to ex-press their preference on movies, books and music, where we crawled users X  feedbacks on movies. A subset of pub-lished Ciao dataset is also collected. To simulate the implicit feedbacks, we keep the ratings larger than 3 as observed pos-itive feedbacks [11] and then we obtain 55,375 observations from 943 users and 1,682 items in MovieLens100K, 276,619 observations from 4,184 users and 2,069 items in Douban and 43,966 observations from 1,296 users and 3,008 items in Ciao.

Two popular baseline methods are used for empirical com-parison, which is PopRank [6] and BPR [7]. (1)PopRank is a basic algorithm for the problem of CF with implicit feed-backs, which makes the recommendation to users in terms of global popularity of items. (2)BPR is a strong pairwise method for our comparison and is also a particular case of our method. For the pointwise methods [5, 2], they perfor-m much worse than the pairwise methods (e.g., BPR) and comparisons are not made with them.
Considering the real-world scenarios where new users are usually only willing to check a few top-ranked recommend-ed items, to measure the recommendation performance, we adopt the widely used evaluation metrics in top-K recom-mendation: N DCG , 1-call [1], F 1-score , P recision , Recall and with setting K = 5. Higher values on above metrics correspond to better recommendation performance.

In our experiments, we randomly select 50% observations as training data and the rest 50% as test data. The dimen-sion of the latent factor vector is d = 10. The regulariza-tion parameters of our model are set as u = v = v = 0 : 02 ; 0 : 02 ; 0 : 1 for MovieLens100K, Douban and Ciao respec-tively. And we vary  X  { 0 : 01 ; 0 : 1 ; 1 ; 10 ; 30 } to look for the optimal tradeoff parameter. In addition, we set the size of the nearest neighbours |N u | from 0 to 200 with a step 20 to study its impact. We choose the best parameters based on the N DCG @5 performance on the test set.
Firstly, we compare the performance of our PRIGP ap-proach with other baseline methods as illustrated in Ta-ble 1. The optimal parameters we obtain for PRIGP are { k = 1 ; | N u | = 140 } for MovieLens100K, { k = 10 ; | N 200 } for for Douban, { k = 1 ; | N u | = 40 } for Ciao, and de-tailed discussion will presented in this paper. We observe that our proposed PRIGP framework consistently outper-forms all the other baselines. Note that PopRank strategy has a worse performance than BPR and PRIGP and, as a matter of fact, PopRank is not a personalized algorithm for recommendation, which shows the necessity of designing an appropriate personalized recommendation model. A trend h ttp://grouplens.org/datasets/movielens/ http://movie.douban.com/ http://www.public.asu.edu/ jtang20/datasetcode/ Fi gure 2: Parameter Study of |N u | and . (a)(b)(c) study the |N u | on MovieLens100K, Douban and Ciao while (d)(e)(f) study on MovieLens100K, Douban and Ciao. of our PRIGP methods can be observed that it always out-performs BPR, which proves the effectiveness of our meth-ods for personalized recommendation issues with implicit feedbacks. Moreover, since our method adopts BPR into its framework, the comparison of PRIGP and BPR could demonstrate that by discovering the prior information of a user X  X  preference from nearest neighbor set, our method can definitely improve the pairwise personalized ranking method the recommendation performance.

Then, the impact of parameter |N u | is studied explicitly with the metric NDCG@5. As illustrated in Fig. 2(a),(b),(c), by fixing optimal for all datasets, we can observe that the recommendation performance will firstly increase rapidly as the size gets larger because more information from neigh-bors can be obtained. Then with |N u | becoming larger, the curves in Fig. 2(a),(c) reach an optimal point and turn to decrease, and the curve in Fig. 2(b) increases much slower. That is because a larger nearest neighbor set will include more users with a lower similarity such that the informa-tion from neighbors will not increase or even more noisy than helpful ranking information will be involved from that neighbor set. Specifically, the optimal | N u | for MovieLen-s100K, Douban and Ciao are at 140 ; 200 ; 40 respectively.
Finally, to understand the effect of different nearest neigh-bor set sizes, we study the influence of the tradeoff param-eter which balances the item based and item group based pairwise preference in ranking. As illustrated in Fig. 2(d), (e), (f), we can observe that = 1 ; 10 ; 1 are the most proper tradeoff parameters empirically with setting |N u | to be the best one in each dataset.
In this paper, we propose a novel recommendation algo-rithm PRIGP for CF problems with implicit feedbacks. In our model, we integrate item based pairwise preference and item group based pairwise preference into the same frame-work with leveraging the observed feedbacks from neighbors. The experimental results on three real-world datasets show our proposed method performs a better top-K recommenda-tion than baseline methods. Noting that our work provides a framework which can be fit for any personalized ranking method, we plan to generalize it to other pairwise methods in the future. This work was supported in part by 973 Program (Grant No. 2010CB327905), National Natural Science Foundation of China (Grant No. 61170127, 61332016).
