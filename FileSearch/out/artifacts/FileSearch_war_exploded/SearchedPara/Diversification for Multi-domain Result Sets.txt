 Multi-domain search answers to queries spanning multiple entities, like  X  X ind an affordable house in a city with low criminality index, good schools and medical services X , by producing ranked sets of entity combinations that maximize relevance, measured by a function expressing the user X  X  pref-erences. Due to the combinatorial nature of results, good entity instances (e.g., inexpensive houses) tend to appear re-peatedly in top-ranked combinations. To improve the qual-ity of the result set, it is important to balance relevance (i.e., high values of the ranking function) with diversity, which promotes different, yet almost equally relevant, entities in the top-k combinations. This paper explores two different notions of diversity for multi-domain result sets, compares experimentally alternative algorithms for the trade-off be-tween relevance and diversity, and performs a user study for evaluating the utility of diversification in multi-domain queries.
 H.3.3 [ Information Search and Retrieval ]: Search Pro-cess; H.3.4 [ System and Software ]: Performance Evalu-ation (efficiency and effectiveness); H.3.5 [ On-line Infor-mation Services ]: Web-based services Theory, Experimentation, Performance Result diversification, multi-domain search  X 
The research leading to these results has received funding from the European Research Council under the 2008 Call for  X  X DEAS Advanced Grants X  as part of the Search Computing (SeCo) project. We wish to thank A. Vaccarella and M. Follo for their contribution to the implementation of the query analysis framework.

Multi-domain search tries to respond to queries that in-volve multiple correlated concepts [2, 4]. Formally, multi-domain queries can be represented as rank-join queries over a set of relations, representing the wrapped data sources [10]. Each item in the result set is a combination of objects that satisfy the join and selection conditions, and the result set is ranked according to a scoring function. Due to the combinatorial nature of multi-domain search, the number of combinations in the result set is normally very high, and strongly relevant objects tend to combine repeatedly with many other concepts, requiring the user to scroll down the list of results deeply to see alternative, maybe only slightly less relevant,objects. Improving the diversity of the result set is the aim of diversification , which can be defined in the context of multi-domain search as the selection of K ele-ments out of a universe of N combinations, so to maximize a quality criterion that combines the relevance and the di-versity of the objects of distinct types seen by the user.
The contributions of the paper includes: (1) the formal-ization of the diversification problem in the context of multi-domain search; following the approach in [9], we propose two criteria for comparing combinations ( categorical and quanti-tative diversity); (2) a study of the behavior of three known greedy algorithms, testing the hypothesis that the diver-sification algorithms improve the quality of the result set with respect to a baseline constituted by the selection of the most relevant K combinations; (3) an evaluation of the per-ception and utility of diversification in multi-domain search with a user study based on selection tasks involving combi-nations of correlated objects.

The paper is organized as follows: Section 2 presents the formalization of the problem and introduces different diver-sity measures for combinations; Section 3 illustrates the re-sults of the experimental activity; Section 4 discusses pre-vious work; Section 5 concludes and discusses future work.
Consider a set of relations R 1 ,R 2 ,...,R n ,whereeach R denotes the result set returned by invoking a search ser-vice  X  i over a Web data source. Each tuple t i  X  R i = &lt; a ,a 2 i ,...,a m i i &gt; has schema R i ( A 1 i : D 1 i ,..., A where A m i i is an attribute of relation R i and D m i i sociated domain. As usual in measurement theory, we dis-tinguish the domains D k i into categorical , when values admit only equality test, and quantitative , when values can be or-ganized in vectors embedded in a metric space.
A multi-domain query over the search services  X  1 ,... X  n defined as a join query q = R 1 ... R n over the relations R ,...,R n , where the join predicate can be arbitrary. We call combination an element of the join  X  = t 1  X  X  X  t n = &lt; a ,a 2 1 ,...,a m 1 1 ,...,a 1 n ,a 2 n ,...,a m n n &gt; ,and result set set of combinations satisfying the query q .
The goal of multi-domain search is to support the user in selecting one or more combinations from the result set of a multi-domain query, so to maximize the satisfaction of his information seeking task. To this end, combinations can be presented in order of relevance, according to a user-defined relevance score function S (  X ,q ),whichcanbeassumedtobe normalized in the [0 , 1] range, where 1 indicates the highest relevance. When the result set R is sorted, e.g. in de-scending order of relevance,  X  k indicates the k -th combina-tion of R . For instance, given the relations Hotel ( HName , HLoc , HRating , HPrice ), Restaurant ( RName , RLoc , RRating , RPrice ), and Museum ( MName , MLoc , MRating , MPrice ), con-sider a function city() , which returns the city where the geo-graphical coordinates of a location belong to, and the multi-domain query q = select * from Hotel , Restaurant , Museum where city ( HLoc )= Milan  X  city ( RLoc )= city ( HLoc ) city ( MLoc )= city ( HLoc ). The overall price of the com-bination S (  X ,q )= sum ( HPrice [ t h ] , RPrice [ t r ] , MPrice [ t could be used to rank hotel, restaurant and museum triples.
Note that S is a simple linear (thus monotone) functions based solely on a subset of the attribute values of the con-stituent tuples, but more complex functions, not necessarily monotone, that might incorporate external knowledge (e.g. road maps) are allowed.
We consider two different criteria to express the similarity (or symmetrically, the diversity) of combinations: (1) Cat-egorical diversity : two combinations are compared based on the equality of the values of one or more categorical at-tributes of the tuples that constitute them. As a special case, categorical diversity can be based on the key attributes: this means evaluating if an object (or sub-combination of ob-jects) is repeated in the two combinations. (2) Quantitative diversity : the diversity of two combinations is defined as their distance, expressed by some metric function.
In both cases, for each pair of combinations  X  u and  X  v ,it is possible to define a diversity measure  X  : R X R X  [0 , 1], normalized in the [0 , 1] interval, where 0 indicates maximum similarity.

Definition 2.1. Let A j i, 1 tributes of relation R i and v i (  X  )=[ a j i, 1 i ,...,a projection of a combination  X  on such attributes. Categorical diversity is defined as  X  (  X  u , X  v )=1  X  1 n n i =1 v i where n is the number of relations R i and is the indicator function, returning one when the predicate is satisfied. Intuitively, categorical diversity is the percentage of tuples in two combinations that do not coincide on the attributes A i ,..., A ical diversity can be interpreted as the percentage of objects that appear only in one of the two combinations.

Definition 2.2. Let v i (  X  ) be as in Definition 2.1. Let v (  X  )=[ v 1 (  X  ) ,..., v n (  X  )] T =[ v 1 (  X  ) ,...,v concatenation of length d = d 1 + ... + d n of such vectors. Given d user-defined weights w 1 ...,w d and a normalization constant  X  max , quantitative diversity is defined as  X  (  X  Quantitative diversity between combinations  X  u , X  v is for-malized as the (weighted) l p -norm of the difference between the vectors v (  X  u )and v (  X  v ). The normalization constant can be chosen, e.g., as the maximum distance value between pairs of combinations in the result set.
Let N = |R| denote the number of combinations in the result set and R K  X  X  the subset of combinations that are presented to the user, where K = |R K | .Wearein-terested in identifying a subset R K which is both rele-vant and diverse . Fixing the relevance score S (  X  ,q ), the dissimilarity function  X  (  X  ,  X  ), and a given integer K ,we aim at selecting a set R K  X  X  of combinations, which is the solution of the following optimization problem [9]: K =argmax R objective function that takes into account both relevance and diversity.
 Two commonly used objective functions are MaxSum and MaxMin , as defined in [9]. Solving the problem for such func-tions is NP-hard, as it can be reduced to the minimum k-center problem. Nevertheless, greedy algorithms exist [9], which give a 2-approximation solution in polynomial time. The underlying idea for those algorithm is to create an aux-iliary function  X  (  X  ,  X  ) and iteratively construct the solution by incrementally adding combinations in such a way as to lo-cally maximize the given objective function. A  X &gt; 0 param-eter specifies the trade-off between relevance and diversity. Another objective function, closely related to the aforemen-tioned ones, is Maximal Marginal Relevance ( MMR ), initially proposed in [3]. Indeed, MMR implicitly maximizes an hybrid objective function whereby relevance scores are summed to-gether, while the minimum distance between pairs of objects is controlled.
We conducted quantitative experiments and a subjective user study to understand how the considered diversification algorithms perform with respect to each other and to the non-diversified baseline. The experiments address both cat-egorical and quantitative diversity measures. All the algo-rithms were evaluated using a  X  = 1, thus giving equal im-portance to both diversity and ranking.
The evaluation of diversity in multi-domain result sets must assess the ability of a given algorithm to retrieve use-ful and diverse tuples within the first K results in the query answer. We therefore adapted the  X  -Discounted Cumula-tive Gain (  X  -DCG K ) [5] to measure the usefulness (gain) of a tuple t i  X  R i  X  X here R 1 ,...,R n are the relations involved in a multi-domain query  X  based on its position in the result list and its novelty w.r.t. the previous re-sults in the ranking. Therefore, we define  X  -DCG K as (a,c) and MD -Recall K (b,d) measures. returns 1 when tuple t i appears in a combination  X  k at po-sition k in the result set and 0 otherwise. J is defined as J (  X  k ,t i )=  X  R over the attributes of R i ,and r t i ,k  X  1 = k  X  1 j =1 tifies the number of combinations up to position k  X  1that contain the tuple t i .Inourexperiments,  X  is set to 0 . 5to evaluate novelty and relevance equally.

Sub-topic recall at rank K ( S -Recall K ) [12] is a recall measure often applied to evaluate diversification algorithms. In multi-domain search, a tuple in a combination can be assimilated to a subtopic in a document. Therefore, multi-domain recall at rank K  X  MD -Recall K = n i =1 | X  K k =1 measures, for each relation R i involved in a query (with i =1 ...n ) and for all rank positions k from 1 to K ,the set of distinct tuples ( R k i = { t i  X  R i | X  j  X  k. X  R t } ) retrieved in the result set, with respect to the entire population of the relation ( | R i | ). Experiment has been performed on two usage scenarios. In the first scenario  X  Night Out (NO)  X  X userlooksfora museum, a restaurant, and a hotel in Milan. We created a dataset consisting of the Hotel (50 tuples), Restaurant (50 tuples), and Museum (50 tuples) relations, computing the mutual location distances, and defining three quantitative relevance scores  X  the combination cost, the total walking distance, and the average ratings.
 In the Study Abroad (SA) scenario, a user looks for a U.S. university, considering the rating of the university, the quality of life in the area, and the overall cost, including accommodation. The supporting dataset consists of three relations University (60 US universities with their academic quality score 1 , walkability score of the surroundings 2 average tuition fee), State (including their crime rate), and Flat (1200 flats). Joins were performed on the state at-tribute. We defined three relevance scores: the overall yearly expenditure, a  X  X uality X  index 3 , and the distance between the university and the flat.
Source: http://archive.ics.uci.edu/ml/machine-learning-databases/university/
WalkScore -http://www.walkscore.com/
A function of the academic quality score, the walkability index of a university and the crime rate in a state
Figure 1 shows the average results for multiple execution of 20 queries on both datasets; each query applies one of the score functions described in Section 3.2, and diversification according to categorical and quantitative distance. Each data point of the X-axis represents the k -th element in the result-set.

Using the categorical diversity function, MMR and MaxMin always outperform the un-diversified baseline, while MaxSum does not provide significant improvements. One can also notice that MMR and MaxMin offer similar performance: this is not surprising, as the greedy algorithms for the two objective functions are also very similar.

Using the quantitative distance, all algorithms provide similar performance; MMR and MaxMin degrade their perfor-mance w.r.t. categorical distance, and behave only slightly better than the baseline. This may also be influenced by the chosen quality measures (  X  -DCG K and MD -Recall K that are based on diversity of extracted objects and there-fore are more suited to evaluate categorical diversification. Overall, these results support the hypothesis that diversifi-cation algorithms can improve the quality of multi-domain result sets.
The goal of the user study was to assess the benefits in terms of user experience of adopting diversification algo-rithms. We considered only categorical distance, as it pro-vided better performance in the quantitative analysis. We also excluded MaxMin from the evaluation, as provided per-formance comparable to MMR .

The experiment was designed as a controlled between-subject study, where 66 users 4 were required to perform the Study Abroad task. A common user interface has been cre-ated, showing the combinations of one result set to let the user choose three preferred combinations. The interface pre-sented combinations in a paginated list (10 combinations per page), and a shopping cart widget let users save their favorite results. Each participant was assigned to one of the three experiments in a round-robin fashion. For each exper-iment we collected the total task completion time and the
Bachelor and Master students; 95% male; age range from 20 to 28 years old. Figure 2: Average user completion time for the task (a) and average number of result pages explored (b). number of visited result pages. Each participant took an average of 8 minutes to complete the task. Figure 2 shows the average and standard deviation of the completion time and the number of explored pages. We observe that MMR and MaxSum lead, on average, to 45% and 13% reduction in terms of task completion time, and 60% and 16% reduction in terms of number of explored pages, w.r.t. the baseline. A Kruskal-Wallis one-way, non parametric ANOVA test, pro-vided evidence of the fact that, for each measure, the average values are different at significance level  X  =0 . 01.
Result diversification is a well-investigated topic: recent works overview and classify the existing approaches [8] and provide a systematic axiomatization of the problem [9]. A broad distinction can be done between the contributions that focus on diversifying search results for document collec-tions [1, 7] and those that concentrate instead on structured data sets [6, 11]. Our work is mostly related to diversifica-tion applied to structured data. The work in [11] examines the diversification considering an attribute-based notion of similarity. Multi-domain diversification, as discussed in this paper, is a broader problem; it could be partially reduced to prefix-based diversification only in the case of categorical di-versity. Keyword search in structured databases is addressed in [6], where diversification is applied to query interpreta-tions, which are assumed to be available from the knowledge of the database content and query logs. Our work assumes, for simplicity, unambiguous queries and thus a fixed inter-pretation, but could reuse the interpretation diversification approach of [6] to cope for multi-domain searches with more than one possible interpretation.
This work discusses how the diversification techniques well studied in the context of IR can be extended to support multi-domain search applications. We experimentally tested three diversification algorithms, showing that they can in-troduce a significant degree of diversification in the result set; we also conducted a user study, which demonstrated a positive perception of the utility of diversification by users. In the future, we plan to extend this work by characterizing the interplay between the score function and the similar-ity measure, to better understand the circumstances when relevance alone is sufficient to diversify; the goal is to end up with a clear methodology for application developers to choose the most promising scoring and diversity functions, based on the available statistics on data distribution, and user preferences. [1] R. Agrawal, S. Gollapudi, A. Halverson, and S. Ieong. [2] A. Bozzon, M. Brambilla, S. Ceri, and P. Fraternali. [3] J. Carbonell and J. Goldstein. The use of mmr, [4] S. Ceri and M. Brambilla, editors. Search Computing [5] C.L.Clarke,M.Kolla,G.V.Cormack, [6] E. Demidova, P. Fankhauser, X. Zhou, and W. Nejdl. [7] Z. Dou et al. Multi-dimensional search result [8] M. Drosou and E. Pitoura. Search result [9] S. Gollapudi and A. Sharma. An axiomatic approach [10] D. Martinenghi and M. Tagliasacchi. Proximity rank [11] E. Vee, U. Srivastava, J. Shanmugasundaram, P. Bhat, [12] C.X.Zhai,W.W.Cohen,andJ.Lafferty.Beyond
