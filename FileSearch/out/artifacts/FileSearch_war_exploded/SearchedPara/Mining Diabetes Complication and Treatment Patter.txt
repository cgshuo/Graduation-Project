 The fast development of hospital information systems (HIS) pro-duces a large volume of electronic medical records, which pro-vides a comprehensive source for exploratory analysis and statis-tics to support clinical decision-making. In this paper, we inves-tigate how to utilize the heterogeneous medical records to aid the clinical treatments of diabetes mellitus. Diabetes mellitus, simply diabetes, is a group of metabolic diseases, which is often accompa-nied with many complications. We propose a Symptom-Diagnosis-Treatment model to mine the diabetes complication patterns and to unveil the latent association mechanism between treatments and symptoms from large volume of electronic medical records. Fur-thermore, we study the demographic statistics of patient population w.r.t. complication patterns in real data and observe several inter-esting phenomena. The discovered complication and treatment pat-terns can help physicians better understand their specialty and learn previous experiences. Our experiments on a collection of one-year diabetes clinical records from a famous geriatric hospital demon-strate the e ff ectiveness of our approaches.
 G.3 [ Mathematics of Computing ]: Probability and Statistics  X  Models; I.2.6 [ Computing Methodologies ]: Artificial Intelligence  X  Learning; J.3 [ Computer Applications ]: Life and Medical Sci-ences  X  health, medical information systems Algorithms, Experimentation Clinical decision support, health care data mining, diabetes com-plication, treatment, symptom Diabetes is notoriously known as a prevalent chronic disease. Till 2012, more than 371 million people hav e diabetes throughout the world, which results in 471 billion USD spent on healthcare for American adults had diabetes [1, 3] and were at risk for diabetes-related complications, e.g., hypertension, coronary heart disease, depression, etc. In China, diabetes had also reached epidemic pro-portions in the general adult popul ation: 92.4 million adults (9.7% of the adult population) by 2010 [27]. Moreover, many compli-cations often a ffl ict diabetes patients seriously and incur higher healthcare expenditures. An estimated one-third of the direct med-ical cost of diabetes can be attributed to the management of com-plications [23].

Therefore, it is increasingly important to study the underlying patterns between diabetes and their complications so as to make better management and strategies aimed at the prevention, detec-tion, and treatment of diabetes in the whole population. Previously, it is di ffi cult to perform the study due to the lack of the su clinical data. Recently, with the fast development of hospital in-formation systems, a large collection of electronic clinical records become available, which provides the opportunity to study medical cases, evidences and knowledge. This can benefit many real appli-cations. For example, the inexperienced trainee medical students would like to find similar cases to learn previous evidences. Un-covering the medical knowledge and patterns hidden in the abun-dant medical records would also help physicians get deeper under-standing on their specialty and make better decisions for the care of individual patients. Mining the medical data has attracted lots of interests from both industria l and academic communities. IBM researchers have designed a platform for intelligent care delivery analytics. In order to search similar medical cases, they proposed supervised patient similarity measures based on heterogeneous pa-tient records [24] and introduced experts feedback into distance metric assessment [26]. Davis et al. exploited machine learning methods to predict the e ffi cacy and risk of drugs for heart attacks [5]. Neuvirth et al. [20] studied the personalized care manage-ment of diabetes patients at risk. However, none of the previous work studied the association patterns between diabetes complica-tions and their corresponding treatments.
 Motivation In this paper, we explore the problem of mining di-abetes complication and treatment patterns from a large volume of electronic medical records. Figure 1 gives an example of the medical record. We see that the medical record contains heteroge-neous information, including the patient demographics, laboratory test results, radiology reports, and also some physician notes such as diagnosis, treatments, and medications. The di ff erent aspects of medical information are highly correlated and physicians are very interested in the association patterns. E.g., how to figure out patient http: // www.idf.org / diabetesatlas / Figure 1: An example of patient medical record, which in-cludes typical symptoms (e.g., gender, age, lab tests) and possi-ble treatments applied to the patient. The arrows demonstrate the correlations between the heterogenous factors. conditions from their lab test results? Which complications would often co-a ffl ict diabetes patients with a large probability? What kind of medications should be given to the diabetes patients with some specific complications? How will the di ff erent complications a ffl ict the di ff erent gender and age groups? Physicians always fig-ure out these problems based on their experiences. Fortunately, the emerging electronic medical records nowadays provide us the opportunities to learn from previous cases. E ffi cient models can be exploited to mine these association patterns to support clinical decision-making.
 Contributions To address these problems, we propose a prob-abilistic graphical model named Symptom-Diagnosis-Treatment model to mine patterns from the heterogeneous medical records. We use a latent variable to denote patient conditions, which the patient symptoms are assumed to be generated from. Moreover, we assume that patients X  treatments are generated based on both physicians X  diagnosis and patient conditions. In this way, diabetes complication and treatment patterns can be discovered simultane-ously. We further study the demographics statistics of patient pop-ulation w.r.t. complication patterns and observe several interesting phenomena. Finally, we propose a possible medical application in terms of treatment suggestion for clinical decision support. We test the proposed model on a collection of one-year diabetes clinical records from a famous geriatric hospital in China and our experi-mental results demonstrate the e ff ectiveness of our methods.
To summarize, this work contributes on the follow aspects:  X  We formally formulate the problem of diabetes complication  X  We perform a qualitative analysis for the discovered compli- X  We study the demographic statistics of patient populations
The rest of the paper is organized as follows: Section 2 discusses related work; Section 3 illustrates some data analysis on diabetes medical records; Section 4 formally formulates the problem; Sec-tion 5 explains the proposed model and lists the estimation equa-tions of the model; Section 6 presents experimental results that val-idate the e ff ectiveness of our methodology and Section 7 concludes this work. Health care data mining In recent years, how to utilize the large scale electronic health care data to provide physicians with e cient decision support and objective evidence attracts the interests of researchers from various areas [8, 13]. Information scientists investigated the key issues of the electronic health record search engine and analytics platform for intelligent care delivery [10]. E.g., Hanauer et al. [12] studied the uncertainty terms in clini-cal documents and analyzed the query logs of an electronic health record search engine. Sun et al. [24, 26] worked on the super-vised patient similarity measurement based on heterogeneous pa-tient records and introduced experts feedback into distance metric assessment. Moreover, many researchers employed machine learn-ing approaches to discover latent patterns from electronic medical records. E.g., Wang et al. [25] investigated the heterogeneous tem-poral clinical event pattern mining. A lot of work aimed to predict the e ffi cacy or risk of a potential drug for a given individual. E.g., Rosen-Zvi et al. [21] studied the clinical and demographical factors for selecting anti-HIV therapies. Davis et al. [5] aimed to predict the risk of heart attack when consuming particular drugs. Deng et al. [6] developed an active learning method for personalized treat-ment.
 Diabetes complication and treatment study Diabetes is a com-mon chronic disease, which constitutes the leading cause of mor-tality all over the world. Recently, some researchers utilized health care data to study the risk factors for diabetes. E.g., Selby et al. [22] developed a prediction rule from clinical databases to iden-tify high-risk patients in a large population with diabetes. Neuvirth et al. [20] studied the personalized care management of diabetes patients at risk. As diabetes causes various complications [9], con-siderable medical work has been conducted to investigate diabetes treatments for di ff erent complications, e.g., depression [15], coro-nary heart disease [19]. However, none of previous work inves-tigated how to learn all the latent complication patterns and their corresponding treatments from large volume of medical records.
We obtain a collection of real diabetes patient records from a hospital information system, containing around 170,000 patient records over one year period. The records consist of heterogeneous aspects, stored in di ff erent database tables, e.g., patient profiles, lab test results, pharmacy, physician profile, etc. The patient ID and the index of seeing doctors are utilized to link them.

As shown in Figure 1, we classify the data into two genres: objective patient symptoms and physician-related notes. The ob-jective patient symptoms include the patient age, gender, the per-formed lab test names and the results. The physician-related data includes the physician ID, the physician specialty, given medication codes, dosages, procedure codes and diagnosis texts.
When diagnosing a particular diabetes patient at one time, physi-cians always write down several disease names in the record, e.g., hyperlipidemia, cerebrovascular , bronchitis, etc., which are com-plications of diabetes. Usually physicians give out the disease names according to ICD-10 [2] but not completely consistent. We / medication / lab test frequency employ some information processing methods to filter the noise of diagnosis text. Then we calculate the frequency curve of compli-cations as shown in Figure 2(a), which demonstrates that there are about one hundred common diabetes complications in all. Table 1 shows the top 10 complications and their frequencies which are larger than 10000. We observe that the complications distribute di-versely: the 5th to 10th complication respectively covers only 10% of patient records (Cf. Table 1).

The authors in work [28] classified diabetes complications into seven categories, which are cardiovascular disease, nephropathy, retinopathy, peripheral vascular disease, stroke, neuropathy, and metabolic. Di ff erent complications should be treated with di ent medications. The frequency curve of medications is calculated and shown in Figure 2(b). There are about 500 related medications and procedures, among which only about 50 are given in more than 2000 patient records. Figure 3 shows the co-occurrence matrix be-tween the complications and medications, where each row denotes one complication and each column denotes one medication. We calculate their correlation weights as N ( m i , d j ) represents the number of medical records which contain medication m and disease d j . And we use Cluto 2 to cluster the complications and medications. The result is shown in Figure 3, where the darker color indicates the larger weight. Therefore the gathering darker plates as marked out in the figure indicate that some association patterns indeed exist between the complications and medications. In other words, particular treatments will be given according to the genre of diabetes complications.
We analyze how three categories of diabetes complications: nephropathy, retinopathy and liver damage a ffl ict di ff of patients w.r.t. age and gender factors. Figure 4 shows the num-http: // glaros.dtc.umn.edu / gkhome / cluto / cluto / overview Figure 3: The co-occurrence matrix between diabetes compli-cations and medications. Each row denotes one complication and each column denotes one medication. The darker color indicates the larger correlation weight. The gathering darker plates as marked out indicate that some association patterns indeed exist between the complications and medications. ber of patient records changing with age, where the dotted curve denotes female and the solid one denotes male. Thus we can find that generally 50 to 60 is the start bursting age span for all types of diabetes complications. The number of patients with nephropathy complications is the largest, where the male patients are much more than female ones. But for retinopathy complications the number of the female patients is larger than the male one. For the liver com-plications, male patients burst ear lier than female ones. Therefore, di ff erent types of complications influence diabetes patient popula-tion di ff erently w.r.t. demographics factors, i.e., age and gender.
Besides the patient demographics, lab test results are the most important information for physicians X  reference to make diagnosis and treatments. From the whole record set, we count that there are about 200 types of related lab tests for diabetes patients in all. Fig-ure 2(c) shows the frequency curve of lab tests, where the top 10 performed ones are glucose, creatinine and urea, etc., as shown in Table 2. Thus the most frequent lab tests are only performed less than 20000 times in one year, covering about 10% patient records. The reason is that 80% patients did not perform any lab tests when they saw doctors, and the rest patients performed only a small por-tion of all the lab tests. Thus this lab test information is very sparse, which leads to the small overlapping features between the patients even under the similar conditions. Therefore it is very di measure the patient similarity only based on the lab test results. The lab tests can have numerical or categorical types of results. We analyze the numerical results of lab tests and find that the val-ues themselves or their transformed values approximately fit the normal distributions. For example, the left figure in Figure 5 shows the distribution of lab test  X  X lanine aminotransferase X  result distri-bution, and the right one shows their log value distribution.
Although it is di ffi cult to measure the similarity between con-crete patients based on the sparse lab test information, we can get
Figure 5: Alanine aminotransf erase test result distribution the statistical information from the whole data set. We calculate the log values of the frequency, mean and variation for all the numer-ical lab test results in the above three categories of diabetes com-plications respectively. Table 2 shows the results for the top 10 lab tests. The total numbers of patient records belonging to these cat-egories of diabetes complications are also shown in the first rows, which are 4415, 7958, 23086 respectively. Therefore, the patients with retinopathy complications performed lab tests less frequently than the ones with nephropathy or liver complications. Further-more, some lab test results do not have significant di ff di ff erent complications, e.g., glucose, low-density lipoprotein. But some could be utilized to distinguish the complication genres, e.g., creatinine for nephropathy, triglyceride for liver complications (as the bold-faced numbers in Table 2).
 Summary In this section, we analyze the collected outpatient med-ical records in a hospital information system over one year dura-tion. And we conclude as the following:  X  Complication and treatment patterns indeed exist in large vol- X  Di ff erent types of complications will influence diabetes patient  X  Numerical lab test results approximately fit the normal distribu-Therefore, it is feasible to explore data mining methods to study the diabetes complication patterns and to unveil the latent association mechanism between treatments and symptoms from large volume of electronic medical records. Moreover, it is essential to study the demographic statistics of patient population w.r.t. complication patterns for clinical decision support.
In this section, we introduce and define several related concepts and formulate the complication and treatment pattern mining prob-lem from heterogeneous medical records.
As we analyzed in the above section, there are about 100 com-mon diabetes complications. The diabetes complications co-occur among the physicians X  diagnosis records and are treated similarly. It means association patterns exist between these complications. The work in [28] classified the diabetes complications into seven categories. In order to model the association patterns among com-plications, we define a new concept  X  X omplication Pattern X  first.
D efinition 1. [Complication Pattern] A complication pattern c is defined as a spectrum of diseases d associated with weights p ( c | d ) .
The conditional probability p ( c | d ) represents the probability of disease d belonging to complication pattern c , based on which dis-eases can be classified to di ff erent complication patterns. There-fore, a complication pattern is a category of diseases which often co-occur and are treated similarly in populations. Then we define the concept of patient condition as below.

D efinition 2. [Patient Condition] The patient condition  X  notes one particular patient X  X  current condition, which is defined as a mixture of weighted complication patterns. The weight for the complication pattern c is define d as the probability with which the patient will have this complication pattern.

The patient condition is a latent unobservable variable repre-sented as a multinomial distribution over the complication patterns, which is the most important information physicians aim to figure out for treatments during diagnosing.

D efinition 3. [Patient Symptoms] Patient symptoms are ob-servable variables, including patient demographics, lab test re-sults, etc., which can have categorial or numerical values. Intuitively patient symptoms are dependent on patient condition. As shown in Figure 5, we can assume the numerical values are drawn from some normal distributions. The parameters of distribu-tions, i.e., the mean and variation, change with complication pat-terns. For categorial variables, we assume that they are generated from a multinomial probability distribution w.r.t. complication pat-terns. At last, we define a physician treatment.

D efinition 4. [Treatment] A treatment given by a physician is defined as a mixture of medications and procedures.
Intuitively, the complications belonging to the same category will co-occur frequently, i.e., patients are more likely to have the complications simultaneously. For example, patients with depres-sion are prone to have insomnia at the same time. On the other hand, they will be treated with similar therapies, i.e., patients are given some common medications. Therefore, the complication pat-terns can be discovered from the physicians X  diagnosis and treat-ments.

Furthermore, patient symptoms reflect patient current condi-tions. Thus physicians refer to patient symptoms to figure out pa-tient conditions. Then they give their diagnosis, based on which they treat patients. Thus patient conditions link patient symptoms and physicians X  diagnosis and treatments together.

Our objective is to design a method to link di ff erent aspects of the patient records and learn the complication and treatment patterns simultaneously. In this paper, we propose a probabilistic graphical model named Symptom-Diagnosis-Treatment model to mine the diabetes compli-cation and treatment patterns from large volume of medical records. The model integrates patient symptoms and physicians X  treatments, diagnosis in an unified framework so as to mine the latent correla-tion between complications as well as patient symptoms and physi-cians X  treatments.
First we have the following two assumptions.
A ssumption 1. Patient symptoms, e.g., the lab test results, are generated based on patient conditions.

As defined, patient conditions are latent and unobservable vari-ables, which physicians aim to figure out via observing the patient symptoms. Thus it is intuitive to assume that patient symptoms are generated from patient conditions. In this paper, we mainly utilize the lab test results as patient symptoms.

A ssumption 2. Physicians give out treatments based on both their diagnosis and patient conditions.

After observing patient symptoms, physicians will have their own opinions (the diagnosis) on patient conditions and give their corresponding treatments, e.g., medications and procedures. In real situation, physicians diagnose patient conditions based on their ex-periences. Thus even for the same patient with the same condition, di ff erent physicians may have di ff erent opinions so as to give out di ff erent treatments. Therefore we should consider the subjective bias of physicians in medical records. And di ff erent from patient symptoms in Assumption 1, the treatments are dependent on both the diagnosis and patient conditions. Based on the assumptions, we propose the Symptom-Diagnosis-Treatment model as shown in Figure 6. The variables are described in Table 3. In the model,  X  represents the patient condition which is generated from a Dirichlet prior  X  . The left part represents the generation process of patient symptoms. For each patient symp-tom, first a complication pattern c is selected based on the pa-tient condition  X  . Then the patient symptom is generated either based on c -specific normal distribution if its values are numerical or from c -specific multinomial distribution if its values are categori-cal. The right part represents the generation process of medications, which is performed in a similar way. The parameter  X  indicates the weights of diseases for complication patterns as Definition 1. The observed variable D indicates the physician X  X  diagnosis for the par-ticular medical record. The treatment is generated based on both the patient condition and the d iagnosis. Thus a diagnosed compli-cation d is first generated from D , and then a complication pattern c is generated based on the diagnosed complication d and patient condition  X  . The whole process is shown in Alg. 1.
In this paper, we use Gibbs sampling method to estimate the model as we assume conjugate prior for the parameters  X  ,  X  [7]. Gibbs sampling is an algorithm to approximate the joint dis-tribution of multiple variables by drawing a sequence of samples, which iteratively updates each la tent variable under the condition of fixing remaining variables [11]. We utilize the function N () to store the number of samples during Gibbs sampling. For exam-ple, N x , c ( x , c ) represents the number of samples in patient record x which are assigned to pattern c . N d , c ( d , c ) represents the sample number of disease d which are assigned to pattern c . N m represents the sample number of medication m i which are assigned to pattern c . Besides, we use  X  to represent the sum operation. E.g., N , c (  X  , c ) represents the sum number of all medication samples which are assigned to pattern c , i.e., N m , c (  X  , c ) Thus the update estimation equations are shown as below. where For the symptoms with categorical values, the update equation is Equ. (2), where N l denotes the number of possible values for patient symptom l . For the symptoms with numerical values, we assume they are generated from normal distributions with known variations  X  , whose mean value  X  is generated from a normal distribution prior, i.e., Norm (  X  |  X  0 , X  0 ). As normal distribution X  X  conjugate prior is normal distribution, we can get Equ. (3) and (4) [18].
It is very e ffi cient and convenient to employ probabilistic graph-ical models to discover the latent patterns in heterogeneous net-works [4, 16, 17]. Researchers can design other types of graphical models based on their definitions of latent variables and assump-tions of the dependence between the variables on this problem. For foreach patient record x do end Algorithm 1: Probabilistic generative process of Symptom-
Diagnosis-Treatment model example, diagnostics can be deemed as a sequential process derived from the patient symptoms so they are assumed to be generated from patient conditions as well. They can also be classified as true or false ones which are supposed to result in di ff erent medications. The factor of physicians can be included in the model so that we can assign di ff erent trust weights to the diagnostics, and etc.
In our implementation process, we have tried several forms of probabilistic graphical models based on the above ideas. In this pa-per we report the model in Figure 6 which has the best experimental results among all we have tried. But we still think there exists im-provement room for this model. And we can further investigate them according to di ff erent applications later.
In this section, we present experimental results on real diabetes medical records to evaluate the e ffi ciency and e ff ectiveness of the proposed approach.
We collect about 177,000 real electronic medical records of di-abetes over one year duration from a famous geriatric hospital in Beijing, China, on which our model is employed to discover dia-betes complication and treatment patterns.
 Data preprocess First, we preprocess the medical records and fil-ter out some noisy data. As shown in Figure 2, there is a large proportion of medicines, lab tests and complications which only appear very few times. Thus we remove the unfrequent items to reduce the influence of noise. On the other hand, some lab tests are not distinguished, which almost have the same result in all the records. Therefore we utilize the information entropy to measure the e ff ects of the lab tests and eliminate the undistinguished ones. In this way, we get a data set as shown in Table 4. by several most related diseases and medications and their probabilities. Evaluation Aspects Then, we apply our model to the whole data and evaluate our method on the following aspects:  X  Complication pattern illustration We illustrate the complica- X  Treatment pattern demonstration Besides complication pat- X  Complication pattern statistics We analyze the characteris- X  Clinical decision support case study The complication and
Table 5 visualizes the complication and treatment patterns ob-tained from the Symptom-Diagnosis-Treatment model when we set the number of patterns to be 9. Each column indicates one compli-cation and treatment pattern, which is represented by several most related diseases and medications and their probabilities. Therefore we can tell the meanings of the complication patterns and summa-rize them in the captions. So the discovered diabetes complication Figure 7: Lab test results distribution on the nine complication patterns ((a) triglycerides (b) leukocyte count) patterns are respectively associated with  X  X ephropathy X ,  X  X nflam-mation X ,  X  X steoporosis X ,  X  X epression X ,  X  X ardiovascular X , etc. Complication pattern demonstration The complication patterns show the latent correlations among the diabetes complications, from which we can find some interesting phenomena. For example, the third complication pattern shows that there exist latent correla-tions among the diseases  X  X steoporosis X ,  X  X rostatic hypertrophy X  and  X  X astric disease X  although they are related to di ff erent human organs. The fourth complication pattern shows that there is a large probability for patients with  X  X epression X  to have  X  X nsomnia X  at the same time.

Young et al. [28] studied seven categories of diabetes com-plications in US, which are cardiovascular disease, nephropathy, retinopathy, peripheral vascular disease, stroke, neuropathy, and metabolic. Our model discovers some consistent categories on the medical records in China, e.g., nephropathy, retinopathy, cardio-vascular, neuropathy. But we also discover some other di ff categories of diabetes complications, e.g., depression, which have also been studied a lot in many works [15].
 Treatment pattern demonstration Our model can also discover symptom and treatment patterns w.r.t. di ff erent types of complica-tions.

As Definition 4, the treatment patterns are represented as the con-ditional probabilities p ( m | c ). Table 5 also shows the top 3 relative viously exist di ff erent treatments w.r.t. di ff erent types of diabetes complications. Meanwhile, there also exist some common medi-cations for several complication patterns, e.g., acarbose tablets. It means this kind of medication is a widely used drug for diabetes. Patient symptoms distribution Di ff erent types of diabetes will result in di ff erent symptoms. Thus patients are required to do some lab tests to provide physicians with the references for clinical di-agnosis. Our models can discover the distribution of the lab test results on the complication patterns. For example, Figure 7 shows the mean and variation values of the lab test  X  X riglycerides X  and  X  X eukocyte count X  on the nine complication patterns, which demon-strates that triglycerides has a large value associated with compli-cation pattern 5. That is because  X  X yperlipidemia X -related com-plications lead to much higher  X  X riglycerides X  test results. Con-versely, if a patient has a high  X  X riglycerides X  test result, physicians will diagnose he / she has hyperlipidemia. The value of  X  X eukocyte count X  is large on complication patterns 2 and 7, which is caused by  X  X nflammation X -related complications. Thus large  X  X eukocyte count X  indicates the existence of  X  X nflammation X  complications. http: // translate.google.com /
We would like to see how these discovered complication patterns distribute in diabetes patient population. We classify the patients into nine clusters by checking their diagnosis. If the diagnosis con-tains any disease belonging to one complication pattern, we assume the patient has this complication pattern. Thus, some patients will belong to more than one cluster.
 Patient statistics w.r.t. complication patterns
First, we want to study the characteristics of individual complica-tion patterns w.r.t. patient demographics. E.g., what is the size and average age of patient population with each complication pattern, particularly for men and women? We count the number of male and female patients in these clusters, which is shown in Figure 8(a). We also calculate their average ages as shown in Figure 8(b). There-fore, we can find the following phenomena.  X  The groups of patients with complication patterns  X  X epression X   X  The patients with liver complications (i.e., complication pattern  X  With all kinds of complication patterns, female diabetes patient  X  In most cases, female patients have the diabetes complications Patient statistics w.r.t. complication pattern combinations
In many real cases, diabetes patients are probably to have more than one type of complications [28], i.e., they will belong to several diabetes groups simultaneously. We further study the impact of complication pattern combinations on patient conditions and find the following results:  X  Figure 9(a) shows the curve of the number of patients who have  X  Figure 9(b) shows the average age curve changing with the size  X  The HbA1c blood test (also called glycohemoglobin) is a reli-patterns)
Research on clinical decision support [14] has developed for many years, which both physicians and patients pay much atten-tion to. E.g., when patient symptoms are observed, physicians want to figure out these issues: what kinds of diabetes does this patient have? which medications should be given to him / her? The compli-cation and treatment patterns discovered by our model can be used to help physicians learn from previous experiences so as to aid their work. Here, we propose one possible medical application based on our model.

As illustrated above, the treatment probability p ( m | c )aswellas each symptom X  X  distribution w.r.t. complication p ( r | c ered from the model. As p ( c | r , l )  X  p ( r | c , l ) medications can be obtained by the following equation.
In order to test our model quantitatively, we do some experi-ments based on this application schema. Suppose the diagnosis and treatments given by physicians in the medical records are the ground-truth (In real situations, the given diagnosis and treatments are biased. Even for the same patient, di ff erent physicians may have di ff erent opinions on patient conditions so as to give di ff nosis and treatments.). Then we test the consistency of the possible medications and diseases suggested by our model with the ground-truth. We randomly select 10000 medical records which contain lab test results and diagnosis as testing data and use the rest records to train the model. We utilize three measurements which are mean average precision (MAP), mean precision at top 10 (MP@10) and mean recall at top 10 (MR@10). We compare the results with k -nearest neighbor model (NNM), i.e., using the weighted combi-nation of medications of the k nearest neighbors as the suggested treatment (we use k = 10 here). The results in Table 6 demon-strate that our model can outperform the k -nearest neighbor model in terms of the medicine suggestion application.
In this paper, we explore the problems of using large volume of electronic medical records to aid the clinical treatments of dia-betes mellitus. We propose a probabilistic graphical model to link the patient symptoms and physicians X  diagnosis, treatment together and to mine diabetes complication and treatment patterns simulta-neously. We further study the demographic statistics of patient pop-ulation w.r.t. complication patterns in real data and discover some interesting insights. The experimental results on a collection of one-year diabetes clinical records from a famous geriatric hospital in Beijing, China demonstrate the meaningful patterns discovered by our models.

The general problem of exploring e lectronic medical records for clinical decision support represents a promising and interesting re-search direction in health care data mining. There are many poten-tial applications of this work. For example, chemists want to find symptom-treatment pa tterns from abundant records of traditional Chinese medicine so as to develop new drugs. Therefore one po-tential future work is to apply the model to other genres of medical data, e.g., traditional Chinese medicine records. This work is supported in part by the following grants: U.S. NSF awards CCF-0833131, CNS-0830927, IIS-0905205, CCF-0938000, CCF-1029166, and OCI-1144061; DOE awards DE-FG02-08ER25848, DE-SC0001283, DE-SC0005309, DESC0005340, DESC0007456; AFOSR award FA9550-12-1-0458 and National Natural Science Foundation of China under grants 61103065. Jie Tang is supported by Natural Science Foundation of China (No. 61222212, No. 61073073), and a research fund supported by Huawei Inc. [1] Report from the national diabetes surveillance system: [2] International classification of diseases (icd). Technical [3] National diabetes fact sheet: National estimates and general [4] D. M. Blei, A. Y. Ng, and M. I. Jordan. Latent dirichlet [5] J. Davis, E. Lantz, D. Page, J. Struyf, P. Peissig, H. Vidaillet, [6] K. Deng, J. Pineau, and S. A. Murphy. Active learning for [7] A. Doucet, N. de Freitas, K. Murphy, and S. Russell. [8] S. Ebadollahi, A. R. Coden, M. A. Tanenblatt, S.-F. Chang, [9] C. for Disease Control Diabetes in Managed Care [10] D. Gotz, H. Starvropoulos, J. Sun, and F. Wang. Icda: A [11] T. L. Gri ffi ths and M. Steyvers. Finding scientific topics. [12] D. A. Hanauer, Y. Liu, Q. Mei, F. J. Manion, U. J. Balis, and [13] J. Hu, F. Wang, J. Sun, R. Sorrentino, and S. Ebadollahi. A [14] D. L. Hunt, R. B. Haynes, S. E. Hanna, and K. Smith. E [15] W. Katon, M. Von Kor ff ,E.Lin,andetal.Improving [16] L. Liu, J. Tang, J. Han, and S. Yang. Learning influence from [17] L. Liu, F. Zhu, L. Zhang, and S. Yang. A probabilistic [18] K. P. Murphy. Conjugate bayesian analysis of the gaussian [19] S. Natarajan, Y. Liao, G. Cao, S. Lipsitz, and D. McGee. Sex [20] H. Neuvirth, M. Ozery-Flato, J. Hu, J. Laserson, M. S. Kohn, [21] M. Rosen-Zvi, A. Altmann, M. Prosperi, E. Aharoni, [22] J. Selby, A. Karter, L. Ackerson, A. Ferrara, and J. Liu. [23] S. Simpson and et al. The cost of major comorbidity in [24] J. Sun, F. Wang, J. Hu, and S. Edabollahi. Supervised patient [25] F. Wang, N. Lee, J. Hu, J. Sun, and S. Ebadollahi. Towards [26] F. Wang, J. Sun, and S. Ebadollahi. Integrating distance [27] W. Yang and et al. Prevalence of diabetes among men and [28] B. Young, E. Lin, M. Von Kor ff , G. Simon, P. Ciechanowski,
