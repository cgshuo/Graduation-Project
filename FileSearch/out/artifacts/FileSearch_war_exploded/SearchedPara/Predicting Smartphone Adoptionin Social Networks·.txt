 Smartphones (e.g., iPhone and Android based mobile phones) are now ubiquitous in our daily lives. There were 1.82 billion smartphones being used worldwide at the end of 2013. Furthermore, according to a forecast by International Data Corpora-tion, the smartphone market is expected to increase to 70.5% in 2017 in terms of all smart devices, including desktop PCs, portable PCs, tablets and smartphones [ 1 ]. With the expanding opportunities in the smartphone market, an incisive understanding of smartphone adoption among users has significant applications ranging from user behavior understanding in scientific disciplines [ 4 , 19 ] to tar-geted advertising for marketing strategies [ 7 , 10 ]. Thus, acceptance or adoption of smartphones has long been studied in the past from a variety of angles, such as cultural factors [ 23 ], technology needs [ 22 ] and perceived usefulness [ 18 ]. Nearly all these studies were based on traditional survey based approaches, e.g., by sur-veying hundreds of people. With both the time and money costs of collecting data, few researchers have attempted to investigate the smartphone adoption within a large-scale social network.
 phones, an increasing number of people are sharing their daily lives with friends on these platforms through smartphones. Due to the mobile nature of the login devices, these mobilized social networks record the smartphone footprints of users. To illustrate this, we provide the following example. Weibo (weibo.com) is the leading microblog service in China. When a user posts a message in Weibo , the platform forwards an enriched message to all of the user X  X  follow-ers as shown in Fig. 1 , which includes the post message, the timestamp and the sending device (iPhone). This device information creates valuable data sources to track smartphone adoption within a large-scale social network.
 understanding a user X  X  smartphone adoption is still technically challenging from at least two aspects. On the one hand, there are various factors that underline person X  X  decision-making process. How can we leverage them in a unified frame-work? Researchers have long identified three key factors for this process: the social influence factor that argues users are influenced by their social neighbors to make decisions [ 11 , 25 ]; the homophily factor refers to linked users perform-ing similar decisions [ 15 ]; and the personal factor states users have their own personalized preferences [ 29 , 30 ]. On the other hand, though all these key fac-tors help predict users X  adoption behaviors, they lead to significantly different results [ 2 , 14 ]. Accurately understanding and distinguishing the relative contri-bution of each factor is critically important to guiding the firm X  X  marketing strategy. E.g., if the social influence is responsible for users X  decisions, then it is effective for the firm to incentivize several seed customers to trigger a cascade of information diffusion [ 11 ]. If the homophily factor dominates, then the firm can identify new potential customers based on each user X  X  neighbors X  decisions. If the final adoption behavior is driven by the personal factor, a better idea is to select the targeted customers based on their historical preferences for marketing. Nevertheless, few previous methods have incorporated all these principal factors together for product adoption prediction. Therefore, how to leverage all these key factors and distinguish them at the same time for smartphone adoption prediction remains pretty much open.
 In order to solve both the data barrier and technical challenges mentioned above, in this paper, we propose a supervised machine learning model for smart-phone adoption prediction. As a preliminary, we leverage a mobilized online social network to discover the smartphone usage patterns of a large group of net-worked users. Then, by borrowing the traditional user segmentation concept, we identify two groups of users based on their current smartphone status, i.e., poten-tial first-time smartphone adopters and potential brand changers, respectively. After that, we develop a S upervised H omophily-I nfluence-P ersonality (SHIP) model for smartphone adoption prediction, in which the key factors that under-line people X  X  adoption are explicitly integrated. In fact, the proposed model can easily be extended to other product adoption tasks. Finally, the experimental results on 200K active mobile users show the effectiveness of our proposed model. To the best of our knowledge, this is the first comprehensive attempt to predict smartphone adoption from a social perspective with large-scale real world data. Given a snapshot of a social network as a directed graph G = &lt;U,F, T &gt; , where thenodeset U = { 1 , 2 , ..., N } is the users and F represents the relationships of users. T =[ t ji ] N  X  N is an edge strength matrix, where t strength from user j to user i . Specifically, if user i follows user j , then ( i, j ) and t ji &gt; 0, otherwise t ji = 0. Since we mainly focus on the smartphone adoption of users, for ease of later explanation, a mobile post is defined as a post that is sent from a smartphone, rather than a PC client or a tablet. If a user sends more than  X  mobile posts in a time period, we regard him/her as a mobile user . Data Collection and Description. During the data crawling process, we collected the post streams of nearly 235 thousand users from January 2013 to July 2013 from Weibo . For data cleaning, we only selected mobile users (i.e.,  X  = 10 empirically) and their associated relations. After pruning, we still had nearly 200 thousand users, 15 million edges, and 45 million post streams. Now we introduce how to infer each user X  X  smartphone status from the continuous post streams. Similar to many smartphone marketing research [ 1 ], we treat each quarter as a time slice and further split each user X  X  device streams into two time slices, i.e., the first quarter (2013Q1) and the second quarter (2013Q2) of 2013. Then we take the most popular device brand as the smartphone status of the user at that time. Note that a user may use several smartphones during a time slot, however, it is reasonable to discard the infrequent uses of other smartphone brands since users prefer those phones that they use the most frequently. Table 1 shows an example of the inferred smartphone status of two typical users. Problem Definition. Generally, our goal is to predict the smartphone adoption status of users in time t based on the available data in the previous time t marketing research, a common practice is to first divide a broad target market into subsets of consumers and then design strategies to target each group of consumers. Following this approach, we divided users into two groups based on their smartphone status in t  X  1: potential first-time smartphone buyers and potential brand changers. The potential brand changers are those who have already used a smartphone in t  X  1 and their next action is deciding whether to change brands in t . E.g., as illustrated in Table 1 , Bob is a potential brand changer as he had the Nokia smartphone in 2013 Q 1 (i.e., time t those who do not use any smartphone in t  X  1 as potential first-time smartphone buyers. This assumption may not be accurate when applied to each person, but the overall trend is well supported by the high penetration of mobilized social networks in our everyday life. Alice is a potential first-time buyer as shown in Table 1 . After segmenting users into these two groups, we set the target for each group as follows: Task 1: First-time Buying Prediction. If a user is a potential first-time buyer in t  X  1, we predict whether she/he will buy a particular brand b in time t or not.
 Task 2: Brand Change Prediction. If a user is a potential brand changer in time t  X  1, we predict whether this user will change to another brand in the next time period t .
 the smartphone adoption status in t . E.g., Alice is a member of Task 1 and buys a Samsung in t , so she is a positively labeled user if we focus on predicting whether she will buy a Samsung . Bob is a positively labeled user in Task 2 as he changed from Samsung to iPhone in t . In summary, after user segmentation and label assignment for each task, these two tasks can be summarized in a unified prediction problem: Given a snapshot of a directed social network G = &lt;U,F, T &gt; with a positively labeled user set UP and a negatively labeled user set UN in time t , our goal is to predict the labels of all unknown users at time t as accurate as possible. In the next section, we focus on the model. Researchers have long converged on the idea that there are three principal fac-tors that drive people X  X  adoption decisions: the social influence factor and the homophily factor that lead to correlated user behaviors among linked users and the personal factor that states users X  unique preferences [ 15 , 25 , 29 ]. Obviously, each of these three factors can exploit a specific part of users X  decisions. In addition, as illustrated before, different factors result in significantly different marketing strategies [ 2 , 14 ]. Thus, simply aggregating all these factors for pre-diction will not be the best choice. A better idea is to distinguish the relative effect of each factor in the decision making process. In the following, we propose a S upervised H omophily-I nfluence-P ersonlity (SHIP) model that can automat-ically learn the contribution of each factor for users X  smartphone adoption. Next we describe how to construct the SHIP model step by step.
 Overview of Smartphone Adoption Function. For each user i , we explicitly model the smartphone adoption status p i as a combination of the three key factors: where p i is the predicted smartphone adoption probability that ranges from 0 to 1. F i are the users that i follows in this network. t between i and j .If i follows j , then t ji = 1 | F in this equation, the first part captures the social network effect (including social influence and homophily) and the second part ( b i ) mimics the personal bias. Specifically, for user i and any user j that i links ( j  X  p is balanced by the influence of j  X  X  adoption status p j (social influence) and the homophily effect u ji , where  X  controls the relative contribution of these two factors in social networks.  X  (0  X   X   X  1) is a parameter that controls the relative effect of the social network and personal bias. The larger the  X  , the more personal preference plays a role in the task.
 Since for each pair of linked users, we have a vector e ji ious features between them, we model the homophily, i.e., the similarity between each pair of linked users as: where e jik is the k -th element of e ji . Similarly, for each user i ,wehave captures her various characteristics. Then the personal bias can be defined as: In the above two equations, s ( l ) can be set as any monotonically increasing function. As  X  i  X  U, 0  X  p i  X  1 , for fair comparison of the different effects, these values are better ranges in [0 , 1]. Thus, a natural idea is to set s ( l ) as a logistic Note that the proposed smartphone adoption probability function (Eq.( 1 )) has close relationship with the recent progress in supervised random walk based models. These models incorporated the node and edge features to supervise the random walk process for node classification tasks [ 3 , 28 ]. E.g., the works of [ 3 ] utilized the social influence factor and [ 28 ] further extended this work by incorporating the personal bias. Nevertheless, the homophily factor is neglected by all these previous works in the modeling process, while we explicitly depict the homophily factor between each pair of linked users. In other words, the previous works for node classification can be seen as special cases of our models, e.g., our work is reduced to the models proposed by Zeng et al. when excluding the homophily factor [ 28 ].
 Optimization Function Construction. Based on Eq. ( 1 ) , in order to get the final label preference p i for each user i , we have to learn four parameters  X  =[  X ,  X , w , v ] in the training process. As we have a set of users X  labels in the training data at time t , an intuitive idea is to train a supervised model that automatically learns the parameters  X  such that all labeled positive users in the training data have larger probabilities than the labeled negative ones. Next, we model the objective learning function as: where the first term models the goodness for fitting the data and the second term controls model complexity. Since j is a negatively labeled user and i a positively one, the larger the p i the better and the smaller the p j above, we empirically set h ( x )as: Thus if p j  X  p i &gt; 0, the loss value is about 1. Otherwise, it approximates to zero. Model Learning. We apply the power iteration method to solve the opti-mization problem in Eq.( 4 )[ 17 ]. Specifically, we write the derivatives of each parameter of  X  as: Algorithm 1. Parameter Learning Process for the Proposed SHIP Model Convergence Analysis. Algorithm 1 shows the entire optimization process of our proposed model. There are two power iterations as shown in Part 1 (Eq. ( 1 )) and Part 2 (Eq. ( 7 )) of the algorithm. For all of these equations, they could be rewritten as a unified form as z i =(1  X  d ) k  X  F representation defines a linear system problem and its closed form is Z =  X  ( I  X  ) T )  X  1 Y . This closed form satisfies the convergence condition of Gauss-Seidel iterative method [ 16 ]. In conclusion, all of the iterations can be solved in linear time with a convergence guarantee. 4.1 Experimental Settings We conduct experiments on the collected Weibo data as described in Section 2 . We focus on predicting smartphone adoption in 2013Q2 (time t ) based on the smartphone status in 2013Q1 (time t  X  1). Given a snapshot of the social network, for each task, we randomly split users into five equal parts and each time we select 80% of the users as labeled users for training and the remaining 20% users are used for prediction. We conduct five-fold cross validation and report the average results. In fact, we only choose the leading four brands (i.e., iPhone, Samsung, Nokia and Xiaomi) in Task 1 for prediction as the remaining brands take less than 1% market share. The detailed data statistics can be found in Table 2 . As shown in this table, the data is very unbalanced, for most tasks, the number of negative records is much larger than that of the positive records. measure, which is especially useful for evaluating the performance of an unbal-anced dataset [ 27 ]. A random guess would result in an AUC value around 0.5 and the larger the value the better the performance. In addition, as we focus on the most likely positive users of the test data, which can be used for marketing. We This measure evaluates how the proposed models improve the precision com-pared to random guess. A random guess will lead to a Rel gain@N result of 0.0 and the larger the value the better the performance.
 Baselines. To the best of our knowledge, few researchers have tried to explore the smartphone adoption problem with real world collected data. However, we can borrow several classic models that are widely used for the binary class pre-diction task in a social network: the first category builds classifiers using the extracted graph information as features, and the second category directly prop-agates the existing labels via random walks in this graph [ 5 ]. In the first kind, we choose the logistic regression (LR) model. Specifically, we implemented the LRS baseline that purely relies on S ocial network features and the LRSP baseline which uses both S ocial network features and the user P rofiles. For the second kind, we choose label propagation ( LP ), which performs node class prediction based on partially labeled data in a graph [ 31 ]. Specifically, LP can be seen as an unsupervised version of our model that only utilizes the graph structure information, i.e., the social influence factor in our model. Also, to demonstrate the fitness of the three proposed factors in our model, we compare the proposed SHIP with three related models: SHI (Supervised Homophily-Influence), SHP (Supervised Homophily-Personlity) and SIP (Super-vised Influence-Personality). Please note that the simplified SIP model can be seen as a superior version of the work proposed in [ 28 ], which can automatically learn the relative importance parameter  X  between influence and personality. In both LR and our proposed models, we have the regularization parameter  X  .As the dataset is very large, choosing  X  in a reasonable range (e.g., [0.01, 100]) has little impact on the final prediction results. For the remaining experiments, we empirically set  X  = 10. We summarize the profile, edge, and social features we used in this paper in Table 3 . 4.2 Experimental Results Overall Performance. Task 1 focuses on predicting whether a user will buy a particular brand as first-time buying behavior. Fig. 2 reports the AUC results of different models, where each brand X  X  prediction result is shown in the sub figure and the detailed AUC value is followed by each method in the legend. First, we observe that all models have better performance than a random guess.(i.e., an AUC value of 0.5) Among them, our proposed SHIP model is better than all baselines with regard to all brands, followed by the three related models (i.e., SIP, SHI and SHP), indicating the superiority of our proposed model and the impor-tance of combining the three key factors together for predicting smartphone adoption. Although the overall trend is the same, the detailed AUC results vary. Among all brands,  X  X hether to choose a Samsung for a first-time buying X  is the hardest to predict and the best AUC result is only 0.605. One possible reason is that Samsung has too many device types, ranging from high-end smartphones that compete with the iPhone to entry-level smartphones. The reasons why peo-ple buy Samsung smartphones vary and are harder to predict. For the other brands, the AUC reaches about 0.7 for SHIP . The average improvement is 3% to 10% over LRSP and 15% to 30% for the remaining baselines. Similar trend can be found for the Rel gain@100 comparison as shown in Fig. 3 . Based on the above analysis, we conclude that the proposed SHIP can help better capture the decision process for first-time buying behavior, thus generating better results than other baselines and related models for Task 1. Fig. 4 reports both the AUC and the Rel gain@100 for different models in Task 2. The overall trends are the same as Task 1. For both metrics, SHIP performs the best, followed by our two related models (i.e., SIP and SHP) and LRSP baseline. However, the related SHI model and the LRS baseline, which do not consider the user preference factor, perform badly. In other words, after adding the user preference factor (i.e., the user profile features as shown in Table 3 and the brand feature), the performance improvement is very significant. E.g., the improvement of LRSP over LRS is 20.66% for AUC and 100% for Rel gain@100 , the improvement of SHIP over SHI is 35% for AUC and more than 100% for Rel gain@100 .Whyis the improvement so significant after adding the user preference factor? We leave the explanations for the next section. Impacts of the Parameters. As shown in Eq. ( 1 ),  X  and  X  are two important parameters that control the relative effects of the three key factors for decision-making. We summarize the learned relative weight of each factor of the two tasks in Table 4 . As shown in this table, in Task 1, the personality effect (  X  ) and the homophily effect (i.e., (1  X   X  )  X   X  ) for all brands are very small while the relative contribution of social influence for all brands is larger than 50%. That is to say, users are easily influenced by social neighbors for first-time buying behavior. In contrast to this, the social influence effect is very small in Task 2 (i.e., 15 . 7%) while there is a high impact of the personality factor and the homophily effect for brand change behavior. In other words, users are not easily influenced by social neighbors for changing brand. Their brand change behavior is more liked caused by the homophily effect and their own preferences.
 For brand manufactures, they would like to explore the inherent reasons that may prevent customer loss, i.e., the brand change behavior in Task 2. As explained before, after adding the user preference factor, the performance improvement is prominent in Task 2. Also, the user personality effect contributes more than 40% to brand change behavior. So we will focus on the user person-ality effect of Task 2 in this section. Specifically, each dimension of parameter controls the importance of the corresponding user related feature for smartphone adoption (Eq.( 3 )). The larger the absolute value of this dimension, the greater the corresponding feature weights for smartphone adoption. In Task 2, we have two kinds of user personality features: user profile features and the brand fea-ture, which describes the brand a user used in t  X  1. To our surprise, all profile features X  weights are around 0 and the weight of the brand feature dominates. Next, we try to use this brand feature only in the logistic regression model and the AUC reaches 0.7229, while LRSP  X  X  result is 0.7300. The improvement is less than 1% when adding so many user profiles and social features, which also indi-cates social neighbors X  smartphone adoption status does not have a large impact on users X  choices of changing smartphones. Thus, we argue, the most prominent factor that determines whether a user will change brands later is the current brand she/he uses. A user X  X  decision on whether to change brands follows the overall brand loyalty. If most people that uses a particular brand in the current time period are likely to change brand in the next time, then this user is also likely to change without a discussion. Table 5 shows the learned weights of the brand feature in Task 2. Among all the listed brands, iPhone users are most loyal. They do not like to change to another brand in the next time period, followed by Samsung and Xiaomi. Smartphone usage mining has attracted considerable attentions due to the rapid growth of the smartphone market in recent years. Some researchers revealed the correlation between mobile phone usage and user profiles [ 12 , 20 , 21 ]. Oth-ers attempted to consider the factors that affect people X  X  choices when adopt-ing a mobile device from various perspectives, such as culture [ 23 ], technology needs [ 22 ] and perceived usefulness [ 18 ]. Among them, Harsha et al. found com-pelling evidence of social influence in the purchase of mobile phones by sam-ple surveys from Asian countries [ 8 ]. However, nearly all these works relied on small-scale questionnaires without considering the smartphone adoptions in a large-scale social network.
 in social networks. Generally, some models purely utilized user X  X  profiles in social networks for product adoption prediction [ 29 , 30 ]. Others further incorporated the aggregated features extracted from social networks to boost product adoption performance [ 6 , 9 ]. However, the global product diffusion process among linked users is rarely analyzed, not to mention distinguishing the relative contributions of each factor. While the importance of distinguishing various factors underlining people X  X  correlated decisions in social networks has been well recognized, the related work mainly focused on the homophily factor and the social influence factor that lead to correlated user behaviors [ 2 , 14 ]. The proposed solutions either estimated the upper bound of each factor or needed additional group information of users. On the contrary, our proposed model explicitly balances the correlated user behaviors and each user X  X  own preference. Also, the relative performance of each factor can be learned automatically in the training process.
 the classes of unlabeled nodes with partially labeled nodes in this graph [ 5 , 13 , 26 ]. A basic assumption of these models is the label correlations in the network, thus we can propagate the labels with respect to the intrinsic graph structure [ 24 , 31 ]. To leverage both the social network structure and the edge features, in recent years, [ 3 ] first proposed a supervised random walk algorithm that guides label propagation, where the social influence factor is explicitly modeled. Zeng et al. [ 28 ] further extended the supervised random walk model for user affiliation prediction by incorporating both the social influence and the user bias factors. Nevertheless, the homophily effect between linked users was neglected by all these works. Thus our model can be seen as generalizing the recent advances of these related methods in node classification tasks. Moreover, in contrast to these previous approaches, our proposed model can automatically learn the relative effect of each factor while others needed to tune the parameters manually. In this paper, we have proposed a SHIP model for predicting smartphone adop-tion in a social network. Our model identified the three key factors in the decision-making process and can automatically distinguish the relative contri-butions of each factor. Experimental results on a large-scale dataset showed the strong prediction power of our model. An incisive conclusion is that the potential first-time smartphone buyers are largely influenced by social neighbors X  choices while a user X  X  decision on whether to change to another brand follows overall brand loyalty. In fact, the proposed model is also generally applicable to other node classification tasks. In the future, we plan to apply our model to other smartphone markets, and we will study the adoption in a finer granularity of time periods.

