 1. Introduction
Vehicular ad hoc networks (VANETs) ( H  X  arri et al., 2007 ) are fluctuating networks composed of a set of communicating vehicles (nodes) equipped with devices which are able to spontaneously interconnect each other without any pre-existing infrastructure. This means that no service provider is present in such kind of networks as it is usual in traditional or in mobile cellular communication networks. The most popular wireless networking technology available nowadays for establishing
VANETs is the IEEE 802.11b WLAN, also known as WiFi ( wireless fidelity ). New standards such as the IEEE 802.11p and WiFi direct are promising but still not available to perform real tests with them. This implies that vehicles communicate within a limited range while moving, thus exhibiting a topology that may change quickly and in unpredictable ways. In such kind of networks, previous to its deployment, it is crucial to provide the user with an optimal configuration of the communication protocols in order to increase the effective data packet exchange, as well as to reduce the transmission time and the network use (with their implications on higher bandwidth and lower energy consump-tion). This is specially true in certain VANET scenarios (as shown in Fig. 1 ) in which buildings and distances discontinue communication channels frequently, and where the available time for connecting to vehicles could be just 1s.
 automatic intelligent design tools is practically impossible because of the enormous number of possibilities. It is especially difficult (e.g., for a network designer) when considering multiple design issues, such as highly dynamic topologies and reduced coverage. In addition, the use of exact techniques is also impracticable due to the time spent during the great number of simulations required. All this motivates the use of metaheuristic techniques ( Blum and Roli, 2003 ) which arise as well-suited tools to solve this kind of problems.

Configuration (FTC) in VANETs by means of five different state-of-the-art optimization techniques. This problem lies in the core of any VANET application, and thus optimal configuration is a major concern. Also, we use many optimization algorithms because this is a new field, and their relative advantages are still unclear.
Indeed, we cannot find results for comparisons in the literature since only manual (human expert) VDTP configurations were made so far. These algorithms are two swarm intelligence techniques: Particle Swarm Optimization (PSO) ( Kennedy and
Eberhart, 1995) and Differential Evolution (DE) ( Price et al., 2005 ); two evolutionary algorithms: Genetic Algorithm (GA) ( Blum and
Roli, 2003 ) and Evolutionary Strategy (ES) ( Beyer and Schwefel, 2002); and a trajectory search technique, Simulated Annealing (SA) Kirkpatrick et al. (1983) . We have chosen these algorithms because they constitute a representative subset of well-known metaheuristics (population and trajectory based algorithms), with suitable operators for real parameter optimization, and with heterogeneous schemes of population and evolution. This way, we offer a set of initial results allowing future comparisons with other modern techniques.

For our tests, two typical car-to-car environment instances have been defined: Urban and Highway VANETs, both in special connection to the work done in the CARLINK CELTIC European
Project for linking cars. We rely both on a flexible simulation structure using ns-2(The Network Simulator Project  X  Ns-2; Alba et al., 2008c ) (a well-known realistic VANET simulator), and real tests for optimizing the transmission time, the number of lost packets, and the amount of data transferred. One additional contribution of this work is to provide the specialist with a useful platform, embedded within ns -2, to configure network protocols (available in http://neo.lcc.uma.es/staff/jamal/portal/ ) and hence obtaining a fair QoS control in VANETs.

The remaining of this paper is organized as follows. In the next section we briefly describe the most relevant related works found in the current literature. In Section 3 we introduce the Optimal
File Transfer Configuration problem. Section 4 provides prelimin-ary descriptions of the compared algorithms. In Section 5, the optimization strategy and fitness function are described. Experi-mental results and comparisons are presented in Section 6, including performance, scalability, and technical analyses of the resulted VANET configurations. Conclusions and future work are drawn in Section 7. 2. Related work
Few related works can be found in the specialized literature concerning the use of metaheuristics for the optimization of mobile ad hoc networks (MANETs). Vanhatupa et al. (2006) proposed a flexible Genetic Algorithm for optimizing channel assignment in mesh wireless networks. In that work, the network capacity was increased by 20% while keeping the coverage above 80%. In Alba et al. (2007c) , a specialized Cellular Multi-Objective
Genetic Algorithm (cMOGA) was used for finding an optimal broadcasting strategy in Urban MANETs, obtaining in this case three objectives fronts with coverage, bandwidth, and duration as performance metrics. The use of multi-objective techniques in this kind of works provides the specialists with a range of non-dominated solutions which can help them in the decision making process. Nevertheless, the use of (mono-objective) aggregated functions allows us the possibility of weighting the objectives and assign more (or less) importance to them for better guiding the search. This way, in Dorronsoro et al. (2008) , six versions of GAs (panmictic and descentralized) were evaluated and successfully used in the design of ad hoc injection networks. From a different point of view, and due to its specific design, ant colony optimization (ACO) has been successfully adapted for implement-ing new routing protocols for MANETs ( Di Caro et al., 2005 ), as well as for resource management ( Chiang et al., 2007 ). Never-theless, in these two last cases, the routing load provoked by the internal operations of ACOs makes these approaches unfeasible for large networks. More recently, Huang et al. (2009) proposed a new routing protocol based on a PSO to make scheduling decisions for reducing the packet loss rate in a theoretical VANET scenario.

In our work, besides of using the optimization technique itself as a protocol algorithm, our main contribution consists of improving the performance of an existing protocol by optimally tuning its parameters. This way, we will hopefully obtain optimal configurations in the network design phase without incorporating extra management load to the actual network operation. 3. Problem overview
The optimal File Transfer Configuration consists in optimi-zing the main parameters required by an application commu-nication protocol. This protocol, called VDTP (vehicular data transfer protocol) ( Alba et al., 2006 ), operates on the transport layer protocols of VANETs, allowing the end-to-end file transfer. This implies that considerations about the multi-hop interconnec-tion mode and routing issues can be avoided, since they are carried out by the previous down layer protocols (e.g., UDP, DSR, IP, etc.). Therefore, the different vehicles that constitute the nodes in a given VANET can exchange complete files of information to each other by using VDTP. In this section, we briefly describe the VDTP, detailing the main parameters to be optimized. 3.1. Vehicular data transfer protocol
VDTP is a connectionless protocol which operates on DSR (Johnson et al., 2001 ), a routing protocol for multi-hop wireless ad hoc networks. In VDTP, the communication process is carried out by both a file petitioner , which tries to download a file, and a file owner , which stores the file. This transfer protocol operates by using the following packets: FIRQ ( file information ( data reply ). As shown in Fig. 2 (a), once the file petitioner knows the name and the location of a given file, it starts the communication by using the FIRQ packet in order to obtain the file size. Then, the petitioner waits for this information which is sent by the owner by means of a FIRP packet. After receiving the information about the file size, the petitioner computes the number of segments in which the file will be split, dividing the file size by the chunk _ size . The petitioner starts the transfer by sending a DRQ(1) packet asking for the first segment of the file; then it waits for the first data chunk sent by the owner which uses the DRP(1) packet. This operation is repeated by both, petitioner and owner, until transferring the last chunk DRP( n ), and hence making up the complete file.

In VANETs, it is usual to work in a hostile medium which can provoke a high number of lost packets during the communication process. In this sense, VDTP provides the specialist with several mechanisms based on timers and counters, in order to solve such issues. The timeout mechanism controls the waiting time until a concrete DRQ or FIRQ packet has to be resent ( retransmission _-time ). Fig. 2 (b) shows an example of how the DRQ and the DRP packets are lost (and retransmitted) after an established timeout.
The counter mechanism controls the number of DRQ/FIRQ packets that have been resent. As shown in Fig. 2 (c), after a previously specified number of retransmissions ( total _ attempts ) of the same
DRQ/FIRQ packets, the communication between the vehicles is refused. 3.1.1. Problem design variables
Since we are interested in finding the best possible configura-tion of VDTP, we have focused on the three aforementioned parameters: chunk _ size , retransmission _ time and number of total _ attempts . Therefore, a given configuration (representing a solution of the problem) is a vector of three real values each parameter is: chunk _ size : R  X  A  X  128 524 ; 288 bytes (524,288bytes = 512 kBytes), total _ attempts : R  X  A  X  1 250 attempts, retransmission _ time : R  X  A  X  1 10 s.

These ranges were stated following the CARLINK consortium requirements for VANETs applications ( http://carlink.lcc.uma.es ). 4. The algorithms
In this section we briefly describe the five metaheuristic algorithms evaluated in this study. Specifically, they are two swarm intelligence techniques, Particle Swarm Optimization and Differential Evolution; two evolutionary algorithms, Genetic
Algorithm and Evolutionary Strategy; and a trajectory search technique, Simulated Annealing. These techniques were selected with the aim of experimenting with different population structures, as well as different reproduction mechanisms. We have stated the same stop condition (reaching a certain number of generations) in all algorithms in order to simplify the following descriptions. 4.1. Particle Swarm Optimization (PSO) a population based metaheuristic inspired in the social behavior of birds within a flock, and initially designed for continuous optimization problems. In PSO, each potential solution to the problem is called particle and the population of particles is called swarm . In this algorithm, each particle position x i is updated each generation g by means of the following equation: where factor v i g +1 is the velocity of the particle and is given by stored so far, b g is the best particle (also known as the leader ) that the entire swarm has ever created, and w is the inertia weight of the particle (it controls the trade-off between global and local experience). Finally, j 1 and j 2 are specific parameters which control the relative effect of the personal and global best particles ( j 1  X  j 2  X  2 UN  X  0 ; 1  X  ).
 starts by initializing the swarm (Line 1), which includes both the positions and velocities of the particles. The corresponding p during a maximum number of iterations, each particle flies through the search space updating its velocity and position (Lines 5 and 6), it end of each iteration, the leader b is updated.

Algorithm 1. Pseudocode of PSO. 4.2. Differential Evolution (DE)
Differential Evolution ( Price et al., 2005 ) is a stochastic population based algorithm designed to solve optimization problems in continuous domains. The population consists of a set of individuals whichevolvesimultaneouslythroughthesearchspaceofthe problem. The task of generating new individuals is performed by differential operators such as the differential mutation and crossover.
A mutant individual w g +1 i is generated by the following equation: w mutually different, and also different from the index i , the mutation constant m 4 0 stands for the amplification of the difference between process.

In order to increase even more the diversity in the population, each mutated individual undergoes a crossover operation with the target individual v g i , by means of which a trial individual u generated. A randomly chosen position is taken from the mutant individual to prevent that the trial individual replicates the target individual. u  X  j  X   X 
As shown in Eq. (4), the crossover operator randomly chooses a uniformly distributed integer value j r and a random real number r
A  X  0 ; 1  X  , also uniformly distributed for each component j of the trial we select the j th element of the mutant individual to be allocated in the j th element of the trial individual u g +1 i .Otherwise,the j th element of the target individual v g i becomes the j th element of the the trial individual for the next generation if and only if it yields a reduction in the value of the evaluation function (also called fitness function f ()), as shown by the following equation: v  X 
Algorithm 2 shows the pseudocode of DE. After initializing the population (Line 1), the individuals evolve during a number of generations (maxGenerations). Each individual is then mutated (Line 5) and recombined (Line 6). The new individual is selected (or not) following the operation of Eq. (5) (Lines 7 and 8).
Algorithm 2. Pseudocode of DE. 1: initializePopulation() 2: while g o maxGenerations do 3: for each individual v i g do 4: choose mutually different( r 1 , r 2 , r 3 ) 7: evaluate( u i g +1 ) 9: end for 10: end while 4.3. Genetic Algorithm (GA)
Genetic Algorithms ( Blum and Roli, 2003 ) are the most popular metaheuristic algorithms. A GA iterates a process in which two parents are selected from the whole population with a given selection criterion, they are then recombined, the obtained offsprings are mutated, and finally they are evaluated and inserted back into the population following a given criterion. The mutation process is carried out by randomly (uniformly) selecting one of the elements in the solution, and assigning (randomly) a new value in the range as stated in Section 3.1.1. As recombination operator we use here a polynomial crossover defined for continuous variables ( Blum and Roli, 2003 ). Algorithm 3 summarizes the operations of a canonical GA.
 Algorithm 3. Pseudocode of GA. 1: P 0  X  initializePopulation() 2: while g o maxGenerations do 3: P 0 g  X  recombine( P g ) 7: end while
There are two main versions of GA: steady state GA (ssGA) and generational GA (genGA). The difference between the ssGA and the genGA is the way in which the population is being updated with the new individuals generated during the evolution. In the case of the ssGA, new individuals are directly inserted into the current population while in the case of the genGA, a new auxiliary population is built with the obtained offsprings and then, once this auxiliary population is full, it completely replaces the current population. Thus, in ssGAs the population is asynchronously being updated with the newly generated individuals, while in the case of genGAs all the new individuals are updated at the same time, in a synchronous way. 4.4. Evolutionary Strategy (ES)
Evolutionary Strategy ( Beyer and Schwefel, 2002 )isa metaheuristic algorithm, designed by Rechenberg and Schwefel, also based on the ideas of adaptation and evolution.

As common with evolutionary algorithms, the mutation and selection operators are applied to the individuals through a given number of generations. The selection in evolutionary strategies is deterministic and only based on the fitness rankings, not on actual fitness values. We used here a mutation operator as explained in GA.
 Algorithm 4. Pseudocode of ES. 1: c 0  X  initializeParent() 2: while g o maxGenerations do 3: o g  X  mutate( c g ) 4: evaluate( o g ) 5: if f ( o g ) is better than f ( c g ) then 6: c g  X  o g 7: end if 8: end while
The canonical ES (Algorithm 4) operates on a population of size two: the current individual (parent c ) and the result of its mutation (offspring o ). After the parent initialization (Line 1), ES starts the evolution process by generating a mutated offspring (Line 3) which is evaluated (Line 4). Only if the offspring has a better fitness than the parent, it becomes the parent of the next generation (Lines 5 and 6). Otherwise the offspring is ignored. This is version of ES is called (1+1)-ES. More generally, in (1  X  l )-ES, a population with more than one offsprings ( l ) can be generated for being compared with the same parent. In a (1, l )-ES the best offspring becomes the parent of the next generation while the current parent is always ignored. The most generalized version,  X  m  X  =; l  X  -ES, often uses a population of parents ( m ) and also recombination as an additional operator. 4.5. Simulated Annealing (SA)
SA was first presented as a trajectory based optimization technique in Kirkpatrick et al. (1983) . It is inspired in the metallurgy processes of annealing, and basically lies in a local search method with a mechanism that eventually promote solutions of worse quality than the current ones (uphill moves), in order to escape from local minima. The probability of performing such a movement decrease during the search process. The pseudocode of the canonical SA is showed in Algorithm 5.
Algorithm 5. Pseudocode of SA. 1: initialize( T , S a ) 2: evaluate( S a ) 3: while g o maxGenerations do 4: while not coolingCondition( g ) do 5: S n  X  chooseNeighbor( S a ) 6: evaluate( S n ) 7: if accept( S a , S N , T ) then 8: S a  X  S n 9: end if 10: end while 11: coolDown( T ) 12: end while
The algorithm works iteratively keeping a single tentative solution S a at any time. In every iteration, a new solution S generated from the previous one, S a (Line 5), and either replaces it or not depending on an acceptance criterion (Lines 7 X 8). The acceptance criterion works as follows: both the old ( S a new ( S n ) solutions have an associated quality value, determined by a fitness function ( f ()). If it is worse, it replaces it with probability prob (Eq. (6)). This probability depends on the difference between their quality values and control parameter T named temperature . This acceptance criterion provides the way of escaping from local optima. prob  X  2 1  X  e  X  f  X  S
As iterations go on, the value of the temperature ( T ) is reduced following a cooling schedule (Line 11), thus biasing SA towards accepting only better solutions. In this work, we employ the geometric rule T  X  n  X  1  X  X  a T  X  n  X  , where 0 o a o 1, and the cooling is performed every k iterations ( k is the Markov chain length ).
GA and ES). The initial value of temperature T is automatically generated in such a way that any movement from the initial (random) solution will be accepted with a certain probability. 5. Optimization strategy basically two main parts: an optimization algorithm and a simulation procedure. The optimization part is carried out by (independently) one of the algorithms described in Section 4. All of them are specially adapted to find optimal (or cuasi-optimal) solutions in continuous search spaces (which is the case in this work). The simulation process is a way of assigning a quantitative quality value to the factors regulating VDTP, thus leading to optimal configurations of this protocol tailored to a given scenario. This procedure is carried out by means of the ns -2 simulator in which we have implemented the VDTP protocol for sending files in VANETs.
 is carried out by means of the simulation component. As Fig. 3 illustrates, when a given algorithm generates a new solution it is immediately used for configuring the VDTP. This configuration evaluates the quality of the solution by using the received retransmission time , chunk size , and total number of attempts ,as explained in Section 3.1. Then, ns -2 is started and maps a given
VANET scenario instance, taking its time in evaluating the scenario with buildings, signal loss, obstacles, vehicles, speed, covered area, etc., under the circumstances defined by the three control parameters optimized by the algorithm. After the simulation, ns -2 returns the global information about the transmission time required for sending the file, the number of lost packets generated during the simulation, and the amount of data exchanged between vehicles. This information is used to compute the fitness function. 5.1. Fitness function potential variations scenario all fitting the actual vehicle system, there is a possibility of obtaining different fitness values even using the same VDTP configuration (solution). Therefore, in order to provide each solution with a fitness value as reliable as possible, a single evaluation of one solution requires N =10 internal simulations, computing the global fitness ( F ) as the mean Simulation VDTP of all ns -2 results:
F  X  1 N
In this equation, i A  X  1 10 is the number of simulations per solution evaluation. The factor C =2 avoids division zero if there is no data transference, preventing a possible error in the fitness calculation. The data transferred is presented in logarith-mic scale in order to make up for the difference in the range of values. This way, the algorithm looks for minimizing the global fitness. 1 6. Experiments
We have used the implementation of the five algorithms provided by MALLBA ( Alba et al., 2007a ), a C++based framework of metaheuristics for solving optimization problems. The simulation phase is carried out by running ns -2 simulator v-2.31. For the experiments, we made 30 independent runs of each algorithm on machines with Pentium IV 2.4GHz core, 1GB of RAM and O.S
Linux Fedora core 6. 6.1. Instances: VANET scenarios
We have created two simulation VANET scenarios (instances) from real Urban and Highway areas of Ma  X  laga, Spain (selected areas in Fig. 4 ). These instances have been generated following the real tests carried out by experts in the scope of the CARLINK project, with the aim of obtaining as different as possible conditions of speed, number of vehicles, obstacles, signal noise, network use, etc. Therefore, we can analyze in both scenarios the behavior and performance of the compared algorithms, as well as the differences in the resulting VDTP configurations in terms of communication efficiency. Furthermore, we can compare these automatically generated configurations against the ones used in the real experiments by human experts in CARLINK ( Alba et al., 2008a, 2008b). 6.1.1. Urban
The Urban instance covers an area of 120,000m 2 including buildings and semaphores. We have used VanetMobiSim (Alba et al., 2007b) for generating a realistic simulation mobility model where vehicles move randomly according to real traffic rules. A number of 30 vehicles move with a velocity between 30 and 50km/h, and 20 of them trying to send and receive a file of 1024kBytes. 6.1.2. Highway
The Highway instance covers a stretch of 1km with two directions without buildings and semaphores. In this case, the absence of obstacles is made up for the handicap of the high speed of vehicles, which also interferes the communication among vehicles. We have also used VanetMobiSim (Alba et al., 2007b) for generating a realistic simulation mobility model where vehicles move randomly according to real traffic rules. In the Highway
VANET, a number of 30 vehicles move with a velocity between 80 and 110km/h, and 20 of them trying to send and receive a file of 1024kBytes size.
 The resulted communication environments of Urban and
Highway instances, including directions and mobile nodes (vehicles), were mapped in the ns -2 simulator following the VANET specifications of devices and protocols 2 summarized in Table 1 . The ns -2 mobility trace definitions for both instances are publicly available in the following URL http://neo.lcc.uma.es/staff/ jamal/portal/?q=content/malaga-scenario . 6.2. Parameter settings
In our experiments, all studied algorithms were configured in order to perform 1000 solution evaluations per run. At each one of these solution evaluations, ns -2 performs 10 independent simula-tions of the target scenario with the same protocol configuration as stated in Section 5.1. Therefore, the population based algorithms (PSO, DE, GA, and ( m ; l )-ES) were configured with 20 individuals, performing 50 generational steps.

Table 2 summarizes the remaining parameters specific to each algorithm. These parameters were selected as the most accurate after a set of initial tuning experiments. In these, a number of five combinations of parameters per algorithm and VANET instance were tested performing 10 independent runs per combination, hence resulting a number of 500 additional executions. Preliminary results of parameters tuning are available in Table A1 of Appendix A.
 Urban Highway 6.3. Results and comparisons
In this section we present the results obtained by the five studied algorithms when solving the optimal File Transfer
Configuration (FTC) problem on VDTP. Table 3 shows the resulting fitness values regarding the Urban and Highway
VANET scenarios in terms of the mean, the standard deviation, the minimum (best fitness), the median, and the maximum (worst fitness) found in 30 independent runs of every algorithm. For the Urban scenario, we can observe (in Table 3 ) that PSO obtained the best result in terms of the mean fitness. This smallest mean value leads us to believe that using the
PSO the resulting VDTP ends in an efficient communication which is fast and accurate between vehicles. In addition, the best median and maximum values were also obtained by
PSO, although the best minimum (e.g., the best VDTP configura-tion found for Urban) was reached by DE. This is an expected value, since DE generally shows a pronounced exploitative behavior (using a parametrization close to the standard one,
Price et al., 2005 ), while PSO tends to have an explorative performance using a high inertia (as in this study w =0.5,
Eberhart and Shi, 2000 ). Similar results can be observed for the Highway scenario, in which PSO obtained the best mean fitness value again. For this instance, PSO also showed the lowest value of standard deviation. This implies a considerable advantage, since it provides our model with a high robustness, which is a crucial issue when designing VANETs. In terms of the minimum fitness, GA and DE obtained the best VDTP configura-tions for the Highway scenario. The worst configuration was obtained by ES.
 we have applied a Signed Rank ( Wilcox, 1987 ) statistical test to the distributions of the aforementioned results. We have used this non-parametric 3 test with confidence level of 95% ( p-value =0.05), which leads us to ensure that these results are statistically different if they result in p-value o 0 : 05. Table 4 contains the resulted p-value of applying the Signed Rank test to PSO (the one with the best mean fitness) in comparison with the remaining of algorithms, hence confirming the differences in results. In this table, the symbol m means that PSO is statistically better than the compared algorithm, whereas the symbol n means that PSO has a better rank than the compared algorithm, but without statistical difference.
 compared algorithms for the Urban instance. Only DE shows a p-value (0.047) close to 0.05, being lower in any case. Concerning the Highway instance, PSO shows the best rank, not far from GA and SA.
 and Davenport, 1980 ) statistical test by means of which the algorithms are sorted in a ranked list. Table 5 shows the Friedman ranking of the compared algorithms in Urban and Highway instances (the best ranked algorithm is in the top). For Urban instance, PSO and DE are the best ranked algorithms, but showing
SA the last position. Nevertheless, for Highway scenario, SA obtains the best rank, whereas PSO is located in the third position. global best behavior of PSO, the different requirements implicit to both instances implies that each algorithm can show quite different results depending on the VANET scenario on which it operates. For example, DE shows a competitive performance in
Urban scenario whereas it is the second worst in Highway. The opposite example can be observed in GA and SA which show weak results in Urban but highly competitive ones in Highway. Therefore, the VANET designer can select the optimization model more suited to his/her requirements, and choose the best option for each studied VANET scenario. 6.4. Performance analysis
We present now a performance study which basically lies in analyzing the best fitness value, resulted from each function evaluation, during the whole evolution process of a given algorithm. Figs. 5 and 6 illustrate the graphs of the best fitness values (communication cost) obtained through the median execution in Urban and Highway instances, respectively.
We can observe in both graphics that PSO and DE tend to converge in the same range of solution evaluations, although they could improved their fitness even in the final steps of the evolution process. GA shows a similar trend as the former ones but it is subjected to an early stagnation.

Finally, the different behaviors observed in ES, and specifically in SA, for Urban and Highway instances confirm us the high dependency of such algorithms to each different VANET instance (they are not robust in this application).

Concerning the mean run time that each algorithm spent in the experiments, Table 6 shows both the mean time in which the best solution was found T best , and the global mean run time T Urban and Highway scenarios. In general, SA shows the shortest times to find the best solution for the two VANET instances. We suspect that despite its temperature mechanism, SA quickly falls in local optima hence obtaining weak results in Urban scenario. Nevertheless, this behavior can be an advantage for Highway scenario where SA obtained accurate solutions with a fast performance. As expected in PSO and DE, they spent closed executions times for the two VANET instances since they have similar internal operations. This resemblance in time consumption was also registered in the two evolutionary algorithms, GA and ES.
As a summary, the algorithms use between 9.00E+03 and 4.76E+03s for the Urban scenario (150 and 80 minutes, respectively), and between 2.19E+03 and 8.45E+02s for Highway scenario (60 and 23 minutes, respectively). This relative low effort in the protocol design is completely justified by the subsequent benefits obtained in the global data transmission time and loss of packets once the VANET is physically deployed as observed in the following analysis.
 6.5. Scalability analysis
Once we have analyzed the performance of the five algorithms in two different VANET scenarios, we study in this section how do various network sizes affect the performance of these optimiza-tion techniques. For this purpose, we have generated two new
VANET instances from the initial Urban scenario (of Ma  X  laga) by enlarging the metropolitan area considered. Therefore, as Fig. 7 shows, the initial urban area (A1) has been expanded to A2 and A3
VANET areas. We have set the traffic flow as described in Section 6.1, also increasing the number of vehicles as follows: algorithm (out of 30 independent runs), we can observe in Table 7 that PSO keeps the best performance for Urban A 2 and Urban observed in GA, which arises as the second best algorithm in improving its behavior with the VANET size. ES obtains moderate mean fitness values for all network instances, keeping a low standard deviation. The worst results are registered by SA in
Urban A 2 , and DE in Urban A 3 . Concerning DE, the initial choice of its parameters ( Cr =0.9 and m  X  0 : 1) could lead the algorithm to perform an exploitative search, hence obtaining good results in small instances (the second best for Urban A 1 ) but damaging its behavior in larger VANETs (the worst for Urban A 3 ). In summary, excepting for GA and DE, we can confirm that for the scaled
VANET instances the performance of the algorithms are similar to their performances in Urban A 1 (the initial Urban VANET instance) being PSO always the best procedure.
 fitness values, which are in Urban A 2 lower than in Urban suspect that, in spite of the larger dimension of Urban A 2 proportion of communicating vehicles (per m 2 ) in this VANET helps the protocol operation specially for intermediate nodes, hence improving the effective ratio of delivery packets and the overall retransmission time. This proportion could not be enough for Urban A 3 where the cost of transmissions is the larger one. columns the time required to find the best solution ( T best
VANET instance. Surprisingly, for PSO, ES, and SA the time required to converge in Urban A 2 is lower than in Urban A 1 behavior can be explained by the fact of obtaining good solutions faster in Urban A 2 than in Urban A 1 , where the lower number of vehicles could harm the communications conditions. On the contrary, the global run time ( T run ) always increases with the network size. This is of course an expected result. 6.6. QoS analysis tions (solutions), we analyze the results in terms of the QoS indicators considered here: the transmission time, the number of lost packets, and the amount of data transferred induced in the designed VANET. In this sense, Table 8 shows the results after simulating the best solutions found by the studied algorithms. In addition, the last row of this table contains the results of simulating the configuration of VDTP that has been used in the scope of the CARLINK project (real word results with actual cars). (Chunk_Size=41,358 Bytes, Retransmission_Time=10s, and num-ber of Attempts=3) achieves the best performance in terms of transmission time and mean number of lost packets. Specifically, in comparison with the human experts configuration of CARLINK,
PSO obtains a reduction in the transmission time of 0.83s (19.5%) registering also a lower number of lost packets.

Nevertheless, it is in the Highway scenario were PSO obtains the higher time reduction of 8.41s (25%) regarding the human experts configuration (from 33.08 to 24.67s). We must notice that, in spite of achieving the PSO a higher reduction in the transmission time than SA and GA, the fact of losing more packets (3.18 in PSO, 2.71 in GA and 2.54 in SA) in the global transference leads SA and GA to calculate a better fitness value (as shown in Table 3 ).
A final analysis can be done concerning one main QoS indicator: the effective transmission data rate (throughput) achieved. As we can observe in Fig. 8 , the VDTP configuration obtained by practically all algorithms in the two VANET scenarios obtained higher effective data rates than the human configured VDTP. Specifically, PSO achieves the highest effective data rate (300.29kBytes/s in Urban and 41.54kBytes/s in Highway). This clearly claims for the utilization of these automatic algorithms to help human designers. We again remind that the actual correction of effective data rates between cars are in the order of tens of kBytes/s, so our savings (58.79kBytes/s in Urban and 10.5kBytes/ s in Highway) are truly meaningful in current real applications such as safety, traffic control, and weather predictions. 7. Conclusions In this paper, we tackle the optimal File Transfer protocol Configuration (FTC) in VANETs by means of five popular metaheuristic algorithms. For this, we need a complex system accounting for a flexible simulation structure targeted for optimizing the transmission time, the number of lost packets, and the amount of data transferred in simulated and also realistic VANET scenarios.

The experiments, using ns -2 (well-known VANET simulator), reveal that all algorithms are capable of efficiently solve the optimum FTC problem. In the comparisons, PSO performs statistically better than all algorithms in Urban and statistically better than DE and ES in Highway. In addition, GA and SA show a competitive performance in Highway. The scalability analysis shows that GA improves with the network size, whereas DE decreases its performance with large VANET instances. PSO keeps the best result even for larger instances.

From the point of view of its real world utilization, PSO can reduce 19% of the transmission time in Urban and 25.43% in Highway with regards to human experts configuration of CARLINK, while transmitting the same amount of data (1024 Effective Data Rate (kByes/s) Effective Data
Rate (kBytes/s) kBytes). The highest effective data rates obtained by PSO (of 300.39kBytes/s in comparison with 241.5kBytes/s of human experts) and DE (292.57kBytes/s) in Urban lead us to advise the final use of our automatic design algorithms.

As a matter of further work we are presently extending our benchmark with new VANET realistic instances (e.g., complete cities and highway knots). In addition, we are planning to define new optimized configuration schemes for other communication protocols such as: UDP, DSR, etc. which should efficiently support actual VANET design.
 Acknowledgments
Authors acknowledge funds from the Spanish Ministry MICINN and FEDER under contract TIN2008-06491-C04-01 (M* http:// mstar.lcc.uma.es ) and CICE, Junta de Andaluc X   X  a, under contract P07-TIC-03044 (DIRICOM http://diricom.lcc.uma.es ). Jose  X  Garc X   X  a-Nieto is supported by Grant BES-2009-018767 from the MICINN. Appendix A. Parameters tuning
Table A1 shows the results obtained in the preliminary parameters tuning procedure. A number of five combinations of parameters per algorithm and VANET instance were tested performing 10 independent runs per combination, hence resulting a number of 500 executions.
 References
