 Internet congestion occurs when the aggregated demand for a resource (e.g., link bandwidth) exceeds the available capacity of the resource. Resulting effects from dropped packets, and even possible congestion collapse [1]. Therefore it is very nec-essary to avoid or control network congestion. Internet congestion control has two parts: 1) the end-to-end protocol TCP and 2) the active queue management (AQM) scheme implemented in routers [2]. AQM can maintain smaller queuing delay and higher throughput by purposefully dropping packets at intermediate nodes. 
Several AQM Schemes have been studied in recent literatures to provide early con-[4], such as Proportional Integral (PI) controller [5], REM [1, 6], BLUE [7], adaptive virtual queue (AVQ) algorithm [8] and PD-RED controller [2]. These schemes can be queue based which controls the queue at the congested link. RED [3] is the most prominent and widely studied AQM scheme, which is implemented in routers for congestion control of the Internet. Dynamic-RED (DRED) attempts to stabilize router queue occupancy at a level independent of the active connections by using EWMA as an integral control (I-control) [9]. In [5], the proportional-integral (PI)-controller has been proposed to improve responsiveness of the TCP/AQM dynamics and to stabilize the router queue length around the target. Based on a Proportional-Integral-Derivative (PID) model, an adaptive control mechanism is proposed to improve the system sta-bility and performance under changing network conditions [10]. In these approaches, feedback control theory is used to de scribe and analyze the TCP/AQM dynamics. queue length. The main reason is probably that the present RED does not use any exact mathematical model to characterize the complex TCP congestion control proc-ture, and may only be useful for certain class of processes or under certain conditions. A theoretic guideline to choose proper control gain to optimize network performance is still required. 
In this paper, a novel proportional integral (NPI) feedback control scheme is pro-posed for TCP/RED dynamic model developed in [11, 12]. By using control theory and regulating the router queue length to approach the expectative value, the proposed AQM algorithm can decrease the responsive time and improve the stability and ro-bustness of TCP/AQM congestion control. Based on the time-delay control theory, we feedback gains (the proportional and integral parameters) for TCP/RED system, which can make the queue length converge at the expected target, stabilize the RED and improve the network performance. 
The remainder of the paper is organized as follows. In Section 2, we present a novel algorithm called NPI-RED and give a theoretic law of choosing the propor-demonstrate that the better network performance of NPI-RED can be achieved com-Finally, we conclude our work and give the further work in section 4.
 2.1 Algorithm Description specified in the table 1. 
We consider the following dropping formula as the feedback controller: where avgq ( t ) denotes the average queue length at time t . We use the average queue avoid the sudden change of queue length causing by some short flows or non-TCP system stability for an effective system. If the control gains are selected in the stabil-ity areas, it can enable the system stability and therefore the network may have better performance, such as less loss ratio, less queue delay and higher network throughput. choose proper control gains to optimize network performance. 2.2 Stability Analysis and Control Gain Selection The stability of the congested buffer occupancy is significantly important because the large oscillation in the buffer can cause a large of data drop, the lower link utilization and the lower system throughput. It influence seriously on the Quality of Service (QoS) of the network. Therefore, in order to meet QoS requirement (e.g., acceptable ment. In this section, we make analysis on the stability based on the dynamic model of TCP and the control theoretic approach, and give the design method in detail. We use the simplified dynamic model of TCP behavior [12] as shown in the following equations: denote the parameters of equations (2) in Table 2. 
In [7], Exponentially Weighted Moving Average (EWMA) queue size is used, i.e., cally, with RED, a link maintains the following equation sampling interval equal to 1, and then we can reach the continuous-time form of equa-tion (3) as follows: By differentiating both sides of equation (4), we have 
In this paper our objective is to develop the active queue management to improve document [12] is introduced in this paper. The dynamics (2) and (6) are illustrated in the following block diagram: By performing Laplace Transform of (5) and (6), we can derive By substituting (4) and (5) into (2), we have where ) ( s W  X  , ) ( s AvgQ , ) ( s P  X  denote the Laplace Transform of ) ( t W  X  , can get the following polynomial equation where ) ( s  X  is the characteristic equation is Then we suppose 2 Based on the Routh-Hurwitz stability test [13], we get the following Routh Table (in Table 3), where 
The whole network system is stable if and only if the valves of the second column are all greater than zero, i.e., , 0 K in the case of the system stability are as follows: 0 and K 2.3 The Specific Algorithm of NPI-RED Based on the above stability analysis, we can select the proper control gains that can ensure the system stability and therefore improve the network performance. The com-putations of p(n) for time n (the th n sampling interval) can be summarized in Fig. 2. In this section, we evaluate the performance of the proposed NPI-RED algorithm by a number of simulations performed using ns2 [15]. The performance of NPI-RED is compared with RED [3] and other RED variants such as PI-RED [5], PD-RED [2] and adaptive RED [18]. The network topology used in the simulation is the same one used in [16-17]. It is a simple dumbbell topology based on a single common bottleneck link of 45 Mb/s capacity with many identical, long-lived and saturated TCP/Reno flows. In other words, the TCP connections are modeled as greedy FTP connections, that always have data to send as long as their congestion windows permit. The receiver X  X  ceivers. For these AQM schemes tested, we maintain the same test conditions: the same topology (as described above), the same saturated traffic and the same TCP parameters. 
The parameters used are as follows: the round-trip propagation delay is 100 ms, the width-delay product of the network). The basic parameters of RED (see notation in [6]) are set at min th =15, max th =785, max p =0.01 and w q =0.002. For Adaptive RED, the parameters are set as the same in [5]: , 01 . 0 =  X  , 9 . 0 =  X  intervaltime =0.5s. For PD-
In this simulation, we focus on the following key performance metrics: goodput (excluding packet retransmissions), average queue length, average absolute queue deviation, and packet loss ratio. The average queue length is defined as the arithmetic mean value of instantaneous queue length. The average queue deviation is defined as the absolute deviation between instantaneous queue length and its mean value. 3.1 Simulation 1: Stability Under Extreme Conditions In this experiment, all TCP flows are persistent, and the stability of the AQM schemes are investigated under two extreme cases: 1) light congestion with a small number of queue target at 200. Other parameters are the same as those in the second paragraph of the performance evaluation part. 
Fig. 3 and Fig. 4 demonstrate the dynamic change of the average queue length and the drop probability of the NPI-RED algorithm under the light congestion ( N = 100 ) and the heavy congestion ( N = 2000 ). It can be seen that, although the queue length the queue target 200 and 0.22 respectively. Both the fluctuation amplitude of NPI-RED queue length and the variance of the drop probability are small. In summary, NPI-RED shows better stability and quick response under either light congestion or heavy congestion. 3.2 Simulation 2: Response Under the Variable Number of Connections In this section, the simulation is performed with the variable number of TCP connec-tions. In the first, the initial umber of connections is set to 2000 and, in addition, 200 TCP connections join in the link at 50.1 ms. Other parameters are the same as those in simulation 1. 
Fig. 5 shows the queue length and the drop probability for the variable number of stabilized at the queue target 200, and the drop probability can also be approximately From these figures we can find that NPI-RED achieves a short response time, good stability and good robustness. In this paper, a novel AQM scheme called NPI-RED is proposed to improve the per-formance of RED. We have explored the queue length stability of NPI-RED, and have provided guidelines based on theory and simulations for control gain optimization. simulation results by ns2 demonstrate that the NPI-RED scheme outperforms than recently proposed AQM algorithms in robustness, drop probability and stability. 
Future work would cover the extension of the proposed approach from the model of single queue. The performance under short flows, and burst traffic loads will also be investigated. In addition, issues such as fa irness and protection against non-responsive flows will be addressed, and all other relevant problems that the current RED is facing.
