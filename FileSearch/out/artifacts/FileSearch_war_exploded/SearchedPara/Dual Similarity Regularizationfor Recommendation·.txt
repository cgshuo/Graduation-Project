 Recommender system, as an effective way to tackle information overload prob-lems, has attracted much attention from multiple disciplines. Many techniques have been proposed to build recommender systems. As a popular technique, the torizes user-item rating matrix into two low rank user-specific and item-specific research topic, which utilizes the social relations among users for better rec-ommendation. Some researchers utilized trust information among users [ 5 , 6 ], and some began to use friend relationship among users [ 7 , 12 ] or other types of information [ 1 , 2 ]. Most of these social recommendation methods employ social regularization to confine similar users under the low rank matrix factorization framework. Specifically, we can obtain the similarity of users from their social closer. It is reasonable, since similar users should have similar latent features. shortcomings. (1) The similarity information of users is only generated from social relations of users. But we can obtain users X  similarity from many ways, In fact, we can obtain the similarity of items to impose constraint on the latent users, which may lead to dissimilar users having similar factors. The analysis and experiments in Sect. 2 validate this point.
 propose a Dual Similarity Regularization based recommendation method (called DSR) in this paper. Inspired by the success of Heterogeneous Information Net-work (HIN) in many applications, we organize objects and relations in a recom-mender system as a HIN, which can integrate all kinds of information, including interactions between users and items, social relations among users and attribute information of users and items. Based on the HIN, we can generate rich similarity information on users and items by setting proper meta paths. Furthermore, we propose a new similarity regularization which can impose the constraint on users and items with high and low similarity. With the similarity regularization, DSR adopts a new optimization objective to integrate those similarity information of ilarities. The experiments on real datasets show that DSR always performs best compared to social recommendation and HIN-based recommendation methods. Moreover, DSR also achieves the best performance for cold-start users and items due to the dual similarity regularization on users and items.
 social recommendation in Sect. 2 and introduce the rich similarity information of users and items generated from HIN in Sect. 3 . Then we propose the similar-ity regularization and the DSR model in Sect. 4 . We do experiments in Sect. 5 , describe related work in Sect. 6 and finally draw the conclusion in Sect. 7 . recommendations which leverage rich social relations among users to improve recommendation performance. Ma et al. [ 7 ] first proposed the social regulariza-tion to extend low-rank matrix factorization, and then it is widely used in a lot where m  X  n rating matrix R depicts users X  ratings on n items, R user i gives to item j . I ij is an indicator function which equals to 1 if user i rated item j and equals to 0 otherwise. U  X  R m  X  d and V d&lt;&lt;min ( m, n ) is the dimension number of latent factor. U of user i derived from the i th row of matrix U while V j of item j derived from the j th row of V . S U is the similarity matrix of users and S
U ( i, j ) denotes the similarity of user i and user j . norm. Particularly, the second term is the social regularization which is defined as follows: be close when they are very similar. However, it may have two drawbacks.  X 
The similarity information may be simple. In social recommendation, the sim-ilarity information of users is usually generated from rating information or social relations and only one type of similarity information is employed. How-ever, we can obtain much rich similarity information of users and items from various ways, such as rich attribute information and interactions.  X  The constraint term may not work well when two users are not very similar.
The minimization of optimization objective should force the latent factors of two similar users to be close. But we note that when two users are not similar users to be close. In fact, these two users is dissimilar which means their latent factors should have a large distance.
 In order to uncover the limitations of social regularization, we apply the similarity information in the model (i.e., alpha = 0 in the model), Low denotes that we utilize bottom 20 % users X  similarity information generated in the model, The Douban dataset detailed in Table 1 is employed in the experiments and we report MAE and RMSE (defined in Sect. 5.2 ) in Fig. 1 . The results of Low , High and All are better than that of None , which implies social regularization really works in the model. However, in terms of performance improvement compared to None , Low does not improve as much as High and All do. The above analysis reveals that the social regularization may not work well in recommender models when users are with low similarity.
 Traditional social recommendations only consider the constraint of users with their social relations. However, rich similarity information on users and items can be generated in a heterogeneous information network. A heterogeneous information network [ 11 ] is a special information network with multiple types of entities and relations. Figure 2 (a) shows a typical HIN extracted from a movie recommender system. The HIN contains multiple types of objects, e.g., users (U), movies (M), groups (G), and actors (A).
 path P is a path defined on a schema S =( A , R ), and is denoted in the form a composite relation R = R 1  X  R 2  X  X  X  X  X  X  R l between type A  X  denotes the composition operator on relations. As an example in Fig. 2 (a), users can be connected via  X  X ser-User X  (UU),  X  X ser-Movie-User X  (UMU) and so on. Different meta paths denote different semantic relations, e.g., the UU path means that users have social relations while the UMU path means that users have watched the same movies. Therefore we can evaluate the similarity of users (or movies) based on different meta paths. For example, for users, we can consider UU, UGU, UMU, etc. Similarly, meaningful meta paths connecting movies include MAM, MDM, etc.
 Several path-based similarity measures have been proposed to evaluate the similarity of objects under given meta path in HIN [ 9 , 11 ]. We assume that S denotes similarity matrix of users under meta path P ( p ) S ( i, j ) denotes the similarity of users i and j under the path S denotes similarity matrix of items under the path P ( q ) and S I ( i, j ) denotes the similarity of items i and j .
 Since users (or items) have different similarities under various meta paths, we combine their similarities on all paths through assigning weights on these paths. For users and items, we define S U and S I to represent the similarity matrix of users and items on all meta paths, respectively.
 where w ( p ) U denotes the weight of meta path P ( p ) U connecting users, and w ( q ) I denotes the weight of meta path paths P I connecting items. In this section, we propose our dual similarity regularization based matrix fac-torization method DSR and infer its learning algorithm. 4.1 Similarity Regularization Due to the limitations of social regularization, we design a new similarity reg-ularization to constrain users and items simultaneously with much similarity information of users and items. The basic idea of similarity regularization is that the distance of latent factors of two users (or items) should be negatively correlated to their similarity, which means two similar users (or items) should have a short distance while two dissimilar ones should have a long distance with their latent factors. We note that the Gaussian function meet above require-ment and the range of it is [0,1], which is the same with the range of similarity function. Following the idea, we design a similarity regularization on users as follows: where  X  controls the radial intensity of Gaussian function and the coefficient convenient for deriving the learning algorithm. This similarity regularization can matrix S U can be generated from social relations or the above HIN. Similarly, we can also design the similarity regularization on items as follows: The Proposed DSR Model. We propose the D ual S imilarity regularization for R ecommendation (called DSR) through adding the similarity regularization on users and items into low-rank matrix factorization framework. Specifically, the optimization model is proposed as follows: where  X  and  X  control the ratio of similarity regularization term on users and items, respectively. 4.2 The Learning Algorithm The learning algorithm of DSR can be divided into two steps. (1) Optimize the latent factor matrices of users and items (i.e., U , V ) with the fixed weight Optimize the weight vectors w U and w I with the fixed latent factor matrices U and V . Through iteratively optimizing these two steps, we can obtain the optimal U , V , w U ,and w I .
 Optimize U and V. With the fixed w U and w I , we can optimize U and V by performing stochastic gradient descent.  X  J Optimize w U and w I . With the fixed U and V , the minimization of respect to w U and w I is a well-studied quadratic optimization problem with non-negative bound. We can use the standard trust region reflective algorithm to update w U and w I at each iteration. We can simplify the optimization function of w
U as the following standard quadratic formula: Here H U is a |P U | X |P U | symmetric matrix as follows: denotes the dot product. f U is a column vector with length calculated as follows: Similarly, we can also infer the optimization function of In this section, we conduct experiments to validate the effectiveness of DSR and further explore the cold-start problem. 5.1 Dataset We use a real dataset from Douban 1 , a well known social media network in China, which includes 3,022 users and 6,971 movies with 195,493 ratings ranging from 1 to 5. And another real dataset is employed from Yelp 2 , a famous user review website in America, which includes 14,085 users and 14,037 movies with 194,255 ratings ranging from 1 to 5. The description of two datasets can be seen in Table 1 and their network schemas are shown in Fig. 2 . The Douban dataset has sparse social relationship with dense rating information while the Yelp dataset has dense social relationships with sparse rating information. 5.2 Comparison Methods and Metrics In order to validate the effectiveness of DSR, we compare it with following repre-sentative methods. Besides the classical social recommendation method SoMF, the experiments also include two recent HIN based methods HeteCF and HeteMF. In SoMF SR ) to validate the effectiveness of similarity regularization.  X 
UserMean . It employs a user X  X  mean rating to predict the missing ratings directly.  X 
ItemMean . It employs an item X  X  mean rating to predict the missing ratings directly.  X 
PMF [ 8 ]. Salakhutdinov and Minh proposed the basic low-rank matrix fac-torization method for recommendation.  X 
SoMF [ 7 ]. Ma et al. proposed the social recommendation method with social regularization on users.  X 
HeteCF [ 4 ]. Luo et al. proposed the social collaborative filtering algorithm using heterogeneous relations.  X 
HeteMF [ 13 ]. Yu et al. proposed the HIN based recommendation method through combining user ratings and items X  similarity matrices.  X 
SoMF SR . It adapts SoMF through only replacing the social regularization with the similarity regularization SimReg U .
 UMU, UMDMU, UMTMU, UMAMU) and 5 meta paths for item (i.e., MTM, MDM, MAM, MUM, MUUM). For Yelp dataset, we utilize 2 meta paths for user (i.e., UB, UU) and 2 meta paths for item (i.e., BC, BL). HeteSim [ 9 ]is employed to evaluate the object similarity based on above meta paths. These similarity matrices are fairly utilized for HeteCF, HeteMF, and DSR. We set  X  =1,  X  = 10, and  X  = 10 through parameter experiments on Douban dataset. In the experiments on Yelp dataset, we set the parameters  X  =1,  X  = 10,  X  = 10. Meanwhile, optimal parameters are set for other models in the experiments. We use Mean Absolute Error (MAE) and Root Mean Square Error (RMSE) to evaluate the performance of rating prediction: where R denotes the whole rating set, R u,i denotes the rating user u gave to item i ,and  X  R u,i denotes the rating user u gave to item i as predicted by a certain method. A smaller MAE or RMSE means a better performance. 5.3 Effectiveness Experiments For Douban dataset, we use different ratios (80 %, 60 %, 40 %) of data as training sets and the rest of the dataset for testing. Considering the sparse density of Yelp dataset, we use 90 %, 80 %, 70 % of data as training sets and the rest of the dataset for testing for Yelp dataset. The random selection is carried out 10 times independently and we report the average results in Table 2 . It is clear that three HIN based methods (DSR, HeteCF, and HeteMF) all achieve significant performance improvements compared to PMF, UserMean, ItemMean and SoMF. It implies that integrating heterogeneous information is a promising way to improve recommendation performance. Particularly, DSR always has the best performance on all conditions compared to other methods. It indicates that the dual similarity regularization on users and items may be more effective than traditional social regularization. It can be further confirmed by the better performance of SoMF SR over SoMF. Although the superiority of SoMF
SR over SoMF is not significant, the improvement is achieved on the very weak social relations in Douban dataset. In addition, we can also find that DSR has better performance improvement for less training data. It reveals that DSR has the potential to alleviate the cold-start problem. 5.4 Study on Cold-Start Problem To validate the superiority of DSR on cold-start problem, we run PMF, SoMF, HeteCF, HeteMF, DSR on Douban dataset with 40 % training ratio. Four levels of users are seted: three types of cold-start users with various numbers of rated movies (e.g., [0,8] denotes users rated no more than 8 movies and  X  X ll X  means all items (users and items are both cold-start). The experiments are shown in Fig. 3 . Once again, we find that 3 HIN-based methods all are effective for cold-start users and items. Moreover, DSR always has the highest MAE improvement on reasonable since the DSR method takes much constraint information of users and items into account which would play a crucial role when there X  X  little available information of users or items. 5.5 Parameter Study on  X  and  X  The DSR model is based on the low-rank matrix factorization framework and the similar regularization on users and items is applied to constrain the model learning process. The relevant parameters of the basic matrix factorization have been studied in other matrix factorization methods. In this section we only study  X  and  X  which are the parameters of dual similarity regularization on Douban dataset.
 Figure 4 shows that the impacts of  X  and  X  on MAE and RMSE are quite similar. When the values of  X  and  X  are both around 10, the experiment has the best performance. When the values of  X  and  X  are quite large or small, the results are not ideal. When  X  and  X  set the proper value (in our experiments they are both 10), regularization and rating information take effect on the learning process simultaneously so that the experiments could get better performance. It indicates that integrating the similarity information of users and items in a HIN has a significant impact on recommender systems.
 Compared to the optimal result, the experimental results decline sharply when the values of  X  and  X  are increased from 10. On the other hand, when  X  and  X  are quite small, DSR performs like basic matrix factorization method but the experimental results are not too bad. With the prevalence of social media, social recommendation has attracted many In [ 7 ], the social regularization ensures that the latent feature vectors of two social trust circles from available rating data combined with friend relations. To further improve recommendation performance, more and more researchers have been aware of the importance of heterogeneous information network (HIN), in which objects are of different types and links among objects represent dif-ferent relations. Zhang et al. [ 14 ] investigated the problem of recommendation over heterogeneous network and proposed a random walk model to estimate the importance of each object in the heterogeneous network. Considering het-erogeneous network constructed by different interactions of users, Jamali and Lakshmanan [ 3 ] proposed HETEROMF to integrate a general latent factor and context-dependent latent factors. Yu et al. [ 13 ] proposed Hete-MF through com-bining rating information and items X  similarities derived from meta paths in recommendation method, called Hete-CF, using heterogeneous relations. In the paper, we analyzed the limitations of social regularization and designed a similarity regularization whose basic idea is to enforce the constraint on both similar and dissimilar objects. Then, we employ the similarity regularization on low-rank matrix factorization framework and proposed the DSR method. Experiments validate the effectiveness of DSR, especially on alleviating the cold-start problem.

