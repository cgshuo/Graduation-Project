 Tourist photographs constitute a larg e part of the images uploaded to photo sharing platforms. But filtering methods are needed before one can extract useful knowledge from noisy user-supplied metadata. Here we show how to extract clean trip related information (what people visit, for how long, panoramic spots) from Flickr metadata. We illustrate our technique on a sample of metadata and images covering 183 cities of different size and from different parts of the world. H.2.8 [ Database Management ]: Database applications  X  Data mining, Image databases; Spatial databases and GIS.
 Algorithms, Experimenta tion, Human Factors. Tourist sites, visit times, geographical gazetteer, k-Nearest Neighbors, image classification, ba gs of visual words, Flickr. E-tourism sites allow users to interactively plan trips. For example, HomeAndAbroad.com (H&amp;A hereafter) allows users to compose thematic trips (such as Family Time, Local Culture or History Buff) in 100 cities. Schmap.com, an e-tourism platform with 200 destinations, mashes-up interactive maps, text and photographs to provide a rich desc ription of tourist sites. Both sites, detailed and generally accurate, describe a limited number of destinations because manual compilation of tourist information is costly. Automating the acquis ition of tourist information from  X  X ourist memory X  data in web-based user-supplied photographic collections, e.g. Flickr, is an appealing alternative to manual work. We describe how to (i) discover and characterize a large number of trips from Flickr metadata and recombine their elements to propose new trips, (ii) discover visit duration times at tourist sites by analyzing textual metadata and classifying images into interior/exterior views and (iii) find locations that offer panoramic views via binary image classification. We model trips as graphs where tourist sites ar e nodes (labeled with place names) and paths between these sites are edges. Rattenbury et al. [13] was an early attempt to discover both event and place names from Flickr geolocated textual metadata, resulting in an application [1] for geographic image retrieval, with representative and popular tags overlaid on a scalable map. Quack et al. [12] downloaded 200,000 georeferenced Flickr images from nine urban areas and clustered th em using local image descriptors to discover place names and events, linking some places to their Wikipedia articles. In contrast to [12], [3] and [8], we do not limit ourselves to geolocated photographs since many pictures of places do not have associated location information. For instance, there are less than 1000 Flickr photos geotagged in the Timi  X  oara but 31,000 images tagged with this city X  X  name. Elsewhere [10], we detailed methods for co mbining information from heterogeneous sources to extract place names, place coordinates, place types and popularity values. Here we exploit these same results but shift our focus towards discovering additional trip related information. Zheng et al. [14] recorded GPS tracks of 107 users during a year to determin e the interestingness of tourist sites. The authors of [5] also focus on mining similar traveling sequences from multiple users X  GPS logs while the authors of [9] retrieve maximum periodic pa tterns from spatio-temporal metadata. Girardin et al. [4] analyzed the tourist flows in the Province of Florence, Italy, based on a corpus of georeferenced Flickr photos and their results contribute to understanding how people travel. None of these approaches mines image content to produce knowledge about places, a mining process which is a central piece of our approach. Whereas [14] or [5] rely on accurate GPS traces for small scale regions and obtained from a relatively reduced number of users, we exploit noisy Flickr data but which covers most interesting tourist regions of the world. As a result, we are able to propose itineraries in any region of the world that is sufficiently covered by Flickr data. Visit duration is an important ch aracteristic of trips and it is classically estimated by domain experts [7]. The automatic extraction of visit duration fro m Flickr metadata was only recently explored [11] but no separation between sightseeing and sightseeing + interior visits wa s proposed. Building on this latter work, we use visual image classification to separate these two types of visits and to calculate typical visit times for each case. We collected textual metadata a nd images with Flickr X  X  public API. Since many Flickr tourism photographs are related to cities [6], we selected 183 regions or cities, both popular ( Paris, London, New York, Tokyo ) and less so ( Timi  X  oara or Bra  X  ov in Romania , Szeged in Hungary, Segovia in Spain). As of May 2009, we retrieved over 71 million metada ta associated with Flickr photos: all with titles, tags, time stam ps and user IDs, plus a small fraction with geotags. For each city, we sorted metadata to extract potential one day trips. We retain the set of pictures for a given user on a given day, if (i) there are N &gt;= 15 pictures in the picture set, (ii) the time stamp between the first image and the N th image is more than one hour, and (iii) the unique sort of the concatenated annotations of each of the N pictures yielded more than N /3 different textual annotations (in order to eliminat e bulk uploaded tags). With these three criteria we extract information from photo sessions which contain a variety of pictures over an extended period on a given day (the likely behavior of a tour ist), and which were individually tagged. At this stage, there remained 723303 photos taken during one day visits, with their tags a nd timestamps (1% of the original set). We downloaded these imag es and processed them on a 100 processors cluster using a texture-color descriptor [2] in order to be able to classify them further into interior/exterior images and panoramic views. To extract trips, we need to star t from list of interesting sites in each examined region. Since the reported extraction accuracy in research into extracting tourist sites from georeferenced collections (85% in [13], 90% in [10]) is not sufficient for our current purposes, we decided to use only Wikipedia to mine possible points of interest, assumi ng that many touristy interest points are already geolocated there. We processed Wikipedia dumps available in the 10 most frequent languages to increase coverage, using a list of geogr aphic patterns to select only geolocated articles and considered their titles to be place names. To associate types to these place names we built a multilingual vocabulary of geographic con cepts containing 158 terms and covering most types of landmarks likely to be found in urban areas. Place names were categorized using a similar procedure to the one in [10], matching geographic vocabulary concepts against article categories and against the first sentence in the article. Tourist site types are determined by performing a frequency count of matching elements in the article body, retaining the most frequent. For place names that app ear in several languages, we aggregate results from all language versions and retain the most frequent category. Results in [10] show this simple categorization procedure is precise. At this point, each place name is characterized by the triplet (name, GPS coordinates, type). The number of landmarks per region yields high values for major cities ( London , 3451; Paris , 3075; Tokyo, 600) and small values for other cities ( Segovia , 40; Timi  X  oara , 50). A trip is defined as a one day vi sit which includes one or several tourist sites. To find trips, we compare the list of place names extracted from Wikipedia to image sets associated with a region and retain only those sets that match at least a place name in that region. Following [11], we consider that a Flickr user was  X  X isiting X  a site if (i) the interv al between the earliest and latest timestamp is at least ten minutes inclusive, and (ii) there are at least 5 images manually tagged with that site name within that interval, and (iii) the interval between any two images is not longer than 20 minutes or 5 tim es the averag e time between photos tagged with the name (whichever smaller). These conditions mimic the activity of someone present at a site for while, taking a number of pictures later tagged with the site name (i.e.,  X  X isiting X  the tourist site), and actively taking pictures of tourist attractions during the visit. In figure 1, we present the distribution of the number of trips discovered for the 183 cities in the evaluation dataset. We grouped cities using 100 items intervals in order to have a succinct but informative representation. A majority of cities (112) has up to 100 associated trips whereas 10 cities have over 1000 associated trips (all in major cities and tourist destinations such as London (2578), New York (2412) or Paris (2213)). Some cities with a small number of associated trips: Timi  X  oara, Romania (11), Segovia, Spain (52) and Quimper, France (2) elicit a limitation of our work but also of existing work on user-supplied collections [3] or [8] which only present results for major cities. Flickr representation of smaller cities is likely to improve over time but it is currently rather limited. The number of tourist sites to which our algorithm associated visit times is smaller than 10 for 78 cities out of 183; is between 11 and 40 tourist for 81 cities and there are also 4 cities with over 100 tourist sites with associated vi sit times. Cities in the first case include Timi  X  oara (4 sites with associated visit times) or Quimper, France (1). Cities with the largest number of associated tourist sites are London (322), Paris (155), and Berlin (134). The number of trips and the number of tourist sites with associated visit times are usually well correlated. After this step, for each set of images taken during a one day visit, we know the sites visited and in which order. Since we also know the GPS coordinates of each site from Wikipedia, trips can be situated in space and used for guiding other users. Approximate paths followed between two cons ecutive visited sites can be produced from Flickr metadata using a sampling method. We calculate the paths associated to a trip by going through the GPS coordinates associated to images in a trip and retaining a new image whenever there is a diffe rence of at least 100 meters between this photo and the last retained photo. Beside spatial information, tempor al information is also central for describing trips. At H&amp;A, experts provide visit time estimations as intervals, w ith minimum estimations around 30 minutes or one hour and maximum going up to a full day. From time stamps associated to Flickr, we compute visit times by subtracting the time stamp of the first photo tagged with a place name from that of the last photo. We can estimate usual behavior, by averaging individual visit times, and compute average, maximum and minimum visit times and then add these visit durations to the tourist sites descriptions, a technique easily applicable to any touris t site found in Flickr. To evaluate our automatically extracted estimations against H&amp;A manual estimates, we retained 464 attractions from 25 cities. Given the high number of evaluated sites, we present the distributions of average results compared to the maximum estimations from H&amp;A, showing a high correlation of our automatically extracted visit times and H&amp;A values. When compared to maximum manual estimations, the highest concentration of automatically ex tracted visit times is around 0.4  X  0.5 of the manual estimations . This finding supports initial results in [11] showing that peopl e often tend to visit tourist sites more rapidly than expert estimations. Visit times are obtained by averaging durations for external sightseeing and sightseeing+in terior visits, performing interior/exterior image classi fication using a k-NN algorithm applied to texture-color image features [2] in order to separate the two types of visits. 1000 exterior and 1000 interior diversified images constitute our ground truth. An image can be classified as interior or exterior using a thre shold (smaller or equal to k=20). For a threshold value of 15, precision reaches 0.89 and recall 0.65, meaning that one image out of 10 is wrongly classified, when 2/3 of the images are classified. For a visit of a site to be considered as combined, at least three images have to be detected as interior. With this condition, the probability for a trip to be wrongly classified as sightseeing+ interior is very small. Visit times for the external si ghtseeing and sightseeing+interior visits were computed on 271 touris t sites which had at least two associated visits of each type and their distributions are presented in figures 2 and 3. Visit times associated to sightseeing tend to concentrate below the minimum manual estimation whereas times for interior visits are concentrat ed above the same estimation. As expected, interior visits are of ten longer than exterior visits.
Figure 2. Distribution of automa tically extracted visit times for sightseeing compared to H&amp;A minimum estimations. The separation of visits into interi or and exterior is interesting for determining how people visit a par ticular site. For instance, for museums, such as Mus X e d X  X rsay a majority of visits is interior (76 out of 107) whereas the same is true only for 37 visits out of 133 associated with Arc de Triomphe . A high proportion of interior visits indicates that the interior of a particular site was seen by many tourists and it is worth entering that attraction. Whereas human experts consider that each tourist enters, our results demonstrate when Flickr us ers limit themselves to external sightseeing. In section 4.1, we presented a method for associating types to tourist sites and arrange them in a hierarchical structure. This structure can be exploited to compute average visit times per type ( cathedral , palace or bridge ) and to propose estimations for other tourist sites of the same types wh ich do not have associated visit times. As a result, the coverage of our approach is improved and we can estimate visit times for any tourist site which is typed with one of the 158 types in the geographic vocabulary. 
Figure 3. Distribution of automa tically extracted visit times for interior visits compared to H&amp;A minimum estimations. The four trips presented in Figure 4 convey some interesting information about our trip extr action method. Their duration is variable, from under five hours (re d trip) to over 9 hours (yellow trip). Landmark visits cover only a fraction of the total visit times and transitions between sites (r ectangles on the timelines) might depend on activities not involving picture taking (transport). Figure 4. Four different trips (red, blue, green, yellow) in 
Paris overlaid on Google Maps and their timelines. Visited hotspots for each trip are presented in the order of visiting. On the timelines, transitions betw een tourist sites are depicted An automated system proposing feasible trips must include realistic pauses. For the red tr ip, there are only two significant transitions (30 min between Arc de Triomphe and Eiffel Tower and 86 min between Eiffel Tower and Tuileries ). The first three visited tourist sites ( Place de la Concorde , Champs Elys X es and Arc de Triomphe ) and the last two ( Tuileries and Louvre ) are adjacent and the tourist made no pause between them. From just these four plotted trips, we can see there is a high concentration of visited landmarks in Central Pari s. Tourist heat maps could be obtained by plotting all trips disc overed for a region. Visit times are highly variable: two visits of Mus X e d'Orsay (blue and yellow) correspond to long visits (nearly 5 and over 3 hours) seeing the art collection in this museum. In contrast, the interval tagged with Louvre in the red trip (20 min) corresponds to sightseeing. Likewise for Eglise Saint-S X verin (green trip, 15 min) and Abbey of St. Germain des Pr X s (blue trip, 12 min). Interior/exterior image classification allows us to separate the two types of visits and propose different duration estimations for each case. Visit order for the red trip illustra tes an interesting fact: tourists don X  X  necessarily take the shortest path between landmarks. A shorter trip would have started at the Louvre and finished at the Eiffel Tower . Some factors influencing visiting order such as personal preferences or opening hours must be taken into account by an automated trip advisor when proposing visits. Elements of known trips (sites a nd paths between them) can be recombined to create a large number of novel trips. Recombining trip elements could be especially useful if user preferences are known. Mining user preferences falls outside of the scope of this paper but represents a promising future research direction. Panoramic spots are of high inte rest for tourists. With the automated detection of panoramic spots, tourists can preview generic city views before going there. We performed binary image classification to identif y panoramic views by using 1000 varied panoramic Flickr im ages and 1000 Flickr images representing diversified scenes as an external class (outliers). Classification was performed using a kNN with k=10. Berlin Spree, Brandenburg Gate, Berlin Cathedral, London Tower Bridge, London Eye, South Bank, Tate Paris Arc de Triomphe, Eiffel Tower, Sacr X  Coeur, The simplest way to discover pa noramic points is to analyze linguistic patterns. Panoramic vi ews of taken from a particular landmark L are often annotated with the pattern  X ... from L X . We translated this pattern to French, Spanish, Italian and German and selected up to 200 images which matched the pattern for each object. However this analysis is unreliable because many photos annotated with this pattern are not panoramas, so text matching is complemented with image classification. We rank tourist sites offering panoramic views by c ounting the number of different users having uploaded panoramic views taken from a particular site. We illustrate results in tabl e 1, where we present the top 5 points in 3 cities. Categories of places offering panoramic views include: tall structures, constructions on elevated points, elevated points and bridges. Whereas we expected a large proportion of elevated points, we found surprisi ngly many sites near bodies of water. We presented a method for mining tourist information from a large scale user-supplied photographic collection, extracting a large number of trips for each location with associated spatial and temporal information, differen tiating sightseeing and sightseeing + interior visits and finding tour ist sites that offer panoramic views of surrounding regions. These trips can be used as such or recombined to generate new one s. We found that automatically extracted visit times differ from manual expert-based estimations in that they are often shorter. Also, many visits are limited to sightseeing, without people actually entering the sites. This process is fully automatic and easy to scale. Although Flickr currently under-represents smaller cities, the size of the collection increases over time and better covera ge is likely to be obtained in the future. We showed that it is possible to extrapolate information from sites which are well represented in Flickr to other tourist sites of the same ty pe and propose visit times for the latter. In the future we will focus on individual behavior to extract tourist preferences for proposing personalized trips. Personalization may refer to the type s of sites visited, to the trips length or to the visit rhythm. This research is part of Georama, a French research project funded by ANR. [1] Ahern, S., Naaman, M., Nair, R. and Yang, J. 2007. World [2] Cheng, Y.-C., Chen, S.-Y. Image classification using color, [3] Crandall, D., Backstrom, L., Huttenlocher, D., Kleinberg, J. [4] Girardin, F., Dal Fiore, F., Bl at, J., Ratti, C. Understanding [5] Gonotti, F., et al. Trajectory pattern mining. In Proc. of KDD [6] Grefenstette, G., Pitel, G. Image Specific Language Model: [7] Home&amp;Abroad  X  http://homeandabroad.com [8] Kennedy, L., Naaman, M. Generating diverse and [9] Mamoulis, N. et al. Mining, Indexing and Querying [10] Popescu, A., Grefenstette, G., Mo X llic, P.-A. Gazetiki: [11] Popescu, A., Grefenstette. Deducing Trip Related [12] Quack, T, Leibe, B., van Gool, L. World-Scale Mining of [13] Rattenbury, T., Good, N., Naaman, M. 2007. Towards [14] Zheng, I, Zhang, L., Xie, X., Ma, W.-Y. Mining Interesting 
