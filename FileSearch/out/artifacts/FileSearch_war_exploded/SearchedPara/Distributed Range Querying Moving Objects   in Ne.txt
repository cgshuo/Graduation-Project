 Moving objects(MO) data is a kind of important information for analysis, planning field situation by sharing moving objects data, it is possible to accomplish tasks such as effective alert action, battlefield environment protection and weapon unit precision joint operations ability and implementation of high efficient command[1,2]. Accumu-requirements for spatio-temporal index technology in collaborative, efficiency, agility and reliability have been put forward. 
Based on Peer-to-Peer computing (P2P) technology, this paper presented a distri-buted spatio-temporal index structure MOI (Moving Objects Index). Utilizing DHT to organize node topology structure, adapting Hilbert curve to map spatio-temporal ob-of routing messages has been greatly reduced and performance of spatio-temporal query has been improved, ensuring efficien t spatio-temporal information sharing in battlefield. Moving objects constantly change their position and shape with time passing by. This tected by various detection methods in the earth reference space, expressing the gra-dual changes over time of entity X  X  and process X  X  state of being (position, shape, size, etc.) and property. (such as R-trees) abstracts time-space objects in the battlefield into minimum bound-ing rectangle (MBR). The corresponding coordinates of MBR (i.e., two point coordi-nates in left bottom corner and right-top-corner) change with the position and shape of time-space object. 
Besides moving objects, other command unit exists in battlefield. With positioning technology, the position and shape of objects can be transmitted to these units. Mov-nearby to report to corresponding units, whereas the units can collect space informa-tion to local of the objects by contin uous reconnaissance and detection. command unit can be abstracted as network nodes (i.e., peer), each node gets physical connection through the ground link, the investigation data is position and shape changing over time rectangular data (i.e., MBR), in the distributed environment, it is each node maintains part of the global index, each node, through the mutual commu-object ID. Using consistent hash, Chord[3] maps resources to one dimensional space, which destroys the locality of resources. Namely resources nearby in the original space through mapping are no longer neighbors, which cannot meet the needs of queries in space range. So this paper maps the time-space information to one dimension infor-mation using Hilbert curve[4]. 3.1 Index Structure MOI is actually a kind of overlay network. Based on DHT technology, each node has a node identifier, and is responsible for part of key areas. Moving objects belonging to this key area through mapping, their spatio-temporal information is maintained by nodes responsible for. The detail description is as below: 1) This paper views the moving objects to be considered as extent objects, and present its space state with Minimal Bounding Rectangle (MBR). This paper uses MBR to represent moving objects X  space state below. This paper assumes the spatio-temporal information format of moving objects obtained by nodes as ( Oid , X min , X max , Y the coordinates of MBR, and t means MBR timestamp. space is divided into 2  X  X  cells of the same size. Through the construction of Hilbert curve, the mapping from the set P of all the points in the whole space to the set V of Hilbert value exists, among which  X  X   X   X   X , X   X   X  X  X , X 0 X  X   X  and V X   X  v|0 X  X  X  2  X  X   X 1,v X  X   X  . 3) This paper uses Chord as overlay network structure, with [0, 2  X   X 1 ] as its key space. We set m =2 D , namely ensure the consistency of key space and the set of Hil-bert value. 4) The sizes of corresponding MBR for every MO may be different. One MBR may overlap several cells while one cell may contain several MBR. According to the Hilbert curve,all points in each cell have un ique counterpart Hilb ert value, which can be regarded as each cell has an unique corresponding Hilbert value, so that any one of property of the Hilbert curve, in these Hilbert values, some may be continuous, which This paper calls one dimension region for segments. 5) Each segment has a starting value and an end value, and according to the Chord X  X  position in key space, MBR will be stored to the corresponding node, and the specific process will be described in section 3.2. According to its different size, each MBR can be stored to one or more nodes, which ensures the spatio-temporal query rate. Each node establish HR-trees[5] inde x in local according to the spatio-temporal information ( X min , X max , Y min , Y max , t ) of stored MBR. the figure) respectively at t =10, t =20 and t =40 (namely MBR). Adopting 3 order Hil-bert curve, the whole space is divided into 64 cells and numbered according to Hilbert curve. Figure 2(b) shows the distribution of MO in the MOI index. If the segments of O through mapping are [43,45],[39,40] and 34 respectively (figure 2 (a) distinguish different segment with different shadow pa tterns), according to the segment value and Chord resource placement strategy, referring data maintenance algorithm for detail, index locally, figure 2(b) samples the HR-tree index of node N 21 and Finger Table of node N 8 . 3.2 Spatio-temporal Query Algorithm Two types of spatio-temporal queries are discussed: time point query and time inter-Q Q
Spatio-temporal query algorithm described as below: 1) In accordance with Hilbert curve mapping rules that any coordinate in each cell maps for the cell number Hilbert curve running through, the space range ( Q xmin , Q xmax , Q ymin , Q ymax ) can be converted to a series of segments, one of which is a continuous to key X  X  successor node S; 3) When receiving spatio-temporal query request, node S carries on the judgment: if node R, the predecessor node of node S, had identifier value equal to or greater than the value of the received segment, the query request would be forward to node R; 4) Using of local HR-tree, node S conducts time point queries or time interval que-ries, then routes the result to node P. value of each segment) and node R (predecessor node meet the space overlapping con-ditions through judgment by the equivalent node of node S) will go to step 3) and 4). 
The example of spatio-temporal query algorithm is shown in figure 3. According to searches through time point queries or time interval queries in the local HR-tree and consequently returns the result to the original inquiring node. 4.1 Construction In the battlefield, when a new command unit added, namely supposing that node Q joins the network, implement steps as follows: 1) Node Q accesses to node identifier through connecting to match-making server and other ways. Node Q then arbitrarily connects a node M, sending node identifier. On the basis of Chord routing rules, namely the find_successor() function in [3], node M forward the message. The join request of node Q is routed to the successor node N of the key where node Q X  X  identifier is. 2) Node N and node Q are respectively responsible for updating the key space themselves (in agreement with chord protocol X  X  node adding algorithm).According to MO in the scope of node Q to node Q, by the way updating local HR-tree index. 3) Node Q receives the MO, and sets up the local HR-tree index. 4.2 Maintenance Index maintenance is that when a node leaving or failing and data on node changing, relevant nodes need to update the index, this kind of situation on the battlefield envi-ronment often occur. Leaving and Failing of Node Node leaving is that before exiting system, the node will inform its successor node or predecessor node that  X  X  will leave system X , while node failing is that because of the network connection instability or hardware failure, the line between nodes breaks, the successor node or predecessor node do not know its exiting. Although in the two situ-ations, node leaves system in different ways, the steps it takes are similar. The specif-ic process is as below: 1) Node L sends "I will leave system" message and local MO to the successor node K, node K updating local HR -trees, followed by the exiting of node L; 2) The predecessor node of node J keeps detecting the state of node L, once fo und node L leaving the system, according to its own successor list (the same with Chord), it would contact node K and save node K as successor node; 3) Node K saves node J for predecessor node, meanwhile, the index update com-pletes. For node failure, we adopt Heartbeat mechanism that periodically tests successor nodes and predecessor node X  X  state, to assess whether there is a node failure, and then, take steps 2)~3), completing index update. Data Change In the battlefield, position and shape of all kinds of MO change continuously as time corresponding to the system operations including update, insert and delete. These follows: 1) Based on Hilbert mapping rules, the space range of object O ( X min , X max , Y min , Y max ) is transformed into a series of segments ( H enter , H exit ); 2) For each segment, according to Chord routing rules, node I routes object O and this segment to key H exit  X  X  successor node G; 3) After receiving object insertion request, n ode G start to assess: if identifier value received segment, forward this request to node H; 4) Using HR-tree insertion algorithm, node G maintains the spatio-temporal data and returns the result of successful insertion operation to node I. All nodes equal to node G (successor node corresponding to each segment X  X  H exit value) and node H (predecessor node in accordance with space overlap condition judged by the equivalent node of node G) take steps 3)~4). 
Both delete and update operations of MO are similar to insert operation, the differ-update algorithm. Due to hardly space, no more statements is listed here. source simulation platform PeerSim[6] to conduct the simulation experiment. All experiments are carried out on computers with Intel Core2 Quad 2.5 GHz and 2 GB main memory. We set the whole space to be considered as 1 X 1 unit rectangular, and set the length of time as 1 unit time region; Owing to the side length of the rectangle Hilbert curve for default. 5.1 Data Set Description In order to simulate the battle space objects, we implement the GSTD[7] spatio-temporal data generation method, which is widely used in spatio-temporal index ex-state data (hereinafter referred as data set A) and real data as base state data (hereinaf-ter referred as data set B). data which follows  X  0,0.1  X  uniform distribution; time sampling point numbers for (0.2, 0.2) uniform distribution and the variation of side length (  X  extent) follows (0.05, 0.05) uniform distribution. With time goes on, the overall change of data is that they spread from the center to all around. 
In data set B, we adopt TIGER X [8] data set as the ground state data. The detailed generate process is: choose all the ways in Maryland Montgomery county of TIGER  X  data set, with each road composed by lim ited lines. According to the starting point and end point of the line segment, rectangular is generated, which is provided for ground state data. Time sampling point numbers for 100, and follows uniform tion, the side length variation (  X  extent) follows (-0.05, 0.05) uniform distribution. As time goes on, the overall change of data is that they gradually move to northeast of the space. 5.2 Query Performance Evaluation We evaluate the query performance by the number of messages when querying. Mes-randomly generate 300 queries and take the average number of messages as the eval-uation result. Compare MOI with Distributed Quadtree[9], P2P Meta-index [10], and Service Zone[11], we conduct the query performance comparison. The size of mes-only take the result for data set A. rises from 250 to 10000. And then, count the corresponding average message number. As shown in figure 4(a), the result of the experiment reveals that with the increase of thod adopted by this paper using Hilbert curve with local preservation property, which maps the query into continuous one dimensional queries. And the query algorithm proposed by this paper considers checking the predecessor node whether it intersects optimizes the query performance. 
Set the number of node as 2000. The query space selection rate changes from 0.001 to 0.07. And then, count the corresponding average message number. As shown in selection rate, the Service Zone methods and Distributed Quadtree method very rapid change in the number of messages, which is lower than the P2P Meta-index method. This is because the Service Zone method uses CAN X  X [12] thought to divide the space binary tree, finding low efficiency. Distributed Quadtree method uses consistent hash, where query is decomposed into a large number of one-dimensional intervals, increas-ing traffic, resulting in query performance degradation. P2P Meta-index method with overhead. 5.3 The Evaluation of Index Maintenance Cost similar to DHT, so no more narrative hare. In this section, the experimental evaluation work size. The space default selection rate is 0.01, where spatial selectivity refers to the size of the insertion of the MBR, the results shown in Figure 5.With the increase in the number of nodes, for two different sets of data, the cost of maintaining indexes showed a logarithmic growth. It illustrates that the index maintenance performance of MOI is able to adapt to the changes in the size of network. In future digital battlefield, the effective index of the temporal and spatial objects will greatly help to improve the battlefield space-time query performance, which is of this article proposes distributed spatio-temporal indexing mechanism MOI. Make use of Hilbert curve combined the Chord to design spatio-temporal query algorithms, indexing and maintenance algorithm. We test query performance on two different sets of data, cost of the maintenance. The experimental results show that the local Hilbert meanwhile the index maintenance performance is acceptable, so as to provide real-battlefield with technical support. Acknowledgement. This work is supported by the project of National Science Foun-dation of China (No.71103203). 
