 Understanding how people use public transport is impor-tant for the operation and future planning of the underlying transport networks. We have therefore developed and de-ployed a tra c measurement system for a key player in the transportation industry to gain insights into crowd behavior for planning purposes. The system has been in operation for several months and reports, at hourly intervals, (1) the crowdedness of subway stations, (2) the flows of people in-side interchange stations, and (3) the expected travel time for each possible route in the subway network of Singapore. The core of our system is an e cient algorithm which detects individual subway trips from anonymized real-time data gen-erated by the location based system of Singtel, the country X  X  largest telecommunications company. To assess the accuracy of our system, we engaged an independent market research company to conduct a field study X  X  manual count of the number of passengers boarding and disembarking at a se-lected station on three separate days. A strong correlation between the calculations of our algorithm and the manual counts was found. One of our key findings is that travel-ers do not always choose the route with the shortest travel time in the subway network of Singapore. We have there-fore also been developing a mobile app which allows users to plan their trips based on the average travel time between stations.
 H.4.m [ Information Systems Applications ]: Miscella-neous Monitoring system; public transport; cellular networks; call detail records (CDRs)
Singapore X  X  public transport system is among the world X  X  most e cient ones in terms of the density of the network, crowdedness and travel times [19, 20]. Its core component is the Mass Rapid Transit (MRT), a railway system spanning the entire city-state, which has been in operation since 1987. E ciency metrics such as the crowdedness of stations and travel times between stations are instrumental to decision making for operators in ensuring quality of service. Cur-rently, available technical solutions to estimate the crowd-edness of stations include:
Cell phone location data are capable of addressing the in-formation gaps in the approaches above. In fact, cell phone location data have been used to various degrees to detect individual trips and categorize them into classes such as walking, cycling, public transport and driving a car. Early studies were based on cell phone fluctuations in GSM signal strength [21, 8] or location feeds picked up by in-build GPS receivers [15, 22]. However, these methods are limited by their sample size and face di culty scaling up. Approaches that do scale up make use of cell phone call detail records (CDRs), which are recorded by telcos for billing purposes and include the location of calls and SMS, to spot trips of all cell phone subscribers in a mobile network [17, 9, 10, 13, 14, 23, 11].

In this article, we present a tra c measurement system we have developed and deployed a for a key player in the transportation industry to gain insights into crowd behav-ior for planning purposes. The system reports, at hourly intervals, 1. the number of people on the platforms of subway sta-2. the flows of people transferring between lines inside 3. the expected travel time for each possible route in the The core of our tra c measurement system is an e cient algorithm which detects individual subway trips from anony-mized real-time data generated by the location based system of Singtel, Singapore X  X  largest telecommunications company (telco) with a market share of 47 % [4].
Singtel recognizes that privacy is important to its cus-tomers and has implemented security measures to protect their personal data in compliance with the Singapore X  X  Per-sonal Data Protection Act (PDPA) [7]. All processing of mobile customer data for our analysis is conducted in com-pliance with the PDPA and within the scope of consent obtained from Singtel mobile customers, as set out in the Singtel Data Protection Policy [6]. All references to location data in this article refers to location data in the anonymized state as illustrated below.

For our analysis, we use the anonymized location data of 3.98 million prepaid and postpaid mobile customers of Singtel [4]. Singtel X  X  Location Based Services System (LBS) records the cell tower a cell phone is connected to in case of Unlike location datasets based on call detail records (CDRs), Singtel X  X  LBS also captures passive network events, which account for about 80 % of all recorded locations. The loca-tion data is updated in real-time as network events occur and on average, the LBS system records 60 network events per user and day. The location data being analyzed con-sists of an anonymized ID, latitude, longitude, timestamp and service type. The original unique ID allocated to each mobile customer is anonymized via a two-step non-reversible AES Encryption and Hashing process which makes it impos-sible to trace back to the original unique ID or the mobile customer. The location data does not contain any person-ally identifiable information of the mobile customer or any content of calls or SMSes. Figure 1: Population in Singapore X  X  33 residential districts according to the 2010 census versus the population of Singtel customers. With a correlation coe cient of 0.94, the two distributions are highly linearly correlated.

To demonstrate that Singtel X  X  location data is represen-tative of the population in Singapore, we compared the dis-tribution of residences of Singtel X  X  customers with o cial census data [12]. Singapore is divided into 55 administra-tive districts, 33 of which are residential [2]. We determined the population of Singtel customers in the 33 residential dis-tricts and compared our results with 2010 census data [1]. With a correlation coe cient of 0.94, the two distributions are highly linearly correlated (see Figure 1) [14].
The core of our tra c measurement system is an algo-rithm which detects indoor MRT trips from cell phone data recorded by the location based system of Singtel. In 2015, the MRT system consists of 92 stations, which are connected by five train lines. The stations situated in densely popu-lated, central locations (58 of the 92 stations) are indoors. The platforms and tunnels of these indoor stations are served exclusively by indoor cell towers X  X ell phones outside the MRT network cannot connect to these dedicated cell towers (see Figure 2). Our algorithm recovers individual MRT trips from cell phone location data by making use of this clear dis-tinction between cell towers which exclusively serve indoor stations and all other cell towers in the Singtel network.
We define an MRT trip as the sequence of indoor stations s =[ s 1 ,...s n ] a passenger  X  passes during their ride and the corresponding timestamps t =[ t 1 ,...t n ] when each of these stations is reached. s 1 is the boarding station, s station of disembarkation and s 2 ,...s n 1 stations  X  passes during their ride.

Our MRT trip detection algorithm is based on a function that is called for every new LBS location x i of any cell phone subscriber  X  . Apart from active network events, a cell phone moving on a train will produce LBS location updates every Indoor cell A Indoor cell C Tunnel Figure 2: Dedicated indoor cell towers serve the platforms (A and C) and tunnels (B and D) of in-door MRT stations exclusively. three stations on average. Moreover, there will be a peri-odic location update every hour for every cell phone. Let x i 1 denote the LBS location of  X  preceding x i . Then, the following four cases can occur: Table 1: Parameters of the MRT trip detection al-gorithm. Figure 3 illustrates the trip detection algorithm. The algo-rithm parameters as well as values we choose are summarized in Table 1.
To assess the accuracy of our system, we engaged an inde-pendent market research company to conduct a field study at Orchard MRT station, a popular shopping destination in Singapore. The number of passengers boarding and dis-embarking was counted manually at the entry gates of the station on three days (Monday, Friday and Saturday) and aggregated in hourly intervals. We determined the num-ber of Singtel subscribers departing and arriving at Orchard (a) The first location x 1 is recorded outside the MRT network at time t 1 , and the second one x 2 is inside the MRT station C at time t 2 . Now, the boarding station is identified. The station closest to x 1 is A . Let us sup-pose that the time di  X  erence between t 2 and t 1 is ac-ceptable, i.e. t 2 t 1 &lt; t timeout . As the distance be-tween x 1 and A is less than the threshold value d ,we assume that the boarding station is A .  X  d (c) The fourth location x 4 is recorded outside the MRT network, which means that the trip has ended some time between t 3 and t 4 . The distance between x 4 to the closest station G exceeds the threshold value d , which is why we assume that the disembarking station is the last observed station F . Figure 4: Validation of footfall at Orchard MRT. The solid lines represent the extrapolated number of boarding and disembarking passengers determined from Singtel location data, whereas the dashed lines show manual counts. There is a very good corre-spondence, with an average hourly discrepancy of 9.5 % .
 MRT station during the same three days on an hourly basis using our MRT trip detection algorithm and market extrap-olated these numbers with the scaling factor A , which takes into account both Singtel X  X  market share in Singapore as well as the mobile device penetration rate in Singapore: With an average hourly discrepancy of 9.5 %, there is a very good correspondence between the manual counts and the detected number of Singtel subscribers departing and arriv-ing at Orchard MRT station. Figure 4 shows a comparison of data from the manual count against data from Singtel X  X  LBS.
The tra c measurement system was deployed to a key player in the transportation industry in exploration of new applications that can improve the MRT operation e ciency and enhance the traveling experience of commuters. Exam-ples include better planning of free bus bridging services in the event of MRT train disruptions, simulations for infras-tructure planning such as the building of new MRT stations and the shaping of new policies which incentivize o  X  -peak traveling. We have implemented the system in the Python programming language and have been detecting MRT trips from Singtel location data over the course of several months. The trip extraction module starts its execution daily at 2am after all passengers have disembarked and the MRT system has closed. The recovered trips are then stored in a database, which can be queried for the following (market extrapolated) e ciency metrics of the MRT system: 1. the crowdedness of subway stations, Figure 7: Architecture of the tra c measurement system. The trip extraction module starts its exe-cution daily at 2am. The recovered trips are stored in a database, which can be queried for MRT e -ciency metrics from a dashboard as well as a mobile app. 2. the flows of people transferring between lines inside 3. the expected travel time for each possible route in the These metrics are reported by a dashboard, which is con-nected to the trip database (see Figure 5). Users can select the time window as well as the MRT stations they want to inspect. One of our key findings is that travelers do not al-ways choose the route with the shortest travel time in the subway network of Singapore. We have therefore also been developing a mobile app that allows users to plan their trips based on the average travel time between stations as well as the crowdedness of stations (see Figure 6). The app has not yet been released and has not influenced route choices of travelers in our analysis. The overall architecture of the tra c measurement system is illustrated in Figure 7.
The crowdedness of a station, which we also refer to as platform footfall, is the number of of passengers boarding, disembarking or transferring at that station in a given time window X  X etermined from our database by grouping trips according to stations and times Figure 8 shows and inter-prets the hourly footfall of three selected MRT stations (one located in the Central Business District, one in a residential area, as well as the largest interchange station) on a typi-cal Monday. The station in the CBD is a major destination of trips in the morning and origin of trips in the evening, whereas the opposite is true for the station in the residen-tial area. More than 50 % of the people at the interchange station change between lines.
The trip database allows us to zoom into any interchange station and analyze the flows of people transferring between the di  X  erent lines. This is particularly helpful for the oper-ation of escalators (e.g. in which direction should escalators run at which time), or for setting up barriers to help re-duce congestion inside the station. Figure 9 shows the flows of people transferring between three lines at Dhoby Ghaut people on trains between stations (colored lines). (a) Users can select the origin and destination of their trip. influenced route choices of travelers in our analysis. (a) Ra  X  es Place is located in the Central Business Dis-trict. It is a major destination of trips in the morning and origin of trips in the evening. (b) Connecting three train lines, Dhoby Ghaut is the largest interchange station in Singapore. More than 50 % of the platform footfall are passengers transferring between lines. (c) Serangoon is a transit station situated in a residen-tial area, which is also a popular destination for shop-ping and eating.
 Figure 8: Extrapolated hourly platform footfall (broken down into boarding, disembarking and tran-sit) on a typical Monday.
 Figure 9: Flows of people transferring at Dhoby Ghaut, the largest interchange station in Singapore, in the morning of a typical working day. NS24 rep-resents the platform of the North-South Line, CC1 the platform of the Circle Line and NE6 the plat-form of the North-East Line. During the morning peak hours, the majority of people transfer from the North-East to the North-South Line.
 MRT, the largest interchange station in Singapore, in the morning of a typical working day.
Due to the high density of stations and lines in Singa-pore X  X  core, there can be plenty of route alternatives which passengers can choose from. Sometimes, the shortest dis-tance may also not be the quickest route due to congestion. As such, the most time e cient route between two MRT stations may be di cult to determine for commuters. With the implementation of the trip database, we are able to de-termine the popularity of routes between stations (i.e. the number of people taking any route between two given sta-tions), as well as the average travel time per route. Figure 10 visualizes the five route options between Kovan, a residen-tial area, and Bugis, an area for dining and going out. Only 23 % of all passengers traveling from Kovan to Bugis take the shortest route via Dhoby Ghaut and City Hall, which has an average travel time of 29 minutes. With 48 %, the majority transfers at Chinatown, a route that takes 36 minutes. The route suggested by Google Maps is via Outram Park and is the third most popular alternative among passengers (20 %), with an average travel time of 36 minutes.
Understanding how people use public transport is impor-tant for the operation and future planning of the underlying transport networks. We have therefore developed and de-ployed a tra c measurement system for a key player in the transportation industry to gain insights into crowd behavior for planning purposes. The system has been in operation for several months and reports, at hourly intervals, minutes. 1. the number of people on the platforms of subway sta-2. the flows of people transferring between lines inside 3. the expected travel time for each possible route in the The core of our system is an e cient algorithm which detects individual subway trips from anonymized real-time data gen-erated by the location based system of Singtel, the country X  X  largest telecommunications company. To assess the accuracy of our system, we engaged an independent market research company to conduct a field study X  X  manual count of the number of passengers boarding and disembarking at a se-lected station on three separate days. A strong correlation between the calculations of our algorithm and the manual counts was found. One of our key findings is that travelers do not always choose the route with the shortest travel time in the subway network of Singapore. We have therefore also been developing a mobile app which allows users to plan their trips based on the average travel time between sta-tions. The tra c measurement system is currently limited to the detection of indoor MRT trips and we are extending our algorithm to detect outdoor trips as well. [1] Singapore census of population 2010. Technical report, [2] Administrative divisions of Singapore. [3] EZ-Link Card. [4] SingTel Business Review. [5] Roll-out of free WiFi at 32 MRT stations to be [6] Singtel X  X  data protection policy. http: [7] Personal Data Protection Act. [8] I. Anderson and H. Muller. Exploring GSM data in [9] N. Caceres, J. Wideberg, and F. Benitez. Deriving [10] F. Calabrese, G. Di Lorenzo, L. Liu, and C. Ratti. [11] M. Dash, K. Koo, J. Decraene, G. Yap, [12] M. Dash, H. L. Nguyen, C. Hong, G. E. Yap, M. N. [13] V. Frias-Martinez, C. Soguero, and E. Frias-Martinez. [14] T. Holleczek, L. Yu, J. Lee, O. Senn, C. Ratti, and [15] L. Liao, D. Patterson, D. Fox, and H. Kautz. Learning [16] B. Ozer and M. Wolf. A train station surveillance [17] C. Pan, J. Lu, S. Di, and B. Ran. Cellular-based [18] L. Schauer, M. Werner, and P. Marcus. Estimating [19] V. Shah and M. Manibo. Cities with e cient public [20] R. Sim. Study: Singapore X  X  public transport system [21] T. Sohn, A. Varshavsky, A. LaMarca, M. Chen, [22] L. Stenneth, O. Wolfson, P. Yu, and B. Xu.
 [23] W. Wu, Y. Wang, J. Gomes, D. T. Anh, S. Antonatos,
