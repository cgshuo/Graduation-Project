 Wi th the ad v e n t o fm o b il ea n dub i qu i t o us c o mput in g , pr o cess in gc on t in u o us spat io-temp o ra l quer i es ov er m ovin g o b j ects has bec o me a n ecess i t y f o rma ny ap -p li cat ion s , such as traffic c on tr ol s y stems , ge o graph i ca lin f o rmat ion s y stems , a n d lo cat ion-a w are ad v ert i seme n t . O n et y pe o fspat io-temp o ra l quer i es i sthe con-tinuous K-nearest neighbor query (o rC K NN quer y f o rsh o rt ) that finds among all moving objects the K-nearest neighbors ( KNNs ) of a moving query object at each timestamp .An e x amp l e o faC K NN quer yi s  X  fi n d in gt wo n earest cabs o fa pedestr i a n based on h i s / her curre n tm ovin g speed a n dd i rect ion. X 
Ear ly meth o ds [1, 2 ,3] pr o p o sed t o effic i e n t ly pr o cess such a C K NN quer y f o-cus e x c l us iv e ly on Euc li dea n spaces ,w h i ch are in app li cab l et o r o ad n et wo rks . Rece n t ly, se v era l stud i es [ 4 ,5,6, 7 ] ha v e inv est i gated h ow t o search the K NN s in r o ad n et wo rks .T hese tech ni ques are des i g n ed t o dea lwi th C K NN quer i es ov er stat i c o b j ects .Mo urat i d i seta l. [ 8 ] first address the i ssue o fc on t in u o us m on-i t o r in g K NN s on m ovin g o b j ects .T he y ch oo se t o re -e v a l uate s n apsh o t K NN quer y at th o se t i me in sta n ts at w h i ch updates o ccur .How e v er , due t o the n a -ture o fd i screte lo cat ion updates , the K NN s wi th in t wo c on secut iv e updates are u n k nown.

In th i spaper ,o ur e ffo rts on pr o cess in gsuchaC K NN quer y are de vo ted t o ov erc o m in gthe li m i tat ion s o f the pre vio us wo rks me n t ion ed ab ov e .T hat i s ,w e inv est i gate the C K NN pr o b l em u n der the f ollowin gthreec on d i t ion s :(1)All o b j ects (in c l ud in gthequer yo b j ect ) m ov ec on t in u o us ly in ar o ad n et wo rk .( 2 ) T he d i sta n ce bet w ee n t wo o b j ects i sdefi n ed as the d i sta n ce a lon gthesh o rtest path bet w ee n them in the n et wo rk .(3)T he K NN sset o fthequer yo b j ect at each t i mestamp sh o u l dbec o mp l ete ly determ in ed .L et us c on s i der a n e x amp l e in Fi gure 1, w here a set o f o b j ects o 1 t o o 5 a n daquer yo b j ect q m ov e in a r o ad n et wo rk w h i ch i sreprese n ted as a graph c on s i st in g o f no des a n dedges .In th i se x amp l e , each o b j ect m ov es stead ily t ow ards the d i rect ion in d i cated b y the c o rresp on d in garr ow. A ssume that the m ovin gquer yo b j ect q w a n ts t o k now wi th in a certa in per io d o ft i me the n earest n e i ghb o r on i ts r o ute (i. e ., aC 1NN [ t the 1NN o f q wi th in the t i me in ter v a l[ t a ,t b ].

To effic i e n t ly pr o cess C K NN quer yov er m ovin g o b j ects in r o ad n et wo rks ,w e first address the pr o b l em o fh ow t o s i g ni fica n t ly reduce the ov erhead o freprese n t -in gthe n et wo rk d i sta n ce bet w ee n m ovin g o b j ects at each t i mestamp .Al th o ugh the n et wo rk d i sta n ce ca n be c o mputed based on the Dij kstra  X  sa l g o r i thm [9] o rthe A *a l g o r i thm [10] that ha v ebee n sh own t o be s i mp l ea n deffic i e n tf o r c o mput in gthe n et wo rk d i sta n ce bet w ee n stat ion ar yo b j ects , rec o mput in gthe n et wo rk d i sta n ce w he n e v er o b j ects cha n ge lo cat ion s wo u l d in cur e x treme ly h i gh c o mputat ion a l c o st w h i ch makes the i dea in feas i b l e , espec i a lly f o rm o b il ee n-vi r on me n ts in w h i ch o b j ects m ov ec on t in u o us ly. In o rder t o great ly reduce the rec o mputat ion c o st ,w edes i g n atech ni que us in gthe in f o rmat ion ab o ut the re l-at iv e speed o fm ovin g o b j ects a n dthesh o rtest path bet w ee nn et wo rk no des . By e x p loi t in gth i stech ni que , the n et wo rk d i sta n ce bet w ee n t wo o b j ects at each t i mestamp i ss i mp ly represe n ted as a lin ear fu n ct ion o ft i me , a n dthusca n be eas ily c o mputed .Ano ther ma jo rpr o b l em w e n eed t o tack l e i st o a voi d repet -i t iv e ly pr o cess in gs n apsh o t K NN quer i es at each t i mestamp .L et us c on s i der aga in the e x amp l e in Fi gure 1, w here o b j ect o 3 rep l aces o 1 t o be the 1NN at t 2 a n d i srep l aced b y o 4 at t 3 .W etermtheset i me p oin ts at w h i ch the K NN sset cha n ges fr o m on et o a no ther ( e . g ., t 2 a n d t 3 ) the KNNs-changing time points . An i mp o rta n t character i st i c o fC K NN quer yi s that the K NN s in bet w ee n t wo c on secut iv e K NN s -cha n g in gt i me p oin ts rema in the same .B ased on th i scharac -ter i st i c , the pr o b l em o fperf o rm in g repet i t iv equer i es ca n be great ly reduced t o fi n d in gthe K NN s -cha n g in gt i me p oin ts a n dthe i rc o rresp on d in g K NN s .In th i s paper ,w edes i g n aC K NN meth o dc o mb in ed wi th the pr o p o sed d i sta n ce m o de l t o determ in ethe K NN s -cha n g in gt i me p oin ts wi th c o rresp on d in g K NN s .
T he ma jo rc on tr i but ion s o fth i s paper are summar i zed as f ollow s .  X  Our wo rk remed i es the ma jo rdra w backs o f the past re l ated wo rk a n dpr o- X  A tech ni que i sdes i g n ed f o rreprese n t in gthe n et wo rk d i sta n ce bet w ee n each  X  W epr o p o se a ma in-mem o r y a l g o r i thm ,n ame ly the Continuous KNN  X  A c o mprehe n s iv eset o fe x per i me n ts i sc on ducted .T he perf o rma n ce resu l ts T he rema in der o f the paper i s o rga ni zed as f ollow s .W ere vi e w the re l ated wo rk f o rs n apsh o ta n dc on t in u o us K NN quer i es in r o ad n et wo rks in S ect ion 2 . S ect ion 3 descr i bes the data structures used f o rreprese n t in gr o ad n et wo rks .In S ect ion 4 ,w eprese n th ow t o effic i e n t ly ca l cu l ate the n et wo rk d i sta n ce as a pre -li m in ar y t o the pr o p o sed C K NN a l g o r i thm .T he C K NN a l g o r i thm i sprese n ted in S ect ion 5. S ect ion 6 sh ow se x te n s iv ee x per i me n ts on the perf o rma n ce o f o ur meth o d .InS ect ion 7 ,w ec on c l ude the paper wi th d i rect ion s on future wo rk . P r o cess in g K NN quer i es in r o ad n et wo rks i sa n emerg in g research t o p i c in re -ce n t y ears .In th i s sect ion, w efirst ov er vi e w the e xi st in gmeth o ds f o rpr o cess in g s n apsh o t K NN quer i es , a n dthe n d i scuss the re l ated wo rk that inv est i gates h ow t o a n s w er c on t in u o us K NN quer i es . 2.1 Methods for Snapshot K NN Queries N umer o us a l g o r i thms ha v ebee n pr o p o sed f o reffic i e n tpr o cess in g o fs n apsh o t K NN quer i es ov er stat i c o b j ects in r o ad n et wo rks .J e n se n et al. [5] pr o p o se a data m o de l a n dadefi ni t ion o fabstractfu n ct ion a li t y requ i red f o r K NN quer i es in spat i a ln et wo rk databases .To c o mpute n et wo rk d i sta n ces , the y ad o pt the Di-j kstra  X  sa l g o r i thm f o r onlin ee v a l uat ion o fthesh o rtest path .P apad i as et al. [ 7 ] descr i be a frame wo rk that in tegrates n et wo rk a n dEuc li dea nin f o rmat ion, a n d a n s w ers s n apsh o t K NN quer i es .T he y pr o p o se incremental Euclidean restriction (I ER ) t o first pr o cess a quer yin the Euc li dea n space s o as t oo bta in the resu l ts as the ca n d i dates , a n dthe n c o mpute n et wo rk d i sta n ces o ftheseca n d i dates f o rthe actua l resu l ts .In add i t ion, the y prese n ta n a l ter n at iv e appr o ach incremental net-work expansion (IN E ), w h i ch i sbased on ge n erat in g a search reg ion that e x pa n ds fr o mthequer y p oin t .Kol ahd o uza n et al. [11] pr o p o se a s ol ut ion-based appr o ach f o r K NN quer i es in spat i a ln et wo rks .T he i r appr o ach , ca ll ed VN 3 , preca l cu l ates the n et wo rk Vo r onoi p oly g on s (NVP s ) a n ds o me n et wo rk d i sta n ces , a n dthe n pr o cesses the K NN quer i es based on the pr o pert i es o fthe N et wo rk Vo r onoi d i a -grams .In summar y, the ab ov emeth o ds pr o p o sed f o rpr o cess in gs n apsh o t K NN quer i es in r o ad n et wo rks are app li cab l et o stat i c o b j ects . O n ce o b j ects m ov e c on t in u o us ly, the K NN resu l t wo u l dcha n ge ov er t i me .A saresu l t , the ab ov e meth o ds must be repeated ly e v a l uated a n dthusthe i rperf o rma n ce s i g ni fica n t ly degrades because o ftheh i gh re -e v a l uat ion c o st . 2.2 Methods for Continuous K NN Queries Rece n t ly, effic i e n tpr o cess in g o fC K NN quer i es in r o ad n et wo rks has a l s o bee n stud i ed .Kol ahd o uza n et al. [6] pr o p o se a s ol ut ion, ca ll ed upper bound algorithm (UBA), that only perf o rms s n apsh o t K NN quer i es at the lo cat ion s w here the y are requ i red , a n dhe n ce pr ovi des better perf o rma n ce b y reduc in gthe n umbe o f K NN e v a l uat ion s . Ch o et al. [ 4 ] de v e lo pa unique continuous search algorithm (UNI CO NS) t oi mpr ov ethesearchperf o rma n ce f o rC K NN quer i es . UNI CO NS first d ivi des the path o fthequer yo b j ect in t o subpaths b y the in tersect ion s , a n d the n the s n apsh o t K NN quer i es are perf o rmed at t wo e n dp oin ts o f each subpath . Fin a lly, the K NN sf o r each subpath ca n be f o u n dfr o mtheu nion o fthe K NN sets at i ts t wo e n dp oin ts a n dthe o b j ects a lon g i t .T he UBA a n d UNI CO NS meth o ds are adequate ly des i g n ed t o dea lwi th C K NN quer i es ov er stat i c o b j ects ( that i s ,only the quer yo b j ect m ov es c on t in u o us ly). W he no b j ects  X  X o cat ion scha n ge ov er t i me in stead o fbe in gfi x ed , the perf o rma n ce o fthesetech ni ques wo u l dbe s i g ni fica n t ly degraded .Mo urat i d i s et al. [ 8 ] first address the i ssue o fc on t in u o us m oni t o r in g K NN s on m ovin g o b j ects .T he y pr o p o se a nin creme n ta l m oni t o r in g a l g o r i thm (IMA) t o re -e v a l uate quer y at th o se t i me in sta n ts at w h i ch updates o ccur .A teache v a l uat ion t i me , the quer y ma y get be n efit fr o m the pre vio us resu l t o fthe l ast e v a l uat ion s o that the ov erhead in curred b y pr o cess in g repet i t iv e quer i es ca n be reduced .How e v er , due t o the n ature o fd i screte lo cat ion updates , the K NN s o fthequer yo b j ect wi th in t wo c on secut iv e updates are u n k nown. A s such ,IMAwo u l dretur nin c o rrect resu l ts as lon gastheree xi st s o me t i me p oin ts wi th in t wo c on secut iv e updates at w h i ch the K NN ssetcha n ges .In th i spaper ,o ur e ffo rts on pr o cess in gC K NN quer y are de vo ted t oov erc o m in gthe li m i tat ion s o f the ab ov e appr o aches .W ede v e lo pa n effic i e n tmeth o dt o determ in ethe K NN sat each t i mestamp u n der the s i tuat ion that a ll o b j ects (in c l ud in gthequer yo b j ect ) m ov ec on t in u o us ly in ar o ad n et wo rk . In o ur s y stem , each o b j ect m ov es wi th fi x ed speed in ar o ad n et wo rk ,w h i ch i sreprese n ted as a n u n d i rected w e i ghted graph c on s i st in g o faset o f no des a n d edges .In f o rmat ion ab o ut edges a n d no des o fthe n et wo rk a n dthem ovin g o b j ects i sst o red in three tab l es , respect iv e ly. T he first i sthe edge table T edge st o r in gf o r each edge e i :(1)i ts start no de n s a n de n d no de n e (w here n s &lt;n e ), ( 2 )i ts l e n gth len (i. e ., the d i sta n ce bet w ee n n s a n d n e ), (3) the ma xi mum speed li m i t s max , a n d ( 4 ) aset S obj o fm ovin g o b j ects curre n t ly on e i .T he sec on d on e i sthe node table T node , that ma in ta in sf o reach no de n i the set S adj o fedgesc onn ect in g n i . T he l ast on e i sthe object table T obj ma in ta inin gthe in f o rmat ion o feachm ovin g o b j ect . T obj st o res f o reach o b j ect o i :(1) the edge e j c on ta inin g i t ,( 2 ) the update t i me t u ,(3) the d i sta n ce dist bet w ee n o i a n dthestart no de n s o fedge e j (i. e ., e j . n s ) at t u , a n d ( 4 )i ts m ovin g speed s .T he three tab l es are updated only w he no b j ects reach the n et wo rk no des .

To e x emp li f y the in f o rmat ion st o red in the three tab l es ,w eg iv ear o ad n et wo rk in Fi gure 2 ( a ), w h i ch c on s i sts o f no des n 1 t o n 6 a n dedges e 1 t o e 11 (w here a n edge l abe li sf ollow ed b yi ts len a n d s max e n c lo sed in pare n theses ). In th i sfigure , no des at the b o u n dar yo f the data space a n d len a n d s max o fm o st edges are o m i tted f o rc l ear n ess . Each o fthe o b j ects o 1 t o o 5 m ov es wi th speed 1 m/sec in the r o ad n et wo rk , a n dthe i rm ovin gd i rect ion sare in d i cated b y the c o rresp on d in g arr ow s .T he deta il ed in f o rmat ion o fthetab l es T edge , T node , a n d T obj i ssh own in that th i s o b j ect m ov es fr o mthestart no de t o the e n d no de , a n da n egat iv e v a l ue ( e . g ., o b j ect o 1 )in d i cates that i tm ov es in o pp o s i te d i rect ion. In th i s sect ion, w edes i g n atech ni que t o ca l cu l ate the n et wo rk d i sta n ce bet w ee n o b j ects at each t i mestamp .L et the d i sta n ce a lon gthesh o rtest path bet w ee n t wo stat ion ar yno des n i a n d n j on the r o ad n et wo rk be | SP n i ,n j | .W ech oo se t o prec o mpute | SP n i ,n j | bet w ee n a ny pa i rs o f n et wo rk no des a n dthe n use them t o speed up the ca l cu l at ion o fthe n et wo rk d i sta n ce .

G iv e n aquer yo b j ect q a n dam ovin g o b j ect o , the ca l cu l at ion o fthe n et wo rk d i sta n ce bet w ee n q a n d o at a ny t i me t involv es t wo p o ss i b l e cases acc o rd in gt o w hether the y are m ovin g on thesameedge o r no t .In thefirstcasethat q a n d o li e on the same edge e , the n et wo rk d i sta n ce bet w ee n q a n d o at t i me t , de no ted as ND q,o ( t ), i s determ in ed as f ollow s .
 w here q . s a n d q . t u are the m ovin g speed a n d the update t i me o f q respect iv e ly, a n d q . dist i sthed i sta n ce bet w ee n q a n dthestart no de o fedge e at t i me q . t u o b j ect o .T he o bta in ed ND q,o ( t )i s v a li d dur in gthet i me per io d in w h i ch q a n d o m ov e on the edge e s i mu l ta n e o us ly. T hat i s ,i t n eeds t o be rec o mputed only w he n q o r o reaches the term in a lno de o fedge e .Fo r in sta n ce , the o b j ects q a n d o 1 li e on the same edge e 1 in Fi gure 3( a ). T he c o rresp on d in g in f o rmat ion (i. e ., dist , s , a n d t u )o f o b j ects q a n d o 1 i s descr i bed in Fi gure 3( b ). By subst i tut in g the c o rresp on d in g in f o rmat ion in t o the ab ov eequat ion, w e o bta in ND q,o 1 ( t )= | X  8  X  3 t | ,w h i ch ca n be represe n ted in the time-network-distance ( Time-ND ) space as sh own in Fi gure 3( c ). No te that o b j ect o 1 l ea v es fr o medge e 1 at t i me 4 (i. e ., ND q,o 1 ( t )i scha n ged after t i me 4 ).

T he sec on dcase i sthat o b j ects q a n d o m ov e on the d iff ere n tedges e i a n d e j , respect iv e ly. In th i scase , the n et wo rk d i sta n ce ND q,o ( t ) bet w ee n q a n d o at t i me t wo u l dbeequa l t o the sum o fthe n et wo rk d i sta n ce fr o m q t o a no de n i , the n et wo rk d i sta n ce fr o m o t o a no de n j , a n dthed i sta n ce a lon gthesh o rtest path astart no de n s o ra n e n d no de n e o fedge e i (o r e j ). By us in gthef o ur d i sta n ces | be represe n ted as m in ND 1 ( t ) ,ND 2 ( t ) ,ND 3 ( t ) ,ND 4 ( t ) ,w here Si m il ar t o the first case , ND q,o ( t ) rema in s v a li du n t il q o r o reaches a n et wo rk no de . C on s i der aga in the r o ad n et wo rk in Fi gure 3( a ), w here o b j ects q a n d o 5 are m ovin g on the d iff ere n tedges e 1 a n d e 5 .A s no des n 1 a n d n 3 are the start no des o fedges e 1 a n d e 5 , respect iv e ly, ND 1 ( t )i s o bta in ed b y subst i tut in g the c o rresp on d in g in f o rmat ion ( sh owninFi gure 3( b )) in t o Equat ion ( 4 ) a n d represe n ted as 5 4  X  4 t .Si m il ar ly, ND 2 ( t ), ND 3 ( t ), a n d ND 4 ( t ) ca n a l s o be o bta in ed as 6 2 , 78 , a n d 5 2 + 4 t , respect iv e ly. A s w eca n see fr o m Fi gure 3( c ), in the Ti me -ND space ND 4 ( t ) has the m ini mum v a l ue wi th in the t i me in ter v a l [0 , 0 . 2 5], a n dthe ni srep l aced b y ND 1 ( t )wi th in [0 . 2 5 , 5]. H e n ce ,w e o bta in w here t i me 0 . 2 5 ca n be determ in ed b y s olvin g the equat ion ND 4 ( t )= ND 1 ( t ) a n dt i me 5i sthet i me p oin tat w h i ch the quer yo b j ect q reaches no de n 1 . To ach i e v etheg o a lo fc on t in u o us ly m oni t o r in gthe K NN resu l t , the C K NN sub in ter v a l sarec on s i dered seque n t i a lly in fi n d in gthe K NN s o fthequer yo b j ect . Reca ll that the n et wo rk d i sta n ces ND q,o ( t ) bet w ee n a ll o b j ects a n dthequer y o b j ect are requ i red t o be updated on ce the quer yo b j ect reaches a nin tersect ion (i. e ., a no de )o fther o ad n et wo rk .T hus ,w ech oo se t o d ivi de the t i me in ter v a l in t o sub in ter v a l sb y the t i me p oin ts at w h i ch the quer yo b j ect reaches a n et wo rk no de .T hat i s , each sub in ter v a l refers t o the t i me per io d dur in g w h i ch the quer y o b j ect m ov es on the same edge .A saresu l t , each o b j ect  X  s ND q,o ( t ) rema in s v a li d wi th in asub in ter v a l u n t il i t reaches a n et wo rk no de .

Fo reachsub in ter v a l[ t i ,t j ], the pr o cedure o f determ inin gthe K NN sc on s i sts o ft wo phases . O n e i sthe filtering phase ,w h i ch i susedt o effic i e n t ly pru n ethe non-qua li f yin g o b j ects .T h i s phase i sab l et o guara n tee that a pru n ed o b j ect i s i mp o ss i b l et o be the K NN wi th in the sub in ter v a l[ t i ,t j ] regard l ess o f w hether i t reaches the n et wo rk no de .Ano ther i sthe refinement phase ,w h i ch e x am in es w hether the ca n d i dates are the K NN s o r no t .In the f ollowin g ,w eprese n tthe t wo phases in deta il s . 5.1 Filtering Phase T he ma in i dea o fthefi l ter in g phase i st o fi n dapru nin g n et wo rk d i sta n ce , de no ted as ND pruning , t o e n sure that i fa no b j ect o w h o se n et wo rk d i sta n ce at t i me t i i sgreatertha n ND pruning , the n o i s i mp o ss i b l et o be the K NN o fthequer y o b j ect q wi th in the sub in ter v a l[ t i ,t j ]. L et o b j ects NN 1 ,NN 2 , ... ,NN k be the K NN s o f q at t i me t i (no te that the K NN sca n be retr i e v ed us in g the pre vio us appr o aches such as [11, 7 ]). T he n, the pru nin g n et wo rk d i sta n ce ND pruning ca n be represe n ted as ND q,KNN ([ t i ,t j ]) + d add ,w here ND q,KNN ([ t i ,t j ]) refers t o the ma xi mum o fthe n et wo rk d i sta n ces bet w ee n these K NN s (i. e ., NN 1 t o NN k ) l ater ).

T he n et wo rk d i sta n ce ND q,KNN ([ t i ,t j ]) i susedt o guara n tee that at l east K o b j ects w h o se n et wo rk d i sta n ces t o q are l ess tha no requa l t o ND q,KNN ([ t i ,t j ]) ca n be f o u n d .A ssuch , th o se o b j ects w h o se ND q,o ( t ) &gt;ND q,KNN ([ t i ,t j ]) at a ny t i me t  X  [ t i ,t j ] ca n be safe ly pru n ed .T he f ollowin gthreed i sta n ces are used t o determ in e ND q,KNN ([ t i ,t j ]): (1) the n et wo rk d i sta n ce ND q,NN  X  ( t i ) fr o mthe  X  -th NN t o q at t i me t i ,( 2 ) the m ovin gd i sta n ce d NN  X  ([ t i ,t j ]) o fthe  X  -th NN these d i sta n ces , ND q,KNN ([ t i ,t j ]) ca n be c o mputed as f ollow s .

C on s i der Fi gure 4 ( a ), w here e i ght o b j ects (in c l ud in gthequer yo b j ect q ) are m ovin g in ar o ad n et wo rk .In th i sfigure , each o b j ect ( edge )l abe li sf ollow ed b yi ts c o rresp on d in g speed (l e n gth a n dma xi mum speed li m i t ) e n c lo sed in pare n theses . A ssume that t wo NN s (i. e ., K = 2 ) are t o be f o u n d wi th in the sub in ter v a l[0 , 5] as the quer yo b j ect q reaches the no de n 1 at t i me 5. Ini t i a lly, o b j ects o 1 a n d o 2 are the 2 NN s , a n dthe i r n et wo rk d i sta n ces ND q,NN 1 (0) a n d ND q,NN 2 (0) are 8a n d 1 2 , respect iv e ly. A s o b j ect o 1 m ov es wi th speed 1 m/sec , the m ovin g d i sta n ce d NN 1 ([0 , 5]) i sequa l t o5.Si m il ar ly, the m ovin gd i sta n ce o f o b j ect o 2 ca n be c o mputed as d NN 2 ([0 , 5]) = 5. Fo rthequer yo b j ect q ,i t reaches the no de n 1 at t i me 5 s o that i ts m ovin gd i sta n ce d q ([0 , 5]) i sequa l t o 10. H e n ce , ND q,KNN ([0 , 5]) i sreprese n ted as ma x( 8 +5+10 , 1 2 + 5 + 10) = 27 .A s w eca n see fr o m Fi gure 4 ( b ), the n et wo rk d i sta n ces bet w ee n the 2 NN s (i. e ., o 1 a n d o 2 ) a n d q wi th in [0 , 5] must be l ess tha no requa l t o 27 .T hat i s , there are at l east t wo o b j ects in the reg ion R that starts at q  X  s lo cat ion at t i me 5(i. e ., at no de n ) a n de n ds at the v ert i ca l marks wi th d i sta n ce 27 . C l ear ly, a no b j ect w h i ch i s o uts i de the reg ion R at a ny t i me t  X  [0 , 5] ca nn e v er be the 2 NN.

T he add i t ion a l d i sta n ce d add i susedt o fac ili tate the determ in at ion o f w hether th i s o b j ect ca n be pru n ed o r no t ). L et the set o ftheb o u n dar i es o fthereg ion R be S bound ( e . g ., the sh o rt v ert i ca l bars on the r o ads in Fi gure 4 ( b )). I fa n o b j ect o uts i de the reg ion R at t i me t i m ov es wi th the ma xi mum speed li m i t o ftheedgec on ta inin g i t wi th in [ t i ,t j ]wi th o ut be in gab l et o reach a ny o fthe b o u n dar i es in S bound , the ni t i s i mp o ss i b l et o be the quer y resu l t .Mo t iv ated b y refers t o the ma xi mum m ovin gd i sta n ce o fa no b j ect lo cated on the b o u n dar y b wi th in [ t i ,t j ](i. e ., th i s o b j ect m ov es wi th the ma xi mum speed li m i t o feach edge c on ta inin g i t ). An o b j ect o w h o se n et wo rk d i sta n ce t o each b o u n dar yo fthe reg ion R at t i me t i i sgreatertha n d add ca n be safe ly pru n ed because o must be o uts i de the reg ion R wi th in [ t i ,t j ].

C on t in u in gthee x amp l e in Fi gure 4 ( b ), the d i sta n ce d add i sc o mputed as 2  X  5 = 10. Wi th the d i sta n ces ND wo rk d i sta n ce ND pruning ca n be represe n ted as ND q,KNN ([0 , 5]) + d add =3 7 . T heref o re , the o b j ects o 4 t o o 7 o uts i de the reg ion start in gat n 1 a n de n d in gat the cr o ss marks wi th d i sta n ce 3 7arepru n ed .No te that these pru n ed o b j ects  X  ND q,o ( t )n eed no tbec o mputed a n dthe K NN resu l t wi th in [0 , 5] wo u l d no tbe a ff ected e v e n th o ugh the y reach the n et wo rk no des .Fin a lly, only three o b j ects o 1 t o o 3 are the ca n d i dates f o rthe K NN sa n d will be further v er i fied in the refi n eme n t phase . 5.2 Refinement Phase In the refi n eme n t phase , the in ter v a l[ t i ,t j ]i sfurtherd ivi ded in t o n d i s join t d i dates (o bta in ed fr o mthefi l ter in g phase ) reach the n et wo rk no des because the i r ND q,o ( t )wo u l dbecha n ged at these t i me p oin ts .T he g o a lo ftherefi n e -me n t phase i st o determ in ethe K NN s -cha n g in gt i me p oin ts ( t NNCs )wi th in each sub in ter v a l[ t s m ,t e m ]( f o r 1  X  m  X  n ) such that the quer yo b j ect has the same K NN s wi th in t wo c on secut iv e t NNCs , a n dfi n dthec o rresp on d in g K NN sateach t To determ in ethe t NNCs wi th K NN s wi th in asub in ter v a l[ t s m , t e m ], the K -th NN NN k i sc on t in u o us ly m oni t o red fr o m t s m t o t e m because a t NNC o ccurs only w he n NN k i srep l aced b y a no ther ca n d i date that d o es no tbe lon gt o the K NN s . Mo re spec i fica lly, the set O KNN o f K NN sa n dthe K -th NN NN k at t i me t s m are first determ in ed .T he n, f o reachca n d i date o ( e x cept f o r NN k ), the t i me p oin t t at w h i ch ND q,NN k ( t )= ND q,o ( t )i sest i mated because o i sc lo ser t o q tha n NN k after t o .By fi n d in g t o o feachca n d i date , the ca n d i date o w h o se t o i sc lo sest t o t s m i sf o u n dt o be the n e w NN k .I f o i s no tc on ta in ed in O KNN , the K NN resu l t must be cha n ged (i. e ., a t NNC o ccurs ) at t o .Ino ther wo rds , the K NN resu l trema in su n cha n ged fr o m t s m t o t o s o that a tup l e &lt; [ t s m ,t o ] ,O KNN &gt; i s pr o duced .T he in ter v a l[ t o ,t e m ]i sthe n the rema inin gper io dthat i sc on s i dered t o pr o duce the o ther tup l es .T he ab ov epr o cess repeats u n t il the w h ol e in ter v a l [ t m ,t e m ]i se x am in ed .
 Fi gure 5 c on t in ues the pre vio us e x amp l e o ffi n d in g2 NN s wi th in [0 , 5] in Fi gure 4 .In th i se x amp l e , ND q,o ( t )o ftheca n d i dates o 1 t o o 3 are c o mputed a n ddep i cted as the lin esegme n ts in Fi gure 5( a ). A stheca n d i dates o 2 a n d o 1 reach the no des at t i me 2 a n d 4 respect iv e ly, the t i me in ter v a l[0 , 5] i sd ivi ded a n d NN k at t i me 0 are first determ in ed a n dsetas { o 1 ,o 2 } a n d o 2 , respec -t iv e ly. Al th o ugh the ca n d i date o 1 rep l aces o 2 t o be the n e w NN k at t i me 2 3 , the K NN resu l trema in su n cha n ged because o 1 i sc on ta in ed in O KNN ( that i s , only the o rder o fthe K -th NN a n dthe ( K  X  1)-th NN e x cha n ges ). W he n the sec on d in ter v a l[ 2 , 4 ]i sc on s i dered , the n e w ND q,o ( t )o f o 2 i sfirstc o mputed at t i me 2 .Sin ce the ca n d i date o 3 rep l ac in g o 1 t o be NN k at t i me 16 7 a n d o 3 i s no t in O KNN , the t i me p oin t 16 7 i sa K NN s -cha n g in gt i me p oin t t NNC .A s ( added in t o) O KNN .H a vin ge x am in ed the th i rd in ter v a l[ 4 , 5], the sec on dtup l e &lt; [ 16 7 , 5] , { o 2 ,o 3 } &gt; ca n be o bta in ed . All the e x per i me n ts are perf o rmed on a P C wi th AMD 1.61 G H zC PU a n d2G B R AM. T he a l g o r i thm i s i mp l eme n ted i n J AVA 2 (j 2sdk -1. 4 .0.01). W eusear o ad map o fO l de n burg ( ac i t yin Germa ny) fr o m Ti ger /Lin e [1 2 ] a n dge n erate 100K o b j ects us in gthege n erat o rpr o p o sed in [13]. T he m ovin g speed o feach o b j ect i su ni f o rm ly d i str i buted in bet w ee n0 a n d2 0 m/sec .W he n a no b j ect o reaches no de n in a n et wo rk , the n e x tedge on w h i ch o m ov es i sra n d o m ly ch o se n fr o m the edges c onn ect in g n .In the e x per i me n ta l space ,w ea l s o ge n erate 30 quer y o b j ects w h o se speeds are in thesamera n ge as the m ovin g o b j ects me n t ion ed ab ov e .Si m il ar ly, the n e x t edge that the quer yo b j ect m ov es on i sra n d o m ly se l ected on ce i t reaches a n et wo rk no de .T he defau l t v a l ues o fthe n umber o f n earest n e i ghb o rs requested b y each quer yo b j ect (i. e ., K ) a n dthe l e n gth o f quer y t i me in ter v a l are 2 0 a n d 100 t i me u ni ts , respect iv e ly. In o ur e x per i me n ts , w ec o mpare the C K NN a l g o r i thm t o the IMA a l g o r i thm pr o p o sed b yMo urat i d i s et al. [ 8 ]. T he IMA a l g o r i thm re -e v a l uates the s n apsh o t K NN quer yw he no b j ects  X  lo cat ion updates o ccur ,w h o se update in ter v a l( UI )i ssett o5 a n d 10 t i me u ni ts in th i se x per i me n t .T he IMA a l g o r i thm wi th update in ter v a l5 a n d 10 t i me u ni ts are termed IMA ( UI =5) a n d IMA ( UI = 10), respect iv e ly.

Fi gure 6 e v a l uates the C PU t i me a n d the prec i s ion f o rtheC K NN a l g o r i thm a n dthe IMA a l g o r i thm u n der v ar io us quer yin ter v a ll e n gths ,w here the prec i s ion refers t o the perce n tage o ft i me u ni ts at w h i ch the K NN resu l tretr i e v ed b y e x ecut in gtheC K NN a n dthe IMA a l g o r i thms i sc o rrect .Fi gure 6( a ) sh ow s that f o rb o th a l g o r i thms , the C PU c o st in creases wi th the in crease o fquer y l e n gth .T h i s i s because a l arge quer yl e n gth resu l ts in m o re o b j ects reach in g the n et wo rk no des (i. e ., m o re sub in ter v a l s n eed t o be c on s i dered f o rtheC K NN a l g o r i thm ), a n dmakesm o re lo cat ion updates o f o b j ects s o that m o re s n apsh o t K NN quer i es are requ i red f o rthe IMA a l g o r i thm . C l ear ly, the C K NN a l g o r i thm has a s i g ni fica n t ly better perf o rma n ce c o mpared t o the IMA a l g o r i thm (i. e ., IMA( UI =5) a n d IMA( UI = 10)). Fi gure 6( b )inv est i gates the e ff ect o fthe quer yl e n gth on the prec i s ion o fa ll a l g o r i thms .A sthe K NN sateacht i mestamp ca n be c o mp l ete ly determ in ed b y e x ecut in gtheC K NN a l g o r i thm , the prec i s ion o ftheC K NN a l g o r i thm i sa lw a y sequa l t o 100% u n der d iff ere n tquer yl e n gths . How e v er ,i fthe IMA a l g o r i thm i sad o pted t o a n s w er a C K NN quer y, s o me o fthe K NN resu l ts are u n k nown due t o the n ature o fd i screte lo cat ion updates .A s w e ca n see , the prec i s ion o f IMA( UI =5) ca nonly reach 4 0% t o 60%. E v e nwo rse , the prec i s ion o f IMA( UI = 10) i sbe low 30% f o ra l arger quer yl e n gth ,w h i ch mea n sthatm o st K NN resu l ts are in c o rrect .

Fi gure 7 ill ustrates the perf o rma n ce o ftheC K NN a n dthe IMA a l g o r i thms as a fu n ct ion o f K ( ra n g in gfr o m 10 t o 30). A ssh own in Fi gure 7 ( a ), w he n K in creases , the C PU ov erhead f o rb o th a l g o r i thms gr ow s .T he reas on i sthatas K bec o mes greater , the n umber o fqua li f yin g o b j ects in creases s o that m o re d i sta n ce c o mpar i s on sbet w ee n these qua li f yin g o b j ects are requ i red .T he e x per i me n ta l resu l tsh ow s that the C K NN a l g o r i thm o utperf o rms i ts c o mpet i t o rs in a ll cases . Fi gure 7 ( b ) stud i es h ow the v a l ue o f K a ff ects the prec i s ion o ftheC K NN a n dthe IMA a l g o r i thms .Si m il ar t oFi gure 6( b ), the prec i s ion o ftheC K NN a l g o r i thm rema in s 100% regard l ess o fthe v a l ue o f K .How e v er , the prec i s ion s o f IMA( UI = 5) a n d IMA( UI = 10) are b o th be low 60% u n der v ar io us K . In th i spaper ,w estud i ed the pr o b l em o fpr o cess in gtheC K NN quer yov er m ovin g o b j ects in r o ad n et wo rks .W epr o p o sed a tech ni que t o represe n tthe n et wo rk d i s -ta n ce bet w ee no b j ectsasa lin ear fu n ct ion o ft i me in the Ti me -ND space .B ased on the Ti me -ND space ,w ede v e lo ped the C K NN a l g o r i thm t o effic i e n t ly pr o cess aC K NN quer y. T he fi l ter in g phase o ftheC K NN a l g o r i thm i susedt o pru n ethe non-qua li f yin g o b j ects .T he n, the refi n eme n t phase i sdes i g n ed t o determ in ethe K NN s -cha n g in gt i me p oin ts wi th c o rresp on d in g K NN s . C o mprehe n s iv ee x per i-me n ts ha v edem on strated the effic i e n c yo ftheC K NN a l g o r i thm . O n e i mp o rta n t e x te n s ion o fth i s wo rk i st o address the i ssue o feffic i e n t ly ha n d lin gupdates o f o b j ects  X  speed cha n ges .Ano ther e x te n s ion i st o ut ili ze the pr o p o sed appr o ach t o a n s w er o ther v ar i at ion s o f K NN quer i es .
 Acknowledgements. T h i s wo rk w as supp o rted b yN at ion a lS c i e n ce C o u n c il o f T a iw a n( R . O . C .) u n der Gra n ts NS C 95-222 1-E -006-2 06-MY3.

