 1. Introduction
It has been repeatedly reported that computer aided diagnostic tool X  X  accuracy and efficiency depend on the quality of the models used ( Baumeister and Seipel, 2002 ). Current techniques are based on expert systems or a combination between the last and a Case Base
Reasoning engine ( Cornelius, 2004 ). Model based diagnostics are very accurate but time-and labor -demanding, and therefore too expensive to be comprehensi vely applied in workshops ( Chieux and
Guillaneuf, 2005 ; Leen and Hefferman, 2002 ). Therefore, there is a need in the automotive industry for effective and efficient off-board diagnosis especially considerin g the upcoming new technologies ( Trevett, 2002 ) such as X-by-Wire, Electric and hybrid engines, Car to car communication, RFID (Radio Frequency IDentification) or wireless sensors ( Shen et al., 2010 ), that rely strongly on dependent components. Moreover, in order t o distinguish the products of car manufacturers, clients customized their cars which lead to a combinatory explosion of vehicle variants where only some have identical subsystems. This section i s divided into 3 parts beginning with a summary of existing research, strategies and tools followed by a presentation of the problem statement and objectives of our contribution. At least a brief description of our industrial platform used for the experiences is given in form of an overview. 1.1. Existing research
Many research initiatives are investigating the fields of diagnosis allowing a progression in efficiency, in particular: model based diagnosis which to improve the precision of the fault localization ( Gigon et al., 2009 ), qualitative reasoning which handles incomplete models ( Struss, 2003 ), and distributed diagnostic agents which process parallel information ( Biteus et al., 2008 ; Wen et al., 2003 ). 1.1.1. Computer aided diagnosis tools for automotive systems
Several knowledge based systems have been proposed for the diagnosis task ( Denton, 2006 ; Tyler, 2007 ; Ueno et al., 1992 ). Their general strategies rely on (qualitative or quantitative weighted) inference rules or a combination of expert rules with a case base (see Fig. 1 ). One common problem encountered with those strategies is that the diagnostic knowledge is encoded in a rule ( Struss, 2003 ) which is vehicle dependent. If we consider the symptoms:  X  X  X he headlight does not work X  X , it could be linked to the engine battery (for a low class car with only one battery) or with the comfort equipment battery (for a high class car with 2 power supplies). The second test for the confirmation or rejection of the hypothesis of a faulty battery will be to start the engine in the first case or any entertainment equipment in the second case.
The construction of the diagnostic tree (hypothesis and tests), varies with the car configuration. The MBD (Model Based Diag-nosis) technology consists in comparing the actual behavior of a system, as it is observed, with the predicted behavior of the system given by a corresponding model (see Fig. 1 ).

A discrepancy between both state (observed and predicted) is a clear indication that a failure is present in the system. However, the reasoning with an MBD engine would allow to identify which test had to be performed to confirm an hypothesis. With the precedent example if in both cases the power supplies and their connections are modeled, the diagnostic engine can immediately determine the actuators (or equipment) to test (the motor engine or any entertainment component) and provide an explanation of why this test is performed (based on the construction knowledge or in the example the wiring diagram of the power supply). Case based reasoning engines also encountered a great success in the industry. They are adequate to reason on global diagnostics in automotive cases ( Azarian, 2009 ), like for example a faulty ECU engine management (which initiates around 60 fault codes in
ECUs of a modern car ( Ertz and Ohne, 2008 )). But for hypothesis refining, it is difficult to find a global similarity metric or to ignore certain attributes in the case description after a global test.
Despite the quick response time of CBR and the widespread covered physical domain, it is not adequate with the requirement of the automotive industry which needs the models of new vehicle to be operational in the workshops before the start of the commercialization (meaning without any Return Of Experi-ence, ROE). Moreover, CBR ( Mohamed et al., 2002 ) does not provide any explanation about the delivered results, and does not handle the configuration problems of modern vehicles. Wen et al. (2003) proposed a distributed diagnosis agent structure with an engine reasoning from global diagnostics. The state of the system composed by n diagnostic agents can consequently be described by signature vector. The discrimination comes from the comparison of the current signature with the one from known problems. The interesting aspect of this approach is that the distance between the different states (or coordinates of the signature) can be computed considering the constraints of the states as  X  X  X ndefined X  X  or  X  X  X ot disposal X  X . This aspect is very valuable in automotive problems, where often some electronics components cannot return a signal or due to a missing value in the database the signal returned cannot be interpreted as a known state. This is a weakness of CBR engines which could be resolved with the help of plausibility tests ( Biteus et al., 2009 ).
Furthermore, the role of the technician whose problem solving behavior is subjective and complex in the diagnosis task cannot be neglected. In today X  X  knowledge economy, the need to manage the knowledge produced by the actors of the diagnosis task cannot be ignored and should be overemphasized in the diagnosis algorithm. For a complete manufacturer X  X  after sale network, the protocol of the performed diagnosis sessions reaches 10,000 a day for a country like Germany ( Azarian, 2009 ). Thus making it a valuable source of knowledge in solving diagnosis cases if capitalized for future re-uses. Most of the engineering methods employ their own reasoning technique. The case base reasoning engine implements a case base made up of cases containing solutions that were used to solve old problems. This necessitates knowledge representation techniques (or formalization) for the case representation, building and acquisition. The CBR feasibility for decision help in industrial supervision was shown by Mille et al. (1999) and a practical study by Rasovska et al. (2008) for maintenance and diagnosis of industrial equipment shows a precision of 95% in problem solving. A statistical analysis of the sales of BMW ( Biteus et al., 2009 ) reveals that less than 1% cars are identical, that implies a real challenge in the editing and updating of the vehicle model (knowledge representation and acquisition) in automotive diagnosis tools. Hence the advantage of ontology techniques for the creation of case representation shows several advantages in such cases as reported in a study by Bergmann and Schaaf (2003) . This method shows promising results considering the growing size, complexity and interoper-ability of knowledge in industrial systems. The work of Kamsu
Foguem et al. (2008) relates to the structuring and the formaliza-tion of an experience feedback process aiming at transforming information or understanding gained by experience into explicit knowledge, using ontology as a framework for the clarification of explicit knowledge and know-how.

For the facilitation of assessments and comparison of diagnosis technologies the NASA has developed Advanced Diagnostics and Prognostics testbed called ADAPT ( NASA Ames Research Center, 2006 ). It is a platform which allows to realize benchmarks of different tools and technologies under equal conditions in order to measure their performance. The diagnostics competition has been defined at the 20th International workshop on principles of diagnosis. Details about the general set-up are given by Kurtoglu et al. (2009) and Kurtoglu et al. (2009) .

In the last decade, model-based technology in diagnosis matured so far that it was transferred from academic research into real applications ( Gentil et al., 2009 ). It provides an alter-native to more traditional techniques based on experience, such as rule based reasoning systems or case-based reasoning (CBR) systems. These methodologies remain widespread in the auto-motive industry, because the database editing process for the diagnosis rely on FMEA (Failure Mode and Effects Analysis) documents which are standardized and adequate for the edition of the knowledge bases ( Azarian and Siadat, 2009 ). Early model-based diagnosis tools include MDS ( Mauss et al., 2000 ), RAZ X  X  ( Sachenbacher et al., 2000 ), LYDIA ( Feldman et al., 2006 ), DSI
Express ( Gould, 2004 ) or RODON ( Lunde et al., 2006 ) or the module DIAGSYS in SIMFIA ( CD 37, 2006 ).

In Struss and Ertl (2009) , diagnosis is performed in a cycle of prediction, observation, and computation of diagnoses using
RAZ X  X  ( OCC X  X  Software GmbH, 2010 ), a consistency-based diag-nosis engine. This diagnosis relies on finding the assignments of modes (correct or faulty) to a set of component which is consistent with the system description and the observations.
Consistency-based diagnoses can be generated by some sort of best-first search according to criteria such as maximal probability, minimal cardinality of the set of faulty components, and other orders on faults models. The tool provides at least an 88% compliance of core diagnosis results in this study ( Struss and
Ertl, 2009 ). The module DIAGSYS is also exploiting a consistency based approach with the help of causal dependencies. The module relies on a constraint propagator and realizes a diagnosis with a minimal cardinality in order to provide the least possible number of suspects. RODON X  X  Model Based Diagnostic (MBD) engine is based on the notion of conflicts (or contradiction between observed and simulated behavior) known as the GDE (General Diagnostic Engine) already described by Kleer and Williams (1987) .
Bunus et al. (2009) reports the synthetic track of the diagnostic competition with RODON employed for ADAPT (tiers 1 and 2, details given by Isaksson (2009) ). In both case, the isolation accuracy is near to 1 and the computing time under 25 s with reasonable peaks of memory usage. But these standardized metrics from Kurtoglu et al. (2009) used for the evaluation do not take into account the implementation effort of the models. This effort is essential for automotive manufacturer which are looking for an economical objective commissioning like ratio of good answers divided by implementation cost of models. Moreover, the trend is to diminish all the authoring cost in automotive diagnostic tools ( Azarian, 2009 ). 1.1.2. Specificity and problem statement of the automotive diagnosis task
As a conclusion the model-based solution is a highly challen-ging technology in several aspects. Especially, if the process to diagnose contains high uncertainties, if the available observations are reliable and accurate, and if the available data for the completion of the models have a sufficient degree of quality. In order to benefit from the high accuracy of the MBD technology, we decided to develop a global strategy for the diagnosis that emphasizes the most important aspect of automotive diagnosis requirement as stated by car manufacturer. As shown in Fig. 1 , the first exchange of information about the system state that occurs is the qualitative symptom description, between the user and the technician in the workshop. Taking into account this description, in order to maximize the information input for the initialization of the diagnosis session, it may reduce the research area of the diagnostic engine. Following this line would demand to ensure that the diagnostic tool can handle natural language and at least map these sentences on a pre-compiled database of observable symptoms. The second information exchange happens between the car and the diagnosis station. In this step, the car commu-nication allows the acquisition of the ECU X  X  fault codes which are accurate observations and therefore crucial information for the diagnosis task. The problem is the interpretation by the diagnostic engine of these fault codes. They vary for each vehicle and according to the market report of automotive electronic by Frost and Sullivan Corporation (2008) the trend is to increase. There-fore, we focused on the development of a module which allows to scan automatically the description files of the ECUs called ODX (Open Diagnostic eXchange), and import them as completely functionalized data into the database. Both of these problems address the specific point of the availability, accuracy and reliability of the observations as shown in Fig. 2 .

Based on our experimental platform called SIDIS Enterprise developed by Siemens AG, which rely on an inference engine with all the drawbacks described in Section 1.1.1, we designed a module in order to improve the diagnostic algorithm to benefit from the accuracy offered by the MDB technology. At least, as outlined by a report about the European automotive aftermarket by Chieux and Guillaneuf (2005) , the ratio authorized repairer by independent repairer tends to diminish and nowadays the work-shops are partially integrated in the workflow of the after-sales department of car manufacturers. Therefore, to benefit from the scale of this valuable source of information, we developed a feedback evaluation module. It inspects the protocols of the performed diagnosis sessions and auto-completes the models for the diagnosis in order to be cost-effective for the database edition process. The objective is to improve the current diagnostic engine of SIDIS Enterprise into a combined reasoning strategy with expert, model based and ROE knowledge. The MBD engine shown in Fig. 1 , which takes only observations and model behavior into account, will therefore be enhanced by a combination of all source of available knowledge in a car manufacturer in order to cover the whole life cycle of a vehicle (design: construction knowledge or model, rules: diagnostic experts, ROE: feedback evaluation). 1.1.3. Our previous work
In our previous research, we focused on the maximization of the possible advantages of the observations (qualitative symptom description and failure code interpretation). The symptoms are organized in a tree in SIDIS Enterprise and regrouped by functional categories. In the last years the amount of information has strongly increased (around 2000 leaves in the symptom tree). That had for consequences that technicians do not select the symptoms in a diagnostic session (related to the broken car) regarding the com-plexity and the amount of information in this tree. So the diagnostic session is lengthened, because less expert rules are initiated, and more intermediate tests needed to be performed. To speed up the diagnostic session and accelerate the search process through the symptom tree, the system is equipped with a search module in natural language with a dedicated interface. In Azarian and Siadat (2009) , we reported the difficulties of a machine interpretation of natural language and proposed a multi-lingual approach based on a correspondence graph shown in Fig. 3 .This approach is inspired by an artificial neuronal network ( Saridakisa and Dentsoras, 2008 ) to emulate the property that the users belong to the same class and use a standardized terminology. A two-layer graph (see Fig. 3 ) was used where the first layer of cells represents concepts (e.g.  X  X  X ngine X  X ,  X  X  X ights X  X  and  X  X  X irrors X  X ) and the second layer represents the symptoms (e.g.  X  X  X he position of the mirror could not be changed X  X ). Both layers are connected by weighted edges, where the weight coefficient is obtained by minimizing the errors of the known output values of a training base. The last operation of the output of the synaptic activity of the cells of the second layer is a normalization which allows a comparison of the activity levels of the symptoms including a varying number of concepts. In terms of performance our module reaches a precision of 42% and a recall of 48% within 200 ms (see Azarian and Siadat, 2009 ) for the definition of the performance indicators). In the diagnosis context, the average performance improvement of the orbit of a diagnosis session is an economy of 0.28 tests (which represents an economy of 1.4 min/sessions).

The second aspect we had explored in our previous work was the automatic processing of ODX files. As previously mentioned, regarding the increasing number of vehicle variants and different features of the ECUs, the database editors of diagnosis programs need assistance in the management and administration of the ODX data. The model we developed uses a meta-schema to administrate data by associating each data object to the ontological concept which defines its signification. Using this idea, it is possible to represent the ECU functionalities (what the ECU can do, e.g.  X  X  X urn on the headlights X  X ) using a generic model (functional data). As the real (ECU-specific) job and parameter names cannot be ignored for vehicle communication, how the ECU realizes the generic jobs must also be defined (informational data). This leads to the three part model shown in Fig. 4 , which identifies three distinct parts for functional vehicle communication: who, what and how.

In order to take advantage of the data reduction possibilities offered by the ODX data model, new information structures have been developed using the concept of value inheritance and of virtual hierarchy links. With these data st ructures for functional vehicle communication, the database editor X  X  knowledge is represented independently from the physical ECU description in one unique database, which makes the development of distributed problem solving method (basing on an analysis of the ECU capabilities robust and easy). The multi-agent ( Cremmel et al., 2008 ) system which has been developed uses a case-based approach to analyze the new ODX data and to automatically make import propositions. This feature can allow reaching an economy of 37.5% of the costs to fill the ECU knowledge structures in the database for a vehicle with 80 ECUs.
With both of these modules we adequately handle the pro-blems of accuracy and interpretation of the observations, all in order to initiate the diagnosis session in the best possible conditions. Despite the high amount of data (symptoms, ODX files) to handle, we performed these steps within an adequate time and lowered the cost of the database feeding. 1.2. Contribution
Over the last years, the major field of innovation in the automotive industry was in the field of electronic which has the following impacts: 1. The different subsystems are more and more interconnected so that they can share information.
 2. More subsystems mean more (suspicious) components and consequently a higher risk of multiple faults. 3. The implementation of virtual networks allows using one cable to transmit several signals. But in case of a break-down, the consequence is a loss of information. More generally, the frequent int erconnection and component-sharing of systems raises the question of their distinction.
Using only symptom-related as described in Section 1.1.2 data is not sufficient.

The Model based diagnostic strategies as described by Bunus et al. (2009) or Struss and Ertl (2009) may handle the listed difficulties with a high accuracy, but a qualitative analysis of the cost of the models will reveal the cost to be significantly higher than that of an expert system. Moreover, the model based technology only takes construction knowledge into account not expert or experience knowledge. The first contribution of this paper is an improved diagnosis algorithm that bridges tradi-tional expert knowledge with models and feedbacks in order to provide an incremental innovation which allows the migration toward the MBD technology . A radical innovation in products for complete automotive after-sales networks may induce too much change in the structures of car manufacturers. The success of a combined approach for fault detection and isolation was already used by Evsukoffa and Gentilb (2005) , Mohamed et al. (2002) and
Tan et al. (2007) . The objective of our contribution is to modify the diagnosis engine shown in Fig. 1 into a meta-engine combin-ing the components shown in Fig. 5 .
 It is shown that with the qualitative causal models as in
DIAGSYS through multiple experiments the resulting diagnosis had the following strength:
Accuracy : the causal relationships allow a better detection than traditional expert system.

Response time : the reduced detection time had a direct impact on the answer time. The scale of an automotive after-sale network of a manufacturer allow around 10.000 diagnosis sessions a day in a country like Germany. Therefore each saved minute had a strong economic impact on the return of investment.

Compatibility : the algorithm could be programmed as generic as possible and switch between the different sources of knowledge. If for example the models have not been edited, it should run as a traditional expert system in order to allow manufacturer to change their process and information source for the data edition (this constraint is strongly related to the technology adoption life cycle ( Everett, 2003 )).

Ratio good answers divided by the maintenance cost : this metric is the most important factor for manufacturer because it reflects the return of investment of the acquisition of a complete automotive diagnosis solution.

The second contribution of this paper is to take into account the valuable source of information of the feedbacks of performed diagnosis sessions. The long term objective is to return failure information about a specific component directly to the design department of the manufacturer and integrate the whole value chain from R&amp;D to after-sales in a same workflow. 1.3. System overview
SIDIS Enterprise is based on a client/server architecture which is composed of two parts:
The authoring system : which allows to edit simultaneously (on different clients) all the information in the database (diagnostic data, ECU data, service repair documentation, etc.).
The workshop system : which is used in the service points an allow technician to acquire the fault codes, perform measure-ments, show repair documentation.

On the top of Fig. 6 , the main components of SIDIS Enterprise are depicted. On the bottom of Fig. 6 , the knowledge structures of the data related to the diagnosis task is represented.
These data are organized in trees where child nodes inherit the properties and attributes of parent nodes. The trees relative to the diagnosis are as follows:
The characteristic tree contains all the characteristics of the vehicles, filters the fault codes and the diagnosis objects depending on the variant rules associated to a selected vehicle. The fault code tree contains the fault code of the ECUs.
The perceived symptom tree contains system and senses oriented failure descriptions.

The diagnostic object tree is a model of the car in which a node represents a component or function to be tested. The hierarchy links between nodes are equivalent to a  X  X  X s composed from X  X  or  X  X  X s part of X  X  relationship between components depending on the followed direction in the link:  X  X  X op-down X  X  or  X  X  X own-top X  X .
The suspicious links and Empirical rules are links issued from fault codes or perceived symptoms (source) and pointing out diagnostic objects (target). Empirical rule means that a combination of source nodes (symptoms) are linked together by a logical or fuzzy operator, and that expression has to be true before the target node is considered as suspicious.
The next section investigates different possibilities to improve the diagnostic engine and present our approach. 2. Proposed diagnostic algorithm
As shown in Fig. 5 the diagnosis algorithm is divided into 3 different parts: the heuristic knowledge reasoning, the model based and the feedback evaluation. These steps are described in the following 3 sub-sections. Section 3 presents experimental results demonstrating the performance of this approach com-pared to the current technology. 2.1. Current technology
In the current system, each time a symptom is observed on the treated case, the suspicion links attached to that object will induce a partial suspicion moment to the targeted diagnostic object. This partial suspicion moment or PM depends on the number of suspicion links from the symptom or fault code called k for each symptom Si , given in (1):
PM n  X  GS with the following: GS : the weight of the symptom,
PM : the partial moment or partial suspicion degree induced by a rule, k : the number of rules from the symptoms, n : index of the considered suspicion rule and RSL : rank of the considered suspicion rules.
 Once the total suspicion moments denoted SM (sum of all the
PM for a given diagnostic object), have been evaluated, the objects are ranked by a heuristic metric h given in (2): h  X  SM x Tc with the following:
SM : the total suspicious moment (or the sum of all partial moments).
 Tc : the test cost for the element given in index.

The 7 most suspected elements are ranked according to the metric h in a test agenda were the technician can select to test one of the objects to incriminate or discri minate it. Once the fault has been identified the technician proceeds with the reparation and a feedback protocol of the diagnosis sessi on is sent to the manufacturer.
However, considering the amount of electronic subsystems, a simple expert system does not return adequate response in a reasonable time. Specially for critical errors like failure codes of the engine management ECUs which activates around 60 failures codes in different subparts (ABS, ESP) and the semi-proportional suspicion degree attribution does not discrimi nate enough the different objects.
The main advantage of a rule based system is that engineers can easily enter the data; standardized documents like FMEA are the main source of diagnostic knowledge in the automotive industry.
However for larger systems declined in many variants the overall view of the model is lost and authors who edit the databases do not commit a weight coefficient to a rule with a critical consequence of a loss of discrimination power. 2.2. A new diagnostic strategy 2.2.1. Previous works and selection of an approach
There are a lot of different diagnostic methods. Several are presented by Piechowiak (2004) but hereunder only the most relevant in our case will be discussed. The first one is the Case-Base
Reasoning method, detailed by Leake (1996) and Aamodt and Plaza (1994) . As mentioned before, the difficulties to find a global similarity metric for the whole range of cars of a manufacturer remains. Another solution consists in the implementation of Model based diagnostic with fault models . It is a computational approach which can predict the behavior of a system. This approach has the advantages to be very accurate. However, the models are very expensive to edit and the standard documents to edit the mo dels in the automotive industry are not adapted to fill those database. The model based diagnostic principle issue from the work on the hitting set algorithm from Zhao and Ouyang (2007) can help to improve the discrimination power of inference rules which corresponds to the possible conflict. The weight of each symptom will be proportional to the number of independent linked diagnostic objects (by a s uspicion rule). A subset of this strategy are the implementation of causal networks which are qualitative models representing the physical dependencies between components. This method had the strong advantage to not radically change the information model. A third method is the a  X  b Search .The principleistoreducethesearchspaceandfocusonlyontheportion which contains relevant information while irrelevant nodes are deleting. The algorithm looks for the best result at the n th depth level and makes the move to move the closest possible to that position. Transposed to the diagnosis, a metric ( Mastrolilli and Blum, 2010 ) based on factors such as suspicion degree, failure rate, vehicle maintenance historic, etc. needs to be implemented in order to rank the results at the n th depth. However this solution needs high resources during the exploration of the graph. Another solution consists in the uses of conditional probabilities as illustrated by Piechowiak (2004) or Schwall and Gerdes (2001) with the help of Bayesian networks (BN) which could result in an accurate fault by the analysis of the feedbacks of the diagnosis sessions performed in the manufacturer X  X  after-sale networks. An extension of this strategy to establish a diagnosis will consist in the implementation of physical characteristics of each (mechanical or electrical) element. Information such as the following examples could be useful for suspecting more or less an object:
The failure rate since some elements can break down more often than others.

The lifetime because elements are built to last a certain amount of kilometers or working hours.

The weight of causal dependencies or the relative importance of arule.
 Unobserved causal dependencies or expert rules.

A decision tree is a predictive model, that is, a mapping from observations about an item to conclusions about its target value ( Varga et al., 2009 ). In these tree structures, leaves represent classifications and branches represent conjunctions of features or failure modes for the diagnosis that lead to those classifications. For the construction of the tree or the construction of decision nodes or tests: the Gini rule splits off a single group of a size as large as possible, whereas the entropy and towing rules find multiple groups comprising as close to half the samples as possible. Both algorithms proceed recursively down the tree until stopping criteria are met. Decision trees have become very popular in the last 10 years; they are used in a wide range of applications such as: optimization of an investment portfolio, operation management, decision support or net present value ( Olive et al., 2004 ). But it is possible to get in trouble with over-fitting. This problem can be overcome with Bayesian decision trees or by chi-square testing ( Buntime, 1992 ). Another problem in the construction of the tree is the test set error, which consists on hiding some data away (due to forward thinking) and once the data is learned the tree predicts too well these data. This explains the discrepancies between future predictions of the tree and observations ( Moore, 2008 ). The decision tree realizes a differ-ential diagnosis with tests that are mutually exclusive to lead to the failure mode. The main advantage relies in their construction and tests ranking which can be optimized on certain criteria e.g. test costs, test efficiency or a heuristic metric of admissibility (for example a combination between costs and information gain).
In all cases, the integration of new knowledge requires higher maintenance costs for the models and authors will require more sources of information but the causality or influence relationships are generally defined in FMEA documents and may be a promising issue for the problem statement.

In order to focus our work on a solution that requires the lowest efforts to implementation compared to completely new methods, we will retain the criteria already mentioned in Section 1.2 (accuracy, response time, compati bility, ratio: correct answers by maintenance cost) and also the operational a pplicability of th e approach; this means that improvements must be eas ily interpretable for users, in particular the authors who establish the models for the diagnosis.
The candidate generation must also be interpretable for the techni-cian e.g. the activation of a causal link which leads to the suspicion of a particular component. A qualitative comparison of the methods presented in Section 2.2.1 is shown in Fig. 7 as a radar diagram.
Considering the first two methods, their main drawbacks are they lack of applicability due to the changes requested in the model edition or case description. But the integration of causal networks as well as the physical characteristics may be a promising solution when combined together. Furthermore the automatic learning of the physical attributes of the components and the causalities could be realized through BNs ( Bressan et al., 2009 ). Therefore, our approach will rely on a diagnostic module that integrates horizontally the heuristic diagnosis, the causal dependency graphs and physical component X  X  attribute. The diagnosis will be performed by a heuristic metric ( Mastrolilli and Blum, 2010 ) that makes a multi-criteria optimization depending on the available information. The last module will be composed by the evaluation of the ROE through BNs in order to complete a new strategy as shown in Fig. 5 . The next section details the formalization of the horizontal combinations of the diagnosis reasoning engines and the evaluation of the feedback. 2.2.2. Principle and formalization
The proposed development consists of implementing two fundamental equations for the candidate generation. The first one deals with the evaluation of the precision whereas the others deal with the test costs, the lifetime of components, the evalua-tion of expert rules and the evaluation of causal dependencies.
Section 2.2.2(f) and (g) explain how to learn automatically the necessary parameters through Bayesian networks and decision trees. Section 2.2.3(a) details the combination of the different factors: (a) The precision factor.

The partial suspicion moment is then logarithmic dependant on the ratio between the active symptoms and the total number of symptoms which have links pointing on the considered diagnostic object.

As previously mentioned the inclusion of the precision in the candidate generation is taken into account. The formula is given in (3): r 1  X  log 2 o  X 
With Level ( node ): the depth in the diagnostic object tree of the considered node and Depth ( tree ): the depth of the diag-nostic object tree and o : an offset equal to 1 (this last notation applies for all equations in this section). The consequence of (3) is that the deeper the node in the tree, the higher its suspicion. (b) The Test cost factor.

Another factor that will be included in the calculation as mentioned is the test cost given in (4). r 2  X  log 2 o  X 
With Tc node : the cost of the test of the associated diagnostic object node and Tc max : the maximal test cost over the whole set of tests in the tree. As for the precision, the behavior of this formula is quite similar except for the balance with the other factors. In order to privilege candidates with lower tests costs, this factor needs a negative multiplicative coefficient. (c) The lifetime factor.

The next factor that leads to a partial suspicion is the lifetime of a component given in (5): r 3  X  log 2 o  X 
With LT(vehicle) : the km reading of the vehicle and LT(node) : the lifetime in km of the corresponding node. This factor leads to a partial suspicion each time the km stand of a vehicle is higher than the given lifetime of a node. (d) The evaluation of expert knowledge.

One basic factor still remains the suspicion through expert rules given in (6): r 4  X  log 2 o  X 
With e i being a Boolean equal to 1 if the symptom indexed by i is active, and 0 otherwise. GS i is the weight of the symptom indexed by i .
 (e) The evaluation of the causal dependencies.
 (f) Evaluation of the return of experience through Bayesian (g) Evaluation of the return of experience through inductive
Basically, the goal of a decision tree is to create a model that predicts the value of a variable based on several input variables. Each interior node corresponds to one of the input variables, with edges to children for each possible value of that input variable. Each leaf represents a value of the target variable given the values of the input variables represented by the path from the root to the leaf. In order to illustrate the principle of decision trees an example is examined for the determination of the lifetime of a component. We suppose that we have the protocols of the test of a component (with Ok and NotOK answers) for vehicles with different km readings. Based on this data, we will consider the hypothesis of a lifetime of 16.000 km. The frequencies are shown in Table 1 .
One way to control the quality of the hypothesis is to compute an indicator called Giny impurity given in (9). The value of this indicator reaches zero when all cases in a node reaches a single label: I  X  1 with the following: m : the number of values a variable can take (here m  X  2 for true or false). f i : the fraction of item labeled with the value i in the dataset. In the dataset given in example it is possible to compute the Giny impurity for a hypothesis that the component had a lifetime of 16,000 km. The number of occurrences where the hypothesis is true (means the km reading is superior or equal to 16,000 km and the test of the component answers  X  X otOK X  AND the number of occurrence where the km reading is inferior to 16,000 km with a component X  X  test answer of  X  X K X ) is equal to 3 and 6 when the hypothesis is false. The value is 1 (3/9) 2 (6/9) 2 equal to 0.44 which means that the data are quasi equitably categorized in both labels (a value of 0.5 would mean that the data is divided into both labels equitably). To confirm a hypothesis, the posterior probability for the hypothesis to be true must be at least equal to 90% and the Giny impurity lower than 0.2.

If no leaf is adequate with the previous criteria, then a dichotomy is made between both leaves that deliver the best percentage for the hypothesis equal to true (or if the score are increasing then a new leaf is created with the hypothesis average value plus 2 times the standard deviation or vice versa). This minimizes the finding of an optimal tree with an algorithm of a complexity of o ( n log( n )) with n the number of times the dichot-omy is applied. The same techniques is applied for the test cost whereby 2 values are learned: the first one for a test reply  X  X K X , the second one for a test reply  X  X otOK X . This distinction has to be made, because the time varies depending on test results which are logic, because the test logic is to investigate deeper and deeper all possible failure modes. Moreover, the dichotomy procedure doesn X  X  need to be applied for the learning of the test cost, because the test cost does not vary as widely as the km reading of a vehicle. 2.2.3. Summary (a) Combination of all factors
The five partial moments obtained in the previous steps must now be put together in order to get a final moment SM.
A solution consists of a weighted sum of all factors with five weight factors ( a 1 , y , a 5 ) as in (10) which defines our meta-heuristic.
 SM  X  a 1 r 1  X  a 2 r 2  X  a 3 r 3  X  a 4 r 4  X  a 5 r 5  X  10  X 
However, other linearization can be applied to the factors defined in (3) X (7). A solution could be to use Dempster X  X  rule of combination ( Yager and Liu, 2008 ), which is a well founded way of dealing with the problem of uncertain information in artificial intelligence systems. The apparently prohibitive computational complexity of the method has, however, so far rendered it of only limited practical use. It is generally taken for granted that the complexity of applying this formula grows exponentially ( Gordon and Shortliffe, 1985 ) in the number of evidential sources. This is particularly true con-cerning this problem with the combination of the 5 factors.
Moreover, Dempster X  X  combination rule is unsuitable due to the high degree of conflict that appears in the diagnosis problem. The joint mass assignment function ignores the internal conflicts of the system, implying the complete sup-port of hypothesis believed unlikely in the different knowledge sources. Thus the choice of a weighted sum is based on the similar logarithmic behavior of all factors appears more suitable as an approximation algorithm. As an example for the behavior of factor r 4 we suppose two different nodes: the first one having 3 incoming suspicion rules and the second one having 6 incoming suspicion rules. It is to notice that for an increasing number of active suspicion rules both curves begin at zero and reach their maximum value (equal to 1) if 100% of the incoming suspicion rules are active. But the logarithmic behavior generates for 50% of active suspicion rules of a node a suspicion equal to 80%. The irradiation of the suspicion induced by the rules is therefore higher than for a linear equation. The factor r 2 relative to the test costs must be multiplied by a negative weight coefficient because his behavior is similar for increasing tests costs. In order to privilege candidates with lower tests costs the behavior has to be inverted, causing a 2 to be negative. One last remark concerns the lifetime factor r 3 . This factor emulates the suspicion of the bathtub curve of a component, but compared to the other factors, this one had no upper bound because it increases as well as the kilometer reading of the vehicle. The balance between the different factors in (10) is based on benchmarks reported in Section 2.2.3(b) whereby each of the coefficients ( a 1 , y , a 5 ) belongs to the interval [0,1] or 0 X 100%, except for a 2 which is implicitly referred as negative and between the bounds [ 1,0]. (b) Examination of the function points of the meta-heuristic:
In this section, we attempt to quantify how much the final results are affected by the weight parameters defined in (10).
The model used was a subsystem of a BMW 5 Series Touring with 30 diagnostic objects, 28 suspicion rules, 6 symptoms, 5 fault codes, 9 causal links. We considered that the weights of perceived symptoms, fault codes, as well as for the causal relations are equal to the default value (equal to 100%). The case base of breakdowns used for the simulation is composed by 14 cases which emphasis the most usual scenarios encountered in workshops as follows:
As performance indicators for the diagnosis, we took the cardinal of the orbit of the diagnosis session, whereby the user always selects the object ranked first in the test agenda.
This performance indicators are directly related to the num-ber of executed tests during the diagnosis session and thus to the time which constitutes the true acid test of a computer aided diagnostic system.

After the conduction of simulations for each factor with different weights, we explored the promising functional areas of the meta-heuristic approach. Fig. 8 summarizes this ana-lysis in a radar diagram where each axis corresponds to a specific weight factor. We recognize 3 different areas shown in Fig. 8 , the zone A with an average performance improve-ment of 5%, the zone B with an improvement of 9% and the rest of the diagram where the performance is lower than with the current system. Finally, this meta-heuristic diagnosis procedure shows several advantages in terms of performance (up to 9% in these benchmarks) compared to over-costs due to the modifications needed to be edited in the models. In particular the principle of the subfield of model based diagnostic implemented as causal networks shows a signifi-cant benefit in terms of performance. 2.3. Synthesis
In the first series of experiences, we examined the balance between the suspicion rule factor and an increasing weight for the lifetime factor. One very interesting characteristics of the meta-heuristic approach is that for a weight of 0% of the lifetime factor (which means that only the factor of the suspicion rules is taken into account) the orbit of the diagnosis session is lower than compared to SIDIS Enterprise X  X  algorithm. This means that the logarithmic irradiation, of the suspicion caused by the symptom, scales up the discrimination power between the candidates and the targets more efficiently than the faulty components. The lifetime factor ameliorates the performance for a small weight comprised between 10% and 20%, over this bound the orbit is higher than in the current algorithm. This means that the lifetime factor impacts positively the performance of the diagnosis for small weights but the core of the diagnostic reasoning must rely on traditional expert rules.

The causal relationships are one important factor of the diagnostic reasoning because they allow to introduce the relation-ships between components. It is possible that a model contains a causal cycle because as they are modeled, they cover the whole sets of failure modes of the components. The functional interval of this factor is when the weight belongs to the interval 20% and 80% which benefits to the performance. Globally, the impact of this factor is positive for the diagnosis and it helps to target more efficiently the faulty components. Again, this factor must still have a lower weight than the one for the expert rules.
The factor a 2 relative to the test costs must remain inferior to 20% because for higher values the ranking in the test agenda is more based on the tests costs than the hardcoded diagnostic knowledge (causal links and expert rules) with the consequence that the orbit of the sessions increases dramatically. The same applies for the weight of the precision which had to be equal to 10% for only a light benefit in terms of suspicion for objects placed at deeper position in the tree.

Fig. 9 shows a deeper look inside the diagnostic engine ( Fig. 1 ) with the interaction of the different source of knowledge. Fig. 9 represents the detailed engine with the formalized evaluation of the knowledge sources for the diagnostic task and how the engine combines the different diagnosis strategies. The model based knowledge is considered through the causal networks and taken into account with the factor r 5 , The heuristic knowledge based on expert rules edited by the database editors (as well as the test cost) is considered by the factor r 4 . Finally, the knowledge acquired by the return of experience is taken into account by the lifetime factor and also by the factors r 4 and r 5 because the weights of the causal and expert rules are updated in the models for the diagnosis. The candidate generation in the diagnosis engine is then performed with the help of the meta-heuristic due to the formalization of the meta-heuristic it is possible to privilege one type of knowledge in the diagnostic engine. Thus making it possible to migrate from an expert system based diagnosis towards an MBD.

The changes for an implementation of these modules can be done with few efforts if the targeted system had enough opened interfaces as provided by SIDIS Enterprise. This approach leads to a bridge between both worlds of heuristic and semi-model based with a lowering effort for the model edition through a probabil-istic method. The next section describes the performed experi-ences and reports the major results in terms of performance. 3. Experimental results Instead of performing the experiences with ADAPT ( NASA Ames
Research Center, 2006 ), we prefer to select vehicles in order to show the whole potential of our approach on a complex mecha-tronics systems which encompasses more physical domains then the ones in ADAPT X  X  testbed. For the simulations, we developed an independent prototype with nearly the same information model.
The 3 tested vehicles belong to the low, middle and luxury class car which represent around 14,000 objects in the database. The simulated breakdowns contained single and multiple faults and depending on the case, we feed the feedback engine with classical or random diagnosis sessions to monitor the stability. The perfor-mance indicator used is the orbit of a diagnosis session, which is the number of executed intermediate test for the fault isolation. The test cost assigned to the diagnostic object reflects real practical conditions including the car communication, the differences between an OK and NotOK answers of the test. 3.1. Simulation without feedback data
In Fig. 10 , the orbit of the diagnosis session is represented for the different vehicles and for 2 or 3 cases (the curve of the diagnosis of vehicle B and C with SIDIS Enterprise are overlapped).
In all the cases our approach presents better results, especially in the last case of vehicle A. The third contains a multiple fault case were subcomponents of the ABS and ESP do not work and a wrong intermediate test answer had a dramatic impact on the orbit.
In this vehicle model, no causal relationship had been entered; the result is therefore only a heuristic diagnosis based on the modified engine of SIDIS Enterprise with a logarithmic function for the assignment of the suspicion degree. The coefficient a increases the suspicion moment for objects incriminated by rules which divided by the test cost modified the second test agenda and avoided an unnecessary test. But in that case it is the combination of the logarithmic suspicion, with the precision factor, which impacts positively the test agenda. Despite the low value of a 1 , the influence of the suspicion is only of 0.1 in that case but it allows to solve the case more efficiently. The average orbit of all diagnosis sessions was diminished by 29.8%. It is also to notice that the evaluation of the suspicion rule by the logarithmic function alone allows to improve the diagnosis (i.e. if we fix all coefficients to zero except a 4 then the performance improvement is in average of 13.2%). This factor relies on a logarithmic function to assign a suspicion moment to the diag-nostic object, which compared to the linear function of SIDIS Enterprise provides a better distinction between the candidates.
The higher the number of active suspicion links, the higher its partial suspicion moment. 3.2. Simulation with feedback data
Despite the possible automatic learning method and its imple-mentation in the authoring system, the results must be analyzed carefully. The discovered rules correspond to hardcoded diagnosis knowledge or correlation and therefore only aim to simulate a physical reality. In a first series of experiences we decided to automatically complete our database without any supervision.
Due to an approximate value of 30 feedbacks per vehicles around 60 links (suspicions and causal) appear in the database. As a result, we observed in average an increase of 30% of the orbit due to new rules which provided too much dispersion in the fault localization process. In order to control the learning process and the database manipulation we configured limitations. An accep-tance limit could also be configured for example in terms of number of protocols. A rejection limit should also be defined (due to the na X   X ve hypothesis) for example a causal link that had a weight of 0.0001 can correspond to a case that occurs 1 time for 10,000 feedbacks! A reasonable acceptability limit for the weight is 20%, because it is around this limit that links have an impact on the test agendas. But depending on the size and the politic applied in a car manufacturer after-sales network (e.g. the protocol can be sent optionally or the protocol must be sent to the feedback server), that limit should be configurable. In the general case an acceptability limit around 10% less of the lowest weight is enough to keep the relevant links for the diagnosis. The results obtained are shown in Fig. 11 . For the comparison we also provided the orbit of the diagnosis sessions performed with SIDIS Enterprise with the enhanced models by the feedback data. In two cases (for the vehicles B and C) the learned values from the feedback evaluation causes the algorithm of SIDIS Enterprise to perform two and one more test. This is due to the test ranking metric detailed in (2) which uses the ratio suspicion by test cost for the ranking. In both cases the protocols of diagnosis sessions contain various breakdowns from the headlight to the door-locking, whereby the faulty component is a temperature sensor of the cooling system and the sensor of the break pedal. The dispersion of the feedbacks causes the Bayesian network to diminish the weights of the relevant rules and causality links. The consequence is that this divergence is reflected in the test agenda with unnecessary tests. Despite this endemic phenomena (the disper-sion of feedbacks causing unnecessary tests), the feedbacks decrease the average orbit of SIDIS Enterprise X  X  algorithm by 12.9% proving its contribution on a large number of cases.
Furthermore the average performance gain for the orbit of the diagnosis sessions is equal to 22%. 3.3. Synthesis and discussion
The results in terms of performance are promising with an average decrease of 17.6% for orbit (without and with feedback data). The meta-heuristic approach had a higher discrimination power than the diagnostic knowledge thanks to the entropy-like formulas implying normalized logarithmic distinctions. The para-meter a 5 is of no importance when the models do not contain causal links, because the factor is automatically equal to zero in that case. Otherwise the partial suspicion moment is scaled as described in (6). It is the heuristic metric of the test ranking which can play a differentiation role due to the division by the test costs (if they are updated for example). The parameter a 1 influences only the precision factor, when the models do not contain causal links. For that reason most of the suspicion links are pointing towards diagnostic objects with the same level, the influence of the precision factor is therefore negligible. Once the causal links are added to the model, the parameter a 5 plays a central role because it allows to inspect deeper the possible causes in the weighted oriented causal graph. If the factor a 5 is lower than 0.5 the causal links are nearly ignored and the orbits of diagnostic sessions increases to the ones obtained by SIDIS Enterprise X  X  algorithm. If the diagnosis is only based on the partial causal suspicious moment for the candidate generation, the consequence is that the approach emulates a directed weighted graph explora-tion. The reason is that the causal relation corresponds essentially to frequencies of correlated suspects, the graph exploration induces source elements (with the maximum of outgoing causal links) to be ranked first in the test agendas and these are not always the cause of the faulty behavior of the vehicle. This is the main drawback of the whole feedback engine; all adapted weights and new links correspond to frequently encountered cases and not to background knowledge. In other words Baye X  X  rule reveals possible correlations but these are strictly different from any causal reality. A self learning system may contain erroneous data and therefore there is a need to perform a  X  X  X ata diagnosis X  X . This aspect had already been identified 20 years ago by Struss (1988) but due to the complexity of mechatronics systems and their multiple configurations this point will represents a crucial chal-lenge for the applicability in the industry of knowledge based systems.

A secondary problem that required our attention during these experiences was about the generated test agenda which is a ranked list of 7 objects sorted by their suspicion degree. In our experience we supposed that the technician always choose the first (the most suspected) component, but in practice it turns out that technician selects often the objects in the center of the screen leading to the execution of time consuming intermediary tests. A possible solution to solve this problem would be to represent the results as fuzzy cognitive maps which may imply more attention of the technician in the diagnosis process and therefore grasp more information through the feedback analysis.

Despite that in last decade, model-based technology in diag-nosis matured so far that it was transferred from academic research into limited real applications providing usefully features like explanation driven diagnostic or simulation there is a lack of research about systems which re-uses knowledge from previous technology and allows the technological transfer. Our new strat-egy arises this opportunity as well as an important performance improvement by the combination of the different source of knowledge. Moreover for the start-up operation toward a model based culture a guide of best practice had already been published by Smith et al. (2007) and the work of Shen et al. (2010) presents useful information about the integration of IT-solutions which could be applied if our approach is for example implemented in the industrial solution: SIDIS Enterprise. 4. Conclusion
The performance measurements resulted from our experiences on 3 vehicles, a case base of 7 breakdowns and data fed with 90 protocols of diagnosis sessions, show a possible application on a large scale of our approach. The decrease of the orbit reaches an average value of 17.6% per diagnostic session. This represents an economy of 2500 working hours a day if scaled to the after sales network of a manufacturer in a country like Germany. Combined with our previous work (see Section 1.1.2), the module of symptom retrieval reaches an economy of 3.28 test per diagnostic session and the module for the support of the edition of the ECU database reaches 37,5% time economies. But still some related areas such as automated modeling, automated knowledge extrac-tion from documents, automated model abstraction and auto-mated diagnosis on data should be explored in order to bridge the gap between research world and industry for a successful transfer of MBD technology. The feedback engine should also be improved by decision trees for the rejection or the acceptance of a coefficient.
 Acknowledgments This work has been partly performed within Siemens AG
Company (Germany). The authors wish to thank this company for the support and opportunities offered for performing this research work as well as the investment of the automotive department for giving access to the product SIDIS Enterprise, to formation material (presentations, specifications) and for the discussion to share the knowledge about the after-sales process in major automotive industries. We are also indebted with the members of the European Network of Excellence (MONET) and the Qualitative Modeling Group (MQM) for their support and their documentation.
 References
