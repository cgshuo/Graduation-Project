 The online travel agency, or e-Tourism website, is more and more prevalent in the web, such as expedia.com, priceline.com, hotels.com, booking.com, etc. By taking the advantages of the increasing availability of such rich choices, users enjoy the conven-short time. Therefore, the itinerary planning system is necessary to help travelers making tourism decisions. Traditional recommender systems [1,3] have been applied to recommend eligible POIs for tourists. However, these approaches could not generate sequences and routes between POIs. Existing itinerary planning approaches [2,4,5,6] solely consider ar-ranging tourism resources in a single destin ation. When travelers are going to make a tourism decision for several destinations, such systems are unable to provide a multi-city itinerary with transportation and lodgings between cities. Furthermore, many travel websites, such as booking.com and so on, which are static or interactive sys-tems, highly require users involving the decision process. This is a rather time con-suming process to compare hotel/flight/POI options. 
Our itinerary planning system intelligently provides a multi-city itinerary for tour-ists, including POIs, hotels, transportations, and the detailed visiting schedules for these destinations. In addition, our system allows travelers specifying constraints, e.g., the starting and ending location/time, budgets, the selected attractions, etc. Moreover, we decompose this multi-city itinerary planning problem into two sub-problems: in-ter-city planning and intra-city planning. This process can degrade complexity, reduce the solution space and satisfy different traveling purposes, business or tourism. To the best of our knowledge, this is the first approach which provides a general solution to build itinerary plans between and inside destinations. 
To achieve these functionalities, in this paper, we propose an ACO-based itinerary planning algorithms to efficiently discover high utility itineraries. The experimental result confirms that ACO algorithm outperforms other trip planning algorithms [4, 5] in terms of effectiveness and efficiency. Moreover, we implement an itinerary plan-ning system, gTravel, based on our proposed algorithms. A case study on gTravel is also provided to show the prac ticability of the proposed approach. In this section, we propose an automatic itinerary planning approach by using ACO algorithm-based algorithm and utility functions (measure the quality of itineraries). paper, is formally defined as: given a set of constraints, such as budget, a start-which includes POIs, hotels, transportations between cities and routes between POIs. 2.1 Algorithm Our approach divides multi-city planning into inter-city planning which considers the resource of transportations between cities and lodgings at each destination and intra-city planning of POIs and visiting sequences. We also estimate visiting time and tran-ACO approach to discover proper traveling plan s for users, so we take intra-city algo-rithm in this paper as an example to show how to develop itinerary algorithms. 
The resources considered in our ACO algorithm include three types: POIs, hotels and transportations. In ACO algorithm, the domain of each resource consists of solu-planned after  X   X  with its domain value of  X   X   X  . A pheromone model is used to probabil-istically generate solutions from a finite set of solution components and iteratively update the pheromone values to search in regions which contain high quality solu-tions. The pheromone model consists of pheromone trail parameters. The pheromone trail value, denoted by  X   X   X  , is associated with each component  X   X   X  . A number of artifi-cial ants search for good solutions to the considered optimization problem. The ants construct solutions from a finite set of available solution components. At the begin-ning, solutions are initialized with an empty set of components. Then, at each construction step, the current partial solution is extended by adding a feasible solution component  X   X   X  . Each ant selects  X   X   X  in a probabilistic way by the following equation:  X  X  X  X   X  stores the list of resources that ant k has passed which ensures that ant k does not choose resources repeatedly; and  X  X  X   X   X   X  is a function to compute the domain val-ue  X   X   X  .

In addition,  X  and  X  represent the importance of the pheromone value and the heu-other ants guidance is. We note that it tends to be greedy algorithm if  X  set as a high value. 
The ants construct the solutions as follows. Each ant selects tourism resources in a probabilistic way incrementally building a solution until it reaches the ending time. The algorithm then evaluates the quality of the solutions that ants found by computing finding process, the system would estimate whether the termination criterion is satis-the pheromone values by using the following equation:  X  X   X  depends on the quality of the generated solutions. Subsequent ants utilize the phe-romone information as a guide towards more promising regions of the searching space. 2.2 Utility Function We note that in the ACO algorithm, we should define utility functions to calculate the example, we discuss how we define the utility metrics in this study. functions. We assume that the higher is the rank of the POIs, the better is the itinerary; the fraction of the time spent for visiting POIs instead of transportation, the better is the itinerary. Such, we propose the utility f unction for intra-city planning as follows:  X  X  X   X   X  denotes the rank of  X   X  . 
We note that the inter-city utility function can be also defined similar to the intra-city utility function. When designing the inter-city utility functions, price, comfort level and distances should be considered and a similar function can also be defined. 3.1 Experimental Results We evaluate our approach on popular travel destinations in China using real and syn-thetic datasets extracted from DaoDao 1 , elong 2 , Flickr 3 . There are 26650 hotels, 9203 POIs and more than 3000 transportation choices. The goal of our experiments is to evaluate our itinerary planning approach in terms of the performance of the algorithm and the quality of generated itinerary by comparing with the greedy algorithm (Gree-dy) [4] and the guided local search meta-heuristic algorithm (GLS) [5]. Table 1 lists the means and variances of the utility and time of algorithms after running 100 times of each algorithm by the time budget and the number of POIs setting as 12 hours and 40 POIs. 
From the average value of utility and running time, we can see in this situation, our algorithm outperforms GLS and Greedy algorithm in terms of effectiveness. In the way of efficiency, our algorithm is better than GLS algorithm. Also, from the variance, we can see that our algorithm is relatively stable. We have also conducted few experiments to compare the performances between our model and other two commonly-used trip planning approaches, the results also confirm the effectiveness and efficiency of our approach. Due to the limitation of this paper, we do not show these results. 3.2 Case Study We have built an itinerary planning system, gTravel, based on our proposed approach. In this section, we make use of an example to illustrate the practicability of gTravel: a traveler is going to visit Beijing, Shanghai and Guangzhou from San Francisco at 2012/3/15 and return at 2012/3/23; and he/she wants to spend about 2 days in each city; also, the budget of 20,000 Yuan and 2000 Yuan in each city are cost constraints. gTravel helps this potential traveler organize his/her itinerary by our proposed model. The detailed itinerary is listed in table 2. This work proposes an itinerary planning approach that incorporates ACO algorithm to find one of the best combinations of tourism resources, such as transportations, lodgings, and POIs. To the best of our knowledge, this is the first approach which is trip planning systems to generate itineraries. We have executed empirical studies on real data collected from the Web and the experimental results show that our model outperforms some existing itinerary planning approaches both in effectiveness and efficiency. In addition, we conduct a case study illustrating the versatility of our framework. Acknowledgment. This work was supported partly by National Natural Science Foundation of China (No. 61103031), partly by China 863 program (No. 2012AA011203), partly by the State Key Lab for Software Development Environ-ment (No. SKLSDE-2010-ZX-03), and partly by the Fundamental Research Funds for the Central Universities (No. YWF-12-RHRS-016). 
