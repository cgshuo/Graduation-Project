 The translation quality of statistical phrase-based systems (Koehn et al., 2003) is heavily dependent on the quality of the translation and reordering mod-els generated during the phrase extraction algo-rithm (Ling et al., 2010). The basic phrase extrac-tion algorithm uses word alignment information to constraint the possible phrases that can be extracted. It has been shown that better alignment quality gen-erally leads to better results (Ganchev et al., 2008). However the relationship between the word align-ment quality and the results is not straightforward, and it was shown in (Vilar et al., 2006) that better alignments in terms of F-measure do not always lead to better translation quality.

The fact that spurious word alignments might oc-cur leads to the use of alternative representations for word alignments that allow multiple alignment hy-potheses, rather than the 1-best alignment (Venu-gopal et al., 2009; Mi et al., 2008; Christopher Dyer et al., 2008). While using n-best alignments yields improvements over using the 1-best align-ment, these methods are computationally expen-sive. More recently, the method described in (Liu et al., 2009) produces improvements over the meth-ods above, while reducing the computational cost by using weighted alignment matrices to represent the alignment distribution over each parallel sen-tence. However, their results were limited by the fact that they had no method for extracting a reorder-ing model from these matrices, and used a simple distance-based model.

In this paper, we propose two methods for gener-ating the MSD (Mono Swap Discontinuous) reorder-ing model from the weighted alignment matrices. First, we test a simple approach by using the 1-best alignment to generate the reordering model, while using the alignment matrix to produce the translation model. This reordering model is a simple adaptation of the MSD model to read from alignment matrices. Secondly, we develop two algorithms to infer the re-ordering model from the weighted alignment matrix probabilities. The first one uses the alignment infor-mation within phrase pairs, while the second uses contextual information of the phrase pairs.

This paper is organized as follows: Section 2 de-scribes the MSD model; Section 3 presents our two algorithms; in Section 4 we report the results from the experiments conducted using these algorithms, and comment on the results; we conclude in Sec-tion 5. Moses (Koehn et al., 2007) allows many config-urations for the reordering model to be used. In this work, we will only refer to the default config-uration (msd-bidirectional-fe), which uses the MSD model, and calculates the reordering orientation for the previous and the next word, for each phrase pair. Other possible configurations are simpler than the default one. For instance, the monotonicity model only considers monotone and non-monotone orien-tation types, whereas the MSD model also considers the monotone orientation type, but distinguishes the non-monotone orientation type between swap and discontinuous. The approach presented in this work can be adapted to the other configurations.

In the MSD model, during the phrase extraction, given a source sentence S and a target sentence T , the alignment set A , where a j i is an alignment from i to j , the phrase pair with words in positions between i and j in S , S j i , and n and m in T , T m n , can be classified with one of three orientations with respect to the previous word:  X  The orientation is monotonous if only the pre- X  The orientation is swap, if only the next word  X  The orientation is discontinuous if neither of
The orientations with respect to the next word are given analogously. The reordering model is gener-ated by grouping the phrase pairs that are equal, and calculating the probabilities of the grouped phrase pair being associated each orientation type and di-rection, based on the orientations for each direction that are extracted. Formally, the probability of the phrase pair p having a monotonous orientation is given by: Where C ( o ) is the number of times a phrase is ex-tracted with the orientation o in that group of phrase pairs. Moses also provides many options for this stage, such as types of smoothing. We use the de-fault smoothing configuration which adds the fixed value of 0.5 to all C ( o ) . When using a weighted alignment matrix, rather than working with alignments points, we use the probability of each word in the source aligning with each word in the target. Thus, the regular MSD model cannot be directly applied here.

One obvious solution to solve this problem is to produce a 1-best alignment set along with the align-ment matrix, and use the 1-best alignment to gen-erate the reordering model, while using the align-ment matrix to produce the translation model. How-ever, this method would not be taking advantage of the weighted alignment matrix. The following sub-sections describe two algorithms that are proposed to make use of the alignment probabilities. 3.1 Score-based Each phrase pair that is extracted using the algorithm described in (Liu et al., 2009) is given a score based on its alignments. This score is higher if the align-ment points in the phrase pair have high probabili-ties, and if the alignment is consistent. Thus, if an extracted phrase pair has better quality, its orienta-tion should have more weight than phrase pairs with worse quality. We implement this by changing the C ( o ) function in equation 1 from being the number of the phrase pairs with the orientation o , to the sum of the scores of those phrases. We also need to nor-malize the scores for each group, due to the fixed smoothing that is applied, since if the sum of the scores is much lower (e.g. 0.1) than the smoothing factor (0.5), the latter will overshadow the weight of the phrase pairs. The normalization is done by setting the phrase pair with the highest value of the sum of all MSD probabilities to 1, and readjusting other phrase pairs accordingly. Thus, a group of 3 phrase pairs that have the MSD probability sums of 0.1, 0.05 and 0.1, are all set to 1, 0.5 and 1. 3.2 Context-based We propose an alternative algorithm to calculate the reordering orientations for each phrase pair. Rather than classifying each phrase pair with either monotonous ( M ), swap ( S ) or discontinuous ( D ), we calculate the probability for each orientation, and use these as weighted counts when creating the re-ordering model. Thus, for the previous word, given a weighted alignment matrix W , the phrase pair be-tween the indexes i and j in S , S j i , and n and m in T , T m n , the probability values for each orientation are given by: These formulas derive from the adaptation of con-ditions of each orientation presented in 2. In the regular MSD model, the previous orientation for a phrase pair is monotonous if the previous word in the source phrase is aligned with the previous word in the target phrase and not aligned with the next word. Thus, the probability of a phrase pair to have a monotonous orientation P c ( M ) is given by the prob-ability of the previous word in the source phrase being aligned with the previous word in the target phrase W n  X  1 i  X  1 , and the probability of the previous word in the source to not be aligned with the next word in the target (1  X  W n  X  1 j +1 ) . Also, the sum of the probabilities of all orientations ( P c ( M ) , P c ( S ) , P ( D ) ) for a given phrase pair can be trivially shown to be 1. The probabilities for the next word are given analogously. Following equation 1, the func-tion C ( o ) is changed to be the sum of all P c ( o ) , from the grouped phrase pairs. 4.1 Corpus Our experiments were performed over two datasets, the BTEC and the DIALOG parallel corpora from the latest IWSLT evaluation 2010 (Paul et al., 2010). BTEC is a multilingual speech corpus that contains sentences related to tourism, such as the ones found in phrasebooks. DIALOG is a collection of human-mediated cross-lingual dialogs in travel situations. The experiments performed with the BTEC cor-pus used only the French-English subset, while the ones perfomed with the DIALOG corpus used the Chinese-English subset. The training corpora con-tains about 19K sentences and 30K sentences, re-spectively. The development corpus for the BTEC task was the CSTAR03 test set composed by 506 sentences, and the test set was the IWSLT04 test set composed by 500 sentences and 16 references. As for the DIALOG task, the development set was the IWSLT09 devset composed by 200 sentences, and the test set was the CSTAR03 test set with 506 sen-tences and 16 references. 4.2 Setup We use weighted alignment matrices based on Hid-den Markov Models (HMMs), which are produced by the the PostCAT toolkit 1 , based on the poste-rior regularization framework (V. Grac  X a et al., 2010). The extraction algorithm using weighted alignment matrices employs the same method described in (Liu et al., 2009), and the phrase pruning threshold was set to 0.1. For the reordering model, we use the distance-based reordering, and compare the results with the MSD model using the 1-best alignment. Then, we apply our two methods based on align-ment matrices. Finally, we combine our two meth-ods above by adapting the function C ( o ) , to be the sum of all P c ( o ) , weighted by the scores of the re-spective phrase pairs. The optimization of the trans-lation model weights was done using MERT, and each experiment was run 5 times, and the final score is calculated as the average of the 5 runs, in order to stabilize the results. Finally, the results were eval-uated using BLEU-4, METEOR, TER and TERp. The BLEU-4 and METEOR scores were computed using 16 references. The TER and TERp were com-puted using a single reference. 4.3 Reordering model comparison Tables 1 and 2 show the scores using the differ-ent reordering models. Consistent improvements in the BLEU scores may be observed when changing from the MSD model to the models generated us-ing alignment matrices. The results were consis-tently better using our models in the DIALOG task, since the English-Chinese language pair is more de-pendent on the reordering model. This is evident if we look at the difference in the scores between the distance-based and the MSD models. Further-more, in this task, we observe an improvement on all scores from the MSD model to our weighted MSD models, which suggests that the usage of alignment matrices helps predict the reordering probabilities more accurately.

We can also see that the context based reordering model performs better than the score based model in the BTEC task, which does not perform sig-nificantly better than the regular MSD model in this task. Furthermore, combining the score based method with the context based method does not lead to any improvements. We believe this is because the alignment probabilities are much more accurate in the English-French language pair, and phrase pair scores remain consistent throughout the extraction, making the score based approach and the regular MSD model behave similarly. On the other hand, in the DIALOG task, score based model has bet-ter performance than the regular MSD model, and the combination of both methods yields a significant improvement over each method alone.

Table 3 shows a case where the context based model is more accurate than the regular MSD model. The alignment is obviously faulty, since the word  X  X wo X  is aligned with both  X  X eux X , although it should only be aligned with the first occurrence. Furthermore, the word  X  X win X  should be aligned with  X  ` a deux lit X , but it is aligned with  X  X ham-bres X . If we use the 1-best alignment to compute the reordering type of the sentence pair  X  X e voudrais r  X  eserver deux X  /  X  X  X  X  like to reserve two X , the re-ordering type for the following orientation would be monotonous, since the next word  X  X hambres X  is falsely aligned with  X  X win X . However, it should clearly be discontinuous, since the right alignment for  X  X win X  is  X  ` a deux lit X . This problem is less seri-ous when we use the weighted MSD model, since the orientation probability mass would be divided between monotonous and discontinuous since the probability weighted matrix for the wrong alignment is 0.5. On the BTEC task, some of the other scores are lower than the MSD model, and we suspect that this stems from the fact that our tuning process only attempts to maximize the BLEU score. In this paper we addressed the limitations of the MSD reordering models extracted from the 1-best alignments, and presented two algorithms to ex-tract these models from weighted alignment matri-ces. Experiments show that our models perform bet-ter than the distance-based model and the regular MSD model. The method based on scores showed a good performance for the Chinese-English language pair, but the performance for the English-French pair was similar to the MSD model. On the other hand, the method based on context improves the results on both pairs. Finally, on the Chinese-English test, by combining both methods we can achieve a BLEU improvement of approximately 1.5%. The code used in this work is currently integrated with the Geppetto toolkit 2 , and it will be made available in the next version for public use. This work was partially supported by FCT (INESC-ID multiannual funding) through the PIDDAC Pro-gram funds, and also through projects CMU-PT/HuMach/0039/2008 and CMU-PT/0005/2007. The PhD thesis of Tiago Lu  X   X s is supported by FCT grant SFRH/BD/62151/2009. The PhD the-sis of Wang Ling is supported by FCT grant SFRH/BD/51157/2010. The authors also wish to thank the anonymous reviewers for many helpful comments.

