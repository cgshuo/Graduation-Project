 Influence is a complex and subtle force that governs the dynam ics of social networks as well as the behaviors of involved users . Un-derstanding influence can benefit various applications such as viral marketing, recommendation, and information retrieval. Ho wever, most existing works on social influence analysis have focuse d on verifying the existence of social influence. Few works syste mat-ically investigate how to mine the strength of direct and ind irect influence between nodes in heterogeneous networks.

To address the problem, we propose a generative graphical mo del which utilizes the heterogeneous link information and the t extual content associated with each node in the network to mine topi c-level direct influence. Based on the learned direct influence , a topic-level influence propagation and aggregation algorit hm is pro-posed to derive the indirect influence between nodes. We furt her study how the discovered topic-level influence can help the p redic-tion of user behaviors. We validate the approach on three di ff erent genres of data sets: Twitter, Digg, and citation networks. Q ual-itatively, our approach can discover interesting influence patterns in heterogeneous networks. Quantitatively, the learned to pic-level influence can greatly improve the accuracy of user behavior p redic-tion.
 J.4 [ Social and Behavioral Sciences ]; H.4.m [ Information Sys-tems ]: Miscellaneous; G.3 [ Probability and Statistics ]: Models Algorithms, Experimentation, Human Factors Social influence, Influence propagation, Behavior predicti on
It is well recognized that influence is a complex and subtle fo rce that governs the dynamics of social networks. With the power of influence, a company can market a new product by first convinci ng a small number of influential users to adopt the product and th en triggering cascade further adoptions through the e ff ect of  X  X ord of mouth X  in the social network (also referred to as influence ma xi-mization [6, 22, 14, 18]). In academic networks, with the infl u-ence between research collaborators, novel ideas or innova tions may quickly spread and lead the blooming of new academic di-rections. In microblogging networks (e.g., Twitter), an in fluential user can induce her / his friends to post / re-tweet a blog on a specific topic, e.g.,  X  X bama X .

Recently, social influence analysis has attracted consider able re-search interests. However, most existing works have focuse d on validating the existence of influence [1, 4], or studying the maxi-mization of influence spread in the whole network [14, 3], or m od-eling only direct influence in homogeneous networks [5, 28, 3 1]. The micro-level mechanisms of social influence in heterogen eous networks, e.g., the influence strength of a user on his / her friends at a specific topic, have been largely ignored. Moreover, bes ides the direct influence, another interesting question is  X  X oes the influ-ence exist between users who are not connected? X  In another w ord,  X  X oes a user have a certain indirect influence on his / her friends X  friends in the social network? X  Christakis and Fowler [8, 30 ] have studied a special case of this problem, i.e., influence of hap piness, and showed that within a social network, happiness spreads a mong people up to three degrees of separation, which means when yo u feel happy, your friend X  X  friend X  X  friend has a higher likel ihood to feel happy too. However, they only qualitatively test this fi nding on two small data sets. Therefore, to understand the underlyin g social dynamics, a systematic study on the problem of mining direct and indirect influence in heterogeneous networks is clearly nee ded. Motivating Example To clearly motivate this work, we conduct an influence analysis on three di ff erent types of social networks: whether a user posts / re-tweets a blog on a specific topic. On Digg, the action is defined as whether a user submits / votes a story on a topic. On Cora, we define the action as whether a user publishe s a paper on a topic. For example, on Twitter, if a user posts a twe et on  X  X bama X  and his friend (or an n -degree friend) re-tweets it or also posts a tweet on this topic, we say that the friend is influ enced by the user. In the analysis, the influence strength is estima ted by the averagely increased probability ( p 1  X  p 2 ) for all users, where p is the probability of a user X  X  n -degree friends performing the ac-tion when the user has already performed the action and p average probability of users to perform the action over the w hole 1 http: // www.twitter.com, a microblogging system. 2 http: // www.digg.com, a social news sharing and voting website. 3 http: // www.cs.umass.edu / mccallum / code-data.html, a biblio-graphic citation network Figure 2: n (1  X  n  X  4) -degree influence in the three networks: Twitter, Digg, and Cora. The x-axis stands for the degree of friends network, which is used to consider the factor of topic popula rity. The analysis includes two aspects: (1) n (1  X  n  X  4) degree influ-ence; and (2) topic-level influence.

Fig. 2 shows the n -degree influence patterns for the three net-works. We see that not only the actions of 1-degree friends wo uld be influenced, but also 2-degree (even 4-degree) friends cou ld be also influenced. For example, on Digg, when a user votes a stor y on a topic, his friends X  friends (2-degree friends) average ly have a 20 + % higher probability to vote (or submit) a story of this topic . However, the influence strength decreases with the increase of de-gree on average. For example, the 2-degree influence strengt h is al-most half of 1-degree influence strength on Digg. It can be als o seen that the three networks have very di ff erent influence patterns. In Fig. 3, we further analyze the topic-level influence on Twitt er. We study the n -degree influence on three topics:  X  X bama X ,  X  X phone X  and  X  X vatar X . An interesting phenomenon is that on some topi cs the 2-degree influence is even stronger than the 1-degree infl uence (e.g., on  X  X vatar X ). This is because  X  X vatar X  is a very popul ar topic, on which the social users may be mainly influenced by the globa l trend (or more accurately, local community trend) in the soc ial net-work, instead of one or two friends.
 Problems and Contributions Thus our objective is to e ff ectively and e ffi ciently discover the underlying influence patterns in het-erogeneous networks. The problem can be clearly explained b y Fig. 1. The input is a heterogeneous network consisting of do cu-ments, users, and links between them. Topic-level influence mining can be decomposed into two subtasks: topic distribution mod eling and direct (and indirect) influence strength estimation. Th e former is to associate a topic distribution with each node in the soc ial net-work and the latter is to estimate the influence strength (inc luding indirect) between users. The middle figure illustrates the o utput of topic-level influence mining. The solid arrow indicates t he di-Figure 3: Topic-level influence on Twitter for three topics:  X  X Phone X ,  X  X bama X , and  X  X vatar X . x-axis stands for n = 1 , , 4 rect influence and the dashed arrow indicates the indirect in fluence. Our last task is to validate how the discovered topic-level i nfluence can really help. A straightforward application is to utiliz e the dis-covered influence to help predict user behaviors, that is, to predict who will perform an action in the future.

To summarize, this work contributes on the follow aspects:  X  We formally formulate the problem of topic-level influence m in- X  We propose a topic-level influence propagation process to mi ne  X  We apply the discovered topic-level influence to user behavi or  X  We conduct experiments on three di ff erent types of data sets:
The rest of the paper is organized as follows: Section 2 forma lly formulates the problem; Section 3 and Section 4 explain the p ro-posed approach. Section 5 introduces the application of use r behav-ior prediction based on the discovered influence. Section 6 p resents experimental results that validate the e ff ectiveness of our method-ology. Finally, Section 7 discusses related work and Sectio n 8 con-cludes.
In this section, we introduce several related concepts and t hen formally formulate the problem of mining topic-level influe nce in heterogeneous networks.

D efinition 1. [Heterogeneous Network] Define a network G = ( V , E ;  X  ) . V is a set of nodes, which are classified into T types  X  = { X t } T t = 1 , where X t is a set of nodes with the t  X  th type. The edge set E  X  V  X  V denotes the connections between nodes. For  X  e uv = ( u , v )  X  E, if there exists an edge between u and v, e otherwise e uv = 0 . The edges can be directed or undirected. Most online social networks are heterogeneous (e.g., Twitt er, Digg and citation networks), consisting of more than one typ e of nodes, e.g., user nodes and document nodes (stories, tweets , pa-pers, and other objects). Thus links in heterogeneous netwo rks are comprised of friendships between users, authoring rela tionships between users and documents and links between documents. Th e links can be directed or undirected. For example, on Twitter and citation networks, the links between nodes are directed, fr om cited papers to citing papers or from normal users to their followe rs. On Digg social network, the links between users are undirected . Fur-thermore, we assume that the influence of a user on other users can be propagated along social links, thus we have the follow ing definition.

D efinition 2. [Direct and Indirect Influence] Given two user nodes u , v in a heterogeneous network, we denote  X  v ( u )  X  R as the influential strength of user u on user v. Furthermore, if e we call  X  v ( u ) the direct influence of user u on v; if e  X  ( u ) the indirect influence of user u on v.

Direct influence indicates the influence between two nodes wh ich are connected while indirect influence indicates the influen ce of two nodes which are not connected. Please note that the influe nce is asymmetric, i.e.,  X  v ( u ) ,  X  u ( v ). Based on the influence between node pairs, we can further define the concept of global influen ce.
D efinition 3. [Global Influence] Given a heterogeneous net-work,  X  ( v ) is defined as the global influence of v, which represents the global influential strength of v over the whole network.
The global influence strength has a close relationship with t he di-rect / indirect influence. For example, if a user has a strong influen ce on other users, it is probably that he is very influential glob ally. In this work, we only consider influence between nodes with the s ame type, e.g., the influence between users. The influence among d i ff er-ent types of nodes, e.g., the influence from authors to docume nts or from documents to authors, is not included in our goals due to the di ffi culty for meaning explanation and quantitative measure.
Our formulation of topic-level influence mining is quite di ff er-ent from existing works on social influence analysis. For soc ial influence analysis, works [1] and [25] studied how to qualita tively measure the existence of influence. Crandall etc. [4] studie d the correlation between social similarity and influence. Howev er, they focus on qualitative identification of the existence of influ ence, but do not provide a quantitative measure of the influential stre ngth. Works [9, 28, 31] investigated how to learn the influence prob a-bilities from the history of user actions. However, these me thods either do not consider the influence at the topic-level or ign ore the indirect influence. Another challenge which has not been stu died extensively before is how to learn the topic distributions a nd the topic-level influence jointly.
In most real networks, users may be interested in di ff erent top-ics, e.g., an author in citation networks may be interested i n topics  X  X atabase X  and  X  X ata mining X . The influence strength betwee n two users may also vary with di ff erent topics, which has been qualita-tively verified in sociology [10, 17]. Furthermore, the influ ence can be direct or indirect, which is referred to as n -degree of influence [8, 30]. Thus, to summarize, we have the following intuition s for topic-level influence mining: 1. Each node v is associated with a vector  X  v  X  R T of T -dimensional 2. The influence  X  v ( u ) of user u on v can be direct ( e 3. The behavior of a user is either influenced by his / her n -degree The last intuition can be better explained by an example on Di gg. A user may dig a story because he is following the action of his friends who have digged this story (or a story on the same topi c) or simply because he is interested in this topic.

Therefore, from the technique aspect, our objective is to de sign a method to learn the user interests (the associated topic dis tribution) and to estimate the (in)direct influence between users simul tane-ously. In this paper, we propose a topic-level influence mode ling framework. First, by combining both textual information an d link information in heterogeneous networks, we present a probab ilistic generative model to learn user interests which are represen ted as topic distributions and direct influence between users at th e topic-level simultaneously. Second, based on the topic-level dir ect influ-ence, we propose an influence propagation process to derive i ndi-rect influence between users.
Influence is interacted with many potential factors, e.g., s imilar-ity, correlation and etc. [1, 4]. Commonsense knowledge is n eeded to quantitatively model the influence strength. Here we have two general assumptions.

A ssumption 1. Users with similar interests have a stronger in-fluence on each other.

This assumption actually corresponds to the influence and se lec-tion theory [1]. In real networks, the similarity can be calc ulated based on the textual content associated with each user. Thus , in-fluence can be represented as to which extent the textual cont ent is  X  X opied X  from the influencing nodes. For example, in the ci ta-tion network, if the content of document d 1 is very similar to that of document d 2 , we may deem that d 1  X  X opies X  a lot of ideas from d , thus d 1 is influenced by d 2 a lot. Another assumption is about correlation.

A ssumption 2. Users whose actions frequently correlate have a stronger influence on each other.

In heterogeneous networks, the link weight is usually used t o indicate the correlation strength between nodes, which can be cal-culated by the co-occurrence frequency of nodes. For exampl e, if author a and author b jointly write a number of papers, then the two authors have a strong influence on each other. Another exampl e on Twitter, if user a replies or retweets a number of microblogs posted by user b , then a is highly correlated with b and it is very likely that b has a strong influence on a .

Based on these considerations, we propose a probabilistic g en-erative model to jointly learn user interests and the direct influence between users.
Fig. 4 shows the graphical structure of the model, which cont ains two types of links: links between users and links between use rs and documents. The details of the generative process are illust rated in Alg. 1. And Table 1 lists the descriptions of variables. The p ro-posed model consists of two parts. First, we model the intere sts of each user in the corpus (as the left part of Fig. 4), which co r-responds to the first iteration of Alg. 1. Specifically, we ass ume that the topics of documents are generated from users. We rep re-sent each user as a multinomial distribution over topics  X  , thus each word in documents is generated from one topic selected from t he distribution.

Then, we assume that the behavior of each influenced user can be generated in two ways, either depending on his / her interests or influenced by one of his / her friends. E.g., when an author writes a paper, he / she may create the idea innovationally w.r.t. his / her re-search interests or  X  X opy X  it from one of the cited authors. I n the model, we use a parameter s to control the influence situation. s is generated from a Bernoulli distribution whose parameter is  X  . When s = 1, the behavior is generated based on his / her own inter-ests. When s = 0, it means the behavior of the user is influenced by one of his / her friends. Thus we need another parameter  X  to select one influencing user y from the candidate user list A . The last step of the generation process is to select a topic from the topic d istribu-tion of one user, the user himself / herself or one of his / her friends, based on which the word is generated.

In the above generative process, A is determined by real applica-tions, which considers both directed and undirected links b etween users. For example, on Twitter network A denotes the users whom a blog is re-tweeted from while on citation networks it denot es the authors of cited papers. On these networks, the links betwee n users are directed. In some other networks, for example Digg, A denotes the friends of user x who also dig the same story, and the links are undirected. Thus the proposed model is able to handle both ty pes of cases.
The model can be estimated by Gibbs sampling. Gibbs sampling is an algorithm to approximate the joint distribution of mul tiple variables by drawing a sequence of samples, which iterative ly up-dates each latent variable under the condition of fixing rema ining variables. We list the update equations for each variable as below and the details of derivation can refer to the appendix. In al l the update equations, N (  X  ) is the function which stores the number of samples during Gibbs sampling. For example, N d , y , s ( d , y , 0) repre-sents the number of topics / words in d which are supposed to be generated from user y .
After the Gibbs sampling process, we will obtain the sampled coin s i , influencing user y i , and topic z i for each word, and the influence strength can be then estimated by Eq.(6), which are av-eraged over the sampling chain after convergence. K denotes the length of the sampling chain.

The equations reflect our assumptions in a statistical way. T ake citation networks as an example. It indicates that if one aut hor x cites more papers of author y on topic z , then y has a stronger influence on x w.r.t. topic z .
The above probabilistic model only discovers the direct infl u-ence, but does not consider indirect influence. In reality, t here exist di ff erent types of indirect influence. Take Fig. 5(a) as an exampl e. If a 1 influences a 2 and a 2 influences a 3, then a 1 will influence a 3 potentially, i.e., two-degree of influence. Fig. 5(b) demo nstrates the influence enhancement: if a 1 influences a 3 and a 4 while a 3 and a 4 also have an influence on a 2, then the influence from a 1 to a 2 should be enhanced. In this section, we propose a topic-leve l influ-ence propagation algorithm to derive the indirect influence based on the learned direct influence by the above probabilistic mo del.
We first introduce the notion of atomic propagation. The indi rect influence from a 1 to a 3 in Fig. 5(a) can be modeled as a concate-nate result of the direct influence from a 1 to a 2 and the influence from a 2 to a 3. The enhancement of the influence from a 1 to a 2 in Fig. 5(b) can be defined as an aggregate result of the direct in flu-ence among the neighborhood of a 1 and a 2. Therefore, the atomic influence propagation is defined as follows: where Nb ( v ) is the set of neighbors of node v ;  X  is the concatenation function, e.g., multiplication and minimum value;  X  is the aggrega-tion function, e.g., addition and maximum value. In particu lar, if we use multiplication as the concatenation function and add ition as the aggregation function, then the atomic influence propaga tion can be instantiated as:
Matrix operation can be used to represent this atomic propag a-tion process. Suppose M is the transition matrix,  X  0 represents the initial values of influence strength. Then we have  X  new =  X  0 M . It can be easily seen that the direct propagation matrix is  X  0 itself, paths in our initial influence network.
The atomic influence propagation can be performed iterative ly to propagate the direct influence on the entire network. Formal ly, we can define the influence propagation process as following:  X  Enumerate all paths between each two nodes.  X  Calculate the influence propagation strength on each path by  X  Combine the influence strength on all the paths by an aggrega-
In this way, the influence strength on k -length paths can be cal-culated by k steps of atomic propagations.

We use  X  k to denote the influence strength after k steps of atomic propagations and  X  f as the final influence strength that we aim to obtain. Suppose each element M ( u , v ) in the transition matrix M equals to  X  v ( u ). Thus the iterative propagation can be represented  X  ( u ) = M k ( u , v ). We assume that the matrix M k for smaller val-ues of k is more reliable, since there have been fewer propagation steps; while larger values of k may bring in more outside informa-tion. Thus the final influence can be inferred from the sequenc es of propagation via a weighted linear combination [12]: where K is the number of iterations and  X  can be viewed as the damping factor to penalize larger k step propagation. As 0 &lt;  X  &lt; 1 , 0  X   X  k  X  1, when k increases,  X  k  X  1 decreases greatly, which makes the e ff ort of influence on k -length paths very small. In an-other word, we do not need to iterate the influence propagatio n for many times to obtain the final indirect influence, i.e., K can be set as a small number.

The computation complexity of the propagation process in Eq .(9) is a bit expensive O ( | V | 3 K ). Fortunately, when K is small, the tran-sition matrix M would be very sparse (many influence scores in the transition matrix are zero), thus the computation complexi ty actu-ally is reduced to O ( E ) for each iteration. The algorithm of iterative influence propagation is summarized in Alg. 2. We further extend the influence propagation to the topic-lev el. The input of the topic-level propagation is the topic distri bution of each user learned by the probabilistic model (Section 3) and the topic-level direct influence (Eq. (6)). We perform topic-le vel influ-ence propagation in the following steps:  X  Step 0: Input a query topic z .  X  Step 1: According to the topic, the related users are selecte d  X  Step 2: The influence strength related to the topic is used as t he  X  Step 3: Employ Alg. 2 to propagate the influence over the net-
If the influence is propagated on the whole network, we have found that some popular nodes may dominate on all topics. Thu s we choose users based on the topic z to reduce noise.
Global influence is to measure one X  X  influential ability over the whole network. For example, some authors are very influentia l on the topic of  X  X ata mining X . In this section, we propose one wa y to estimate one node X  X  global influence over the whole network.
Intuitively, the global influence of one node on the network  X  ( u ) should be related to its influence on all the other nodes. If on e node strongly influences many other nodes, its global influence mi ght be also strong. Therefore the global influence of a node is define d as an aggregation function of its influence on the other nodes, s pecifi-cally, The influence scores  X  v ( u ) include both direct and indirect influ-ences.
The learned influence strength can be used to help with many applications. Here we illustrate one application on user be havior prediction, i.e., how the learned influence can help improve the per-formance of user behavior prediction.

We evaluate our approach for user behavior prediction on Twi tter and Digg. On Twitter, the behavior is defined as whether a user re-tweets a friend X  X  microblog and on Digg, the behavior is defin ed as whether a user digs a story. We here take Digg as the example fo r explanation. Intuitively, if more friends of a user dig a sto ry, there is a larger probability that the user will also dig it. Thus a v ote-based relational neighbor classifier [19] can be used as a bas eline. Then, we use the influence strength obtained from our approac h to distinguish di ff erent friends X  weights and estimate the probability of users X  digging stories as follows: where Nb ( u ) denotes the friends of u . We can also apply obtained indirect influence weights for prediction. In this situatio n, Nb ( u ) includes 2 or 3 degree of friends.

Besides, the similarity between users can also be used to dis tin-guish di ff erent friends X  weights in the above intuitive method for prediction. Thus the prediction probability is estimated a s Eq.(13) for comparison, where the similarity between users s ( v , u ) is calcu-lated as the Euclidean distance of user distributions over t opics.
We will test the user behavior prediction performance based on the above three methods in the following experiments and dem on-strate the e ff orts of obtained influence strength on social network applications.
In this section, we present various of experiments to evalua te the e ffi ciency and e ff ectiveness of the proposed approach. The data sets Data Sets We prepare three di ff erent types of heterogeneous net-works for our experiments, including Twitter, Digg and cita tion net-works. Twitter is a microblog website, on which users can pub lish blogs and re-tweet friends X  blogs. Digg is a di ff erent type of social website, on which users can submit, dig and comment on storie s. Users also have links to their friends, which indicate their relation-ship. We collected user and document information from these web-sites.  X  Twitter social network The dataset includes about millions of  X  Digg social network The data contain about 1 million stories  X  Citation network We crawled the citation data of about 1000
We apply our model to the above three data sets. The algorithm s were implemented in C ++ and run on an Intel Core 2 T7200 and a processor with 2GB DDR2 RAM. The parameters will be discusse d in the following subsections.
 Evaluation Aspects We evaluate our method on the following three aspects:
Influence strength prediction As it is more intuitive and eas-ier for people to distinguish the influence strength on citat ion net-works, we manually labeled the citation data and test the infl uence prediction performance on it. We compare the results of our a p-proach with previous work [5] to prove our model X  X  better per for-mance in terms of influence prediction.

User behavior prediction We apply the derived influence strength to help predict user behaviors and compare the prediction pe rfor-mance with that of baseline as well as the method based on user similarity as described in Section 5. The results demonstra te how the quantitative measurement of the influence can benefit soc ial net-work applications.

Topic-level influence case study We show several case studies to demonstrate concrete influence weights between users and show 4 http: // arnetminer.org / heterinf how e ff ectively our method can identify the topic-level influence. In particular, we study the global influence of authors on cit ation networks to demonstrate semantic meaning of topic-level in fluence. And we compare the results with that of previous work [28] whi ch also mined topic-level influence to demonstrate the better p erfor-mance of our approach.
In work [5], researchers evaluated the document influence pr e-diction performance on manually labeled data set. We got the same data from the authors and also test the influence prediction p er-formance of our model on it. However, the data set, which only contains 22 citing documents and 132 documents in all, is so s mall that the results could be ad-hoc sometimes. Therefore, besi des us-ing this data, we also manually labeled document influence st rength on the larger data set with about 1000 documents. We classifie d the influence strength into three levels: 1, 2, 3. Similar to [5], we use the quality measure, averaged AUC (Area Under the ROC Curve) values for the decision boundaries  X 1 vs. 2, 3 X  and  X 1, 2 vs. 3 X  for each citing document, to evaluate the prediction performan ce. Fig. 6 shows the comparative results on these two data sets, w here Data1 is the small data set obtained from authors of [5] while Data2 is our larger labeled data set. M 1 and M 2 are used to denote our model and the model in [5] respectively. And we use the real an d dash lines to distinguish the results of these two models in t he fig-ure. We calculated all the AUC values with the number of topic s changing from 10 to 50. Thus this figure demonstrates that on t he small data set our model can achieve as good prediction perfo r-mance as the work in [5] while on the larger data set, our predi ction performance is better than theirs.

Furthermore, we compare the influence prediction performan ce before and after influence propagation on our labeled data se t. Ta-ble 2 shows the AUC values when damping factor  X  and iteration number K changes, which proves that the influence prediction per-formance is enhanced based on indirect influence obtained by influ-ence propagation. Moreover, the influence prediction perfo rmance is robust to the parameters K and  X  . In particular, when K changes, the performance change little, which is consistent to the ob servation in Fig. 2. It means that influence do propagate over the networ k, but the e ff ort of propagation is reduced a lot when the degree increases . We apply our model on Twitter and Digg social networks and Figure 7: User behavior prediction precision on Digg networ k discover the concrete influence strength between users. The n we use the learned influence for user behavior prediction as des cribed in Section 5 to demonstrate the e ff orts of obtained influence on so-cial network applications. In this experiment, we empirica lly set the number of topics to be 30, K = 5 and  X  = 0 . 8.

We randomly select about 3000 tuples from Digg and Twitter data sets as testing samples. Each tuple represents that a us er digs a story or re-tweets a microblog. We estimate each sample X  X  p rob-ability by using the three prediction methods in Section 5. T able 3 shows the average and variance values of the predicted proba bilities on all the samples, where r denotes the degree of indirect influence. The results demonstrate that using influence can improve the pre-dicted probabilities a lot.

Then given a threshold, we calculate the prediction precisi on, which means how many testing samples X  probabilities are lar ger than the threshold. Fig. 7 and 8 show four curves of predictio n pre-cision changing with the threshold on Digg and Twitter data s ets respectively. The results demonstrate that influence-base d behav-ior prediction approach outperforms the baseline and the si milarity-based method. Thus it proves that the influence obtained from our model benefits the user behavior prediction greatly. In part icular, it shows that on Digg social network the indirect influence enha nces the user behavior prediction performance but on Twitter soc ial net-work the indirect influence get lower performance than direc t in-fluence. Furthermore, comparing these two figures, we can get that the e ff ort of influence on Digg social network is larger than that on Twitter social network. The conclusion is consistent to the obser-vation in Fig. 2. Topic-level influence graph
We apply our model on the citation network which we crawled from the Internet and set the number of topics to be 10 empiric ally. Fig. 9 demonstrates the influence relationship between the p apers on the topic  X  X tatistical topic models X . The color bars show the topic distributions of these documents. In order to show the major influencing nodes clearly, we rank the influencing nodes acco rding to each influenced node based on the influence strength and onl y display the top 2 most influencing ones in this figure. Thus we c an Figure 8: User behavior prediction precision on Twitter net -work get that the top 2 most influencing documents on document  X  X DA  X  are  X  X LSA X  and  X  X ariational inference X . Furthermore, the r esults demonstrate that there are many documents which are most infl u-enced by  X  X DA X , e.g.,  X  X he author-topic model X ,  X  X orrelate d topic model X ,  X  X ynamic topic model X  and etc. Besides the influence from  X  X DA X , strong influences also exist among these documents, e .g.,  X  X uthor-topic model X  influences  X  X uthor-recipient-model  X  strongly while  X  X orrelated topic model X  influences  X  X ynamic topic mo del X  a lot.

Fig. 9 also shows the connections between authors and docu-ments by dash lines. The influence between these authors is vi su-alized in Fig. 10. We only draw the lines when the pointing nod es are the top 5 most influencing authors on the pointed nodes. Th e thickness of the lines indicates the influence strength. Fro m the results, we can get some meaningful conclusions. For exampl e, Jordan is one of the most influential researchers to Blei. Alt hough  X  X LSA X  strongly influences  X  X DA X  as Fig. 9 shows, Hofmann doe s not have a great influence on Blei. The reason is that the area o f Hofmann varies from the area of Blei (this can be observed fro m the topic distributions represented by colored bars) and fu rthermore Blei only cited few documents of Hofmann, i.e., correlation value is small. Other interesting results are also obtained, e.g. , the influ-ence of Blei on La ff erty is larger than the influence of La ff erty on Blei. Besides, the self-loop lines which indicate the self-influence show Jordan and Blei influence themselves greatly.
 Topic-level global influence illustration
Table 4 shows an example of author ranking by estimated globa l influence on  X  X tatistical topic models X  ( K denotes the number of propagation steps). The results are very meaningful. If one node has a high reputation over the whole network, it can be treate d as a key node which is very influential over the whole network. In another word, authority of one node can also be used to repres ent its global influence from some point of view. Therefore, we ca n employ Pagerank [21, 13] on topic-level networks to estimat e the nodes X  global influence on one topic. The author ranking base d on the authority from Pagerank is also illustrated. We calcu late the correlation coe ffi cients between the global influence values es-timated in the two ways, which ranges from 0.8 to 0.9 when the number of topics and iteration change. It proves that estima ting global influence based on our framework can get highly-corre lated results with Pagerank authority. Thus, to some extent, it de mon-strates that the influence discovered by our model is consist ent to the global characteristics of the whole network structure.
In order to show the influence results on more general areas, w e selected five categories of documents in Cora data and set the num-ber of topics to be 5. Five meaningful topics according to the five categories: data mining ( X  X M X ), information retrieval ( X  X  R X ), natu-ral language processing ( X  X LP X ), object oriented database ( X  X ODB X ) and database performance ( X  X BP X ) are obtained. Fig. 11 show s several famous authors X  estimated global influence distrib utions on the five topics. The results are very telling. For example, W B ruce is most influential on topic  X  X R X , while R Agrawal and J Han are most influential on topic  X  X M X . It is interesting to find that C Faloust-sos is influential on both topic  X  X M X  and topic  X  X BP X , which is consistent to the real situation. Besides on the two topics r elated to database, D DeWitt is also very influential on topic  X  X M X . T he reason should be that the area  X  X M X  is developed from databas e. Furthermore, Table 5 shows the maximal, minimal and average val-ues of the estimated global influence on the whole network w.r .t. each topic, which demonstrates that these authors almost ha ve the Table 6: Influencing author ranking w.r.t. several authors
Figure 11: Estimated global influence distribution on topic s largest values in their domains. Thus it proves the validity of the way of global influence estimation.
 Topic-level influence comparison
Work [28] also proposed a method to discover topic-level in-fluence. We compare the author influence results obtained by o ur model ( M 1) with the results by the model in [28] ( M 3). As some-times it is hard to label the author influence strength, we onl y show the top 5 most influencing authors on some well-known researc hers: Blei, McCallum and Gri ffi ths obtained by these two models in Ta-ble 6. The results demonstrate that our model can get meaning ful results but M 3 can not. For example, our model discovers that Jor-dan, Blei and Hofmann are one of the most influential research ers for Blei, McCallum and Gri ffi ths respectively. But M 3 does not get these results. As M 3 only uses the link information of author citation, it will lose the information of relationships bet ween au-thors and documents. And the assumption used in [28] which st ates that the node will be more influential if it has a great self-in fluence makes each person most influential on himself.

Similar to our model, M 3 can also get the influence distributions on topics by inputting the nodes X  topic mixtures. But the di ff er-ence is that the topic information is used as an input prior in stead of an integrated parameter in the method M 3 while our method can obtain topics simultaneously. Fig. 12 shows an example of th e in-fluence from Jordan to Blei and compares the topic distributi ons of influence obtained by our model and M 3 respectively. First, Jordan and Blei X  X  distributions on topics are illustrated, which i ndicate that both of them mainly work on Topic 3. Then, we can see that the influence obtained by our model has the largest strength on To pic 3 but the influence distribution from M 3 is flat, from which it is not obvious to tell the influence semantic meaning. Thus it is pro ved that our model can obtain more meaningful topic distributio ns of influence. Heterogeneous Network Analysis Heterogeneous network and source analysis has attracted many researchers X  interests recently [26, 27, 33]. For example, Sun et al.[26, 27] studied the clus tering problem on heterogeneous networks. Ye et al.[33] fused hete roge-neous data sources to study the alzheimer X  X  disease. Many wo rks have tried to combine the su ffi cient information on heterogeneous networks, e.g., the text and links, to detect communities, t o analyze the evolution of networks and to model relational learning [ 32, 2, 34, 29]. Besides, some researchers studied the problem of in forma-tion di ff usion over networks [16, 11].
 Link Influence Analysis Link influence analysis has attracted tremendous interests from both academic and industry commu ni-ties. Many e ff orts have been made for estimating link influence between individual pages. For example, Dietz et al. [5] prop osed a citation influence topic model to model the influential stre ngth between papers. Nallapati et al. [20] proposed two topic mod els to jointly model text and citation relationships. King et al . [15] analyzed the influence factor among paper citation networks . The goal of this kind of work is to estimate the influence of a citat ion in the whole citation collection, thus the objective di ff ers largely from ours.
 Social Influence Analysis Considerable work has been conducted to validate the existence of influence and study its e ff ort from the global view of the whole network, e.g., influence maximizati on on a person network [6, 22, 14, 9, 3]; influence di ff usion over net-works [23]; influence and correlation on social activities [ 1]; cor-relation between influence and similarity [4]. Several e ff orts have been made to identify the existence of social influence in onl ine social networks. For example, Anagnostopoulos et al. [1] ga ve a theoretical justification to identify influence as a source of so-cial correlation when the time series of user actions are ava ilable. They proposed a shu ffl e test to prove the existence of social influ-ence. Singla and Richardson [25] studied the correlation be tween personal behaviors and their interests. They found that in o nline systems people who chat with each other (using instant messa g-ing) are more likely to share interests (their Web searches a re the same or topically similar), and the more time they spend talk ing, the stronger this relationship is. Crandall et al. [4] further i nvestigated the correlation between social similarity and influence. Ta ng et al. [28] introduced the problem of topic-based social influence analy-sis. They proposed a Topical A ffi nity Propagation (TAP) approach to describe the problem using a graphical probabilistic mod el.
More recently, some attempts have been made to analyze the dy -namics in the social networks. For example, Scripps et al. [2 4] investigated how di ff erent pre-processing decisions and di ff erent network forces such as selection and influence a ff ect the model-ing of dynamic networks. Other similar work can be referred t o [7]. However, most of the aforementioned methods only focus on homogeneous networks with the same type of nodes.
In this paper, we study a novel problem of mining topic-level influence on heterogeneous networks. Our approach to solve t his problem primarily consists of two steps, i.e., a probabilis tic model to mine direct influence between nodes and a topic-level influ ence propagation method to mine indirect and global influence. In the probabilistic model, we combine the text content and hetero ge-neous link information into a unified generative process. Th e topic-level influence propagation method further propagates the i nfluence along the links in the entire network. We have done extensive experiments on di ff erent types of heterogeneous networks, show some interesting cases and demonstrate that using influence can benefit the prediction performance greatly.

The general problem of influence analysis on informative net -works represents a new and interesting research direction i n social network mining. There are many potential future directions of this work. One interesting issue is to employ more robust models t o predict user behavior based on the obtained influence streng th and study a semi-supervised learning framework to incorporate user feedbacks into our approach. Another potential issue is to s cale up the approach to large data set.
The work was supported in part by 973 Program of China un-der grant 2011CB302206, and the State Key Program of Nationa l Natural Science of China under grants 60933013, 60833009, a nd 60703059, and National High-tech R&amp;D Program 2009AA01Z138 , and the U.S. National Science Foundation under grant IIS-09 -05215 and by the Army Research Laboratory under Cooperative Agree -ment Number W911NF-09-2-0053 (NS-CTA). Based on the generation process, we can get the posterior pro babil-ity of the whole data set by integrating out the multinomial d istri-butions  X , X , X , X , X  because the model uses only conjugate priors.
In the following, we exemplify the derivation of the update e qua-tion for s i and the other variables are derived analogously. The conditional of s i is obtained by dividing the joint distribution of all variables by the joint with all variables but s i (denoted by ~ s canceling factors that do not depend on ~ s  X  i .
We derive the first fraction of Eq. (15) (the second fraction i s derived analogously). As we assume that s i is generated from a Bernoulli distribution  X  whose Dirichlet parameters are  X  then we can get p ( s i | ~  X ,~ x ) = is the function which stores the number of samples during Gib bs sampling. For example, N x , s ( x i , 0) represents the number of sam-ples when user x i is influenced to generate a topic. Because we only use conjugate priors in the model, the multinomial-Dir ichlet integral in Eq. (15) has a closed form solution. Thus we can ge t that when s i = 0, the first fraction can be derived as below
The other equations can be derived analogously.
