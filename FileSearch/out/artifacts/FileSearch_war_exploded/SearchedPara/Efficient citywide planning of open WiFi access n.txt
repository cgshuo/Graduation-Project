 1. Introduction
During the last decade, wireless local area networks (specially the IEEE 802.11 set of standards, hereafter coined as WiFi) have emerged as a cost-affordable yet high-speed in-home, in-building and broadband access solution. In fact, nowadays WiFi access technology is available in the practical majority of laptops, mobile phones and Personal Digital Assistants (PDAs). According to several reports, by the year 2010 WiFi has been used by over 700 million people spread over more than 750,000 hotspots around the world (i.e. places with WiFi internet connectivity), as well as by 94 millions of laptops and 526 millions of smart-phones. This trend in WiFi communications is predicted to grow sharply to yield more than 7100 million WiFi-enabled devices worldwide by 2015 ( Cisco Annual Report, 2012 ).
 Encouraged by the rising popularity of WiFi-enabled Digital Subscriber Line (DSL) routers, Internet Service Providers (ISPs) are considering to expand the wireless connectivity offered to end users by allowing customers to seamlessly share their access bandwidth with third parties. However, the limited transmit power of ADSL WiFi routers bounds their radio coverage to their exclusive and restricted utilization in homes, offices and several small-area public spaces. Certainly, by allocating a certain fraction of the under-utilized bandwidth of WiFi-enabled DSL routers for third-party access and exploitation, the sharing rate and coverage of the resulting open-access network would increase significantly, enhancing the network support of ubiquitous WiFi services and applications. Indeed, the deployment of open citywide WiFi access networks embodies a topic on which immense technical and economical efforts are being invested, mainly due to the interest of telecommunication companies and local governments in supplying citizens with a low-cost ubiquitous access network to the Internet. Along with this rationale, it is important to note that open WiFi represents an enormous market opportunity for wireless networking services and mobile applications based on this technology. This point has not been ignored by a number of companies in the sector, which have consequently started work-ing towards providing suitable software and hardware compo-nents so as to share existing broadband access infrastructure in a safe and controlled manner.

In this context, whereas telecommunication operators aim at expanding the coverage of cellular-a-like wireless networks such as WiMax, EDGE or UMTS, small companies such as FON (2012) ,
WHISHER (2012) , WIFI (2012) ,or Wireless NOMAD (2012) follow an alternative approach: to build communities that share internet access via WiFi enabled routers. In addition, many councils and local governments are pushing the idea of offering citywide wireless access as part of the basic infrastructure, such as Paris,
Berlin and San Francisco (which has a four-square-mile deploy-ment of free WiFi operated by Meraki networks and partly supported by Google and Sequoia Capital). Notwithstanding these scarce initiatives attempting at providing ubiquitous Internet access through the addition of new infrastructure, sharing the under-utilized access bandwidth of WiFi routers in a seamless fashion is deemed to be the most efficient solution to support citywide access networking in terms of scalability, complexity and cost.
 eral technological challenges, to which solid research is being devoted. To begin with, many previous works on the design of citywide networks concentrate on security aspects of such deployments ( Sastry et al., 2007 ; Takahashi et al., 2010 ; Heer et al., 2007 ). In Sastry et al. (2007) the authors present a novel mechanism to handoff the host X  X  responsibility to a trusted point by tunneling the guest X  X  packets through it. This guarantees that the guest X  X  traffic cannot be subverted by malicious hosts and it is presented as an economically viable alternative to investing in new infrastructure. In Takahashi et al. (2010) the problem of intrusion detection is examined, by means of network traffic classifications, that act as the fingerprints for possible intruder users. In Heer et al. (2007) the user authentication problem is considered. WiFi communities which allow their users to share their Internet connections are often insecure and allow eaves-droppers to gather sensitive information on the wireless link. To circumvent this issue, in Heer et al. (2007) an efficient, scalable, and secure access control for large WiFi sharing systems is proposed. On the other hand, topology-related issues also stem from the implementation of shared WiFi access. For instance, the system capacity limitations when access point coverage areas overlap is analyzed in Amaldi et al. (2004) , since the appropriate positioning of the access points (APs) is crucial in order to determinate the network effectiveness. Thus, optimization mod-els with hyperbolic and quadratic objective functions that directly account for system capacity are described, and different heuristics combining greedy and local search phases are proposed. Further-more, a solution that enables controlled sharing of existing broadband connections to increase wireless access coverage is described in Solarski et al. (2006) . The feasibility of the solution is assessed by performing an accurate study of urban networking using IEEE 802.11 technology in this type of environments and, taking advantage of the collected data, the potential service range for those opening their broadband connections is estimated. bandwidth sharing procedure renders a complex optimization problem hereafter referred to as the WiFi network Design Pro-blem (WiFiDP). In essence, the WiFiDP involves finding an optimal open access deployment (i.e. determining the set of WiFi routers with shared access bandwidth) in terms of coverage and cost under an overall budget limit. In the literature the problem of selecting locations from the existing broadband infrastructure to build an overlay open WiFi access network was tackled in Thraves et al. (2008) , through the application of an algorithm that under-takes the budgeted version of the so-called Maximum Coverage
Problem. The algorithm selects which routers are opened to nomadic users out of those available in a certain geographical area. These points represent premises of the broadband custo-mers, where hotspots can be installed in such a way that the connectivity demand in the given deployment area is satisfied at the lowest possible cost. Following these premises, in Agust X   X  n-
Blas et al. (2009) a Genetic Algorithm (GA) is proposed to deal with the aforementioned WiFiDP with budget constraints in two different synthetically modeled scenarios and in Agust X   X  n-Blas et al. (2011) some real cases have been considered by extending the WiFiDP with the reuse of frequency channels in the network design. In these recent references exhaustive simulation-based comparisons were presented between the genetic approach proposed therein and the greedy search scheme in Thraves et al. (2008) . The obtained results elucidated an outperforming beha-vior of GA with respect to the technique in Thraves et al. (2008) , and thus posed the state-of-the-art in what relates to heuristics aimed at WiFiDP-related optimization problems.

In line with this research trend, the aim of the work proposed in this paper is twofold. First we present the resolution of the
WiFiDP by utilizing a harmony search approach ( Geem et al., 2001 ) that has been modified to consider a grouping encoding, first defined by Falkernauer (1993 , 1994) . This strategy was derived for a specific subset of optimization problems, known as grouping or clustering problems, in order to improve the search efficiency of the algorithm in the solution space characterizing such optimization cases. The key ingredient of this grouping strategy lies on a variable-length coding for the solutions to the problem which divides the solution into disjoint groups and removes its inherent redundancy though the encoding rules defining such a coding strategy. Thereafter, several contributions have adopted this grouping approach to solve a wide range of optimization problems such industrial processes ( De Lit et al., 2000 ; James et al., 2007b ; Hung et al., 2003 ), telecommunications ( James et al., 2007a ; Agust X   X  n-Blas et al., 2011 ; Brown and Vroblefski, 2004 ), university course timetabling ( Lewis and
Paechter, 2005 ) and other applications in Operations Research ( Brown and Sumichrast, 2003 , 2005 ; Gil-Lopez et al., 2010 ; Landa-
Torres et al., 2012 ). The proposed harmony search approach used in this paper will be henceforth denoted as the Grouping Har-mony Search (GHS) algorithm and further details will be given in
Section 3 . On the other hand, in clear connection to the avant-garde genetic method in Agust X   X  n-Blas et al. (2011) , the second goal of this paper is to compare the GHS approach to a hybrid grouping Genetic Algorithm (GGA), with the same encoding approach than the algorithm presented herein.

To efficiently deal with the WiFiDP, the proposed algorithm determines not only the number of WiFi Access Points (APs) to be activated in order to maximize the number of connected nomadic users (or coverage level ), but also its location in the proposed WiFi network design, while meeting the deployments X  assigned bud-get. To be concise, we propose the adaptation of the harmony search algorithm to the WiFiDP considering the following points: (1) encoding the solutions following a grouping approach; (2) defi-nition of the specific operators driving the HS algorithm in the problem at hand; and (3) imposing a differential scheme in the iterative procedure of the underlying HS algorithm (i.e. produced candidate solutions evolve through iterations intelligently yet independently from each other). This adaptation, combined with the grouping encoding of the algorithm, significantly increases the searching efficiency of the algorithm, as the results later presented in this paper will clearly show.

The rest of the paper is structured as follows: first, the WiFiDP problem is formally posed in Section 2 . Section 3 focuses on the main operational characteristics of the proposed GHS algorithm.
Section 4 discusses the results obtained from a simulation-based comparison study between the proposed algorithm and an exist-ing grouping genetic procedure in a test access network deploy-ment based on real statistics. Finally, Section 5 concludes the paper by drawing some concluding remarks. 2. Problem formulation Let us mathematically define the WiFiDP by assuming N WiFi APs deployed at coordinates p j A R 2 ( j  X  1, y , N ) and with circular coverage areas of identical radio R . A set U 9 f X  p u i , u mobile nomadic users is spread over the same area at locations
A R 2 , which request bandwidth resources u i A N from the above set of APs. A given shared network deployment D is defined as D 9 f N o , f o j g j where N o D f 1 , ... , N g represents the subset of AP indices that are activated for shared WiFi access to third-party users; f o (with o j A f 1 , ... , T g8 j ) stands for the capacity of the APs mea-sured in bandwidth units that can be served in a shared basis; and E is a binary coverage matrix whose compounding entry e ij to 1 if nomadic user i is inside the coverage radio of AP j and e  X  0 otherwise (with i A f 1 , M g and j A f 1 , N g ). Besides, the cost of activating sharing APs can be computed by intuitively noting that the higher o j is, the higher its associated price will be (e.g. by rewarding the shared bandwidth to the owner of the AP through specific contractual clauses). For the sake of simplicity, cost is assumed to be linearly proportional 1 to its capacity. Conse-quently, the total cost of the deployment C  X  D  X  can be calculated as the sum of the individual costs of all active APs in D , i.e. C  X  D  X  9 where a is the proportionality factor that relates the capacity to the cost of an AP. A budget upper limit B is predefined beforehand, and has to fall below the total cost of D . Summarizing, given a set of N possible APs located at f p i g N i  X  1 and enabled with shared bandwidth capabilities; a T -sized set of different AP types and corresponding costs; a set U  X f X  p u i , u i  X g M i  X  1 of mobile nomadic users; a maximum budget B , under a budget-constrained maximum coverage criterion, i.e. D n  X  arg max 1 N subject to
X where expression (4) means that every user is allowed to connect  X  if possible  X  only to one AP, and expressions (5) and (6) represent the capacity and budget constraints, i.e. the selected type vector f o j g j A N o has to be high enough to support the demanded aggregate bandwidth of all users connected to it at a cost C  X  D  X  r B . 3. Proposed grouping HS algorithm for the WiFiDP
In order to efficiently deal with this optimization problem, this section describes the application of the grouping harmony search algorithm to the WiFiDP, which requires a specific encoding of the possible solutions and the inclusion of a repair method in order to fulfil the problem X  X  constraints.

Let us start by briefly sketching the fundamentals of harmony search, which was first introduced by Geem et al. (2001) and thereafter applied to a number of applications and problems such as the capacitated P-median problem ( Landa-Torres et al., 2012 ), tour routing ( Geem et al., 2005b ), Sudoku puzzle solving ( Geem, 2007a ), water network design ( Geem, 2006 ), dam operation ( Geem, 2007b ), vehicle routing ( Geem et al., 2005a ), multicast routing ( Forsati et al., 2008 ), multiuser detection ( Gil-Lopez et al., 2009 ; Zhang and Hanzo, 2009 ), distributed radio resource alloca-tion ( Del Ser et al., 2012 ), OFDM subcarrier power allocation ( Del
Ser et al., 2011 ) or the design of polyphase radar codes ( Gil-Lopez et al., 2011 ), etc. This algorithm inspires from the improvisation process of musicians, i.e. the process by which such musicians (who may have never played together before) refine  X  through variation and check  X  their individually improvised notes result-ing in an aesthetic harmony played by the entirety of musicians in the orchestra. Each musician corresponds to an attribute of a given candidate solution picked from the problem solution domain, whereas each instrument X  X  pitch and range corresponds to the bounds and constraints imposed on the decision variable.
The HS algorithms operate on a set of j possible problem solutions or harmonies , referred to as Harmony Memory (HM) in the related literature, which are evaluated at each iteration. The
HM is updated with any of the new j improvised harmonies at a given iteration provided that it sounds better (i.e. has a better fitness value) than any of the j harmonies remaining from the previous iteration. This procedure is iteratively repeated for a fixed number of iterations. 2 For the sake of conformity with the notation used in related contributions, we will hereafter refer to a possible candidate individual s as harmony , whereas note will stand for any of the entries of s .

As for the WiFiDP tackled in this paper, the proposed grouping encoding splits each solution vector s into three parts, i.e. s  X  X  s a 9 s g 9 s t  X  , subject to certain criteria based on the problem restrictions. The first term s a ( assignment part ) consists of M (i.e. the number of mobile nomadic users) integer indices with values drawn from the set f 1 , ... , N g , which establish to which AP is assigned each user. If the user is located beyond the coverage area of any AP, the corresponding entry in s a is set equal to 0. Next, the second part s g (the grouping part) is composed by a 9 N o length vector of integer indices drawn from the set f 1 , ... , N g . This variable-length encoding part lists all the active APs in the network that are activated in order to provide service to the nomadic users. It is important to note that the value of 9 differ between distinct solution vectors, and/or change for a given along the execution of the algorithm. Finally, the last part s vector of integer values drawn from the set f 1 , ... , T g , with the same length of s g , and corresponding to the type of each active AP. An illustrative example is shown in Fig. 1 , where we consider
N  X  5 possible points to set an AP. 9 N o 9  X  3 active APs.

T  X  3 different AP types with capacities f 2 ; 4 , 6 g and costs f 3 ; 6 , 9 g (i.e. a  X  1 : 5  X  .
 M  X  14 mobile nomadic users.
 Maximum budget B  X  22.

Note that as indicated in the s t part of the solution depicted above, the capacities and costs of the active APs are given by f g Therefore, the cost of the deployment results in C  X  D  X  X  which yields a cost-affordable shared AP deployment with a coverage level equal to (12/14) 100%.
 algorithm operates on the set of j grouping-encoded candidate solution vectors of harmonies by following a differential scheme. The improvisation process acts over each harmony included in the HM. Such a scheme consists of four steps summarized next
A . Initialization : At the first iteration, and assuming no apriori
B . Improvisation : At each iteration, three pr obabilistic operators are
The above three probabilistic operators modify the s a  X  k  X  and s g  X  k  X  parts of the encoded solution. The third part of the harmony, s t  X  k  X  , is deterministically computed by choosing the AP type with less cost but enough capacity to cover its associated users. If the aggregate requirements of the users associated to any given active AP are higher than its capacity, assigned users are disconnected from the AP at random until the aggregate demand of the remaining users falls below the capacity of the AP.

C . Repair procedure : Although all the above definitions minimize the probability that unfeasible solutions are generated during the improvisation process (the first two operators are imple-mented to avoid violating capacity requirements, whereas the third accounts for satisfying the budget constraint), the simul-taneous application of all such operators may yield, as a result, a non-feasible solution clashing with the budget and/or capacity constraints of the problem at hand. Therefore, the designed GHS algorithm is hybridized with the repair proce-dure defined in Agust X   X  n-Blas et al. (2011) , which adjusts the solutions to the allocated requirements.

D . Update of the harmony memory : the HM is updated with the best j candidate vectors or harmonies and the algorithm finishes when a fixed number of iterations I is reached.
Otherwise, it goes back to step B . 4. Computational experiments
In order to assess the performance of the GHS approach, the proposed scheme is compared to HGGA (Hybrid Grouping Genetic Algorithm) algorithm for the WiFiDP problem presented in
Agust X   X  n-Blas et al. (2011) . For this comparison study, a scenario is modeled for the city of Bilbao (Bizkaia, Basque Country, norther Spain) based on data queried from the Basque Institute of Statistics ( EUSTAT, 2012 ), yielding
Dimensions : The scenario is specifically bounded to a rectan-gular 4.25 km 2 area corresponding to the city center of Bilbao (see Fig. 2 ), comprising the districts of Indautxu , San Mame  X  s , Campo Volant X   X  n , Rekalde , Abando and Casco Viejo .
Number and AP locations : according to the latest records published by INE (Spanish National Institute for Statistics), the city center of Bilbao has a population density of 8549 habitants per square kilometer. Considering this population density and the area delimited at previous point, we estimate that 36,333 people live in the city center, forming 13,868 families (computed based on EUSTAT indicators for Bilbao in 2010 which estimates 2.62 members per family). The penetra-tion index of wide band Internet connections in Bilbao is, nowadays, 57% (based on EUSTAT indicator for Bilbao in 2010).
Considering these numbers, 7904.6 families owning a wide band Internet connection in the depicted area. Among the aforementioned families, only 1.1% of them will accept the idea of  X  X  X pening X  X  their internet access to provide service to nomadic users (rewarded in economic and service terms). This rate has been deduced based on the annual report on the development of information society in Spain ( eEspan  X  a 2011, based on the ITU 2011 report) and following the tendency of different IT services in its initial stage (i.e. mobile wide band Internet connections in 2005 had a 1.1% of penetration index).
Consequently, only 1.1% of those 7904.6 target families will be considered for this study, yielding a total of N  X  87 possible AP locations. Their geographical coordinates f p i g N i  X  1 uniformly over the selected rectangular area.

Number of users and locations : Based on the statistics published by INE (National Institute of Statistics of Spain) in 2010, a total of 353,187 persons live in Bilbao. Out of them, 54.6% is over 15 years old and utilize Internet (fixed or mobile) in a regular fashion. About 94.8% of such regular Internet users own a mobile phone, from which 46% of them is a smartphone (according to Netsize Guide, Informa, Google and Ipsos studies
Ahonen and Moore, 2011 ). These estimations reduce the set of possible users to a 23.81% of the total amount presented, thus yielding an absolute number of 84,094 Internet users in Bilbao.
We assume that at a given time, 50% of such Internet users circulate over the area considered in this study, which can be a reasonable estimation due to its high population density and the presence of several high schools, public institutions, shop-ping areas and points of particular interest (e.g. the Guggen-heim museum) therein. From the people considered, a fraction of them will accept and utilize the shared internet access service. Therefore, the service penetration rate is set to 1.1%, as has already been established when estimating the number of available APs. To this number we add 830 users due to the fact that according to the EUSTAT records, 684,274 tourists visited
Bilbao in 2010, resulting in an average of 1874 tourist per day out of which 96.3% of them owns a mobile phone (European citizens, according to INE statistics) from which 46% of them is a smartphone. Therefore, 44.3% of the estimated tourists utilizes a smartphone and the resulting number of nomadic users is set to M  X  1293. The geographic distribution of the nomadic users accounts for the fact that they only can be located in pedestrian zones (i.e. streets, parks, not inside the buildings).

AP models : T  X  4differenttypesofAPsar e considered, each with different capacities C  X  X  8 ; 16 , 24 ; 32 and costs  X  X  10 ; 20 , 30 ; 40 (i.e. a  X  1 : 25). Besides, six different experiments are proposed considering the set of AP radius, R  X  X  0 : 1 , 0 : 11 , 0 : 12 , 0 : 13 , 0 : 14 , 0 : 15 km.

Budget : According to Agust X   X  n-Blas et al. (2011) , the total cost B to perform the network deployment is computed as B  X  M c = m , where m is the average number of users that can be covered with a router, which is totally dependent on the capacities o and c is the mean cost of an AP, considering the cost of all AP types.

As previously mentioned, six different instances are proposed for the comparative study based on the same scenario, but varying the coverage radio of the APs. Statistical results (max/ mean/std), in terms or percentage of users covered by the proposed deployments, are obtained by running 50 different realizations for each instance of the WiFiDP. In order to guarantee fairness in the comparison, both algorithms are forced to render the same computational complexity in terms of total evaluations of the metric. On this purpose, HGGA and GHS iterate I  X  50 times with the same population size (50 individuals/harmonies, respectively). It is important to notice that although the number of metric evaluations is kept equal in both schemes, the computa-tional time may not be the same ( Table 1 ). The reason for this is that the HGGA scheme proposed in Agust X   X  n-Blas et al. (2011) includes a local search procedure which is not included in the herein proposed GHS approach, since the definition of improvisa-tion operators of GHS already includes coverage matrix and AP types information.
 by the results in Table 1 , where it is shown that the proposed GHS is more than six times faster than the HGGA presented in Agust X   X  n-
Blas et al. (2011) for all the performed experiments. In addition to this significantly reduced computation time, GHS also outper-forms HGGA in all experiments in terms of mean and maximum user coverage, which means that the proposed GHS balances the tradeoff between explorative (better maximum values) and exploitative (better mean values) behavior in a much more efficient way than its genetic counterpart. From the simplest to the most complex scenario, the relative differences between both algorithms range from 4% to 13% (for the maximum values) and from 10% to 14% (for the mean values). It is also important to notice that Table 1 also includes the theoretical upper bound achievable for every simulated scenario by considering no budget constraints. When comparing the maximum values obtained with the proposed GHS to this upper limit, the differences are reduced with respect to the previous comparison (HGGA vs GHS), not reaching 7% in the most complex scenario. This means that GHS gets closer to the theoretical upper limit than what HGGA gets with respect to GHS.

When the radius of the APs is increased, so does the complex-ity of the underlying WiFiDP (measured as number of possible combinatorial solutions, i.e. size of the solution space). This is due to the fact that the higher R is set, the higher the number of possible APs serving a certain user can get. Based on this rationale, the proposed algorithm should consider either the option to activate new APs, or to promote the types of the already active APs, while maximizing the number of users covered and adjusting the cost to the budget constraint. This is essential when a variable-length grouping encoding problem is under considera-tion. As shown in Table 1 , the differences between both algo-rithms widen when the complexity of the problem is increased. Finally, an example of the deployments obtained by HGGA and GHS are graphically depicted in Fig. 3 (a) and (b), respectively.
Notice that GHS provides more diversity on the selected AP types (shown with different colored dots) than HGGA, and attains a much higher coverage level, as elucidated by the cyan crosses representing users that are covered by the selected set of active APs. 5. Concluding remarks
In this paper we have proposed a novel heuristic algorithm for the Citywide Ubiquitous WiFi access Deployment Problem (WiFiDP). The WiFiDP falls within the category of clustering problems, but its set of stringent constraints makes it difficult to apply grouping strategies. The proposed algorithm includes three novel characteristics with respect to previous approaches: (1) the adaptation of the harmony search algorithm to tackle the
WiFiDP; (2) the combination of differential evolution with group-ing encoding; and (3) the inclusion of coverage matrix and AP types information into the definition of the improvisation opera-tors. In order to assess the performance of the designed heuristic, a comparison analysis with a hybrid genetic grouping scheme (HGGA) proposed in Agust X   X  n-Blas et al. (2011) is carried out for six scenarios based on real statistical data recorded for the city of Bilbao (Basque Country, northern Spain). From this comparative study it is concluded that the proposed scheme outperforms the genetic algorithm in such a reference not only in terms of the computation time, but also in what relates to the attained average and maximum coverage level. The definition of  X  X  X ntelligent X  X  operators permits to override the need for local search procedures in the GHS scheme, which significantly alle-viates the computation time when compared to the genetic approach. Furthermore, the obtained results show that the pro-posed GHS algorithm gets closer than HGGA with respect to the budget-unconstrained theoretical limit of all the experiments run in this study, yielding a gap to this limit even smaller than that resulting when comparing GHS to HGGA.
 References
