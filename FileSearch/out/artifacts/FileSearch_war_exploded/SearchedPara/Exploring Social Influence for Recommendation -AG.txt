 Social friendship has been shown beneficial for item recom-mendation for years. However, existing approaches mostly incorporate social friendship into recommender systems by heuristics . In this paper, we argue that social influence be-tween friends can be captured quantitatively and propose a probabilistic generative model, called social influenced se-lection (SIS), to model the decision making of item selection (e.g., what book to buy or where to dine). Based on SIS, we mine the social influence between linked friends and the per-sonal preferences of users through statistical inference. To address the challenges arising from multiple layers of hidden factors in SIS, we develop a new parameter learning algo-rithm based on expectation maximization (EM). Moreover, we show that the mined social influence and user preferences are valuable for group recommendation and viral marketing. Finally, we conduct a comprehensive performance evaluation using real datasets crawled from last.fm and whrrl.com to validate our proposal. Experimental results show that so-cial influence captured based on our SIS model is effective for enhancing both item recommendation and group rec-ommendation, essential for viral marketing, and useful for various user analysis.
 H.3.3 [ Information Search and Retrieval ]: Information Filtering; J.4 [ Computer Applications ]: Social and Be-havior Sciences Algorithms, Experimentation.
 Recommender Systems, Social Networks.
Recommendation systems have attracted a lot of atten-tion in the past decade and have been successfully deployed in many e-commerce websites, such as Amazon and Net-flix. Two widely adopted approaches for recommendation systems are collaborative filtering (CF) and content-based filtering [1]. Collaborative filtering [4, 9] recommends items for a given user by referencing item ratings from other simi-lar users, while content-based filtering techniques [23] make recommendations by matching a user X  X  personal interests (or profiles) with item content (e.g., item description or tags).
Recent development of social media and social networking systems brings new opportunities for recommender systems. Several research works find that there is a correlation be-tween items selected by a user and those selected by her friends (i.e., friends share some common interests) and pro-pose to exploit the correlation for item recommendations [12, 16, 17, 18, 19, 6]. The basic idea behind these techniques is that, since a user X  X  friends may share common interests, recommendations can be made to the user by considering in-terests of her friends. For example, [32] makes recommenda-tions by assigning weights to friends based on the similarity of item selection behavior (in terms of the number of com-monly selected items) and similarity of social friendship (in terms of the number of their common friends). In addition, [12, 16] employ the random walk approach [30] to incorpo-rate user X  X  social relationship in item recommendation. This approach fundamentally assumes that friends exhibit similar behavior and thus aims to incorporate the friendship into the random walking process. However, due to the lack of quanti-fied strength in friendship, equal weights have been assigned to social links from a user to her friends. This uniform weight assignment obviously does not truthfully capture the role of friendship played in the item selection process and thus is not expected to be effective for recommendations.
Some prior works avoid the aforementioned problem by integrating users X  social trust network into their recommen-dation techniques. Assuming that trust intensities among users and their friends are handily available and that users and friends exhibit similar behaviors, the trust intensities among friends are used as the basis to assign more similarity weight to trusted friends when making recommendations [17, 18]. In [19], the authors learn a user X  X  preference from the aggregated preferences of her friends. More specifically, they add additional regularization term in the matrix factoriza-tion approach to impose the constraints that user X  X  latent topic vector should be similar to the average or weighted average of her friends X  latent topic vectors. Recently, [6] explores a notion of social correlation to capture the cor-relation/similarity in the item selection behavior of social friends, i.e., two friends with very similar item selection be-havior have very high social correlation. The authors adopt latent factor model to learn the social correlation among friends from their social network and a user-item accessing matrix. Experimental result shows that social correlation is able to improve recommendation performance.

All of the above mentioned research works obtained var-ied performance improvement over conventional item recom-mendation techniques, demonstrating the advantages tak-ing the social friendship in item recommendation. It X  X  not surprising that recommendation techniques that exploit the similar item selection behavior of friends have achieved a certain degree of success, as several research studies on so-cial network analysis have indicated that a user X  X  behavior indeed often correlates to the behavior of her friends [8, 29]. The question, nevertheless, is whether the success can be truly attributed to the ideas behind those aforementioned techniques? We argue that, while the general idea of incor-porating the item selection behavior of friends is in the right direction, the heuristics adopted in these existing works do not exactly capture the core factors and thus cannot be fully accounted for the claimed success.

In this paper, we take the view of  X  X ocial influence X  from friends to explain the decision making of item selection by a user. Social influence here refers to the phenomenon that a user adopts a suggestion from friends, which may or may not deviate from her own preferences. 1 In our daily life, be-sides our own preference, we usually turn to our friends for opinions of books, movies or restaurants. Obviously, friends play a role in our decision making of many daily activities and events and thus impose some influence on us. Never-theless, the influences from different friends are not equal. We do not take friends X  opinions/suggestions purely based on our  X  X rust X  or  X  X imilarity X  in preferences. Moreover, some friends with different interests and expertise may be very influential to us, while some other friends with very similar interests may not contribute that much in our decision mak-ing. Therefore, the notion of social influence discussed here is fundamentally different from the social correlation, trust intensity, or the various measures of friend similarity based on different heuristics.

To systematically exploit social influences from friends for item recommendation, we aim to quantitatively capture the social influence to a user from each of her friends by lever-aging information embedded in the user social network, user behavior and item content. To meet our goal, we propose to adopt the probabilistic generative model as a methodology to model the decision making of item selection, e.g., decid-ing which restaurant to dine. We attribute an item selection decision by a user probabilistically to her own preference or the preferences of her friends (due to social influence). As-suming a set of latent topics existing in the targeted appli-cation domain 2 ,weproposethe social influenced selection (SIS) model, which captures (1) the distribution of social influence from friends for each user, (2) the distribution of personal preference over the latent topics for each user, (3) the distribution of generated items for each topic, (4) the distribution of generated content for each topic; and thus enables a seamless integration of social influence, user be-havior and item content for item recommendation.

Based on SIS, we aim to mine the model parameters listed above from the social network of users and the access trans-actions of users on items (as well as their content) through statistical inference based on expectation maximization (EM). In a typical EM algorithm, the E-step is used for comput-ing the posterior of a latent variable. The multiple layers of variables we have in SIS bring new challenges. For exam-ple, the latent variables and other associated factors need to be processed together in a very large joint-variable space,
Note that social influence is a very general term related to many different phenomena. For example, Herbert Kelman identified three broad varieties of social influence including compliance, identification and internalization [14]. In this paper, we consider the social influence quantitatively as the probability that a user adopts a suggestion from friends.
The term topic , from topic models, represents a genre of items in this paper. Take movies as an example of the items, a topic could be action, thriller, romantic or even a latent genre that cannot be expressed literally. which mandates development of a new and efficient learning algorithm. Assuming that the social influence exists only between friends instead of arbitrary users, we address the scalability issue by devising a new model learning algorithm which handles two layers of latent variables at the same time. In addition, to explore the flexibility and applicability of SIS, we explore the social influence and user preferences mined based on SIS for group recommendation, viral marketing and various user analysis. The primary contributions made in our research are summarized as follows.
The remainder of this paper is organized as follows. Sec-tion 2 summarizes the related work. Section 3 introduces our SIS model which seamlessly captures social influence along with user behavior and item content. Section 4.1 proposes a new group recommendation method using the social influ-ence obtained and discusses its potential application for viral marketing. Section 5 reports the experimental results and findings in our performance evaluation. Finally, Section 6 concludes the paper the points out the future direction.
In this section, we review some related works, including recommender systems, recommendation techniques enriched by social networks, and group recommendation.

Item recommendation is a crucial service for e-commerce and web services (e.g. netflix.com and amazon.com). The goal is to recommend a list of items that a targeted user may be interested in. Collaborative filtering and content-based techniques are two widely adopted approaches for recom-mender systems [1]. Both of them discover users X  personal interests and utilize these interests to find relevant items. Collaborative filtering techniques [4, 9, 28] automatically predict relevant items for a given user by referencing item rating information from other similar users. Content-based techniques [23] make recommendations by matching a user X  X  personal interests (or profile) to descriptive information of items. Recommender systems using pure collaborative filter-ing approaches tend to fail when little knowledge about the user is known or when no one has similar interests with the user. For example, if a user has little item rating/selection history or his interests are uncommon to others, then the item rating/selection history of other users cannot help. Al-though content-based methods is able to cope with the is-sue of lacking knowledge, it fails to account for community endorsement. For example, while a user is known to be in-terested in Chinese restaurants, content-based methods may possibly recommend a bad Chinese restaurant to him with-out considering the tendency or consensus among those with similar item selection behavior to the targeted user. As a re-sult, there has been a continuing research interests and effort in combining the advantages of both collaborative filtering and content-based methods [3, 26]. Our proposal not only is able to take into account user behavior and item content but also incorporate the social influence from friends into the recommendation process.

We term the techniques that exploit observations and prop-erties of social networks for recommendation as social rec-ommendation techniques. As reported in the literature, so-cial friendship is shown to be beneficial for recommendation [19, 18, 17, 12, 16, 32, 31, 6]. To incorporate social friend-ship to the recommender system, [32] propose a collabo-rative recommendation framework which linearly combines conventional user-based collaborative filtering with friend-based collaborative filtering (i.e., only friends are considered during the collaborative filtering approach). In addition, [12, 16] employ the random walk approach [30] to incorporate user X  X  social network in item recommendation. There are also some model-based approaches to provide recommenda-tion by incorporating social friendship or social trust net-work [17, 18, 19, 6]. In [17, 18, 19], the authors propose to use matrix factorization method to learn the user latent vectors and item latent vectors. Accordingly, they integrate the users X  social trust network into their models through a linear combination [17, 18] or as a regularization term [19]. In [6], the social correlation among friends is learned with the condition that latent user space and latent item space are given. Notice that the social correlation aims to capture the similarity among friends. Thus, the social correlation among friends could reach 1 if they have identical item ac-cess patterns. In our study, we are interested in social in-fluence. Intuitively, we believe that a user make decisions mainly based on her own preferences, even though friends X  preferences and influence may contribute to her decisions.
In this paper, we also explore the potential use of so-cial influence for group recommendation. Here we review a number of group recommendation techniques. Group rec-ommendations have been designed for various domains such as web/news pages [25], tourism [22], music [21, 7], and TV programs and movies [24, 33]. In summary, two main ap-proaches have been proposed for group recommendation [13]. The first one creates an aggregated profile for a group based on individual profiles of its group members and makes rec-ommendations based on the aggregated group profile [21, 33]. The second approach aggregates the recommendation results for individual members into a single group recom-mendation list. In other words, recommendations (i.e., ranked item lists) for individual members are created independently and then aggregated into a joint group recommendation list [2], where the aggregation functions could be based on average or least misery strategies [20]. Different from these prior works, our approach exploits the preferences of group members and their influence on each other to reach the final decision. Evaluation from real datasets demonstrates a sig-nificant improvement from the our proposal of using social influence alone over the state-of-the-art methods.
In this section, we propose a probabilistic generative model to capture the various factors contributing to the decision making of item selection. Motivated by reported empirical evidence of influe nce propagation via on-line social links [12, 16], one important factor we argued for, along with user pref-erence, is the social influence. Instead of trying to capture exactly how social influence takes effect in the decision mak-ing process 3 , we assume the existence of social influence and aim to capture quantified social influence among friends for use in recommender systems. In the following, we first in-troduce our social influenced selection (SIS) model and then present our approach to statistically inference a number of model parameters valuable for recommendation services and other applications.
In addition to personal preference of certain items and their specific content features, we believe that social influ-ence from friends also contribute to one X  X  item selection deci-sion. For example, Alice went for a movie  X  X ung Fu Panda X  because she likes funny cartoon animations and Bob, a fan of Chinese martial art stories, had recommended it to her. In this example, we attribute the decision of watching Kung Fu Panda over other choices to Alice X  X  own preference and Bob X  X  (as well as other friends X ) suggestions. Notice that sev-eral factors are involved here, including (i) Alice X  X  tastes of movies as well as her friend X  X  possible preferences; (ii) Alice X  X  independence in decision mak ing; and (iii) i nfluences from Alice X  X  friends. We argue that the decision is made implicitly in accordance with the collective preferences of Alice X  X  and her friends X . Thus, the decision making is similar to draw-ing a preference from the above-mentioned collection based on Alice X  X  independence in decision making and her friend X  X  influence. Consequently, a preference common to Alice and her friends has a higher probability to be drawn than an uncommon preference from some friend (which may have a lower probability but still possible, as evident by abnormal selection behavior sometimes made by people).
In the proposed SIS model, as shown in Figure 1, we follow the ideas of [11, 26] to represent user preferences in terms of a number of latent topics and to correlate the items (and their content) with users through these latent topics. Let U = { u 1 ,u 2 ,  X  X  X  ,u N } and I = { i 1 ,i 2 ,  X  X  X  ,i M } set and item set, respectively. Each item i  X  I is associated with a set of tags/words W i = { w 1 ,w 2 ,  X  X  X } . A latent topic set Z = { z 1 ,z 2 ,  X  X  X  ,z K } is employed to capture the latent user interests (i.e., preferences) and to characterize the items and their content. The SIS model assumes that a decision made by a user u  X  U to select an item i  X  I (associated with a tag w  X  W i ) is attributed to a preference (i.e., one of the latent topics z  X  Z ) due to the user X  X  independent choice and the social influence from friends. For instance, in
How other people affect one X  X  beliefs, feelings and behaviors (i.e., the study of social influence) has been the focus of social psychology research in the past 50 years [14] the example discussed earlier, Alice X  X  decision to see  X  X ung Fu Panda X  attributed to funny cartoon animation (her own preference) or Chinese martial art (Bob X  X  preference), both of which may be considered as the latent topics in our model. Obviously, our goal (and the novelty of SIS) lies in qualita-tively capturing the social influence, which along with other model parameters of SIS such as user preference, is shown later to be valuable for recommendations and various appli-cations. Thus, we introduce another variable f to represent the friends in SIS. Let F ( u )  X  U denote the friend list of auser u . The social influence to u from one of her friends ( f  X  F ( u )) is depicted as how likely f  X  X  personal preference has contributed to the item selection decision. As discussed earlier, the probability for a friend of u  X  X  to affect the item selection is in proportional to the social influence of this friend. Notice that u  X  X  independence in decision making and her personal preference play a similar but even more impor-tant role as the social influence and friends X  preferences. In SIS, for simplicity, we assume u is a special friend of herself (i.e., u  X  F ( u )). Therefore, the SIS model, as illustrated in Figure 1, are depicted as follows. A decision of item selec-tion made by user u is probabilistically determined based on the preference of a friend (including herself) f  X  F ( u ). If f = u , the selection is attributed to u  X  X  own preference; oth-erwise ( f = u ), the decision is influenced by f at this time (i.e., the selection follows f  X  X  interests rather than u tastes). As shown in the figure, we define a parameter social influence distribution Pr( f | u ) as the probability for influenced by a friend f .Once f is picked based on Pr( f | u we randomly draw a topic z from f  X  X  preference based on probability Pr( z | f ). Then, the topic z in turn generates an item i and a tag w according to the topic X  X  item distribution (Pr( i | z )) and topic X  X  content distribution (Pr( w | z tively. Note that the selection behavior of user u on both item i and its content w  X  W i is probabilistically captured in a coherent fashion by the generative process of SIS. Thus, SIS is able to comprehensively incorporates various infor-mation, including social influence, user behavior and item content, in the model.
The problem of recommending new (previously unaccessed) items to a user u can addressed by estimating the probability for u to select an item i (i.e., Pr( i | u )). Candidate items with the highest aforementioned probability are recommended to u .NotethatPr( i | u ) can be computed as According to the SIS model, we have
Similar to [26], we assume items and contents are inde-pendently conditioned on the topics. As a result, the joint probability distribution over all factors is:
Pr( u, f, z, i, w )=Pr( u )Pr( f | u )Pr( z | f )Pr( i | z where w  X  W and W is the space of all item content.
The key observations from this model as shown in Figure 1 are 1) u and z are independently conditioned on f ,and2) f,w and i are independently conditioned on z .Tomodelthe item selection probability in terms of f and z , we transform Equation (3) into the following form:
Pr( u, f, z, i, w )=Pr( z )Pr( u | f )Pr( f | z )Pr( i | z
Notice that we will need to obtain a number of model pa-rameters, including Pr( z ) , Pr( u | f ) , Pr( f | z ) , i n order to compute Pr( u, f, z, i, w )andPr( u, i ). Among them, Pr( u | f ) captures the social influence from friend to user u and Pr( f | z )depictsauser f  X  X  preference, i.e., We will show how these parameters can be used to facilitate various applications in Section 4.

In this study, we employ expected maximization (EM) to learn those model parameters from the user-item-content history H , i.e., u, i, w  X  H ,where u  X  U , i  X  I ,and w  X  W i (i.e., W i denotes the tag/word set associated with item i ). Note that an item may contain multiple tags/words. For a history record of a user u selecting an item i where W i = { w 1 ,w 2 ,  X  X  X } ,wehave u, i, w k  X  H , k =1 , 2 ,  X  X  X  Note that existing expected maximization (EM) algorithms mostly handle a single latent variable. Thus, it brings new challenges when there are multiple variables, i.e., z and in the model and thus mandates a new and efficient learn-ing algorithm. To address this issue, we have performed a detailed mathematical derivation to develop an new EM al-gorithm in order to learn the model parameters by statistical inference. Our model parameter learning algorithm is based on the idea of maximizing the log-likelihood of L (  X  ). where  X  denotes the model parameters, i.e., Pr( z ) , Pr( Pr( f | z ), Pr( i | z ), Pr( w | z ), in our model. The derived EM algorithm iterat es over the following steps.In E-step, instead of computing the expectation of the log-likelihood for individual latent variables (i.e.  X  z and f arately), we propose to compute the expectation of the log-likelihood for z,f jointly. More specifically, we calculate = Pr( Note that we only need to compute the posteriors of those triples u, i, w  X  H , because the expectation to be maxi-mized only weights on the observed user-item-word triples. While the friend space could potentially be the entire user space, the averaged number of friends per user is limited. The total size of parameters Pr( z,f | u, i, w ) for each record u, i, w is estimated by | z | X | F ( u ) | .

In EM algorithms, the E-step is to calculate the expected value of the log likelihood function, with respect to the con-ditional distribution of latent variables, under the current estimate of the model parameters. In our algorithm, z and f are considered jointly in E-step. This is very important because, if we consider only a one latent variable, say z the M-step cannot estimate the parameter Pr( f | z ), which depends on the joint probability of z and f .

In M-step, model paramete rs are computed to maximize the expected log-likelihood found on the E-step as below.
In our collected real data sets, the averaged number of friends per user is less than 10. E-step and M-step, the EM Algorithm improves the model parameters iteratively until they converge to a local log-likelihood maximum.
In this section, we discuss how social influence learned from SIS benefits other applications such as group recom-mendation and viral marketing.
Given a group of people G , group recommendation aims to identify items that are welcomed by the whole group instead of individual group members, e.g., find romantic restaurants for a couple or movies for a family with kids. Although the SIS model targets on item recommendation for an individ-ual user, the social influence learned based on SIS is very useful for group recommendation. In this section, we first briefly introduce the aggregation-based group recommenda-tion strategies and then discuss our new strategy, called so-cial influence based group recommendation (SIG).

For group recommendation, a widely adopted approach is to apply some aggregation strategies to obtain a  X  X onsensus X  group ranking/score for a candidate item. Two popular ag-gregation strategies, namely average and least misery ,are proposed in [20].Using the item access probability estima-tion Pr( i | u )asthescoreofitem i to u , the average strategy calculates the group score of an item i to a group G as
On the other hand, the least misery strategy calculates the the group score for an item i toagroup G as the smallest predicted rating for item i in the group, specifically Basically, the item least disliked by each individual member shall has the highest group score for recommendation.
Note that Pr( i | u ) can be calculated based on our gener-ative model by incorporating user behavior (UB) and item content (IC). These two aggregation-based group recommen-dation approaches capture a group consensus of item ranking by assuming all the decisions made by users are independent and equally important. However, in a group activity, people interact with and influence each other. Thus, we take social influence into account to reach a group consensus.
Intuitively, a user in a group activity selects an item due to two possible reasons: 1) her own preference of the item, 2) influence from other group members. One direct exten-sion of the existing aggregation-based group recommenda-tion strategies is to is to incorporate social influence in the calculation of probability value Pr( i | u ).
 where can be easily obtained from the model parameters of SIS. Note that Pr( u, f, i ) denotes the probability for u to select i under influence of f .If f = u , it estimates the probability that the user u  X  X  own preference in this item. This newly derived Pr( i | u ) is applicable to Average (Equation (6)) and Least Misery (Equation (7)) for group recommendation.
An alternative idea is that users in a group will listen to others X  opinions, i.e., social influence (instead of personal preferences) is given the highest priority to get a consensus score for the group. SIS can naturally support the group recommendation as a group selection activity, i.e., u is in-fluenced by other group members to jointly select item i . Consider a  X  X wo-member X  group G 2 = { u 1 ,u 2 } . To select an item for the group, user u 1 may influence user u 2 and vice versa. Therefore, we define the score for recommending an item i to the group G 2 as Figure 2: Decompose an arbitrary group into a set of two-member groups.

The ideas described above can be generalized for groups with more than two members by decomposing such a group into a set of two-member groups based on the friendship of members (see the example in Figure 2 for illustration). To make a group recommendation, we assume the social influ-ence only happens between friends. Intuitively, if most pairs of friends in the group prefer a particular item, it would be a good candidate for recommendation to the group. Let G denote a group with arbitrary cardinality. The score for recommending an item i to G is defined as the sum of
S influence ( G 2 ,i ) score over all possible friend pairs in the group. Formally,
S The ranking of items for group recommendation is based on the sorted group scores of items as defined above. We find superior performance of our social-influence strategy over the two aggregation strategies (to be shown in Section 5.6).
Recently, the phenomenon o f influence propagation in so-cial networks and its application in viral marketing have attracted tremendous interest. The idea is that when a user sees her social contacts performing an action such as pur-chasing a product, that user may decide to adopt the pur-chase as well [27, 15, 5, 10]. Obviously, social influence is important for viral marketing. In this section, we demon-strate how the social influence and user preference derived from our SIS model can be applied in the viral marketing study. Although the user-item selection process in SIS does not capture the cau sality in influence pro pagation, we as-sume that the social influence learned from our model may approximate the probability for a user to adopt the product given that her friend adopts the product.

Conventional research of viral marketing are mainly based on the social influence probability from f to u , i.e., Pr( We argue that, in addition to social influence, the personal preferences of users are also very important for viral mar-keting. Note that, as discussed earlier, a friend f showing high social influence to a user u doesn X  X  necessarily implies that f and u are highly similar in terms of their item access behaviors. Intuitively, whether a product will be adopted by a user is dependent on user preference of the product itself, even though we fully agree that social influence is impor-tant for viral marketing. In short, we argue that both user X  X  preference and social influence are critical ro viral market-ing. If solely based on social influence, a product marketing plan may likely to target on a user with high social influence and high interest in the product (even if his friends are not interested in the product based on their own preferences). As a result, the aforementioned conventional viral marketing plan based purely on social influence could fail.
Here, we adopt the popular Threshold Model [15] as a case study to demonstrate how to ut ilize the social influence and user preferences obtained based on SIS for viral marketing strategy design. Note that, in a viral marketing study, each individual user is assumed to be either active (an adopter of the product) or inactive. We assume a setting where each user X  X  tendency to become active increases monotonically as more of her friends become active and focus on the case where users only switch from being inactive to being active, instead of switching in the other direction. In the model, the probability for a user u to an item i is denoted as Pr VM which is calculated as follows. Let F ( u ) denote the friend set of user u and F ( u )  X  F ( u ) denote the subset including all active friends.
 Pr
VM ( i | u )= 0 | F ( u ) | =0 where  X  is a weighting factor between 0 and 1.  X  =1means users X  decision is solely based on their personal preferences; while  X  = 0 means users X  decision is only based on the social influence, i.e., the case of conventional viral marketing study. where Pr( z | u ) , Pr( i | z )andPr( w | z ) are model parameters learned from our proposed model. And where Pr( u | u ) is the social influence parameter learned from our generative model.

Each user u has a threshold  X  u .OncePr VM ( i | u )ex-ceeds the threshold  X  u ,user u will turn to active. The pro-cess of viral marketing starts with an initial set of users Users in S get to know the item i by advertisement. Thus, aseeduser s  X  S has a initial probability Pr VM ( i | s )=  X 
Pr VM  X  self ( i | s ). Of course, for viral marketing, we always want to select users interested in the items as the seed users. The diffusion process unfolds deterministically in discrete steps: in step t , all users who were active in step t  X  remain active; and we update the value of Pr VM ( i | u )for each inactive user u and activate any user u for which its Pr
VM ( i | u )  X   X  u .
In this section, we conduct a comprehensive performance evaluation using two real datasets, one from last.fm and the other from whrrl.com . We develop web crawlers to collect theses two datasets, which include user-item accessing his-tory, users X  friendship network and tags associated with each item. Besides, we collect group check-in history data from whrrl.com to validate our group recommendation approach. In our evaluation, we adopt the memory-based collabora-tive filtering approach (denoted as CF) as a baseline and propose to study the effectiveness of various factors (i.e., social influence (SI), user behavior (UB) and item content (IC)) considered in our SIS model. The different configu-rations of factors included in our evaluation are: 1) user behavior (UB) [11], which is taken as the second baseline, 2) both user behavior and social influence (UB+SI), 3) user behavior and item content factors (UB+IC) [26], which is the third baseline, and 4) all of the user behavior, social in-fluence and item content factors (UB+SI+IC), i.e., our SIS model. In this evaluation, we conduct an extensive set of experiments for item recommendation, group recommenda-tion, viral marketing, and various user analysis studies.
Here we first discuss the datasets, i.e., last.fm and whrrl.com , used in our experiments. Last.fm is an on-line music radio web service and whrrl.com is a location-based social net-work web service. The last.fm dataset contains music ac-cess history of 3 , 143 users over 23 , 467 unique songs; while whrrl.com dataset includes the check-in history of 7 , 145 users to 74 , 217 unique places. It is worth noting that the whrrl.com dataset includes 17,587 group check-in records which are very valuable for evaluating the group recommen-dation approaches. Additionally, both datasets have their user social networks available. The basic statistics of these two datasets are summarized in Table 1. User-Item Matrix Density 8 . 02  X  10  X  3 2 . 3  X  10  X  4 Average Friends per User 1.91 9.08
Note that the effectiveness of recommendation service pro-visioned with sparse dataset (i.e., low-density user-item ma-trix) is usually not high. For example, the reported precision in [32] is 0.05 over a preprocessed dataset with 2.72  X  10 density. Thus, in our experiments, we focus on comparing the relative performance of algorithms instead of their abso-lute effectiveness measures, which are expected to improve over time as the number of social network users continues to grow. Specifically, we use UB as the reference to compare the relative effectiveness measures, which are calculated as UB ,where
Item recommendation serves as the primary test case for our evaluation. For the various configurations degenerated from SIS, we use log-likelihood as model converge indicators and terminate the EM algorithms when an additional EM iteration cannot improve the training data X  X  log-likelihood by 0 . 0001 or when the maximum iteration threshold (empir-ically set with 50) is reached. We adopt the cross-validation method to obtain the precisions and recalls of item recom-mendation. For both datasets, we mark off 30% of item assess history corresponding to each user for testing. In other words, the rest 70% of user-item pairs are used as the training data to infer model parameters. After each model is learned, we use the model parameters to find  X  i, Pr( i | u for all users. The precision and recall for top n recom-mendations are used as the evaluation metrics, where n = 5 , 10 , 20 , 50 (5 is the default value). Figure 6: Performance comparisons (whrrl.com)
Figure 3 and Figure 4 show the precision and recall of top 5 item recommendations for last.fm and whrrl.com by varying | Z | , the size of latent topics. We find that social influence indeed improves the recommendation performance, for both UB+SI against UB and SIS against UB+IC. The result shows that the best recommendation performance is reached when the chosen topic size is around 60. Therefore, we set the default value of the latent topic size to 60 for the remaining experiments.

Figure 5 and Figure 6 compare the performance of var-ious item recommendation approaches, using last.fm and whrrl.com, respectively. Note that UB X  X  performance is used as the reference and these two figures demonstrate the per-formance ratio against the UB. As shown, all the model-based approaches clearly outperform the conventional memory-based collaborative filtering (CF), i.e., values of CF are smaller than 1 while all other ratio values are greater than 1. Again, we find that leveraging the social influence indeed improves the performance (i.e., values of UB+SI are greater than 1 and values of SIS are greater than those of UB+IC). Most importantly, SIS (which integrates user behavior, social in-fluence and item content) achieves the best performance. Topic No. Representative Tags Topic 15 bars, clubs, subs, pub, wine Topic 28 restaurant, subs, sandwich, cafe, steak Topic 35 store, service, grocery, retail, accessory Topic 39 movie, museum, galleries, lodging, theater
Topic 49 restaurant, bars, Americans, Mexican, Figure 7: Example topics learned from whrrl.com dataset, based on SIS
Here, we study the latent topics learned from our SIS model. Notice that, in SIS, a latent topic is represented by a joint distribution of item and content. Figure 7 shows some latent topics learned from the whrrl.com dataset. As shown, places located in distance tend to belong to different latent topics (e.g., places in topic 15 and topic 49), while categorical tags with very different semantics also tend to belong to different latent topics (e.g., representative tags in topic 39 and topic 49). Obviously, in the whrrl.com dataset, the content and locations of places both have an important role in determining the latent topics. We find that several latent topics have similar representative tags, e.g., topic 15 and topic 49, but located in distance. On the other hand, some latent topics that are clustered at the same areas, e.g., topic 1 and topic 15, have quite different tags. Moreover, items (even with similar contents) in different spatial clus-ters tend to be in different latent topics, which confirms that the learned latent topics from our SIS model are dis-tributions over both items (which exhibit strong locality in whrrl.com dataset) and their content.
 Topic No. Representative Tags Topic 10 Rock, Guitar Virtuoso, Roxette, English, Topic 16 Punk, Rock, 70s, Ramones, American Topic 20 Alizee, French, alternative rock, Italian, Topic 27 Usher, RnB, hip-hop, Craig David, urban
Topic 35 JAY-Z, hip hop, Kanye West, rap, east
Topic 49 jazz, Bill Evans, jazz piano, Bebop, saxo-Figure 8: Example topics learned from last.fm dataset, based on SIS
Figure 8 shows some latent topics learned from the last.fm dataset. Topic 1 discovers popular American rock stars in 80 X  X , except for Robbie Williams who is an English singer. However, since the topic is discovered from users X  listening history, this may indicate that users like Bon Jovi may also like Robbie Williams. Topic 10 represents another genre in rock music with extensive guitar practice, e.g., Roxette is one of the representative bands. Topic 20 has two French female singer Alizee and Lorie, and indicates the topic may be related to Italian singers. Topic 27 contains genre related to R&amp;B and two well known singers Usher (the king of R&amp;B) and Craig David. Topic 35 discovers topic related to hip hop music, with representative singers Jay-Z and Kanye West. And topic 49 demonstrates music related to jazz and music instruments related to jazz (piano and saxophone). In this section, we study the social influence between friends. Instead of investigating how social influence improves the recommendation performance, here we analyze the role of user influence in different application domains (i.e., music listening vs. location check-in). We plot the distributions of social influence probab ilities, denoted as Pr( u | f ), among all friend-pairs in Figure 9(a). Additionally, we also consider the probability for a user u to make independent selection (denoted as Pr( u | u )) and plot the distributions of indepen-dent selection probabilities in Figure 9(b). Intuitively, we believe users making decisions mainly based on their own preferences, although friends X  opinions may affect the deci-sion making to certain degree, i.e., the probability for a user to follow an uncommon preference of his friends is relatively small. Here, our experiments based on the dataset last.fm and whrrl.com confirm this intuition.
By comparing results between last.fm and whrrl.com datasets, we find that the friend influence in whrrl.com is smaller than that in last.fm. As shown in Figure 9(a), 95% (for last.fm) and 99% (for whrrl.com) of friend-pairs have friend influence values less than 0.05, respectively. This is probably because users in whrrl.com have more friends than users in last.fm (i.e., average 9 . 08 friends in whrrl.com vs. 1 . 91 friends in last.fm). Usually not all friends are influential and, very of-ten, a small number of friends take the most part of social influence. From Figure 9(b), we find that although both datasets suggest significant independent selection probabil-ities, users in whrrl.com have smaller independent selection probabilities than those in last.fm. As shown in Figure 9(b), 5% (for whrrl.com) and 1% (for last.fm) of users have inde-pendent selection probability smaller than 0.8, respectively. Generally speaking, the social influence of users in location check-in activities is more significant than those in music listening activities. One explanation is that location check-ins are inherently social activities while music listening is usually for self-entertainment.
Both user preference of a user and social influence from her friends can be learned through our SIS model to build Figure 10: Example user profiles and social influence learned from last.fm dataset, by using SIS user profiles . In this section, we analyze two user profiles to facilitate a better understa nding of user behaviors. In Figure 10, we show the profile of user 338 (consisting of her preference of latent topics and influence from friends) from last.fm dataset. As shown, user 338 is influenced by user 1196 and user 668, with th e influence proba bility val-ues 0.005 and 0.043, respectively (other friends with lower influences to user 338 are omitted). Also, the top 5 topics of users X  preferences are also shown, where the probabilities representing users X  interests in the topics are labeled in the corresponding edges. Notice that there are 4 overlapped top-ics for user 1196 and user 338; while there are 3 overlapped topics between user 668 and user 338. In terms of common interests, user 1196 is more similar/correlated to user 338 than user 668. However, we find that user 668 exhibits more social i nfluence upon user 338 than user 1196 does. Notice that the notion of social influence in our SIS model is able to capture the  X  X bnormal X  behavior of a user due to influ-ence from her friends. Figure 10 confirms that friends with high correlation/similarity or share a lot common items do not necessarily exhibit strong social influence, while friends with less overlapped interests may still be quite influential, as some friends may have some special knowledge useful to others. 5 . Similarly, we study the user profile discovered from whrrl.com dataset. Figure 11 shows a user profile for user 8, consisting of his top ranked topics and social influence from two most influent ial friends, i.e., us er 65 and user 2175. As shown, user 65 and user 2175 ha ve the same influence on user 8 (who is relatively weak in independent selection) although they have different degrees of overlapped topics with user 8. Again, social correlation and similarity between friends do not reflect the social influence between them. Figure 11: Example user profiles and social influence learned from whrrl.com dataset, by using SIS
Next, we report our findings in evaluating group recom-mendation algorithms, including the SIG algorithm we pro-posed, along with two aggregation-based strategies. We use
As discussed in the Introduction, the ideas and assumptions made in many existing work contradict this observation. the 17 , 587 group check-in records in whrrl.com in our ex-periment, where we consider a group check-in record (i.e., the ground truth) at a time and take the average of tested records. Notice that a record indicates a group of people vis-iting a place. An effective group recommendation algorithm should have this place ranked high among all the places rec-ommended. Therefore, we propose a metric called relative ranking to evaluate the performance of the group recommen-dation algorithms. Suppose that a given algorithm returns a ranked list of m items (i.e., all places in this experiment). If the actual visited place is ranked in the l -th position of the returned recommendation list, the relative ranking is calcu-lated as l m . For example, if an actual visited place is ranked 10th among a total of 100 items returned by a group recom-mendation algorithm, the relative ranking is 10 / 100 = 0 Figure 12: Group recommendation (whrrl.com) Figure 12 compares the performance of SIG, Average and Least Misery. The values in Y-axis represent the relative rankings of actual visited places (the lower the better). The conventional Average and Least Misery strategies are de-vised based on user behavior (UB) and item content (IC). Here we also implement both algorithms using the model parameters discovered based on our SIS model. The result shown in Figure 12(a) indicates that SIG always outper-forms the other four and reach its optimal point when the topic size is around 60. Besides, we also observe that our SIS model enhances the performance of both Average and Least Misery algorithms. Recall that the SIG algorithm only takes into account the social influence (without considering the user preference) in making group recommendation. The result is surprising as we may think that both preferences and social influence of group members are important for a group of whrrl users to decide where to go. However, this experimental result may hint that people tend to listen to other people X  X  opinions, by compromising their own prefer-ence, in group activities. Thus, social influence based group recommendation shows the best performance.
 In Figure 12(b), we find that SIG outperforms the Average-SIS and Least Misery-SIS strategies for most group sizes (the result for conventional implementations are not shown for clarity of presentation). However, as the group size growing larger, the improvement obtained from SIG decreases. This finding implies that for smaller groups, the social influence among group members plays a major role in item selection for the group. However, for larger groups, the group con-sensus aggregated from individual preferences may dominate the group decision, as it probably becomes too complicated to communicate with all members when the group is large. This finding is consistent with our experience in activity planning, i.e., for a smaller group, one or two influencing members may significantly determine the activity venue. On the other hand, for a large group, the social influence from individuals may become difficult to take effect on the entire group. As a result, the group X  X  common interest dominates. Figure 13: A subgraph of social network labeled with social influence and user preference.

To validate our idea about using social influence together with user preference for viral marketing study, we present a case to demonstrate that our approach can identify good targets for marketing. Here, we extract a small social graph from the last.fm dataset as shown in Figure 13. The so-cial influence learned from SIS are labeled as the weight of social links in the figure. Here we select an item 2940 from last.fm as the marketing item for our case study. We also list each user X  X  preference to item 2940 on the left-lower corner of Figure 13. In this study based on the Threshold Model, we compare the effect of viral marketing with two differ-ent approaches: 1) a conventional method (baseline), solely based on the social influence; and 2) our proposal, which combines both user preference and social influence. In the experiments, we set the threshold  X  u as 0.01 and the weight between user X  X  preference to item 2940 and t he influence from friends as 0.5. As such, these two methods execute for 10 iterations. For each seed user s , the corresponding effect of viral marketing V s (i.e., final number of activated users) are shown in Table 2, indicating our proposal is expected to be more effective than (or at least complementary to) the baseline. our proposal baseline Table 2: Comparison of viral marketing strategies
We also use the different seed selection made in both meth-ods to illustrate the importance of taking into account both the user preference and social influence for viral marketing. Notice that our proposal suggests to start with seed user 5 but the baseline method suggests user 4. Obviously, user 4 is chosen by the baseline because i) she has high social influence to her neighbors, and ii) she is at the center of the social network. Under this reasoning, user 5 or 6 are infe-rior to user 4 because they have lower influence, comparing to the hub user 4. Actually, user 5 is the best choice in our proposal because, even though user 5 may not influence user 4 directly, user 4 can still get activated easily since she likes the item 2940 (i.e., she has a great interest in 0 . Therefore, our proposal targets on user 5.
In recent years, the so-called  X  X ocial influence X  has been incorporated into recommender systems based on various heuristics, e.g., assign extra similarity weight to friends in collaborative filtering. In this paper, we discuss the differ-ences between social influence and social correlation/similarity and argue that the phenomenon of social influence can be captured quantitatively for use in various recommendations and applications. We propose a probabilistic generative model, called social influenced selection (SIS) model, to cap-ture the the social influence between linked friends and user preferences and develop an efficient algorithm to discover those valuable information from real datasets through sta-tistical inference. A novel contribution of this work is a coherent approach which facilitates seamless integration of social network, user behavior and item content for recom-mendation. Additionally, the social influence and user pref-erence extracted based on SIS can be used for a variety of applications, including group recommendation, viral mar-keting, user analysis, and topic analysis. Moreover, through a comprehensive set of empirical experiments using datasets collected from last.fm and whrrl.com, a number of interest-ing findings are obtained, including: 1) the social influence is beneficial for recommender systems and item recommen-dation made based on SIS (which integrates user behavior, social influence and item content) achieves the best per-formance; 2) user behavior (in form of location check-ins) in whrrl.com shows the spatial clustering phenomenon, and items (even with similar contents) in different spatial clus-ters tend to belong in different latent topics; 3) users making decisions mainly based on their own preferences, although friends X  opinions may affect the decision making to certain degree, i.e., the probability for a user to follow an uncommon preference of his friends is relatively small; 4) friends with high correlation/similarity or share a lot of common items do not necessarily exhibit strong social influence, while friends with less overlapped interests may still be quite influential; 5) in group activities, people tend to listen to other peo-ple X  X  opinions, by compromising their own preference; and 6) combining both user preference and social influence (our strategy for viral marketing) is expected to be more effec-tive than (or at least complementary to) the conventional approach solely based on social influence.

As for the future work, we would like to further extend the SIS model to capture social influences with respect to latent topics. In addition, we also plan to conduct field study to demonstrate the advantages of our proposed viral marketing strategy. Finally, instead of relying on the learned knowledge from SIS (which for individual item selection) to make recommendations for a group, we plan to develop a new generative model to capture the item selection process for group activities.
