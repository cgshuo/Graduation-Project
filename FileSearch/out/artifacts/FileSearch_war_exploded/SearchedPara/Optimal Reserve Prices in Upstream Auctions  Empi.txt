 We consider optimal reserve prices in BrightRoll Video Ex-change when the inventory opportunity comes from other exchanges (downstream marketplaces). We show that the existence of downstream auctions impacts the optimal floor. Moreover, it renders the classical derivation of the floor set by a monopolist inadequate and suboptimal. We de-rive the new downstream-corrected reserve price and com-pare its performance with respect to existing floors and the classical optimal monopoly price. In our application, the downstream-corrected reserve price proves superior to both. The proposed model also deals with data challenges com-monly faced by exchanges: limited number of logged bids in an auction, and uncertainty regarding the bidding behavior in other exchanges.
 The relevance of this study transcends its particular con-text and is applicable to a wide range of scenarios where sequential auctions exist, and where marketplaces interact with each other.
The importance of video advertising is growing. Accord-ing to a PWC report 2015 [1], online video advertising rev-enue exhibits the fastest growth in internet advertising: ris-ing from $6.32bn in 2014 to a forecasted revenue of $15.39bn in 2019.

Using data from BrightRoll Video Exchange, we estimate and test a structural model to compute optimal reserve prices. A reserve price corresponds to the lowest bid that the seller is willing to accept for his item. The novelty of this work is that we set the optimal reserve price in a marketplace (upstream) taking into account that, in order to deliver the video advertisement, the winner of the exchange competes against bidders in a second exchange, called downstream marketplace. The use of several exchanges may help pub-lishers to increase demand and competition for the inventory opportunity, since different marketplaces may have different demand partners. As the reader may anticipate, the infor-mation that an exchange has regarding other marketplaces is limited. Our model accounts for that, as well as, partial knowledge of bids submitted in the own exchange.

In this paper, we derive the reserve price, also called floor, that BrightRoll Video Exchange should charge in order to maximize its expected profits considering the existence of a downstream auction. In our analysis, we will assume that Brightroll conducts a second price auction and the down-stream exchange uses a first price auction to allocate im-pressions.

From an exchange perspective, video advertising is not very different from allocating static display advertising: the publisher has an inventory opportunity that wants to mon-etize using an auction conducted by a marketplace. The main difference between the classic banner and video ads is the format: we may have a video ad playing before (pre-roll), during (mid-roll), or after (post-roll) the streaming content. The format affects the bidder X  X  valuation of the opportunity.
In the presence of downstream auctions, the publisher sends an ad-request to a marketplace (downstream). Then, the exchange will send a bid request to several real time bidders (RTB), that may be, for instance, demand aggrega-tors (DSP), advertisers, or other marketplaces (upstream). The upstream marketplace will also auction the opportunity. The winner of the latter exchange will then compete against bids submitted downstream. Finally, the downstream win-ner will be the one delivering the advertisement.

We are not aware of any study quantifying the importance of downstream auctions. However, at BrigthRoll a signifi-cant amount of inventory opportunities comes from other exchanges. Given the relevant role of the company on video advertising, we believe that their implications deserve to be studied.

We show that, for a given inventory opportunity, the op-timal upstream exchange floor is greater than the monopoly reserve price developed by Myerson [8] and Riley and Samuel-son [10]. The result is very intuitive: the existence of a down-stream exchange makes harder to deliver the video ad, since the upstream winner has to compete against downstream bidders.

We use auction theory and statistical tools to overcome data limitations. In particular, we only have information about auctions with bids above the current reserve price, which leads to a left-censored data problem. Moreover, con-ditional on auctions with bids above the floor, we only know the identity of the winning bidder, its bid, the second highest bid, and the current floor. We do not either have data about auctions conducted downstream, except a dummy variable indicating that the upstream winner also won the down-stream auction and delivered the video ad.

Due to the large amount of data and expensive computa-tions, we decided to implement the algorithm using Apache Spark, a general-purpose cluster computing system designed to deal with this type of tasks.

We measure the impact of the aforementioned classical optimal floors on inventory with and without a downstream exchange. Then, we use experiment data to derive the ex-pected performance of optimal floors with the downstream correction.

Our test shows that implementing the classical monopoly reserve price without a correction increases the overall gen-erated revenue on inventory with and without a downstream auction. In the particular case of inventory with BrightRoll Video Exchange as a unique marketplace, the expected rev-enue lift equals 39%, with a observed revenue increase in 77% of the different types of inventory, also called placements. If we look at the effects of the classical optimal floor set by a monopolist on inventory with downstream auctions, re-sults are mixed: while the overall expected revenue lift with respect to current floors equals 25%, our recommendations only increased revenue in 67% of the analyzed placements. Results improve when we use floors that account for the existence of downstream auctions. In such a case, the ex-pected revenue lift equals 29% and revenue increased in 77% of placements, outperforming the results from the classical optimal monopoly floor.

As expected, our recommendations work better when we set floors above the current ones. As previously mentioned, data is left-censored. As a result, we have to infer the distri-bution of bidders X  valuation using data that is only observed when bids are above current floors.

The rest of the paper is organized as follows. Section 2 reviews previous work. Section 3 introduces general aspects of the type of problems that we are trying to solve. Section 4 presents the model and optimality conditions for the re-serve price. Section 5 outlines the estimation methodology. Section 6 describes the data and estimate results. Section 7 presents the experiment results. Finally, section 8 concludes.
Reserve prices have been largely studied in auction the-ory. However, empirical literature is scarce. One of the rare studies was conducted by Ostrovsky and Schwarz [4]. Their paper is one of the first large scale experiments mea-suring the impact of setting reserve prices for online adver-tisement. They combine previous work in auction theory by Myerson [8], Riley and Samuelson [10] and Varian [12] to derive optimal floors for sponsored search. Their experi-ment shows that revenue substantially increases as a result of implementing optimal reserve prices. While they have full information about advertisers bids, we have to face the problem of limited data and sequential auctions.

Yuan et al. [13] empirically test several algorithms to set reserve prices. They propose a real-time control function approach to correct reserve prices by using the highest bid. They also test the classical derivation of the optimal monopoly price based on the aforementioned work by Myerson [8] and Riley and Samuelson [10], and two other algorithms based on the regression of the two highest bids. Based on results from their experiment, the proposed control function ap-proach works better than the optimal monopoly floor ap-proach. Due to system requirements, we are not allowed to change the reserve price at impression level, preventing us to test the Yuan et al. [13] approach. In any case, we are concerned about the longterm effects of their proposed algorithm. Having a reserve price that directly depends on the highest bid may give bidders incentives to shade their bids as in first price auctions (see V. Krishna [6]). Authors are aware of this possibility, but due to confounding factors (e.g. holidays at the beginning of the experiment, bidders being not aware of the experiment, ...) they could not show that bidding behavior were not affected by the algorithm. We could neither use the regression based models since we do not observe auction data when the highest bid is below the reserve price.

From a theoretical perspective, our paper is related to se-quential auctions and auctions with intermediaries. The ex-isting theoretical work assumes that the distribution of the bidders X  valuation and the number of competitors is known at each round of auctions. This is not our case since we do not have much information about what is happening down-stream. For instance, McAfee and Vincent [7] derive optimal floors when the auctioneer is able to resell the object in a new auction round if bids are lower than the set floors. Other theoretical studies like Feldman, et al. [5], and Stavrogian-nis et al. [11] characterize the equilibrium behavior of the players in an auction with intermediaries. In their models, there exists an exchange (downstream) that sends the bid re-quest to other upstream exchanges (intermediaries). Given a predefined auction mechanism, Feldman et al. [5] focus on the derivation of the profit maximizing reserve price set by the downstream and upstream exchanges, and the opti-mal fee charged by the intermediary. On the other hand, Stavrogiannis, et al. [11] study the optimal reserve price set by the downstream exchange and the intermediary profits depending on the auction design.
Figure 1 displays the analyzed business model. When a publisher has an inventory opportunity, it sends an adver-tisement request to a marketplace denoted as Downstream Marketplace , which conducts an auction to allocate the op-portunity. Then, the downstream marketplace will send a bid request to several real time bidders (RTB), that may be demand aggregators (DSP), advertisers, or other mar-ketplaces. In Figure 1, we have two real time bidders: dsp1 and an exchange denoted as Upstream Marketplace . Simi-larly, the upstream marketplace will also conduct an auction to determine the winner and the bid passed to the down-stream exchange. In our application the upstream exchange corresponds to BrightRoll Video Exchange.

The upstream marketplace is assumed to conduct a sec-ond price auction, and the downstream exchange uses a first price auction mechanism to allocate impressions. Both ex-changes are able to set reserve prices in order to maximize their expected revenue. In this paper, we focus on the opti-mal floors set by the upstream exchange.

Only if the advertisement is delivered, the winner of the downstream marketplace pays the transaction price, and the exchange and publisher split the generated revenue. As we will see later, the optimality condition to set the upstream reserve price does not depend on fees charged by exchanges. For that reason, we will assume that the downstream mar-ketplace does not charge any fee for conducting the auction. This is the case where publishers manage the allocation of their inventory using their own marketplace (e.g. Yahoo!, Facebook,...). On the other hand, the upstream marketplace will keep a percentage of the clearing price of the winning bid. As we will explain in detail later on, to ensure that the upstream exchange gets paid, it will keep the corresponding fee before passing the bid to the downstream auction.
As an illustration, imagine the scenario depicted in Fig-ure 1. The publisher has an inventory opportunity and sends an ad request to the downstream marketplace. The ex-change will send a bid request to the upstream marketplace and dsp1. Then, the upstream marketplace will ask DSPs 2, 3 and 4 to submit a bid for the inventory opportunity. As-sume that dsp2 submits a bid that equals 8 dollars eCPM, dsp3 bids 9, and dsp4 bids 4. Only bids above the floor are considered. In this example, the upstream floor is set to $4.7. As a result, the bid submitted by dsp4 is discarded. Among the remaining bids, the winner of the upstream marketplace is dsp3. Since the exchange employs a second price auction mechanism, we use the bid submitted by dsp2, the set floor and the revenue kept by the marketplace to compute the bid passed to the downstream marketplace. The upstream transition price equals $8 and corresponds to the maximum of dsp2 and the floor set at $4.7. Assume that the upstream exchange keeps 25% of the transaction price if bidder dsp3 is able to deliver the advertisement. Given the revenue share, the bid submitted to the downstream marketplace equals $6, which is the result of subtracting 25% from the dsp2 bid (i.e. 6 = 8  X  (1  X  0 . 25)). Consequently, the potential revenue for the upstream marketplace is $2 eCPM. The bid passed to the downstream auction, the tuple { dsp 3 , $6 } , competes with dsp1. Assume that the downstream marketplace sets a floor that is equal to zero and runs a first price auction. Given the auction design and bid submitted by dsp1, dsp3 wins the auction and pays $8. The publisher will keep $6 and the remaining $2 corresponds to the fees charged by the upstream exchange.
In this section we develop the model to estimate the opti-mal floor that the upstream marketplace should set in order to maximize its expected revenues taking into account the existence of a downstream exchange. In the upstream mar-ketplace, we assume that there exist N potential bidders for a particular inventory opportunity. For each risk neu-tral bidder i , the valuation of the inventory opportunity, denoted as v i , is assumed to be an independent and identi-cally distributed realization of the random variable V over the interval [0 ,  X  v ], which has a cumulative distribution func-tion F V ( v ) and probability density function f V ( v ). While the value of the inventory for each potential buyer is private information, the distributions F V ( v ) and f V ( v ) are publicly known by participants. For simplicity, we also assume that bidders are not able to switch between marketplaces.
In second price auctions with reserve prices, it is a weakly dominant strategy for bidders to bid their own value. The existence of a downstream first-price auction does not change the bidding strategy of participants in the upstream ex-change. As a result, truth-telling continues being a dom-inant strategy. That is, where b i corresponds to the bid made by i , v i equals the aforementioned valuation of the inventory, and r denotes the reserve price.

The proof is very intuitive. Assume that in the upstream marketplace a potential buyer i bids less than his valuation v . Given such a choice, the bidder would risk losing the inventory opportunity to another interested buyer who bids higher than him, but who has lower valuation. Note that the price paid by the winner is not determined by its own bid but the bid of the nearest opponent. So bidding below v is not optimal in the upstream auction. This result is reinforced by the existence of a downstream exchange, since bidding below bidder X  X  valuation increases the probability that a downstream bidder, who values the inventory less than v i , bids slightly higher than the upstream potential buyer. On the other hand, bidding more than bidder X  X  own valuation increases the chances of winning the upstream and downstream auctions. However, using a similar argument, if the upstream bidder i bids more than v i , he may pay more than the inventory opportunity is worth to him. Since we have ruled out bids both above and below v i , the only option is to bid his own valuation v i . In the presence of a downstream auction, there is no benefit from deviating from truth-telling.

Given the ordered bidder X  X  valuations in the upstream auction v 1 &gt; v 2 &gt;  X  X  X  &gt; v N and knowing that truth-telling is an equilibrium, the bidder with highest valuation v 1 wins the upstream auction, and pays, conditional on winning the downstream auction, the maximum between what his near-est opponent is willing to pay v 2 and the reserve price r . That is bidder 1 pays Note that the actual payment is only made if the winner of the upstream auction delivers the advertisement.

In order to derive the reserve price, we extend the gen-eral formulation proposed by Riley and Samuelson [10] by capturing the effects of introducing a downstream auction. We will follow a similar approach to derive the optimality condition for the reserve price.

Since bidders are assumed to be symmetric, we just need to study one buyer (bidder i ) to derive his expected pay-ment and the expected revenue of the exchange. Bidder i  X  X  expected profit from participating in the upstream market-place equals where v i is the value of the inventory opportunity for bidder i , x corresponds to bidder i  X  X  bid, and F V ( x ) N X  1 is the prob-ability that bidder i wins the upstream auction (i.e. every-body else bids less than bidder i ). P D (  X  w T ( r )) corresponds to the probability of winning the downstream auction. It de-pends on  X  w T (  X  ) that equals the expected transaction price conditional on having at least one bidder above the reserve price r . As we will discuss in detail later on,  X  w not directly depend on the reported value but on the known distributions f V and F V . This simplifies the optimization problem. Finally, S ( x ) is the expected payment given bid x .
Since truth-telling is a dominant strategy. The following first-order condition must be satisfied if the bidder wants to maximize his expected gain,  X   X ( x,v i ) at x = v i .

If the bidder has a valuation equal to the reserve price r , he expects to pay Given conditions 1 and 2, bidder i  X  X  expected payment is This expression can be further simplified by integrating by parts as follows,
Given bidder i  X  X  expected payment and assuming that there exist N symmetric bidders, we can derive the ex-pected revenue of the upstream exchange and the floor that it should charge in order to maximize its profits. The up-stream marketplace expects to receive a percentage of what bidders expect to pay. This revenue share is denoted as rev and treated as given. Since there are N symmetric bid-ders, the expected revenue of the upstream exchange ( X  ups equals N times the revenue share times the expected pay-ment of each potential buyer ( S (  X  )). That is, Note that in 3 we compute the expected value of S (  X  ) be-cause the exchange does not know how much each potential buyer values the inventory. It only has information about the distribution of bidders X  valuation.
 Integrating expression 3 by parts,
Given the upstream marketplace expected profits, in or-der to find the optimality condition for r to be optimal, we compute the derivative of  X  ups with respect to r . That is,
Using equations 4 and 5, the optimality condition is char-acterized by where the probability of winning in the downstream ex-change is assumed to be increasing in r on the support probability of winning the downstream auction with respect to the reserve price equals Looking at equation 7, assuming that P D (  X  w T ( r )) is increas-ing in r is equivalent to assume that P D (  X  w T ( r )) is increasing in  X  w T , since by definition  X  w T increases with r .
The reserve price that follows from equation 6 leads to the optimal reserve price and it is denoted as  X   X  c .
 The following proposition summarizes previous results.
Proposition 1: Under the assumptions that bidders X  val-uation of the inventory opportunity is an i.i.d. realization of the random variable V , and bidders are risk neutral, the re-serve price that maximizes the upstream exchange expected revenue  X   X  c satisfies Note that without downstream auctions, the optimality con-dition for the monopoly reserve price equals (see Riley and Samuelson [10]) where  X   X  u corresponds to the optimal reserve price without downstream correction. Note that, contrary to expression 9, equation 8 depends on the number of competitors and prob-ability of winning the downstream auction. On the other hand, the revenue share kept by the upstream exchange ( rev ) does not have any impact on the optimal reserve price.
Proposition 2: Under the assumptions that bidders X  val-uation of the inventory opportunity is an i.i.d. realization of the random variable V , bidders are risk neutral, and the probability of winning the downstream auction is increasing in the reserve price, the reserve price that maximizes the upstream exchange expected revenue  X   X  c is greater than the uncorrected optimal floor  X   X  u .

The proof is straightforward. Under the stablished as-sumptions, the payment of upstream bidders is increasing in r , and the optimal reserve price that maximizes the up-stream expected revenue in the presence of a downstream exchange is  X   X  c . As a result, using  X   X  u in equation 6 is not op-timal, lowering the expected revenue. Proposition 2 states that, for a given inventory, the corrected optimal floor (  X  greater than the uncorrected one (  X   X  u ). This result is very in-tuitive: the existence of a downstream auction makes harder to show an impression since the winner of the upstream mar-ketplace has to compete against downstream bidders. As a result, the upstream floor is increasing with downstream competition. That explains why  X   X  c is greater than a reserve price that does not account for the existence of downstream exchanges (  X   X  u ).

As we will discuss in detail later on, we will analyze the impact of  X   X  c and  X   X  u using data from BrightRoll Video Ex-change.

The last part of this section is devoted to further develop the term  X  w T , that corresponds to the expected transaction price conditional on having, at least, one bidder above the reserve price.

By definition,  X  w T equals where the first component on the right hand side is the ex-pected payment when there is a single bidder above the re-serve price, and the second term equals the expected pay-ment when two or more bids are above the reserve price r . P
W T ( w = r ) corresponds to the probability that the transac-tion price w is equal to the reserve price r , and f W T ( u,r ) is the probability distribution function of the transaction price when there exist more than one bid above the reserve price. Both probabilities are conditional on having, at least, one bid above r . That is, the conditional probability for w = r corresponds to where the numerator indicates the probability that there is a single bid above the reserve price, and the denominator equals the probability that someone bids above the reserve price.

As previously discussed, for a particular auction we do not observe all bids. We only have information regarding the highest and the second highest bid as long as they are above the reserve price. As a result, we will use the density function of the second highest bid to compute f W T . That is, the density function of the transaction price conditional on having two or more bidders above the reserve price equals f W T ( u,r ) = The numerator in 11 corresponds to the density function of the transaction price w when it is equal to the second highest bid. Consequently, it follows the distribution of the second-highest-order statistic from an i.i.d. sample of size N and distribution f V (see Arnold, Balakrishnan, and Na-garaja (1992) [3]). Once again, the denominator equals the probability that there exists at least one bid above the re-serve price.

After some algebra, it is easy to show that the correspond-ing derivative with respect to the reserve price equals  X   X  w
T ( r )  X  X  This derivative will be used to compute the optimal reserve price (  X   X  c ) in equation 8.

In the next section we discuss how to implement the previ-ous results to get the optimal floor using data from BrightRoll Video Exchange.
In order to compute the optimal floor in equation 8 we need the distribution of bidders X  valuation of the inventory opportunity ( f V , F V ), and the expected probability of win-ning the downstream auction ( P D ). This section outlines the procedure to estimate the aforementioned distributions.
The BrightRoll Video Exchange data set only contains information about auctions with the highest bid above the reserve price. Consequently, we do not have data about up-stream auctions where all bids are below the set floor. The data set includes details about the type of inventory (also called placement), the identity and the bid of the winner in the upstream auction, the transaction price ( w ) and the cur-rent reserve price ( r ). Regarding downstream marketplaces, we only know which upstream auctions led to an impression in the downstream exchange.

Our algorithm takes into account the available informa-tion in order to compute the optimal reserve price in the up-stream auction when inventory comes from other exchanges. We use a two-step approach to estimate the floor price: firstly, we characterize the distribution of the buyers X  val-uation of the inventory ( f V and F V ), and estimate the pa-rameters capturing the relationship between the probability of wining downstream and the expected transaction price. In step two, we will use the estimates and expression 8 to compute the optimal reserve price.

In step 1, we follow Paarsch and Hong [9] and estimate the parameters of the model using the likelihood function of the transaction price ( w ). As previously stated, given the ordered bidder X  X  valuations in the upstream auction v v &gt;  X  X  X  &gt; v N , w equals Once again, the actual payment is only made if the winner of the upstream auction delivers the advertisement.
When the upstream exchange conducts an auction we may have three possible scenarios: one where all bids are below the reserve price, the case where only one bidder is willing to pay more than the reserve price, and the outcome where two or more bidders submit a bid above the floor. We will combine the probability of each event to construct the prob-ability density function of the transaction price w .
The probability that all bidders bid below the reserve price equals where  X  corresponds to the vector of parameters defining the shape and scale of the parametric distribution of the bidders X  value of the inventory.

When only one potential buyer bids above the reserve price and the rest N  X  1 bidders have valuations below it, the probability is equal to
Finally, the corresponding probability density when two or more bidders value the inventory more than the reserve Figure 2: Truncated Probability Distribution of W price is where n is the number of bids above the reserve price. This expression corresponds to the distribution of the transaction price when it is equal to the second highest bid, and it follows the distribution of the second-highest-order statistic from an i.i.d. sample of size N and distribution f V (see Arnold, Balakrishnan, and Nagaraja [3]).

Figure 2 displays the truncated density function of the transaction price in the upstream exchange. As previously mentioned, the distribution has three parts: the transaction price w equals zero when the inventory is not allocated, w equals the reserve price when only one potential bidder bids above r , and w follows the distribution  X  f W when more than one bidder values the opportunity above r .

As a result, the probability density function of w in the presence of a reserve price is: where D 0 and D 1 are indicator variables. D 0 = 1 if all bids are below the reserve price and 0 otherwise. On the other hand, D 1 = 1 if and only if one of the bids is above the reserve price.

Since the dataset does not contain information about auc-tions with the highest bid below r , we use the truncated version of equation 12 (see Amemiya 1985 [2]), Note that f W does not depend on the probability of winning the downstream auction. This is because upstream bidders have incentive to report their true valuation independently of winning in the downstream exchange.

Given the probability density function defined in 13, we can construct the likelihood function as follows where Q corresponds to the total number of auctions con-ducted for a particular type of inventory.

Remember that  X  corresponds to the vector of parame-ters characterizing distributions F V and f V . Since we do not have information about auctions with the highest bid below the current floor, we need a parametric distribution to make out of sample predictions. That is, to obtain the optimal reserve price, we need to evaluate the expected rev-enues when floors are below the current one. This type of inference cannot be done using nonparametric approaches. However, choosing a parametric form has some risks linked to misspecification that can lead to poor results. We can assume different parametric forms as long as they have pos-itive support. In our application, we use the Weibull family with density function defined as
Given the likelihood function in 14, we can estimate the vector of parameters  X  by minimizing the negative log like-lihood. That is,
In order to compute optimal reserve prices in equation 8, we also need to estimate the relationship between the prob-ability of winning the downstream auction P D , and the ex-pected conditional transaction price  X  w T . In this paper, we assume a simple linear relationship between both variables, where  X  0 and  X  1 correspond to the intercept and slope re-spectively. captures possible measurement errors and un-observed factors for the upstream auction designer. Assum-ing that is i.i.d. and it is neither correlated with  X  w nor r , we estimate the parameters using ordinary least squares. If the assumptions hold, the resulting estimates of  X   X  1 are unbiased. However, we are aware that some corre-lation between  X  w and the unobserved part may exists. For instance, the value of the inventory opportunity may depend on the hour of the day or type of user, affecting the proba-bility of winning the downstream auction and the expected upstream transaction price. This omitted variable problem may be solved by using instrumental variables. Further re-search should be devoted to avoid this confounding problem.
Given the parameter estimates, we use the optimality con-dition 8 to compute the upstream optimal reserve price when we account for the existence of a downstream exchange (  X  Similarly, we will use condition 9 when we do not account for the existence of downstream auctions (  X   X  u ).
We use data provided by BrightRoll Video Exchange and estimate the optimal reserve price for inventory with and without a downstream marketplace. In the case where there is only one exchange managing the ad-request, BrightRoll is the only one deciding which bidder will deliver the advertise-ment. On the other hand, when there exists a downstream Figure 3: Inventory A: ML vs Nonparametric CDF marketplace, we will estimate the reserve price taking into account that the winner of the BrightRoll exchange will com-pete against other bids in a downstream auction. In such a case, the BrightRoll Exchange will be considered the up-stream marketplace.

We used 2 weeks data and experimented with inventory with and without downstream auctions. Such an inven-tory captures a significant amount of revenue for BrightRoll. We studied 71 placements for the case where we only have one exchange, and 30 placements with a downstream mar-ketplace. Due to the large amount of data and expensive computations, we decided to implement the algorithm using Apache Spark, a general-purpose cluster computing system designed to deal with this type of tasks.

We estimated the optimal floor for each placement during the first 3 days of the experiment. Then we computed the average of the daily results weighted by the number of ad-requests. The resulting inventory floors were used in the A | B test during the remaining days of the experiment.
In this paper, we assume that in our training set all down-stream exchanges conduct a first price auction and upstream marketplaces use a second price auction. In reality, this is not always the case. For some placements, exchanges work in the opposite way: the downstream uses a second price and the upstream marketplace a first price auction. For this type of inventory, our results can be interpreted as a simulation exercise of the consequences of applying optimal floors if placements used the business model considered in the paper. 1
For each of placement, we estimate the distribution of bid-ders X  valuation using expression 15. As previously discussed, the use of a parametric distribution may have misspecifica-tion problems. However, in our application this approach is necessary in order to deal with data limitations. We could test how close the parametric approach is from the nonparametric model, and compare the behavior of differ-ent parametric families. However, in this paper we will use the expected lift of our recommended floors with respect to the currently implemented ones in order to asses the suc-cess of our model. As an illustration, Figure 3 compares the nonparametric cumulative distribution function of bidder X  X 
We are aware that some bias may exist in the estimates linked to the downstream correction term ( P D ). valuation of inventory A (  X  F V ) with the Weibull parametric approximation ( F V ). Given the aforementioned limitations of the nonparametric approach, the comparison is only pos-sible for the range of observed data. In this particular ex-ample, the nonparametric representation is limited to values above the current reserve price set at 2.67 dollars eCPM.
In order to compute the nonparametric distribution, we use the definition of cumulative distribution function of the second order statistic  X  F W , where N is assumed to be known. 2  X  F W can be constructed using observed data. Given this information, we just need to find  X  F V such that the equality in 17 holds. In the particular case of A, the Weibull and the nonparametric distributions are pretty close. This is not always the case.

Given the estimates of the density and cumulative distri-bution functions, we use ordinary least squares to estimate the parameters that define the relationship between P D and  X  w
T (equation 16). Further details about how we estimate the equation can be found in Appendix 1.

Once all the parameters of the model are estimated, com-puting reserve prices  X   X  c and  X   X  u follows from equations 8 and 9 respectively.
We conducted an A | B test in order to assess the impact of recommended floors. For each placement, we randomly split the ad-request traffic in two: 5% of the traffic is randomly selected to be part of the group with the recommended floor (test group), and the rest of the traffic will belong to the control group and use the current reserve price.

In order for the reader to understand how we measure the effectiveness of floor recommendations, Table 1 displays two types of inventory which are denoted B and C . While inventory B does not face a downstream auction, the up-stream winner of C has to compete against bids from other bidders in the downstream exchange. The Floor column in Table 1 shows the implemented reserve price for the test and control groups, and it is measured in dollars eCPM. The variable Exp indicates if the row corresponds to the test ( Exp = 1) or control group ( Exp = 0). Nb Auctions denotes the number of ad-requests for that particular type of inventory. Nb Successful indicates the number of ad-requests that ends up with a winner in the upstream auction. Column 6 corresponds to the ratio of successful auctions to the total number of ad-requests. As the name indicates, col-umn Nb Impressions denotes the total number of shown ads. The difference between the number of impressions and successful auctions is displayed in column 8. Several reasons explain why the number of impressions is different from the number of successful auctions: first, having a winner in the upstream exchange does not guarantee that the bidder is going to win the auction conducted downstream. Second, video advertisement is characterized by having a high fallout rate. That happens when the winner of the ad-request is not able to deliver the advertisement (e.g. due to creative errors or latency problems loading the video). For simplicity, we assume that the fallout rate is independent of the bid made
Since we know the identities of the upstream winners, we use the inverse of the Herfindahl index to compute the num-ber of effective competitors N . by potential buyers. Finally, the Revenue Lift denotes the expected revenue lift as a result of implementing the recom-mended floor. Note that the test and control groups are not directly comparable, since the test group only corresponds to 5% of all ad-requests. For that reason, we standardize the amount using the total number of ad-requests in the test and control groups.

If we look at inventory B in Table 1, we propose a 13.41 dollars eCPM reserve price instead of the current one set at $2. As previously noted, the number of auctions assigned to the test group is 5% of the total number of ad-requests. Among these ad-requests, 87% of auctions in the test group are successful. The percentage is lower than the one in the control group (91%). This result is expected, since increas-ing the floor decreases the probability that an auction clears (i.e. auction with at least one bidder above the floor). If we look at the ratio of impressions to the number of suc-cessful auctions, around 40% of successful auctions led to an impression in both groups. After standardizing the rev-enue, the expected revenue lift as a result of implementing the recommended floor equals 8%.

Similar analysis can be done for inventory type C. In this case, we recommend a floor below the current one (7.69 dol-lars eCPM instead of $13.33). Lowering the floor, the ratio successful to total auctions in the upstream marketplace in-creases from 2% to 16%. Once again, this result is expected since lowering floors rises the probability that at least one bidder bids higher than the reserve price. In contrast to inventory B, in C the ratio of impressions to number of suc-cessful auctions in the test group is half of the control. This is consistent with the existence of downstream auctions. As previously noted, the upstream winner of inventory C has to face the competition from other bids submitted in the downstream auction. Decreasing the reserve price, increases the number of auctions that clears upstream. However, it decreases the bid passed to the downstream exchange, de-creasing the probability of winning the downstream auction. This is not the case in auctions of type B, where the ratio of impressions to number of successful auctions is the same for the control and test groups. In placements without down-stream exchanges, like inventory B, winners do not face com-petition from other marketplaces. If this is the case, the only reason that explains that the ratio is lower than one is fully attributed to fallout, that is assumed to be independent of the transaction price.

We computed and tested the impact of optimal floors on inventory with and without downstream auctions. Due to business requirements, in the A | B experiment we applied the floor resulting from expression 9 and denoted as  X   X  u did not directly applied the correction for the existence of a downstream exchange as appearing in equation 8 (  X  Instead, we use the data resulting from the experiment and the predicted downstream winning probability to evaluate the optimal floor with the downstream correction. Further details about how we evaluate the effects of the corrected optimal floors can be found in Appendix 2.
 Table 2 displays the impact of implementing the new floors. Results are aggregated for confidentiality reasons. The first column describes the type of inventory: the first row corre-sponds to auctions without a downstream exchange. The second row describes the impact of implementing uncor-rected optimal floors on inventory with downstream auctions (  X  u ). Finally, the third row describes auctions with a down-stream marketplace and corrected optimal reserve price  X   X  Column Nb Placements captures the number of placements in the experiment. We tested optimal floors in 71 placements without downstream auctions. Similarly, we studied the im-pact of changing floors in 30 placements with a downstream marketplace. The third column describes the percentage of placements that lead to a lift in revenues. This is one of the main indicators to assess the validity of our predictions. For the case of placements without downstream auctions, 77% of our recommended floors (one for each placement) led to an increase in revenue. Performance decreases when applying the uncorrected optimal floor  X   X  u to placements with down-stream auctions. In this case, 67% of the recommendations led to an increase in revenues. The last row displays the ef-fects of using  X   X  c . In this situation, 77% of the recommended floors led to an increase in revenue. The latter result indi-cates that the corrected floor  X   X  c outperforms the standard formulation of optimal monopoly floors without the correc-tion (  X   X  u ).

Placements are very heterogeneous. They may differ in terms of publisher, targeted device, number of ad-requests, etc. Consequently, the effects of implementing optimal floors at placement level can be very different. For that reason, we decided to report the overall revenue lift and not the av-erage across placements. The last column in Table 2 shows the expected revenue lift as a result of the recommendations. This indicator is computed using the total revenue generated across all analyzed placements in the control group and the standardized revenue of the test group. Implementing op-timal reserve prices increases revenue. In the case of place-ments without downstream marketplaces, the expected rev-enue lift equals 39%. Consistent with the theoretical find-ings, the optimal reserve price with downstream correction outperforms the uncorrected monopoly price: 29% revenue lift when using  X   X  c vs 25% when testing  X   X  u . Note that the revenue lift as a result of new floors is lower in exchanges with downstream auctions than without. Differences be-tween both types of inventory may be one of the reasons that explains such as discrepancy. As discussed in the intro-duction, the use of several exchanges may help publishers to increase competition for the inventory, decreasing the effec-tiveness of floors.

Table 3 disaggregates previous results by type of recom-mendation: above and below the current reserve price. For inventory without downstream auctions, 24 out of 71 place-ments have a recommended floor above the current one, and 47 out of 71 have a lower recommendation. The perfor-mance of the recommended floors is linked to the available data. Remember that we only have data about auctions where the highest bid is above the reserve price. As a re-sult, we have to infer the shape of the distribution of buyers X  valuation for values below the current floor, decreasing the performance of recommendations. As expected, the model behaves better when we recommend above: 88% of recom-mendations above the current floor led to a positive revenue lift, and 72% for recommendations below the current reserve price. When analyzing the impact of uncorrected floors (  X  on inventory with a downstream auction, all recommended floors above the current ones led to an increase in revenue. On the other hand, only 52% of recommendations below the current floor led to a rise in revenue. Finally, the last three rows in Table 3 displays the performance of recommended floors when we correct for the existence of a downstream auction (  X   X  c ). We can see that we improved revenue in 100% of placements where we make recommendations above the current reserve price. On the other hand, effectiveness de-creases to 71% when we recommend below. Once again, in the presence of other exchanges  X   X  c performs better than  X  In this paper, we derive the reserve price that BrightRoll Video Exchange should charge in order to maximize its ex-pected profits when inventory opportunities come from other marketplaces. We prove that the classical approach to derive the monopoly reserve price is suboptimal. Consistent with the theoretical findings, in our application the downstream-corrected reserve price increases the expected revenue of the marketplace with respect to the current floor and the classi-cal derivation of the optimal monopoly price. The proposed algorithm also deals with data challenges commonly faced by exchanges: limited number of logged bids per auction, and limited information about inventory coming from other exchanges.

The model can easily accommodate features. As a re-sult, we can derive different floors depending on supply and demand characteristics (e.g. hour of the day, user charac-teristics, video format,...). Moreover, the relevance of this study transcends its particular context and is applicable to a wide range of scenarios where sequential auctions exist and where marketplaces interact with each other. Finally, further research can be devoted to analyze the endogeneity problem when deriving the relationship between the proba-bility of winning downstream and the expected transaction price. [1] Global entertainment and media outlook 2015-2019. [2] T. Amemiya. Advanced econometrics. In Cambridge, [3] B. C. Arnold, N. Balakrishnan, and H. N. Nagaraja. A [4] B. Edelman, M. Ostrovsky, and M. Schwarz. Internet [5] J. Feldman, V. Mirrokni, S. Muthukrishnan, and [6] V. Krishna. Auction theory. In Massachusetts: [7] R. P. McAfee and D. Vincent. Sequentially optimal [8] R. B. Myerson. Optimal auction design. Mathematics [9] H. J. Paarsch and H. Hong. An introduction to the [10] J. G. Riley and W. F. Samuelson. Optimal auctions. [11] L. C. Stavrogiannis, E. H. Gerding, and M. Polukarov. [12] H. R. Varian. Position auctions. International Journal [13] S. Yuan, J. Wang, B. Chen, P. Mason, and S. Seljan.
This section includes further details about the estimation of P D (  X  w T ) in equation 16. In order to estimate  X  we first need to construct the dependent variable P the covariate  X  w T ( r ). We trim the dataset discarding auc-tions within the 4th quantile ordered by the highest bid. As a result, the remaining data set only contains auctions with a highest bid between the reserve price and the 3rd quantile. Then we select twenty equidistant cutoff points. For each cutoff, we compute the revenue and the ratio of impressions to number of successful auctions resulting from auctions with a highest bid greater than the cutoff point. Each cutoff point is like imposing a reserve price, since auc-tions below each point do not clear. As a result, we will have resulting pairs, we will use ordinary least squares to have an estimate of  X  0 and  X  1 .
For each tested inventory with downstream auctions, we use equations 8 and 16 to compute the optimal reserve price  X  c and the predicted probability of showing the impression ventory, the corrected optimal floor  X   X  c is greater than the uncorrected one  X   X  u . This result allows us to use data from the test group to evaluate the performance of P D (  X   X  c have information about all auctions that successfully cleared even the ones that did not lead to an impression. From the model, we are able to compute the floor with downstream correction  X   X  c and estimate the probability of winning the downstream auction for that particular floor P D (  X  w T
In order to compute the expected revenue as a result of imposing the corrected optimal floor  X   X  c , we use the expres-sion 6, the parameter estimates resulting from minimizing equation 15, and estimates from equation 16.

We also need to estimate the number of impressions re-sulting from increasing the probability of winning the down-stream auction. Using the test group data, we remove suc-cessful auctions with the highest bid below  X   X  c ( Successful We sum the total number of impressions from the trimmed dataset ( Impressions c ). Using expression 10 we compute the expected transaction price given  X   X  c . Given  X  w using equation 16 and its corresponding estimates, we com-pute the expected probability of winning the downstream auction  X  P D (  X  w T (  X   X  c )).

We use  X  P D (  X  w (  X   X  c )), Impressions c , and successful find the extra number of impressions x resulting from in-creasing the probability of winning downstream as follows, Once we obtain x , we can compute the corresponding rev-enue. While the revenue generated from Impressions c easy to compute, the revenue from the new impressions ( x ) is trickier. The transaction price for impressions x will be equal to the floor with correction  X   X  c . The argument here is as follows: if the new x impressions clear, it must be as a result of increasing the floor. So the clearing price will be  X   X  c . For instance, imagine that the ratio of impres-sions to number of successful auctions for the corrected floor have 1,000 successful auctions (i.e. successful c = 1000), and 100 impressions that qualify with the new floor (i.e. Impressions c = 100). Then the number of new impressions ( x ) clearing at the new floor is 40, and the transaction price of each of these extra impressions equals the aforementioned corrected floor  X   X  c .
