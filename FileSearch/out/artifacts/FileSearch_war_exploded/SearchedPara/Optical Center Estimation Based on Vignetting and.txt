 In daily life, the camera becomes more popular, and some industry put forward higher requirement on the manufacture craft of cameras. Camera is mainly composed of lens and image sensor. There are two types of image sensors: the CCD sensor and CMOS sensor. Theoretically, the optical axis of lens is aligned at the center of the image sensor. However, due to manufacturing defect, there is certain error between as optical center. Optical center needs to be corrected, if the offset between the posi-tion of the optical center and the image sensor is out of reasonable scope. Research on optical center estimation in the production has become a popular topic. ters in line with different properties of lens [2]. The simplest method is that the nu-[3]. Another methods proposed by Orghidan [4], Caprile [5] and Lee [6] have been used for optical center estimation based on vanishing points. Lenz used the laser with the aim of locating the optical center [7]. The method of Shivaram and Seetharaman determined the optical center by mathematical geometry reasoning [8]. The effect of edges, is common in cameras. The main causes of vignetting are the following three types [9]: Natural vignetting (see Fig. 2(a)) appears as luminance falloff, due to different locations on the images sensor at different angles getting different brightness. This is especially obvious in wide angle lenses. The light luminance follows light falloff of, where is the angle between the optical axis and optical line. of lens. Different positions on the images sensor receive light in different shapes, and the central portion receive a larger area of light, while the edge portion get less. 
Mechanical vignetting refers to darken abruptly due to that fact that light lay is blocked by some secondary camera elements, such as filter rings. In this paper, we proposed a method that optical center can be located with the help of a three-dimensional mathematical function, which is based on surface fitting. We fit the function using all of pixel points in the image. The optical center can be determined by the means of fitting optical centers parameters. 
The rest of organization of this paper is as follows. We discuss two traditional ap-proaches in Section 2. In Section 3, we analyze our method in detail. Section 4 pre-sents the results of our research and Section 5 concludes the paper. 
Fig. 1. The brightness of the image gradually reduces from the central to the edge. different positions of CCD receive different shape of light due to the depth of aper-ture. 2.1 Background of Vegnetting Effects of the edge region. Moreover, the effect of vignetting gradually becomes more obvi-ous from the central to the edge. It is often assumed that the effect of vignetting is The coordinates of the peak value point is considered to be the optical center. Tradi-tional techniques based on vignetting have been proposed to estimate the optical cen-ter using this physical property. 2.2 Lin X  X  Method Using Circle Center Estimation value and computes the optical center based on the selected positions. The selected pixel points are close to circle because of the characteristic of vignetting, where the selected points form an imperfect circle (see Fig. 3(a)). Hence, we can estimate the position of circle using Hough transform, where the center of circle is the estimated optical center (see Fig. 3(b)). Fig. 4(a) shows the algorithm flow of Lin X  X  method. Fig. 3. (a) The selected value is circle in the ideal case. (b) Imperfect circle due to image noise. The circle can be detected using Hough transform, where the circle cen-ter is treated as the optical center. 2.3 Park X  X  Method Using Gaussian Distribution Model of original image, and modeling a Gaussian distribution image as follows, derivation  X  ) of the Gaussian model are estimated by minimizing the mean square image is minimized. Fig. 4(b) shows the algorithm flow of Park X  X  method. Fig. 4. (a) The algorithm flow of Lin X  X  method. (b) The algorithm flow of Park X  X  method. 
Lin X  X  method [10] is easy to implement, but the result is not robust to severe image noises. Gaussian distribution image of Park X  X  method [11] may not describe vignet-ting distribution of target image accurately due to the simplified Gaussian model in (1) without parameters describing the optical centers. Fig. 5 shows that our method produces the model images closer to original value with lower mean absolute error (MAE). In addition, Park X  X  method uses sequentially independent processes to esti-mate the optical center, where the Gaussian distribution image was initially produced for asynchronously shifting the image to approximate the optical center. 
For our method, we directly find the parameters, including the optical center coor-dinates from the surface fitting model, such that our method do not need to produce the intermediate Gaussian image compared with Park X  X  method. Fig. 6 shows the algorithm flow of our method. We can easily locate the optical center according to the estimated function parameters. Here we discuss two common fitting models. 
Fig. 5. The distributions of image model residual (difference of model value and original value). (a) Park X  X  method. (b) Proposed method using Gaussian Surface Fit-ting. (c) Proposed method using Quadratic Surface Fitting. 3.1 Proposed Fitting Model of Vignetting Effects 
Let us consider a three-dimensional coordinate system. We can model the pixel value z of a pixel point with coordinate  X   X  y x , as vignetting function. According to the model function f , we can accurately find the optical center. In theoretically, the mathematical model f is a convex, which has a maximum value. The coordinates of the maximum value, z max , is the optical center. We proposed two models for function f using suitable pixel data of the image. A good model should be simple, highly adaptable and without over-fitting. To min-imize the effect of outliers, we use mean absolute error (MAE), l 1 -norm, to evaluate the performance of fitting, where MAE can be calculated as fitting model, whose MAE value is the smallest. 3.2 Gaussian Surface Fitting Gaussian surface is a common model in image processing applications. In this sec-tion, we discuss Gaussian Surface Fitting. Let us define Gaussian function as follows, model in (1), the Gaussian surface model in (4) includes the coordinates of optical center as the model parameters. However, it is nontrivial to simultaneously solve for four parameters in equation We expand the terms, as follows, Define Using equation (6)-(7) and simplifying, we obtain In addition, we compute the logarithm of z . Define Thus we define equation (8) as mean squares error, as follows, Let the partial derivatives to be equal to 0, as follows, So temporary parameters, a , b , c , d , can be solved as follows, The model parameters including the optical center can be obtained as follows, 
Hence, we have derived the relationship between the original value z X  and the pa-rameters of the Gaussian surface model, where the optical center  X   X  solved accordingly. Fig. 7(a) shows the model values and original values. Surface Fitting. 3.3 Quadratic Surface Fitting vignetting can be fitted well by polynomial functions. Quadratic surface is a suitable model for vignetting. In this section, we discuss solving the parameters of this model by the least square method. The quadratic surface function is described as,  X   X  four unknown parameters, which are solved by fitting the best function to a series of data points. Equation (15) can be expanded as, Define Using equation (16)-(17) and simplifying, we obtain We can derive similarly (referring to Section 3.2), and optimize the temporary pa-cluding the optical center can be obtained by following expressions, where the estimated parameters  X   X  illustrates fitting situations of the quadratic model compared with the Gaussian model. We evaluate our method using 300 test images with vignetting distribution, which have a resolution of 3000 4000  X  . We use 16-bit raw image format to represent pixel values, so the intensity range is [0, 65535]. Our method was implemented in Matlab and run on a desktop PC with an Intel Core i7-6700 CPU. The execution time of each image is about 6 seconds. 4.1 Model Fitting Results 
Comparing the two models of our method, the mean absolute error (MAE) values of quadratic surface function and Gaussian surface function are 314.86 and 347.80 of fitting error. Moreover, our method is better than Park X  X  method in terms of MAE due to the simplified Gaussian model of Park X  X  method, as shown in Table 1. 4.2 Corner Reduction 
Considering the effect of darkening abruptly at corner region (see Fig. 8), we dis-cuss whether this serious vignetting effect interferes the final results. In Fig. 5, we compute the statistical residuals between original image and model image, and plot residual is subject to Gaussian distribution perfectly using corner reduction, while the distribution has redundant non-Gaussian data without corner reduction. 
However, because the influence of serious vignetting of testing image is mainly concentrated in the corner area, the fitting results are robust using the whole image (see Table 3). If the area of serious vignetting is large, we can consider whether nar-rowing the fitting area as shown in Fig. 8(b). abrupt darkening at corner region, we fit the central area of image. Fig. 9. The probability distribution of image residual. (a)(c) Gaussian Surface Fitting and Quadratic Surface Fitting using corner reduction. (b)(d) Gaussian Surface Fitting and Quadratic Surface Fitting without corner reduction. Table 3. The offset of optical center between using the whole image and using the central area. 4.3 Optical Center Estimation Results clues, let us compute the distance D between the optical centers of different methods using equation (20). where  X   X  average distance D of 300 images. Table 2 shows the result of Lin X  X  method [10], Park X  X  method [11] and our methods. Theoretically, the lower value of distance D implies a higher confidence of optical center estimation. Moreover, Fig. 10 shows the distributions of result of 300 images, which shows the mean value of different meth-ods. For details, Fig. 11 shows that the results of Lin X  X  method and Park X  X  method are different from the other methods, which agrees with the results in Table 2. Lin Method 10.0077 6.9597 6.9411 7.9695 
Park Meth-Fig. 11. The optical center of different methods. Lin X  X  method and Park X  X  method produce some results, which differ from the other methods. In this paper, we have presented a novel method for finding optical center based on surface fitting. The flaws of traditional techniques are described in detail. The effect of vignetting is common in the lens. We utilize its falloff feature to model two com-mon functions using least squares method. We find the optical center based on the parameters of the function, which is the fundamental difference to the previous ap-overall more robust and accurate, according to various clues of statistics. 
This work was supported in part by the Shenzhen Emerging Industries of the Stra-tegic Basic Research Project (No. JCYJ20160226191842793), and the National Natu-ral Science Foundation of China (No. 61602312, 61620106008). 
