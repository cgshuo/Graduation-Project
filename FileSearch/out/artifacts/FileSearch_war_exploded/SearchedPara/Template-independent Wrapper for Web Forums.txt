 This paper presents a novel work on the task of extracting data from Web forums. Millions of users contribute rich information to Web forum everyday, which has become an important resource for many Web applications, such as prod-uct opinion retrieval, social network analysis, and so on. The novelty of the proposed algorithm is that it can not only ex-tract the pure text but also distinguish between the original post and replies. Experimental results on a large number of real Web forums indicate that the proposed algorithm can correctly extract data from websites with various styles in most cases.
 H.3.3 [ Information Storage and Retrieval ]: Information Search and Retrieval -search process Algorithms, Experimentation.
 Crawler, Conditional Random Fields
With the developing of World-Wide Web, user-created content(UCC) becomes a vast and rapidly growing source of information. Thousands of people provides information in different forums everyday. Data collected from Web fo-rum is a valuable resource for various Web applications. For example, review analysis systems try to mine users X  opinions about products. However, the source which most applica-tions can process is the clean text without neither HTML tag nor other noise information(e.g. advertisements, navigation bar). A method that can automatically extract information from forums is useful for users and other applications.
To extract information from HTML pages, most tradi-tional methods extract data based on consistency of HTML DOM Trees. DOM Tree-based algorithms are template de-pendent[1, 3]. Because any changes of a template may lead to invalidated extraction, it is difficult to expand this kind of approaches to different websites. However, despite the as-sorted nature of Web pages, people can still easily identify the news content from a page at a glance with the visual consistency. Zheng et al. proposed a template-independent news extraction approach based on visual consistency[4].
Compared to news portals, contents in Web forums are normally disconnected and splited by post information such as user name, publish date, and so on. Because of it, news extraction methods, which extract continuous content from Web pages, can not be directly used for this task. Moreover, Web forums have various styles whose visual features are also different with news pages. In this paper we present a novel approach for Web forum extraction based on the observations from how humans recognize information from Web forums. Experiments show that the proposed method performs good results.
Based on data analysis, the algorithm TWWF is divided into the following steps: 1) extracting information areas that contain both the original post and replies; 2) identifying the boundaries between posts. The flowchart of TWWF is illustrated in Fig. 1.
The goal of Information area extraction is to identify the area which contains the original post and all replies based on visual features. Algorithm 1 presents the pseudo codes of our method for information area extraction based on the observations above. The algorithm accept a forum page as input and generates information area as output. The first step of it is to get the DOM Tree and rendering information from the given page. Then the possible information area child area whose width and height should larger than the given threshold is selected from the nodes of the DOM Tree. The final step is to remove the nodes ,which do not contain the information we need, based on the visual properties.
Through information area extraction, the information area is extracted from the page, as illustrated with blue back-ground in Fig. 1. Then posts boundary detection part is used to split the information area into several pieces. Each piece represents one post , which is either the original post or the reply. We convert the detection task into the se-quential classification. Such Conditional Random Fields[2] define conditional probability distributions p ( Y | X ) of label sequences Y given input sequences X . In this task, every DOM nodes which contains innertext and belong to infor-Figure 1: The flowchart of the proposed algorithm. mation area are sorted by their position (the coordinate of left-top corner) and treated as the input sequences X . La-bels of nodes are Boundary or Content . The features include not only traditional visual properties, such as Width, Font Size, Text Length and so on, but also relation between blocks in a single forum page, for example: Frame Repeat Count, Content Similarity and so on.
To demonstrate the performance of our method on various situations, a total of 267 pages from nine popular Web fo-rums were used in the experiments. The Web forums are in English and Chinese with diverse page layouts. Two annota-tors are asked to label the corpus independently, which con-tain 6327 DOM nodes. Table 1 shows the result of the con-tent extraction. When evaluating a Web forum, the CRFs model is trained by the other ones. The fist five rows rep-resent the results of Chinese websites. While the next four rows denote the results of English websites. The Web fo-rums belong to different types, such as news, game, enter-tainment, software, hardware, and so on. The last line of the Table 1 is the average results over all Web forums. Exper-imental results show that our approach works well in most circumstances. F value of our approach achieves 99 percent in qq.com, which is one of the most famous Web forums in China. While some of the Web forums X  results are not good enough. We analyzed the errors and found that most of er-rors could be divided into three types: 1) some signatures are very long, which are hard to be distinguished from the content; 2) some of the advertisements between the original post and the replies are usually wrong classified; 3) most pages contain some descriptions in the end, which might be misclassified.
This paper proposed a new template-independent wrapper for Web forums,TWWF, which simulate how human beings identify information from Web forum pages. Experimental results show that our method achieves high accuracy in dif-ferent websites with diverse page layouts.
 Algorithm 1 Algorithm for information area extraction 1: for all child area in Root Area do 2: if Reducible ( child area ) == TRUE then 3: FindInformationArea ( child area ) 4: return 5: end if 6: end for 7: InformationArea = Root Area 8: for all child area in InformationArea do 9: Remove ( InformationAreaDetection ( child area )) 10: end for 11: return InformationArea 2: return TRUE 3: end if 2: return area 4: return area 5: else 6: return NULL 7: end if This work was partially funded by Chinese NSF 60673038, Doctoral Fund of Ministry of Education of China 200802460066, and Shanghai Science and Technology Development Funds 08511500302. [1] J. Chen, K. Xiao. Perception-oriented online news [2] J. Lafferty, A. McCallum, and F. Pereira. Conditional [3] A. H. F. Laender, B. A. Ribeiro-Neto, A. S. da Silva, [4] S. Zheng,R. Song, and J. Wen. Template-independent
