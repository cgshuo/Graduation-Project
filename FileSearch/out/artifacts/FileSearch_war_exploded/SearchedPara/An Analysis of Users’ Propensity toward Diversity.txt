 Providing very accurate recommendations to end users has been nowadays recognized to be just one of the main tasks a recommender systems must be able to perform. While predicting relevant suggestions, attention needs to be paid to their diversification in order to avoid monotony in rec-ommendation. In this paper we focus on modeling users X  inclination toward selecting diverse items, where diversity is computed by means of content-based item attributes. We then exploit such modeling to present a novel approach to re-rank the list of Top-N items predicted by a recommen-dation algorithm, in order to foster diversity in the final ranking. Experimental evaluation proves the effectiveness of the proposed approach.
 H.3.3 [ Information Systems ]: Information Search and Re-trieval Recommender System; Diversity; MMR; ILD; Movielens
The main task of a recommendation engine is typically to predict the ratings of unknown items for each user and recommend the top N items by considering the highest pre-dicted ratings. As a result, in the recommender systems field new algorithms and approaches have been proposed over the years mainly devoted to maximizing recommenda-tion accuracy. However, it has been recognized that improv-ing only the predictive accuracy of recommendations is not enough to judge the effectiveness of a recommender system [4]. The most accurate recommendations for a user are often too similar to each other and attention has to be paid to-wards the goal of improving diversity in recommended items thus avoiding monotony. A number of works propose strate-gies to enhance the trade-off between accuracy and diversity, which however are not adaptive with respect to individual users X  spontaneous needs [13, 12, 14]. Recently, the idea of exploiting the user profile in the diversification approach got ahead. In [11] the identification of diversity within the user profile is carried out through the extraction of user sub-profiles to reflect the polyfacetic nature of user interests. The main intuition behind our work is that some users may prefer diversification in suggestions while others may not. In addition, users could be inclined to diversifying only with re-spect to some specific item dimensions (e.g., item attributes as director and year in the movie domain) and not inter-ested in diverse suggestions related to other ones (e.g. genre in the movie domain). Following this idea, in this paper we investigate individual diversity 1 taking into account user di-versity needs over item attributes. As in [11], we consider the principle that good recommendations should be not only diverse, but they should also realize the diversity within the user interests and behaviour, to provide recommendations that embody a better fitted and more comprehensive view of user preferences. We propose an adaptive attribute-based diversification approach able to customize the degree of rec-ommendation diversity of the Top-N recommendation list taking into account the inclination to diversity of the user over different content-based item dimensions. Specifically, we employ Entropy as a measure of the degree of diver-sity in the user preferences and use it in conjunction with user profile dimensions for calibrating the degree of diver-sification of the list. We apply our approach to the movie domain, considering what leads a user to choose a movie in a huge collection of items. Reasonably the choice of a user can be led by several factors, such as genre , actor , di-rector and year of release . However not all these factors have the same influence on different users: by way of exam-ple, a user can be interested in a movie director more than in its genre. Analogously, a user can decide to cling to a particular director and accept to watch several genres. As a consequence we need to measure such differences, that is to show the different tendencies of each user in diversifying her choices, dealing separately with the significant movie at-tributes mentioned above. Differently from [11], where the movie genre is the only attribute used to characterize sub-profiles, we analyze user propensity to diversify, in different ways, the genre , the actor , director or year of release . The selection of these attributes follows the results pointed out
In this paper by individual diversity we mean the degree of diversification in the recommendations provided to an indi-vidual user, in contrast to aggregate diversity of recommen-dations across all users [1]. in [6] where the authors show a correlation between person-ality factors (such as openness and conscientiousness) and the degree of diversification in the user choices with respect to such attributes 2 . The main contributions of this paper are: The remainder of the paper is structured as follows: after reporting an overview of the diversity property in Section 2, we propose the details of our recommendation approach in Section 3 and the experimental results in Section 4. Con-clusion and future work close the paper.
The activity of a recommender system can be divided into two phases: firstly there is the prediction of the ratings for unrated items and secondly the items can be re-ranked to maximize user X  X  utility. According to [1], in order to im-prove the diversity of recommendations it is possible to deal only with the second phase. The individual diversity can be increased through several heuristics. In this work we consider greedy heuristics, which look for an intermediate solution and have been demonstrated to be efficient and ef-fective. Particularly, we borrow the greedy strategy pre-sented in [11]. Hereafter we will use overlined bold capital letters to denote lists, e.g., X , and bold capital letters to represent the corresponding set of elements belonging to the list, e.g., X . Let P =  X  1 ,...,n  X  be the recommendation list for user u generated using the predicted ratings and let us suppose we want to provide the user with the re-ranked list S of recommendations, such that S  X  P and whose length is N  X  n . The adopted greedy strategy can be explained through Algorithm 1.

At each step, we select the item which maximizes an ob-jective function f obj (line 3), which in turn can be defined to deal with the trade-off between accuracy and diversity, and we add it to the re-ranked list (line 4). In our work, we
In fact, in [6] the attribute country is considered too, but we prefer not considering it since in the dataset we use for our experiments country is specified for less than 10% of the items. adopt the Maximal Marginal Relevance (MMR) [5], whose objective function is defined as: where r  X  is a function for rating estimation, sim a similarity measure on item pairs and the  X  parameter lets to manage the accuracy-diversity balance.
In the following we detail the adaptive attribute-based di-versification model proposed in this paper. We provide a way to compute similarity that considers the diversification attitude of each user with respect to different item attributes (i.e. year , genre , director and actors in the movie domain). For each attribute a  X  A , we measure the user propen-sity towards diversity through Shannon X  X  entropy, which is a two-dimensional measure, meaning that it reflects both the categories of classification and the distribution of elements within those categories. Shannon X  X  entropy for user u and attribute a with k values can be computed as: where p i is the relative frequency of the i -th value (cate-gory) of a considering all the items (elements) belonging to the user profile (collection of the items rated by that user). Our model is adaptive in the way that it is based on the clas-sification of users in four groups, referred to as quadrants , defined by considering as discriminating parameters the me-dians of the entropy distribution and user profile length dis-tribution across all users. A separate classification is com-puted for each attribute describing the item. For example a user u is in the first quadrant for the genre attribute, if her entropy H genre ( u ) is less than the median of the entropy computed across all users and she has a short user profile (her number of ratings is less than the median of users X  rat-ings). The same user may belong to different quadrants in relation to different attributes. All the quadrants are de-fined as in Table 1.
 The main modelling hypothesis behind this classification is the following. Users who have explored items with different characteristics in the past are willing to accept diverse rec-ommendations. Given an attribute a , we interpret a high value of entropy as an attitude of the user to choose items with different values for a . Conversely, a low value of en-tropy is read as her willing to consider items similar for that attribute.
 Of course, more groups can be defined thus identifying more than four quadrants. Nevertheless, we will show in our ex-perimental section that already with such a coarse grained classification we obtain interesting results in terms of preci-sion and intra list diversity (ILD) values.

The quadrants the user belongs to, potentially different for each item attribute, are used to define the similarity measure in Equation (1). Let us consider a user u and in-dicate with A the set of item attributes (for example in the movie domain A = { year,genre,direction,starring } ). We consider a function q u : A  X  { 1 , 2 , 3 , 4 } , which assigns, for each attribute, the quadrant to which user u belongs and then we define a quadrant weight  X  i  X  [0 , 1], with i  X  { 1 , 2 , 3 , 4 } . Taking into accounts such weights and set-ting m = max {  X  i | i = 1 , 2 , 3 , 4 } , the overall similarity be-tween item i and item j in Equation (1), for the generic user u , becomes tailored to the quadrants she belongs to and is defined as: with sim a ( i,j ) being a similarity measure between i and j with respect to attribute a . The weights associated to user belonging quadrants influence the similarity score and hence the resulting objective function of MMR, with the conse-quence of varying the ILD of the recommendation list. Specifically, the weights account for the user propensity in diversifying every single attribute, based on our modelling hypothesis. In fact, if a user is in the second or forth quad-rant for a fixed attribute, then assigning a sufficiently big value to  X  2 and  X  4 corresponds to keeping a high value for the original similarity score and thus decreasing the over-all value of f obj ( i, S ) for the items i most similar to the ones already available in S . Those items are the ones whose number we want to reduce in S , in order to guarantee a high ILD value. Conversely, assigning low weights to the first and third quadrant (low weights for  X  1 and  X  3 ) results in a significant lowering of the original similarity score and hence in an increasing of the corresponding f obj ( i, S ) values. This corresponds to foster items similar to the ones in the re-ranked list S .
In order to test whether our proposal of using adaptive attribute-based recommendations is competitive, we carried out experiments on a subset of the well known Movielens 1M 3 dataset. The original dataset was enriched with further attribute information such as actors and directors extracted from DBpedia 4 . More details about this DBpedia enriched version of the dataset are available in [8]. We concentrated on users who gave at least fifty ratings: as a consequence, the final dataset contains 4297 users, 3689 items and 942590 rat-ings. We ordered the ratings by using the timestamps avail-able in the dataset and built the training set by using, for each user, the first 60% of the ratings and the remaining 40% to build the test set. We compared our approach with two baselines: (i) recommendations generated considering the predicting ratings without any diversification strategy, de-noted as no-MMR ; (ii) recommendations computed by using Equation 1 without considering quadrants, wherein diversi-fication is applied to all users, denoted as MMR . Hereafter we refer to our adaptive attribute-based diversification ap-proach as adaptiveMMR . The main difference between MMR
Available at http://grouplens.org/datasets/movielens http://dbpedia.org and adaptiveMMR is that the latter considers different val-ues for each  X  i depending on the position, for each attribute, of the user in one of the four quadrants. We remark that the main insight behind adaptiveMMR is that the re-ranking is tailored to each user according to the idea that the diversi-fication with respect to an attribute should be applied only for users who exhibited a propensity in diversifying such an attribute. Conversely, in MMR , diversification is applied indiscriminately to all users regardless of whether they are incline to diversifying their choices or not.
 To compute values for no-MMR we adopted a generic user-based kNN Collaborative Filtering algorithm available in Apache Mahout 5 using Pearson correlation as similarity mea-sure. Then, for each user we selected the top 200 recommen-dations generated by no-MMR to build the initial P list used for performing the re-ranking as shown in Algorithm 1. In both MMR and adaptiveMMR the  X  parameter was set to 0 . 5. As similarity measure for attribute a in (3), we decided to use the Jaccard index. Since the number of distinct at-tribute values was too large for the year , actors and director attributes, we divided movies in decades and performed a K -means clustering for actors and directors on the basis of their DBpedia categories. For both directors and actors we obtained 20 clusters. The number of values is 19 and 8 for genre and year , respectively.
 For evaluating recommendation ranking accuracy and di-versity we used the TestItems evaluation methodology pre-sented in [3]. For measuring accuracy we used precision (P@ k ) and nDCG@ k , while ILD@ k was used for diversity. Furthermore we measured the balance between accuracy and diversity, as in [9], that is we standardized the metrics P@ k and ILD@ k in order to make the scales homogeneous and we computed the average. We indicate this combination met-ric as avg(P,ILD) . P@ k is chosen instead of nDCG@ k since they have a similar trend.
 In the first part of the experiments we tested the validity of the modelling hypothesis behind our approach, that is users who have explored different items in the past are inclined to diversity. Specifically we compared the performances of the two baselines no-MMR and MMR on different groups of users considering those belonging to the same quadrant for at least three attributes as shown in Table 2. As expected, MMR dominates the no-MMR for quadrant 2 and 4 for both precision and ILD, demonstrating that users with high en-tropy benefit from diversification. In the other quadrants (1 and 3) there is a normal decrease of accuracy. Hence users with low entropy in their user profiles are not inclined to an uncontrolled diversification. This preliminary analysis sup-ports the adoption of entropy as discriminant parameter for users X  classification.
 In order to test the effectiveness of adaptiveMMR we eval-uated various combination of  X  weights. Particularly, we conducted a grid search on  X  , finding, as a first result, that our intuition of choosing small values for  X  1 and  X  3 and big-ger ones for  X  2 and  X  4 is validated by accuracy and ILD re-sults. Without such constraints, in fact, the accuracy values of adaptiveMMR get deeply worse. For lack of space we dis-cuss here only three weights configurations  X   X  1 , X  (adopting the notation introduced in Section 2 for lists), A, B and C, respectively given by A =  X  0 , 0 , 0 , 1  X  , B = http://mahout.apache.org been computed via grid search where we fixed  X  1 and  X  and varied  X  2 and  X  4 by considering a discretization step of 0 . 25. These configurations let us deal with emblematic situations and confirm our intuition on the importance of individual entropy values. In particular, configuration A acts on users who are in quadrant 4 for some attributes, configuration B on users belonging to quadrant 2 or quad-rant 4, and configuration C imposes the constraints  X  1 &lt;  X  and  X  3 &lt;  X  4 . The experimental results are shown in Ta-ble 3 and are relative to k = 10. With other values of k the results are analogous, so we omitted them for brevity. Consistently with the accuracy-diversity trade-off, the ba-sic MMR approach improves the diversity by sacrificing the accuracy. AdaptiveMMR , compared to both no-MMR and MMR , gains the best balance between accuracy and diver-sity, represented by avg(P,ILD) , regardless of the aforemen-tioned weights configurations. In terms of accuracy, adap-tiveMMR out-performs no-MMR and MMR , while in terms of diversity, they perform better than no-MMR . Specifically, adaptiveMMR-C obtains the best results in terms of pre-cision, diversity and their combination. Remarkably, the configuration C has an ILD value close to MMR but a sig-nificantly better accuracy values. The higher values of accu-racy and diversity for adaptiveMMR-B and adaptiveMMR-C compared to adaptiveMMR-A suggest also that the diversi-fication tendency, represented by entropy, should be consid-ered even for users with a small profile length.
Computing effective recommendations calls for approaches taking into account not only accurate lists of results. Diver-sity in the final ranking plays an important role in the user satisfaction [4]. In this paper we focus on individual diver-sity. We firstly propose a novel approach to model users X  propensity to accept diverse recommendations. The mod-eling hypothesis is that a user who selected many diverse items in the past is more willing to receive diverse recom-mendation. We then take into account the past diversifi-cation behaviour of each user and give the right weight to her attitude toward diversification with respect to each item attribute. This modelling is then exploited to re-rank the list of recommended items. An experimental evaluation in the movie domain on the Movielens 1M proved the effec-tiveness of the proposed approach. Experiments have been carried out considering the MMR criterion [5] and we are planning to test other criteria to diversify results in the final recommendation list such as IA-select [2] or xQuAD [10]. The usage of a more fine grained analysis on the user profile length, considering quantiles instead of medians will be also tested to evaluate how this affects final results. Moreover we are investigating how to apply our approach to estimate and detect peaks of interest as in [7].

