 The threat of foodborne disease has stimulated interest in public health surveil-lance [ 1 ][ 2 ]. Theoretically, for foodborne disease, there is a link between pathogens, incriminated food sources and each infected person. How to find out the link is cru-cial for foodborne disease surveillance. Analysis of foodborne outbreak data is one approach to find the link and it can estimate the proportion of human cases of specific enteric diseases attributable to a specific food item. [ 3 ] employed mul-tiple correspondence analysis(MCA) to further explore the relationship between micro-organism, region and food vehicle. The analysis of foodborne outbreak data is perceived as food attribution and is an important tool in food safety risk analy-sis [ 4 ][ 5 ]. To advance research on food risk assessment in China, CFSA sponsored a project to construct an online correlation analysis system for foodborne disease surveillance beginning in October 2012. CFSA collects foodborne disease clini-cal data from sentinel hospitals. They want to analyze the foodborne disease out-breaks exist in the collected data and finally find out the link between pathogen, incriminated food source and infected persons. A primary purpose of the project is to detect problems in food and water production and delivery systems that might otherwise have gone unnoticed. Rapid detection of outbreaks is a critical first step to abate these active hazards and preventing their further recurrences. But how to rapidly find the outbreaks in the data is a problem for them. The purpose of this paper is to provide approaches that can be applied to the online system to rapidly find the local and sporadic foodborne disease outbreaks out of the collected data. There are some researches focused on disease outbreak detection. Clearly, when an epidemic sweeps through a region or a foodborne outbreak emerges, there will be extreme perturbations in the number of hospital visits. So some anomaly detection approaches have been used to detect disease outbreaks based on the change of morbidity number. These methods require a baseline number which can be derived from historical data. [ 6 ] employs Fishers Exact Test to examine whether a rule occurs today is abnormal or not based on the historical occurrences. [ 7 ] develops a simple randomization-based framework to recognize significant increases in event counts. Besides, intense spatial aggregation was often observed in disease outbreaks. [ 8 ] presents a fast multi-resolution method to detect significant spatial disease clusters. Given a grid of squares, where each square has a count and an underlying population, the goal of the paper is to find the square region with the highest density, and to calculate its significance by randomization. [ 9 ] is the improvement of [ 8 ], which uses a novel overlap-kd tree data structure to reduce the time complexity to find the spatial disease clusters. [ 10 ] introduces a novel fast spatial scan algorithm, generalizing the 2D scan algorithm of [ 9 ] to arbitrary dimension. The work above on cluster detection is purely spatial in nature. But for most disease cluster problems, time is an essential component. Fortunately, there exist methods for the detection of emerging space-time disease clusters. [ 11 ] proposes a new class of spatio-temporal cluster detection methods designed for the rapid detection of emerging space-time clusters. It focuses on detecting space-time clusters of disease cases resulting from an emerging disease outbreak.
 are unsatisfactory for the problem we want to solve. In our scenario, the data collection started in October, 2012. So the data available is very limited and there are not enough historical data to predict a baseline. In fact, for foodborne disease outbreaks detection, the method employed depends on what data is available. Buckeridge et. give a practical classification for outbreak detection algorithms by considering the types of information encountered in surveillance analysis [ 12 ]. In our situation, we have a database of clinical cases from the 615 sentinel hospitals in 34 provinces, municipalities or autonomous regions across the country. Each record in this database contains information about the individual who has seen a doctor.
 location, we call that a local foodborne disease outbreak (LFDO), while if the locations are not limited in a small area, we call that a sporadic foodborne disease outbreak (SFDO). In this paper, we employ a density-based algorithm for discovering clusters in large spatial databases with noise (DBSCAN) [ 13 ]to detect LFDO and solve the parameter self-adaptive problem in DBSCAN. We propose a new approach to detect SFDO.
 dataset used in this paper in Section 2, we detail the detection approaches in Section 3. Then in the following section, we present our experiments. In Section 5, we give an analysis and a discussion of our experiment results. Finally, in Section 6 we conclude our work and provide an outlook of the future work. Diarrhea is the commonest symptom of foodborne illness. Foodborne diarrhea provides one of the strongest signals for food safety. CFSA started to collect information from diarrheal patients who visit the sentinel hospitals in October 2012. The rules of data collection are: a) the information collected are all the diarrheal cases, but not all the diarrheal cases of sentinel hospitals are collected; b) only the cases with diarrhea 3 or more than 3 times per day and character of stool is abnormal are recorded; c) each sentinel hospital is required to collect at least 10 cases per week. The above data collection strategy is waiting to be improved. Currently, the detection has certain limitations in the way data is recorded. Clearly, under this record strategy, the number of the cases doesn X  X  reflect a true disease occurrence. But the change of the number of cases is a significant signal for an outbreak. Thus, for this dataset, we can X  X  make use of the methods that based on the number of cases to detect outbreaks.
 contains fields such as age, gender, career, symptoms exhibited, home location, diseased time and sampling or not (collected anal swab and stool). Parts of these records have incriminated food information. This information includes food name, food band, manufactures, place of purchase, place of eating, time of eating and sampling or not. In this paper, we mainly use home location, diseased time and symptoms exhibited to detect probable local homologous foodborne disease outbreaks. The incriminated food information is mainly used to preliminarily verify whether the outbreak clusters detected are homologous or not. For spo-radic outbreaks, we use symptoms exhibited field combined with the food name to detect sporadic outbreaks. Note that the preliminary verification results made by our method are not completely reliable. It just provides a possible clue for researchers who will verify the results by professional analysis of the bacteria, such as Salmonella, Shigella and Sapovirus, examined in the patient samples (such as anal swab and stool), through a molecular typing system. An outbreak of foodborne disease was defined as when a group of people consume the same contaminated food and two or more of them come down with the same illness. According to the definition, we give a hypothesis that patients in an outbreak caused by the same contaminated source will exhibit similar or same symptoms. In reality, patients in LFDO are not distributed randomly, and the temporal and spatial clusters are obvious. So we use diseased time, home location and symptoms exhibited as features for LFDO clustering. For sporadic outbreaks, we hope to cluster the cases which have common symptoms and similar food information. So we use symptoms combined with the corresponding food information as features for sporadic outbreaks clustering. 3.1 LFDO Detection Data Preprocessed. We use cases collected between 1 January 2013 and 16 January 2014 for local outbreak detection (We named it Dataset 1). The raw disease time is a time format and we convert it to a long type. The raw home location is a textual address, and we use the Google Geocoding API to capture the longitude and latitude of each address. Then we use gausskruger projection [ 14 ] to convert spherical coordinates to plane coordinates. Longitude and latitude correspond to the x and y axes, respectively. We separate the raw symptom text into symptom terms. In addition, we divided all the frequency of diarrhea, such as 5 times per day, into 4 grades: Low, Medium, High, Ultrahigh (Specifically, 0-3,4-6,7-9,10 or more than 10 corresponding to Low, Medium, High, Ultrahigh respectively). We also divided the temperature into the same 4 grades (Specifi-cally, 37  X  C-37.9  X  C, 38  X  C-38.9  X  C, 39  X  C-39.9  X  C, 40 Low, Medium, High, Ultrahigh respectively). Besides, since all the cases con-tain diarrhea, we eliminate it as a stop word for each case. Then, we generate a 0-1 vector for each symptom description. Specifically, we use symptom terms included in all cases of a dataset as features, and the value of each feature is 0 or 1. If the case contains the symptom term, the value of the feature is 1, otherwise 0. Fig.1(a) is a simple example of the process of generating vectors. Finally, we combine the processed disease time, home location and symptom into a vector as the input for DBSCAN. Fig.1(b) is an example of a combined vector. It is also worth noting that the combined vectors need a normalization process and the weight of these three different features should be adjusted. Method Description. DBSCAN is a density based algorithm which discovers clusters with arbitrary shape and with minimal number of input parameters. The input parameters required for this algorithm are the radius of the cluster (Eps) and minimum points required inside the cluster (Minpts). Based on combination of the feature of DBSCAN and LFDO, DBSCAN has the following advantages for LFDO: a) local disease clusters are arbitrary, b) the parameter Minpts enable users to flexibly detect clusters of different sizes as required, for example, users can set Minpts to 2 according to the definition of foodborne disease outbreak, c) the local outbreaks maybe have different density because of the different population density of regions, the parameter Eps enables users to detect clusters of different density.
 practical issues of applying existing algorithms for foodborne outbreak detection rather than on the development of new algorithms. There is one major problem for DBSCAN applied in foodborne disease clustering. How to automatically find a proper Eps for a specific dataset. Martin et. proposed a simple and effective heuristic to determine a desired Eps [ 13 ]. The heuristic defined a function k-dist from a dataset D to real numbers, mapping each point to the distance from its k-th nearest neighbor. We can get some hints about the density attribution of D when sorting the points of D in ascending order of their k-dist values. The threshold point is the first point in the first  X  X alley X  of the sorted k-dist graph (see Fig.2) and the corresponding k-dist value is the desired Eps. Also, the paper proposed an interactive approach for determining the threshold point. The inter-active approach based on a realistic assumption that a user could easily see the valley in a graphical representation. We hope to reduce the user participation and provide an easy-to-use approach to be integrated into the online correlation analysis system for foodborne disease surveillance. This paper proposes an adap-tive approach to determine the threshold point for a specific dataset without user participation.
 In Fig.2, the ideal threshold point is the one that points before it are normal while after it are noises.Take 3-dist graph as an example, we can find the thresh-old point T as illustrated in Fig.3. We take the first point P1 and the last point P2 of the 3-dist graph to determine a line L. We take the point that has the maximum distance to L as the threshold point. Connect all the points to a curve and the threshold point T divides the curve into two parts. The slopes of left curves are smaller than the slope of L while that of the right curves are bigger. Intuitively, the 3-dist values in Part I increases slowly while the 3-dist values in Part II increase rapidly. We regard the points in part II as noises, because the 3-dist values of normal points are small and almost the same, while the 3-dist values of noise points are big and vary a lot. This method is very intuitive, simple and effective. 3.2 SFDO Detection For sporadic outbreak, the temporal and spatial clusters are not obvious. Symp-toms exhibited and food information are the only and useful signals for sporadic outbreak detection. We describe a new approach for sporadic outbreak clustering based on pattern similarity which produces more easily interpretable and usable clusters. This approach is motivated by the following observation: an outbreak happen when two or more people get ill because of a same contaminated food source. So cases in a cluster may all contain a same symptom frequent pattern and consume a same food. Since clustering algorithms have no knowledge of these patterns, we propose and evaluate a new clustering algorithm for symp-tom clustering K-Means Clustering with Pattern Similarity (K-CPS). We use cases collected between 1 January 2013 and 9 June 2014 for sporadic outbreak detection (We named it Dataset 2). We separate the raw symptom text to symp-tom terms. In addition, we divided all the frequency of diarrhea and temperature into four grade as in Dataset 1. Besides, the term  X  X iarrhea X  is eliminated as a stop word for each case. Most part of the food name of each case contains only one term. There are a few cases contains two or more terms. In these cases, we take them as one term.
 Basic Concept of Frequent Patterns. We quickly review some standard definitions of frequent patterns mining, which is a necessary and important step for mining association rules [ 15 ]. Let I = i 1 ,i 1 , ..., i be a set of transactions, where each transaction t is a set of items, t support of an item-set X , X  X  I is the fraction of transactions contain X .Ifthe support is above a user-specified minimum, then we say that X is a frequent pattern.
 K-CPS: K-Means Clustering with Pattern Similarity. In this subsection, we describe the details of K-CPS algorithm. First, Algorithm 1 shows the pseudo-code for K-CPS.
 frequent patterns. In the second phase, the K-CPS algorithm computes the simi-larity between frequent patterns and objects in Dataset2. We define the similarity Algorithm 1.. K  X  CP SAlgorithm using Jaccard similarity [ 16 ]. It is defined as the quotient between the inter-section and the union of the pairwise compared variables among two objects. Equation (1) illustrates the Jaccard similarity between object X and object Y. After the computation, we get an n -dimension feature vector for each object. And n is the number of the frequent patterns. Then the processed data is clus-tered using simple K-Means. K-CPS assigns all the objects that have similarity symptom-food pattern to a same cluster. In this section, we present an experimental evaluation of the parameter adaptive DBSCAN and K-CPS algorithms. We use Dataset1 and Dataset2 for local and sporadic outbreak detection respectively. Some characteristics of these two data sets are shown in Table 1. We use cases both with and without food information of Dataset1 for clustering and choose the cases with food information to evaluate the effectiveness of the local outbreak detection. We choose cases with food information of Dataset2 for sporadic outbreak detection. We don X  X  have any training set or human-annotated data. So we can X  X  use the common evaluation methods of clustering, such as purity, rand index (RI) and f measure [ 17 ]to evaluate our algorithms. For our experiments, we will associate the cluster results with food category. The local outbreaks will be statistically described by disease time, home location, symptoms and food category. The sporadic outbreaks will be statistically described by symptoms and food category. If the cases with a same cluster label all relate to a same food category, then the cluster is a probable foodborne disease outbreak. And these probable outbreaks we find are evidences to illustrate the usefulness of our algorithms.
 4.1 The Clustering Effect of Adaptive DBSCAN In this experiment, we use the approach in section 3.1 to find an appropriate Eps for every dataset. There are several implementation details. Firstly, time, location and symptoms are three different types of data. We use normalization to unify these data from different sources into a same reference frame. Specifi-cally, we normalize the data in every dimension to an interval [0, 1]. Secondly, since symptoms are 0-1 vectors, the difference caused by a different symptom term between two cases is much bigger than that of time and location. As a result, the time and location have no effect on clustering result. So we reduce the weight of symptoms. In practice, we set the weight of each dimension of symptoms to 1  X  10  X  7 , a heuristic weight derived from experiments and adjust-ment. Thirdly, these three different features are not equally important in local foodborne disease outbreak. And we use a rank-order weighting method [ 18 ]to derive a weight for each feature. By doing this, our responsibility is reduced to ranking the features based on their importances. It is easier and more reliable than specifying exact values. Specifically, we hold that the order of importance is time &gt; location &gt; symptoms in local outbreaks. Based on the importance order, we employ the rank-order centroid (ROC) method [ 18 ][ 19 ][ 20 ]to compute weights for these three features. Equation (2), where w k is the weight of the k -th dimension, generalizes weights for n features. , 5 18 , 2 18 respectively. The location has two dimensions, the weight of each dimension is 1 2  X  5 18 , and the same for symptoms. If the symptoms contain m dimensions, the weight of each dimension is 1 m  X  2 18 . Last but not the least, the DBSCAN uses a global Eps for a dataset, but local outbreaks in different provinces may have different density because of the different population density and cases density of provinces. A global Eps can X  X  satisfy all provinces. To solve this problem, we split Dataset 1 by provinces. And run each subset of Dataset 1 separately. We take the data of Anhui, Gansu, Guangxi, Henan, Hubei, Jiangsu, Jiangxi, Sichuan, Yunnan and Zhejiang for experiments. These 10 provinces have the most cases. Table 2 shows some statistical information of the experimental results. The probable outbreak is hand-marked by an expert who has experience in foodborne disease surveillance. The main basis of the hand-marking are the following four: a) whether the disease time and location are close to each other; b) whether the symptoms exhibited is similar or not; c) whether they are related to a same incriminated food or not; d) whether they are infected by a same bacteria (only very a few cases has the bacteria information). The experimental results show our method is promising. With the adaptive Eps, DBSCAN can effectively find all of the probable local outbreaks in the data. Rapid detection of outbreaks is the critical first step for foodborn disease surveillance. 4.2 The Clustering Effect of K-CPS We compare clustering results of K-CPS and WEKA simple K-means on Data-set2 to show the effect of K-CPS on symptoms-food clustering. We use 33435 cases which the food information are not null. For further preprocessing, we delete the cases with unclear food information, such as the terms  X  X nknown X . Finally, there left 21898 cases for experiments. And each case contains a symp-tom description and a kind of food. Note that there are some implementation details. First, as we know, the determination of parameter k is a hard algo-rithmic problem [ 21 ][ 22 ]. In K-CPS, we set parameter k to the number of the maximum frequent patterns based on the assumption that each frequent pat-tern represents a specific class. Second, in simple K-means, we only use the terms (symptoms and food) which the number of occurrences are greater than  X ,  X  =  X   X  21898 as features. And we generate a 0-1 vector for each case by using the same way that of illustrated in Fig. 1. The parameter k is set to the same value as in the K-CPS. Third, we use  X  X ontain X  not  X  X qual to X  when we decide whether a case contains a specified symptom term or food or not. For example, a case C1 which consists of the following terms: abdominal pain, nausea and frozen watermelon. And there is a frequent pattern FP1 which consists of the following terms: abdominal pain and watermelon. We think the C1 contains the FP1. Accordingly, in simple K-means, we think C1 contains the term water-melon. Fig.4 shows the mean entropy of food at different support thresholds of K-CPS and simple K-means. As shown in Fig.4, the K-CPS has the outstanding performance on clustering the same food together while balancing the similarity of symptoms. Since the definition of foodborne outbreak is two or more people get ill after consuming the same contaminated food. We can make an obvious point that the K-CPS is more reasonable than simple K-means on the appli-cation of sporadic foodborne outbreak detection. It can find out the probable sporadic outbreaks in the data.
 Based on the analyses mentioned above and the definition of foodborne diseases outbreak, we give a deep insight on the characteristics of LFDO and SFDO, which helps to find proper algorithms to detect outbreaks exist in data. most useful signals for an outbreak. The cases of a LFDO show obvious spatio-temporal aggregation. Compared to time-space features, the symptoms exhibited is not so significant in clustering, so a weighting strategy is needed to reduce its weight. information of an outbreak. As a result, we have to make the most use of symp-toms exhibited. However, because the diversity among individuals, even if two people infected of same bacteria may have different symptoms exhibited. So we take food information into account simultaneously. Then the found outbreaks will have higher reliability. Through combining the experiment result to the infected bacteria(in present, very few cases have the bacteria information), we found that patients with very similar symptoms and at the same time consume a same type of food are very likely to be homological infection.
 effective and rapidly screening of the raw collected data for experts worked on disease surveillance and food safety. Based on our experimental results, there are still a lot of work need to be done. And our work is the first critical step. The detection of foodborne disease outbreak is important for food safety and is a complicated task at the same time. The contribution of this paper is to find approaches to rapidly find the probable local and sporadic foodborne dis-ease outbreaks respectively. Besides, since the final purpose is to develop an online correlation analysis system for foodborne disease surveillance, we paid great attention to the practical issues. First, in DASCAN, we give a parameter adaptive method to automatically set the Eps. In K-CPS, we set the cluster number as the number of the maximum frequent patterns. Though the selection of cluster number to some extent is subjective, it is better than to let users without computer science background to set a value by themselves. We hope to reduce the number of parameters needed to be adjusted to as much as possible. As the bacteria infected information is very limited, it is not feasible for us to do exact quantitative estimate. In the future, we will continuously improve and optimize our methods with the accumulation of collected data.

