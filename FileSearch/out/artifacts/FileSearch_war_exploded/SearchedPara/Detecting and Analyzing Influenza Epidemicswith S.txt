 Influenza is a severe disease and seasonally spreads around the world in epidemics, causing over 3 million yearly cases of se vere illness and a bout 250,000 to 500,000 yearly death 1 Global attention has been drawn to this issue from both medical and technical perspectives. However, influenz a is unable to be detected under the traditional surveillance system both effectively and efficiently, thus making the disease monitoring a challenging topic.
 In recent years, social media, for insta nce, Facebook, Twitter, MySpace and Tencen-Weibo, has become a popular platform among people on which they create, share, and propagate information. Soci al media gains ascendancy over traditional media because of its better performance in stability, fast propagation and efficient resource utilization. Therefore, it is gradually replacing traditi onal medias and grows in fast pace as the plat-form of useful information sharing. Recent w ork has demonstrated that prediction of va-rieties of phenomena can be made by using s ocial media data. These phenomena include disease transmission [18], movie box-office revenues [4], and even elections [20]. In this paper we illustrate how social media can be used to detect and analyze influenza epi-demics in China. Specifically, we consider th e task of detecting and analyzing influenza by utilizing the posts from Ten centWeibo, one of the most popular social networks with more than 500 million users in China.

We first extract influenza-like posts from our TencentWeibo data corpus. The most common influenza symptoms are chills, fever, runny nose, sore throat, headache, cough-ing, fatigue and discomfort. Although, thes e symptoms as keywords can be utilized to determine whether a post is an influenza-like post, inaccurate, ambiguous or keywords related posts might still disturb the collection of the real influenza-like posts such as (all posts and words are translated from Chinese to English in this paper):  X  One should have more water when catching flu.  X  Avian flu is under epidemics this spring.  X  Jesus, fevering, have I got cold?
These posts all mention the word of  X  X lu X  or flu symptoms. Nevertheless that does not mean that the posters have been affected by influenza. We consider these posts (news, advices or suspicion) as negative influenza posts. Our goal is to detect positive influenza posts and analysis influenza epidemics in China with TencentWeibo data. As discussed above, it is necessary to extract positive influenza posts from the whole dataset to get more accurate results. In this paper, we propose a machine learning based classifier to filter out negative influenza posts with 0.900 precision and 0.913 recall.

Next, after classification, TencentWei bo data is analyzed and processed from the perspective of time and space respectivel y. From the perspective of time we can find out which place is more likely for influenza outbreak and from the perspective of space, we can discover when is more likely for influenza outbreak in one city or a certain province in China.
 This paper is organized as follows: related works are presented in next section. In Section 3, a short introduction to TencentWeibo and the characteristics of our dataset are provided. In Section 4, several data mining techniques which are used in our research are introduced. In Section 5, evaluation of our model is shown. In Section 6, our model is applied in detecting and analyzing influenza epidemics in China. We conclude and give the future work in Section 7. In recent years, scientists have been using s ocial media data or other information to detect influenza epidemics and to provide earlier influenza warnings.

Espino et al. [7] proposed a public health ear ly warning system by utilizing data from telephone triage (TT) which is a public service to give advice to users via telephone in 2003. They obtained TT data from a healthcare call center services and software company. By investigating the relationship between the number of telephone calls and influenza epidemics, then reported a signification correlation.

Magruder [13] utilized the amount of over-the-counter (OTC) drug sales to build a possible early warning indicator of human disease like influenza. Influenza patients re-quirement for anti-influenza drugs makes this approach reasonable. They reported the magnitude of correlations between clinical data and some OTC sales data and then mea-sured the time lead after controlling for day-of-week effects and some holiday effects.
Ginsberg et al. [8] built a system, utilizing Google web search queries, to generate more comprehensive models for use in influenza surveillance. Their approach demon-strated high precision, obtaining an average correlation of 0.97 with the CDC-observed influenza-like illness (ILI) percentage.

Lampos el al. [11] proposed a regression model, by applying Balasso, the boot-strapped version of Lasso, for tracking the prevalence of ILI in part of UK using the contents of Twitter. Compared to the actual HPA X  X  ILI rates, their model achieved high accuracy.

Aramaki el al. [3] proposed a system to detect influenza epidemics. First, the system extracts influenza related tweets via Twitte r API. Next, a support vector machine (SVM) based classifier was used to extract tweets that mention actual influenza patients. Their approach was feasible with 0.89 correlation to the gold standard.

However, these previous approaches ignored some major characteristics of posts that may impede the classification. First, all posts and reposts have 140 word limitation. That could cause limited features we can use in SVM. Second, the reposts could be no comments or the comments without features. We propose words association rules and sentiment analysis to overcome those problems and improve the classification precision and recall. 3.1 TencentWeibo Dataset Launched in April, 2010 by Tencent Holding Limited, TencentWeibo is a Chinese micro-blogging (weibo) website, which is extremely popular around China, consist-ing of more than half a billion of users (0.54 billion users by Dec, 2012 2 ). Like Twitter, each user of TencentWeibo has a set of followers, and from this point TencentWeibo can be considered as a social network. Users can upload and share with its followers photos, videos and text within a 140 word limit, known as posts like tweets in Twitter, that typically consist of personal information about the users. The posts composed by one user are displayed on the user X  X  profil e page, so that its followers can either just read, comment or repost the same content and post to their own pages. For one user, it is also possible to send a direct message to another user. A repost, called retweet in Twitter, is a post made by one user that is forwarded by another user. Reposts are useful and fast for information spreading, like photos, videos, text and links through Tencen-tWeibo community. Due to its huge amount of users and prevalence, TencentWeibo is increasingly used by a number of companies and organizations to advertise products and disseminate information. Mining TencentWeibo data to make the future prediction on some social phenomena has become an innovative approach in China. 3.2 Dataset Characteristics The data we used in our experiments was obtained by downloading the posts from Ten-centWeibo.com with TencentWeibo Search AP I. We used  X  X lu X  and its common influenza symptoms, such as fever, runny nose, as keywords to ensure that the posts we obtained were influenza related. We obtained 2.59 million influenza related posts over a period of six months from Nov, 2012 to May, 2013. Most of these posts contain location infor-mation which indicates the poster X  X  living city . By accurately classifying influenza posts from this data set, we can analyze spatial and temporal patterns of influenza epidemics. 3.3 Label Rules Three annotators are responsible for assigning positive or negative label to every post in both training dataset and test dataset. O ne post is labeled as a positive only when it meet one of the following requirements.  X  Post indicates the poster has influenza. Since each post has one attribute showing  X  The post mentions other person (relative or friend) has influenza and also mentions  X  For reposts, if one repost has no comment, we consider the reposter is consented
Each of these three annotators individually labeled a post x as negative (-1) or posi-tive (+1) influenza-like post described as y 1 , y 2 ,and y 3 . Each post was given the final label by the following function L = 3 i =1 y i ,y i  X  X  +1 ,  X  1 } , where the positive value of L indicates a positive influenza post, while the negative value of L indicates a nega-tive influenza post. We build a support vector machine (SVM) [5, 12, 14, 16] based classifier to classify influenza posts with the help of association rule mining and sentiment analysis. SVMs are well-known supervised learning models used in machine learning, particularly for text classification and regression analysis . In terms of linear SVM, the training data set D with points is defined as below.
 Where which class Where the value of f ( x ) indicates the point X  X  class,  X  i is Lagrange multiplier and b is the intercept.

In the rest of this section, several techniques that we utilized in our model will be illustrated. 4.1 Association Rule Mining Most TencentWeibo posts are short texts with significant characteristics of short length and few features. If potential strongly associated features can be added to the original texts, making longer length and more diversified features, classification performance will be improved. In data mining, association rule learning [1, 2, 9, 21] is a popular and well researched method for discovering interesting relations between variables in large databases. For these reasons, association rule learning is applied to find strong rules in our data.

According to the original definition by Agrawal et al. [1] the problem of association rule mining in our research is defined as: Let I = { i 1 ,i 2 , ..., i n } be a set of n texts features called items. Let D = { t 1 ,t 2 , ..., t n } be a set of posts called the database. In a given database D, an association rule is similar to a form of A  X  BwhereA,B  X  Iand A B=  X  , the sets of items A and B are respectivel y called antecedent and consequent of the rule. An easy attempt of differentiation of strong rules is calculating its support and confidence, and thus, mining frequent patterns is the key to obtain strong association rules.

Methods like Apriori [2] can be used for mining association rules and frequency pat-terns. Apriori is not an efficient algorithm as it needs to find all the candidate itemsets and to repeatedly scan the data base during t he process. However, in our research, since frequent patterns with 2 features, such as { cold, runny nose } , are needed and the can-didate sets with more than 2 features ( k&gt; 2 ) are avoided, Apriori algorithm becomes efficient and is applied in our research.

Frequent patterns with a given minimum thresholds on support and confidence are regarded as strong association rules which then will be utilized to extend short posts to improve classification perform ance. For example, if  X  X old X   X   X  X unny nose X  is a strong association rule in our data base, then word token  X  X unny nose X  will be added into the texts of the posts which contain word token  X  X old X  as a feature. 4.2 Sentiment Analysis Sentiment analysis [6, 15, 17, 19] refers to the application of natural language process-ing (NLP), computational linguistics, and identification plus extraction of subjective information over text analysis 3 Generally speaking, sentiment analysis is designed for acquiring the attitude of the co rresponding author or lecturer upon his or her contextual works on a comprehensive level. The basics of sentiment analysis is to categorize the absolute standing or meaning of the given material words based on the opinion deliv-ered into three classification positive, negative, or neutral.

In our research, an important component of sentiment analysis which focuses on the automatic identification for whether a repost contains positive or negative opinion about influenza is to id entify the emotion expressed in the posts if the according poster has infected with influenza.

In our dataset, each post that is downloaded by keywords is one of the following three kinds:  X  Posts with features after feature selection.  X  Commented reposts with an original post, but no features in comment.  X  Uncommented reposts with an origin post.

For the first kind of posts, the SVM classifier directly classifies them. As to the rest two kinds, we separate the reposts r into two parts, comment part c and original post part o . Take  X  X ortunately, I didn X  X . || @ someone: I got flu X  as an example.  X  X ortunately, I didn X  X .  X  X s part c and  X  X  got flu. X  is part o . After feature selection, however, this post has no features. The SVM randomly classifies it as positive influenza post or negative one; nevertheless, the poster definitely has not got influenza. In this situation, sentiment analysis is needed to improve the SVM X  X  precision. Our approach can be described as: where f ( o ) is defined in formula 2, s ( c ) indicates whether comment part c has nega-tive attitude to the origin part o (we regard reposters have positive attitude towards the original post if the according reposts have no comment on the original posts), and the value of L ( r ) indicates the repost X  X  class. We collected about 2.59 million posts poste d within the time period from Nov 2012 to May 2013, using TencentWeibo Search API. We separated those posts into three groups.
Training data consists of 4092 posts which were randomly selected by computer and annotated by 3 annotators. Then these posts were used for the purpose of SVM classifier training.

Te s t d a t a consists of 2500 posts randomly selected by computer and annotated by 3 annotators like training data. These data were used to evaluate the SVM based classifier.
Experiment data are the rest of the posts collected. They were used in experi-ments of influenza epidemics detection and analysis. Those posts were separated into six groups by month within the time range that we studied, from Nov 2012 to April 2013.
We first applied feature selection for SV M training because of three reasons: (1) To improve the efficiency of training and testin g process. (2) To delete noisy features. (3) To improve classification precision.

We calculated Chi-squared value for every word token that appeared in the training data set. As SVM features, top 1,000 word tokens ranked by Chi-squared value were uti-lized. Before word segmentation and vectorization, punctuation and special characters were striped, mentions of user names (the X  X  X  tag), reposts (the  X  ||  X  tag) and expres-sions (the  X / X  tag) were removed, and all other language characters were ignored. Table 1 lists examples of significant features we used as SVM features.

Besides precision and recall, F 1 = monic mean that trades off precision versus recall was utilized to evaluate our classifier.
In our experiment, the kernel of SVMs is linear. The evaluation of this SVM classifier on test set showed 0.79 precision, 0.80 recall and 0.795 F 1 . There are two reasons to cause relative low precision and recall:  X  A TencentWeibo post consists text with a 140 word limit and most of the posts  X  In terms of reposts, reposts without comment are also qualified for the condition
We handled the first case by applying rule mining to extend word-segmented posts to obtain more features before vectorization. Based on our training data, we learned some word association rules as shown in Table 2 with the threshold of 0.01 minimum support and 0.6 minimum confidence. However, the performance of the SVM classifier with 0.797 precision, 0.804 recall and 0.800 F 1 did not improve too much.
 We then utilized sentiment analysis to improve the evaluation of classification. First, we collected thousands of emotional-related words and put them into 2 groups (emotional negative and emotional positive). Table 3 lists examples of both emotional negative and emotional positive words. We then applied formula 3 and 4 to classify reposts with an original post.

As shown in Figure 1, when considering word associations and sentiment of posters, the classification performance substantially improves, achieving up to 0.900 precision, 0.913 recall and 0.905 F 1 .
 A simple model was built on the experiment dataset to monthly estimate the aver-age extent of influenza epidemics of every province in Chinese mainland. For every month from Nov 2012 to Apr 2013, our model automatically calculates the index of each provinces influenza epid emics by summing each provinces positive influenza posts which were extracted from the whole posts co rpus with the help of the SVM based clas-sifier, dividing the sum by net citizen scale of the certain province which was obtained from Statistical Report on Internet Development in China published by China Internet Network Information Center (CNNIC) in 2012, and multiplying the result with 10,000 to make the final number more readable. For example, in Nov 2012, in our database Beijing has 6,916 positive influenza posts an d 13,790,000 net citizens. Therefore, the influenza index of Beijing in Nov 2012 is 6 , 916  X  10 , 000 / 13 , 790 , 000 = 5 . 015 . 6.1 Spatial Analysis of Influenza Epidemics After computing the monthly index of infl uenza epidemics in each province, we as-sign that value to the capital city of the corresponding province. The we use Krig-ing [10]which is a geostatistical estimator that infers the value of a random field at an unobserved location to spatially interpolate influenza epidemics index of the whole map. Figure 2 represents the distribution of influenza epidemics in China from Nov 2012 to April 2013. From Figure 2, we obtain some conclusions as below:  X  With the drop of temperature from Nov 2012 to Dec 2012, high influenza-index  X  From Nov 2012 to Apr 2013, southeast coastal provinces including Guangdong,  X  Areas such as Beijing-Tianjin, Chengdu-Chongqing, Yangtze River Delta, and Pearl 6.2 Temporal Analysis of Influenza Epidemics Figure 3 represents the influenza indices of each province in China mainland from Nov, 2012 to Apr, 2013. Some conclusions can be obtained by observing Figure 3:  X  From Nov 2012 to Apr 2013, Guangxi, Guangdong, and Hainan have relatively  X  The influenza indices of Xizang and Qinghai from Nov 2012 to Apr 2013 slightly In this paper we propose a TencentWeibo based influenza epidemics detection and anal-ysis model with data mining techniques. Basically, we build a support vector machine (SVM) based classifier to classify influenza posts. In addition, we use association rule mining to enrich the features of posts to overcome the limitation of 140 words for posts. We also use sentimental analysis to classify the reposts without feature and uncom-mented reposts. Our experimental results show that by combining those techniques, we can improve the precision and recall by at least t en percent. Finally, we analyze the spa-tial and temporal patterns for positive influenza posts and tell when and where influenza epidemic is more likely to occur.

In future work, we will use more TencentWeibo data to verify our model X  X  efficiency and effectiveness. Also we will focus on the personal prediction of a certain poster whether he or she would catch influenza in the next a few days based on its personal TencentWeibo data.

