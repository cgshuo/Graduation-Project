 In rece n t y ears , m o st o f curre n tmu l t i med i a in f o rmat ion retr i e v a l s y stems ha v e c o me t o requ i re the effic i e n tpr o cess o f k -n earest n e i ghb o rquer i es wi th vi sua l a n d sema n t i cpr o pert i es as dep i cted in Fi g .1.T h i squer y, represe n ted in a n e x te n ded S Q Ll a n guage ,i ss i m il ar t oF ag in X  smu l t i med i aquer y( Artist =  X  X eatles X   X  Color =  X  X ed X  )[1], that mea n s  X  retr i e v e k a l bums w h o se art i st i s B eat l es a n dc ov er c olo rs best match red  X . I t involv es the sema n t i cpred i cate (i. e ., Artist =  X  X eatles X  ) as w e ll as the vi sua l pred i cate (i. e ., distance(Color, red) ) that mea n sthec ov er c olo rs o fa l bums ha vin gt o be s i m il ar t o red .In th i squer y, the sema n t i cpred i cate i s represe n tb y p l a in te x t ,w h il ethe vi sua l pred i cate i s usua lly represe n tb y ah i gh -d i me n s ion a l feature v ect o r ( e . g ., c olo rh i st o gram ). Fo rpr o cess in g i teffic i e n t ly, i t i s n ecessar y t o br ow se thr o ugh a c oll ect ion o fc olo r v ect o rs on the bas i s o fthe i rd i sta n ces fr o mag iv e n quer yo b j ect red 1 u n t il k quer y a n s w ers are o bta in ed [ 2 ]. U pt o date ,Hj a l tas on a n d S amet  X  s in creme n ta l n earest n e i ghb o ra l g o r i thm i sk now as the best ch oi ce [3].
 de x structure li ke the R -tree [ 4 ], has the f ollowin gad v a n tage :w he n the upper o perat o r ( e . g ., the se l ect o perat o rf o r Artist =  X  X eatles X  )n eeds a no ther tup l e wi th the n e x t n e i ghb o r , the i ra l g o r i thm ca n pr ovi de i tf o r the upper o pera -t o r wi th o ut restart in gthea l g o r i thm fr o m scratch [3,5]. How e v er , the i ra l g o r i thm ma y ge n erate a l arge n umber o ftup l es that will tur no ut no tt o fu l fi ll the rema in-in gsema n t i cpred i cates .In[ 2 ], t oov erc o me th i sdra w back , the auth o rs pr o p o sed a n e win de x structure , s o-ca ll ed the R S-tree , that i sab l et oin de x the vi sua l a n d sema n t i cfeaturet o gether b y us in gtheR -tree a n dthe S-tree [6]. How e v er , the R -tree used in the R S-tree d o es no tperf o rm suffic i e n t ly w e ll on h i gh -d i me n s ion a l data spaces e v e n th o ugh i tpr ovi des g oo dresu l t on low-d i me n s ion a l data spaces . that in tegrates the S-tree a n dthe SPY-T EC [5] w h i ch w as pr o p o sed f o r in de xin g a l g o r i thm ( here in after , ca ll ed the INNonSPY-TEC+ ) f o rpr o cess in g k -n earest n e i ghb o rquer i es wi th sema n t i cpred i cates on the SPY-T EC +. T he ke yi dea o fthe SPY-T EC +i s based on the o bser v at ion that the SPY-T EC will be better tha n the R -tree , as the u n der lyin g in de x structure f o rpr o cess in g the k -n earest n e i ghb o rquer ywi th sema n t i cpred i cates because the SPY-T EC pr ovi des a better perf o rma n ce tha n the R -tree in h i gh -d i me n s ion a l data spaces . 2.1 Structure of the SPY-TEC+ T he SPY-T EC +i sah y br i d o fthe SPY-T EC a n dthe S-tree that are used as data structures f o rthe vi sua l attr i bute a n dthesema n t i c attr i bute , respect iv e ly. Fi g . 2sh ow sthec on struct ion o fthe SPY-T EC + fr o mthe DISC tab l e wi th b o th Color a n d Artist attr i butes .Fi g . 2 ( b ) sh ow sas i g n ature tab l ef o r Artist . An d ,Fi g . 2 ( c ) sh ow s the structure w here se v era l d -d i me n s ion a l feature v ect o rs f o r Color are d i str i buted b y the part i t ionin gstrateg yo fthe SPY-T EC .Fi g . 2 ( d ) i s the structure o fthe SPY-T EC + f o r in de xin g Color a n d Artist attr i butes at the same t i me .T he l eft tree o f Fi g . 2 ( d ) sh ow s the structure o fthe B + -tree f o rthe SPY-T EC ,w h il ether i ght tree sh ow s the structure o fthe S-tree f o rthe s i g n ature tab l e .T he S-tree has a h i erarch i ca lin de x structure s i m il ar t o the B + -tree , a n d i ts no de a n de n tr i es are s y mmetr i c wi th th o se o fthe B + -tree in the SPY-T EC . Each no de o fthe S-tree c on ta in sa n arra yo f ( key, pointer ) e n tr i es w here key i sas i g n ature ( represe n t in g a set v a l ue )w h i ch b o u n ds a ll the sema n t i c v a l ues in the subtree p oin ted at b y pointer .
 l e v e lo fthe S-tree ,i. e ., l =1 a n d l&gt; 1. In case w here l =1, as i g n ature o f each e n tr yin the S-tree no de i screatedb y super i mp o s in g ( OR in g )[ 7 ] a ll the s i g n ature o f the sema n t i c v a l ues in the subtree o f i ts c o rresp on d in g B + -tree e n tr y. Fo re x amp l e ,inFi g . 2 ( d ), the S-tree no de STN2 c o rresp on ds t o BTN2 , a n dthe e n tr y S 2 in STN2 c o rresp on ds t o BS 0 that i sthee n tr yo f BTN2 .T he s i g n ature f o r S 2 i s created as f ollow s :Sin ce the subtree o f BS 0 (i. e ., BTN3 ) c on ta in s c1 a n d c2 , the ge n erat o r o fthe S-tree first gets the sema n t i c v a l ues o fthe Artist attr i butes  X  X  eat l es  X ,  X  X  t in g  X  f o r c1 a n d c2 , a n dthe n ge n erates the i rs i g n atures (i. e ., 01101010 f o r  X  X  eat l es  X  a n d 00111001 f o r  X  X  t in g  X ) us in gas i g n ature hash in g fu n ct ion. Fin a lly, the ge n erat o rcreatesthes i g n ature f o r S 2 , that i s 01111011, b y super i mp o s in g these t wo s i g n atures on ab i t -b y-b i tbas i s .A ttheh i gher l e v e l tha n 1, as i g n ature o feache n tr yin the S-tree no de i screatedb y super i mp o s in ga ll the s i g n atures in the ch il d no de p oin ted at b y pointer .Fo re x amp l e , the s i g n ature f o r S 1 in STN1 i screatedb yj ust super i mp o s in ga ll the s i g n atures (i. e ., S 2 , S 3 , a n d S 4 )ini ts ch il d no de (i. e ., STN2 ). 2.2 Incremental Nearest Neighbor Algorithm on the SPY-TEC+ Al g o r i thm 1i sbas i ca lly t o e x te n dthe in creme n ta ln earest n e i ghb o ra l g o r i thm ( here in after , ca ll ed the INNonSPY-TEC )on the SPY-T EC .T heref o re , the ba -s i cpr o cess seque n ce o fthe INNonSPY-TEC+ i s no td iff ere n tfr o mthat o fthe INNonSPY-TEC , e x cept that i t has the steps f o rpru nin g wo rth l ess tup l es pre -vio us ly us in gthe S-tree .
 Algorithm 1. INNonSPY-T EC +( Q v , Q s ) quer y p oin tarefirstca l cu l ated , a n deachspher i ca l p y ram i d wi th i ts d i sta n ce are in serted in t o the pr io r i t y queue .How e v er ,in the INNonSPY-TEC+ ,i t i s no t n ecessar y t o ca l cu l ate the d i sta n ce bet w ee n the quer y p oin ta n da ll o fthe spher i ca l p y ram i ds .B ef o re ca l cu l at in gthed i sta n ces fr o mthequer y p oin tt o each spher i ca l p y ram i d ,i tfirstperf o rms the  X  X n c l us ion test  X  f o reachs i g n ature in the S-tree no des that c o rresp on dt o the B + -tree no des f o r each spher i ca l p y ram i d .An dthe n, i tca l cu l ates the d i sta n ces bet w ee n the quer y p oin ta n d only the spher i ca l p y ram i ds w h o se c o rresp on d in gs i g n atures pass the s i g n ature check in g , a n de n queues them in t o the pr io r i t y queue wi th the i rd i sta n ce .P ass in g o fthes i g n ature check in gmea n s that there ma y be s o me v a l ues equ iv a l e n tt o the sema n t i cquer yv a l ue in the subtree r oo ted at the c o rresp on d in g B + -tree no de . Lin es 3  X  7 o f Al g o r i thm 1 sh ow these steps .Si m il ar ly, in lin es 13  X  1 7 , the INNonSPY-TEC+ perf o rms the s i g n ature check in gf o reachs i g n ature in the S-tree no des that c o rresp on dt o the B + -tree no des f o reachb o u n d in gs li ce .T he o ther steps o f Al g o r i thm 1 are s i m il ar t o th o se o f INNonSPY-TEC . Fo rthee x per i me n ts ,w edefi n ed a s i mp l e DISC tab l e that o ur test quer i es are perf o rmed ov er a n dha v eas i mp l eschema (i. e ., DISC(Artist, Color) ).
 d i str i but ion [ 7 ]wi th the Z i pfia nv a l ue z =0 . 5. A s vi sua l attr i butes ,w e used 16-d i me n s ion a lFo ur i er p oin ts used in aC AD-m o de l, w h i ch c o rresp on dt o feature v ect o rs o f Color .Fi g 3 sh ow stheperf o rma n ce o fthet wo a l g o r i thms f o rd iff ere n t quer y resu l ts i zes (i. e ., k =5  X  30) wi th the f ollowin ge x per i me n ta l parameters : the d i me n s ion o f Color d = 16, Z i pfia nv ar i ab l e o f Artist z =0 . 5, the n umber o ftup l es N = 2 00 , 000, a n dthes i g n ature s i ze F =6 4 ( b i ts ). Fi g .3( a ) sh ow sthe n umber o ftup l es accessed .T he n umber o f the accessed tup l es o fb o th a l g o r i thms in creases lin ear ly as k bec o mes l arger .How e v er , the INNonSPY-TEC+ s i g ni f -i ca n t ly o utperf o rms the INNonSPY-TEC .T he reas on i s that the INNonSPY-TEC+ has the e ff ect o fpru nin gthe SPY-T EC no des o r o b j ects us in gthe S-tree . Fi g .3( b ) a n d ( c ) sh ow the n umber o f pages accessed a n dthet o ta l search t i me u n t il k a n s w ers are o bta in ed .A s w ee x pected , these sh ow s i m il ar beha vio rs t o the n umber o ftup l es accessed . In th i spaper ,w epr o p o sed the SPY-T EC + that pr ovi des a n effic i e n tmeth o d f o r in de xin g vi sua l a n dsema n t i cfeature in f o rmat ion at the same t i me , a n dthe effic i e n t in creme n ta ln earest n e i ghb o ra l g o r i thm on SPY-T EC +.

