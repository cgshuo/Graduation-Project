 MARJAN MOMTAZPOUR and PATRICK BUTLER ,VirginiaTech MOHAMMAD C. BOZCHALUI and RATNESH SHARMA , NEC Laboratories America, Inc.
 Considering the fast decline of fossil fuels, sustainable approaches of energy production, distribution, and consumption are now going to take the place of traditional methods [Ramchurn et al. 2012]. The advent of electric vehicles (EVs) is a promising shift. However, to be prepared for a world laden with EVs, we must revisit smart grid design and operation. One of the key issues in ushering in EVs is the design and placement of charging infrastructure to support their operation. Issues that must be addressed include [Ramchurn et al. 2012]: (1) prediction of EV charging needs based on their owners X  activities; (2) prediction of EV charging demands at different locations in the city and available (3) design of distributed mechanisms that manage the movements of EVs to different (4) optimizing the charging cycles of EVs to satisfy users X  requirements while maxi-
In this article, we propose a new framework to address the problem of charging and storage infrastructure design for EVs by adopting an urban computing approach. Furthermore, due to the additional load imposed to the network by EVs, appropriate storage units must be deployed beside the charging stations. There are several works that consider the problem of load management for EV charging and its impact on the grid [Paul and Aisu 2012] and [Mauri and Valsecchi 2012]. However, there is no previous work that addresses the coordinated impact of placement over an urban infrastructure and its solution thereof.

Here, we assume that each charging station uses storage to offset the impact of charging on the grid. Other alternative solutions can also be used, such as upgrading transmission lines or using a vehicle-to-grid (V2G) strategy. Although we can upgrade the transmission lines, the distribution infrastructure still remains a bottleneck. In fact, upgrading transmission lines is not a complete solution, albeit expensive and time-consuming, discounting the regulatory hurdles. The other solution is based on using V2G. However, there are no EVs today that provide V2G capability to owners, and business models utilizing such capability are still uncertain from a utility perspective. Hence, this will not affect the proposed methodology.

Urban computing [Kindberg et al. 2007] is an emerging area that aims to foster human life in urban environments through the methods of computational science. It is focused on understanding the concepts behind events and phenomena spanning urban areas using available data sources, such as people movements and traffic flows. Orga-nizing relevant data sources to solve compelling urban computing scenarios is itself an important research issue. Here, we use network datasets organized from synthetic population studies, originally designed for epidemiological scenarios, to explore the EV charging station placement problem. The dataset was organized for the SIAM Data Mining 2006 Workshop on Pandemic Preparedness [Bailey-Kellogg et al. 2006] and models activities of an urban population in the city of Portland, Oregon. The supplied dataset [Bisset et al. 2006] tracks a set of synthetic individuals in Portland and, for each of them, provides a small number of demographic attributes (age, income, work status, household structure) and daily activities representing a normative day (includ-ing places visited and times). The city itself is modeled as a set of aggregated activity locations, two per roadway link. A collection of interoperable simulations X  X odeling urban infrastructure, people activities, route plans, traffic, and population dynamics X  mimic the time-dependent interactions of every individual in a regional area. This form of  X  X ndividual modeling X  provides a bottom-up approach mirroring the contact structure of individuals and is naturally suited for formulating and studying the effect of intervention policies and considering  X  X hat-if  X  scenarios.

In our previous work [Momtazpour et al. 2012], we characterized this dataset with a view toward understanding the behavior of EV owners and to determine which locations are most appropriate to install charging stations. We developed a coordinated clustering formulation to identify a set of locations that can be considered as the best candidates for charging stations. However, thorough study of this problem needs an approach to determine economic costs imposed on EV owners, as well as to evaluate the extra load that is imposed on the network by charging stations. In this article, we extend our previous framework to consider charging costs and storage placement problems in addition to the problem of charging station placement. We develop an algorithm to assign EVs to the nearest charging stations by minimizing charging cost and travel distance. After assigning charging stations to EVs, additional load of each charging station is calculated and used to determine appropriate storage deployment for each location. We survey related work in two categories: mining GPS datasets and smart grid analyt-ics. GPS datasets have emerged as a popular source for modeling and mining in urban computing contexts. They have been used to extract information about roads, traffic, buildings, and people behaviors [Yuan et al. 2010; Yuan et al. 2012; Liu et al. 2011]. The range of applications is quite varied as well, from anomaly detection [Liu et al. 2011] to taxi recommender systems [Yuan et al. 2010] that aim to maximize taxi-driver profits and minimize passengers X  waiting times. The notion of location-aware recom-mender systems is a key topic enabled by the increasing availability of GPS data, such as recommending points of interest to tourists [Zheng et al. 2009]. We survey these works in greater detail next.

Yuan et al. [2012] proposed a framework to discover regions of different function-alities based on people movements. They adapt algorithms from the topic modeling literature, by mapping a region as a document and a function as a topic so that human movements become  X  X ords X  in this model. The focus of Yuan et al. [2010, 2011] is dif-ferent: here, GPS data is used to mine the fastest driving routes for taxi drivers. Yuan et al. [2010], mined smart driving direction from GPS trajectory of taxis; as well, Yuan et al. [2011] considered driver behavior using other metrics such as driving strategies and weather conditions.
 Clusters of moving objects in a noisy stadium environment are detected using the DBSCAN algorithm [Ester et al. 1996] in Rosswog and Ghose [2012]. This task supports monitoring a stadium for groups of individuals that exhibit concerted behavior. In Takahashi et al. [2012], the authors estimate distributions of travel time from GPS data for use in routing and route recommendation.

Our work here is different from the preceding works in that we use a synthetic population dataset and routes are based on people X  X  travel habits that are mapped using geographical coordinates and road infrastructures. We are also not interested in mining the routes per se but to use the route information to better support charging infrastructure placement.

Smart grid analytics has emerged as a promising approach to usher in the promise of smart grid benefits. Researchers have begun to explore the problems concomitant with EV penetration in urban areas, especially unacceptable increases in electricity consumption [Ramchurn et al. 2012]. A promising way to approach this problem is to understand the interactions between grid infrastructure and urban populations. Smart grids and EVs have been studied previously from technical and AI point of views; however, there is a limited research on smart grids from an urban computing perspective.

In this space, agent-based systems have been proposed to simulate city behavior in terms of agents with a view toward designing decentralized systems and maximizing grid profits as well as individuals X  profit [Ramchurn et al. 2012]. In Aman et al. [2011], information from smart meters is used for forecasting energy consumption patterns in a university campus microgrid, whose results can be used for future energy planning.
Significant research has been done to improve cost and reliability of energy storage systems [Hoffman et al. 2010]. Energy storage is used to perform an operation when there is not enough electricity. In Makarov et al. [2012], a solution was proposed to balance energy production against its consumption. In addition, Bayram et al. [2011] tried to design a general architecture in smart grid to have a significant gains in net cost/profit considering EVs. Our overall methodology is given in Figure 1. We describe each of the steps in our approach next. At a basic level, we integrate two basic types of data to formulate our data mining scenario. The first data, as described earlier, is a synthetic population of people and activities representing the city of Portland, and the second dataset is an electricity consumption profile of each location. Notice that the proposed methodology is a generic approach and can be applied to real-world data, and the fact that we use proposed methodology.

The synthetic dataset contains 243,423 locations, of which 1,779 belong to the down-town area and are of further interest for our purposes. Each location is represented by geographical [ x , y ] coordinate adopting the Universal Transverse Mercator (UTM) coordinate system [Bisset et al. 2006]. There are 1,615,860 people in the entire city. Information about them is organized into households; for each household, we have the details of the number of people in the household, as well as the ages, genders, and incomes of each household member. Each person has a unique ID.

The typical movement patterns of people in a 27-hour period (which includes a typical day) are also available. A total of 8,922,359 movements are provided. In addition to starting and ending locations for people X  X  movements, this dataset also provides the purpose of the movement, categorized into nine types: {Home, Work, Shop, Visit, Social/ Recreational, Serve Passenger, School, College, and Other}. A given person moves from one location to another location at a specific time for a specific purpose (from the nine mentioned earlier) and stays in that location for a specified period of time. These movement types can thus be utilized for further detailed studies. We also have the ability to map the locations using Google Maps and calculate distances of travel between locations.

To this dataset, we augment information about electricity consumption of each loca-tion and simulate the effects of EVs on its electricity demand profile. Considering that actual electricity consumption data for each location is not available until all consumers have smart meters installed and are in operation for some time, we approximate the electricity load profile using the existing data (organized by NEC Labs).

It is clear that the electricity load of each location greatly depends on the functional-ity of that location, and hence our first step is to utilize an information bottleneck type approach [Tishby et al. 1999] to characterize locations. Our aim is to cluster locations based on geographical proximity but such that the resulting clusters are highly infor-mative of location function. This is thus our first application of a coordinated clustering formulation, which falls into the scope of clustering with side information. Next, we integrate the electricity load information to characterize usage patterns across clusters with a view toward helping identifying locations to place charging infrastructure. Our next step is to more accurately characterize usage patterns of likely EV owners. A specific set of clusters from the previous pipeline is used and characterized using high-income attributes as the likely owners of EVs. We then bring in additional factors of locations that influence EV charger placement, such as residentiality ratio, load on the location, charging needs, and typical duration of stay in the location. Some of these factors (such as distance traveled) are in turn determined by mapping the home-to-work and work-to-home trajectories of EV owners and their stop locations. In the proposed method, three datasets are used: two datasets describe locations and the third dataset describes people. Since each location has a set of features that do not depend on its coordination, we use one dataset to describe specific features of each location and another dataset that only consists of geographical coordinates. In addition to datasets that describe locations, we use a separate dataset for people with different income.
Choosing a right set of locations to install charging stations depends on many fea-tures. These features can be categorized into two groups. The first group features people who visit those locations. It is better to assume that these people have EVs, and because we assume that people with higher income have EVs, it is preferable to choose locations which people with higher incomes visit frequently. The second group features locations such as electricity load. In fact, we are looking for a set of candidate locations that have similar features and also are visited by same type of people. Among different data mining approaches [Ramakrishnan and Grama 2001], clustering techniques can identify similarities and can categorize locations into different sets.

We use a coordinated clustering formulation to simultaneously cluster three datasets in a relational setting. Coordinated clustering tries to cluster different datasets such that relationships between items in each dataset are preserved. Here, we try to identify best locations to install charging stations where certain groups of people visit those locations. Candidate locations for charging stations are the ones that have specific characteristics such as low electricity load. However, we try to find those locations that have direct relationship with a specific group of people (people with high income). Ob-viously, the type of features in the people dataset is different from those in the locations dataset. Due to this difference, and due to many-to-many relationship between loca-tions and people, we cannot use regular clustering approaches such as k -means. Our coordinated clustering framework builds on our previous work [Hossain et al. 2010], which generalizes relational clustering between two nonhomogeneous datasets. This problem is a bit nontrivial, because one of the relations is a many-to-many relation and another is a one-to-one relation. The final set of coordinated clusters are then used as interpretation and as a guide to charger placement.

After locating the homes of EV owners, we can determine their trajectories and their stop locations. Then, based on this data, we can estimate their travel distances. This helps us estimate charging requirements of EVs during a day. With the help of the dis-tribution of electricity load in the city and charging needs of EVs, we determine proper locations for installing charging stations in a city with respect to specific parameters.
In addition, we come up with the actual scenario for each EV owner who needs charging to see which locations are the best ones for him with respect to charging cost and waiting time of EV owner. After measuring additional load of each charging station, we calculate the size of storage needed to reduce net load. Finally, we consider the economical aspects of storage deployment. As described in Section 3, our methodology comprises the following six major steps to determine candidate locations for charging stations: (1) Discovering location functionalities using an information bottleneck method (2) Electricity load estimation and integration with results of the previous step (3) Studying the behavior of EV owners and calculating specific parameters relevant (4) Candidate selection for charging stations using coordinated clustering techniques (5) Finding appropriate charging stations for each user while maximizing user benefits (6) Calculating the actual load of charging stations and storage placement
Each of these steps is detailed next. We use information bottleneck methods to characterize locations with a view toward defining the specific purpose of the location. The idea of information bottleneck meth-ods is to cluster data points in a space (here, geography) such that the resulting clusters are highly informative of another random variable (here, function). We focus on 1,779 locations in the downtown Portland area whose geographies are defined by ( x , y ) coordi-nates and whose functions are given by a nine-length profile vector P = [ p 1 , p 2 ,..., p 9 ], where p i is the number of travels incident on that location for the i th purpose (recall the different purposes introduced in the previous section).

Figure 2(a) describes the results of a clustering based on Euclidean metrics between locations whose results are aggregated in Figure 2(b) into a revised clustering that also preserves information about activities of people at these locations. It is worth mentioning that in this part of our method, we desire to consider nearby locations and their electricity loads. Hence, the most appropriate approach for distance measurement is using Euclidean distance. The population distribution of these clusters over time is shown in Figure 2(c), which reveals characteristic changes of crowds around peak hours and lunch times. One final analysis that will be useful is to evaluate each of the discovered clusters with respect to what we term as the residentiality ratio . The residentiality ratio for a location is the percentage of people who use that location as a home w.r.t. all people who visit that location (in downtown Portland, many locations have combined home X  X ork profiles, and hence the calculation of residentiality ratio becomes relevant). Figure 2(d) reveals one cluster with relatively high residentiality ratio among three others.
 To uncover patterns in electricity load distributions, we now characterize each of the discovered clusters using typical profiles gathered from public data sources such as the California End User Survey (CEUS) and other sources of usage information. Figure 3 presents a daily electricity consumption profile across large offices, small offices, res-idential buildings, and colleges for 1 year. By clustering this data across the year, we can discern important patterns associated with different types of consumption during the year. For instance, in the college setting, we can discern three types of consumption patterns: holiday breaks (including summer), weekdays, and weekends.

Our next step is to compute the electricity load leveraging the preceding patterns but w.r.t. our network model of the urban environment. Recall that our network model is based on population dynamics, but typical electricity load sources are based on square footage calculations. We map these factors using well-accepted measures X  X hat is, by considering the average square footage occupied by one person in a residential area as 600sft [Blake et al. 2007], small office as 200sft [U.S. General Services Administration 1997], large office as 200sft [U.S. General Services Administration 1997], college as 50sft [Engineering ToolBox], retail area as 50sft [Engineering ToolBox], and other classes as 200sft. Further, the minimum population for an office to be considered as a large office is set to 300sft.

Based on some exploratory data analysis, we selected a weekday in the past (specif-ically, March 18, 2011) and used the electricity load data of this day to map to the network model. Consider that in a specific hour, N people go to location l , in which n i of them come for the purpose of p i while 9 i = 1 n i = N . Then, the electricity load for that location is computed as where A p tricity consumption of building type p . It worth mentioning that E p is from public data sources (CEUS)) organized by NEC Labs. Observe that a single location can serve multiple purposes and that the preceding equation marginalizes across all uses. For ex-ample, if there are 360 people in one location, and 10 of them are in the building for the purpose of home and 350 are for the purpose of office, the total electricity consumption of building would be calculated as (10  X  600  X  E p where 600 and 200 are the average square footage per person for the different cat-egories, as mentioned earlier. The preceding methodology enables us to characterize electricity loads in terms of the four location clusters characterized in the previous step (Figure 4). Currently, only a small percentage of people use EVs, and this figure is correlated with high income. Based on two sources [Munro 2012; Simply Hired, Inc. 2014], only 6% of people in the United States have income more $170,000. In our synthetic dataset, 329,218 people make an income greater than $60,000. To explore a hypothetical sce-nario, we posed the following question:
What if 6.31% of 329,218 people from Portland bought EVs? What charging infrastructure is necessary to support this scenario? Based on KEMA, Inc. [2012], this is a realistic assumption if we consider different penetration scenarios in the United States in forecasted EV adoption in 2012 X 22. Based on our modeling of these people X  X  movements and patterns, we aim to identify the best locations for charging stations.

Figure 5(a) gives the distribution of EV users in our potential scenario. We can notice several clusters around high-income neighborhoods. With the aid of Google Maps, we can estimate the amount of time an EV owner drives and how far he or she travels on a regular weekday. Figure 5(b) gives the distribution of distances traveled by these users.

Assuming that EV owners charge their cars at their respective homes for beginning/end-of-day situations, our goal is now to identify candidate charging locations during other times. Candidate charging stations will be a critical issue in the near future as the number of EVs increases [Martin 2012]. Let us assume that the EV of a person P consumes E C P KWh energy per 100Km. In addition, assume that the battery of this vehicle can save E S P KWh. Then, the estimated total distance that P can travel with his vehicle before he needs to charge its battery is As an example, for the Chevrolet Volt [GM-Volt 2011], with E S P = 16KWh and E
If the total traveling distance of P in a day is D P , then the number of times that P needs to charge his vehicle is N P and is determined as follows: As an example, if we assume that an EV X  X  battery can save 16KWh energy [GM-Volt 2011], an electric car can go for 71.43Km before it needs to be charged [FuelEconomy.gov 2014].

Due to the long duration of charging process, we have a constraint to install charging stations only in destinations that people visit. Assume that V L is the set of EV owners who visited location L during the day. Then, | V L | is the total number of EV owners who have visited location L . However, there is a greater chance for a location to be a charging station if people with higher charge needs visit that location. Hence, the charge needs of location L is determined based on the following equation:
Charging needs is an estimation to see in which locations the EV owners will probably charge their EVs. It does not mean that vehicles will certainly charge at every location. Here, we say that  X  X here is a greater chance for a location to be a charging station if people with higher charge needs visit that location. X  Equation (4) does not mean that vehicles will charge at every visit to such locations. It is just a measure that indicates which locations have higher chance of experiencing charging needs. For example, if location A is visited by 10 EVs and all of them need to be charged only once during a day, then charging need of location A would be 10. On the other hand, if location B is visited by 8 EVs and all of them need to be charged twice, then the charging need of location B would be 16, which is higher than that of A. These numbers show that with higher probability people in location B require charging needs, compared with A.
Figure 5(c) depicts the histogram of how many times an EV needs to be charged. In addition, Figure 5(d) depicts the charge needs of downtown locations. Charging EVs is not an instantaneous process, so it is helpful to place charging stations at those locations where people visit for an extended period of time. The average duration of stay of people in each location is an important feature in this regard. The right choice of EV charging stations thus depends on the regular electricity load of the area, the amount of time that people spend in the location, and the number of times that EV owners need to charge their vehicles [KEMA, Inc. 2012]. Hence, based on EV owners X  traveling routes during peak and off-peak hours, we can arrive at a set of candidate regions for charging stations. In this section, we describe how coordinated clustering can be used for charging station placement. Notations are summarized in Table I.

Let X be the income dataset and Y be the locations dataset. The set of vectors in dataset X is X ={ x s } , s = 1 ,..., n x , where each vector is of dimension l x  X  X hat is, x (latitude and longitude) in our current database. The many-to-many relationships between X and Y are represented by a n x  X  n y binary matrix B , where B ( s , t ) = 1if x s random variables) corresponding to the income dataset X and location dataset Y , and let k x and k y be the corresponding number of clusters. Thus, C ( x ) takes values in { 1 ,..., k Let m i , X be the prototype vector for cluster i in income dataset X (similarly m j , Y ). be the cluster membership indicator variables X  X hat is, the probability that income (Likewise for v ( y t ) j .) Ideally, we would like a continuous function that tracks these hard assignments to a high degree of accuracy. Such a continuous function for the the cluster membership can be defined as follows: where  X  is a user-settable parameter and D is the pointset diameter that depends on the data. An analogous equation holds for v ( y t ) j . Since our method operates over the prototypes and uses membership probabilities to compute the probability distribution of the contingency table, it is mandatory that the functions are smooth and continuous everywhere in the system. These are the essential properties of our objective function. Any smooth and continuous membership function should work similarly. However, Equation (5) has the advantage of involving Kreisselmeier-Steinhauser (KS) envelope function [Kreisselmeier and Steinhauser 1979] that is smooth and infinitely differen-tiable. As a result, our objective function can be optimized using any standard local and global optimizer.

We prepare a k x  X  k y contingency table to capture the relationships between entries in clusters across income dataset X and locations dataset Y . To construct this contin-gency table, we simply iterate over every combination of data entities from X and Y , determine whether they have a relationship, and suitably increment the appropriate entry in the contingency table: We also define where w i . and w . j are the row-wise (income cluster-wise) and column-wise (locations cluster-wise) counts of the cells of the contingency table, respectively.

We also define the row-wise random variables  X  i , i = 1 ,..., k x and column-wise random variables  X  j , j = 1 ,..., k y with probability distributions as follows: The row-wise distributions represent the conditional distributions of the clusters in the dataset in X given the clusters in Y ; the column-wise distributions are also interpreted analogously.

After we construct the contingency table, we must evaluate it to see if it reflects a coordinated clustering. In coordinated clustering, we expect that the contingency table will be nonuniform. We can expect that the contingency table will be an identity matrix when k x = k y . To keep the formulation and the implementation generic for different number of clusters in two datasets, we need to optimize the variables (cluster prototypes) in such a way that the contingency table is far from its uniform case. For this purpose, we compare the income cluster (row-wise) and locations cluster (column-wise) distributions from the contingency table entries to the uniform distribution. We use KL divergences to define our unified objective function: where D KL is the KL divergence between two distributions and U indicates the uni-form distribution over a row or a column. The idea of KL divergence is to estimate discrimination of information (minimum discrimination information (MDI)) that leads us to use it as our divergence measure. Similar techniques that follow the MDI princi-ple have the potential to be a part of our objective function. In the future, we plan to perform extensive experiments on this.

Note that the row-wise distributions take values over the columns 1 ,..., k y and column-wise distributions take values over the rows 1 ,..., k x . Hence, the reference distribution for row-wise variables is over the columns and vice versa. In addition, observe that the row-wise and column-wise KL divergences are averaged to form F . This is to mitigate the effect of lopsided contingency tables ( k x k y or k y k x ) wherein it is possible to optimize F by focusing on the  X  X onger X  dimension without really ensuring that the other dimension X  X  projections are close to uniform.
Maximizing F leads to rows (income clusters) and columns (locations clusters) in the contingency table that are far from the uniform distribution as required by the coordinated clusters. It is equivalent to minimizing  X  F .

The coordinated clustering formulation presented thus far can have some degenerate solutions where a large number of data points in both datasets are assigned to the same cluster, leading to a huge overlap of relationships. To mitigate this, we add two more terms with the objective function, where p (  X  )and p (  X  ) are defined as follows:
It should be noted that function F R is expected to be minimized. This is the reason why  X  F is used in the formula for F R .

Finally, we describe how to integrate three datasets: income, location, and station properties. Let X , Y ,and Z be these three datasets, respectively. There are two sets of relationships existing between X , Y ,and Y , Z . The objective function for these three datasets and two sets of relationships is defined as follows: Here, F R ( X , Y ) refers to the objective function described in Equation (10) with the in-come dataset X and locations dataset Y . F R ( Y , Z ) refers to the same objective function, but input datasets are locations Y and station property Z . In all of our experiments, we minimize F XYZ to apply coordinated clustering between income, locations, and station property datasets. After determining candidate charging stations, we need to assess the effect of installing charging stations at those locations and evaluate the changes in electricity load. In addition, from a business point of view, it is important to study the size of storage needed at those locations.

First, we need to evaluate candidate charging stations resulting from our co-clustering algorithm. One solution is to see whether these set of candidates are even used by EV owners. To understand which locations tend to be charging stations from EV owners X  points of view, we need to identify the desired locations of each person. These locations are the ones that minimize cost of charging for EV owners. On the other hand, since the process of charging an EV typically takes several hours, the user tends to charge his car in those locations where he stays for at least a few hours. Obvi-ously, from a business point of view, we not only consider those locations that meet the user X  X  criteria (charging cost) but also aim to optimize the charging station in terms of electricity load and size of storage.

In this subsection, we show how to determine where users desire to charge their vehicles with respect to the cost of charging and change of route for each user. In what follows, we develop an algorithm to assign charging stations to users. Of course, users have the freedom to select their charging stations. We assume that they are intuitively looking for the cheapest options. In addition, we assume that users desire to minimize their detour and their waiting time (for charging). These assumptions were considered in the assignment algorithm. This assignment requires an estimate of storage sizes of charging stations. For this reason, we need to know the exact schedule of users to calculate the overall electricity load of each location. We assume that detour, cost, and waiting time are important issues in selecting charging stations for all users. (It should be noted that the goal here is to estimate the storage size, not to suggest charging stations to users.)
To the best of our knowledge, there is limited work on the  X  X here to charge X  prob-lem in the literature. Khuller et al. [2011] try to find the cheapest tour between customer destination locations to fill gas. Our work is different from [Khuller et al. 2011] that of for a variety of reasons. For example, in our problem, we have the following: (1) Sequence of stop points for each user is determined. (2) We do not have a boundary on the number of times that an EV owner can charge (3) Price of charging in each location varies based on the duration of stay for the user (4) In some locations, the car battery will be charged partially.

Before explaining our algorithm, it is worth mentioning that there are different standards for charging stations. The charging time of each EV depends on its capacity and the charging level of the charger. Levels of charging for EVs can be categorized into three levels: level 1, level 2, and level 3 (DC power). Power consumption of each level is different from the other, and hence prices are different. Furthermore, the rate of charging (the time that it takes to charge a battery for 1KWh) is different for each level.

The algorithm for estimating desired charging locations based on user point of view is as follows. For each user, we invoke Algorithm 1 (UCCS). This algorithm takes the route of one user as input and calculates the best locations for charging as well as level of charging and the time of charging. Algorithm 1 calls Algorithm 2 to compute all feasible sets of charging stations in the route that the user travels. Then, Algorithm 1 only retains those sets that have minimum number of failures, such as the minimum number of times that car has to switch to gas because of an empty battery. After that, it selects a set of charging stations that has a minimum cost for charging.

Algorithm 2 (RUCCS) is a recursive function for finding all feasible sets of charging stations. It takes the current location, remaining charge in the EV, and the route of user as inputs and calculates sets of candidate charging stations. Next, we discuss how this algorithm works.

Let us assume that currently the EV is at location L j and that the available charge of battery is equal to C j . In addition, assume that d , the distance that the EV can travel from L j without charging its battery, can be computed. This distance is determined in line 2. Here, R is the capacity of the battery and D is the distance that EV can travel with a fully charged battery. In line 3 of the algorithm, we determine A as the set of locations that are located on the route of EV and are at most d meters away from L j . It is obvious that if the last point of the route is in A , we do not need to recharge the battery (lines 4 through 6). On the other hand, the EV must re-charge its battery in at least one of the locations in A ; otherwise, after d meters, it should switch to gas.
However, when A is empty, there is no way to recharge the battery of EV. In that case, EV must switch to gas and we say that a failure has happened. After a failure, in the next subsequent stop point, L j + 1 , EV X  X  battery must be recharged. In this case, we recursively call RUCCS for L j + 1 (lines 8 through 23). Here, MaxC j + 1 , k is the maximum possible charge of battery, which is determined based on the duration of stay of the car and the level of charge, k . However, because the capacity of battery is R, the actual value of the charge is calculated in line 11 and is shown by C j + 1 , k . The cost of this charge is determined in line 12 by CostC j + 1 , k .

If A is not empty (line 24), we must choose the most feasible location in A for recharg-ing the battery. Therefore, in lines 25 through 32, for each location in A and for each charging level, k , we calculate the amount of possible charge in that location ( C i , k ), the if we charge it in that location with that charging level. For each charging level, the best stop point for recharging the car is the one that if we recharge our vehicle there, we can travel farther with respect to the current location, L j .

Choosing the best members of A for recharging is performed in line 33. Then, if the best stop point for charging level k is L idx , we recursively call RUCCS with inputs L idx , C idx , k ,and Route (line 34). After returning from a recursive call of RUCCS for a location such as L i (lines 13 and 34), we have several sets of stop points that are considered as feasible sets located after L i . These sets are determined with this assumption that L i is a charging station as well. Hence, we have to add L i to all of these sets before returning from the current iteration of the algorithm (lines 14 through 19 and 35 through 40). In addition, because we want to consider all feasible solutions to choose the best one, we have to keep all of the results determined for different charging levels. This step is performed in lines 20 and 41.

After determining the most feasible locations from the user X  X  perspective (i.e., loca-tions that minimize charging cost and number of failures), we must match existing charging stations with the new locations. Since we cannot establish a charging station for each location that users want, we choose those charging stations that were extracted from Section 4.4 and assign each user to them based on the distance to charging sta-tions. Hence, for each charging station, we know when and how many times it will serve EVs. To select the best charging stations for a user, we use a nearest charging station assignment policy. Therefore, if the desired location for charging is L i and S c is the set of available charging stations, we use C i instead of L i : where distance ( A , B ) measures the distance between locations A and B . It should be mentioned that any method of distance measurement (Euclidean, Manhattan, etc.) can be used in this function.

With this policy, detours are minimized. After assigning charging stations, the amount of electricity load added to charging stations based on their serving time will be calculated. In the previous section, we determined the profile of electricity load at each location before and after charging station deployment. The profile of electricity load after in-stalling charging stations is determined based on the number of cars that are charged at each location and their corresponding level and duration of charging. On the other hand, each location has a predetermined capacity, or the maximum electricity load that it can tolerate. When the electricity load of a location increases and goes above its capacity, we need to place storage to meet the electricity demand of that location. In this regard, the efficiency of storage is also important. Here, we assume that the desired utilization of storage in all locations is 80% (i.e., at most 80% of the capacity of a storage used in a day), ensuring us that storage will not discharged to more than 80% of total capacity. Due to the small size of storage at some locations, we aggregate storages of nearby locations. For this purpose, we use DBSCAN [Ester et al. 1996] to locate dense areas and calculate the needed storage size of each cluster as a summation of storages over all locations in that cluster.

From a business point of view, placing storage at a charging station must have a adequate revenue for storage owners. In addition, putting storage at locations is advantageous to a city in terms of reducing the peak electricity load in an urban area.
To investigate the revenue of storage units, we consider each charging station in turn and compute the revenue of storage. Here, revenue refers to the amount of funds that storage owners will save from selling energy to consumers. Revenue can be achieved by selling energy during the day and recharging the storage during the night (with the off-peak rate). In addition, to observe the profile of charging stations based on their load curves, we use the clustering algorithm introduced in Yang and Leskovec [2011] X  X hat is, the K-Spectral Centroid (K-SC) algorithm for time series data using a similarity metric invariant to scaling and shifting. They apply an adaptive wavelet-based incremental approach to K-SC to use it for large datasets. K-SC proved to be an effective clustering when scaling was not important. By applying this method, we can understand different types of charging stations based on their load curves and, finally, locate the best locations to put storage to get high revenue. Figure 6 describes the coordinated clustering scenario. As illustrated in this figure, we use three datasets: people (income), coordinates ( x , y ) of location, and features (load, charge need, stay) of location. The first dataset contains information about the income of people, and second dataset has information about the geographic coordinates of each location. However, the third dataset contains the characteristics of locations for charging station placement, such as the electricity load of buildings, charging needs of people in that location, and duration of stay in each location.

We begin with some preliminary observations about our data. Figure 7 depicts the distribution of people based on their income, indicating that a significant number of people have high income, leading to a large number of EV users. We experimented with coordinated clustering settings involving many settings. Figure 8 depicts three clusters of locations based on each of the attribute sets in our schema. Note that because the clusters are mapped onto ( x , y ) geographical locations, locality is apparent only in Figure 8(b).

Profiles of these clusters are described in detail in Figure 9. Of particular interest to us is the view from the perspective of EV attributes (i.e., Figure 9(c)). Details of these clusters are explored in greater detail in Table III. Ideal locations for charging stations for EVs must have a relatively low current electricity load (to accommodate the installation of charging infrastructure), high charging needs (population profiles), and high staying duration [KEMA, Inc. 2012]. As can be seen from Table III, cluster 2 from the third dataset fits these requirements. Greater insights into the three clusters from the viewpoint of these three attributes is shown in Figure 10, supporting the choice of locations in cluster 2 as the right candidates for locating charging stations. As mentioned earlier, we try to identify locations with specific features while certain groups of people (people with high income) visit those locations. Although based on the clusters of the first dataset (people), we must choose locations where mostly people with greater salary affordances visit X  X he distribution of high income versus low income people in clusters 1, 2, and 3 in third dataset (locations) are almost similar. This is illustrated in Table II. With respect to distribution of high-income people people, cluster 1 is better selected. However, cluster 1 is not a good choice for installing charging stations because 45% of its locations are those with a high electricity load. Between the other two clusters (clusters 2 and 3), cluster 2 is better because it has a low electricity load, high charging need, and high duration of stay.

With the aid of clustering, we can predict which locations are the best candidates to install charging stations. However, the effect of installing charging stations in these locations on other metrics, such as the price of charging and electricity load of buildings, must be evaluated.

Since we are looking only at downtown area of Portland, we do not have any infor-mation about exact locations of other charging stations outside of the downtown area. Here, we padded our downtown area by 500m from each side (if we suppose that the downtown area has a rectangular shape). Then, assuming that those cars in the padded area can be served by our current charging stations, we run Algorithm 1 for each car. The distance between the charging station and the current location of the car must be minimized, because charging at a level 1 or 2 charging station will take several hours, and people prefer to charge their cars at those locations where they stay longer. In reality, users can charge their cars anywhere in the vicinity (  X  1 mile) of their desired buildings (e.g., a user can park his car at nearest charging station and walk to his office). Furthermore, we need to have information for two types of movements (riding to the charging station and walking to the office). Considering that the distances are not too large, using Euclidean distance to measure distances is not troublesome and makes computations easier. Furthermore, the actual information about roads of the area was not available, and the dataset consists only of the origin and destination of each movement.

Specifications of the three levels of charging for Portland are summarized in Table IV based on the Portland General Electric Company [2012a, 2012b]. From Portland Gen-eral Electric Company [2012b], Schedule 7 is chosen for levels 1 and 2, and Schedule 32 is selected for level 3. It is worth mentioning that prices (tariff rate) are based on the time-of-use policy. The definition of on-peak, mid-peak, and off-peak is inspired from the electricity loads in our dataset:  X  X n-peak: 6 AM to 10 AM and 5 PM to 8 PM  X  X id-peak: 10 AM to 5 PM and 8 PM to 10 PM  X  X ff-peak: 10 PM to 6 AM
Prices shown in Table IV are for both buying electricity from the grid and from the charging station (by EVs). The type of charging depends on the time of stay. If an EV stays for 8 hours, it can charge by charging at level 1, which is cheapest option. If an EV stays for 4 hours, it can use the level 2 charger, whereas if the EV needs to be charged in 30 minutes, it can use the level 3 (DC) option. The price of charging at level 3 is very high compared to levels 1 and 2. For example, the cost difference (a complete charging) between charging by DC and level 1 would be 50  X  10 . 89  X  2 . 2  X  16 . 62 = 507 . 936 cents or $5. Hence, the overall impact of level of charging (1, 2, and DC) is very high on charging stations and on users in cost and electricity load points of view.

Experiments show that the average distance traveled by each car is 8.4881m and that the maximum distance traveled in this experiment was 1,188.2m. Figure 11(a) depicts the histogram of distance between location of the current stop point and the available charging station. This result is promising, because we considered part of the boundaries of downtown while there might be a charging station in that area. The number of charging stations based on our clustering algorithm is 161, whereas the number of locations where people liked to charge their cars is 367. The histogram of expenses that all EV owners in Portland will pay daily for charging is shown in Figure 11(b).
In addition, the number of cars served at each charging station is important from a business point of view to study the revenue of charging station owners. As Figure 12(a) shows, this is zero for some charging stations (black circles), and they can be removed from consideration as charging station candidates. Based on this figure, we can place appropriate charging infrastructure at those locations serving a certain number of cars.
It should be noted that the number of failures in our algorithm is 48. This highlights the number of cases where an EV must switch to gas to continue its route. Experiments show that all of these 48 cases were due to the nature of our dataset X  X hat is, the distance between locations was more than the maximum possible distance of travel with a full battery.
 Those charging stations that provide service to cars will add extra load to the location. This load might be more than the capacity of the location. Here, we assume that the maximum load of one location during a day is equal to its capacity. We must place storage to those locations that require extra electricity. For determining the size of storage at each charging station, we must look at values of the location X  X  capacity and electricity load after adding EVs. To compute size of storages, we would like to assume that storage will not discharge to more than 80%. For example, 50kWh should be selected for a net daily load of 40kWh. The size of required storage should be calculated from the area below the curve of new electricity load (kW X hr) and above the capacity (net peak load)(kW). Typically, storage will be charged at night and used during the day, and it should be sized to cover a day X  X  net load.

Figure 12(b) shows how many locations need to have storage. Again, a black circle means that there is no need for storage at this location. Based on our assumption, utilization is 80%. However, the time-based utilization (i.e., the percentage of time that storage has been used in a day) is shown in Figure 13. Obviously, the value of time-based utilization cannot be 1 in this case, because storage needs to be recharged overnight to be used the next day.

After determining storage sizes, we can aggregate them to minimize the number of storage units. This aggregation is based on the vicinity of locations. Hence, we used DBSCAN to find dense areas and take summation of the storage size over all locations in each cluster. This is shown in Figure 14. In this figure, small black circles represent those locations where they could not be grouped by other locations and considered as noise in the DBSCAN algorithm. Small red dots represent the center of each group. As an example, on the upper-right side, the overall storage size of two locations (purple circles) is 252kWh.

To study the amount of savings for each storage, we assume that each storage will charge at night at an off-peak rate. Hence, during the day, at on-peak and mid-peak hours, storage owners will sell energy to consumers (EV owners). Hence, the difference between the price of selling and the price of recharging will be considered as the revenue of storage. Figure 15 shows the energy storage revenue for each charging station that has a storage unit. This value of revenue is calculated for one typical day. To observe the profiles of charging stations based on their load curves after adding EVs and after adding storage, we used the K-SC clustering approach described earlier. Here, the value of electricity load before adding EV, after adding EV, and after storage deployment during 24 hours were considered as a vector of 24  X  3 elements. The profiles of charging stations are categorized into four clusters, of which the prototype of each cluster is shown in Figure 16. It should be noted that this clustering is invariant to shift and scale, which is why the value of load after storage deployment is higher than the maximum value of load before considering EV. Figure 17 depicts an example of actual curves for one charging station in cluster 1. It is obvious that storage deployment will ensure that the value of electricity load will not go higher than the capacity at each location. Figure 16 is important in understanding the behavior of charging stations. As well, this figure is helpful in deciding between using a mobile storage unit and a stationary one.

In Figure 16, charging stations in clusters 1 and 4 have little impact on the peak load, whereas those in clusters 2 and 3 significantly increase peak demand of the system. Therefore, using energy storage for charging stations in clusters 2 and 3 would make more sense than in clusters 1 and 4. Based on the number of charging stations in each cluster, 43% of charging stations (in clusters 2 and 3) are candidates for storage deployment. On the other hand, if there is no possibility of adding energy storage, charging stations in clusters 1 and 4 would have much less impact on the grid and will be accepted by utilities with less opposition. In addition, one can deploy mobile storage units for charging stations in clusters 1 and 4.

Figure 18 shows the amount of daily revenue achieved by storage deployment for each cluster. In this figure, locations in clusters 2 and 3 have the highest revenue compared to clusters 1 and 4. The total revenue in clusters 1 and 4 is 6,547.2 cents, whereas the total revenue in clusters 2 and 3 is 3,3081.0 cents. Based on this, one can justify using stationary battery storage in candidate charging stations (clusters 2 and 3). EVs are going to become more popular in the near future. We have demonstrated a systematic data mining methodology that can be used to identify locations for placing charging infrastructure, as well as storage infrastructure, as EV needs grow. In addi-tion, we identified candidate locations for deployment of stationary energy storages to utilize existing electricity infrastructure. The results presented here can be generalized to a temporal scenario where we accommodate a growing EV population and design charging infrastructure to accommodate additional scenarios of smart grid usage and design. The methodology presented in this article mostly incorporates demand data from the electricity infrastructure, and future work would incorporate information from the electricity supply side as well. Information such as loading level of elec-tricity feeders and remaining excess capacity of feeders for EV charging stations can be integrated in the methodology to improve the placement of EV charging stations. Additionally, there are several measures that were not considered here, such as the life of the battery, peak shaving reduction, adding PVs to the current system, and details of economic analysis in charging stations and energy storage deployment. Incorporat-ing these aspects is a direction of future work. Finally, the analysis presented here integrates a small range of datasets, each of which has adequate coverage over regions of interest. To overcome regions of data sparsity, we could employ the use of surro-gate models like Gaussian processes [Ramakrishnan et al. 2005], which can enable the integration of a greater variety of datasets.

