
Zhaoyun Ding 1 , ,YanJia 1 , Bin Zhou 1 , Jianfeng Zhang 1 ,YiHan 1 , and Chunfeng Yu 2 Online social networking sites are becoming more popular each day, such as Facebook, Twitter, and LinkedIn. Among all these sites, Twitter is the fastest growing one than any other social network. Microblogs, such as Twitter, is a service that has emerged as a new medium for communication recently. Unlike oth er social network services, the relation-ship of following between users can be unidirectional; a user is allowed to choose who she wants to follow without seeking any permission. Twitter employs a social network called  X  X ollowing X  relationship; the user whose updates are being followed is called the  X  X riend X , while the one who is following is called the  X  X ollower X . In case the author is not protecting his tweets, they appear in the so-called public timeline and his followers will receive all messages from him.

It is well recognized that networks often contain both strong and weak ties, also influence strength between di ff erent users is usually di ff erent and it is unidirectional in microblogs, so treating all relationships as equal will increase the level of noise in the learned models and likely lead to degrad ation in performance. Recently, influence strength analysis has attracted considerable research interests. However, most of their works only considered the network structure or the user behaviors in social network, and the micro-level mechanisms of influen ce strength of a user on her followers at a specific topic, have been largely ignored.
 Studies by Kwak et al [1] have shown that Twitter is more likely to be a news media. Users can not only find friends by microblogs, but also can publish messages by them-selves, and microblogs transform people from content consumers into content produc-ers. Usually, there are two aims for users to make use of microblog services, including finding friends in real life and finding friends according to the homophily . So, it is in-su ffi cient to measure the influence strength of two users only by the number of common friends.
Moreover, if a user is influenced by her friends, she will retweet (by making use of an informal convention such as  X  X T @user X ) or reintroduce (tweets are similar with the tweets previously posted by other users, but without acknowledgement of a source) the messages of her friends, resulting that some words in tweets are the same. The more the same words which are copied by a user are, the higher the influence strength on the user is. Figure 1 gives an example to illustrate the correlation of the influence strength and the number of the same words. In the topic of basketball, we can find the user A has more similar words with her friend B and we infer the user A copes more ideas from her friend B . In fact, figure 1 indicates two assumptions: 1) Users with similar interests have a stronger influence on each other, 2) Users w hose actions frequently correlate have a stronger influence on each other, which have been validated in [2] [3].

Also, the interval of time is an important factor to measure the influence strength and it stands for the di ff used rate of each word. If a user copes the ideas from her friend much faster for a topic, it will indicate that the friend has stronger influence on this user. The interval of time has been ignored in recen t studies for influence strength analysis.
In addition, the network in microblogs is a multi-level hierarchial structure, imply-ing that the influence is transitive. A small network of multi-level hierarchial structure is illustrated in the figure 2. Two key factors need be considered to measure the indirect influence strength. 1) The interval of time. Though the user 3 and the user 4 are influ-enced indirectly by the user 1 , the user 3 receives the idea indirectly from the user 1 faster than the user 4 . We can infer the user 1 has stronger indirect influence strength on the user 3 . 2) Multi-path influence propagation. In the figure 2, we can find that the user 4 is influenced indirectly by the user 1 through two users. How to combine the multi-path indirect influence stre ngth more microscopically is unknow.

In order to measure the influence strength in microblogs, we propose a novel time-aware generative probabilistic model of a corpus to draw each word in tweet from the corresponding probab ility distribution, considering the tim e interval, the relationship of following, and the post content. The model is estimated by Gibbs sampling. Moreover, we take advantage of the interval of time and the multi-path influence propagation to measure the indirect influence strength more microscopically in microblogs.
Experiments are conducted on a real datase t from Twitter containing about 0.26 mil-lion users and 2.7 million tweets, and the results show that the model in this paper has better prediction performance than other methods. Furthermore, we find that the influ-ence strength ranking of our model is less correlative with the method which ranks the influence strength according to the number o f common friends. Results indicate that some users with higher influence strengt h by the number of common friends may be friends in real life and they form relations hips because they know each other in real life, but they have little interaction in virtual life. Liu et al [2] [3] proposed a generative graphical model which leveraged both hetero-geneous link information and textual conten t associated with each user in the network to mine topic-level influence strength. Based on the learned direct influence, they fur-ther studied the influence propagation and aggregation mechanisms. Guo et al [4] pro-posed a generative model for modeling the documents linked by the citations, called the Bernoulli Process Topic (BPT) model, to measure the influence strength in Citation Networks. Dietz et al [5] devised a probabilistic topic model that explained the genera-tion of documents; the model incorporated the aspects of topical innovation and topical inheritance via citations to predict the citation influences.

Our work is similar to their works and we also propose a novel generative prob-abilistic model of a corpus which leverages both the network of following and post content associated with each user in the net work to measure the influence strength in microblogs. However, the time is considered in our work. Usually, the influence strength between users is evolved with the variety of time. Moreover, the interval of time is an important factor to decide the direct and indirect strength of influence between users.
Xiang et al [6] developed an unsupervised model to estimate relationship strength from interaction activity (e.g., communication, tagging) and user similarity. More specifically, they formulated a link-based latent variable model, along with a coordinate ascent optimization procedure for the infer ence. However, influence strength analysis microscopically is ignored in their work.

Also, interaction data has been used to pred ict relationship strength [7] [8] but this work only considered two levels of relationship strength, namely weak and strong rela-tionships. Definition 1. (Word) A word is the basic unit of discrete data, defined to be an item from a vocabulary indexed by { 1 ,...,v } . Words are represented with unit-basis vectors that have a single component equal to one and all other components equal to zero. Thus, the v th word in the vocabulary is represented by a V-vector w such that w v = 1 and w u = 0 for u v .
 Definition 2. (Post / Tweet / Document) A post w is comprised of a bag of words from a vocabulary V = { 1 ,...,v } , and is represented with vector w = ( w 1 ,w 2 ,...,w n ) ,where w i denotes the occurrence number of word v i in document w .
 Definition 3. (Topic) A semantic topic  X  observed in a particular time period is defined as a multinomial distribution of words { p ( w |  X  ) } w  X  V with the constrain Definition 4. (Network) The network in microblogs is a directed graph G = ( N , E ) .The N stands for the set of users in microblogs. And the directed edge E  X  N  X  N stands for the relationships of following in microblogs. For  X  e u v = ( u ,v )  X  E, if there exists a directed edge between u and v ,e u v = 1 ;otherwisee u v = 0 .
 Definition 5. (Direct and Indirect Influence) Given two user nodes u , v in the network G = ( N , E ) , we denote I thermore, if e u v = 1 ,wecallI u ( v ) the direct influence of user v on u ;ife u v = 0 ,we call I u ( v ) the indirect influence of user v on u . Because the relationship of following be-tween users in microblogs can be unidirectional, the influence strength is asymmetric, i.e., I v ( u ) I u ( v ) . Similar to the existing topic models, each doc ument is represented as a mixture over latent topics. In our model, the content o f each document is a mixture of two sources: 1) the content of the given document, and 2) the content of other documents related to the given document through the network structure. This perspective actually reflects the process of writing a post (tweet) in microblogs: either depending on users X  interests or influenced by one of their friends. when a user writes a post, she may create the idea innovationally or copy it from one of her friends.

In the model, we use a parameter s to cont rol the influence situation. The s is gen-erated from a Bernoulli distribution whose parameter is  X  .Whens = 1, the behavior is generated based on users own interests. When s = 0, it means the behavior of the user is influenced by one of her friends. The parameter  X  of the coin is learned by the model, given an asymmetric beta prior  X   X  = (  X   X   X  , X   X   X  ) which prefers the topic mixture  X  of a friend document. Thus we need another parameter  X  to select one influencing user v from friends set L ( u ).

The key di ff erences from the existing topic models are that the interval of time and the relationship of users are combined in our model. The mixture distribution over topics is influenced by both word co-occurrences and the document X  X  time stamp. A per-topic Beta distribution generates the document X  X  time stamp. The interval of two related documents  X  t is drawn according to the negati ve exponential dis tribution with the parameter  X  . Figure 3 shows the graphical structure of the model, which explains the process of generative each word and time stamp in posts. The key di ff erences of the generative process are illustrated in the algorithm 1.
 Algorithm 1. Probabilistic generative model We employ Gibbs sampling to perform approximate inference. We list the partial update equations for each variable as below which are same as [2] [3]. p ( f i | f  X  i , d i , s i = 0 , z i ,  X  )  X  p ( s i = 0 | s  X  i , d i , f i , z i ,  X  )  X  The f  X  i represents the friend assignm ents for all tokens except w di .Andthe s  X  i repre-sents the coin assignments for all tokens except w di . In the update equations, N (  X  )is the function which counts occurrences of a configuration. For example, N d , f , s (1 , 2 , 0) denotes the number of tokens in user 1 that are assigned to friend 2 , where the coin resultsis0.
 1 , f i ,  X  ), where z  X  i represents the topic assignments for all tokens except w di .
Based on the generation process, we can get the posterior probability of the whole data set by integrating out the distributi ons because the model uses conjugate priors. Using the chain rule, we can obtain the conditional probability conveniently. According to p ( z i , z  X  i ) = p ( z ) and the bayesian inferen ce. We can infer as follows. p ( z i | z  X  i ,w i , t i , d i , s i = 1 , f i ,  X  ) is derived analogously. After the Gibbs process, we can estimate  X  of the negative exponential distribution. The Y represents the number of all time intervals in the i topic. And the  X  t i y represents the y th time intervals in the i topic.

Moreover, we will also obtain the sampled coin s i , friends f i , and topic z i for each word, and the influence strength can be then estimated by Eq.(8), which are averaged over the sampling chain after convergence. A denotes the length of the sampling chain. The  X  t i represents the shortest interval of two same tokens assigning to the same topic between the user u and the user v .

The equations reflect our assumptions in a statistical way. It indicates that if one user u copes more words of user v on topic z ,then v has a stronger influence on u w.r.t. topic z . Moreover, if the user u copes ideas of user v faster (has a shorter interval of time) on topic z ,then v has a stronger influence on u w.r.t. topic z . In addition, we can also illustrate the evolutionary trend of the influence strength for two pair users according to the time stamp of each user in microblogs. The above probabilistic model only measures the direct influence strength, but does not consider indirect influence strength. In rea lity, influence can propagate through the net-work. Liu et al [2] [3] and Guo et al [4] studied the propagation of influence macroscop-ically. They first measured the direct influen ce strength between users, then combined these influence strengths to measure indirect influence strength. However, the micro-level mechanisms of influence propagation have been ignored by them.
In fact, we can study the influence propa gation more microscopically according to the propagation of words. Figure 4 gives an example of the propagation of words. User C copes two words from the user A through the user B in the topic of basketball. Ac-cording to the statistical way in the above s ubsection, we can infer the indirect influence strength as follows.
 I N assigned to both the user f 1 and the user f 2 . For example, N d , z , s , f in the figure 4. Analogously, we can get indirect influence strength for further hops.
Moreover, the influence of ideas decreases with the process of propagation. Fortu-nately, the interval of time can be used to illustrate the process of influence decrease. Usually, the influence of ideas decreases with the developmen t of the time. If the inter-val of time is longer, the influence of ideas will decrease significantly. Otherwise, if the interval of time is shorter, the influence of ideas will decrease insignificantly. We take advantage of the function of negative exponen tial distribution to illustrate the process of influence decrease quantitatively.
 Also, the  X  t i represents the interval of two tokens between two indirect users. For ex-ample,  X  t i ( A , C ) = 6 h in the figure 4.

Next, we will analyze the multi-path influence propagation in microblogs. In the figure 2, we can find that the user 4 is influenced indirectly by the user 1 through two users (the user 2 and the user 5 ). In order to measure the indirect influence strength through multi-path, we give an aggregatio n function to combine multi-path indirect influence strength.
 The u is influenced indirectly by the f 2 through two users f 1 1 and f 2 1 . We refer the highest multi-path indirect influence strength as the final indirect influence strength. 7.1 Dataset For the purpose of this study, a set of Twitte r data about Chinese-based twitters who have published at least one Chinese tweet from 2011  X  04  X  15 to 2011  X  07  X  15 was prepared as follows. About 0.26 million use rs and 2.7 million tweets were collected through the API of Twitter. We begin by describing the dataset we are trying to mine. As the figure 5 shows, the distributions of users X  followers and tweets are approximately power-law, implying that the vast majority of users have a small quantity of followers and tweets, while a small fraction have a large number of followers and tweets.
In order to measure the influence strength with our model, we extracted tweets and users who published at least 10 tweets, then ex tracted their network relationships. Due to the power-law distributions of users X  tweets, 3334 users and 168526 network re-lationships(edges) were extracted from the data set. Our model is trained with hyper parameters  X   X  = 0 . 01,  X   X  =  X   X  = 0 . 1,  X   X   X  = 0 . 1,  X   X  = 1 . 0 and 50 topics. 7.2 Evaluation Predicting User Behaviors by Direct Influence Strength. We apply the derived in-fluence strength to help predict user behaviors and compare the prediction performance with other methods. The behavior is defined as whether a user retweets a friend X  X  mi-croblog. To do this, we rank the pairs of users by influence strength and measure the area under the ROC curve (AUC) based on the feature values for the ranked pair (e.g., 1 if a user is retweeted by other user, 0 otherwise). We compare the rankings using influence strength to several alternativ e rankings (Named our model as TNIM-Time Network Influence Model): 1) The influence strength between users i s calculated as the Kullback-Leibler (KL) divergence of user distributi ons over topics (Named as KLD).
 2) The influence strength between users is calculated as the number of common friends (Named as NCF).
 3) The influence strength between users is calculated as the methods proposed by Liu et al [2] [3] (Named as NIM-Network Influence Model).
 In order to predict user behaviors, we divide the data set into two parts. We learn the influence strength by the data set from 2011  X  04  X  15 to 2011  X  06  X  30. And we pre-dict user behaviors by the data set from 2011  X  07  X  01 to 2011  X  07  X  15. We select four users and their friends to evaluate our model. The ROC curve of di ff erent methods for four users are shown in the figure 6.
 Then, we select 1000 users and their friends to compute the average AUC (Area Under Curve) of above four methods. The results are shown in the figure 7.
 Experimental results show that the prediction performance of our model is the best. The average AUC (Area Under Curve) of our model is 0.0647 higher than the method of NIM, and is 0.0876 higher than the method of KLD. The prediction performance of NCF is the worst. We can infer it is not too accurate to predicate the retweets by the number of common friends and they do not always have common topics in virtual life. Correlation Analysis by Direct Influence Strength. In this subsection, we will ana-lyze the correlation of above three methods and our model by ranking the pairs of users according to the influence strength. Spearman Rank Correlation is used to analyze the correlation of two rankings. We select 1000 users and rank their friends according to the influence strength. Then, we compute the correlation of our model and above three methods according to the Spearman Rank Correlation . The average correlations of 1000 users are shown in the figure 8.

Experimental results show that the influe nce strength ranking of our model (TNIM) is more correlative with NIM. However, our model is less correlative with NCF. Re-sults indicate that some users with higher influence strength by the number of common friends may be friends in real life and they form relationships because they know each other in real life, but they have little interaction in virtual life.
 Predicting User Behaviors by Indirect Influence Strength. In order to evaluate the prediction performance of indi rect influence strength, the b ehavior is defined as whether a user retweets a user X  X  microblog by multi-hops. For example, if a user A is influenced by the user B indirectly through the user C, we will estimate whether the relationship of retweets is as follows:  X  X  RT @C RT @B... X .
 Because it is di ffi cult to get indirect influence strength by the methods of the Kullback-Leibler (KL) divergence and the number of common friends, we only compare our model with the method proposed by Liu et al [2] [3]. Also, we select 1000 users and their indirect friends to compute the average AUC (Area Under Curve). Experimental results are shown in the figure 9, where h denotes the hop of indirect influence.
Experimental results show that the prediction performance of our model is better than the method proposed by Liu et al [2] [3]. Moreover, we find the prediction perfor-mance of our model drops more slowly with the improvement of the hop. The indirect influence strength proposed by Liu et al [2] [3] is impacted by the hops of network. And all indirect influence strengths are computed by I u ( w )  X  I w ( v ), where  X  is the concate-nation function, e.g., multiplication and minimum value. However, the interval of time is ignored by them. Usually, the up-to-date tweets are recommended to followers, and followers are influenced more easily by thes e up-to-date tweets. It is not too accurate to compute the indirect influence strength, not considering the interval of time. In fact, Though the hop of network is farther, the interval of multi-hop may be shorter and the tweet is retweeted more easily by other users . So, the prediction performance of the method proposed by Liu et al [2] [3] drops faster with the improvement of the hop. A novel time-aware probabilistic generative model is proposed to estimate influence strength, considering the time interval, the relationship of following, and the post con-tent. Then, we take advantage of the interval of time and the multi-path influence prop-agation to to derive the indirect influence strength between nodes. Experimental results show that our model has better prediction performance than other methods, in despite of direct and indirect influence strength.

In the future work, we will take advantage of the influence strength to mine influencer more accurately in microblogs. Also, we can employ the influence strength to viral marketing and trigger a large cascade of influence more accurately.

