 Chiao-Wen Liu, Chen-Fu Chien n 1. Introduction
Semiconductor manufacturing pr ocess is lengthy and technology intensive that contains several hund red process steps with advanced tools to fabricate integrated circuits (IC) on a silicon wafer in the wafer fabrication facility (fab). Semiconductor manufacturing is very capital intensive, in which building a modern 12 in. wafer fab with 40 nm process technologies requires more than 4 Billion USD. There-fore, fast ramp up for new process technology and quick response to yield excursion for strict quality control is crucial to maintain competitive advantages.

For each fabricated wafer, circuit probe (CP) test is performed on each of the gross dies on the wafer and thus can detect the specific failures with the corresponding bin values. The CP yield is one critical yield measure in semiconductor manufacturing ( Cunningham et al., 1995 ), since only the known good dies of the CP test can be packaged into chips for further usage. WBMs are spatial results of CP test presenting specific patterns that experienced engineers can recognize them to track the corre-sponding process failures in semiconductor manufacturing. Hence, the troubleshooting of low CP yield depends on two steps: recognizing the WBM patterns and identifying the assignable root causes.

In practice, most companies rely on experienced engineers to analyze WBM, while it is time consuming and unreliable for an engineer to cluster the patterns with their eye-ball analysis. Furthermore, the identification of the possible root causes from the specific WBM failure patterns is affected by the domain knowledge and the experience for trouble shooting of the engineers.

A number of studies have applied data mining techniques for trouble shooting and yield enhancement for semiconductor man-Chien and Chen, 2007 ; Wang et al., 2006 ; Palma et al., 2005 ; Chen et al., 2000 ). To enhance CP yield, Wu and Zhang (2010) proposed a novel fuzzy neural networks with considering the number of defects per wafer, mean number of defects per chip, mean number of defects per unit area, clustering parameter, chip size and five critical electrical test parameters as the input variables.
In addition, Self-Organization Map (SOM) clustering has been applied to cluster E -test, CP fail bins and metrology data to detect the failure patterns ( Chien et al., 2003 ). Langford et al. (2001) presented a robust windowing method for the Poisson yield model to extract the systematic and random components of yield from wafer probe bin map data. For WBM clustering problems,
Friedman et al. (1997) defined four defect clustering patterns including random, edge, top and bull X  X  eye pattern, but give no information about pattern types. For example, mask misalign-ment in the lithographic process generates a checkerboard pattern; the abnormal temperature control in the rapid thermal annealing process (RTP) can generate a ring of failing chips around the edge of the wafer; the zone pattern often arises from the thin film deposition ( Chien et al., 2002 ). Hsu and Chien (2007) proposed a hybrid data mining approach that integrates spatial statistics and ART neural networks to extract patterns from WBM and associate with manufacturing defects. Wang (2009) proposed an approach that combined spatial statistics, kernel based eigen-decomposition and support vector clustering to estimate the number of defect clusters, and separate the convex and non-convex defect cluster on WBMs.

However, as wafer size is enlarged and IC feature size is continuously shrinking, WBM patterns become complicated due to the different die sizes, wafer rotation, the variant density of failed dies. Motivated by the needs in real setting and improved via empirical studies, this research developed a WBMs clustering solution that integrates the spatial statistics test, cellular neural network (CNN), ART1 neural network, and moment invariant (MI) for the clustering of WBM failure patterns automatically and efficiently. Furthermore, we also constructed an intelligent system for WBM defect diagnosis system equipped with user-friendly graphical interface to help the engineers detect the root cause and the knowledge database to record the know-how and domain knowledge. In particular, a number of WBMs of the twelve patterns defined by domain engineers were used for validation, in which four performance indexes were employed to compare the proposed approach with the other clustering methods. The results have shown that the clustering performance of the proposed approach is superior to other methods. Indeed, the developed solution has been implemented in a leading semiconductor manufacturing company in Taiwan.

The rest of this study is organized as follows: Section 2 introduces the CP yield and the WBMs. Section 3 outlines the proposed system. Section 4 describes an experiment for the pro-posed pattern clustering system. Section 5 concludes this study with discussions of the results and future research directions. 2. CP yield and wafer bin maps
Yield is a widely used performance measure in semiconductor manufacturing. Sampling test is the way to monitor the produc-tion quality during wafer fabrication. In the circuit probe (CP) testing that involves testing of individual die for functionality using different electrical probes and provides key information about the performance of the wafer fabrication process ( Chien et al., 2011 ). Then, the wafers are died up, and the good dies are package into chips and shipped to the customer ( Kumar et al., 2006 ; Hsu and Chien, 2007 ).

There are three kinds of yields in a semiconductor manufac-1995 ). Among them, CP yield is the critical factor of the manu-facturing yield and divided into two major categories. One is base line yield improvement; the other is low yield trouble shooting.
Wafer bin maps (WBM) are the result of CP inspection of dies on the wafer at the end of fabrication. They are multi-dimensional and have complex structures, can provide essential information for engineers to identify problems in the manufacturing process.
WBM patterns can provide information to monitor the process and product. Fig. 1 shows a typical WBM where the different symbols denote chips failing in different functional tests.
The failure patterns of WBM can be classified into three major categories ( Stapper, 2000 ; Taam and Hamada, 1993 ): (1) Random defect: No spatial clustering or pattern exists, and the defective chips are randomly distributed in the two-dimensional map. Random defects are usually caused by the manufacturing environmental factors. Even in a in a near-sterile environment, particles cannot be removed completely.
However, reducing the level of random defects can improve the overall productivity of wafer fabrication. (2) Systematic defect: The positions of defective chips in the wafer show the spatial correlation, for example, ring, edge-fail, checkerboard. Fig. 2 shows ten systematic patterns that are frequently seen in fab, as defined by domain experts. (3) Mixed defect, consisting of a random defect and a systematic defect in one map. Most wafer maps are of this type, as shown in Fig. 3 . Engineer needs to separate random and systematic defects in the WBM, since the systematic defect X  X  signature can reveal the process problem ( Friedman et al., 1997 ). 3. System design and implementation
As illustrated in Fig. 4 , we developed a WBM diagnosis system that consists of three modules: the user-interface, the knowledge management database, and the WBM patterns clustering system.
There are two kinds of flow, control and data, in the system. The control flow starts from user to control the parameters in WBM patterns clustering system and acquire the WBMs pattern diag-nosis knowledge via the user interface. The data flow shows the data path. Three modules can provide the data and manufacturing intelligence to the engineers via graphical user interface. For
WBM clustering, data in database will go to WBM patterns clustering system, and the clustering results will summarize the report to user and are recorded in the knowledge base. 3.1. The user interface and knowledge management database
According to Fig. 4 , the user interface module allows users to execute the following system operations including: loading the analyzed dataset, adding or retracting the decision knowledge, controlling the parameters in WBM patterns clustering system, and monitoring the clustering results.

The design of the user interface focus on four points: (1) para-meters setting, (2) WBMs graphical illustration, (3) graphical reports representation, and (4) buttons click for keyword search in knowledge database and user comments. The graphical user interface is easily to use and quickly to help user to identify the root cause. The function for buttons click in user interface is helpful to storage the user X  X  domain know-how and useful to search keywords in the knowledge base. When the knowledge base is well building, the intelligent system will be constructed by the statistical inference methods. In this research, we aim on the pattern clustering system for WBMs clustering. The detailed methodology procedure is described in the following subsection. 3.2. WBM patterns clustering procedure 3.2.1. Spatial independent test
In this section, we will divide data into three categories by the position of bin value distributed on the WBMs. Hence, following Taam and Hamada (1993) , we applied a join-count statistics based on spatial clustering method to examine spatial depen-dence of the WBM. For a given WBM, if die i is defect with respect to the target bin value, it will denoted as Y i  X  1 (Bad); Y (Otherwise) in other bin values. Four statistics defined as follows: N BB denotes each die i and the neighbor die j are all bad. That is, 8 &gt; &gt; &gt; &gt; &gt; &lt; &gt; &gt; &gt; &gt; &gt; : neighbors; otherwise, d ij equals 0. Table 1 is a two-way contingency table summarizing the relations.

We examine the spatial dependence of WBM by testing the following hypothesis. In particular,
H 0 : the dies are randomly distributed on the wafer (i.e., spatial independence).
 H 1 : the dies are not randomly distributed on the wafer.
Based on the defined statistics of WBMs, a natural logarithm of the odds ratio is proposed as follows: Log ^ y  X  N OO  X  0 : 5  X  X  N BB  X  0 : 5  X  X  N When the number of dies on a wafer is large, Log ^ y is approxi-mately therefore, Log ^ y almost 0 (Log ^ y 0) indicates spatial indepdence; that is, the defect dies are randomly distributed on the wafer. A presents a systematic pattern with no bad X  X ad neighboring dies ( Agresti, 1990 ). For example, if there is a flaw on the mask, the defect is scattered (i.e., repulsive pattern) yet systematically repeated.

In other words, the signs of Log ^ y indicates different types of spatial dependence while its magnitude denotes the degree of dependence. Then, we use ART1 to cluster the WBMs that present attraction among the dies (i.e., have high positive values of Log For illustration, let us examine the WBMs that have 268 dies in Table 2 . According to the above equations, we can derive the corresponding values of Log ^ y . In particular, WBM No.1 and WBM  X  0.05. WBM No.3 rejects the null hypothesis ( p value  X  6.43 10 13 ) and shows a specific spatial pattern. WBM No.4 also rejects the null hypothesis ( p value  X  0.998) and shows a repulsive pattern. 3.2.2. Noise elimination and pattern improvement
Since most of the WBMs are composite of random errors and systematic defects, the degrees of spatial dependence are varied.
However, the involved systematic defects can be reduced through identifying the assignable causes and the corresponding trouble-shooting. To reduce the noises of random errors, we propose the cellular neural network (CNN) to amplify the specific clustering patterns and to filter the random error before clustering. How-ever, since the input data of CNN is continuous, the weight is assigned to the neighbor of each die on the WBMs before CNN transformation. In this study, we consider the neighbor with r  X  2.
Thus, by several times of experiment design, the weight was defined as follows:
Q  X  2 6 6 6 6 6 6 4
For example, given the 5 5 grid in Fig. 5 , the value of central die (which was marked by black color and the other defect die was marked by gray color) will be 0.224 after transforming by matrix Q .

After transforming the value on WBMs, we apply cellular neural networks that are proposed by Chua and Yang (1988a , 1988b) to eliminate noise effect and improve the pattern effect.
Since the CNN theory was proposed in analog process, we approximate the differential equation by a difference equation.
In particular, given an initial state v x (0) and an input signal, the behavior of the system is determined by the interaction coefficients A ( i , j ), B ( i , j ) and a bias term I ij a cloning template. In the case of linear interaction, if the values of the interaction terms depend only on the relative positions of cell is translation-invariant.

Let t  X  nh (i.e., h is a constant time step), r is neighborhood then approximate the derivative of v x ( t ) by the corresponding difference from
Cv n  X  1  X  X  h  X  X  v x  X  nh  X   X  X  X  h where v nh  X  X  X  1 2 R y 9 v x  X  nh  X  X  1 9 9 v x  X  nh  X  1 9
Let I from  X  X  nh  X  X  for simplicity to make v x ( n ) v x ( nh ) and v we can recast (4) into the form v n  X  1  X  X  X  v x n  X  X  X  h C 1 R if we substitute v y ( nh ) f ( v x ( nh )), we would obtain v n  X  1  X  X  X  v x n  X  X  X  h C 1 R
For example, in the case of the smallest neighborhood (i.e., follows:
A  X  we define this image loaded into the initial states v x (0) of the cells, then the mapping F ( T ) is an image processor with an output operation as follows:
A  X  then v y ( t ) tend to constant values [0, 1], and our CNN image processor performs averaging over a 3 3 window. Fig. 6 illus-trates an example. Fig. 6 (a) shows the input WBM with noise and
Fig. 6 (b) shows the WBM after CNN transformation. 3.2.3. Pattern clustering
In pattern clustering, we use moment invariant and ART1 as our clustering tool. Moment invariant can make the same shape in one cluster, whether the shape size, position is changed. ART1 can learn-self by characteristic of each WBM. Same patterns with different position or different size will be clustered on different clusters. 3.2.3.1. Shape clustering by moment invariant. Moment invariant proposed by Hu (1962) is a shape recognition technique in image process and often applied on several fields ( Rizon et al., 2006 ;
Nagarajan and Balasubramanie, 2008 ; Moallem et al., 2011 ). The invariant moment of one image is an important shape feature that will not be changed via rotating or scaling transformation.
Assume that one image (e.g., WBM) has M N dies, the location denoted as f ( x , y ) respectively. Then, the moment m pq order in x-axis direction and the q th order in y-axis direction is: m
Assume that the central coordinate is ^ x , ^ y , the normalized central moment Z pq will become:
Then, seven invariant moments that we used to describe the shape features of one image can be defined. Furthermore, the seven invariant moments can be used as a similarity measure-ment to evaluate the distance between the shapes of two images.
There are two images O 1 and O 2 with the corresponding invariant between O 1 and O 2 is defined as d M O 1 , O 2  X  X  X  3.2.3.2. Pattern clustering by adaptive resonant theory (ART). The adaptive resonance theory (ART) ( Garpenter and Grossberg, 1987a ; 1987b ; Freeman and Skapura, 1991 ) has been applied in many areas including pattern recognition and spatial analysis.
ART derives fundamentally from the adaptive resonant feedback between two layers of neurons. To manage the variety input, ART has the following characteristics: (1) balance on stability and plasticity, (2) match and reset, and (3) balance on search and direct access. ART solves the stability-plasticity dilemma, which is caused by learning new data leading to unstable conditions and loss of data. Several algorithms are derived from the original ART, including ART1 ( Garpenter and Grossberg, 1987a ; 1987b ), ART2 ( Garpenter and Grossberg, 1987b ), ART3 (Garpenter and Grossberg, 1990), ARTMAP ( Grossberg et al., 1992 ), and Fuzzy ARTMAP ( Garpenter and Grossberg, 1990 ). This study employs the ART1 algorithm for WBM clustering, since the input data form a binary map. We transform the two-dimensional WBMs inputs into one-dimensional binary values. The value of each die on the wafer is either 1 (denoted the target bin value) or 0 (otherwise). 4. Pattern clustering evaluation 4.1. Data preparation
Indeed, in order to estimate the validity, we interview the domain experts to identify the twelve different WBM patterns that are commonly appeared in historical data as shown in Fig. 7 . Using these specific patterns extracted from historical data and domain knowledge, it will be easy to systematically design the experiment and evaluate the clustering performance of proposed approach. In experiments, the defect yield range and twelve patterns are decided based on real cases. Without losing general-ity, we use synthetic data to simulate the defect values on the dies to replace the true value to protect the confidentiality of the case company. After identify the twelve different WBM patterns, ten WBMs were duplicated for each of the twelve patterns with different degrees of random effects to generate 120 WBMs with true category data for estimating the validity of the proposed approach. 4.2. Criterion for evaluating the clustering result
Following Wei and Dong (2001) , we used four indexes to evaluate the clustering results to estimate the validity. First, we defined the indexes as follows: 1. Purity: the ratio of the data can be classified correctly. 2. Diversity: the ratio of the true categories can be recognized. 3. Specificity: the number of the involved true categories over 4. Efficiency: the number of true categories over the total number of evolved categories
Efficiency  X  t e T t  X  the total number of classified categories.

We use the following example of five input patterns with two true categories to illustrate the criterion of clustering result as shown in Fig. 8 .

If the ART1 model clusters the input patterns into two groups, 2/2  X  1 and the efficiency is 2/2  X  1. If the ART1 model clusters the input patterns into only one group, the purity is 3/5  X  0.6, the is 1/2  X  0.5. 4.3. WBMs clustering experiments and results
In the experiments design, the relation between the failure rate and random noise sensitivity analysis is considered. We repeated each experiment three times and four indexes, i.e., purity, diversity, specificity, and efficiency, are used to evaluate the cluster performance.

We compare the proposed WBM clustering method with hierarchical clustering of Ward method, nonhierarchical cluster-ing of K -means method, self organizing map (SOM) neural network, spectral cluster method ( Ng et al., 2002 ) and the algorithm proposed by Chien et al. (2002) . In the parameters setting, K -means and spectral cluster method defined the cluster number is twelve, and SOM set the map is 5 5. In the proposed method, we employed the ART1 model as the clustering tool after noise is eliminated. For the setting of ART1 vigilance value, Hsu and Chien (2007) found that the lower the vigilance threshold value, the more patterns are extracted. However, a low vigilance threshold value may cause dissimilar maps to be assigned into the same cluster. Hence, this research fixed the vigilance value 0.75 for ART1 that was derived by a number of numerical analysis of real data. Tables 3 X 7 show the comparison results.

In particular, we find K -means method is stable no matter what the failure rate or the random noise changed. However, the K -means method cannot recognize the category of type (e) and type (i). The Ward method is sensitive to random noise for the performance index of purity. The method proposed by Chien et al. (2002) had high purity and diversity yet with low efficiency. Finally, spectral and SOM do not perform well in the WBMs cases.
As shown in Tables 3 X 7 , no matter what the failure rate was, serious random noise led the ART1 to have more clustering groups. Efficiency will also be decreased when the clustering group increases. In Table 7 , we find our method decreased the number of groups. The possible reason may be attributed to that we modified the ART1 algorithm. Also, the CNN transformation makes the pattern become more clearly rather than the evolution and degeneracy proposed by Chien et al. (2002) .

After the experiment, we summarized four points of our algorithm: 1. This study has good performance on high failure rate with fixed noise effect (i.e., higher purity value, diversity value and lower cluster groups.) 2. High random noise resulted in the increase of clustering group. 3. Diversity always has good performance. 4. The higher random noise, the lower efficiency. 4.4. Experimental summary
Based on the experimental results, we verify that the proposed approach has practical viability. The results showed that, after modifying the ART1 and adding the shape condition of each pattern, we could reduce the clustering groups. However, more empirical studies are necessary to support this claim. In particu-lar, we also find the specific characteristics among the 12 true WBM patterns when applying the proposed ART1: 1. The Type (a) and (b) usually mixed in the same clusters. 2. The Type (j) is hard to distinguish from the other patterns in our model. ART1 model.

The possible reason why the second point that type (j) is hard to distinguish may be that the pattern region of type (j) is too big to discern clearly with respect to other patterns in the same condition. Thus, the ART1 model could not cluster the type (j) easily from others.

Furthermore, we find that the number of created clusters will increase, the specificity will decrease and the purity of each group will increase, when the vigilance value is set high. Therefore, to keep the high purity of each cluster and to decrease the total number of created clusters, one possible approach is to extract the common pattern from each cluster and then cluster the WBMs of common patterns again to combine them into a smaller number of clusters. 5. Conclusion
Due to WBMs are the key evidence to find the root causes which make low CP yield, a systematical WBMs analysis method is necessary. This research not only provides a computational analysis framework for WBMs, but also constructs the pattern diagnosis system via a friendly user interface to help the engi-neers detect the root cause, and records the know-how to identify root cause effectively. This system reduces the time for WBM pattern recognition significantly and is thus implemented in the case company. Furthermore, the developed system can accumu-late root cause diagnosis experience and trouble shooting knowledge.

The proposed WBM clustering method integrated several approaches to enhance the capability for WBM clustering. In this research, we focused on the mixed-type patterns on WBMs. Rather than decomposing the patterns into individual compo-nents or extracting the pattern features, this research used CNN method to eliminate the defect noise and enhance the patterns.
Then, MI and ART1 are employed to analyze the patterns. In particular, this study used twelve different patterns based on domain knowledge and historical defect data to evaluate the clustering performance for validation. Four performance indexes, purity, diversity, specificity, and efficiency were used for evalua-tion. Finally, two experiments, noise and pattern fail rate sensi-tivity, and compared with other cluster methods are considered to find the model character and performance. In the analysis results, we find that the proposed method gets high clustering purity with lower groups than existing methods, and diversity do not have significant difference with other three methods. But the robustness in specificity is not better than that of the K -means and Ward method. Following the engineering conception, purity and diversity are main concerns for pattern detect efficiency.
Future study can be done to enhance specificity issue for the developed solution.
 Acknowledgements This research is partially supported by National Science
Council (NSC100-2628-E-007-017-MY3; NSC101-2811-E-007-009), the Advanced Manufacturing and Service Management Research
Center of National Tsing Hua University (101N2073E1), and Macro-nix International, Ltd. in Taiwan.
 References
