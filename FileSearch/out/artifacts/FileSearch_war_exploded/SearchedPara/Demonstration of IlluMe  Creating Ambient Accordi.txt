 Emotion analysis as well as recommendation technology has drawn a lot attention in the natural language processing research community. The development of fundamental approaches as well as applications has been proposed (Das, 2011; Sarwar et al. , 2001; Zheng et al. , 2010). However, most of them were Internet applications, and to the best knowledge of the authors, these technologies have not yet been involved in the ambient creation. To create an intelligent living space, some researchers utilized the facial expression and speech recognizer to detect emotions (Busso et al. , 2004), but then the accompanied cameras and microphones were necessary. Some researchers tried to use sensors to watch the heart beat and the body temperature of residents to know their current emotion for further applications, but the problem was that users had to wear sensors and it was inconvenient. Instead of watching body signals, we postulate that the communications among people is one of the important factors to influence their emotions. Therefore, we tried to find clues from the textual conversations of the residents in order to detect their psychological state. There are many ways to categorize emotions. Different emotion states were used for experiments in previous research (Bellegarda, 2010). To find suitable categories of emotions, we adopted the three-layered emotion hierarchy proposed by Parrott (2001) 1 . Six emotions are in the first layer, including love, joy, surprise, anger, sadness and fear. The second layer includes 25 emotions, and the third layer includes 135 emotions. Using this hierarchical classification benefits the system. We can categorize emotions from rough to fine granularities and degrade to the upper level when the experimental materials are insufficient. How to map categories in other researches to ours becomes clearer, and annotators have more information when marking their current emotion. 
As to the music, most researchers looked for the emotions in songs or rhythms (Yang and Chen, 2011; Zbikowski, 2011). They classified music into different emotional categories and developed the system to tell what emotion a song might bring to a listener. However, if the aim is to create a comfortable ambient, what songs a person in a certain emotional state wants to listen to becomes the question. A happy user does not always enjoy happy songs, and vice versa. In this case, the technology developed in the previous work did not meet the new requirement. 
IlluMe was designed for a small space personal environment. We expect that users would like to use it because this system could interactively respond to their personal status to provide a feeling of the companion. We view the IlluMe system as a realization of detecting emotions from users X  textual conversations and then recommending the best ambient accordingly. There are three major contributions in the development of the system. First, a corpus for ambient creation according to emotions was constructed. Second, IlluMe demonstrates a way to apply the state of the art technology of emotion analysis and recommendation to create an intelligent living space. Third, along with th e developed technology, several further applications utilizing the components of IlluMe become feasible. The potential working area for IlluMe is home or a small space. The system was designed to fit in with the modern people X  X  life style: programs are installed in users X  personal computer and smart phone. The smart phone functions as the remote control and the music player, while all setting signals are sent out from the personal computer. The smart phone and the personal computer communicate through the wireless network. The only additional hardware requirement is the lighting set. 2.1 System Features 
Emotion Detection Switch: The system detects users X  current emotion according to messenger logs once a preset time period. It is ON/OFF switchable if users do not want the conversations to be recorded or utilized when determining the ambient. 
Auto Ambient Setting: The system sets the current ambient by a specific combination of a song and a light group which corresponds to the emotion or represents a special atmosphere. 
Manual Ambient Adjustment: IlluMe provides a friendly user interface to change the settings of music and lighting at any time. 
Personal Preference Learning: When users change the settings, the new ones are recorded. IlluMe learns the preference and then performs the user adaptation. After a period of time users will have their unique ambient creating system. Unlimited Melodies and Rich Light Colors: Users can add their songs in the smart phone for selection at any time. The learning process will help propose the new songs to create ambient later. 
Instant State Update: IlluMe watches the user input from messenger when the software is on. Therefore, it is able to change the music and lighting according to the detected emotion within a preset time period and users will feel like the environment is interacting with them. 2.2 System Framework Figure 1 demonstrates the system framework of IlluMe. The system automatically watches the User Messages from messenger logs. The Emotion Analysis component detects the emotion of users, while the Ambient Learning Model determines the music and lighting accordingly, considering also the Personal Information of users. 
After the lights are on and the music is played, the user can change the settings they are not satisfying. A smart phone ( Mobile Device ) is used to change the settings, w ith two controllers on it: the Preference Controller and the Ambient Controller . The former takes the User Input for new settings, and then the music and lighting are changed by the latter. At the same time, the Preference Controller also sends the new settings to Ambient Learning Model to be recorded for user adaptation when creating the next ambient. The Emotion Analysis Component and Ambient Learning Model are two programs in a personal computer, and the Personal Info is saved in the personal computer, too. ANT wireless personal network protocol (Dynastream) is adopted to send the control signals to the Lighting . The LED lighting board is utilized to implement the Lighting of 65,536 colors. 2.3 Operation Flowchart of User Interface The IlluMe system provides a user interface to change the settings by a smart phone ( Mobile Device ), functioning as a remote control. Users can select the location of music or the lighting, e.g. the living room or the bedroom, and the control mode, i.e. manual or automatic. In the manual mode, users can set the color of a specific light; in the automatic mode, users select an emotional color set or a desired atmosphere for the lighting. Figure 2 shows the operational flow of the user interface. 2.4 Ambient Lighting and Music Playing To design the ambient lighting, one has to take LED array board, controlling mode and the light-mixing effect of the lampshade into consideration. The LED lamp should sprinkle the LED components of red, cyan, green, white and orange lights equally onto the LED array board, so as to achieve uniform distribution. The controlling module distinguishes each lamp by its own code to modify the brightness of different colored LEDs within. 
As the LED lighting changes its color according to the controlling signals from the remote controller, the system transfer appropriate RF signals from the user X  X  personal computer to the ANT board, and then the ANT board controls the LED lighting board to change the color of lights. 
Music is broadcasted according to the detected emotional state. The broadcasting function and the controlling function are both realized by the software in the smart phone. Music is broadcasted directly through the phone, which conforms to the habits of modern people. Figure 3 shows the illustration of the usage of IlluMe. The emotion analysis that IlluMe performed is to find the emotions that texts in messenger logs bear in order to create a comfort ambient by sound and lighting accordingly. To achieve this, the system needs to understand the Internet language first, and then detect emotions and categorize them. The system works on the Chinese chatting environment and analyzes Chinese texts to detect emotions. The materials, approaches, and preliminary results in the development phase are described in this section. 3.1 Experimental Materials Two dictionaries, the Chinese sentiment dictionary NTUSD (Ku and Chen, 2007) and the Chinese emotion dictionary (Lin et al. , 2008), were adopted for detecting emotions. The former categorized sentiment words into positive and negative, while the latter into eight emotion types: awesome, heartwarming, surprising, sad, useful, happy, boring, and angry. Notice that these eight emotion types appeared in Yahoo! News Taiwan in the year 2008 and not all of them were general emotion states. Therefore, we tried to find Lin X  X  emotion categories in Parrott X  X  emotion hierarchy before using this dictionary. Those could not be found were categorized in the Other class. 
Messenger logs were used as the source to detect emotions. We collected texts from Yahoo! Messenger and MSN Messenger logs of 8 annotators. When the installed collecting program in their computers was on, it ran as a service and continuously logged th eir messages. Whenever there was at least one new message, once an hour the collecting program would pop up the menu and ask them to annotate the current emotion together with the preferred settings of the music and lighting. There were 3,290 songs, 15 emotional lighting colors and 6 atmospheres for selection. When selecting the settings of lighting, a full-screen colored photo would be displayed to help annotators make their decisions. A total of 150 records are annotated for experiments and statistics are shown in Table 1. 3.2 Interpretation of Zhuyin Wen When processing Internet Chinese texts, IlluMe transformed messenger logs and sentiment dictionaries into zhuyin (Su, 2003) before looking for emotions 2 . There were many reasons to do this. Zhuyin Wen (  X  X  X  X  ) is one of many creative uses of writing systems in the Internet language. As Blakeman (2004) found in his study of English, Internet language is frau ght with initializations. However, as to the traditional Chinese, both Wikipedia and Zhang and Dai (2006) indicated that stylized initials and stylized numbers are rarely used in Taiwan. Su reported that the most popular type of creative use of writing systems is  X  X huyin Wen X  (  X  X  X  X  ). In  X  X huyin Wen X  the complete phonetic representation of a character is reduced to a consonant, or sometimes a vowel. This creative use appeared commonly in the collected conversations. Generally we had to figure out the missing vowels to understand the word, but in our system a reversed approach (dropping vowels) was adopted to make sure the system did not miss any possible match of dictionary terms observed in the conversations. 
When messenger users typed characters by their phonetics (consonants and vowels), very often they selected the wrong one from candidates of the same pronunciation, or they were just too lazy to select so the writing system chose the default candidate for them. In these cases, the system could not find a match because of wrong composite characters. Transforming characters in both dictionaries and conversations into their zhuyin representations before detecting emotions also help recover this kind of errors. 3.3 Emotion Detection from Texts Section 3.2 shows how the system dealt with the error prone Internet texts and found the dictionaries terms. Ku and Chen X  X  (2007) approach for calculating sentiment scores was then adopted to give scores to these terms. The scores of terms of different emotional categories were summed up and the emotion category of the highest score was selected as the detected emotion. The Ambient Learning Model takes the detected emotion and selects the corresponding music and lighting by the Na X ve Bayes classifier trained by the annotated materials. 3.4 Experiment and Preliminary Results Table 2 shows that using enhanced NTUSD (an augmented version of NTUSD) together with zhuyin transformation achie ves the best results for emotion classification (positive/negative). 
Ku (2008) reported the set precision of their approach was 0.489 when texts were categorized into positive, neutral and negative. Though they had one additional neutral category, our system achieved the precision of 0.620 when processing the noisy Internet texts without word segmentation and part of speech tagging, which was satisfactory. 
Because IlluMe would always recommend a new or unchanged ambient setting, it would always find the closest emotion category of the user X  X  current emotion. In other words, the chatting content would always be connected to one of six emotion categories, so precision is the best metric to evaluate the performance of the system. The micro-average precision of the emotion detection was 0.207, while the macro-average precision was 0.338. Bellegarda reported that his best f-measure was 0.340 also for 6 categories. Notice that the categories in Lin X  X  Chinese emotional dictionary were not identical to ours and hence we could not find terms for some categories in it. Therefore, though Bellegarda X  X  and our results were done on different datasets and evaluated by different metrics, considering our system suffered for the lack of terms in some categories and the ambiguous texts from the creative writing, the performance was considered acceptable. 
For the ambient recommendation, the micro-average precision of selecting the settings of lighting according to the detected emotion was 0.441 for 15 color sets and 0.461 for 6 atmospheres. 3.5 Ambient Learning Function Because bringing up the settings to users is like a behavior of recommendation, we adopted the concept of collaborative filtering to design the function of the Ambient Learning Model . In the early stage of using IlluMe, it proposes the most frequently selected settings, that is, the choice of a group of people in the specific emotional state. If the user is connected to the Internet, the user experience will be transfe rred back to the servers to help recommend a better ambient to other users. 
The user experience optimization was feasible in this system because of the use of the smart phone, and this function was also implemented. As the users update the settings, the system knows their preference. In the later stage of using IlluMe, the Ambient Learning Model considers the preference of both the individual and the group to create a unique ambient for each user. Through the work we aim to apply the language technology to redefine the concept of a small house or working space. They should be a family-like existence which possesses th e intellectual capacity to observe human behavior and emotion, and create consoling spaces according to the residents X  different status. Therefore we implemented emotion analysis technique to equip a space with the ability to observe the status of its residents and interact with them accordingly. The instant interior lightings and music change can be viewed as a new form of  X  X onversation X . Residents can not only take the ambient provided by IlluMe, but can also give feedbacks. The concept of collaborative filtering was also implemented as we viewed the proposing of ambient as a kind of recommendation. 
Through the demonstration of the IlluMe system, we hope to show anothe r way to apply language technology in life and retrieve the positive and relaxing atmosphere to rebuild our sense of trust and safety toward space, and finally recollect the long-lost attachment toward it. We will continue collecting annotated materials and user feedbacks for learning, and make the materials a corpus for the research community. Facebook will be a source of text collection to gather more complete personal conversations for emoti on detection. Making the IlluMe components real products like the home lighting system, the intelligent table lamp, or the music album promoter is also a future plan. As demonstrating the IlluMe system by our original model house may be difficult in transportation and it may need a large space for demonstration, we will demonstrate the lightings by several table lamps, in which the LED lighting board resides. Other software will be performed on the smart phone and the personal computer. 5.1 Demonstration Outline There are three purposes of the demonstration: first, to show how we apply the emotion analysis and recommendation technique in an ambient creating system; second, to illustrate actual and live operation of the system to the potential users; third, to show the annotation process of the experiment materials and the underlying algorithms for those interested in the technical details. 
Potential users might be interested in how the system will work if they have it in their personal computers and smart phones. Therefore, we demonstrate the whole IlluMe system with the actual music and lighting. Users can type Chinese words in messengers from the personal computer, and then the IlluMe system will change the music and lighting according to the proposed settings in a short time. The user can also control the music and lighting from the interface by the smart phone. 
In addition to demonstrating the functionality of the system, we will also provide accompanying visual aids that illustrate the underlying algorithms and the technical details. For example, zhuyin, terms found in the dictionaries, emotion scores, the detected emotion and the suggested settings. Research of this paper was partially supported by National Science Council, Taiwan, under the contract NSC100-2218-E-224-013-. 
