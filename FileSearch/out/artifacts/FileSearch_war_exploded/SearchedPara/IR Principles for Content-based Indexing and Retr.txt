 In this paper, we explore the concept of a  X  X ibrary of brain images X , which implies not only a repository of brain images, but also efficient search and retrieval mechanisms that are based on models derived from IR practice. As a preliminary study, we have worked with a collection of functional MRI brain images assembled in the study of several distinct cogni-tive tasks. We adapt several classical IR methods (inverted indexing, TFIDF and Latent Semantic Indexing(LSI)) to content-based brain image retrieval. Our results show that efficient and accurate retrieva l of brain images is possible, and that representations motivated by the IR perspective are somewhat more effective than are methods based on re-taining the full image information.
 Categories and Subject Descriptors: H.3.1 [Content Analysis and Indexing]; H.3.3 [Information Search and Re-trieval]; H.3.7 [Digital Libraries]; E.2 [Data Storage Repre-sentations]; I.4 [Image Processing and Computer Vision] General Terms: Algorithms, Measurement, Performance, Reliability, Experimentation Keywords: fMRI, functional brain image, content-based retrieval, inverted files, TFIDF, Latent Semantic Indexing fMRI (functional Magnetic Resonance Imaging) [3] is a technique used to  X  X onitor X  brain activities. In this tech-nique, the intensity of an image element (it is called a voxel in 3D images) is related to the level of blood oxygen in the corresponding region. When a cognitive process involves a specific brain region, more oxygen is brought in by blood flow, soon after, and this change will brighten the brain re-gion in the image. In a typical fMRI experiment, the exper-imental subject is assigned a certain type of cognitive task at some scheduled moments. A 3D brain scan is made every few seconds, during each experimental session. By compar-ing the intensities of voxels  X  X uring task X  and  X  X eing idle X , we can estimate which brain regions are  X  X ctivated X  by the cognitive process.

As the size of the (world) data corpus increases, efficient data sharing schemes for fMRI data become more and more desirable. Data sharing, of course, provides a larger database for testing and validating analytical algorithms. More im-portantly, different research ers may find different value in the same data, discovering similarities in the brain X  X  activ-ity, when the cognitive tasks do not seem to be related, based on psychological reasoning alone.

In this paper, we report some investigations of content-based indexing of fMRI images, which is validated by using condition labels . In other words, when a  X  X uery X  fMRI im-age is presented, we ask whether we can return images that represent the same, or similar, cognitive processes. The po-tential applications include, but are not limited to, the fol-lowing: 1) Helping researchers find similar studies and re-lated research work. 2) Helping researchers discover hidden similarities among superficially different studies. 3) Helping doctors diagnose brain disorders, by looking at the clinical history of persons with similar fMRI patterns.

With this correspondence in mind, we show that using the classical information retrieval techniques of inverted in-dexing (applied not to terms, but to  X  X ctivated voxels X ), retrieval by condition can be implemented effectively and efficiently. The inverted index provides the infrastructure for many different Information Retrieval algorithms. In this note we examine two of the most basic, TFIDF similarity [7] and LSI representation and similarity [2].
The most widely used mathematical method for analy-sis of fMRI is the general linear model (GLM)[3]. In the GLM, the time series of intensity values at each voxel is modeled as a linear combination of explanatory variables and Gaussian noise. Each explanatory variable is gener-ated by convolving the stimulus time series with a specific impulse response function, referred to as hemodynamic re-sponse function (HRF). The mean and variance of the weight (in the regression) of each explanatory variable is calculated using a linear regression. By comparing each weight with its estimated variance one can estimate the (Fisher) t-statistic, which will be referred to as the t-value of the weight. This is a measure of the degree to which the activation level is influenced by the corresponding stimulus.
We propose a two-stage feature selection method. The first stage is to build  X  X ctivation maps X , in which the value at each voxel indicates the level of activation of the voxel. We currently use t-values generated by the GLM. The sec-ond stage selects the  X  X ost important X  voxels. There is no consensus on what t-value should be considered  X  X arge enough X , so here we simply take that 1% of the voxels with largest t-values.
Our retrieval model closely parallels classical text retrieval, with these correspondences:
With this similarity in mind, we build both forward and inverted indices. In the forward index, each entry is an image, with a link to its activated voxels. In the inverted index, each entry is a unique voxel (in the standard brain), pointing to a list of brain images in which that voxel is activated.
We investigate three measures: 1) Overlap : the datasets are ranked according to the overlap of their activated voxels with those in the query image. 2) Latent Semantic Index-ing (LSI): LSI [2] is a technique to automatically discover similarities between terms and documents, and to apply this information to information retrieval. As noted, 1% of the voxels, those with largest t-values are selected to be  X  X cti-vated X . If a voxel is activated, the corresponding value in the term/voxel vector is set to 1, otherwise it is set to 0. The standard routine of LSI is applied after that. 3) TFIDF : Under TFIDF [7] the weight of a term is the product of two parts: TF(term frequency) and IDF (inverse document fre-quency). In our scenario, we set TF to be the t-value, while DF is naturally translated as the number of images in which a voxel is activated.
In this preliminary research, we use data from 5 different experiments. The list of experiments and brief descriptions are shown in Table 1.

Our testing scheme is built on an information retrieval framework. We use every image as query, and evaluate the performance of our method by checking the returned ranked lists. A retrieved image is considered  X  X elevant X  to the query only if they are both for the same experimental condition. As noted, different experiments have different numbers of datasets. In this case, average precision will not behave as one might like, and we are suspicious of using it. Instead,we use the  X  X rea under the ROC X  [5] (for the sake of simplicity, we call this  X  X OC area X ) to evaluate a retrieval method.
In Table 2 we list the average ROC area for 4 different similarity measures. We regard  X  X osine X  as the baseline sys-tem.  X  X osine X  takes whole t-maps as big vectors where the t-value at each voxel is a component; the similarity between two t-maps is the cosine of the angle between these vectors.
Except for the baseline system, all methods select only 1% of the voxels to be labeled activated. Using the Bonfer-roni correction for multiple comparisons, almost all of the pair-wise differences in Table 2 are significant at the 95% confidence level. The only exception is the pair TFIDF and Overlap. This lack of difference suggests that perhaps mov-ing from binarized voxels to weighted voxels will not be an important factor in retrieval.

We see that all methods based on thresholded  X  X -maps X  perform significantly better than the baseline method. That provides additional support for the essentially arbitrary choice of thresholding by 1%. As the threshold is lowered, we are more likely to be including random noise, which will hurt the quality of retrieval, rather than improving it. In ad-dition, this thresholding approach makes inverted indexing quite efficient.

The performance of LSI is known to depend on the number of components retained in indexing. In this study we find that the average ROC area reaches its maximum when we consider only the first 10 components.
In this preliminary study, we show that efficient fMRI retrieval can be implemented by adapting classical textual retrieval techniques and using inverted indexing. The results show that effective retrieval by condition is possible.
This work is supported by NSF grant ITR 0118760. The authors are grateful to Ali Shokoufandeh and Sven Dickin-son for their helpful advice and encouragement.
