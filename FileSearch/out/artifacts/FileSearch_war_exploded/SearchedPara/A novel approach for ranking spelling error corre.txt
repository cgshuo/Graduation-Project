 Tahira Naseem  X  Sarmad Hussain Abstract This paper presents a scheme for ranking of spelling error corrections for Urdu. Conventionally spell-checking techniques do not provide any explicit ranking mechanism. Ranking is either implicit in the correction algorithm or cor-rections are not ranked at all. The research presented in this paper shows that for Urdu, phonetic similarity between the corrections and the erroneous word can serve as a useful parameter for ranking the corrections. This combined with a new technique Shapex that uses visual similarity of characters for ranking gives an improvement of 23% in the accuracy of the one-best match compared to the result obtained when the ranking is done on the basis of word frequencies only. Keywords Correction ranking  X  Soundex  X  Shapex  X  Spelling error correction  X  Urdu 1 Introduction The problem of automatic spell checking is not new. Research in this area started as early as the 1960s (Damerau 1964 ) and many different techniques for spellchecking have been proposed since then. Some of these techniques exploit general spelling error trends while others use the phonetics of the misspelled word to find likely correct words. In recent years, statistical techniques, which are not explicitly based on error trends but learn these trends when trained on large amounts of data, have gained more popularity (Kukich 1992 ).

The process of spell checking can generally be divided into three steps: (1) error detection, (2) error correction, and (3) ranking. In the error detection step the validity of a word in a language is verified and invalid words are identified as spelling errors; in the error correction step valid candidate words from the dictionary are selected as corrections for the misspelled word; in the ranking step the selected corrections are sorted in decreasing order of their likelihood of being the intended word. This paper focuses on the ranking mechanisms.

Different spell-checking techniques provide ranking of different levels. Some of these techniques like single edit distance technique (Damerau 1964 ), Soundex (Erikson 1997 ; Zobel and Dart 1995 ) or other similarity code based techniques like skeleton key, omission key and Plato key (Erikson 1997 ; Kukich 1992 ) provide no ranking at all. Other techniques like multiple edit distance, weighted edit distance, Phonix (Erikson 1997 ; Zobel and Dart 1995 ) and N-grams based techniques (Zobel and Dart 1995 ) rank the corrections broadly into two or three levels; if more than one corrections fall into one level they are not further ranked within that level. Statistical techniques, on the other hand, provide very fine ranking of the corrections based on probability scores (Kernighan et al. 1990 ; Brill and Moore 2000 ; Toutanova and Moore 2002 ). Though effective, statistical techniques cannot be used for under resourced languages where representative error corpora are not available. Thus these languages, like Urdu, must resort to rule based techniques.

In all of the above-mentioned techniques ranking is implicit. Very few techniques provide an explicit mechanism for ranking, e.g. an algorithm developed by (Kann et al. 1998 ) for spell-checking Swedish text, used the edit-distance technique for correction and a refined edit-distance technique along with word frequencies for ranking.

The work presented here aims to provide an explicit ranking mechanism for ranking of error corrections in Urdu.

In the past, many studies have been performed to analyze the types and the trends of spelling errors in English. The most notable among these are the studies performed by Damerau ( 1964 ) and Peterson ( 1986 ). According to these studies Spelling errors are generally divided into two types, typographic errors and cognitive errors.
Typographic errors occur when the correct spelling of the word is known but the word is mistyped by mistake. These errors are mostly related to the keyboard and therefore do not follow any linguistic criteria. In a study of errors in English, referred to by Kukich ( 1992 ), 58% of the errors involved adjacent typewriter keys.
Cognitive errors (also called orthographic errors) occur when the correct spellings of the word are not known. In the case of cognitive errors, the pronunciation of misspelled word is the same or similar to the pronunciation of the intended correct word. (e.g., receive  X  receive, abyss  X  abiss etc.).

A study by Damerau ( 1964 ) shows that over 80% of errors fall into one of the following four categories: (1) Single letter insertion; e.g. typing  X  X cress X  for  X  X ress X , (2) Single letter deletion, e.g. typing  X  X cress X  for  X  X ctress X , (3) Single letter substitution, e.g. typing  X  X cress X  for  X  X cross X , and (4) Transposition of two adjacent letters, e.g. typing  X  X cress X  for  X  X aress X 
This assertion was confirmed later by a number of studies, including that conducted by Peterson ( 1986 ). Errors of these types are also called single-errors and the four operations are called single edit operations. The errors, produced by more than one of these operations, are called multi-errors (Kukich 1992 ).

A study of spelling error trends in Urdu text showed that shape similarity and sound similarity of letters play an important role in the formation of spelling mistakes. This study revealed that about 50% of the single-errors are either phonetically or visually similar to the actual intended word. On the basis of these observations a ranking mechanism is designed that exploits both these factors. In addition, it also uses word frequencies to baseline ranking accuracy.

In the studies of spelling errors in English, the role of sound similarity of letters as a factor affecting error trends has often been observed (Kukich 1992 ). But the shape similarity of letters, although used for optical character recognition (OCR) error correction, has never been identified and exploited as a factor playing any role in patterns of human made spelling errors. This is probably because of the fact that there are not many letters in Latin script that are visually similar. On the other hand in Arabic script (the script used for writing Urdu) there are many groups of letters in which the letters have the same basic form and differ only in diacritical marks or number or placement of dots. Since the shapes of letters are script dependent, the scheme presented here of exploiting the feature of shape similarity can also be used for other Arabic script based languages. 2 Methodology A study is performed to explore the spelling error trends in Urdu text. Based on the results of this study a spelling error correction mechanism is designed which retrieves the corrections using edit distance technique and ranks the corrections on the basis of their word frequencies and their similarity to the error in terms of sound and shape. 2.1 A study of spelling error trends in Urdu The data used for the study was collected from two sources, Urdu newspapers (Nawa-e-Waqt and Jang) and Urdu term papers typed by graduate and undergrad-uate university students. The data was available in the form of hard copies and was manually spell checked. The results of the study are shown in Table 1 .

The statistics from the two sources are entered separately because the trends they exhibit are slightly different from each other. The analysis of single-errors is given only. These errors are further divided into the categories of insertion, deletion, substitution and transposition errors. For each of these categories the number of errors that were visually or phonetically similar to the actual corrections is also given. In some cases the errors could justifiably be assigned to any of the two categories, i.e. they were both visually and phonetically similar to the intended word. In such cases one of the two factors was always seen to be clearly dominating and the error was assigned to that category. The bottom row of the table shows the total number of errors analyzed including both single-errors and multi-errors.
The results from the two sources are largely similar except that the ratio of phonetically similar errors in the term-papers text is much higher than in the newspapers text. This is because sound based errors are mainly cognitive errors, and there is little chance that a professional writer at a newspaper would make cognitive mistakes.

In the texts from both sources, the ratio of single-errors is above 90%. This matches with the results reported by Peterson ( 1986 ) for English.

The data also shows that about 50% of the errors are either visually or phonetically similar to the corresponding correct words. The examples of phonetically similar shape-similarity based errors is much higher. About one third of the single-errors are of this type. These errors are mostly single letter substitutions. This can also account for the greater percentage (about 47%) of substitution errors as compared to the percentages (26.9% and 40%) reported by Peterson ( 1986 ) for English. As for English, visual similarity has never been reported to play any role in error trends.
Shape-similarity based errors cannot be cognitive in nature. There is little likelihood that a person typing the text of a language does not know the correct shapes of the letters in the language alphabet. Therefore, there should be some other explanation for this type of errors. In the authors X  view the errors of this kind arise mainly for two reasons. First, the professional typists, when given a typing assignment, are provided with a hand-written draft of the text that they have to copy. In this situation the typists tend to type the text as it looks without giving much attention to its meaning and as a result visually similar letters are confused with each other. Second, when a mistake of this kind is made either due to the above-mentioned reason or for some other reason like keyboard adjacencies, it goes undetected by the person typing because of its visual similarity.

It was also observed that in Urdu word initial errors are as common as are word medial or final errors. Especially word initial omission errors (  X   X   X  X   X   X   X   X   X   X  X   X   X  ,  X   X   X  ) are very common. Moreover phonetics based are word medially.

The results of this study, on one hand, show that sounds and shapes of letters play a significant role in the formation of spelling mistakes, and on the other hand they also show that these factors are not strong enough to be used for correction retrieval as only half of the errors are of these types. For this reason the edit distance technique is used for correction retrieval. 2.2 Correction retrieval The Single Edit Distance technique is used in reverse i.e. single edit operations are applied on an error and the resultant strings are tested for validity (Damerau 1964 ). The bigram validity test is used for efficiently checking the validity of the string (Kann et al. 1998 ). A bigram binary matrix is built such that the value at i th row and j th column in the matrix indicates whether i th character followed by j th character forms a valid bigram in Urdu. For all these bigrams the frequency of their occurrence in a 112,481 words lexicon 1 is computed. It is found that 830 out of a total of 2,025 bigrams 2 of Urdu are invalid i.e. they never occurred in the lexicon. After applying an edit operation on a string, its bigrams are first tested for validity, if all the bigrams of the string pass the validity test then the string is searched for in the dictionary. If it is found in the dictionary, it is added to the list of corrections. 2.3 Ranking Ranking is done at two levels. In the first level, the corrections are broadly ranked on the basis of sound and shape similarity. In the second level, further fine-tuning of ranking within each rank from the first level is done on the basis of the unigram frequencies of the words. These frequencies are calculated by counting the number of occurrences of the words in a corpus of 1.7 million words. This corpus comprised of text taken from the books 3 of Iqbal Academy and Feroz Sons publishers. 2.3.1 Sound similarity based ranking (Soundex) A variation of the Soundex algorithm is used to capture the sound similarity between the error and the suggested corrections. Soundex was the first phonetic string-matching algorithm developed and patented by (Odell and Russell 1918 ). It was originally developed for name matching, and reportedly does not perform very well for spelling error corrections retrieval (Stanier 1990 ). The idea was to assign common codes to similar sounding names. The length of the code is four and it is of letter of the word. For each subsequent consonant of the word, a digit is concatenated at the end of the code. All vowels and duplicate letters are ignored. The letters h , w and y are also ignored. If the code exceeds the maximum length, extra characters are ignored. If the length of the code is less than 4, zeroes are concatenated at the end. The digits assigned to the different letters for English in the original Soundex algorithm are shown in Table 2 .

The following are some sample codes generated using the letter to digit mapping given in Table 2 :
Robert  X  R163 Robin  X  R150 (an extra 0 is appended in the end to complete 3 digits) Smith  X  S530 Smyth  X  S530
Many variations of the basic Soundex algorithm have been tested by researchers including (Holmes and McCabe 2002 ). Some of these variations are: changing the code length, assigning a code to the first letter of the string and making N-gram substitutions before code assignment.
 To use Soundex for Urdu, two variations on the original algorithm are made. These are: 1. First letter code assignment
Unlike the original Soundex algorithm, a numeric code is assigned to the first letter of the word because it is observed that in Urdu spelling errors at initial position are as common as they are at any other position in the word. 2. Increased number of letter groups
Another variation is the number of letter groups to which codes are assigned. In the phonemic inventory of Urdu the total number of consonantal sounds is 44, which are realized by a set of 36 basic consonantal characters and one consonantal modifier character (Hussain 2004 ). Dividing these characters into 10 groups and assigning the codes 0 X 9, results in combining unrelated characters into same group. To avoid this problem hexadecimal codes are used giving 16 letter groups (Hodge and Austin 2003 ).
No changes apart from these two changes are made in the basic Soundex algorithm. The code length remains 4. Vowels are ignored during code assignment. In Urdu identifying long vowels is difficult because the letters  X  ,  X  and  X  that are used as long vowels are also used as consonants in certain contexts (Hussain and Karamat 2003 ). To identify their behavior syllabification is required, but in Urdu a word can be syllabified only if it is marked with diacritics. Generally words are not marked with diacritics. Therefore only a rough guess may be made about the situation of these long vowels. To do this and also to perform some other context based letter substitutions, the string is normalized before code assignment. During normalization the default behavior of  X  and  X  is of vowel and the default behavior of  X  is of consonant. Rules are applied to change this behavior wherever required on the basis of their context. The normalization rules are described below: 1. Many words, borrowed from Arabic or Persian, have an ending  X   X   X  /h/ but this is 2. In Urdu  X  /  X  / represents the aspiration of the consonant preceding it and 3.  X   X   X / A / always behaves like vowels except in word initial position, where it 4.  X  / A :/ is a stylistic way of writing double  X  / A /, and two  X  / A /s cannot occur 5. The character  X  /i/ when occurs word initially or is surrounded by an  X  / A / or/and 6. The character  X  /v/ when occurs word initially or is followed by an  X  / A /ora  X  /i
The first and the last two rules are mutually dependent therefore they are applied consonantal. In the second pass the behavior of  X  /o/ is determined on the basis of the vowels identified in the first pass, then it is considered a consonant otherwise it is considered a vowel. The behavior of  X  /i/ is also reviewed in the second pass because due to the change in the status of  X  /h / some more consonantal  X  /i/s can be identified. consonant and the  X  /j/ in  X   X   X   X  /s A .j A / would be considered as a vowel.
After normalization, a Soundex code is assigned to the string. Table 4 shows the code assignment for Soundex. The letters having the same or similar sounds are assigned the same codes.

In order to use the Soundex algorithm for ranking, the Soundex codes are generated for the error and for all the corrections. Those corrections whose Soundex code matches the Soundex code of the error are considered more likely candidates. In the case of substitution-based correction the Soundex code of only the substituted character is compared with the Soundex code of the original character in its place and if the two codes are same the words are considered phonetically similar. 2.3.2 Shape similarity based ranking (Shapex) To make use of shape similarity as a ranking parameter codes are assigned to the letters of the Urdu alphabet on the basis of their shapes. This technique is given the name Shapex. Table 5 shows the Shapex codes 4 assigned to the letters of the Urdu alphabet.

Urdu is written in Arabic script which is cursive. For this reason the same letter can have multiple shapes depending upon its position in a ligature and the surrounding letters (Aliprand et al. 2003 ). Most of the Shapex codes shown in Table 5 are assigned on the basis of the similarity in the medial or initial shapes of the letters. Groups 3, 4, 5, 6, 8 and 9 are comprised of the letters that are basically similar and remain so in any position in a ligature. The rest of the groups are such that the letters of a group look similar in initial and medial positions but in isolation or in ligature final position their shapes may be different from each other. For example Table 6 shows the shapes of the characters in group 7 in different positions in a ligature. First column contains the isolated shape of the letter.

Shapex based ranking is applied only on substitution errors because the study of spelling errors in Urdu showed that most shape similarity based errors are substitution errors (see Table 1 ). Like Soundex based ranking, if more than one corrections match the error, further ranking is done on the basis of frequency. 2.3.3 Combining Shapex and Soundex Soundex and Shapex techniques of ranking are tested both in isolation as well as in combination. In the combined approach three levels of ranking are defined. Rank 1: Both Shapex and Soundex codes match Rank 2: Either Shapex or Soundex code matches Rank 3: Neither Shapex nor Soundex code matches The corrections in all the ranks are independently sorted on their frequencies. Then the top 12 corrections are selected such that first all corrections from Rank 1 are included and if they are less than 12 then the corrections from Rank 2 are included and so on until the number of corrections reaches 12 or the correction list is exhausted. 3 Results The ranking algorithm is tested on a set of 280 errors with different combinations of the above-mentioned ranking approaches. The error set used for testing is different from the one used for the study described in Sect. 2.1. These errors are collected from the Urdu corpus of 1.7 million words already mentioned in the beginning of Sect. 2.3. The text was spellchecked to find errors. The corrections for these errors were specified manually based on their contexts. The results of the test are given in Table 7 .

The first column in Table 7 shows the percentage of the errors for which the intended word was at first position in the list of corrections. The second and the third columns show the percentage of the errors for which the intended word was among the first 5 and first 10 words of the corrections list respectively. The fourth column shows the percentage of the errors for which corrections list contained the intended correct word. In the last column is given the average size of the result set (corrections list). 4 Discussion The results show that a combination of both sound-based and shape-based ranking approaches give a greater number of first place matches compared to any of the ranking techniques separately. The second and third rows in Table 7 show that both Soundex and Shapex improve the top one ranking by approximately equal percentage i.e. about 10%. The last row, that contains the result of the combination of the two schemes, shows that their effect adds up when they are combined. From this it can be concluded that Shapex and Soundex address mutually exclusive sets of errors and therefore can be safely combined together. The overall effect of their combination is an improvement of 23% in the number of first place matches.
The second column of the table shows a relatively small (3%) decrease in the top-five accuracy. This is basically due to the fact that both Soundex and Shapex can at times assign the same code to very different strings. As a result, relatively less similar corrections find their way into the top-five ranks. For the Shapex algorithm this can happen when letters from groups 0, 1, 2 or 7 occur at word final position. Because the codes are basically assigned on the basis of word medial or initial shapes. This can be avoided by not assigning Shapex codes to the letters of these groups when they occur word finally. In Soundex a wrong match occurs when vowels are not correctly identified or when the error is at the end of a long string and goes beyond the reach of the four-letter Soundex code. Moreover, there is always a chance that the error is not sound or shape based but has occurred for some other reason like keyboard adjacencies.

Although the Shapex algorithm presented here has performed reasonably well, there is much room for improvements. One possible improvement can be to consider the position of a character in a ligature when assigning a code because in Arabic script the shapes of a single character in ligature initial, medial and final positions can be significantly different from each other especially in the case of joining characters. Another thing that could be tested is the use of Shapex for corrections retrieval. Though using Shapex alone for correctionretrieval may not be a good idea but it may be possible to use it in combination with some other techniques (like Single Edit Distance). Interestingly duringthe study ofUrduerrorsitwas found thatsomeofthemultiple errors d  X  normalized before Shapex code assignment i.e. apt letter-group substitutions are made as is done for Soundex, the visual similarity between such strings can be captured. 5 Conclusion The work presented here shows that the first guess accuracy of Urdu spellchecker can be improved significantly by exploiting the features of sound and shape similarity. A variation of the Soundex algorithm for Urdu is presented. Also a new algorithm, Shapex, is introduced, which is script dependent and can also be used for other Arabic script based languages.
 References
