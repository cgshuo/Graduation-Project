 We present SportSense , a system for interactive sports video retrieval using sketch-based motion queries. SportSense is based on sports videos of games, enriched with an over-lay of metadata that incorporates spatio-temporal informa-tion about various events and movements. We present how sketch-based motion queries are formulated and executed, as well as the use of various intuitive input interfaces to ac-quire the query object. The system uses spatio-temporal index structures to facilitate interactive response times. H.3.3 [ Information Storage And Retrieval ]: Informa-tion Search and Retrieval; H.5.2 [ Information Interfaces and Presentation ]: User Interfaces query-by-sketch; motion queries; video search; content-based information retrieval
Game analysis addresses the systematic analysis of the tactical behavior of players in a team and has increasingly become a major activity in various team sports. The sys-tems currently in use rely on player and ball movements ex-tracted either purely manually such as in [ 1], from broadcast videos such as in [2 , 3] or from on-the-field cameras, specif-ically deployed to assist in providing tracking information such as in [4 , 5, 6, 7, 8, 9]. Systems that rely on broadcast videos for the extraction of location information have the main limitation of only extracting what the camera and its recording angle has to offer. In other words, while a camera is showing two or three player actions, the rest of the mo-tion activity on the rest of the field is ignored, so they are not giving the whole picture. On the other hand, systems relying on dedicated on-the-field cameras provide a holistic view of the entire field, however, the main limiting factors are the need for deploying these HD cameras at highly ele-vated heights in the stadium, and in certain situations when players come too close to each other (e.g., in goal celebra-tions, corner kicks), they cannot be properly distinguished anymore. Recently, various light-weight wireless sensor de-vices explicitly designed for the sports domain have become available [10 , 11]. They are expected to help in easily cap-turing accurate tracking information of team members and also in facilitating the automated extraction of major events. Thus, future research is expected to focus more on the re-trieval and automated analysis of sports data rather than how to track players and ball movements either manually or by using object detection and recognition techniques.
In this paper, we present SportSense , a novel system that enables sketch-based motion queries in sports videos. Users canfreelysketchapathshowingthemovementofasingle player and/or the ball  X  or a sequence of movements and the interaction of different players including several consecutive events. Results are displayed in the form of video snippets ordered according to the degree in which they match the sketched motion path. Users can also interact with the sys-tem by retrospectively selecting a cascade of events, along with sketches of regions in which they happened. SportSense uses spatial databases to store tracking metadata in order to leverage the spatial query features needed for providing interactive response times.
In the following, we present the SportSense approach that facilitates sketch-based motion queries in sports videos. A screenshot of the SportSense system is depicted in Figure 1.
The tracked spatio-temporal data of sports games con-tains time-stamped X, Y field coordinates of ball and player movements. In some cases, the ball has an additional Z coordinate capturing its height. Due to the rather low-multidimensional metadata, the index support of spatial databases is appropriate for data storage and retrieval tasks. SportSense supports any spatial database that follows the Open Geospatial Consortium (OGC) specification. Sport-Sense uses SQLite with Spatialite extension and SQL Server express edition. SQLite uses the R*Tree as a spatial index while SQL Server express edition uses a multi-layered grid.
The user is asked to sketch the desired motion query path, giving a start point, an end point and a free-style path in-between. The user will expect to retrieve all stored motion existing within a certain distance from the sketched motion path, as it is practically impossible to have the user sketch the exact motion path. In order to allow for this custom level of tolerated variance to the query path, we need to allow the query to be a region instead of just a path line.
We formulate a motion path query region by creating a geometric buffer around the query line using the Minkowski sum. The user has the ability to also choose the tolerated variance to the query path by setting how far the generated buffer boundary is to the main query path. From the gener-ated buffer boundary, sample boundary points are chosen to construct the polygon to be used by the spatial query. Sport-Sense also allows for another form of spatio-temporal query where events are chosen, along with sketches of regions in which they happened, and cascaded retrospectively allow-ing for the retrieval of scenes that meet the spatio-temporal characteristics of the query. The various forms of queries supported are illustrated in Figure 2. SportSense uses geo-metric features of spatial databases and maps ball and player movements with the Point data type and the sketch-based motion path/region with the Polygon data type.

After generating the geometric spatial query, the output generated from executing such queries acts only as phase one in a two phase solution. The second phase involves detect-ing separate motion flows from the set of points obtained from the first phase. A perfect match contains a motion query that starts and ends within the specified query path, and never leaves the sketched area. However, partially fit-ting queries can also be useful for the user. To detect both perfect and partially fitting matches, we loop sequentially on a chronologically-ordered list of all the returned motion points. A sliding window of 2 seconds, set from empirical observations, is used to detect if there is discontinuity in a motion flow or not. This coarsens the motion flows detected and generates more logical video snippets in the results. For computing the similarity score, if the motion at each point is moving in the direction of the query motion path, the sim-ilarity score is incremented, and if not, it is penalized. We also increment the similarity score if the retrieved motion path orginates at the start of the query path and/or ends at its end. Finally, extracting video snippets synchronized with the start and end times of the matching motion flows is achieved and shown to the user in a ranked list.
Interactive paper has already proven to be highly ap-propriate for specifying sketch-based queries against image databases [ 12]. In SportSense , we use interactive paper as a user interface for motion specification. Alongside with a digital pen, normal paper on which a proprietary dot pat-tern is printed turns into interactive paper. The pen which is equipped with an infrared camera can localize its position on the paper. Pen strokes are transmitted via Bluetooth.
The SportSense user interface has been developed with the objective of being used with various input devices, such as tablet computers and graphic tablets (with/without screens).
We use the Manchester City Football Club (MCFC) ana-lytics dataset [ 13], which includes manually detected and an-notated metadata for events happening within one football game between Manchester City FC and Bolton Wanderers FC in the Premier League. The events are discrete actions (such as passes, corner-kicks, offsides, fouls, shots on goal, goals, etc.) stored in XML format, accompanied with time-stamped location information (relative to the field), and the players involved. In order to allow for the implementation of spatio-temporal motion queries, we transformed the dis-crete event dataset into a 10 frame per second (fps) dataset by interpolating location and time information between each two consecutive events. A set of 1,427 discrete events were transformed into a motion-query friendly dataset of 55,398 records. The data has been stored in both a SQLite database (with spatialite support) and a SQL Server express database, with the later proving to be a much faster alternative in re-gards to query response time.
This paper has presented SportSense ,anovelsystemto query sport videos enriched with metadata of player and ball positions, on the basis of sketches expressing motion paths. This work was supported by the Swiss National Science Foundation ( MM-DocTable, contract no. 200020-137944/1). attempt to search for the scenes following a known item search mode.
