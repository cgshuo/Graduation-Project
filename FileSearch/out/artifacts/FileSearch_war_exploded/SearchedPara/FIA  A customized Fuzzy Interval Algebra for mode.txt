 1. Introduction
Context appears as a fundamental key to enable systems to fi lter relevant information from what is available ( Dey, 2001;
Schilit et al., 1994; Siewe et al., 2009; Cook and Das, 2012 ), to choose relevant actions from a list of possibilities ( Coronato and
Pietro, 2011; Hong et al., 2009; Chedrawy and Abidi, 2006 ), or to determine the optimal method of information delivery ( Pan et al., 2007 ). The major challenge of context-aware systems is the separation of the relevant from the irrelevant information ( Holzmann and Ferscha, 2010; Choi et al., 2012; Raper et al., 2002; Grossmann et al., 2005; Reichenbacher, 2007; Thyagaraju and Kulkarni, 2012 ). Among all types of relevancies, spatial relevancy is the main type which could handle other types of relevancies such as user preferences, history, etc. ( Afyouni et al., 2011 ). However, to the best of our knowledge, there are few reports concerning appropriate models to manage spatial rele-vancy parameters for a moving user in an urban traf fi c network.
Most of the current models for the spatial relevancy parameters in context-aware systems are based on the spatial relationships between the interacting objects ( Holzmann and Ferscha, 2010; Nelson, 1998; Grossmann et al., 2005; Reichenbacher, 2007 ). Some studies have used the proximity relations between the user and the contexts to model the spatial relevancy and utilized K-N neighbourhood or range queries ( Becker and Nicklas, 2004; Grossmann et al., 2005; Samany et al., 2009 ). Such relations cover the inclusion of contexts in a distinct area or range and the distance to other entities ( Becker and Nicklas, 2004 ). Holzmann and Ferscha (2010) de fi ned a Zone-Of-In fl uence (ZOI) for any entity with a speci fi ed distance and direction and used the RCC5 ( Cohn et al., 1997 ) spatial relationships to model spatial relevancy which are disjoint, overlaps, inside, contains and equal. The position, direction and extension of both ZOI are also included in their model. The most important drawback of these systems is that they do not mention the characteristic of the user's movement in an urban network which typically follows a linear route with a speci fi c direction which does not have the crisp boundary ( Papakonstantinou and Brujic-Okretic, 2009; Ghadiri et al., 2011; Zhou et al., 2012 ). Moreover these approaches do not apply the order relationships (e.g., behind or in-front-of), which could be useful in providing spatially relevant context-aware services for a moving user constrained to an urban network.

The original contribution of this research is the development of fuzzy intervals as a novel data model for the user and related contexts. Also this paper introduced a customized Fuzzy Interval
Algebra (FIA 5 ) which is adapted based on the position and direction of the moving user and it is able to model spatial relevancy in an urban context-aware system with Dynamic Range
Neighbour Query (DRNQ). Indeed the FIA 5 handles directional and topological relationships and DRNQ manages the distance in spatial relevancy model.

The selection of FIA in this research is considered for the following reasons: (1) When the user is moving in an urban network, he/she has a directional linear route. Therefore, the position of the moving user can be effectively modelled through a spatial interval. On the other hand, in an urban area, one usually encounters solid objects; as such, most of the related contexts of the user are considered with their external views which is suf fi cient to abstract the contexts and show them with spatial intervals. In the proposed approach  X  related contexts  X  refer to the contexts that are preferred by the user. For example, the related contexts of a tourist are the attractive areas such as monuments, gardens and museums. (2) There is no sharp boundary about how far the moving user can see some relevant objects. The vagueness of the border of context is stemmed from the cognitive abilities of the user. The user understands a context before he/she arrives there exactly. In addition, he/she has the ability to see/understand the related contexts while passing from a short distance ( Fig. 1 ).
Thus, smooth transitions between values in a fuzzy set allow model-ling a system without abrupt behaviour, which should be avoided in context-aware systems ( Schmidt, 2002; Samany et al., 2011; Yuan and Herbert, 2012; Madkour et al., 2013 ). (3) The algebra between fuzzy spatial intervals could provide and introduce spatial instruc-tions (related contexts) to the user based on their arrangement in space.

Our approach is implemented in tow districts of Tehran, the capital of Iran, and we have focussed on an outdoor guided tour as an example. In this scenario, the user is a tourist who intends to visit some selected points of interest with a speci fi ed origin and destination. It is assumed that the tourist is equipped with a PDA or a laptop computer, and a GPS for positioning, and the route is constrained by a directed network. The evaluation process is based on three factors: the accuracy of the results, the time performance of the algorithm and the satisfaction of the users with the navigation process. The experimental results show that the proposed approach can effectively model and accurately detect the spatially relevant contexts within a reasonable time frame.
This approach also provides context-aware instructions for the user with a high percentage for user satisfaction.

The rest of this paper is structured as follows: Section 2 presents fundamental aspects concerning the spatial relevancy parameters, principals of FIA theory and approaches of customiza-tion. The research methodology is explained in Section 3 . Section 4 presents the implementation of the method in the case study area. Section 5 describes the experimental results and evaluates them.
Then it discusses the theoretical and practical issues of the proposed approach. Finally, conclusions and directions of potential future research are considered in Section 6 . 2. Background followed by a description of the FIA theory and customization approaches of Interval Algebra. 2.1. Spatial relevancy from its general qualities:  X  Relevance involves an interactive, dynamic establishment of a relation by inference, with intentions towards a context. Relevance may be de fi ned as a criterion re fl ecting the effectiveness of exchange of information between people (or between people and objects potentially conveying information) in communication relationship, all within a context
Various contexts in pervasive systems can be classi fi ed into primary and secondary contexts ( Afyouni et al., 2011 ). The role of primary contexts in context management is obviously the indexing of the context information. Further information about entities can be accessed once they are found using the primary index. The identity of the entities, the location of the entities and the time are called primary contexts ( Becker and Nicklas, 2004;
Bettini et al., 2010 ). The additional context information such as user preferences, temperature, system properties and network are denoted as secondary contexts ( Bonino and Corno, 2011 ). Follow-ing this perspective, three main relevancies in context-aware systems are identical relevancy, spatial relevancy and temporal relevancy ( Becker and Nicklas, 2004 ). Among these relevancies, the current position  X  X  the here  X  X  is usually the centre of action, perception and attention. Thus, the context as perceived is strongly dependent on one's position ( Jimenez-Molina and Ko, 2011; Schmidt, 2002; Frank, 2001; Bettini et al., 2010; Holzmann and
Ferscha, 2010; Lenzini, 2009; Akula et al., 2011 ). The identical information may be fully relevant at one position but irrelevant at another position ( Bisdikian et al., 2009; Tychogiorgos and Bisdikian, 2011; Samany et al., 2012 ).
 quite important and should therefore be included in context management as one of the basic relevant parameters, called the  X  spatial relevancy  X  . The spatial relevancy of an entity is dependent on the distance between the context and the user ( Schmidt, 2002 ), their types of topological relationships and the direction of the user's movement ( Holzmann et al., 2008 ). 2.2. Fuzzy Interval Algebra are the basic relations between two crisp convex intervals on a directed time line which could be extended in spatial dimension.
Thirteen base relationships, namely behind-of ( o ), in-front-of ( 4 ), meets (m), met-by (mi), overlaps (o), overlapped-by (oi), equals ( ), contains (c), covered-by (ci), starts (s), started-by (si), between spatial intervals which correspond to 13 Allen's temporal relationships ( Matsakis et al., 2010 ). If we consider fuzzy intervals instead of crisp intervals then we are encountered with Fuzzy
Interval Algebra (FIA) instead of IA ( Matsakis et al., 2010 ). Unfor-tunately, there are no unique and natural ways to generalize the relations between crisp intervals to relations between fuzzy intervals. There are many different possibilities for customization, and it depends on the applications, which one is the most appropriate one. 2.3. Customizing of Allen ' s Fuzzy Interval Algebra
Regarding the characteristics of the moving user and related entities in urban traf fi c networks, FIA could model spatial rele-vancy in an effective way ( Hong et al., 2009 ). The problem is that using all the 13 relations will reduce the speed of the performance and it may decrease the ef fi ciency of the context-aware system.
Particularly when the user is moving with a speci fi ed velocity and he/she intends to make a decision due to the receiving messages of the system, the time of delivering appropriate instructions should be shortened as much as possible. Therefore it is necessary to reduce the existence of spatial relationships in order to decrease computational complexity of the algorithm which leads to increase the time performance and FIA 13 ( Matsakis et al., 2010 ) should be customized. There are two ways for customizing the Fuzzy Interval
Algebra ( Renz and Schmid, 2007 ): (1) using macro-relations, i.e., unions of base relations. Indeed combining IA base relations and using these macro-relations as base relations is the approach of customizing ( Golumbic and Shamir, 1993 ) and, (2) using only the relations needed. This paper follows the former method and combines some of the base relations which have the same in on decision making of moving user. 3. Proposed method
The basic idea in this research is the customization of FIA in space dimension to model spatial relevancy in urban context-aware systems. Thus, it is necessary to obey the principals of fuzzy inference systems to implement the model. Fuzzy inference system comprises of four major components ( Lee, 1990 ): a fuzzi interface, a knowledge base, decision-making logic and a defuzzi-fi cation interface ( Fig. 2 ). This section de fi nes the elements of the components which are adapted based on application. 3.1. Preliminaries Fuzzy set ( Zadeh, 1965 ) in a universe U is de fi ned as a mapping
A from U to [0, 1], representing a vague concept. For A in U , called the membership degree of A which is between 0 and 1. If
A and B are fuzzy sets in the same universe U , A is called a fuzzy subset of B, written A D B ,if  X  ( A ) r  X  ( B )in U ( Zadeh, 1975 ). For every  X  in ]0, 1], A  X  denotes the subset of U de fi ned by A  X   X f u j u A U 4  X  A  X  u  X  X  Z  X  g
A is called the  X  -level set of the fuzzy set A . In particular, A set of elements from U that are fully compatible with the vague concept modelled by  X  ( A ). If A 1 a  X  , the fuzzy set A is called normalized and elements from A 1 are called modal values of A ( Schockaert and Cock, 2008 ). The support supp ( A )of A is the set of elements from U which belong to A to a strictly positive degree: supp  X  A  X  X f u j u A U 4  X  A  X  u  X  X  4 0 g A fuzzy set A in R is called convex if for every  X  in ]0, 1], the set A is convex (i.e., a singleton or an interval). To adequately generalize the notion of a spatial interval, a closed and bounded interval of real numbers, some natural restrictions on the  X  -level sets are typically imposed.
 De fi nition 1. ( Fuzzy spatial interval ). A fuzzy spatial interval is a normalized fuzzy set in  X  with a bounded support, such that for every  X  in ]0, 1], A  X  is a closed interval.
 De fi nition 2. ( Fuzzy spatial interval of the user ). The fuzzy spatial most spatial relevancy is at the centre of the spatial interval which is the position of the user called origin. The membership degree of origin is  X  1  X  . However, considering the movement of the user with the car, we could specify a certain interval (the part of interval with membership degree equal to  X  1  X  ) rather than the origin, (2) with increasing distance from the origin, vagueness is increased and membership degree is decreased tending to  X  and (3) the visual domain of the user toward the front is wider than the backward. Regarding these matters an asymmetric trapezoidal membership function is selected for moving user in this paper ( Fig. 3 ), which is dynamically updated based on the position and direction of the user  X  s movement. There are four parameters for trapezoidal fuzzy functions as shown in Eq. (1) and Fig. 2 (a)  X  (d), which is indicated for the moving user by a and d U . m  X  x  X  X  where  X  1 4  X  2 or cd 4 ab .
 De fi nition 3. ( Fuzzy spatial interval of the context ). Fuzzy spatial interval of the context ( FSI C )isde fi ned as Fig. 4 which is a symmetric trapezoidal membership function. It is obvious that in this de fi nition, the value of  X  1 will be equal to  X  2 in Eq. (1) or cd 4 ab . The crisp part (  X   X  1  X  of the FSI C is related to the exact external boundary of the feature. As we become far from the feature in its tow-side, we can de fi ne the fuzzy part (0 3.2. Fuzzi fi cation of the SIs of the user and the related context
The fi rst step in fuzzy reasoning systems is the fuzzi fi the fundamental parameters which are FSI U and FSI C in FSRACAS. Since the FSI U should be updated based on the position and direction of the user, it is necessary to dynamically fuzzify the SI U in every updating procedure. However fuzzi fi cation of the SI is fi xed once they are determined.
 De fi nition 4. ( Dynamic fuzzi fi cation of SI U ). The characteristics (dimensions) of the fuzzy function of the moving user are speci in every updating process as Eqs. (2) and (3) (The method of the coordination of FSI U and FSI C are depicted in Appendix A): X bu  X  t  X  X  X u  X  t  X  X  10 sin B MU
Y bu  X  t  X  X  Y u  X  t  X  X  10 cos B MU ( ( X au  X  t  X  X  X bu  X  t  X  X  15 sin B MU
Y au  X  t  X  X  Y bu  X  t  X  X  15 cos B MU ( X du  X  t  X  X  X cu  X  t  X  X  25 sin B MU
Y du  X  t  X  X  Y cu  X  t  X  X  25 cos B MU ( where ( X u ( t ), Y u ( t )) is the position of user in time t which is updated with the movement of user and will be updated every 6 s.
Six seconds is the approximate time needed for decision making of the user ( Iwerk, 2004 ). ( X au ( t ), Y au ( t )), ( X bu and ( X du ( t ), Y du ( t )) are the position of a u , b which are the parameters of FSI U at time t .

In Eq. (2a) ,  X  10 m  X  is assumed as the maximum distance viewed if the user looks backward and  X  15 m  X  in Eq. (2b) is the maximum distance that is viewed by the forward-looking user. Respectively, in Eq. (3a) ,  X  15 m  X  is the maximum distance that may be viewed if the user looks backward adding to  X  10 m  X  in crisp part in Eq. (2a) and  X  25 m  X  in Eq. (3b) is the maximum distance that may be viewed by the user looking forward adding to  X  15 m  X  Eq. (2b) . In all of these equations B MU is the Bearing of the Moving User which is recorded by GPS along the route (see Appendix B for details on Bearing calculation approach for a directed line).

De fi nition 5. ( Fuzzi fi cation of SI C ). The fuzzi fi related contexts is carried out in a passive mode. The crisp part is the exact external border of feature ( SI C ) which is equal to bc Then the fuzzy parts are de fi ned as ( ( where  X  15 m  X  is assumed as the max. distance that may be viewed by the user when he/she becomes near to the related entity, B the straight bearing (Giesment) of the centreline of the street and
B ICl is its inverse (see Appendix B). 3.3. Rule block (rule base) or rule-block of the system. The rule-base in the proposed model is the fuzzy interval  X  interval relationships between the user and his/ her related contexts.

De fi nition 6. ( Fuzzy rule-base: fuzzy interval  X  interval relation-ships ). The main idea for customization of FIA 13 is the combination of some of the base relations which have the same in fl uence on decision making of the moving user to enhance the system ef fi ciency. According to this assumption, there are fi ve spatial relationships between the fuzzy spatial interval of the user and the fuzzy spatial interval of the related contexts including before (b) , after(a) , meet(m) , met-by (mi) and contact with (c) which is the combination of overlaps , overlapped by , starts , started by , fi nished by , covers , covered by and equals .Wehave fi ve relations in conceptual level which is called FIA 5 . However since the direction of the moving user is considered in this model, there are ten basic rules on the rule-based of the inference system: fi ve in positive direction and fi ve in negative direction ( Fig. 5 ; where index i indicates the i th related contexts).
 relations between them are a matter of degree. Fig. 6 illustrates the fuzzy membership functions of the inferred spatial relation-ships in the consequent of If  X  Then statements. 3.4. Inference and defuzzi fi cation and centre of mass method for defuzzi fi cation) is selected for inference of FSRACAS. If we denote the argument of the defuzzi-fi ed value by z defuzzi fi ed , then it is calculated by where  X   X  z  X  is the membership function of spatial relationships which are depicted in Fig. 6 . As shown in this fi gure, the relations  X  before and meet  X  and  X  after and met-by  X  have some overlay in their membership function. Therefore, in order to having a unique response for decision making with the user, whenever their member-ship functions become equal, meet and met-by are preferred than before and after relations in inference mechanism. 3.5. The proposed algorithm summarized as follows (in every updating at time t when the user is moving ( Fig. 7 )): 1) Performing a Range Neighbour Query ( Pu et al., 2012 ), with the centre of the user  X  s position and radius equal to 100 m. The results of this step are the preferred FSI C s which are near to the user based on the introduced radius. 2) Fuzzi fi cation of spatial interval of the user based on his/her position and direction ( Section 3.2 ). 3) Speci fi cation of the spatial relationships between the FSI selected FSI C based on FIA 5 (fuzzy inference based on Sections 3.3 and 3.4 ). 4) Sending the appropriate instruction based on detected spatial relevant contexts. 4. Implementation of the FSRACAS
In this research, the user is a tourist who is supposed to be guided from a hotel, which is his/her origin; if the location of the origin is not known, the user should introduce his/her current location to the system. After inputting the information about the origin, the context-aware system guides him/her according to spatial relevant contexts as illustrated in Fig. 8 . 4.1. Details of implementation of the algorithm
The proposed algorithm is implemented with the Vb.Net. programming language based on.Net Compact Framework 3.5 on windows mobile 6 professional SDK environment using tools and controls of ArcGIS Mobile 9.3. Furthermore, the implementation of the fuzzy inference engine is utilized from Dynamic Link Library (DLLs) of Matlab software (fuzzy logic toolbox). The released software consists of a four-stage con fi guration wizard ( Fig. 9 (a) and is delivered as the FSRACAS software in the form of an exe. (or set-up). The set-up fi le has a feature for downloading the data of the region of interest. The applied spatial data are in vector format; however, we also considered a raster map as a background. The required data can be classi fi ed into static and dynamic data which are described as follows.
 4.1.1. Static data
Static data are the information whose spatial characteristics are fi xed during the navigation process. We have a raster map of the region as the background and a generalized geo-referenced vector map with the following layers (the data used are related to the two districts of Tehran, the capital of Iran at the scale of 1:2000).
Districts 3 and 6 cover some attractive areas for a tourist and are considered for our case study: roads directed based on the urban rules (such as one-side and two-side).

Fuzzy spatial intervals of the tourist points of interest and urban facilities: Because the spatial relationships are calculated with respect to the spatial intervals of the related contexts, they should be stored in the database of the system to have a context-aware contexts of the tourist are categorized as (1) the tourist interest, which consist of restaurants, coffee shops, parks, green spaces, shopping centres, downtown centres, monuments, historical places, cultural heritage sites, universities, libraries, exhibitions, sport sites, museums and hotels. (2) The urban facilities that may be used by the user, such as petrol stations, hospitals, care centres, metro stations, bus stations and airports. 4.1.2. Dynamic data cally with the user  X  s movement. The computation process is carried out based on variations in the data. In this study the position and direction of the user are the dynamic (real-time) data. 4.1.3. Updating of FSI U tions, we de fi ne two operators that enhance the performance of the system in any updating including Scale and Shift . These operators guarantee the required changes in every updating of FSI U .
 De fi nition 7. ( Scale operator: effect of movement direction ).
Generally in way fi nding process of a moving user, forward direction is preferred than backward direction. Therefore it is reasonable to have an asymmetric trapezoidal fuzzy function or it must be ( c d 4 b U c U )( Fig. 10 (a)) when the direction is positive and it must be ( c which is behind of the user is shorter than the side that is in front of him/her and with the changing of movement direction these properties are replaced. The scaling operator Scale ( FSI tow-side effect on the FSI U dynamically. Whenever the direction of the moving user is changed, the domain of the two sides will be changed. This operator is used when the direction is inverted 180 or when the direction of the street is fi xed; if the direction of the street is changed then it is necessary to calculate the coordinated a , b , c U and d U .

De fi nition 8. ( Shift operator ). This operator just moves the FSI d (metres). According to Fig. 11 (a) when the direction of move-ment is positive then Shift ( FSI U , d s )  X  d U  X  d S and when the direction of movement is negative ( Fig. 11 (b)) then Shift ( FSI a d
S . This operator is used only when the direction of movement is fi xed. 5. Experimental results and discussion The spatial relevancy model is implemented in two districts of
Tehran, the capital of Iran. Districts 3 and 6 cover some attractive areas for a tourist and are considered for our case study.
To investigate how the model would perform in a real-world application, 100 different routes with different origins and destina-tions were selected. Each route was traversed by a visitor equipped with a laptop, a GPS and the software designed based on the proposed model. This paper evaluates the results of the experiments based on three parameters namely the accuracy of the results, the performance of the model and the satisfaction of the users. 5.1. Accuracy
To test this parameter, 3 independent routes were selected in the case study area and traversed in 100 iterations. In each route the related contexts selected by the tourist via the user ference options are speci fi ed as control points. The system is run while the user moves, and the user is guided based on the spatially relevant contexts with ordered instructions. Then, the number of detected contexts in each route is compared with the control contexts. Three different metrics were used for the accuracy assessment of the proposed model including (1) binomial approx-imation, (2) precision, and (3) recall. 5.1.1. Binomial approximation
According to the collected information, the distribution follows the form of a binomial, and therefore a General Linear Model with a one-sided binomial link function is an appropriate means to estimate the proportion detected, and a con fi dence interval. The results shown in Table 1 indicate the results of binomial approx-imation in 100 iterations of the proposed algorithm in route#1, route#2 and route#3 with 95% con fi dence level. The achieved results indicate that the minimum percentage of success to detect related context with the introduced algorithm is 96% while the maximum is 1. These results lead to 0.927  X  1 con fi dence interval with 95% con fi dence level. (The grey empty cells in Table 1 mean that there were not any spatially related contexts on the related routes, or the number of related contexts in route#1 is 23, in route#2 is 20 and in route#3 is 18.) 5.1.2. Precision and recall
Two other fundamental measures in the accuracy evaluation of selection process are precision and recall which are computed based on true positives (TPs, the number of relevant contexts that the system proposes to users), false positives (FPs, the contexts that have been suggested to users but they do not like), and false negatives (FNs, the contexts that have not been suggested to users but they do probably like) ( Salton and McGill, 1984 ).
Precision , which refers to the degree of accuracy of the selection process; it is measured as the ratio between the user-relevant contexts and the contexts presented to the user: percision  X  TP TP  X  FP  X  6  X  Recall , which is the ratio between the user-relevant contexts and the contexts present in the collection (thus also including the contexts the system does not suggest even if they can be relevant to the user): recall  X  TP TP  X  TN  X  7  X  Table 2 shows the results of accuracy and recall parameters in 100 iterations of the algorithm in 3 different routes approach.
Whenever the results become nearer to  X  0  X  the accuracy is better. Thus, the statistics demonstrate that the proposed approach can model spatial relevancy in a context-aware system, with some degree of contexts undetected. 5.2. Performance of the model
In this section, the results of tests that have been performed to show the run-time ef fi ciency of the algorithm are presented. Three performance tests were conducted, for which a Windows 7 Ulti-mate system (Intel s Atom (TM) CPU N270 and 2GB RAM) was used. Since the algorithm is sensitive to the direction of the user, there are three main conditions that the performance time may be different ( Fig. 12 ). The fi rst one is the time that the direction is fi xed; the second one is when the direction is changed based on the returning of the user (with 180 1 ) and the fi nal occasion is the time that the direction is changed because of the changing of the direction of street. Therefore we have three sets of results.
The fi rst set of results shows the updating time of the instruc-tion when the direction of the user is fi xed ( Table 3 ). The second evaluation reveals the measured time that is required for introdu-cing the instructions, when the direction of the user is inverted 180 1 ( Table 4 ). The fi nal performance evaluation is based on the required time for providing appropriate instructions to the user when the direction of the street is subject to change ( Table 5 ).
The archived results reveal that the processing time depends on two factors: (1) the number of related contexts (SIs) around the user, and (2) the direction of movement ( Fig. 13 ). Up to 15 FSICs in the study area around the user have been considered (according to the constraints in an urban network, 15 is the maximum number of related contexts that are detected in the updating algorithm). By increasing the number of FSICs around the user, the computational time of the algorithm will be increased. Moreover, the comparison between the achieved results in Tables 2  X  4 demonstrates the time needed for performing of FSRACAS is variant based on the user direction. The least required time associated to the situation in which the direction of user is fi xed or the change of user direction (by 180 1 ) is less time consuming than the change in the study area (when the number of related contexts are maximum and the direction of street is subject to change) the time performance is less than 2 s and users have 4 s for decision making.
 time in 3 different modes. The achieved statistical results demon-strated that the min, max and average required time for perform-ing algorithm with the fi xed direction is less than the two other modes, where these statistical parameters in mode#2 (when the direction of user is changed) are less than mode#3 (when the direction of street is changed). 5.3. Satisfaction of the users the satisfaction of the user with the system assistance procedure.
The user  X  s satisfaction with the services provided is a key issue in modelling context-aware systems. It is obviously crucial for adop-tion and acceptance of such technologies ( Lim and Dey, 2009;
Olsson et al., 2012 ). This study considered fi ve elements for estimating user satisfaction, namely (1) the usefulness of the context prediction in the user  X  s decision making process for choosing his/her related contexts ( Malik et al., 2007 ), (2) the usefulness of the presentation of contexts that have spatial relationships behind the user and in the opposite direction, (3) consideration of the movement direction ( Holzmann and Ferscha, 2010 ), (4) the order of the context presentation, and (5) the responding time of the algorithm to the user ( Lim and Dey, 2009; Olsson et al., 2012 ).

To achieve this goal, a questionnaire was designed and given to 100 visitors. All 100 tourists completed the questionnaire at the end of the process and gave a yes or no score for each parameter.
For every parameter, the number of visitors who agreed or disagreed with the satisfaction factor was obtained. Table 7 shows the percentages of the visitors who agreed and those who dis-agreed for each parameter.

The statistical analysis of the results obtained from question-naires completed by the visitors demonstrated that on average more than 88% of the visitors agreed with the method implemen-ted in FSRACAS for presenting approach of navigation instructions ( Fig. 14 ). The comparison of achieved results with Table 8 indicates a high level of user satisfaction with the proposed model. The minimum satisfaction is related to the  X  usefulness of the presenta-tion of contexts that have spatial relationships behind the user and in the opposite direction  X  parameter with 85.71%. The maximum satisfaction is related to the  X  usefulness of the context prediction with 92%. 5.4. Discussion
This study proposes and veri fi es a new approach to model the spatial relevancy in context-aware systems constrained by direc-ted urban traf fi c network. The proposed model has some speci characteristics that make this model distinctly different from current models ( Gellersen et al. 2009; Holzmann and Ferscha, 2010; Jimenez-Molina and Ko, 2011 ). The fi rst key feature of this model is related to the conceptual model of the proposed approach which assumes the in fl uence of the moving user with a fuzzy spatial interval despite of considering it as a point or a crisp region. A fuzzy spatial interval can model the cognitive ability of the user which is not crisp and has a fuzzy characteristic. Also the proposed approach modelled the direction of user, which is needed for deciding about continuing/returning/stopping the route.
 The second feature of this approach is the customization of FIA 13 to FIA 5 . Since the relations that have the same in decision making of the moving user are combined in one relation, so the time performance of the algorithm is reduced. Furthermore, the user does not receive similar instructions which decrease the power of decision making. This is the other advantage of the method. On the other hand the model applies RNQ which could handle the distance parameter, thus the proposed approach manages all types of spatial relationships that have major roles in modelling spatial relevancy, i.e. distance, direction and topology.
The other promotion of the FSRACAS is referred to the method of implementation which is utilized from two operators ( scale and shift ) for enhancement of the ef fi ciency of the algorithm perfor-mance. As shown in Section 5.2 , when the direction of user is fi xed, the algorithm follows only with shift operator so the time performance is at least. When the direction of user is changed with 180 1 , the algorithm follows with scale operator and shift (if it is needed), so taken time for updating instruction is less than the situations that we do not apply any operators (when the street direction is changed) and the algorithm fuzzify the FSI U Also the achieved results indicated that when the direction of the movement is constant, the time of updating and introducing instructions is reduced to 50% approximately. It is obvious that in most situations the direction of movement is fi xed therefore it can be concluded that in most situations the user has enough time Restaurant Museum (5 s) for decision making and the system responses the user in less than 1 s.

While the advantages of the proposed spatial relevancy model are clearly evident, there are also some limitations to this research which should be addressed in future studies. Although the model handles spatial relevancy in a reasonable manner, it does not treat temporal relevancy in a context-aware system. Moreover, this method may not be suitable for a pedestrian user and may be not applicable in spaces that do not have directed networks, such as a museum. 6. Conclusions and future directions
This paper has presented a Fuzzy Spatial Relevancy Algorithm for context-aware systems that guarantees the adaptation of the guiding navigation applications to new spatial contexts. Adap-tation of the application to the user context is based on the
Range Neighbour Query and Fuzzy Interval Algebra with fi ve main spatial relationships. In this way, this paper innovated a model for spatial relevancy, which is sensitive to the position and direction of moving user with three contributions: (1) de fi nition of fuzzy spatial intervals for the user and his/her preferred contexts, (2) customization of Allen's fuzzy relationships for urban con-text-aware way fi nding systems and (3) implementation of the proposed model for a scenario of a tourist way fi nder with two enhancing operators and evaluation of the algorithm.
 In this research the tourist guide is equipped with a PDA or
Laptop system and a tool for positioning system like GPS. The tourist could execute this programme in his/her device and receive the expected context-aware service conveniently. The experimen-tal results show that the proposed approach could detect spatial relevant contexts at the right position at the right time with a high level of satisfaction. The right position of the context is evaluated with accuracy parameter and the right time of the context-aware services is assessed through time performance. Also the evaluation of fi lled questionnaire forms of users indicated that the proposed approach could satisfy the user in providing and introducing context-aware services.
 modelling time as a context to present a spatio-temporal model for detecting spatio-temporal relevant context and developing our algorithm for the cases which do not follow a network path. Appendix A. The approach of the coordination of FSI U and is parallel to the centreline of the street which is approximately parallel to the external border of the urban contexts and it could have an angle with the absolute x -axis of the region map.
Membership functions of user and related contexts are projected on the Cartesian coordinate system as Fig. A.1 .

Appendix B. The calculating method of Bearing for a directed fuzzy line and its inverse origin of A and destination of D . Bearing of L AD ( B AD angle from the magnetic north to the directed fuzzy line ( Fig. B.1 ) which is computed as (zn.wikipedia.org)
If  X  x 4 0 and  X  y 4 0 ; then B AD  X  arctan  X   X  x =  X  y  X  X  B
If  X  x 4 0 and  X  y o 0 ; then B AD  X  180 1 j arctan  X   X  x If x o 0 and  X  y 4 0 ; then B AD  X  180 1  X j arctan  X   X  x =  X  y  X j X  B If x o 0 and  X  y o 0 then B AD  X  360 1 j arctan  X   X  x =  X  y  X j X  B where  X  x  X  x D x A and  X  y  X  y D y B
The Inverse Bearing of a directed fuzzy line ( B IAD ) is computed as If B 4 180 then B IAD  X  B AD 180 1  X  B : 5  X  If B o 180 then B IAD  X  B AD  X  180 1  X  B : 6  X  References
