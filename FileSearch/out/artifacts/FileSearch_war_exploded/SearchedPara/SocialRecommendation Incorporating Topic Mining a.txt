 We study the problem of social recommendation incorporating top-ic mining and social trust analysis. Different from other works related to social recommendation, we merge topic mining and so-cial trust analysis techniques into recommender systems for finding topics from the tags of the items and estimating the topic-specific social trust. We propose a probabilistic matrix factorization (TTM-F) algorithm and try to enhance the recommendation accuracy by utilizing the estimated topic-specific social trust relations. More-over, TTMF is also convenient to solve the item cold start problem by inferring the feature (topic) of new items from their tags. Ex-periments are conducted on three different data sets. The results validate the effectiveness of our method for improving recommen-dation performance and its applicability to solve the cold start prob-lem.
 H.3.3 [ Information Search and Retrieval ]: Information Filtering; J.4 [ Computer Applications ]: Social Behavioral Sciences Social recommendation, Social trust analysis, Social network
Social recommendation has attracted increasing attention from research community since a lot of commence sites allow users to build their social relations with others. In deed, one survey shows that sales via social commence in web sites should be total $9.2 bil-lion by the end of 2012 and are expected to climb to $14.25 billion in 2013 and $30 billion in 2015[2]. Hence, how to utilize social networks to improve recommender systems in order to help web sites gain more benefits has become a popular research topic. Re-cent years, there are a few works focusing on incorporating social trust networks into recommender system. However, most of the existing works either assume a single type of trust between users or use observed boundary (such as categories of items) to identify multi-faceted trust. These works ignore the fact that what lead to users X  multi-faceted trust relations should be reflected by the fea-tures of their chosen items. Only by understanding the features of their chosen items can we investigate user interests and distinguish their multi-faceted trust more precisely. Based on this intuition, in this work, we employ the tags of items to illustrate items X  features by mining topics from the tags and estimate topic-specific trust re-lations between users. Figure 1 shows the correlations between users, item, topic, tags and fine-grained trust networks in social-based recommender systems. In this way, we fuse both topic min-ing and social trust analysis into recommender system in order to enhance recommendation accuracy. Moreover, we can also predict users X  interests in new items by inferring the feature (topic) from the tags of new items to solve the item cold start problem, which is an important task in recommender systems.
 Recently, some earlier related studies have been conducted. However, the problem of social recommendation incorporating top-ic mining and social trust analysis addressed in this paper is differ-ent from prior works. We try to understand social trust between users on the topic level mined from tags of the items and utilize the topic-specific trust relations to both improve recommendation accuracy and solve the item cold start problem.

To clearly motivate this work, we conduct the following analy-sis on the datasets from three popular websites: Lastfm, Delicious and Slashdot. In order to show the potential correlation between the tags of items and users X  trust relations, we count the number of trustor-trustee pairs, in which the items rated by two users share at least one same tag, and then calculate the ratio of it to the total num-ber of trust relations. Moreover, we also calculate the percentage of trustor-trustee pairs that rate at least one same item. As shown in Figure 2, we can see that in all the three data sets, trustor and trustee always choose same tags rather than items. In other words, tags are more suitable for modeling common interests between trustors and trustees than items. More specifically, it might be possible to help model trustor X  X  interests by using tags of items rated by the trustee.
Based on the analysis above, the key issue for social recom-mendation incorporating topic mining and social trust analysis now turns into how to utilize tag information to represent user interests and how to understand multi-faceted social trust relations by using tag information.

In this paper, we investigate the problem of social recommenda-tion incorporating topic mining and social trust analysis with the following contributions: Figur e 1: Correlations between users, item, topic, tags and topic-specific trust networks in social-based recommender sys-tems.
The rest of the paper is organized as follows: the problem is for-mally defined in Section 2. Section 3 describes the datasets used in our work and discusses the different features of the three data set-s. Section 4 introduces the proposed topic-specific trust-based ma-trix factorization approach and demonstrates the parameter learning method. Section 5 presents the experimental results and Section 6 briefly reviews some related works. Section 7 concludes this paper.
In this section, we first introduce several notations and defini-tions used in the paper and then formally define the problem of social recommendation incorporating topic mining and social trust analysis.

The trust network can be represented as G = ( S; E ) , where S is the set of | S | = M users and E  X  S  X  S is the set of directed links representing trust relations between users. Here, we use M denotes the number of users, N is the number of items, T is the number of tags and K represents the number of topics.
 Now we define the matrices that will be used in the paper.
Definition 1. User-item matrix : Let R be an M  X  N matrix in which every row corresponds to a user, each column an item; and each element records the rating score, r ij  X  R of item j rated by user i .

Definition 2. Item-tags matrix : Let D be an N  X  T matrix in which every row corresponds to an item, each column a tag; and each element records the occurrence, d jt  X  R of tag t in item j .
Here, we smooth the occurrence of tags in items by the logistic function g ( x ) = 1 = (1 + exp (  X  x )) .

Definition 3. Item-topic matrix : Let V be an N  X  K matrix in which every row corresponds to an item, each column a topic; and each element represents the probability of the topic k shown by the item j , v jk  X  R .
 Figur e 2: Trust-Item-Tag correlation analysis. The x-axis s-tands for different data sets; "By common tags" represents the percentage of trust relations which share at least one same tag; "By common items" represents the percentage of trust relation-s which share at least one same item.

Definition 4. Tag-topic matrix : Let W be an T  X  K matrix in which every row corresponds to a tag, each column a topic; and each element demonstrates how tag t reflects the topic k , the occur-rence, w tk  X  R .

Definition 5. User-topic matrix : Let U be an M  X  K matrix in which every row corresponds to a user, each column a topic; and each element show user i  X  X  interest in topic k , u ik  X  R Definition 6. Topic-specific trust matrix : We use I ; I 2 ; :::; I K to represent topic-specific social trust between users. Social trust from user p to q on topic k , denoted as I a numerical weight associated with tags, ratings k and their trust relationship. Note that if two users have no trust relations, the corresponding entry in topic-specific trust matrices stays 0.
Based on the above matrix definitions, now we formally define the problem of social recommendation incorporating topic mining and social trust analysis.

Problem 1. Social Recommendation incorporating topic mining and social trust analysis. Given the social trust network G , user-item matrix R and item-tag matrix D , the goal is to learn latent factors that utilizes the matrices I 1 ; I 2 ; :::; I to best fit the matrices R and D :
Problem 2. Cold start problem. Given a new item j  X  with tags t , the goal is to infer user i  X  X  interest in the new item by the learned matrices I 1 ; I 2 ; :::; I k ; U; V; W , and G :
Before we introduce our proposed method, in this section, we first introduce the data sets used in this paper and demonstrate the different features of the three data sets.
The data sets used in this paper are collected from three popular real world web sites: Lastfm, Delicious and Slashdot. The rat-ings of items given by the users are from 1 to 5. All three datasets contains both the rating and social network information. The first Figur e 3: Topic-Specific Trust-based Matrix Factorization Framework. dataset is the Lastfm dataset, which is collected from a music re-view website. This dataset consists of 1892 users, 12523 items and 9749 unique tags. Among these users, there are 25434 social rela-tions which means that each user owns average 13 trustors in this data set. The second dataset is from Delicious website including 1867 users, 69223 items and 40618 unique tags. These two data sets are shared by the 2011 HetRec conference. The third dataset is crawled from Slashdot website. We collect the news from 2009 to 2012 and select the news with at least 10 reviews to build our dataset. Although Slashdot allows users to provide ratings to both news and comments, here we only pick out the rating of users to the main news into our data set. Finally, the Slashdot dataset con-tains 54628 users, 17061 items and 4299 unique tags. The detailed statistics of the three datasets are summarized in Table 1.
From Table 1, we can see that Lastfm owns the densest so-cial network, Delicious has the most tags and items, and Slashdot dataset contains largest users. Moreover, we also find that although Slashdot dataset has more items than Lastfm, its number of tags is much smaller than that of Lastfm dataset. Besides these overall statistics, we further investigate some details about trust network and tags. First, we find that all the three datasets demonstrate the typical power-low distribution on users X  trustors and this also re-flects that most users only have few trustors. Based on the analysis on the trust networks, we further find that users who have fewer trustors are more likely to trust their trustees. Furthermore, we al-so investigate the occurrence distribution of tags in three datasets. It shows that although some tags present over 2000 times, most of tags only occur less than 500 times. This requires an effective ap-proach to handle the problem of sparsity in item-tag matrix when mining topics from tags.
In this work, we fuse topic mining and social trust analysis in-to recommender system. As mentioned earlier, the tags of items are helpful to model user interests. Hence, given a trustee-trustor
Rating Density 2 : 99  X  10  X  3 8 : 1  X  10  X  4 7 : 46  X  10 user pair, we try to use tags of items rated by the trustee to mod-el trustor X  X  interests. We propose a matrix factorization approach aiming to estimate both user interests in topics mined from the tags and the topic-specific social trust between users for fitting the user-s X  ratings to items. Specifically, we utilize a topic space to factorize the item-tag matrix and the user-item matrix; then we model both users X  interests and social trust between users on topic level; Based on these estimated topic-related parameters, we propose a novel approach to model the ratings of items given by the users.
To solve the data sparsity problem, we propose a topic-specific trust-based matrix factorization approach based on probabilistic matrix factorization. Without loss of generality, we map the rat-ing score r from the 5-star rating system to the interval [0,1] by using the function f ( r ) = ( r  X  1) = 4 .

We first introduce how to incorporate topic-specific social trust to model user interests. Here, we employ U ; V and I = { I to model user X  X  ratings to items as Eq.(1). In our formula, the rating scores from users to items are modeled from three aspects: (1) how do items X  tags reflect the items X  topic feature? (2) how the users and their trustees like the topics? (3) how the users trust their friends on topics? From Eq.(1), one can see that r  X  ij absorbs the contributions from all these three aspects to approximate the observed rating scores r R . Specifically, I k i is the i th row of the matrix I k user i trusts others on topic k , U k represents the users X  individual preference on topic k and I k i  X  U k = I k ii  X  U ik + resents user i  X  X  interest on topic k , in which the first term illustrates user i  X  X  individual interest on topic k and the latter term describes the interpersonal influence. Hence, user i  X  interest on the k depends on both interpersonal social trust and their individual pref-erence on topic k , by which our approach incorporates social trust analysis into recommender system to model user interests. More-over, V jk represents item j  X  X  feature on topic k . Here we factorize the item-tag matrix by the topic space to help obtain the topic fea-ture of items. As shown in Eq.(2), we utilize tag-topic matrix W and item-topic matrix V to approximate the item-tag matrix D . Figure 3 shows the matrix factorization framework. We see when modeling user i  X  X  interest on topic k , only the corresponding i vector in I k is used and no more parameter from other rows in I or in other I matrices will be either used. We adopt a probabilistic model with Gaussian observation noise to fit the user-item rating matrix and the item-tag matrix. Here we define the conditional Figure 4: Item Recommendation Performance. X-axis: Top N items. Y-axis: Precision Figure 5: Item Recommendation Performance. X-axis: Top N items. Y-axis: Recall distribution over the observed entries in R and D as: P ( R; D | U; V; I; W; 2 R ) = ln P ( U; V; I; W | R; D;  X )  X  X  X  1  X  1  X  1
Maximizing this posterior distribution is equivalent to mini-mizing the following sum-of-squared loss function with hybrid quadratic regularization terms. Similar to the idea of SoReg [5] that users X  interests can be reflected by their chosen tags, we fur-ther add a social constrain term into the loss function: L = 1 where  X   X  X  2 F denotes the Frobenius norm, F ( u ) represents the trustees of user u and the function sim ( u; f ) demonstrates the sim-ilarity between user u and user f measured based on the similarity of the tags from their chosen items.
Now we employ a block coordinate descent scheme to minimize the objective loss function. First, we assign random values for ini-tialization on I 1 ; I 2 ; :::; I k ; U; V and W . Then, we solve each ma-trix alternatively with others fixed and proceed step by step until convergence. A local minimum of the objective function given by Eq.(6) can be reached by performing gradient descent in variables as follows:
Based on the learned parameters, we can predict the users X  rat-ings on new items. For the items in our training data sets, we can easily predict users X  ratings on these items by Eq.(1). For those new items, we can also utilize TTMF model to predict users X  ratings on them. Specifically, when given a new item j  X  with tags t infer the topic feature of the item by using the tag-topic matrix W , shown as Eq.(11).

Since TTMF can utilize tags of new items to model the topic feature of the new items, it is natural to bridge the item feature and user interests with the same topic space. Hence, we can also adopt Eq.(1) to predict users X  ratings on the new items.
In this section, we conduct experiments on the data sets de-scribed in Section 3 to evaluate the effectiveness and efficiency of the proposed method.
In order to demonstrate the outstanding performance of our ap-proach, we use different amounts of training data (90%, 80%, 70%) to evaluate all compared algorithms. In all experiments conducted in this paper, the values of parameters ; ; and are fixed to 0.01. The parameter controls how tags influence the estimation of users X  interests in topics, so we take experiments to investigate the contribution of tags by varying the value of . Our experiments are intended to address the following questions: 1. How does our approach compare with other related social 2. How does the model parameter affect the recommendation Figure 6: Cold Start Recommendation Performance. X-axis: Top N items. Y-axis: Precision Figure 7: Cold Start Recommendation Performance. X-axis: Top N items. Y-axis: Recall 3. How about the convergence of our proposed method ? 4. Can our approach solve the problem of item cold start rec-Comparison Methods. In order to demonstrate the improvement of our approach, we compare our model with the following meth-ods for item recommendation. Evaluation Metrics. We use two popular metrics, the Mean Ab-solute Error(MAE) and the Root Mean Square Error (RMSE), to measure the prediction quality of our proposed approach in com-parison with other collaborative filtering recommendation method-s. Moreover, we also employ the metrics, Precision and Recall, to evaluate the recommendation results.
 The metric MAE is defined as: where T t is the number of ratings for test, R ij denotes the rating of item j from user i and  X  R ij denotes the predicted rating user i gives to item j by algorithms.
 The metric RMSE is defined as: T able 2: Recommendation Performance Comparisons on Lastfm data set.

T raining Metrics PMF SoReg SoRec TTMF T able 3: Recommendation Performance Comparisons on Deli-cious data set.

T raining Metrics PMF SoReg SoRec TTMF Item Recommendation. Table 2, 3 and 4 list the recommendation performance of different methods on the three data sets respective-ly. From the results, we can see that our approaches show signifi-cant improvement compared with other algorithms on Lastfm and Delicious datasets. Although SoRec and SoReg fuse social network information to help predict missing values in user-item matrix, both algorithms ignore an important fact that users X  interests are actual-ly not the same as their friends in all fields (topics). Our proposed method utilizes both topic mining and fine-grained trust analysis to predict the rating score and the experimental results show the effectiveness of our method. However, we find that on the Slash-dot dataset, PMF method demonstrates the best performance and all the other social-related recommendation methods fail to get sat-isfied results. The reason we consider is that the trust network in Slashdot dataset is extremely sparse, so the sparse trust relations bring much noise to the social recommendation methods leading to their poor performance.

As recommender systems only use the top ranked results for item recommendation, we also cast the task as a ranking problem and use the precision and recall metrics for evaluation. For each user, we mark off 30% ratings as test data and use other 70% ratings for training. The precision and recall results are shown in Figure 4 and 5. We can see that different from the experimental results measured by MAE and RMSE, TTMF method presents the best performance compared with other methods on all the three datasets, which indicates that TTMF estimates the recommendation ranking more precisely than other methods.
 Cold Start Recommendation. Now we conduct experiments to test the ability of TTMF to solve the item cold start recommen-dation problem. Figure 6 and 7 show the results. Here, we com-pare our method with Collaborative Topic model (CTM) [11] which combines the merits of traditional collaborative filtering and prob-abilistic topic modeling but not incorporates social relations. From the results, we can see that on Delicious dataset, TTMF shows sig-nificant improvement compared with CTM . However, in the other two datasets, TTMF fails to recommend new items to the right user-s. The results show that only when the new item owns enough tags can TTMF better predict users X  interests in it. Otherwise, TTMF T able 4: Recommendation Performance Comparisons on S-lashdot data set.

T raining Metrics PMF SoReg SoRec TTMF Figure 8: Impact of parameter on recommendation perfor-mance. cannot capture the topic feature of the new item accurately mak-ing its unsatisfied performance, as shown on Lastfm and Slashdot datasets.
 Parameter Setting Analysis. In this section, we discuss the pa-rameter settings. In TTMF , parameter plays an important role that controls how much tags from trustees contribute to trustors X  interest modeling. In one extreme case, if we employ a very small value of , our approach ignores the contribution of tags and only models user interests by the user-item matrix. On the other hand, if we employ a very large value of , the tag similarity between trustors and trustees will dominate the strength of trust relations between users. Here, we analyze how the changes of will affect the recommendation accuracy. Figure 8 show the impacts of on MAE and RMSE. On the Lastfm and Delicious datasets, our ap-proach obtains the best performance when is set to 1. This shows that tag similarity is helpful to model user interest and improve the recommendation accuracy. On Slashdot dataset, we find that the best parameter is 0.1. This result shows that the tags in Slashdot dataset contributes less to the recommendation accuracy than that in the other two datasets.
Much effort has been made for recommender systems and a large number of works based on Collaborative filtering have been done for helping users find out the most valuable information. Recently, several matrix factorization methods [7, 8] are proposed for collab-orative filtering. They focus on representing the user-item rating matrix with low dimension latent vectors. There are also a few works focusing on trust analysis in social networks. Matsuo and Yamamoto study the bidirectional effects between trust relations and product rating[6]. Tang[10] et al. measure the multi-faceted trust strength between users on category level. Furthermore, sev-eral trust-based approaches [1] and influence-based approaches [3, 13] are proposed for improving recommendation accuracy. SoRec [4] is proposed as a probabilistic matrix factorization framework which incorporates trust network information into user taste anal-ysis. Ma et al. [5] also propose a matrix factorization framework with social regularization based on the assumption that users X  in-terests should be similar to their friends. Yang et al. [12] further investigate the contribution of social relations to the recommender system. Shen et al. [9] also propose a joint personal and social latent factor model for social recommendation.
In this paper, we study the problem of social recommendation incorporating topic mining and social trust analysis. We first in-vestigate the potential correlation between the tags of items and the trust relations between users. Then an algorithm based on prob-abilistic matrix factorization, TTMF , is proposed to utilize multi-faceted trust relations to improve the recommendation accuracy. TTMF can mine topics from tags of the items and estimate topic-specific trust relations between users simultaneously. We apply the proposed method to solve both item recommendation problem and the cold start problem. Experiments on three real-world datasets show that TTMF effectively improves the performance of item rec-ommendation and shows a satisfied result in cold start recommen-dation when items own enough tags. The experimental results also validate the effectiveness of using tags of items to help to model user interest and the fine-grained trust relations between users.
