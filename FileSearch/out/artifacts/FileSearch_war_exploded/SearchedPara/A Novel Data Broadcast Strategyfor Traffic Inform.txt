 The communication framework built by Vehicular ad hoc Networks(VANETs) and wireless communicating technology is one of the important foundation of the Intelligent Transportation System(ITS). The wireless communicating tech-nology of VANETs can implement the applications in transportation field such as traffic accident prediction, driving assistance,traffic information query, besides can provide some services such as data do wnload, vehicular entertainment, and data query combined with WiFi. It can be foreseen that VANETs not only will provide broader space for the traffic intelligent and humanized improvement, but also will be convenient for people travel.

The real-time traffic information can help improve the traveling efficiency and reduce the vehicle congestion, thereby driving distance and time as well as energy consumption. The purpose of the proposed strategy for traffic information query is to locally containing more useful data before query. To achieve the purpose,we propose a broadcast algorithm combining with probability and random delay, and put forward the definition of influence scope to reduce the data redundancy again. In addition, the proposed data integration idea combines the similar traffic information to a new data, in order that data are more valuable, and more conducive for future inquiries. Verified by simulation, compared with common broadcast algorithm Epidemic, the proposed strategy improves remarkably in data collision rate, update degree, and information area coverage rate.
The rest of this paper is organized as follows. In the next section, we review the related works. We discuss vehicle broadcast and forward algorithm particularly in Section 3. Analytical performance st udy and simulation results are presented in Sections 4. Finally, we conclude this paper in Section 5. Data management in VANETs is a popular research issue at present, and so far there are a lot of research achievements in many aspects about this issue. [1] studies the data naming issues during the broadcast, and [2] focuses on the issue of data signatures. [3] analyzes data throughput and delivery delay in VANETs in detail. In this paper we study another data management issue, which is data broadcasting in VANETs. Besides the br oadcast data is special, which is the urban traffic information data.

The wireless mobile network broadcast technology has matured, and nowadays broadcast algorithms on wireless mobile networks are also endless. The broad-cast using Random Way Point model is relatively simple, The general study is theoretically analysis on its performance[4]. While heuristic routing protocol WHIRL[5] and the routing algorithm on large scale LAMMAR[6] use RGPM as their mobile model. At present most mobile models used for broadcast algo-rithms are these both, while VANETs belongs to opportunity network, unlike other network nodes which keep delivering data outward, the transmission pro-cess of it X  X  nodes is store-carry-forward, which also leads to the algorithms in other networks are not suitable to be used for VANETs directly. In this pa-per, we study the broadcast algorithm supporting traffic information query in VANETs, and the mobile model used for it is urban traffic scenario, so we can X  X  use the existing broadcast algorithms in other mobile model. We need to design an algorithm adjust to VANETs characteristics.

So far most researches about VANETs are routing algorithm, and the majority of which assume the senders have got the knowledge of the location of the destina-tions. About the broadcasting issues, some focus on the security issues when the data broadcastingsuch as[7], some like[8] analyze data broadcastprotocol on MAC layer ensuring data security in detail. There are relatively small work on pure data broadcasting currently, since for the ordi nary data,the efficien cy of Epidemic[9] has been sufficient to meet. Data whereabouts in the broadcast algorithm aren X  X  as much as possible for later data query, so the key point of this paper is how to collect more data with control network congestion effectively as premise. 3.1 Issue Description The background of the proposed strategy is urban traffic, and the mobile scene is vehicles moving in the urban streets. To make the issue simplify, denote A as the sum of areas of all the roads. There are N vehicles in the region, the average length of each street being L , the average of the streets being D ,the vehicular communication range being R , and the vehicular average density per street being  X  . Since querying the real-time traffic information need to know the traffic information of roads in a short time, we need set a time period T .The discussed traffic information is divided into two kinds, unobstructed and jam.
To get the data quickly in the urban traffic mobile model, One of the methods is broadcasting data periodically before the inquiry, in order to find the desired data locally, reduce query delay, and improve query efficiency. So at data broad-cast stage, every vehicle has to try to collect useful data and drop the redundant data. After a vehicle produces a data packet containing self-information, it will broadcast its packet; when a vehicle recei ves a packet, it will judge whether the packet is value to store and forward. If each of the vehicles broadcast and forward packets unlimited, it will lead to many problems such as channel competition, network congestion and overissue data.

Next we will introduce the solutions of the problem. 3.2 Related Data Structure and Operation Data Structure of Packets. This paper focuses on the traffic information query, the data structure of the data packet stored in Vehicle i is represented by P i ,which and affecting distance are introduced in next section. In the following content, denote P i .  X  as the variable in the packet P i , for example, the center coordinate ographical absolute coordinates, which can be obtained by the GPS positioning. Both of the coordinates X  initial value are coordinates of the vehicle when a data packet is generated. Once the packet is f orwarded, the center coordinates in the packet will change to the center coordinates of the influence scope presented by the packet, but the coordinates of the vehicle will change with the movement of the vehicle. The transmission time is the moment that the vehicle sends its a packet. Each vehicle has a storage area called the local memory, in which memory struc-ture is a data table, and each of the record in which is a packet.
 Related Definition Definition 1. Influence Scope, Affecting Distance. Suppose vehicle i is center, build a rectangle whose length is 2d along along d as affecting distance of i.
 For example, Fig.1 shows the influence scope of Vehicle a . According to the Fig.1, Vehicle b and Vehicle e are both in the influence scope of Vehicle a . The packets have to contain the vehicle X  X  coordinates and center coordinates represented by the packet, and the influence scope of the packet is a rectangle, the center of which is the center coordinates of the packet. Definition 2. Traveling Direction. Vehicle i produces the direction vector (a,b) on its direction lane in the time of  X  t, according to which as a benchmark turning  X  4 respectively in the clockwise and counterclockwise, and the resulting angle range is the traveling direction of the Vehicle i . Suppose Denote that Vehicle j produces the direction vector (c,d) on its direction lane in the time of  X  t .If  X  ij that the angle between (a,b) and (c,d) meets that call that the traveling direction of Vehicle i and Vehicle j are the same. Wherein the angle of the directio n vectors of the two vehicles is Definition 3. Information Area. The coverage area union set of influence scope in the packet stored locally.
 Judgment Conditions of Forwarding Packets. When a vehicle receives a packet, it will determine to drop or store and forward the packet according to the following conditions.
 Proposition 1. The necessary and sufficient conditions that Packet P j is in the influence scope of Packet P i : (2) ( P i .x  X  P j .x ) 2 +( P i .y  X  P j .y ) 2  X  d 2 0  X  P i .d . Set Space(i,j) = true if the two packets coincide with the conditions, otherwise Space(i,j) = false.
 Proof. Due to the limit space, the proof is ignored.
 Proposition 2. The maximum value for the initial affecting distance of a ve-hicle d is the road width D.
 Proof. Due to the limit space, the proof is ignored.
 Proposition 3. If packet P i stored in Vehicle i and packet P j stored in Vehicle j both satisfy the following two points: (1) Space(i,j) = true; (2) The traveling direction of i and j are the same. then Vehicle i doesn X  X  forward the received packet P j , and set Forward(i,j) = false, otherwise Forward(i,j) = true.
 Proof. Due to the limit space, the proof is ignored. Integration of Data Packets. In VANETs, urban is the scenario of the net-work, so streets are the traces of mobile vehi cles. This situation has a distinctive characteristic different from other scenario, in which the traffic information in the same road is the same. So after a vehicle stores some traffic information, it can integrate the information in the same road to one piece of information. It can save the local memory.
The format of the integrated packets is the same as that of the broadcast packets, but some variable quantities will change according to the integration. The specific judgements and integra tion methods will be done as follows. Proposition 4. If P i and P j can be integrated, then the necessary and sufficient conditions are that geographical locations of the two packets have to coincide: (2) ( P i .x  X  P j .x ) 2 +( P i .y  X  P j .y ) 2  X  d 2 0  X  L .
 Set Road(i,j) = true if the two packets can be integrated, otherwise Road(i,j) = false.
 Proof. Due to the limit space, the proof is ignored.
 Proposition 5. If packet P i stored in Vehicle i and packet P j stored in Vehicle j both satisfy the following four points: (1) Road(i,j) = true; (2) The ratio of velocities in P i and P j satisfy that (3) The traveling direction of i and j are the same; (4) Transmission time in P i and P j satisfy that Then P i and P j can be integrated, and set Combinable(i,j) = true, otherwise Combinable(i,j) = false. Wherein  X  is the ordinary velocity ratio constant without any accident.
 Proof. Due to the limit space, the proof is ignored.
 Proposition 5 is to determine whether the two packets can be integrated. When the data in the two packets satisfy the conditions of Proposition 5, the packets will be integrated. Then they will be combined into one packet (as Fig.4):
Intersect along the extension line of the i and j direction vector to the edge of the influence scopes represented by P i and P j respectively to obtain four intersections.

The extension cord equati on along the direction of i is P i .y  X  y P Simultaneous equations formula (2) and dist ( i , c ) to get formula (3), and further solve ( x c , y c ) which are the coordinates of c : and get two coordinates of c and We can get the coordinates of d ( x d , y d ). Mark a perpendicular along i direction vector extension cord over the two d points, whose foot drop is d X  ( x d  X , y d  X ). According to the point to linear distance formula and the Pythagorean Theorem we can get dist ( c, d )= dist ( c, d ) 2  X  ( dist ( d, d )) 2 ,so Integrated affecting distance P i .d is half of the maximum dist ( c , d X  ), and then rounding the outer boundary points; center coordinates of the scope are the coordinates of midpoint between c and d ; the new velocity also change with a corresponding adjustment; t i is the later time of t i and t j . 3.3 Broadcasting and Forwarding Strategy Packets Broadcasting Algorithm. In VANETs, the distribution of vehicles is uneven, which means some places dense, while some places sparse; and during different period, such as the daytime and night, the vehicle densities are different. In the proposed algorithm, we assume that the distribution is average, and calcu-late the average vehicle density  X  in the area. In each time T , a vehicle generates a new data packet storing the local traffic information and broadcast by the fol-lowing method. Vehicle i generates data packet P i in  X  t , deciding whether it will broadcast the packet with the probability q . So each vehicle has a probability 1-q not to transmit packet. When it decides to broadcast the packet, it will generate a random number to be delay  X  i , and broadcast the packet when the delay arrives.
Vehicles broadcast packets with probability q , and probability q satisfies q&gt; 1  X  e ln  X / X  ,  X  represents threshold value. Set a vehicle send packet with q , we need to ensure a point that there are at least one vehicle send its packet on the same road, in order that the tra ffic information on this road can be received by the other vehicles. The probability of no vehicle broadcasting its packet is (1  X  q )  X  .When the probability is less than a threshold value  X  , we can say that the probability of no vehicle whose packet represents the very information broadcasts its packet in the initial time is very small, even almost zero, and such q canbeusedasavehicle broadcasting probability. So derive (1  X  q )  X  &lt; X  can get the choice of q .
Intuitively speaking, the more the number of a vehicle X  X  neighbors, the greater the probability of packets collision sent by vehicles, so the greater the range of delay choice, and the greater the maximum delay. And since the number of a vehicle X  X  neighbors depends on the network density, so we can get t d =  X  X  , wherein t d is the maximum value of delay choice, i.e. the delay random number  X   X  [0 ,t Packets Forwarding Algorithm. In the process of forwarding data, within the communication region of the vehicle, the nearer neighbors of the sending vehicle receive the data packets more ea sily than the further neighbors, the probability that they have this very data being larger, so when a vehicle is going to forward its packet, the forwarding probability to the nearer neighbors will be smaller, and to further will be larger; the probability to the vehicles at the edge of the communication region will be the largest. Therefore, when Vehicle i decides to forward packet to its neighbor Vehicle j after processing the data, it communication radius R to get the forwarding probability: Vehicles forward the determined packets with the probability p F , thus reduce the redundancy transmission data.
 Algorithm 1. Data Forwarding Algorithm Deal-Data This section assesses the performance of the strategy proposed by this paper. We will determine some important parameters by simulation, and compare the strategy with other schemes. 4.1 Experimental Environment Settings In the experimental environment setting, vehicles are traveling within a 3 km  X  3 km fixed region of the street environment. In initialization, each vehicle gen-erates a broadcast period T , broadcast probability q and the maximum delay random number t d . The simulation of the strategy proposed by this paper exe-cutes on NS2[10]. In order to provide a real VANETs environment, the experi-ment uses SUMO simulator[11] and a street map in Tiger database[12] (Fig.5) to generate a street topology model and vehicle moving trajectory file, and the file will be used in NS2.

In the moving scenario there are 2,000 vehicles, which meet the topology of the model, and are limited to a maximum ve locity. The size of each data packets are the same, and the local memory can store up to 50 packets. 4.2 The Simulation Comparison Schemes In the strategy proposed by this paper, there are two key technologies: broad-casting and forwarding strategy. In ord er to evaluate the performance of the strategy, we will compare this strategy w ith the other schemes. Since the ordi-nary broadcast strategy use Epidemic, and there is no broadcast strategy can be used to compare performance, so in this paper we use Epidemic and two other schemes proposed by ourselves to compare with the strategy.

Scheme 1 uses broadcast packets direct ly on the broadcasting, while uses the algorithms proposed by this paper on the forwarding.

Scheme 2 stores and forwards packets d irectly on the receiving, while uses the algorithms proposed by this paper on the broadcasting. 4.3 Parameter Settings First, determine the optimum q and  X  values by experiments. These two values are important, which determine the efficiency of initial broadcasting. Setting Probability q . Fig.6 shows the number of initial broadcast packets under predetermined scenario observed by changing the q value, and determine the optimum q value by weighing information area and the number of packets.
In Fig.6 each line represents a  X  set value. In Fig.6(a), the percentage of the broadcast range is maintained within a relatively large and stabilized range at q  X  0 . 6; in Fig.6(b), the number of broadcast packets is relatively stable at is ideal to set the probability within the range from 0.6 to 0.8. Setting Maximum Delay  X  . Fig.7 shows the effect of transmitting data packets under different  X  value, including the data collision rate and the size of the transmission delay. Weighing the two performances can get a better  X  value to make the effect of transmitting packets better.
In Fig.7 each line represents a probability value. In Fig.7(a) the collision rate stabilizes and maintains in a low state after  X  = 6; according to Fig.7(b),under the premise of maintaining a low collision rate, the delay is smaller choosing  X  value from 6 to 7. 4.4 Strategy Performance Comparison Compare the strategy proposed by this pa per with schemes mentioned in section 4.2. Wherein q value and  X  value are determined based on the optimized values obtained in the previous experiment.
 Information Area. Aimed at the issue in the paper, this strategy ultimately wants to make the sum of information area covered by the packets stored in the vehicle memory achieve to the largest. This performance is equivalent to data arrival rate in other strategies. In Fig.9 we compare this strategy with the above-mentioned schemes about information area for some parameters changing.
Fig.8 shows that different methods of processing data in memory results in different effects of information area. Scheme 2 didn X  X  make judgments and pro-cessing to the receiving packets, which leads to large redundant data in the memory, and being much less useful data. While Epidemic doesn X  X  take account in this aspect, so the performance in this field is not good neither. Data Collision Rate. It X  X  necessary to consider data collisions in the broad-casting. By the comparison between this strategy and the other schemes about data collision rate in Fig.9, if vehicles all broadcast without any limit, the data collision rate will be very high; while if all received packets are forwarded, the network congestion will also be large, and so do the data collisions. This paper proposes a data broadcast strategy for traffic information query. This strategy is more than ready for the preparation work for traffic information query. As long as requirements want to collect so me data in a specific area directionally and need real-time, they all can broadcast data with this strategy. Vehicles using the strategy can make data be transmitted with greater probabilities, smaller collisions and more comprehensive range, according to store and forward conditions proposed by this paper, so that the data covering information area in vehicles can be as large as possible. Strategies are conducive to real-time traffic data query. Simulation results show that the proposed strategy can achieve the expected performance.

