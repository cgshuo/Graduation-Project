 650 Harry Rd, San Jose, CA 95120  X  X verage-case X  Investing: Much of mathematical finance theory is devoted to the modeling of the recent stock market crash.
 Even so, empirically the Geometric Brownian Motion (GBM) ([Osb59, Bac00]) has enjoyed great stocks.  X  X orst-case X  Investing: The fragility of average-case models in the face of rare but dramatic de-viations led Cover [Cov91] to take a worst-case approach to investing in stocks. The performance of an online investment algorithm for arbitrary sequences of stock price returns is measured with which is the difference in the logarithms of the final wealths obtained by the two. O (log T ) . There has been much follow-up work after Cover X  X  seminal work, such as [HSSW96, MF92, KV03, BK97, HKKA06], which focused on either obtaining alternate universal algorithms with the number of iterations) in an unchanging environment. As an extreme example, consider a setting with two stocks where one has an  X  X pward drift X  of 1% daily, whereas the second stock constant regret, unlike the worst-case bound of O (log T ) .
 short term stock movements. However, increasing trading frequency increases T , and thus one may final wealths. In reality, however, experiments [AHKS06] show that some known online algorithms actually improve with increasing trading frequency.
 Bridging Worst-case and Average-case Investing: Both these issues are resolved if one can show that the regret of a  X  X ood X  online algorithm depends on total variation in the sequence of stock iteration variation should go down correspondingly, so the total variation stays the same. Since Q  X  T (after appropriate normalization), we improve over previous regret bounds and retain the worst-case robustness. Furthermore, in an average-case model such as GBM, the variation can tion requires constant time per iteration (independent of the number of game iterations). 1.1 New Techniques and Comparison to Related Work Cesa-Bianchi, Mansour and Stoltz [CBMS07] initiated work on relating worst case regret to the Recently, this conjectured was proved and regret bounds of  X  O ( mation and bandit linear optimization settings [HK08, HK09], where Q is the variation in the cost of online exp-concave optimization, which includes portfolio selection as a special case. [Jam92] and Cross and Barron [CB03]. They considered a model of  X  X ontinuous trading X , where rebalanced k times with k  X   X  . They prove familiar regret bounds of O (log T ) (independent of Furthermore their algorithms, being extensions of Cover X  X  algorithm, may require exponential time Our bounds of O (log Q ) regret require completely different techniques compared to the  X  O ( regret bounds of [HK08, HK09]. These previous bounds are based on first-order gradient descent methods which are too weak to obtain O (log Q ) regret. Instead we have to use the second-order Newton step ideas based on [HKKA06] (in particular, the Hessian of the cost functions). The second-order techniques of [HKKA06] are, however, not sensitive enough to obtain O (log Q ) bounds. This is because progress was measured in terms of the distance between successive portfo-we introduce a different analysis technique, based on analyzing the distance between successive the variation.
 A key technical step in the analysis is a lemma (Lemma 6) which bounds the sum of differences of successive Cesaro means of a sequence of vectors by the logarithm of its variation. This lemma, which may be useful in other contexts when variation bounds on the regret are desired, is proved using the Kahn-Karush-Tucker conditions, and also improves the regret bounds in previous papers. 1.2 The model and statement of results Portfolio management. In the universal portfolio management model [Cov91], an online investor  X  n = { wealth is thus performance by the exponential growth rate, which is log to keep a fixed distribution. Thus, for a CRP x  X   X  n , the change in wealth is investment strategy and that of the best CRP strategy in hindsight, i.e.
 adversarially as long as they respect the market variability bound.
 Online convex optimization. In the online convex optimization problem [Zin03], which generalizes universal portfolio management, the decision space is a closed, bounded, convex set K  X  R n , and Usually, we will let g =  X  log , and v t = r t ).
 as This expression is minimized at  X  = 1 T the vectors are clear from the context.
 Main theorem. In the setup of the online convex optimization problem above, we have the following algorithmic result: R, D, a, b &gt; 0 such that the following conditions hold: Then there is an algorithm that guarantees the following regret bound: Now we apply Theorem 1 to the portfolio selection problem. First, we estimate the relevant param-eters. We have k r t k X  b = 1 . Applying Theorem 1 we get the following corollary: the following regret bound: 2.1 Preliminaries of a vector x induced by a positive definite matrix M , defined as k x k M = simple generalization of the Cauchy-Schwartz inequality is used in the analysis: We denote by | A | the determinant of a matrix A , and by A  X  B = Tr ( AB ) = we are concerned with logarithmic regret bounds, potential functions which behave like harmonic matrix, and v 1 , v 2 , . . . are vectors in R n ): The following lemma is from [HKKA06]: have reduces exactly to the regular harmonic series whose sum is bounded, of course, by log( T + 1) . 2.2 Algorithm and analysis scheme of  X  X ollow-The-Regularized-Leader X  (FTRL) with squared Euclidean regularization.
Algorithm Exp-Concave-FTL. In iteration t , use the point x t defined as: Note the mathematical program which the algorithm solves is convex, and can be solved in time polynomial in the dimension and number of iterations. The running time, however, for solving this Newton method X  of [HKKA06]. In particular, we have the following result: iteration whose regret is bounded by to prove the Theorem 1.
 Proof. [Theorem 1] First, we note that the algorithm is running a  X  X ollow-the-leader X  procedure referred to as the leader in that round.
 Thus, we have v ) v t . Now, we need a handle on x t  X  x t +1 . For this, define F t = the observation that  X  g 0  X  ( v  X   X  x ) = g 00  X  ( v  X   X  x ) v  X  .
 Define A t = equation (4) can be re-written as: Now, since x t minimizes the convex function F t over the convex set K , a standard inequality of ( x t  X  x t +1 )  X  0 . Putting these two inequalities together, we get that Thus, using the expression for A t  X  x t from (5) we have bound Define  X  v t = v t  X   X  t ,  X  t = 1 t +1 where  X  v t = v t  X   X  t ,  X  t = 1 t +1 Then we bound P We will bound  X  momentarily. For now, we turn to bounding the first term of (9) using the Cauchy-Schwartz generalization as follows: By the usual Cauchy-Schwartz inequality,
P from (7) and (8). We conclude, using (9), (10) and (11), that This implies (using the AM-GM inequality applied to the first term on the RHS) that Plugging this into the regret bound (2) we obtain, via (8), The proof is completed by the following two lemmas (Lemmas 5 and 6) which bound the RHS. The series.
 Lemma 5.
 Proof. We have A t = Using the fact that  X  v t = v t  X   X  t and  X  t = 1 t +1 Now, v Let  X  A t = 1 3 I + b 3, we get To bound the latter quantity note that |  X  A 0 | = | I | = 1 , and that where  X  Q = substituting this bound into (12). Lemma 6.  X  ( v 1 , . . . , v T )  X  2 R [log(2 + Q/R 2 ) + 1] .
 We have P Furthermore, Summing up over all iterations, P k u t  X  1 k /R , for t  X  1 .
 Lemma 7.  X  Q  X  Q + R 2 .
 Lemma 8. Suppose that 0  X  x t  X  1 and We begin with a brief description of the model. The model assumes that stocks can be traded con-cal medium are jarred about by other particles, leading to the classical Brownian motion. volatility  X  : where W t is a continuous-time stochastic process known as the Wiener process or simply Brownian motion. The Wiener process is characterized by three facts: by we trade for one year. We now study the effect of trading frequency on the quadratic variation ( r Then using the facts of the Wiener process stated above, we can prove the following lemma, which this paper.
 Lemma 9. In the setup of trading n stocks in the GBM model over one year with T trading periods, there is a vector v such that and regardless of how the stocks are correlated.
 Applying this bound in our algorithm, we obtain the following regret bound from Corollary 2. empirically (see e.g. [AHKS06], and more empirical evidence is given in the full version of this paper.).
 to 0 , this doesn X  X  change the performance in any qualitative manner.
 returns in each period are independent, the expected final change in wealth, which is the product of the paper: ance of the minimum variance CRP decreases as the trading frequency increases. Thus, increasing the trading frequency decreases the variance of the minimum variance CRP, which in Theorem 10, the regret does not change even if we trade more often; thus, one expects to see improving performance of our algorithm as the trading frequency increases. We have presented an efficient algorithm for regret minimization with exp-concave loss functions iterations.
 Recently, DeMarzo, Kremer and Mansour [DKM06] presented a novel game-theoretic framework tighter optimization of the constants involved).
 Increasing trading frequency in practice means increasing transaction costs. We have assumed no to take into account transaction costs as in the work of Blum and Kalai [BK97]. [AHKS06] Amit Agarwal, Elad Hazan, Satyen Kale, and Robert E. Schapire. Algorithms for port-[BK97] Avrim Blum and Adam Kalai. Universal portfolios with and without transaction costs. [BV04] Stephen Boyd and Lieven Vandenberghe. Convex Optimization . Cambridge University [CB03] Jason E Cross and Andrew R Barron. Efficient universal portfolios for past dependent [CBMS07] Nicol ` o Cesa-Bianchi, Yishay Mansour, and Gilles Stoltz. Improved second-order [Cov91] T. Cover. Universal portfolios. Math. Finance , 1:1 X 19, 1991. [DKM06] Peter DeMarzo, Ilan Kremer, and Yishay Mansour. Online trading algorithms and ro-[HK08] Elad Hazan and Satyen Kale. Extracting certainty from uncertainty: Regret bounded [HK09] Elad Hazan and Satyen Kale. Better algorithms for benign bandits. In SODA , pages [HKKA06] Elad Hazan, Adam Kalai, Satyen Kale, and Amit Agarwal. Logarithmic regret algo-[HSSW96] David P. Helmbold, Robert E. Schapire, Yoram Singer, and Manfred K. Warmuth. On-[Jam92] F. Jamshidian. Asymptotically optimal portfolios. Mathematical Finance , 2:131 X 150, [KS04] Ioannis Karatzas and Steven E. Shreve. Brownian Motion and Stochastic Calculus . [KV03] Adam Kalai and Santosh Vempala. Efficient algorithms for universal portfolios. J. [KV05] Adam Kalai and Santosh Vempala. Efficient algorithms for online decision problems. [MF92] Neri Merhav and Meir Feder. Universal sequential learning and decision from individ-[Osb59] M. F. M. Osborne. Brownian motion in the stock market. Operations Research , 2:145 X  [Zin03] Martin Zinkevich. Online convex programming and generalized infinitesimal gradient
