 With increasing popularity of browser toolbars, the chal-lenge of employing user behavior data stored in their logs rises in its importance. The analysis of post-click search trails was shown to provide important knowledge about user experience, helpful for improving existing search systems. However, the utility of different trail properties for improv-ing existing ranking models is still underexplored. We con-duct a large-scale study and evaluation of a rich set of search trail features in realistic settings and conclude that a deeper investigation of a users experience far beyond her click on the result page has the potential to improve the existing ranking models.
 Categories and Subject Descriptions: H.3.3 [Informa-tion Storage and Retrieval]: Information Search and Re-trieval Keywords: user behavior features; search trails; dwell time.
In recent years, user behavior data plays an increasingly important role in different IR tasks. The most well-known way to derive evidences of users X  preferences and satisfaction is analyzing web search click logs. Though they provide the vast amount of implicit user feedback, its value and reliabil-ity is markedly limited, since a large part of users X  activity takes place beyond their clicks on search results.

With increasing popularity of browser toolbars it becomes possible to partially compensate for the lack of post-click behavior data by toolbar logs that store browsing actions of their users. It was shown [1] that basic statistics of user interactions with web pages, such as dwell time, may serve as high-performing features for a document ranking model. However, the entire sequence of pages visited by a user with the same information need after she made a click on a re-sult page, a so-called  X  X ost-query search trail X , is not well-studied as a source of features with a potential to improve the ranking of documents participating in the trails. We as-sume that a substantial analysis of search trails may help to further improve existing retrieval models in comparison to already well-known features, such as dwell-time.

In the current paper we provide a large-scale investigation of different properties of search trails that continues previ-ous studies on user behavior data and its utility for web search. Following [7], we represent search trails as tree-like structures with the clicked results as their roots and chains of forward hyperlink transitions as their branches. Being a tree, a search trail possesses its characteristics: nodes count, depth, breadth, average branch length. In addition to these trail features, we also study and evaluate some new ones, including the number of trail steps with a known inactiv-ity duration observed after them. Some of these properties of browsing trails were investigated previously in theoretical studies such as [7], but, to the best of our knowledge, their utility for web retrieval has not been yet evaluated by IR metrics. Being aggregated at the document or domain level of the clicked result, most of features significantly improve the performance of a baseline retrieval model that utilizes state-of-the-art post-search trail features. This result sup-ports our above-mentioned assumption that by going deeper beyond dwell time, we are able to learn more about clicked results X  relevance.

To sum up, the contributions of the paper are: (1) we conduct a large-scale study of a broad family of search trails X  features and their utility in web search, (2) we reveal that a substantial study of search trail characteristics may provide some additional evidences essential for information retrieval tasks.
From a search engine perspective, the most practical way to incorporate user behavior data into an existing ranking system is likely to be the development of new features re-flecting different qualities of user interactions with a web-site. One of the first papers on exploiting user behavior features extracted from browsing logs for improving quality of a competitive ranking is [1]. Among other behavior fea-tures, the authors investigated some basic statistics of user interactions with web pages including different variations of dwell time. More subtle evidences of user browsing experi-ence may be obtained by the analysis of scrolling and cursor movements [4]. As in this paper, we also look  X  X eyond dwell time X  while deriving evidences of user experience, but we also go far beyond the first page in the trail. Another pos-sible approach to utilize user behavior data is developing a text retrieval scoring based on language models of initial queries that lead to the examined document via search trails mined from a toolbar log [2]. The cumulative value of search trails was shown to exceed the value of their origin and des-tination pages when comparing them by different measures such as relevance, topic coverage, topic diversity, novelty and utility [8]. In our study, we represent trails as tree-like structures as proposed in [7]. We also adopt a part of ba-sic graph properties considered in that study. Some of these properties proved their utility in the task of best trail finding [5]. The binary feature of the clicked result that indicates the presence of any post-click trail was used for training a classifier for detection of noisy clicks [3].
All the experiments reported in this paper were performed by utilizing the user behavior data stored in the anonymized log of a popular search engine browser toolbar used by mil-lions of people across different countries. Each record in this log contains the (anonymous) toolbar user identifier, a timestamp, and the details of the browsing action, such as a query submitted by the user, URL of a visited page, or closing the browser window. We extracted all the records stored in the toolbar log during the three-month period from 11 December 2012 till 10 March 2013. This data contains 3,0B user queries, 5,3B search trails, and 16B page visits covering 2,7B different documents.

From the obtained data, we extracted search trails that start with a user query and consist of the sequential web page visits by the same user likely to be related to the same information need. To reduce the noise coming from pages unrelated to the user information need expressed by the ini-tial query, we terminated a search trail in the case of one of the following events: (1) user submitted a new query, (2) user navigated home page, entered URL into the browser ad-dress bar, or transitioned to a web page by using the browser bookmark, (3) there were no browsing activity more than 30 minutes (inactivity timeout), (4) user closed the browser window. This is the list of rules similar to those that define a search trail according to [7] with the exception of the rule  X  X heck email or logon to service X  that seems to be counter-intuitive, as, in fact, a user may still continue the search task by clicking a hyperlink taking her to a website requiring au-thentication.
In this section, we briefly describe the way of search trails construction similar to those proposed in [7]. As we already mentioned above, we treat each search trail as a tree-like structure. Nodes of these trees represent unique pages, and directed edges represent user transitions through hyperlinks between them. In such a way, forward user hyperlink tran-sitions are reflected as moves along a tree branch. Besides, if some user repeatedly visits some page previously visited at some preceding trail step, this move is represented as the user transition back to the corresponding tree node previ-ously visited by the user. After that, new pages visited by means of further hyperlink transitions, if any, constitute a new branch of the tree. If the user returns to the result page and clicks on a new document, we initiate a new tree. See an example of a resulting tree-like structure on Figure 1. In the next subsection, we describe the properties that a trail can be characterized by and which we utilize as ranking features later in this paper.
 Figure 1: A search trail represented as a tree.

Besides the above features that represent properties of the trail tree itself and thus depend only on its topology, there are also some other trail features reflecting different qualities of the user walk on the trail tree.
Figure 1 captures an example of a search trail and reports values of all its features described above.
After all the trail features were extracted for each individ-ual trail, we aggregated them over all the trails via one of the two possible ways: at the level of the first document of the search trail ( URL-level aggregation ) and at the level of that document domain ( domain-level aggregation ). As a result of each aggregation type, we obtained samples of search trails associated to either document, or domain. For each property of a trail described above, we calculated its mean ( av ), stan-dard deviation ( std ), 10th and 90th percentile ( 10th , 90th ), maximal and minimal values ( min , max ) and used them as features in our ranking model. In the next section we con-duct a study of how the described features depend on the topic of the web page domain.
In this section we study the distribution of search trail features conditioned by different topics of their initial web pages. To this end, we use a proprietary database of domains manually categorized by their topics. We implemented a Naive Bayes classifier trained on this data by employing un-igram features of domain pages. This classifier assigns each second-level domain whose documents are represented in our data set of search trails with some topic chosen from among the topics of the categorized data base. For each mean type feature aggregated on a domain level (see Section 4.3), we calculated its mean value over all the pages within the same topic. This way, we attributed to each topic mean values of each of the considered features. For a given feature, we rank all the topics according to that mean value and report the obtained results in Table 1.

As we can see, some topics have natural interpretations of falling into the corresponding top lists when be measured by the trail features. For example, a user who browses a website devoted to car selling cannot really know in advance which particular car she looks for. A user also likely explores different pages devoted to various rest facilities before she learns the possible opportunities. Similar observations can be made for such features as depth, breadth, and steps. The highest number of satisfied steps are gained by such topics as Society, Media and Science, whose content mostly con-sists of articles served to read them deeply in. Besides the results reported in Table 1, we also revealed some notable regularities at the bottom of topic lists. Among the top-ics having small values of satisfied steps are Private life and Automobiles whose steps number are rather large. Despite the large number of visits, a user is not likely to stay for a long time at pages of that topics domains. These results indicate that trail features may contain some information on domain topic that may be of use for a search system. In the next section, we describe evaluations of the trail features and their utility for web search.
While evaluating trail features, we relied on a large-scale data set of user queries randomly sampled from the web search of a major search engine. For each query, top doc-uments served by the world X  X  leading search systems were explicitly annotated by professional judges with labels from among  X  X erfect X ,  X  X xcellent X ,  X  X ood X ,  X  X air X , and  X  X ad X . In total, this data set contains 50K queries and 1,5M labeled query Basic Basic+Domain Basic+URL 1 words 67.62% 67.78% +0.23% 67.47% -0.21% 2 words 64.72% 64.89% +0.27% 64.91% +0.29% 3 words 59.08% 59.63% +0.93% 59.48% +0.67% popular 66.91% 67.16% +0.36% 67.11% +0.30% unpop. 49.88% 50.34% +0.91% 50.55% +1.33% Table 2: NDCG@10 scores gained by baseline model, buc. 1 44.11% 44.60% +1.1% 44.98% +1.97% buc. 2 59.61% 60.01% +0.67% 59.85% +0.39% buc. 3 65.84% 66.12% +0.42% 66.09% +0.37% buc. 4 67.01% 67.34% +0.49% 67.31% +0.45% Table 3: NDCG@10 scores gained at four different levels query-documents pairs. In all the evaluations, we trained Friedman X  X  gradient boosting decision trees as a ranking model. We compared the performance of suggested fea-tures to the performance of the following baseline feature set ( Basic ): a variant of BM25 score, PageRank, CTRs ag-gregated at domain and document levels, and 7 modifica-tions of dwell times investigated in [1, Table 4.1]: Time-OnPage  X  TimeOnDomain and AverageDwellTime  X  Do-mainDeviation. This baseline is thus strong enough, easily interpretable, and includes a wide range of currently known dwell-time based features.

We divided all the queries of the data set into two equal parts, first one for learning models and the second one for evaluation. In Table 2, we report performance of the three models trained by using: (1) Basic set of features; (2) Ba-sic and domain-aggregated trail features, and (3) Basic and URL-aggregated trail features. Both domain-and URL-aggregated features demonstrate their benefit on the test col-lection. A model trained on Basic features without 7 mod-ifications of dwell times performs at the level NDCG @5 = 55 . 9%. Hence, URl-based trail features earn 0 . 82% of qual-ity additionally to 2 , 9% gained by dwell times. We also measured the performance of the three models on different query classes separately. We revealed that search trail fea-tures contributed even more for long and rare queries. We explain it as follows: being aggregated by documents and domains, our search trail features propagate important evi-dences of user experience to more difficult cases where base-line user behavior features are sparse and thus not informa-tive. In order to confirm this guess, we split all the queries in the test into the four nearly equal parts representing dif-ferent level of availability of search trail data measured in the number of trails of at least 2 steps that were initiated by the given query. The obtained results reported in Ta-ble 3 indicate that trail features gain even more for queries with a lack of search trails. In Table 4, we report top 10 features according to their contribution, which is measured # Basic+Domain Basic+URL 1 QueryDomCTR 20.2 QueryDomCTR 21.7 2 BM25 17.7 BM25 20.2 3 QueryUrlCTR 14.2 QueryUrlCTR 13.1 4 QDwellTimeDev 11.0 QDwellTimeDev 10.9 5 PageRank 5.2 AvSatSteps 5.1 6 AvSatSteps 2.5 PageRank 4.7 7 AvDwellTime 2.2 TimeOnDomain 2.6 8 DwellTimeDev 1.7 CumulativeDev 1.8 9 90thDwellTime 1.4 90thDwellTime 1.7 10 10thDwellTime 1.3 AvDwellTime 1.7 Table 4: Top 10 features according to their contribution. in weighted improvement of loss function over all employ-ments of a feature during the learning process. Search trail features are marked out by italic .
We performed a large-scale study of post-click search trails and their utility in web search. We considered a rich set of trail properties as a potential source of information about user experience taking place far beyond her click on the ini-tial result page. A detailed evaluation demonstrates remark-able contribution of search trail features to a strong baseline retrieval model. To the best of our knowledge, most search trail features were not previously evaluated by IR metrics. We believe that future substantial analysis of search trails including investigation of new trail qualities and different ways of their aggregation may help to even further improve existing retrieval models in comparison to already known user behavior features. [1] E. Agichtein, E. Brill, and S. Dumais. Improving web [2] M. Bilenko and R. W. White. Mining the search trails [3] Q. Guo and E. Agichtein. Smoothing clickthrough data [4] Q. Guo and E. Agichtein. Beyond dwell time: [5] A. Singla, R. White, and J. Huang. Studying [6] K. Wang, T. Walker, and Z. Zheng. Pskip: estimating [7] R. W. White and S. M. Drucker. Investigating [8] R. W. White and J. Huang. Assessing the scenic route:
