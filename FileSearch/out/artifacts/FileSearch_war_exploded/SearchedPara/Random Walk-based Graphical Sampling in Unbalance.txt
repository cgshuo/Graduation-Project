 We investigate sampling techniques in unbalanced heteroge-neous bipartite graphs (UHBGs), which have wide applica-tions in real world web-scale social networks. We propose random walked-based link sampling and stratified sampling for UHBGs and show that they have advantages over generic random walk samplers. In addition, each sampler X  X  node degree distribution parameter estimator statistic is analyt-ically derived to be used as a quality indicator. In the ex-periments, we apply the two sampling techniques, with a baseline node sampling method, to both synthetic and real Facebook data. The experimental results show that random walk-based stratified sampler has significant advantage over node sampler and link sampler on UHBGs.
 H.3.3 [ Information Storage and Retrieval ]: Information Search and Retrieval Random walk, Network sampling, Heterogeneous bipartite graphs, Social networks
A bipartite graph is a graph whose vertices can be divided into two disjoint sets U and W such that every edge connects a vertex in U to one in W . More formally, a bipartite graph W = { w j | 1  X  j  X  | W |} , and E  X  U  X  W [9]. G is called a heterogenous bipartite graph (HBG) when its vertices from U and W model physically distinct categories [3].
Many popular online activities from social networks can be naturally modeled as HBGs [3]. In the study of employment and labor market dynamics, the individual users on LinkedIn can be considered as U , the user nodes , and the companies or employers as W , the wall nodes . Another example, from celebrities X  or public brands X  point of view, would be the fan engagement on social channels like Facebook. In this case, W consists of the public pages such Justin Bieber 1 , Samsung Mobile USA 2 , etc.; and U consists of individual Facebook Youtube, the uploaded videos comprise W ; and the users who view or comment on the videos comprise U .

The overwhelming popularity of online social networks has enriched web data with evolving interactions and com-dia is producing massive amounts of data with volume, ve-class of bipartite graphs, unbalanced heterogeneous bipar-tite graphs (UHBGs), is emerging from web-scale data. For example, Facebook may have over 1 billion active users, but only about 2,500 official public pages are registered on Face-book 3 . Now investigating Facebook user X  X  interest distribu-tion among public figures and brands would entail building a huge UHBG, where U contains a few thousand wall nodes and W contains hundreds of millions of user nodes.
One way to overcome the difficulty in processing ever-growing UHBGs is to use sampling. But generic sampling methods can be inefficient for UHBGs because of the large node degree difference among the nodes on the two sides of the UHBG. On the other hand, most UHBGs constructed from social data have known node degree distributions, which could be used to improve current generic sampling meth-ods if properly incorporated. Being aware of the large node degree difference among the nodes in UHBG, the sampler to nodes with high degrees.
In this paper, we develop two sampling techniques, link sampling and stratified sampling for UHBGs, based on ran-dom walk by incorporating the node degree distribution in-formation. Instead of simply taking uniformly random links, our random walk-based link sampling deploys Metropolis-Hastings algorithm to uniformly sample nodes. The random walk-based stratified sampling further improves on link sam-pling by selecting the user nodes more efficiently. In addi-tion, each sampler X  X  node degree distribution parameter is analytically estimated and Maximum Likelihood Estimator (MLE) is used as a metric of the sampled network. We eval-node sampling method on both synthetic and real datasets. http://www.facebook.com/JustinBieber http://www.facebook.com/SamsungMobileUSA
According to http://voxsup.com Algorithm 1: Random Walk-based Link Sampling Input : d  X  W and c  X  U , desired sampling densities
Output : W 0 , sampled wall nodes; U 0 , sampled user 1 w  X  initial wall node 2  X  W  X  0 , X  U  X  0 ,W 0  X  X  w } ,U 0  X  X } ,E 0  X  X } 3 while  X  W  X  d  X  W or  X  U  X  c  X  U do 4 u  X  a random neighbor of w 5 v  X  a random wall node from W 0 6 if  X  W  X  d  X  W then 7 w  X  a random neighbor of u 8 else 9 w  X  a random wall node from W 0 10 end 11 if True with probability P MH w,v then 12 append ( u,w ) to E 0 ; append u to U 0 13 append w to W 0 ; increment  X  U 14 increment  X  W when  X  W  X  d  X  W 15 end 16 end 17 return W 0 ,U 0 ,E 0
Bipartite graphs, especially heterogeneous bipartite graphs vestigating online user X  X  interest distribution among public brands and celebrities from UHBGs is an important topic and is a prerequisite for many popular applications such as online recommendation systems [9]. To produce real-time such as video recommendation on Youtube. In order for col-laborative filtering algorithms to efficiently serve the users, robust sampling techniques are very useful. But to the best of our knowledge, little work has been done on the sampling techniques for heterogeneous bipartite graphs. [1] and [2] investigate novel samplers in the domain of large (social) graphs. The techniques described in [1] and [2] are directly based on random walk and the Metropolis-Hastings and general as they are, these methods are not the best fit for UHBGs. Because in UHBGs the degree of a wall node can be orders of magnitude higher that that of a user node, a generic random walker will be skewed and  X  X rapped X  by ing Metropolis-Hastings algorithm would give each node an equal chance to be picked but this is done by controlling the traditional probability, which can prolong sampling time to achieve the same sampling density. In this work, we com-bine random walk and Metropolis-Hastings algorithm and UHBGs. preserve certain properties essential to a graph. A graph X  X  node degree distribution is one of such properties. Previous Algorithm 2: Random Walk-based Stratified Sampling Input : d  X  W and c  X  U , desired sampling densities
Output : W 0 , sampled wall nodes; U 0 , sampled user 1 w i  X  initial wall node 2  X  W  X  0 , X  U  X  0 ,W 0  X  X  w i } ,U 0  X  X } ,E 0  X  X } 3 while  X  W  X  d  X  W or  X  U  X  c  X  U do 4 w k  X  a random wall node from W 0 5 append w i to W 0 7 if  X  W  X  d  X  W then 8 w i  X  a random neighbor of u 9 increment  X  W with probability P MH w i ,w k 10 else 11 w i  X  a random wall node from W 0 12 end 13 if True with probability P MH w i ,w k then 14 while  X  U,i  X | w i | X   X  U  X  P w 15 u  X  a random neighbor of w i 16 s  X  a random user node from U 0 17 if True with probability P MH u,s then 18 append ( u,w ) to E 0 ; append u to U 0 19 increment  X  U , X  U,i 20 end 21 end 22 end 23 end 24 return W 0 ,U 0 ,E 0 that are ubiquitous in social networks. In our analysis, we assume that the node degrees in an UHBG follow discrete power-law distribution [7], pow (  X  ), whose probability mass function (pmf) is p pow ( k |  X  ) =  X   X  1 (  X  )  X  k  X   X  a proper pmf.

In the following analysis, X i denotes a pow (  X  W ) random variable for a wall node and Y i denotes a pow (  X  U ) random variable for a user node.  X  denotes the sampling fraction, which is calculated as the ratio of sampled nodes to all nodes in the original graph.
Random walk on graphs is a well studied topic [4]. A traditional random walker moves from current node w to the next node v by choosing v uniformly from the neighbors of w . That is, the random walker moves from w to v with probability: In addition to the basics, a practical random walker often To prevent the random walker from being stuck within a component or clique, which could happen if the walker starts very close to a major sink of the graph, a random walker usu-ally executes several times on the same graph with different starting nodes.
A major drawback of random walk sampling is the bias degrees are much more likely to be chosen because P makes the probability of a node to be visited proportional to its degree [1].
Generally speaking, link sampling (LS) randomly selects links between the heterogeneous nodes. The selected links and connecting nodes are kept in the sampled graph. Often in practice, randomly is technically interpreted as uniformly random . However, uniform LS is biased towards high-degree nodes in unbalanced graphs like UHBGs because it is imple-mented as a random walk algorithm. Such bias in the sam-pling process can be avoided by introducing proper transi-The Metropolis-Hastings algorithm [5] provides an alterna-tive P MH w,v in Equation 2.

Unlike other applications of the Metropolis-Hastings algo-rithm in random walk sampling [1], w and v in Equation 2 are not neighbors but homogeneous nodes on the same side in a UHBG. Based on this idea, Algorithm 1 implements a random walk-based LS, which has a transitional probability P w,v at each step.

Algorithm 1 is unique to UHBGs and brings several advan-tages over generic random walkers. First, it allows the two sides to be sampled independently with independent sam-does not make sense to sample them using any homoge-neous algorithms. Second, Algorithm 1 is still based on the Metropolis-Hastings algorithm and, within either side of the UHBG, can sample the nodes with even probability.
In addition to describing the LS sampling algorithm, we need to derive the Maximum Likelihood Estimator (MLE) mance. By the symmetry of UHBGs, it suffices to analyze the node degree estimation from wall nodes. Suppose, for Then we are able to implicitly solve for c  X  W ( LS ), the MLE for  X  W from link sampling, as  X  W | W |  X  0 ( c  X  W ( LS )) +  X  ( c  X  W ( LS )) the involvement of the Riemann zeta function, we cannot find satisfactory closed forms for the MLEs.
A practical problem with the random walk-based LS is that when it is applied to web-scale UHBGs, it actually can-not efficiently sample the user nodes due to the low accep-tance rate of P MH w,v in Equation 2. In UHBGs, wall nodes tend to have very high degrees, which diminishes the prob-ability of acceptance, min 1 | w | , 1 | v | .

A workaround of this problem is to use stratified sampling (SS) and sample the user nodes independently for each sam-pled wall node. Once a wall node w k is chosen by probabil-Hastings algorithm to sample the user nodes linked to w k overall user node sampling efficiency. Second, it accommo-dates the degree differences among the wall nodes. That is, the number of user nodes linked to w k visited by SS is pro-portional to the degree of w k . Algorithm 2 incorporates the above ideas and implements random walk-based SS.

In addition to Algorithm 2, SS also has a different MLE  X 
W | W | . Then for each X i , user nodes linked to w i are se-where  X  U is normalized to  X  U,i due to the indicator function. We are able to implicitly solve for each MLE d  X  U,i as We then propose c  X  U ( SS ) = P  X  W | W | i =1 d  X  U,i  X | w SS MLE for  X  U . In our estimator, parameters  X  W and  X  i,U formula for c  X  W ( SS ) is the same as c  X  W ( LS ).
Node sampling (NS) is employed as a baseline sampler in our experiments. NS randomly selects a number of nodes. selection, are kept in the sampled graph.
 Three datasets are used in our experiments: SYN Synthesized data set that contains 2000 wall nodes, FB Public data collected from Facebook X  X  Graph API from LNK Public data collected from LinkedIn. This dataset
Note that the three datasets are chosen to have different statistical characteristics. Table 1 summarizes important estimations from the three mentioned samplers: Node Sam-pler (NS), Link Sampler (LS), and Stratified Sampler (SS). Table 2 also provides the sampling densities,  X  W and  X  U each dataset.
Table 2 presents the three MLE estimates of  X  W and  X  U for the datasets SYN, FB, and LNK. The estimates obtained by using full data are regarded as ground truth. bold face cells indicate the best estimates. Overall, SS performs the best among all three methods. Both LS and SS outperform the baseline NS. Metric SYN FB LNK Wall nodes 2,000 5,831 34 User nodes 1 million 143 million 1.1 million Edges 4 million 520 million 4.2 million Edges per wall 2,000 89,179 123,529
Edges per user 4.00 3.64 3.82 users per wall 500 24,524 32,353
Parameter SYN FB LNK  X 
W 0.1000 0.0343 0.1321  X  U 0.05000 0.0006981 0.01352
True  X  W 1.830 1.706 2.383 c  X 
W NS 1.533 2.259 1.552 c  X 
W LS 1.601 1.394 2.898 c  X  W SS 1.759 1.466 2.409
True  X  U 1.295 2.289 10.75 c  X 
U NS 1.508 3.501 12.08 c  X 
U LS 1.579 3.029 7.205 c  X  U SS 1.392 1.894 9.743 Figure 1 visualizes the findings from Table 2. The  X  X ull The other three smooth curves are continuous power-law distributions generated from the parameters estimated by the three sampling methods.
In this work, we addressed the sampling problem in a class of unbalanced heterogeneous bipartite graphs (UH-BGs) from social networks and proposed two random walk-based sampling techniques for the UHBGs. The experimen-tal results showed that our techniques outperform the base-datasets. In the future, we plan to investigate the impact of each sampling technique on other statistical and topological properties of the graphs. NSF awards CCF-0833131, CNS-0830927, IIS-0905205, CCF-0938000, CCF-1029166, and OCI-1144061; DOE awards DE-FG02-08ER25848, DE-SC0001283, DE-SC0005309, DESC0005340, and DESC0007456; AFOSR award FA9550-12-1-0458. [1] M. Gjoka, M. Kurant, C. Butts, and A. Markopoulou. [2] J. Leskovec and C. Faloutsos. Sampling from large [3] L. Liu, J. Tang, J. Han, and S. Yang. Learning [4] L. Lov  X asz. Random walks on graphs: A survey, 1993. [5] N. Metropolis, A. W. Rosenbluth, M. N. Rosenbluth, Figure 1: Estimation results from three samplers on all three datasets. Estimations are compared with the actual degree distributions. [6] M. E. J. Newman, S. H. Strogatz, and D. J. Watts. [7] M. E. J. Newman, D. J. Watts, and S. H. Strogatz. [8] Y. Xie, Z. Chen, K. Zhang, Y. Cheng, A. Agrawal, [9] K. Zhang, Z. Chen, Y. Cheng, Y. Xie, D. Downey,
