 E-commerce merchants need to optimize their recommendations and sort listings on multiple dimensions beyond product attributes to include supplier considerations, long-term customer experience and the value of the sale to achieve long term success. Product recommendations for optimizing customer conversion can be modeled effectively with predictive analytic methodologies. However, supplier and customer experience elements are not easily modeled in the same manner. This paper outlines an algorithmic approach for these considerations from Expedia X  X  experiences. Recommender systems; E-commerce; Metrics; Evaluation. Expedia is the world X  X  largest Online Travel Agency and provides millions of travelers hotel recommendations every day from a plethora of diverse choices at different price and quality levels. Expedia relies on thousands of hotel partners for its inventory and earns a commission from the partner when a customer makes a purchase on its site. Techniques such as boosted decision trees and factorization machines are used to determine which offers are most interesting to customers using relevance metrics such as cli ck-through and conversion [1], [2]. While maximizing short-term results, this does not take into consideration a number of behavior-driven elements, such as having the best product and price from suppliers to offer customers in the future, ensuring good customer experiences, and stable compensation, which are all measured post conversion. Ebay outlines their considerations without reference to how they work [3]. This paper outlines how Expedia X  X  recommendation algorithm was restructured to allow for these elements and still show high-converting offers. The approach was to (1) outline the main non-conversion oriented business requirements (2) formulate separate mathematical expressions for each requirement (3) scale the terms to ensure consistency amongst themselves (4) simulate their effect on the http://dx.doi.org/10.1145/2959100.2959124 The final form of the equation was a sigmoidal whose magnitude builds on transgressions and decays linearly once the supplier has rectified their issues. Choices of coefficients were guided to promote (1) the consumer experience (2) supplier understandability and reaction, and AB tested to ensure they did not affect the overall quality of product offers. Since most suppliers have positive behavior, reacting to those who do not was relatively innocuous. General theory suggests a compensation format such as expected revenue equals probability of conversion multiplied by expected revenue per transaction. However, this was found to be too limiting in AB testing. It was best to first outline the business criteria in terms of which situations and to what level should compensation be important, and then choose curves that best fit these requirements. Smooth functions such as sigmoids and natural logs were the best performing in AB tests. It was also best to decompose the compensation to its base elements, i.e. to the percentage commission and product price. These could then be compared and recombined with the other components of the overall sort equation. The combined sigmoid-log was structured so compensation could be the distinguishing factor amongst similar offers, react more strongly to below-average outliers but have a capped effect so the underlying product offer would always dominate. It was essential to carefully balance the importance of the price of the recommended product with the other product attributes. The highest compensation is achieved by the most expensive high-margin product, but customers X  budgets need to be respected. With this approach there was no significant impact to customer conversion in AB tests and a significant increase in profit. The result of the combined algorithms gives rise to the Expedia Marketplace, where customer satisfaction is the primary goal, but product placement will judiciously shift for revenue and supplier considerations. Once the base equations were established the supplier and compensation components were refined to have a weaker effect in cases they could impact customer recommendations too strongly, such as when there are fewer product options. Linear decay below product-relevant thresholds performed as well as any other approaches in AB testing and were the simplest to implement. To make the results consistent across searches, markets and pricing environments, the three components had to be standardized. The best approach was to scale the supplier and compensation factors with respect to the distribution of the customer conversion score, as opposed to no rmalizing them. This proved simpler to implement and helped avoid mistakes, with 
