 How do real graphs evolve over time? What are  X  X ormal X  growth patterns in social, technological, and information networks? Many studies have discovered patterns in static graphs , identifying properties in a single snapshot of a large network, or in a very small number of snapshots; these in-clude heavy tails for in-and out-degree distributions, com-munities, small-world phenomena, and others. However, given the lack of information about network evolution over long periods, it has been hard to convert these findings into statements about trends over time.

Here we study a wide range of real graphs, and we observe some surprising phenomena. First, most of these graphs densify over time, with the number of edges growing super-linearly in the number of nodes. Second, the average dis-tance between nodes often shrinks over time, in contrast to the conventional wisdom that such distance parameters should increase slowly as a function of the number of nodes (like O (log n )or O (log(log n )).

Existing graph generation models do not exhibit these types of behavior, even at a qualitative level. We provide a new graph generator, based on a  X  X orest fire X  spreading pro-cess, that has a simple, intuitive justification, requires very few parameters (like the  X  X lammability X  of nodes), and pro-duces graphs exhibiting the full range of properties observed both in prior work and in the present study.  X  This research was done while on sabbatical leave at CMU.
Work partially supported by the National Science Founda-tion under Gra nts No. IIS-0209107, SENSOR-0329549, IIS-0326322, CNS-0433540, CCF-0325453, IIS-0329064, CNS-0403340, CCR-0122581, a David and Lucile Packard Foun-dation Fellowship, and also by the Pennsylvania Infrastruc-ture Technology Alliance (PITA), a partnership of Carnegie Mellon, Lehigh University and the Commonwealth of Penn-sylvania X  X  Department of Community and Economic Devel-opment (DCED). Any opinions, findings, and conclusions or recommendations expressed in this material are those of the author(s) and do not necessarily reflect the views of the National Science Foundation, or other funding parties. H.2.8 [ Database Management ]: Database Applications  X  Data Mining Measurement, Theory densification power laws, graph generators, graph mining, heavy-tailed distributions, small-world phenomena
In recent years, there has been considerable interest in graph structures arising in technological, sociological, and scientific settings: computer networks (routers or autonomous systems connected together); networks of users exchanging e-mail or instant messages; citation networks and hyperlink networks; social networks (who-trusts-whom, who-talks-to-whom, and so forth); and countless more [24]. The study of such networks has proceeded along two related tracks: the measurement of large network datasets, and the devel-opment of random graph models that approximate the ob-served properties.

Many of the properties of interest in these studies are based on two fundamental parameters: the nodes X  degrees (i.e., the number of edges incident to each node), and the distances between pairs of nodes (as measured by shortest-path length). The node-to-node distances are often studied in terms of the diameter  X  the maximum distance  X  and a set of closely related but more robust quantities including the average distance among pairs and the effective diameter (the 90th percentile distance, a smoothed form of which we use for our studies).

Almost all large real-world networks evolve over time by the addition and deletion of nodes and edges. Most of the recent models of network evolution capture the growth pro-cess in a way that incorporates two pieces of  X  X onventional wisdom: X  (A) Constant average degree assumption : The average node (B) Slowly growing diameter assumption : The diameter is
For example, the intensively-studied preferential attach-ment model [3, 24] posits a network in which each new node, when it arrives, attaches to the existing network by a con-stant number of out-links, according to a  X  X ich-get-richer X  rule. Recent work has given tight asymptotic bounds on the diameter of preferential attachment networks [6, 9]; depend-ing on the precise model, the se bounds grow l ogarithmically or even slower than logarithmically in the number of nodes.
How are assumptions (A) and (B) reflected in data on net-work growth? Empirical studies of large networks to date have mainly focused on static graphs, identifying properties of a single snapshot or a very small number of snapshots of a large network. For example, despite the intense inter-est in the Web X  X  link structure, the recent work of Ntoulas et al. [25] noted the lack of prior empirical research on the evolution of the Web. Thus, while one can assert based on these studies that, qualitatively, real networks have rela-tively small average node degrees and diameters, it has not been clear how to convert these into statements about trends over time.
 The present work: Densification laws and shrinking diameters . Here we study a range of different networks, from several domains, and we focus specifically on the way in which fundamental network properties vary with time. We find, based on the growth patterns of these networks, that principles (A) and (B) need to be reassessed. Specifically, we show the following for a broad range of networks across diverse domains. ( A ) Empirical observation: Densification power laws :The ( B ) Empirical observation: Shrinking diameters: The ef-We view the second of these findings as particularly surpris-ing: Rather than shedding light on the long-running debate over exactly how slowly the graph diameter grows as a func-tion of the number of nodes, it suggests a need to revisit standard models so as to produce graphs in which the ef-fective diameter is capable of actually shrinking over time. We also note that, while densification and decreasing diam-eters are properties that are intuitively consistent with one another (and are both borne out in the datasets we study), they are qualitatively distinct in the sense that it is possi-ble to construct examples of graphs evolving over time that exhibit one of these properties but not the other.
We can further sharpen the quantitative aspects of these findings. In particular, the densification of these graphs, as suggested by ( A ), is not arbitrary; we find that as the graphs evolve over time, they follow a version of the relation where e ( t )and n ( t ) denote the number of edges and nodes of the graph at time t ,and a is an exponent that generally lies strictly between 1 and 2. We refer to such a relation as a densification power law ,or growth power law .(Exponent a = 1 corresponds to constant average degree over time, while a = 2 corresponds to an extremely dense graph where each node has, on average, edges to a constant fraction of all nodes.)
What underlying process causes a graph to systematically densify, with a fixed exponent as in Equation (1), and to experience a decrease in effective diameter even as its size increases? This question motivates the second main contri-bution of this work: we present two families of probabilistic generative models for graphs that capture aspects of these properties. The first model, which we refer to as Community Guided Attachment (CGA), argues that graph densification can have a simple underlying basis; it is based on a decom-position of the nodes into a nested set of communities, such that the difficulty of forming links between communities in-creases with the community size. For this model, we obtain rigorous results showing that a natural tunable parameter in the model can lead to a densification power law with any desired exponent a . The second model, which is more sophisticated, exhibits both densification and a decreasing effective diameter as it grows. This model, which we refer to as the Forest Fire Model , is based on having new nodes at-tach to the network by  X  X urning X  through existing edges in epidemic fashion. The mathematical analysis of this model appears to lead to novel questions about random graphs that are quite complex, but through simulation we find that for a range of parameter values the model exhibits realistic be-havior in densification, distances, and degree distributions. It is thus the first model, to our knowledge, that exhibits this full set of desired properties.

Accurate properties of network growth, together with mod-els supporting them, have implications in several contexts. sessing the quality of graph generators. Synthetic graphs are important for  X  X hat if X  scenarios, for extrapolations, and for simulations, when real graphs are impossible to collect (like, e.g., a very large friends hip graph between people). world graphs are increasingly available, with sizes ranging from the millions to billions of nodes. There are many known algorithms to compute interesting measures (shortest paths, centrality, betweenness, etc), but most of these algorithms become impractical for large graphs. Thus sampling is essen-tial  X  but sampling from a graph is a non-trivial problem. Densification laws can help discard bad sampling methods, by providing means to reject sampled subgraphs. lot of snapshots of their past. What can we say about their future? Our results help form a basis for validating scenarios for graph evolution. agement: In many network settings,  X  X ormal X  behavior will produce subgraphs that obey densification laws (with a pre-dictable exponent) and other properties of network growth. If we detect activity producing structures that deviate sig-nificantly from this, we can flag it as an abnormality; this can potentially help with the detection of e.g. fraud, spam, or distributed denial of service (DDoS) attacks.

The rest of the paper is organized as follows: Section 2 sur-veys the related work. Section 3 gives our empirical findings on real-world networks across diverse domains. Section 4 de-scribes our proposed models and gives results obtained both through analysis and simulation. We conclude and discuss the implications of our findings in Section 5.
Research over the past few years has identified classes of properties that many real-world networks obey. One of the main areas of focus has been on degree power laws ,show-ing that the set of node degrees has a heavy-tailed distri-bution. Such degree distributions have been identified in phone call graphs [1], the Internet [11], the Web [3, 14, 20], click-stream data [5] and for a who-trusts-whom social net-work [8]. Other properties include the  X  X mall-world phe-nomenon, X  popularly known as  X  X ix degrees of separation X , which states that real graphs have surprisingly small (aver-age or effective) diameter (see [4, 6, 7, 9, 17, 22, 30, 31]).
In parallel with empirical studies of large networks, there has been considerable work on probabilistic models for graph generation. The discovery of degree power laws led to the development of random graph models that exhibited such degree distributions, including the family of models based on preferential attachment [2, 3, 10] and the related copying model [18, 19]. See [23, 24] for surveys of this area.
It is important to note the fundamental contrast between one of our main findings here  X  that the average number of out-links per node is growing polynomially in the network size  X  and body of work on degree power laws. This earlier work developed models that almost exclusively used the as-sumption of node degrees that were bounded by constants (or at most logarithmic functions) as the network grew; our findings and associated model challenge this assumption, by showing that networks across a number of domains are be-coming denser .

The bulk of prior work on the study of network datasets has focused on static graphs, identifying patterns in a sin-gle snapshot, or a small number of network snapshots (see also the discussion of this point by Ntoulas et al. [25]). Two exceptions are the very recent work of Katz [16], who in-dependently discovered densification power laws for citation networks, and the work of Redner [28], who studied the evolution of the citation graph of Physical Review over the past century. Katz X  X  work builds on his earlier research on power-law relationships between the size and recognition of professional communities [15]; his work on densification is focused specifically on citations, and he does not propose a generative network model to account for the densification phenomenon, as we do here. Redner X  X  work focuses on a range of citation patterns ove r time that are different from the network properties we study here.

Our Community Guided Attachment (CGA) model, which produces densifying graphs, is an example of a hierarchical graph generation model, in which the linkage probability be-tween nodes decreases as a function of their relative distance in the hierarchy [8, 17, 31]. Again, there is a distinction be-tween the aims of this past work and our model here; where these earlier network models were seeking to capture proper-ties of individual snapshots of a graph, we seek to explain a time evolution process in which one of the fundamental pa-rameters, the average node degree, is varying as the process unfolds. Our Forest Fire Model follows the overall frame-work of earlier graph models in which nodes arrive one at a time and link into the existing structure; like the copy-ing model discussed above, for example, a new node creates links by consulting the links of existing nodes. However, the recursive process by which nodes in the Forest Fire Model creates these links is quite different, leading to the new prop-erties discussed in the previous section. (c) Autonomous Systems (d) Affiliation network Figure 1: The average node out-degree over time. Notice that it increases, in all 4 datasets. That is, all graphs are densifying .
We study the temporal evolution of several networks, by observing snapshots of these networks taken at regularly spaced points in time. We use datasets from four differ-ent sources; for each, we have information about the time when each node was added to the network over a period of several years  X  this enables the construction of a snapshot at any desired point in time. For each of datasets, we find a version of the densification power law from Equation (1), e ( t )  X  n ( t ) a ; the exponent a differs across datasets, but re-mains remarkably stable over time. We also find that the effective diameter decreases i n all the datasets considered.
The datasets consist of two citation graphs for different areas in the physics literature, a citation graph for U.S. patents, a graph of the Internet, and five bipartite affiliation graphs of authors with papers they authored. Overall, then, we consider 9 different datasets from 4 different sources.
Here we describe the datasets we used, and our findings related to densification. For each graph dataset, we have, or can generate, several time snapshots, for which we study the number of nodes n ( t ) and the number of edges e ( t )at each timestamp t .Wedenoteby n and e the final number of nodes and edges. We use the term Densification Power Law plot (or just DPL plot) to refer to the log-log plot of number of edges e ( t ) versus number of nodes n ( t ).
We first investigate a citation graph provided as part of the 2003 KDD Cup [12]. The HEP X  X H (high energy physics theory) citation graph from th ee-printarXivcoversallthe citations within a dataset of n =29,555 papers with e = 352,807 edges. If a paper i cites paper j , the graph contains a di-rected edge from i to j . Ifapapercites,oriscitedby,a paper outside the dataset, the graph does not contain any information about this. We refer to this dataset as arXiv .
This data covers papers in the period from January 1993 to April 2003 (124 months). It begins within a few months of the inception of the arXiv, and thus represents essentially the complete history of its HEP X  X H section. For each month m (1  X  m  X  124) we create a citation graph using all papers published before month m . For each of these graphs, we plot the number of nodes versus the number of edges on a logarithmic scale and fit a line.

Figure 2(a) shows the DPL plot; the slope is a =1 . 68 and corresponds to the exponent in the densification law. Notice that a is significantly higher than 1, indicating a large deviation from linear growth. As noted earlier, when a graph has a&gt; 1, its average degree increases over time. Figure 1(a) exactly plots the average degree  X  d over time, and it is clear that  X  d increases. This means that the average length of the bibliographies of papers increases over time.
There is a subtle point here that we elaborate next: With almost any network dataset, one does not have data reaching all the way back to the network X  X  birth (to the extent that this is a well-defined notion). We refer to this as the problem of the  X  missing past . X  Due to this, there will be some ef-fect of increasing out-degree simply because edges will point to nodes prior to the beginning of the observation period. We refer to such nodes as phantom nodes , with a similar definition for phantom edges . In all our datasets, we find that this effect is relatively minor once we move away from the beginning of the observation period; on the other hand, the phenomenon of increasing degree continues through to the present. For example, in arXiv, nodes over the most recent years are primarily referencing non-phantom nodes; we observe a knee in Figure 1(a) in 1997 that appears to be attributable in large part to the effect of phantom nodes. (Later, when we consider a graph of the Internet, we will see a case where comparable properties hold in the absence of any  X  X issing past X  issues.)
We also experimented with a second citation graph, taken from the HEP X  X H section of the arXiv, which is about the same size as our first arXiv dataset. It exhibits the same behavior, with the densification exponent a =1 . 56. The plot is omitted for brevity. Next, we consider a U.S. patent dataset maintained by the National Bureau of Economic Research [13]. The data set spans 37 years (January 1, 1963 to December 30, 1999), and includes all the utility patents granted during that period, totaling n =3,923,922 patents. The citation graph includes all citations made by patents granted between 1975 and 1999, totaling e =16,522,438 citations. Because the dataset begins in 1975, it too has a  X  X issing past X  issue, but again the effect of this is minor as one moves away from the first few years.

We follow the same procedure as with arXiv. For each year Y from 1975 to 1999, we create a citation network on patents up to year Y , and give the DPL plot, in Figure 2(b). As with the arXiv citation network, we observe a high den-sification exponent, in this case a =1 . 66.

Figure 1(b) illustrates the increasing out-degree of patents over time. Note that this plot does not incur any of the complications of a bounded observation period, since the patents in the dataset include complete citation lists, and here we are simply plotting the average size of these as a function of the year. (c) Autonomous Systems (d) Affiliation network Figure 2: Number of edges e ( t ) versus number of nodes n ( t ) , in log-log scales, for several graphs. All 4 graphs obey the Densification Power Law, with a consistently good fit. Slopes: a = 1.68, 1.66, 1.18 and 1.15, respectively.
The graph of routers comprising the Internet can be or-ganized into sub-graphs called Autonomous Systems (AS). Each AS exchanges traffic flows with some neighbors (peers). We can construct a communication network of who-talks-to-whom from the BGP (Border Gateway Protocol) logs. We use the the Autonomous Systems (AS) dataset from [26]. The dataset contains 735 daily instances which span an in-terval of 785 days from November 8 1997 to January 2 2000.
In contrast to citation networks, where nodes and edges only get added (not deleted) over time, the AS dataset also exhibits both the addition and deletion of the nodes and edges over time.

Figure 2(c) shows the DPL plot for the Autonomous Sys-tems dataset. We observe a clear trend: Even in the pres-ence of noise, changing external conditions, and disruptions to the Internet we observe a strong super-linear growth in the number of edges over more than 700 AS graphs. We show the increase in the average node degree over time in Figure 1(c). The densification exponent is a =1 . 18, lower than the one for the citation networks, but still clearly greater than 1.
Using the arXiv data, we also constructed bipartite affil-iation graphs . There is a node for each paper, a node for each person who authored at least one arXiv paper, and an edge connecting people to the papers they authored. Note that the more traditional co-authorship network is implicit in the affiliation network: two people are co-authors if there is at least one paper joined by an edge to each of them.
We studied affiliation networks derived from the five largest categories in the arXiv (ASTRO X  X H, HEP X  X H, HEP X  X H, COND X  X AT and GR X  X C). We place a time-stamp on each node: the submission date of each paper, and for each per-son, the date of their first submission to the arXiv. The data for affiliation graphs covers the period from April 1992 to March 2002. The smallest of the graphs (category GR X  QC) had 19,309 nodes (5,855 authors, 13,454 papers) and 26,169 edges. ASTRO X  X H is the largest graph, with 57,381 nodes (19,393 authors, 37,988 papers) and 133,170 edges. It has 6.87 authors per paper; most of the other categories also have similarly high numbers of authors per paper.
For all these affiliation graphs we observe similar phe-nomena, and in particular we have densification exponents between 1 . 08 and 1 . 15. Due to lack of space we present the complete set of measurements only for ASTRO X  X H, the largest affiliation graph. Figures 1(d) and 2(d) show the increasing average degree over time, and a densification ex-ponent of a =1 . 15.
We now discuss the behavior of the effective diameter over time, for this collection of network datasets. Following the conventional wisdom on this topic, we expected the under-lying question to be whether we could detect the differences among competing hypotheses concerning the growth rates of the diameter  X  for example, the difference between loga-rithmic and sub-logarithmic growth. Thus, it was with some surprise that we found the effective diameters to be actually decreasing over time (Figure 3).

Let us make the definitions underlying the observations concrete. We say that two nodes in an undirected network are connected if there is an path between them; for each nat-ural number d ,let g ( d ) denote the fraction of connected node pairs whose shortest connecting path has length at most d . The hop-plot for the network is the set of pairs ( d, g ( d )); it thus gives the cumulative distribution of distances between connected node pairs. We extend the hop-plot to a function defined over all positive real numbers by linearly interpolat-ing between the points ( d, g ( d )) and ( d +1 ,g ( d +1)) for each d , and we define the effective diameter of the network to be the value of d at which this function achieves the value 0 . 9. (Note that this varies slightly from an alternate definition of the effective diameter used in earlier work: the minimum value d such that at least 90% of the connected node pairs areatdistanceatmost d . Our variation smooths this defi-nition by allowing it to take non-integer values.) The effec-tive diameter is a more robust quantity than the diameter (defined as the maximum distance over all connected node pairs), since the diameter is prone to the effects of degener-ate structures in the graph (e.g. very long chains). However, the effective diameter and diameter tend to exhibit qualita-tively similar behavior.

For each time t (as in the previous subsection), we create a graph consisting of nodes up to that time, and compute the effective diameter of the undirected version of the graph.
Figure 3 shows the effective diameter over time; one ob-serves a decreasing trend for all the graphs. We performed a comparable analysis to what we describe here for all 9 graph datasets in our study, with very similar results. For the citation networks in our study, the decreasing effective diameter has the following interpretation: Since all the links out of a node are  X  X rozen X  at the moment it joins the graph, the decreasing distance between pairs of nodes appears to be the result of subsequent papers acting as  X  X ridges X  by cit-ing earlier papers from disparate areas. Note that for other graphs in our study, such as the AS dataset, it is possible for an edge between two nodes to appear at an arbitrary time after these two nodes join the graph.

We note that the effective diameter of a graph over time is necessarily bounded from below, and the decreasing patterns of the effective diameter in the plots of Figure 3 are consis-tent with convergence to some asymptotic value. However, understanding the full  X  X imiting behavior X  of the effective diameter over time, to the extent that this is even a well-defined notion, remains an open question.
Given the unexpected nature of this result, we wanted to verify that the shrinking diameters were not attributable to artifacts of our datasets or analyses. We explored this issue in a number of ways, which we now summarize; the conclu-sion is that the shrinking diameter appears to be a robust, and intrinsic, phenomenon. Specifically, we performed ex-periments to account for (a) possible sampling problems, (b) the effect of disconnected components, (c) the effect of the  X  X issing past X  (as in the previous subsection), and (d) the dynamics of the emergence of the giant component.
Possible sampling problems: Computing shortest paths among all node pairs is computationally prohibitive for graphs of our scale. We used several different approximate meth-ods, obtaining almost identical results from all of them. In particular, we applied the Approximate Neighborhood Function (ANF) approach [27] (in two different implementa-tions), which can estimate effective diameters for very large graphs, as well as a basic sampling approach in which we ran exhaustive breadth-first search from a subset of the nodes chosen uniformly at random. The results using all these methods were essentially identical.

Disconnected components: One can also ask about the ef-fect of small disconnected components. All of our graphs have a single giant component  X  a connected component (or weakly connected component in the case of directed graphs, ignoring the direction of the edges) that accounts for a sig-nificant fraction of all nodes. For each graph, we computed effective diameters for both the entire graph and for just the giant component; again, our results are essentially the same using these two methods.  X  X issing Past X  effects: A third issue is the problem of the  X  X issing past, X  the same general issue that surfaced in the previous subsection when we considered densification. In particular, we must decide how to handle citations to papers that predate our earliest recorded time. (Note that the missing past is not an issue for the AS network data, where the effective diameter also decreases.)
To understand how the diameters of our networks are af-fected by this unavoidable problem, we perform the follow-ing test. We pick some positive time t 0 &gt; 0, and determine what the diameter would look like as a function of time, if this were the beginning of our data . We can then put back in the nodes and the edges from before time t 0 , and study how much the diameters change. If this change is small  X  or at least if it does not affect the qualitative conclusions  X  then it provides evidence that the missing past is not influencing the overall result.

Specifically, we set this cut-off time t 0 to be the beginning of 1995 for the arXiv (since we have data from 1993), and to be 1985 for the patent citation graph (we have data from 1975). We then compared the results of three measurements: diameter of the graph X  X  giant component. of the post-t 0 subgraph using all nodes and edges. This means that for each time t ( t&gt;t 0 ) we create a graph using all nodes dated before t . We then compute the effective diameter of the subgraph of the nodes dated between t and t . To compute the effective diameter we can use all edges and nodes (including those dated before t 0 ). This experiment measures the diameter of the graph if we knew the full (pre-t 0 ) past  X  the citations of the papers which we have intentionally excluded for this test. way as in previous experiment, but then for all nodes dated before t 0 we delete all their out-links. This creates the graph we would have gotten if we had started collecting data only at time t 0 .

In Figure 3, we superimpose the effective diameters using the three different techniques. If the missing past does not play a large role in the diameter, then all three curves should lie close to one another. We observe this is the case for the arXiv citation graphs. For the arXiv paper-author affilia-tion graph, and for the patent citation graph, the curves are quite different right at the cut-off time t 0 (where the effect of deleted edges is most pronounced), but they quickly align with one another. As a result, it seems clear that the contin-ued decreasing trend in the effective diameter as time runs to the present is not the result of these boundary effects.
Emergence of giant component: A final issue is the dynam-ics by which the giant component emerges. For example, in the standard Erd  X  os-Renyi random graph model (which has a substantially different flavor from the growth dynamics of the graphs here), the diameter of the giant component is quite large when it first appears, and then it shrinks as edges continue to be added. Could shrinking diameters in some way be a symptom of emergence of giant component?
It appears fairly clear that this is not the case. Figure 4 shows the fraction of all nodes that are part of the largest connected component (GCC) over time. We plot the size of the GCC for the full graph and for a graph where we had no Figure 4: The fraction of nodes that are part of the giant connected component over time. We see that after 4 years the 90% of all nodes in the graph belong to giant component. past  X  i.e., where we delete all out-links of the nodes dated before the cut-off time t 0 . Because we delete the out-links of the pre-t 0 nodes the size of GCC is smaller, but as the graph grows the effect of these deleted links becomes negligible.
We see that within a few years the giant component ac-counts for almost all the nodes in the graph. The effective diameter, however, continues to steadily decrease beyond this point. This indicates that the decrease is happening in a  X  X ature X  graph, and not because many small disconnected components are being rapidly glued together.

Based on all this, we believe that the decreasing diameters in our study reflect a fundamental property of the underlying networks. Understanding the possible causes of this prop-erty, as well as the causes of the densification power laws discussed earlier, will be the subject of the next section.
We have now seen that densification power laws and shrink-ing effective diameters are properties that hold across a range of diverse networks. Moreover, existing models do not capture these phenomena. We would like to find some sim-ple, local model of behavior, which could naturally lead to the macroscopic phenomena we have observed. We present increasingly sophisticated models, all of which naturally achieve the observed densification; the last one (the  X  X orest Fire X  model) also exhibits shrinking diameter and all the other main patterns known (including heavy-tailed in-and out-degree distributions).
What are the underlying principles that drive all our ob-served graphs to obey a densification power law, without central control or coordination? We seek a model in which the densification exponent arises from intrinsic features of the process that generates nodes and edges. While one could clearly define a graph model in which e ( t )  X  n ( t ) a having each node, when it arrives at time t , generate n ( t ) out-links  X  the equivalent of positing that each author of a paper in a citation network has a rule like,  X  X ite n a  X  other documents, X  hard-wired in his or her brain  X  such a model would not provide any insight into the origin of the exponent a , as the exponent is unrelated to the operational details by which the network is being constructed. Instead, our goal is to see how underlying properties of the network evolution process itself can affect the observed densification behavior.
We take the following approach. Power laws often ap-pear in combination with self-similar datasets [29]. Our approach involves two steps, both of which are based on self-similarity. Thus, we begin by searching for self-similar, recursive structures. In fact, we can easily find several such recursive sets: For example, computer networks form tight groups (e.g., based on geography), which consist of smaller groups, and so on, recursively. Similarly for patents: they also form conceptual groups ( X  X hemistry X ,  X  X ommunications X , etc.), which consist of sub-groups, and so on recursively. Several other graphs feature such  X  X ommunities within com-munities X  patterns. For example, it has been argued (see e.g. [31] and the references therein) that social structures exhibit self-similarity, with individuals organizing their so-cial contacts hierarchically. Moreover, pairs of individuals belonging to the same small community form social ties more easily than pairs of individuals who are only related by membership in a larger community. In a different domain, Menczer studied the frequency of links among Web pages that are organized into a topic hierarchy such as the Open Directory [21]. He showed that link density among pages decreases with the height of their least common ancestor in the hierarchy. That is, two pages on closely related topics are more likely to be hyperlinked than are two pages on more distantly related topics.
 This is the first, qualitative step in our explanation for the Densification Power Law. The second step is quantitative. We will need a numerical measure of the difficulty in crossing communities; we call this the Difficulty Constant ,andwe define it more precisely below.
We represent the recursive structure of communities-within-communities as a tree  X , of height H .Weshallshowthat even a simple, perfectly balanced tree of constant fanout b is enough to lead to a densification power law, and so we will focus the analysis on this basic model.

The nodes V in the graph we construct will be the leaves of the tree; that is, n = | V | . (Note that n = b H .) Let h ( v, w ) define the standard tree distance of two leaf nodes v and w : that is, h ( v, w ) is the height of their least common ancestor (the height of the smallest sub-tree containing both v and w ).

We will construct a random graph on a set of nodes V by specifying the probability that v and w form a link as a function f of h ( v, w ). We refer to this function f as the Difficulty Function . What should be the form of f ? Clearly, it should decrease with h ; but there are many forms such a decrease could take.

The form of f that works best for our purposes comes from the self-similarity arguments we made earlier: We would like f to be scale-free; that is, f ( h ) /f ( h  X  1) should be level-independent and thus constant. The only way to achieve level-independence is to define f ( h )= f (0)  X  c  X  h . Setting f (0) to 1 for simplicity, we have: where c  X  1. We refer to the constant c as the Diffi-culty Constant . Intuitively, cross-communities links become harder to form as c increases.

This completes our development of the model, which we refer to as Community Guided Attachment : If the nodes of a graph belong to communities-within-communities, and if the cost for cross-community edges is scale-free (Eq. (2)), the Densification Power Law follows naturally. No central control or exogenous regulati ons are needed to force the re-sulting graph to obey this property. In short, self-similarity itself leads to the Densification Power Law.

Theorem 1. In the Community Guided Attachment ran-dom graph model just defined, the expected average out-degree  X  d of a node is proportional to:
Proof. For a given no de v , the expected out-degree (num-ber of links)  X  d of the node is proportional to  X  d =
There are three different cases: if 1  X  c&lt;b then by summing the geometric series we obtain  X  d = b
In the case when c = b the series sums to  X  d = The last case is when Difficulty Constant c is greater than branching factor b ( c&gt;b ), then the sum in Eq. (6) converges to a constant even if carried out to infinity, and so we obtain  X  d =  X (1).

Note that when c&lt;b , we get a densification law with ex-ponent greater than 1: the expected out-degree is n 1  X  log and so the total number of edges grows as n a where a = 2  X  log exponent a ranges over all values in the interval (1 , 2].
Corollary 1. If the Difficulty Function is scale-free ( f ( h ) = c  X  h ,with 1 &lt;c&lt;b ), then the Community Guided At-tachment obeys the Densification Power Law with exponent
So far we have discussed a model in which nodes are first organized into a nested set of communities, and then they start forming links. We now extend this to a setting in which nodes are added over time, and the nested structure deepens to accommodate them. We will assume that a node only creates out-links at the moment it is added (and hence, only to nodes already present); this is natural for domains like citation networks in which a paper X  X  citations are written at the same time as the paper itself.

Specifically, the model is as follows. Rather than having graph nodes reside only at the leaves of the tree  X , there will now be a graph node corresponding to every internal node of  X  as well. Initially, there is a single node v in the graph, and our tree  X  consists just of v .Intimestep t ,wegofrom acomplete b -ary tree of depth t  X  1 to one of depth t ,by adding b new leaves as children of each current leaf. Each of these new leaves will contain a new node of the graph.
Now, each new node forms out-links according to a variant of the process in Section 4.1.1. However, since a new node has the ability to link to internal nodes of the existing tree, not just to other leaves, we need to extend the model to incorporate this. Thus, we define the tree-distance d ( v, w ) between nodes v and w to be the length of a path between them in  X   X  this is the length of the path from v up to the least common ancestor of v and w , plus the length of the path from this least common ancestor down to w .Note that if v and w are both leaves, then d ( v, w )=2 h ( v, w ), following the definition of h ( v, w ) given previously.
The process of forming out-links is now as follows: For a constant c ,node v forms a link to each node w , indepen-dently, with probability c  X  d ( v,w ) / 2 . (Note that dividing by 2 in the exponent means this model gives the same probability as basic model in the case when both v and w are leaves.)
Like the first model, this process produces a densification law with exponent a =2  X  log b ( c )when c&lt;b . However, for c&lt;b 2 , it also yields a heavy-tailed distribution of in-degrees  X  something that the basic model did not produce. We describe this in the following theorem; due to space lim-itations, we omit the proof from this version of the paper.
Theorem 2. The dynamic Community Guided Attach-ment model just defined has the following properties.
Thus, the dynamic Community Guided Attachment model exhibits three qualitatively different behaviors as the pa-rameter c varies: densification with heavy-tailed in-degrees; then constant average degree with heavy-tailed in-degrees; and then constant in-and out-degrees with high probability. Note also the interesting fact that the Zipf exponent is max-imized for the value of c right at the onset of densification.
Finally, we have experimented with versions of the dy-namic Community Guided Attachment model in which the tree is not balanced, but rather deepens more on the left branches than the right (in a recursive fashion). We have also considered versions in which a single graph node can  X  X eside X  at two different nodes of the tree  X , allowing for graph nodes to be members of different communities. We do not go into further details of these extensions in this ver-sion of the paper.
Community Guided Attachment and its extensions show how densification can arise naturally, and even in conjunc-tion with heavy-tailed in-degree distributions. However, it is not a rich enough class of models to capture all the prop-erties in our network datasets. In particular, we would like to capture both the shrinking effective diameters that we have observed, as well as the fact that real networks tend to have heavy-tailed out-degree distributions (though generally not as skewed as their in-degree distributions). The Com-munity Guided Attachment models do not exhibit either of these properties.

Specifically, our goal is as follows. Given a (possibly empty) initial graph G , and a sequence of new nodes v 1 ... v k , we want to design a simple randomized process to successively link v i to nodes of G ( i =1 ,...k )sothatthe resulting graph G final will obey all of the following patterns: heavy-tailed distributions for in-and out-degrees, the Den-sification Power Law, and shrinking effective diameter.
We are guided by the intuition that such a graph generator may arise from a combination of the following components: Note that we will not be assuming a community hierarchy on nodes, and so it is not enough to simply vary the Community Guided Attachment model.

Based on this, we introduce the Forest Fire Model ,which is capable of producing all these properties. To set up this model, we begin with some intuition that also underpinned Community Guided Attachment: nodes arrive in over time; each node has a  X  X enter of gravity X  in some part of the net-work; and its probability of linking to other nodes decreases rapidly with their distance from this center of gravity. How-ever, we add to this picture the notion that, occasionally, a new node will produce a very large number of out-links. Such nodes will help cause a more skewed out-degree distri-bution; they will also serve as  X  X ridges X  that connect for-merly disparate parts of the network, bringing the diameter down.
Following this plan, we now define the most basic version of the model. Essentially, nodes arrive one at a time and form out-links to some subset of the earlier nodes; to form out-links, a new node v attaches to a node w in the exist-ing graph, and then begins  X  X urning X  links outward from w , linking with a certain probability to any new node it discovers. One can view such a process as intuitively corre-sponding to a model by which an author of a paper identifies references to include in the bibliography. He or she finds a first paper to cite, chases a subset of the references in this paper (modeled here as random), and continues recursively with the papers discovered in this way. Depending on the bibliographic aids being used in this process, it may also be possible to chase back-links to papers that cite the paper under consideration. Similar scenarios can be considered for social networks: a new computer science graduate student arrives at a university, meets some older CS students, who introduce him/her to their friends (CS or non-CS), and the introductions may continue recursively.
 We formalize this process as follows, obtaining the Forest Fire Model. To begin with, we will need two parameters, a forward burning probability p ,anda backward burning ratio r , whose roles will be described below. Consider a node v joining the network at time t&gt; 1, and let G t be the graph constructed thus far. ( G 1 will consist of just a single node.) Node v forms out-links to nodes in G t according to the following process. (i) v first chooses an ambassador node w uniformly at ran-(ii) We generate a random number x that is binomially (iii) v forms out-links to w 1 ,w 2 ,...,w x , and then applies
Thus, the  X  X urning X  of links in Forest Fire model begins at w , spreads to w 1 ,...,w x , and proceeds recursively until it dies out. In terms of the intuition from citations in papers, the author of a new paper v initially consults w , follows a subset of its references (potentially both forward and back-ward) to the papers w 1 ,...,w x , and then continues accu-mulating references recursivel ybyconsultingthesepapers. The key property of this model is that certain nodes pro-duce large  X  X onflagrations, X  burning many edges and hence forming many out-links before the process ends.
 Despite the fact that there is no explicit hierarchy in the Forest Fire Model, as there was in Community Guided At-tachment, there are some subtle similarities between the models. Where a node in Community Guided Attachment was the child of a parent in the hierarchy, a node v in the Forest Fire Model also has an  X  X ntry point X  via its chosen ambassador node w . Moreover, just as the probability of linking to a node in Community Guided Attachment de-creased exponentially in the tree distance, the probability that a new node v burns k successive links so as to reach a node u lying k steps away is exponentially small in k .(Of course, in the Forest Fire Model, there may be many paths that could be burned from v to u , adding some complexity to this analogy.)
In fact, our Forest Fire Model combines the flavors of sev-eral older models, and produces graphs qualitatively match-ing their properties. We establish this by simulation, as we describe below, but it is also useful to provide some intuition for why these properties arise. richer X  flavor: highly linked nodes can easily be reached by a newcomer, no matter which ambassador it starts from. vor: a newcomer copies several of the neighbors of his/her ambassador (and then continues this recursively). formation provides a reasonable chance for a new node to burn many edges, and thus produce a large out-degree. lot of links near the community of his/her ambassador; a few links beyond this, and significantly fewer farther away. Intuitively, this is analogous to the Community Guided At-tachment, although without an explicit set of communities. Forest Fire Model should exhibit a shrinking diameter as it grows. Graph densification is helpful in reducing the diame-ter, but it is important to note that densification is certainly not enough on its own to imply shrinking diameter. For example, the Community Guided Attachment model obeys the Densification Power Law, but it can be shown to have a diameter that slowly increases.

Rigorous analysis of the Forest Fire Model appears to be quite difficult. However, in simulations, we find that by varying just the two parameters p and r , we can produce graphs that densify ( a&gt; 1), exhibit heavy-tailed distribu-tions for both in-and out-degrees (Fig. 6), and have diam-eters that decrease. This is illustrated in Figure 5, which shows plots for the effective diameter and the Densification Power Law exponent as a function of time for some selec-tions of p and r . We see from these plots that, depending on the forward and backward burning parameters, the Forest Fire Model is capable of generating sparse or dense graphs, with effective diameters that either increase or decrease.
Our basic version of the Forest Fire Model exhibits rich structure with just two parameters. By extending the model in natural ways, we can fit observed network data even more closely. We propose two natural extensions:  X  orphans  X  X nd multiple ambassadors.  X  Orphans  X : In both the patent and arXiv citation graphs, there are many isolated nodes, that is, documents with no citations into the corpus. For example, many papers in the arXiv only cite non-arXiv papers. We refer to them as or-phans . Our basic model does not produce orphans, since each node always links at least to its chosen ambassador. However, it is easy to incorporate orphans into the model in two different ways. We can start our graphs with n 0 &gt; 1 nodes at time t = 1; or we can have some probability q&gt; 0 that a newcomer will form no links (not even to its ambas-sador).

We find that such variants of the model have a more pro-nounced decrease in the effective diameter over time, with Figure 5: The DPL plot and diameter for Forest Fire model. Top: sparse graph ( a =1 . 01 &lt; 2 ), with increasing diameter (forward burning probability: p =0 . 35 , backward probability: p b =0 . 20 ). Middle: (most realistic case:) densifying graph ( a =1 . 21 &lt; 2 ) with decreasing diameter ( p =0 . 37 , p b =0 . 32 ). Bot-tom: dense graph ( a  X  2 ), with decreasing diameter ( p =0 . 38 , p b =0 . 35 ). large distances caused by groups of nodes linking to differ-ent orphans gradually diminishing as further nodes arrive to connect them together.

Multiple ambassadors : We experimented with allowing newcomers to choose more than one ambassador with some positive probability. That is, rather than burning links start-ing from just one node, there is some probability that a newly arriving node burns links starting from two or more. This extension also accentuates the decrease in effective di-ameter over time, as nodes linking to multiple ambassadors serve to bring together formerly far-apart parts of the graph.
In order to understand the densification and diameter properties of graphs produced by the Forest Fire Model, we have explored the full parameter space of the basic model in terms of its two underlying quantities: the forward burning probability p and the backward burning ratio r .

Figure 7 shows how the densification exponent and the ef-fective diameter depend on the values of these parameters. The densification exponent a is computed as in Section 3, by fitting a relation of the form e ( t )  X  n ( t ) a .Fortheef-fective diameter, we fit a logarithmic function of the form diameter =  X  log t +  X  (where t is the current time, and Figure 6: Degree distribution of a sparse graph with decreasing diameter (forward burning probability: 0.37, backward probability: 0.32).
 Figure 7: Contour plots: The Densification Power Law exponent a (left) and diameter log-fit  X  factor (right) over the parameter space (forward-burning probability and ratio). hence the current number of vertices) to the last half of the effective diameter plot; we then report the coefficient  X  . Thus,  X &lt; 0 corresponds to decreasing effective diameter over time.

Figure 7(a) gives the contour plot of the densification ex-ponent a . The white color is for a = 1 (the graph maintains constant average degree), while the black color is for a =2 (the graph is  X  X ense X , that is, the number of edges grows quadratically with the number of nodes, as, e.g., in the case of a clique). The desirable grey region is in-between; we ob-serve that it is very narrow: a increases dramatically along a contour line, suggesting a sharp transition.

Figure 7(b) gives the contour plot for the factor  X  in the effective diameter fit, as defined above. The boundary be-tween decreasing and increasing effective diameter is shifted somewhat from the contour line for densification, indicating that even the basic Forest Fire Model is able to produce sparse graphs (with densification exponent near 1) in which the effective diameter decreases.

For lack of space, we omit the phase plots with orphans and multiple ambassadors, which show similar behavior.
Despite the enormous recent interest in large-scale net-work data, and the range of interesting patterns identified for static snapshots of graphs (e.g. heavy-tailed distribu-tions, small-world phenomena), there has been relatively little work on the properties of the time evolution of real graphs. This is exactly the focus of this work. The main findings and contributions follow: dard modeling assumption that the average out-degree re-mains constant over time, we discover that real graphs have out-degrees that grow over time, following a natural pattern (Eq. (1)). the standard assumption of slowly growing diameters does not hold in a range of real networks; rather, the diame-ter may actually exhibit a gradual decrease as the network grows. model can lead to the Densification Power Law, and that it needs only one parameter to achieve it. two parameters, which is able to capture patterns observed both in previous work and in the current study: heavy-tailed in-and out-degrees, the Densification Power Law, and a shrinking diameter.

Our results have potential relevance in multiple settings, including  X  X hat if X  scenarios; in forecasting of future pa-rameters of computer and social networks; in anomaly de-tection on monitored graphs; in designing graph sampling algorithms; and in realistic graph generators.
 Acknowledgements: We would like to thank Michalis Faloutsos and George Siganos of UCR, for help with the data and for early discussions on the Autonomous System dataset. [1] J. Abello, A. L. Buchsbaum, and J. Westbrook. A [2] J.Abello,P.M.Pardalos,andM.G.C.Resende.
 [3] R. Albert and A.-L. Barabasi. Emergence of scaling in [4] R. Albert, H. Jeong, and A.-L. Barabasi. Diameter of [5] Z. Bi, C. Faloutsos, and F. Korn. The dgx distribution [6] B. Bollobas and O. Riordan. The diameter of a [7] A. Broder, R. Kumar, F. Maghoul, P. Raghavan, [8] D. Chakrabarti, Y. Zhan, and C. Faloutsos. R-mat: A [9] F. Chung and L. Lu. The average distances in random [10] C. Cooper and A. Frieze. A general model of web [11] M. Faloutsos, P. Faloutsos, and C. Faloutsos. On [12] J. Gehrke, P. Ginsparg, and J. M. Kleinberg. [13] B. H. Hall, A. B. Jaffe, and M. Trajtenberg. The nber [14] B. A. Huberman and L. A. Adamic. Growth dynamics [15] J. S. Katz. The self-similar science system. Research [16] J. S. Katz. Scale independent bibliometric indicators. [17] J. M. Kleinberg. Small-world phenomena and the [18] J. M. Kleinberg, R. Kumar, P. Raghavan, [19] R. Kumar, P. Raghavan, S. Rajagopalan, [20] R. Kumar, P. Raghavan, S. Rajagopalan, and [21] F. Menczer. Growing and navigating the small world [22] S. Milgram. The small-world problem. Psychology [23] M. Mitzenmacher. A brief history of generative models [24] M. E. J. Newman. The structure and function of [25] A. Ntoulas, J. Cho, and C. Olston. What X  X  new on the [26] U. of Oregon Route Views Project. Online data and [27] C. R. Palmer, P. B. Gibbons, and C. Faloutsos. Anf: [28] S. Redner. Citation statistics from more than a [29] M. Schroeder. Fractals, Chaos, Power Laws: Minutes [30] D.J.Watts,P.S.Dodds,andM.E.J.Newman.
 [31] D.J.Watts,P.S.Dodds,andM.E.J.Newman.

