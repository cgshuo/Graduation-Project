 Moving range query over RFID data streams is one of the most important spatio-temporal queries to support valu-able information analysis. However, the location uncertainty challenges the query strategy. In this paper, we propose a probability evaluation model in the RFID-enabled monitor-ing environments and discuss the query optimization tech-niques under the scenarios of continuous moving range query, which can also be applied into more situations. The exten-sive experimental evaluation verifies the efficiency and effec-tiveness of our proposed model and methods.
 Categories and Subject Descriptors: H.2.8 [Database Applications]: Spatial databases and GIS General Terms: management, theory, performance Keywords: RFID, probability, location uncertainty, mov-ing range query
The Radio Frequency Identification(RFID)[8] is experi-encing a fast development in recent years. More and more moving objects in our everyday lives have been attached with RFID tags, which provide fast accessibility of the ob-jects X  spatio-temporal information. Compared to the tradi-tional identification method such as bar code, RFID tech-nique is fast, automatic and robust. Furthermore, RFID systems are relatively cheap compared to GPS equipments.
Efficient range, k-NN or trajectory query over the rapid data streams containing spatio-temporal information of the monitored objects are quite useful for supporting advanced analysis. Figure1 illustrates an RFID-enabled smart mu-seum scenario where art exhibits are displayed in the fixed area located in different exhibition rooms. Exhibition rooms are linked by passages. The exhibits are monitored by the RFID readers, and tagged visitors walk from one exhibit to another. However, compared to the exact locating tech-niques, there are two important challenges for efficient spatio-Figure 1: An RFID-enabled smart museum scenario temporal query due to location uncertainty: 1) Impreci-sion . When an object is in the sensing region, we can not acquire the exact position in this region; 2) Discontinu-ity . Due to cost demands, readers are not possible to be deployed to monitor each inch of the space. During the time when walking from one exhibit to another, the location in-formation of monitored object is vacant.

In this paper, we focus on an important query for the mov-ing object management called probabilistic triggered mov-ing range query. Different from the time driven manner, this continuous query can be considered to be event driven. For example in the smart museum, once entering a new ex-hibition region, a tour guide may query the corresponding tourists within 300m to check whether some people lag be-hind. Due to location uncertainty, we can only figure out the possible target objects for the query. Therefore, probability inference and query optimization techniques are needed.
To our knowledge, this is the first paper trying to model probabilistic moving range query over RFID spatio-temporal data streams. Algorithms on executing and optimizing trig-gered moving range query are proposed.
For the general moving object management, range query is widely studied. But most works focus on historical data based on database[6] instead of data stream. For the static range query over moving objects, the R-tree-based variance structures[5] are widely used. And some specially designed index structures such as UTR-tree[1] and TR(s,d)-tree[3], are proposed to speed up probabilistic range query. Dif-ferent from those potentially R-tree and MBR based struc-ture, U-grid index is proposed by Kalashnikov et al.[4] to efficiently cope with probabilistic range query based on un-certain histogram and quadtree. For the moving range query over moving objects, Gedik et al.[2] present the processing techniques and efficient index structure based on the mo-tion sensitive bounding boxes. However, different from the inherent location uncertainty applications, the position can be exactly obtained in [2].

The RFID monitored objects are inferred to be dispersed in some pre-specific regions or discretely located at some possible points in different routes, so available index struc-ture is not quite efficient for our query. Tran et al.[7] discuss the probabilistic locating and data cleaning problems in a warehouse monitoring scenario where readers are mobile and tagged commodities are relatively static. The model and methods are not suitable for our query background where readers are static and tags are dynamic.
An RFID reader r can sense a tagged object o periodically if o is in the sensing region of r . An RFID reading is modeled as a ternary tuple p i = &lt; i  X  O, k  X  R, t &gt; , where R, O represent the sets of reader IDs and object IDs respectively.
We use an aware region  X  k to represent the sensing region of a reader r k , which can be approximated as a circle in two-dimension. And ( X  k .c x ,  X  k .c y ) represents the circle center coordinate of  X  k and  X  k .c r represents the radius of  X  use R ( o i ) to represent the id of the aware region which o is in.  X  k ( t ) represents all the objects in  X  k at t . Due to the consideration of cost, readers are only arranged in the specific aware region instead of monitoring each inch of the working space. The space that is not covered by any aware region is called the vacant region , denoted as  X   X .
In the vacant region, we will further define the concept of path. Physical path is constrained by the specific physical condition to form a natural path, such as passage, link and lane. Between readers without physical path connected, we can construct an ideal virtual path, according to the features of applications and sites. For the smart museum applica-tions, the visitors aim to enjoy the amazing exhibits suc-cessively, so the most reasonable virtual path model should be the shortest route between two readers. Furthermore, we define the potential path as the physical path or virtual path between  X  k 1 and  X  k 2 , denoted as  X  ( X  k 1 ,  X  k 2 ).
In aware regions, monitored objects will move in a rela-tively static manner. For example, a visitor will roam in an exhibition area to enjoy some artwork. Therefore, the posi-tions of them can be reasonably assumed to follow uniform distribution in the circle. On the other hand, some mon-itored object o i on the path can be modeled as traveling in the even pace, and the position ( x i , y i ) can be estimated according to the path shape and position. And v i can be evaluated as the average velocity by now and incrementally estimated according to historical readings.

However, from some aware region  X  k 1 , there may be more than one possible path. Suppose the candidate destination aware region set is CS t ( o i ,  X  k ). We will calculate the esti-mated c CS t ( o i ,  X  k ) and the probability p kk 0 representing the probability to walk along  X  ( X  k ,  X  k 0 ) at time stamp t for any  X 
In this paper, we propose an implicated rule-based path probability evaluation strategy. For the smart museum sce-nario, the implicated rules include: (1) Visitors will avoid visiting the same exhibit twice if possible. (2) Visitors will be more inclined to visit all the exhibits from one room to another instead of turning back. Based on the rules, we can give a probability ratio factor c to reflect the probability relationship of destinations in different rooms as follows, where  X  denotes two regions are in the same room and &gt; means not.  X  can be given according to experience value. Then we can estimate the corresponding probability p p ( x,y ) of each (x,y) in the estimated candidate position set CS p
In this paper, we will primarily focus on the query defined as follows based on the aware region and potential path. Definition 1. ( Probabilistic Triggered Moving Range Query ) Given a moving focal object o f and the range size l , as long as o f enters a new  X  k , return all the o i and cor-responding probability p i = p { d ( o i , o f ) &lt; l } , if p query result set are composed of all the &lt; o i , p i &gt; .
In this subsection, we propose the probability evaluation for the RFID range query by introducing two theorems.
Theorem 1. When the monitored object o i is in the aware region, if the query range radius is l , the probability that the monitored object o i is in the l range of focal object o f RR the notations are illustrated in Figure 2(a).

Proof. Suppose O 1 and O 2 represent  X  R ( o separately. Choose a point Y ( x, y ) in the circle O 2 ran-domly and Y ( x, y ) follows uniform distribution in O 2 . The distance d from Y to O 1  X  X  center can be calculated as d = p bility of the distance from Y to any point in O 1 smaller than l is P ( x, y ). In Figure2(a), an arc can be drawn with the center Y and radius l then P ( x, y ) can be inferred to be proportional to the intersection area of the two circles. According to cosine theorem,  X  = arccos( X  R ( o l left bow area of the intersection is  X l 2  X  l 2 sin 2  X / 2 and the right one is  X   X  R ( o tal area is  X l 2  X  l 2 sin 2  X / 2+  X   X  R ( o Thus the probability that the monitored object o i is in the l range of focal object o f is region is O 2 namely  X  R ( o
For simplicity, we can choose ( X  R ( o estimation point for the approximate evaluation instead of evaluating integration. Obviously, when l &lt; d  X   X  R ( o  X  R ( o f ) .c r , the probability is 0 and when l &gt; d + X   X 
Theorem 2. When the monitored object o i is on the po-tential path and its position Y ( x, y ) is in CS p , given the query range radius l , the probability that o i is in the l range of focal object o f is p in Figure2(b).
Proof.  X l the probability of some specific point Y ( x, y ) in the l range of o f , which can be inferred in the similar way with Theorem 1. p p ( x,y ) reflects the probability of some position Y ( x, y ) on the path after normalization. The sum represents all the possible path positions. The theorem is proven.
Based on the probability model in section 3, one basic method and two enhanced methods are proposed for RFID-based triggered moving range query in this section.
In order to track the monitored object, we need to con-struct an array A t c with the index of object id. Each entry is composed of two items &lt; f t , f r &gt; . A t c [ i ] .f t  X  o i /  X   X   X (  X  )  X  X  X  t &gt;  X   X  &gt;  X , o i  X   X   X (  X   X  ) and A o ID and updated time. Based on A t c , we can give the basic moving range query strategy for an RFID monitoring space. For each time when the query is triggered, we will scan A and judge every object is in some aware region or on some potential path. The corresponding estimated positions and probabilities will be evaluated according to Theorem 1 or Theorem 2. Obviously, a high traversal cost will be incurred for the basic query method.
According to solution-indexing techniques, we first intro-duce a static ordering list for each aware region  X  k to store all other aware regions such as  X  k 0 according to the value of aware regions institute a matrix M . Besides, we construct a dynamic additional structure  X  0 k ( t now ) to store the current monitored objects in each aware region and the monitored objects on the path with the departure place  X  0 k . Further-more, we define the distance between an aware region and a potential path as the shortest distance from circle center to the path, denoted as d ( X  k ,  X  ( X  k 1 ,  X  k 2 )).
Definition 2. (l-Non-supervised Path) Given an aware region  X  k , for a path  X  ( X  k 1 ,  X  k 2 ), if d ( X  k ,  X  ( X  d ( X  k ,  X  k 1 )  X   X  k 1 .c r  X  d ( X  k ,  X  ( X  k 1 ,  X  k 2  X  2 .c r , we say  X  ( X  k 1 ,  X  k 2 ) is the non-supervised path of  X  . Furthermore, if d ( X  k ,  X  ( X  k 1 ,  X  k 2 ))  X   X  k .c r  X  ( X  k 1 ,  X  k 2 ) is the l-non-supervised path of  X  k . The l-non-supervised path set of  X  k is denoted as NS l k .

Figure2(c) illustrates a l-non-supervised path which o 3 moves along and at this time point o 3 is proved to satisfy the range query. However, the path of o 4 is not a non-supervised path. Based on M and  X  0 k ( t now ), we can give an optimized evaluation strategy LRP to evaluate range query based on the aware region pre-ordering. Given o f , LRP will check all the aware regions within the range by order until the condi-tion is not satisfied. All the objects in these regions can be output incrementally. For some object on the potential path, the object X  X  departure place or destination place should be from the chosen aware regions or the object is on a l-non-supervised path of  X  R ( o paths for some aware region and the corresponding distance from the region to the path can be pre-computed in the off-line fashion. So NS l f can be quickly defined. All the objects possible on the paths from NS l f can therefore be checked for the range query with P 0 ( x, y ). Compared to the basic method, instead of evaluating the whole A c , LRP will cost less run-time for most occasions.
In this subsection, we consider the features of the contin-uous query and the moving object X  X  position change, utilize the velocity information to improve the basic method, and propose a query optimization strategy MOD. Specifically, two additional fields &lt; min t , tag p &gt; are added to the schema of A t c . min t represents the minimum possible time for one monitored object to change the result status of some query. tag p = 1 , tag p = 2 and tag p = 0 separately represent the object is definitely in, possibly in and definitely out of the query range. The items with tag p = 0 are neglected, while the items with tag p = 1 are just added into the result set with p i = 1. And the items with tag p = 2 need calculating p according to Theorem1 or Theorem2.
 The calculation of min t for different tag p is illustrated in Figure2(c). When o 6 is out of the query range, the ultimate case for o 6 to quickly enter the query range is the imaginary o and o 0 f move along the straight line p 1 face to face, where o 5 to travel out of the query range, o 0 5 and o 00 f move in the opposite direction along p 2 will be the bound case, where situation of the objects which are on the paths, the equation for calculating min t are respectively min t + = min (  X  ( x tag p = 2, we have to judge at the next time point because the status may be changed, so min t = min t +1. Because the moving features of monitored objects are considered, some objects could be directly filtered from the result set. For a continuous query, the method can gain good response time because of scanning fewer objects in A c . We simulated a smart museum scenario deployed with RFID readers. The environment is modeled as a 200m x 100m area. The parameter settings are summarized in Table1. All experiments were conducted on a PC with Intel Core2 Duo 2.00GHz processor and 2.0GB memory, running Win-dow XP. Our simulation is written in j2sdk1.5.0 11.
The efficiency of our proposed model and methods can be illustrated by the average response time and average maintenance cost per query result. We use recall and pre-cision to study the accuracy. Recall is defined as t p t and precision is defined as t p t the accurate result, the estimated result respectively and num ( x ) represents the number of x , t p = num ( AR  X  ER ), f n = num ( AR  X  ER ), f p = num ( ER  X  AR ). In the fol-lowing performance figures, we use  X  X t X , X  X c X , X  X c X  and  X  X  X  rep-resent the four measure values above respectively for short and use  X  X M X  for the  X  X asic Method X .

Figure3(a) reflects that both LRP and MOD could de-crease response time and maintenance cost under all condi-tions. Because they consider a portion of objects which are possible in the scope of query. Furthermore, the larger N is, the larger the gaps among the response time of the three methods are. Different maintenance contents of the three methods lead to different costs, and MOD has the highest. Figure 3(b) shows that l has no impact on the maintenance cost of the basic method and LRP, while there is a slight im-pact on MOD. It X  X  because that MOD is based on v obj and the position of the query to estimate the objects X  positions and min t . And response time tends to increase slowly with the expansion of l , then turns to be stable, for the size of monitored space and the amount of objects are finite.
Low v obj leads to more time spent on the paths, then there will be a higher probability to estimate the objects X  possi-ble path positions. Therefore high uncertainty result in the lower accuracy as shown in Figure3(c). And the accuracy increases as v obj grows. However, for the impact of the v variation becomes predominant, accuracy decreases when v obj increases to a certain degree. As shown in Figure3(d), with the expansion of l , the accuracy act as a cyclical change. Because R r are fixed, then the query scope will not include or include few new regions before l continues expanding to a Table 1: Parameter Settings for the Experiments certain value. After the query scope begins to include many new regions, the accuracy will ascend again. In general, ac-curacy shows good stability on l .
We have proposed a framework for the continuous moving spatial range query over RFID monitored objects. Based on the reasonable probabilistic modeling for the RFID spatial information and probability evaluation, one basic method and two optimization strategies are proposed to cope with the probabilistic triggered moving range query in the real-time manner. Finally, we have verified the efficiency and accuracy of various methods and identified the effectiveness of the proposed model through experimental studies.
This research was supported by the National Natural Sci-ence Foundation of China under Grant No.60773220 and 60873009, and the National Basic Research Program of China (973 Program) under Grant No.2006CB303103.
