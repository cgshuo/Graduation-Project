 1. Introduction 1
The monitoring and control of production systems is an intrinsi-cally complex activity, where decision makers have to deal with complex and interdependent problems. Basically, decisions are taken in order to manage production activities and resources, such that good performance levels are reached and different kinds of constraints (financial, legal, techni cal, environmental, etc.) are satis-fied. Unfortunately, preliminary d ecisions are often compromised by the occurrence of disruptions, such as late deliveries, resource failures, modification of customer demand, or quality problems.
These disruptions are unpredict ed events of various types, which may severely impact the performance of a production system ( Aytug et al., 2005 ; Mula et al., 2006 ).

Being able to cope with these disruptions and to assist decision makers in reacting in the best way are important issues. Indeed, several monitoring and control tools and approaches were devel-oped. For example, Manufacturin g Execution Systems (MES), which are tools commonly used in industr ial practice, usually include direct connections to functions, such as maintenance and quality management, resource allocation and status, data acquisition and performance analysis ( MESA, 1997 ). However, these tools only focus on particular problems, typically related to maintenance and quality.
They offer limited support to identify and handle more complex consequences of disruptions, to which reactions from decision makers are still needed ( Saenz de Ugarte et al., 2009 ).
The related scientific literature shows that a lot of research effort has been directed towards designing distributed control architectures, featuring the multi agent, holonic or bionic para-digms ( Trentesaux, 2009 ). Unfortunately, as it will be shown in
Section 2 , although these paradigms allow integrating intelligent strategies within agents or holons, they do not provide general concepts devoted to the mechanisms that have to be implemen-ted to face disruptions. As a consequence, a general conceptual framework, which would help to characterize how to deal with disruptions, would be quite useful.

In nature, biological immune systems are able to deal with numerous threats (such as bacteria, viruses, cancers, etc.) that are likely to cause diseases and to endanger one host organism.
Biological immunity relies on a reduced set of concepts and mechanisms, which are able to efficiently protect the organism against a broad variety of elements disturbing its normal func-tioning. The adaptation of such concepts and mechanisms would be pertinent to meet the manufacturing systems needs for protection against different types of unexpected disruptions.
Therefore, this research investigates the potential of biological immunity to provide concepts and mechanisms that are useful to deal with various types of disruptions during the monitoring and control of manufacturing systems. We derive a conceptual frame-work that is intended to help with the design of more dedicated and generic disruption handling tools. The purpose of this frame-work is to assist the designers of Manufacturing Execution Systems (MES) in better taking the management of disruptions into account. A prototype of an agent based system, called ARTIMOS, has been built on the basis of this framework. In this respect, our article is organized as follows. First, in Section 2 , we review disruption handling capabilities in current typical monitoring and control approaches and we highlight their limitations. Then, in Section 3 , we introduce some important features of the biological immune systems that are used to face biological threats. In Section 4 , we review existing artificial immune applications to manufacturing systems. This review indicates that biological immunity does not seem to be applied to handle disruptions in production monitoring and control systems. In Section 5 , we identify the main immune concepts and mechanisms that are relevant to the monitoring and control of production systems, and we suggest a conceptual framework to deal with disruptions, more explicitly and more generically than in conventional approaches. Section 6 introduces ARTIMOS, an agent based prototype implementation that is built based on this framework. Next, in Section 7 , an illustrative example shows how this conceptual framework can be used. Finally, we discuss some features of the proposed approach and suggest possible future research directions. 2. Disruption handling in production monitoring and control systems
Disruption management in production planning and control consists in dealing dynamically with unanticipated events that make the production plans deviate from their intended course ( Cauvin et al., 2009 ). Several approaches exist, which aim at solving several types of quality, maintenance, reliability, and error recovery problems. These approaches are generally specific and devoted to a particular kind of problem ( Bruccoleri et al., 2006 ; Chen and Nof., 2012 ; Saenz de Ugarte et al., 2009 ; Radhoui et al., 2010 ). In this article, a more global point of view is adopted: emphasis is put on the management and control decisions, which need to be found in a reactive manner, in order to help in reducing the impact of disruptions on the flow of products through a manufacturing system.

To deal with disruptions, industrial practices are either based on simple and  X  X  X ome-made X  X  software systems, designed for limited and specific purposes, or rely on Manufacturing Execution Systems (MES), which are a set of integrated tools designed to bridge the gap between the planning system and the controlling system. MES allow decision makers to access accurate, reliable and real time information to both oversee and record results of activities in a production facility. MES give a plant-wide view of the status and operation of processes, materials, human resources, machines, and tooling. According to MESA Interna-tional, which is a normalization association for MES, such a system includes eleven (11) main functions ( MESA, 1997 ), namely: (1) Operations/detailed scheduling, (2) Resource allocation and status, (3) Dispatching production units, (4) Document control, (5) Product tracking and genealogy, (6) Performance analysis, (7) Labor management, (8) Maintenance management, (9) Process management, (10) Quality management, (11) Data collection and acquisition.

Although these functions support, guide, and track each of the primary production activities, we can notice that MES offer no function explicitly dedicated to disruption handling ( Saenz de Ugarte et al., 2009 ).

In order to make monitoring and control systems more responsive to change and reactive to disruptions, a large amount of research has been directed towards designing decentralized, distributed, heterarchical architectures, which are believed to provide more flexibility and robustness to change and disruptions than centralized hierarchical architectures ( Chen and Nof, 2012 ; Shen et al., 2006 ). According to Trentesaux (2009) , distributed control may be achieved using three kinds of approaches, namely: Bionic and bio-inspired, such as in ( Sallez et al., 2009 ),
Multi-agent, such as in ( Bussmann and Schild, 2001 ; Bruccoleri et al., 2003 ; Odrey and Mejia, 2003 ; Tranvouez et al., 2006 ; Cauvin et al., 2009 ), Holonic, such as in ( Leitao and Restivo, 2008 ).

Indeed, these approaches can lead to modular, flexible, and scalable control architectures. Yet, most of them only consider particular types of disruptions, or provide limited assistance to how to react. Actually, most of the papers deal with some types of disruptions, such as machine breakdowns (e.g. Bussmann and Schild, 2001 ; Bruccoleri et al., 2003 ; Tranvouez et al., 2006 ), or demand variation (e.g. rush orders and cancellation of orders, Leitao and Restivo, 2008 ). Other types of disruptions, such as supply failures or quality problems, are either not addressed or not mentioned.

In most cases, to deal with these particular disruptions, specific reaction strategies are designed for each disruption type, using formalisms such as strongly typed state graphs, as in ( Tranvouez et al., 2006 ), or Petri net graphs, as in Leitao and Restivo (2008) . These reaction strategies are specifically tailored to the disruption case encountered. They offer a very limited  X  X  X enericity X  X  to cope with a variety of disruption types and address more various disruption management problems.

In most published works on distributed control systems ( Shen et al., 2006 ), negotiation is used for resource allocation to take advantage of the operational flexibility of the system ( Reaidy et al., 2006 ). Negotiation is achieved using protocols such as the voting mechanism, the Contract Net Protocol or its modified versions, game theory based protocols, and Market-based proto-cols using the so-called bargaining or auction process. Such auction and bidding processes are used for example by Bussmann and Schild (2001) to handle machine failures in a product centered multi-agent based approach called WEST for the automotive industry, and by Leitao and Restivo (2008) to handle machine failures and demand variation in a resource centered holonic approach, called ADACOR, for an FMS system. Conse-quently, disruptions are dealt with based on concepts and mechanisms intrinsically due to the distribution of decisions rather than concepts and mechanisms which allow explicit disruption representation and processing.

Furthermore, in many papers, disruption decisions are often concerned with (re)scheduling, (re)assignment or (re)sequencing, without integrating other important and useful considerations, such as reconfiguration or maintenance. Finally, we notice that existing approaches offer little help in capitalizing and reusing the expertise stemming from disruption handling.

From this analysis of typical existing approaches, we can see that a few works seem to exist, which would (1) suggest general frameworks devoted to disruption management and (2) analyze what can possibly be generic mechanisms to face disruptions in manufacturing systems. As far as nature uses efficient mechanisms to handle the various aggressions made to biological organisms, it is worth investigating how biological immunity paradigms can con-tribute to the definition of a conceptual framework for the mon-itoring and control of manufacturing systems faced with various types of disruptions. 3. Important features of the biological immune system
It is assumed that the purpose of a biological immune system is to protect its host organism from toxic substances, and to do so in a way that minimizes harm to the body and ensures its continued functioning ( Hofmeyr, 2000 ). From a monitoring and control point of view, biological immunity has many interesting features. The biological immune system is an intrinsically distributed system, with no central command organ. It d efends the body against a great variety of threats based on a lim ited number of concepts and mechanisms. It is able to memoriz e disease causing elements, and to reuse this knowledge during future encounters with similar or identical substances. These features rely on several immune func-tions, which involve detection of harmful elements, identification of danger, stimulation of immune cells, and finally coordination and memorization of responses. The next sections describe these func-tions in more detail. 3.1. Detection of harmful elements
The biological immune system (BIS) has to distinguish what belongs to the body, the Self , from what is foreign to the body, the
Non-Self . Therefore, the BIS relies on the Self/Non-Self discrimina-tion principle, which involves a key and lock like mechanism.
Particular immune cells, called Antigen Presenting Cells (APC), have receptors at their surface which can detect sets of char-acterizing features of disease causing elements, called pathogens .
These characterizing features are specific markers present at the surface of pathogens and are called antigens (cf. Fig. 1 ). Each class of pathogens has its own characterizing set of antigens.
Biological APC continuously circulate in the body and compare their surface receptors to marker s present at the surface of sub-stances and cells encountered in body fluids and tissue. If an APC recognizes a marker as an antigen (i.e. something which does not belong to the body), then a harmful element (pathogen) is detected.
APC can only perform broad detection of classes of pathogens. Upon detection,APCinitiateandguideanimmuneresponseinorderto eliminate the pathogen and its associated antigen. In fact, APC participate in the activation of specialized immune cells, which can perform more specific adaptation to antigens. 3.2. Danger identification
The BIS has to identify infection areas, or contaminated zones, to locate and target the intervention sites of immune cells.
Therefore, the BIS relies on the inflammatory reaction principle, which involves a danger signal propagation mechanism.

The body is actually made up of several types of biological cells linked together within tissue. According to the danger theory, damaged cells spread danger signals across the tissue to signal their aggression ( Matzinger, 1998 ). When a pathogen invades the body, it spreads its antigens, which may damage cells and/or change their normal behavior. A damaged cell sends out an alarm signal, which establishes a danger zone around the cell and triggers an inflammatory response (cf. Fig. 2 ). This response is characterized by an increase in local blood flow and permeability between blood and tissues. These changes allow large numbers of circulating immune cells, such as B -cells, to be stimulated and recruited to the site of infection. 3.3. Immune cell stimulation
Biological B -cells are immune effectors able to secrete sub-stances like antibodies, which block antigens and facilitate their elimination. Among all recruited B -cells to a danger zone, the BIS has to favor those cells that are most able to eliminate the pathogen, its antigens, and also the damaged cells. Therefore, the BIS relies on a B-cell stimulation principle, which involves an affinity mechanism.

According to the danger theory, B -cells are both sensitive to antigens and to danger signals sent out by damaged cells ( Aickelin and Greensmith, 2007 ). B -cells that match antigens within a danger zone get stimulated to capture antigens. Matching is reached if B -cell surface receptors have high structural affinity with antigens (cf. Fig. 1 ). Those immune cells that do not match antigens within a danger zone, or are too far away from a danger zone, are not stimulated (cf. Fig. 2 ). 3.4. Response coordination and memorization
When multiple B -cells are stimulated, the BIS has to coordi-nate their activation and their involvement in the immune response in such a way that prevents anarchy and waste of resources. Therefore, the BIS relies on a co-stimulation principle, which involves antigenic presentation and feedback mechanisms.
Particular immune cells, called Th-cells , are in charge of the arbitration between stimulated B -cells, and the coordination of their activation. Th -cells are able to select and activate B -cells based on their affinity with antigens and danger signals. When a B -cell detects an antigen, it presents fragments of this antigen to a Th -cell (antigenic presentation). If the Th -cell checks that the detection carried out by the B -cell is correct (not auto reactive), it sends a co-stimulation signal to the B -cell. This signal confirms the activation of the B -cell.

Upon activation, a B -cell proliferates through cell cloning while undergoing a form of high rate mutation termed somatic hypermuta-tion . This process, named affinity maturation ,increasestheprob-ability to obtain better B -cell receptor structures with higher affinity to antigen. The new B -cell clones have the opportunity to bind to antigens. If they do not bind they will die after a short time. If they succeed in binding, and if they are activated by Th -cells, they will differentiate into plasma or memory B -cells. Plasma B -cells secrete a soluble form of their receptors, called antibodies , which can block and eliminate pathogens.

Due to the difficulty of understanding the immune memory, many theories were proposed to explain it ( Gray, 1992 ; MacKay, 1993 ; De Castro and Timmis, 2002 ; Dasgupta et al., 2011 ). Nevertheless, two theories prevail. According to one of the theories, the adapted memory cells are long-lived, surviving for up to the lifetime of the organism ( MacKay, 1993 ). The other theory postulates that the adapted B -cells are constantly re stimulated by traces of antigens that are retained in the body for years ( Gray, 1992 ). Memory cells are re activated upon detection of pathogens which are structurally similar or identical to those that led to their creation.

The different concepts that we have introduced in this section will be used in the conceptual framework that is proposed later in Section 5 . In the next section we first examine the works in the area of manufacturing systems that have been inspired by the immune paradigm. 4. Artificial immunity applications to production systems
Biological immunity inspired the development of artificial immune systems (AIS), which are  X  X  adaptive systems inspired by theoretical immunology and especially applied to problem solving  X  X  ( De Castro and Timmis, 2002 ). Among these AIS, several are concerned with manufacturing system problems, such as: anom-aly detection, fault diagnosis, planning and scheduling.
Dasgupta and Forrest (1999) proposed an anomaly detection algorithm based on the Self/Non-Self discrimination principle. This algorithm is applied to the detection of cutting tool breakage in a milling process. The concept of  X  X  Self  X  X  refers to temporal series of observations of normal system functioning over time. The concept of  X  X  Non-Self  X  X  refers to anomalies, which are deviations that exceed tolerable variations in the obse rved data. The algorithm warns of changes in new time series data acquired from the controlled system. These changes are detected probabilistically  X  i.e. without any prior knowledge on anomalies  X  and reported to the operator of the machine. The approach is neither designed to diagnose the causes of changes, nor to react to these changes.

Fault diagnosis corresponds to the identification of the nature and cause of a fault through the detection and analysis of its symptoms. Ishida (1997) designed a distributed active diagnosis system based on a sensor network in which sensory units are able to diagnose malfunctions of each other. Therefore, a set of agents are associated with sensory units. These agents are assimilated to B -cells and form a self-organized network of units which are linked together and able to test each other. This test allows a unit to determine if its neighboring units are defective or not. The diagnosis is performed by determining the B -cell network stable equilibrium points after periods of perturbation.
Kayama et al. (1995) were interested in preventing fault propagation in industrial plants through the determination of faulty parts at fault occurrence. They suggest a Learning Vector Quantization (LVQ) strategy, combined with an Immune Network to detect abnormal sensor outputs in a control problem. Their system had two execution modes: training and diagnosis. In the training mode, the LVQ extracts correlation between sensors. In the diagnosis mode, the Immune Network relies on artificial B-cells related to sensory units, and which use the local testing results obtained by the LVQ algorithm to determine the faulty sensors.

Bradley and Tyrrell (2000) proposed a hardware fault tolerant system based on the Self/Non-Self discrimination principle. Imple-mented with a Field Programmable Gate Array (FPGA), the approach involves a finite state machine where  X  X  X elf X  X  and  X  X  X on-Self X  X  respec-tively correspond to acceptable and erroneous system states and transitions. If a faulty state is dete cted, a co-stimulation signal might be used to activate some predefined recovery procedures.
Scheduling is an area which has inspired a number of authors. A review of planning and scheduling AIS applications is given in Darmoul et al. (2006) . This review reveals that most of the existing work exploits the optimization possibilities offered by some analo-gies with the biological immune system. The type of optimization used relies mainly on evolutionary concepts. Although no consen-sual immune representation can be drawn out of the reported works, most authors represent antibodies as candidate solutions and use antigens in the evaluation of the quality of the solutions. This quality is often referred to as antibody X  X ntigen affinity. Generally, the  X  X  X ffinity X  X  is a measure related to the criteria to be optimized, such as makespan minimization.

The analysis of the current AIS applications to production systems shows very different visions of immunity. While some approaches focus on the classification features of the immune system, others focus on its optimization possibilities. Whether the focus is on anomaly detection, fault diagnosis, planning or scheduling, the immune paradigms are often limited to the design of algorithms. Even within a same application area, there is no consensual algorithm. This is mainly due to the diversity and divergence between the implementations of each immune com-ponent, and to the lack of a general framework. Despite its potential and interesting features, biological immunity does not yet seem to be applied to globally handle disruptions during the management and control of production systems ( Dasgupta et al., 2011 ). In this respect, the next section suggests a conceptual framework that can be used to support the design of more reactive enterprise information and decision support systems. 5. Immune inspired conceptual framework
In this section, we are concerned with identifying important immune concepts and mechanisms useful when facing disrup-tions in a monitoring and control context. As a matter of fact, such concepts and mechanisms can help with the design of systems that assist decision makers in restoring  X  X  X ormal X  X  activity and maintaining  X  X  X ood X  X  performance levels in a reactive manner. The key concepts introduced here can also be viewed as generic functions that could be assigned to specific agents or holons in distributed control systems ( Saenz de Ugarte et al., 2009 ; Trentesaux, 2009 ). Indeed, several common needs have often to be fulfilled, among which we find the following: let decision makers know what is going wrong (i.e. detection function), determine what can possibly be affected by a disruption (i.e. identification of the possible dir ect and potential consequences), determine what method, tool or algorithm could provide an assistance in correcting the problems (i.e. determination of the possible actions), assist in selecting suitable actions (i.e. reaction function), support the decision making process in order to elaborate coherent reaction strategies (i.e. coordination function), help in evaluating the ability of the reaction strategies to recover acceptable performance levels (i.e. evaluation function), help the users in identifying, listing and documenting the possible disruptions and possible methods (i.e. documentation support function), help in memorizing reaction strategies and reusing them when similar disruptions occur (i.e. memory function).

The next sub sections will show how such functions can be associated with immune concepts. 5.1. Immune representation of production system entities
In order to be aware of what is going wrong (such as anomalies, deviations, delays, errors, or failures), several ques-tions may be asked and need to be solved by decision makers. For example: what is liable to be disrupted? How a disruption propagates through a production system? What are the direct and indirect impacts of a disruption? To address such questions, a representation of the different production system physical and logical entities, as well as an explicit representation of their relations, is required. This representation should allow to:
Specify the  X  X  X ormal X  X  functioning conditions  X  or  X  X  X ormal X  X  specifications, for short  X  of a production system entity.
Get updates about the current behavior and state of a produc-tion system entity through data acquisition.

Similarly to biological immunity, where cells represent what is liable to be damaged, and damage is propagated through tissue (cf. Section 3.2 and Fig. 2 ), we propose to associate artificial cells to physical and logical entities of the production system, such as resources (e.g., machines, tools, operators, and materials), orders (e.g., supply, work, delivery), and routings.

Artificial cells are connected to gether within artificial tissue, which contains data specifying the normal functioning conditions of these entities. This artificial t issue reflects not only the relations and constraints between artificia l cells, but also the performance requirements of the production system, which can typically be expressed through common performance criteria or performance indicators. This artificial tissue can be considered as a generalization of the scheduling graph suggested by Wu and Li (1995) . The explicit representation of relations and constraints between production system entities by means of artificial tissue makes it possible to propagate the disruption effects t hrough the production system and to determine both direct and potenti al disruption impacts (as it will be explained in more detail in Section 5.3 ).

Fig. 3 illustrates the creation of two artificial cells respectively associated to a machine, and a part operation. These two cells are linked with data specifying the normal time, cost, quality and performance requirements that the execution of the operation on the machine should satisfy. Other types of performance indicators can be included here as specifications if needed.

Time specifications refer to the initial scheduling of the operation on the machine and may typically be retrieved from an Advance Planning and Scheduling (APS) system ( David et al., 2006 ). If needed, cost specifications refer to a reference produc-tion cost and may be retrieved from the industrial cost accounting system. Quality specifications refer to the normal ranges of some control parameters that a part, a product or a process should satisfy when an operation is performed on the machine. This information comes from the product or process design specifica-tions. Performance specifications refer to nominal values of some key performance indicators, and can be monitored through tools such as control charts if needed. Each artificial cell gets updates of the events and state of the production system entity to which it is associated based on real time data that are typically managed by the MES system. 5.2. Detection of disruptions
Production systems are often faced with detection problems related to questions such as: how to be aware of the occurrence of a disruption based on the changes in the system state? Does the acquired data meet the normal functioning and the expected performance of the system? If not, what kind of disruption is the production system faced with?
Biological immunity solves the detection problem using the key and lock mechanism (cf. Section 3.1 ): detection is achieved through continuous comparison of what is perceived (antigens at the surface of pathogens) to a reference (receptors at the surface of APC). We propose to apply this biological mechanism by assimilating production execution data acquired from informa-tion systems, such as MES, to markers present at the surface of biological substances and cells. Comparing this execution data to cell specifications allows detecting  X  X  X bnormal X  X  situations (such as anomalies, deviations, delays, errors, or failures), which can be considered as symptoms of probable disruptions. Consequently, we propose to assimilate these  X  X  X bnormal X  X  situations to antigens.
Once an abnormal behavior, state or event is detected, a disruption handling system must determine the type of disrup-tion. Bringing an answer to this question is important because the production system will be impacted differently according to the disruption type and will require different monitoring and control decisions. The biological immunity addresses this problem through the Self/Non-Self discrimination principle (cf. Section 3.1 ): APC can be seen as classification units, which use antigens as patterns to classify pathogen types, since each pathogen class has its own specific surface features.

Through this principle, we assimilate disruptions to pathogens, and we characterize each disruption (pathogen) by a set of abnormal situations (antigens). To take into account the several disruption types, we use a disruption typology inspired by Cauvin (2005) . In this way, the possible disruptions that can occur in a manufacturing system can be do cumented and recorded as patho-gens. Each disruption can be exhaustively described using antigens.
This typology involves several disruption classes, such as: supplier failures (including delays, quality problems, etc.), resource failures (including machine breakdowns, tool break-age, material shortage, labor problems, etc.), product failures (including rejects, scraps, quality problems, etc.), customer failures (including rush orders, order cancellation, order modification, etc.).

For each disruption class, we define the criteria that determine the membership of an event (acquired from the production system) to this class. For example, Fig. 4 (a) illustrates some criteria of membership to the machine failure disruption class. In this figure, a machine failure is detected whenever the production rate or process parameters (such as temperature and pressure) are beyond a tolerance range (let us note that more sophisticated mechanisms, such as control charts, can be handled in the same way).
 Then, we associate an artificial APC to each disruption class. A disruption is an event which meets some or all of the member-ship criteria of a disruption class. The APC then creates and associates an artificial pathogen to the detected disruption. Artificial APC allow the current system state to be compared with the normal specifications, so that anomalies can be detected.
For example, let us consider the artificial APC in charge of detecting machine failures. This APC receives data about the specifications of the operation from the operation cell in Fig. 3 . These data are typically retrieved from product routing and process design. Periodically, the operation cell provides this APC with updates of the state of the operation. These updates are typically retrieved from MES. The APC then compares the state of the operation cell to the membership criteria of the machine failure disruption class. Finding that the production rate (PR  X  7 4 6 units per hour), the temperature ( T  X  360 1 C 4 350 and the pressure ( P  X  200 Bar 4 160 Bar) are beyond tolerance, it creates a pathogen with time (PR  X  7 units per hour) and quality ( T  X  360 1 C and P  X  200 Bar) antigens corresponding to these out of range values as illustrated in Fig. 4 (b). 5.3. Identification of disruption consequences
Usually, disruptions propagate in the production system caus-ing downstream damage in addition to direct impacts. Reaction strategies will be incomplete unless all disruption effects are taken into account. Identifying and evaluating both direct and potential disruption consequences is still a challenge in existing monitoring and control tools and approaches.

In nature, the danger theory shows that each aggressed body cell is able to identify the impact of antigens on its structure and behavior, and to propagate this impact through tissue to other cells using danger signals (cf. Section 3.2 and Fig. 2 ). Applying this theory to a production system allows distributing the identifica-tion process among the production system entities associated to artificial cells. In this way, each production system entity is able to determine disruption consequences autonomously on its own state, behavior and performance. This distribution increases the modeling accuracy, flexibility and closeness to reality.
To achieve this distribution, an artificial pathogen (associated to a disruption) is considered as an active entity, which spreads its antigens (disruption attributes) within the artificial immune system cells. Each artificial cell uses antigens to analyze the impact of the disruption on the normal behavior of the production entity that the artificial cell represents, and on normal functioning conditions described by artificial tissue (cf. Section 5.1 ). This is achieved by identification capabilities that can be embedded within artificial cells, and implemented using specific diagnosis tools, well adapted for the specificities of each manufacturing system under consideration, such as fault tree analysis ( Ferdous et al., 2007 ). If a cell finds that normal behavior and/or specifica-tions are compromised by an antigen, it releases danger signals to draw attention to a possible direct or potential aggression of the production entity. Danger signals correspond to a violation of the normal specifications represented by artificial tissue (cf. Section 5.1 ), which is used to propagate the disruption effects. Artificial cells are also sensitive to danger signals generated by other cells, and can identify the impact of these signals on normal behavior the same way this is done for antigens.

Artificial danger signals alert about the potential realization of dangers, which correspond to potential problems that may be raised by the occurrence of a disruption or some of its consequences. In this way, the potential risky situations that can occur in a manufacturing system can be documented and recorded as dangers that should be taken into account in order to be avoided ( Sienou et al., 2006 ).
As an example, Fig. 5 illustrates the identification of the con-sequences of a machine failure disruption on several cells. In this figure, the operation cell determines the impact of an out of range temperature on the expected product quality parameters and generates a quality danger signal to warn that these parameters will not be satisfactory (direct disr uption impact). This danger signal is perceived by a bill of material (BOM) cell, which in turn generates an inventory shortfall danger signal to warn of an indirect but probable consequence. Finally, the work order cell generates a danger signal to warn about a probable late delivery.
 5.4. Determination of monitoring and control actions
Once the detection of a disruption and the identification of its consequences are carried out, the question arises of how to find suitable corrective and/or preventive decisions, in order to elim-inate and/or to reduce the disruption and its impacts? Biological immunity answers this question by involving
B -cells, which correspond to effectors that secrete antibodies to neutralize pathogens and damaged cells (cf. Section 3.3 ). In a production system context, we associate artificial B -cells to monitoring and control tools, which may be suitable to solve several kinds of problems (e.g. reassignment, rescheduling, etc.).
Such B -cells are for example associated to optimization algo-rithms with objective functions, or to algorithms that allow selection of a different transportation device, a different part routing, a different nomenclature, etc. B -cells also refer to tools that could be used to try to reduce the consequences of the disruption (e.g. specific quality or maintenance methods). Anti-bodies correspond to the monitoring and control decisions that each algorithm or tool may suggest as solutions whenever it is stimulated to solve a problem.

When a particular disruption occurs, appropriate monitoring and control algorithms and tools need to be selectively involved in the reaction. As a simplified example, rescheduling algorithms are more recommended than maintenance tools to reduce the lateness generated by the delay of a supplier or a production resource. To solve this action selection problem, biological immu-nity relies on an affinity mechanism, which is a measure of the sensitivity of a B -cell to antigens and danger signals. Affinity allows managing the stimulation and recruitment of B -cells to the site of infection (cf. Fig. 2 ).

In a production system context, we use sensitivity to antigens and danger signals to define artificial B -cell skills, which specify the set of disruptions and consequences that an artificial B -cell is able to deal with. These skills define the knowledge that can be put in an artificial B -cell about the conditions of activation and use of its associated decision support tool or algorithm to solve a particular problem when a disruption occurs. We define affinity between antibodies and antigens or danger signals as a measure of a B -cell stimulation level. This measure is related to the severity of the disruption and its consequences, and to the capability of the B -cell, i.e. its ability to maintain performance and reduce risks (how affinity can influence the response is not addressed in this article and is one of our current research issues).
The concept of B -cells allows the framework to integrate an extensible toolbox that can be extended with several monitoring and control algorithms and tools. Extension means either adding new B -cells associated to new algorithms or using the object oriented inheritance concept to specialize existing B -cells and allow them to integrate more specific or more powerful algo-rithms (c.f. Section 6 ).

Fig. 6 illustrates the stimulation of an artificial B -cell associated to a corrective maintenance tool. This B -cell is stimulated by antigens, which are characteristic attributes of the machine failure disruption introduced as a pathogen (cf. Fig. 4 ), and by a quality danger signal emitted by an aggressed operation cell (cf. Fig. 5 ). This
B -cell plans the repair of the failed machine and generates an antibody that corresponds to a corrective maintenance order. 5.5. Coordination of responses
When several monitoring and control decisions are simulta-neously available to react to a disruption and its consequences, a coordination problem arises: how to insure coherence and syn-chronization between available decisions, so that conflicts and waste of time and resources are avoided? To answer this question, there is a need to find reaction strategies based on the decisions suggested by B -cells, in accordance with the decision maker X  X  expertise.
 Quality danger
Elasticity &lt; threshold
Thickness &lt; threshold
Biological immunity solves this problem by involving Th -cells, which are in charge of the arbitration between stimulated B -cells, and the coordination of their activation (cf. Section 3.4 ). In a production system contex t, we introduce artificial Th-cells, which interact with decision makers to construct and fine tune artificial immune responses to disruptions and their consequences. The Th -cell concept allows for the integration of production system experts and practitioners in the decision loop to take advantage of their expertise on disruption management. As a consequence, it allows an artificial immune system to be interactive.

An artificial immune response is a selection of a subset of available monitoring and control decisions, which are arranged in such a way to bring an  X  X  X xhaustive X  X  and  X  X  coherent X  X  reaction to antigens and danger signals. Exhaustive means that a response should cover the disruption and its consequences. Coherent means that the monitoring and control alternatives involved in a response should not be in conflict with each other.

A Th -cell shows the perceived antigens, danger signals and available monitoring and control decisions to a decision maker. As several decisions may be available for each antigen and danger signal (cf. Section 5.4 ), the Th -cells collect the choices of the decision maker, who constructs responses by assigning available monitoring and control decisions to antigens and danger signals. Such an approach provides the decision maker with the possibi-lity to evaluate several  X  X  what if  X  X  scenarios. He can also ask Th -cells to further fine tune the so constructed responses. There-fore, Th -cells stimulate B -cells in order to propose more optimized alternatives. For example, if a response involves rescheduling some aggressed operations, fine tuning the response means to ask the B -cell to find a new more optimized schedule.

Finally, the decision maker selects and validates a response to be applied as a reaction to a disruption. Consequently, the Th -cell corresponding to the selected response activates the B -cells involved in the response to apply the modifications of the response to the concerned aggressed cells. This eliminates the pathogen and its antigens, and restores the specifications and the normal behavior of the aggressed cells. 5.6. Restitution of memorized responses
Very often, disruptions are not isolated events over a production system lifetime. Instead, a disruption is most likely a recurrent phenomenon, which occurs more or less periodically over time. Consequently, it is worth memorizing occurrences of disruptions and successful reaction strategies that have led to the elimination or the reduction of their consequences. This allows a quicker reaction in the case of new occurrences of similar disruptions.
The biological immune system is able to remember pathogens by creating and maintaining memory cells. These cells are re-activated upon detection of pathogens that are structurally similar or identical to those that led to their creation (cf. Section 3.4 ). In a production system context, memory cells correspond to:
Immune responses that were applied as a reaction to a previous occurrence of a similar disruption and stored as memory cells (cf. Section 5.5 ).

Recovery or risk prevention plans, which show what to do in case of a disruption ( Deslandres and Pierreval, 1997 ). These plans are prepared in advance to anticipate disruption occur-rences. A plan refers to a procedure to follow or describes a set of coordinated monitoring and control decisions to be applied whenever a disruption occurs or some risks are met.

Memory cells are activated by Th -cells upon perception of antigens, danger signals and available monitoring and control decisions. They are shown to a decision maker, who can adapt them and use them to construct new immune responses. Further exploitation of this information through case based reasoning approaches can of course be investigated.

The previously introduced concepts interact together to realize several functions (detect, react, coordinate, evaluate) specifically dedicated to the disruption management process, in such a way that is summarized in Fig. 7 .

The suggested framework relies on 5 main processing entities, based on artificial immune cells, pathogens, APC, B -cells, and Th -cells. Communication, interaction, and knowledge processing capabilities mainly involve artificial immune concepts of anti-gens, danger signals, surface cell receptors (e.g. antibodies), stimulation, and co-stimulation signals.

The detection function is achieved through interactions between artificial pathogens (disruptions), artificial cells (physical and logical entities of a production system), and artificial APC (classification entities). Artificial APC detect pathogens (disrup-tions) through antigens (specific features of disruptions). Antigens aggress artificial cells, which release danger signals to propagate disruption consequences.

The reaction function is achieved through interactions between arestimulatedbyantigensand danger signals. Stimulated B -cells are selectively involved in the reaction to a disruption and its con-sequences by suggesting suitable monitoring and control decisions.
The coordination function is achieved through interactions between artificial cells, artificial B -cells, and artificial Th -cells. These latter are stimulated by antigens, danger signals, and B -cell suggestions (i.e. antibodies). Th -cells allow for the integration of decision makers in the decision loop to achieve arbitration between available monitoring and control decisions and the coordination of their activation through immune responses.
The evaluation function is achieved through interactions between allow determining the performance of an immune response through the evaluation of residual consequences of disruptions. 6. An agent based prototype implementation
These last decades, multi-agent systems have received a growing attention from the research community to cope with production monitoring and control problems ( Shen et al., 2006 ; Anosike and Zhang, 2009 ). Their distributed features allow com-plex decisions to be made in a collaborative way, which con-tributes to better system performance. A few authors have included the possibility to cope with some particular predefined disruptions in their multi-agent systems (e.g. Bruccoleri et al., 2003 ; Bussman and Schild, 2001; Chen and Nof, 2012 ; Leitao and Restivo, 2008 ; Tranvouez et al., 2006 ; Vieira et al., 2003 ). The conceptual framework introduced in the previous section can contribute to design multi-agent systems with agents that would be specialized in dealing with the key questions given in the beginning of Section 5 , in an integrated and more generic way ( Darmoul et al., 2011a ).

In order to study whether the presented immune framework can be relevant for such a purpose, we have developed a proto-type software application, called ARTIMOS, which is based on the multi-agent system technology ( Darmoul et al., 2011a ). This is a first attempt to show how the immune concepts can be implemented, and their compatibility with existing paradigms. This is achieved using the JAVA language under the JADE platform ( Nikraz et al., 2006 ). Each type of cell corresponds to a type of agent. The behavior of each agent is implemented as a finite state machine. Agent acquaintances stem from the framework structure presented in Fig. 7 .

Moreover, in order to organize cell knowledge and to structure inter-cell communication; we have developed an ontology based knowledge model ( Uschold and Gruninger, 1996 ) implemented using the PROTE  X  GE  X  ontology editor ( PROTE  X  GE  X  abstract view of the structure of this model, which is described in more detail in Darmoul et al. (2011b) .Eachcelltypeisassocia-ted to an ontology class, which can be further specialized using inheritance. This way for example, a classification of disruptions can be implemented as an inheritance tree, which is a specializa-tion of the pathogen class (cf. Section 5.2 ). Ontology class proper-ties are used to describe class attributes (e.g. numerical values of attributes such as the duration of a delay in an antigen instance).
Ontology class restrictions are used to describe cell knowledge (e.g. membership criteria (cf. Section 5.2 ), cell skills (cf. Section 5.4 )) and to implement some of the dependencies among the constructs of the framework. This way for example, a classification of decision support tools and/or algorithms can be implemented as an inheri-tance tree, which is a specialization of the B -cell class (cf. Section 5.4 ). Each B -cell subclass is associated to a decision support tool or algorithm used in the specific manufacturing system under con-sideration, thus allowing some customization of the framework to specific industries. Res trictions are used to describe the knowledge about the conditions of activation of the decision support tool or algorithm that can be used when a disruption occurs. The B -cell tree can be extended with new classes associated with newly available tools and/or algorithms in the manufacturing system, thus allowing adaptation of the monitoring and control capabilities. 7. Illustrative example
In the following, an example is provided to show what kind of decision support ARTIMOS agents provide to decision makers in case of an unexpected disruption of the type  X  X  X aterial unavail-ability X  X  (due to a late delivery by a supplier), and to illustrate how the previously introduced immune concepts can be applied. We consider the case of a medium size manufacturing company, which manages supply, transportation and production activities. This company has an information system based on both an Enterprise Resource Planning (ERP) system and an MES system. An order is emitted to represent each activity. Fig. 9 shows a Gantt chart introducing the organization over time of a purchase order (PO1) and a transportation order (TO1), which are necessary to insure the continuity of execution of further downstream work order operations.

In order to represent the production system entities and to describe their normal functioning conditions, a cell agent is asso-ciated to purchase order PO1, and another cell agent is associated to transportation order TO1. Specifications of each cell agent include characteristic attributes such as su pplier reference, order quantity, initial scheduled start and end times, and precedence constraints between orders. During activity ex ecution, cell agents communicate their specifications and regular u pdates about their execution state (acquired from the procurement module of the ERP) to an APC agent dedicated to detecting supply failures.

APC agents become aware of disruptions by comparing activity execution data to activity normal functioning conditions. As shown in Fig. 9 , since no delivery occurs as expected at time t  X  50, the APC agent in charge of detecting supply failures creates a pathogen agent of type supply delay and associates an antigen to the delay duration. The APC agent estimates this duration based on previous occurrences of similar disruptions, stored in the ontology knowledge base as pathogens. The APC agent reports the disruption occurrence to a decision maker, who confirms the pathogen creation and adjusts the delay duration to 70 time units.
The so detected supply delay disruption propagates through the production system. Decision makers need to be aware of all disruption impacts in order to anticipate corrective and preven-tive decisions. Therefore, antigens are used to identify direct disruption consequences. The pathogen agent broadcasts a mes-sage containing its antigen to aggress cell agents. Using fault tree analysis ( Ferdous et al., 2007 ), the PO1 cell agent checks the impact of the supply delay antigen on the cell agent quantity specifications and identifies that this antigen results in a missing quantity. A danger signal (DgSig1) is then generated and reported to the decision maker, who confirms the danger signal and determines the missing quantity.

Danger signals are used to propagate the disruption and determine its downstream impacts on the production system. The affected PO1 cell agent broadcasts a message containing danger signal (DgSig1) to the TO1 cell agent. Using fault tree analysis ( Ferdous et al., 2007 ), the TO1 cell finds that the supply delay antigen results in a transportation delay, and that DgSig1 results in a missing transportation quantity. Two danger signals (DgSig2 and DgSig3) are then generated and reported to the decision maker who confirms their creation.

Once a disruption is detected and its consequences are identified, decision makers need to be assisted to find suitable monitoring decisions. Antigens and danger signals are used to stimulate B agents associated to algorithms and tools able to solve the problems raised by the delay disruption of this example, which are mainly assignment and dispatching problems.

The supply delay antigen stimulates a B agent (B1) to update the supplier delivery time for this item. Danger signal (DgSig1) stimulates a B agent (B2) to check the ERP procurement module for alternative suppliers. B agent (B2) finds that the missing quantity can be assigned to two alternative suppliers (S2 and S3). In this case, another B agent (B3) is stimulated to split the purchase order PO1 into several suborders and to dispatch suborders to alternative suppliers. B agent (B3) can be inter-changeably associated to several algorithms to achieve this task. In this prototype example, we use the algorithm by Ruiz-Torres and Mahmoodi (2006) to find optimal order assignments to suppliers taking into account delivery failure risks. Finally, another B agent (B4) is stimulated to accommodate the delay by right shifting the purchase order initial scheduled end date. Similarly, danger signal (DgSig2) stimulates the B agent (B2) to find alternative transporters. In this example, an alternative transporter T2 is found.

Once several monitoring alternatives are found, some coordi-nation is needed to insure reaction coherence and efficiency. Th agents show the perceived antigens, danger signals and B agent suggestions to a decision maker and rely on his expertise to construct coherent immune responses. An immune response is constructed by assigning B -cell suggestions to each antigen and danger signal. Th agents help in the evaluation of both the performance (here supply time and total cost) and the residual consequences of the responses using an approach proposed by Gindorf and Cornford (1999) .

Fig. 10 shows an example of an immune response that was selected by the decision maker to be applied as a reaction to the disruption. In this response, the supplier delivery time is updated to take into account the delay duration; the purchase order is split into two suborders which are assigned to two alternative suppli-ers, and the transportation order is assigned to an alternative transporter. The danger signal reporting a missing transportation the reaction decisions of this immune response on the Gantt diagram.

This immune response is then stored as a memory cell. The memory cell stores the antigens, the danger signals and the corresponding B -cell suggestions that were selected to be applied.
In this way, the memory cell keeps track of how decision makers coordinated between available reaction decisions to manage the disruption. Consequently, this memory cell represents a recovery plan, which can be reused in case of occurrence of a similar or identical disruption in the future. 8. Discussion and future research directions
The conceptual framework we have presented provides possi-ble directions and mechanisms to address the key questions given in the beginning of Section 5 . Therefore, the different concepts presented can be considered as one possible way of including such considerations in a software tool. However, as it was confirmed with the development of ARTIMOS, we are basically faced with some limitations of genericity, because of the variety of disruptions that can occur in very different and complex manufacturing environments. As a consequence, if the immune paradigm can certainly advance what we can do to cope with disruptions, several important research directions can be drawn from this research.

Although several functions of the artificial immune system were carried out in an automatic way, other tasks still require more expert knowledge. Such tasks include evaluating the risks generated by a disruption occurrence, defining responses and evaluating their ability to reduce the generated risks to a tolerable level, or deciding whether to continue or to stop the process of finding responses to a disruption. As a consequence, providing cells with more intelligent capabilities, through artifi-cial intelligence techniques (e.g. knowledge based approaches), and risk evaluation approaches (e .g. simulation) are important issues.

The detection of disruptions and identification of conse-quences should be subject to further studies so as to incorporate uncertainty (using fuzzy logic for example). The detection of disruptions can be enhanced through the use of control charts, and the identification of consequences can benefit from research on performance indicator systems.

Being able to capture decision maker choices and to store them as memory cells represents a necessary first step towards reusing this knowledge during future occurrences of similar disruptions. Here again, more investigation is needed in order to  X  X  X ompare X  X  disruption occurrences and stimulate appropri-ate memory cells. In this respect, techniques such as case based reasoning can be investigated.

Simulation is known to be an interesting approach to deter-mine the consequences of disruptions. Incorporating simula-tion models when evaluating consequences and danger should be useful.

Interoperability considerations to assess communication and interaction between available decision support tools are important issues regarding practical implementation. In parti-cular, their possible connection or integration with MES and/or ERP systems remains to be studied.

Biological immunity has inspired the suggestions made in this article. However, the immunity theory should be further studied in order to improve the artificial immune system capabilities (e.g. how responses are coordinated, how the danger theory can help in handling risk and can be combined with reliability techniques, etc.). 9. Conclusion
This paper presented the main features of an immune based framework to handle disruptions in distributed and disrupted production systems. Unlike most existing artificial immune sys-tem applications, which often focus on the design of a particular algorithm (e.g. optimization algorithm for scheduling), the sug-gested framework is intended to integrate several types of algorithms (rescheduling, reassignment, etc..) and tools (produc-tion, maintenance, quality management, etc.). In this respect, it provides assistance in organizing and capitalizing the knowledge needed to handle disruptions. It offers a tool to document disruptions and to create recovery plans, which can be used during reaction to renewed similar occurrences of disruptions.
Using the multi-agent technology, we developed a first prototype to show that this framework is implementable as a multi-agent artificial immune system. This system is distributed, modular, flexible and extensible, and can assist decision makers in handling disruptions when controlling a production system.
This assistance is concerned with several tasks, such as detection of disruptions, identification of direct and potential consequences and suggestion of reaction decisions. Flexibility and extensibility refer to the system ability to integrate a variety of algorithms, tools and approaches to implement each of the supported disruption handling tasks. Although the immune concepts and mechanisms were illustrated on two types of disruptions (machine failure and supply delay), they can take into account a much larger variety of disruptions.

As shown in the previous section, this approach opens inter-esting research directions since it could be used to integrate several types of concepts and tools used in the monitoring and control of manufacturing systems. It is also worth noting that in this article we have focused on the control of production systems. However, immune paradigms for higher decision levels (e.g. supply chain management) would certainly be worth studying. References
