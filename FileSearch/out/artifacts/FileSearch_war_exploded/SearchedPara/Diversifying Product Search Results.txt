 In recent years, online shopping is becoming more and more popular. Users type keyword queries on product search sys-tems to find relevant products, accessories, and even related products. However, existing product search systems always return very similar products on the first several pages in-stead of taking diversity into consideration. In this paper, we propose a novel approach to address the diversity issue in the context of product search. We transform search result di-versification into a combination of diversifying product cate-gories and diversifying product attribute values within each category. The two sub-problems are optimization problems which can be reduced into well-known NP-hard problems re-spectively. We further leverage greedy-based approximation algorithms for efficient product search results re-ranking. H.3.3 [ Information Storage and Retrieval ]: Retrieval Models Algorithm Product Search, Result Diversification
Nowadays, online shopping has become the first choice of a large group of users. Facing so many different kinds of products, product search systems are always the main entrance for most people to begin online shopping. Similar to searching Web documents, users type keyword queries to those product search systems and get a list of relevant products. Within the results, users wish to find products of different types or brands, products with different attribute values (like color, model, size) and their accessories on the first several pages. However, like Web search engines [2], existing product search systems perform poorly on result diversification and usually return very similar products.
To address the diversity issue, we propose a simple but ef-fective approach with special considerations on the features of product data. Different from Web documents, products on the Web are usually semi-structured. Each product is described by a set of attributes (e.g., product name, color and model). It also belongs to one or several categories predefined in a taxonomy. According to the above obser-vation of product features, the result diversification is com-posed of two parts: (1) diversifying product categories en-ables returning products of different types as well as prod-uct accessories; (2) diversifying attribute values of products within each category allows to return products of different attributes or particular attribute values. Both aspects en-sure more diverse products are returned.

Like diversification approaches widely used in Web docu-ment search, our approach re-ranks relevant results provided by some general search engine. In other words, while finding diverse product results on the first pages, we also preserve the high relevance of top returned products. We define the two sub tasks as optimization problems in which both rel-evance scores and diversity of products are included in the objective functions. The optimization problems are further reduced to two well-known NP-hard problems and we use greedy approximation algorithms to produce diversified but relevant results efficiently.

Product result diversification is different from that in data-base search. When searching database with keyword queries, people usually focus on query translation for diversified struc-tured queries. On the other hand, compared with result di-versification for Web documents, we provide more dedicated algorithms by utilizing the structural features of product data. To the best of our knowledge, this is the first work to address the diversity issue in the context of product search.
In order to diversify products, we re-rank the search re-sults (with their relevance score) returned by some existing product search systems or general search engines. We first group product search results according to their categories. In each category, we re-rank products according to a newly defined score function called attribute diversity score . Then we merge the items from different categories according to an-other newly defined score function called category diversity score .
For a keyword query q and a category c , we fetch all rel-evant items from the underlying search engine. The objec-tive of attribute diversification is to present as many &lt;at-tribute, value&gt; pairs as possible in the top items while preserving the relevance of these items.
Suppose L ( q,c ) is the result list of query q under category c . Let be the attribute diversity score of the i -th item in list L , where L i is the i -th item in list L , and A (  X  ) is the set of attribute-value pairs of a product. The formula is composed of two parts. The former one w ( L i ) stands for the rele-vance of L i while the latter one counts the contribution of attribute-value pairs of L i which are not included in any pre-vious items. Note  X  a is a parameter that adjusts the weight between relevance and diversity.

Given the number of returned products as k , the objective function for re-ranking within one category is defined as:
Through mapping each product u to a set of all of its attribute-value pairs (each weighted by  X  a ) and the product itself (weighted by w ( u )), we reduce the re-ranking prob-lem to the weighted maximum coverage problem . Since the problem is NP-hard, we employ a greedy e e  X  1 -approximation algorithm to make the re-ranking process practical. In each step, we add the item with the maximum attribute diversity score among the remaining items to the result list.
We get the final result list by merging different result lists of diversified categories.

While a product might belong to more than one category, we can pick up a dominant category which shares the largest number of attribute schemata with the product. We denote the dominant category of a product u as c ( u ).

Suppose u is the l -th element of L ( q,c ( u )), we define g as g ( L ( q,c ( u )) ,l ). Let L be the final result list. Inspired by [3], we define the objective function as follow: f c ( L ,k ) = ( k  X  1) where dist(  X  ,  X  ) is the category diversity score function which defines the node distance on a taxonomy tree, and  X  c is an adjusting parameter.

We further reduce the optimization problem to the facility dispersion problem by defining a distance function between two items u and v :
The facility dispersion problem is also NP-hard, we em-ploy a 2-approximation algorithm. In each step, we choose the pair of products with the maximum pairwise distance among the unselected items. Since the result list of each cat-egory is ordered non-increasingly by the product attribute diversity score, at each selection stage, we only need to con-sider the top two unselected items in each category X  X  result list to make d 0 (  X  ,  X  ) maximized, which yields a fast solution.
The experiments were carried out on a product data set exported from a famous online shopping site. There ex-ist 17,480,804 products in the data set. Each product has
Figure 1: NDCG-IA scores and MRR-IA scores 18.55 attributes on average. These products belong to 712 categories which form a taxonomy tree.

We use NDCG-IA (intent-aware normalized discounted cumulative gain) and MRR-IA (intent-aware mean recipro-cal rank) as the evaluation metrics which have been proposed in [1]. Since this is the first work of product result diversi-fication, we use Lucene as our baseline to return the initial the result list by only considering relevance.

Since we do not own real product query logs, in order to reflect real user information needs, we selected 30 keyword queries covering different domains like IT, Office, Clothes, Mechanics, Food, Music and so on. The number of cate-gories associated with these queries ranges from 2 to 4.
The search results of each query were labeled by our col-leagues who are not involved in this project. The NDCG-IA scores and MRR-IA scores under different k are shown in Figure 1. The baseline system is marked as R-only . RC rep-resents the system considering category diversification only, and RCA is the system further diversifies attributes within each category. As shown in the figure, we can notice with the increase of k , the NDCG-IA scores and MRR-IA scores of all three systems increase accordingly. In most cases, RC per-forms slightly better than the baseline. When further con-sidering the attribute diversification, the performance gain becomes significantly large. Moreover, RCA performs consis-tently better than the other two systems no matter what k is with respective to both metrics.

Finally, we discuss the influence of the two parameters  X  and  X  c . When  X  a increases, we prefer products with more attributes or different attribute values within one category. When  X  c increases, we prefer products belonging to more different categories. In both cases, we lower the importance of relevance contribution in the top products. In this paper, we adjusted the two parameters (  X  c = 1 and  X  a = 1 . 5) to reflect a balanced consideration of relevance and diversity.
In this paper, we proposed a simple but effective approach which tries to diversify search results for product data. The diversification is done through re-ranking products in one category and merging result lists from different categories. In the future, we plan to try other features in the calculation and carry out more extensive experiments on real query logs. [1] R. Agrawal, S. Gollapudi, A. Halverson, and S. Ieong. [2] J. Carbonell and J. Goldstein. The Use of MMR, [3] S. Gollapudi and A. Sharma. An Axiomatic Approach
