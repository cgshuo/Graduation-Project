 1. Introduction
In reactive distillations, high conversions are always expected with a satisfactory purity in products which necessitates a high performance closed-loop control ( Tade and Tian, 2000 ). Unfortu-nately, on-line measurement of compositions is a typical problem in industry as stated by many investigators ( Mejdell and
Skogestad, 1991 ; Quintero-Marmol and Luyben, 1992 ; Baratti et al., 1995 ; Kano et al., 2000 ; Bahar et al., 2004 ). On-line measurements of the product compositions are possible with direct composition analyzers which are usually expensive, difficult to maintain, necessitating frequent calibrations and which introduce undesirable time delays in the feedback control loop. Thus, in the presence of unmeasured disturbances, infer-ential control is one of the solutions that can be used to control an unmeasured process output. Although, in distillation columns, the compositions are strong functions of temperatures ( Kano et al., 2000), in multi-component distillation, temperature control is not always effective for composition control, since the tray tempera-ture does not correspond exactly to the product compositions (Patke et al., 1982, Kano et al., 2000 ). Therefore, it is important to be able to infer compositions from secondary measurements like temperatures, flows, pressures, etc. An estimator that utilizes more than one temperature measurement can be used to infer the compositions. These estimates in turn, can be used by the controller to adjust the values of the manipulated variables. batch reactive distillation column and to develop a state estimator for the column by using ANN that can estimate the product compositions to be used in the control algorithm. 2. Process description
An esterification reaction of ethanol with acetic acid to produce ethyl acetate and water and their separation in a batch distillation column is studied. The endothermic, second order, reversible reaction is carried out at 70 1 C under atmospheric pressure conditions. In this quaternary system, ethanol form azeotrope with water, ethyl acetate forms azeotropes with water (8.2 wt% water, boiling point 70.4 1 C), and with ethanol (30.8 wt% ethanol, boiling point 71.8 1 C), a ternary azeotrope between ethyl acetate X  X ater X  X thanol is also formed (7.8 wt% water, 9.0 wt% ethanol, boiling point 70.3 1 C) ( Ullman, 1996 ).

The operation of a batch distillation is carried in a number of stages in the order of realization as: start-up period, distillation at total reflux, withdrawal of the lightest product, removal of a slop-cut, withdrawal of the next heaviest product, removal of a second slop-cut and so on. During total reflux operation, the concentra-tion of the lightest component (EtAc) increases on the upper trays of the column and the concentrations of the other components increase in the still pot. When the distillate composition of EtAc reaches its desired purity, then the reflux ratio is set to a pre-specified value and at the same time, the distillate stream is transferred to 1st product-cut tank and distillate product is withdrawn. Removal of the lightest component (EtAc) shifts the chemical equilibrium further to the right and improves conver-sion. Therefore, reaction and distillation occur simultaneously in the system. However, complete conversion cannot be attained due to the azeotropic system. Also, since the acetic acid is the heaviest component in the system, it remains mostly in the bottom of the column. Therefore, the production of ethyl acetate is limited by the lack of reactant acetic acid on the upper parts of the column. In time, the EtAc purity in 1st product-cut tank drops below its desired value. At this time, a slop-cut is withdrawn until the distillate composition of the next heavier component (EtOH) reaches its specified purity. Then the distillate is diverted to 2nd product-cut tank. This operation is continued until all the intermediate compounds are separated which leaves the content of the reboiler as the final product-cut tank rich in the heaviest component (AcAc). The distillation is continued until the composition in the reboiler reaches the desired concentration.

If the aim of the production is to separate each compound from the feed mixture at specified purity levels, the number of product-cuts is equal to the number of components in the feed, NC, and the number of the maximum possible slop-cuts is NC-1. Fig. 1 shows a schematic drawing for a multi-component batch distillation column system with its reboiler, condenser, reflux drum, product and slop-cut storage tanks.

A previously developed dynamic simulation model verified with experimental data is used in this study. The assumptions employed in the model development are negligible vapor holdup, constant volume of tray liquid holdup, constant liquid molar holdup in the reflux drum, total condenser, negligible fluid dynamic lags, linear pressure drop profile, Murphree tray efficiency, approximated enthalpy derivatives and adiabatic operation. The column parameters are given in
Table 1 and the details about the model can be found in Bahar (2007) . a chemical reaction necessitating an optimal reflux ratio profile to be obtained by solving a dynamic optimization problem.
Due to the azeotropes in the system and due to the close boiling points of ethanol and ethyl acetate (351.7 and 350.2 K, respectively), the reflux ratio profile has to be designed carefully to be able to withdraw ethyl acetate selectively over ethanol. The optimal operation policy of a batch distillation process can be calculated off-line by the use of a reliable process model.
In batch distillation reflux ratio optimization problem, in the objective function and/or in the constraints; terms corresponding to the purity of the products, the amounts of the products, the energy requirement and the costs of the raw materials are considered. In the literature, three different formulations of this optimization problem are given as: maximum distillate problem, minimum time problem, and/or maximum profit problem.

In this study, maximization of the Capacity Factor (CAP) defined by Luyben (1988) is selected as the performance criteria for the dynamic optimization problem. The CAP in a batch distillation is defined as the total amount of the specified products per total batch time. If P 1 , P 2 , P 3 , and P 4 are the amounts of products obtained and the t F is the total batch time, then CAP can be found using Eq. (1). The total batch time accounts for the time for operation at total reflux and the time for producing the products and the slop-cuts.
 CAP  X  P 1  X  P 2  X  P 3  X  P 4 t
The functional constraints for Eq. (1) are given by the model equations. There are also constraints on the reflux ratio itself and on the desired purities of the components collected in the product-cut tanks. The desired purity of the ethyl acetate collected in the first product-cut tank is selected as 0.52, which is the maximum purity of ethyl acetate that can be obtained after the total reflux operation. Other desired purities of the compo-nents collected in the product-cut tanks are selected by considering their maximum possible purities.

The nonlinear optimization problem is summarized in Table 2 . 4. Inferential control using ANN state estimator
An inferential control methodology that uses ANN estimator system to infer the product compositions from temperature measurements is developed ( Bahar and Ozgen, 2008 ) which is further used to control the optimal reflux profile. 4.1. Observability criteria and selection of measurement points
As in most real controlled processes, in batch distillation, the system state ( i.e. compositions), X , is not identical with the 4.3. ANN architecture
Neural networks generally consist of a number of intercon-nected artificial neurons and the arrangement of the interconnec-tions and the nature of the connections determine the structure of the network. The strengths of the connections are adjusted or trained to achieve a desired overall behavior of the network and this is governed by its learning algorithm. Neural networks can be classified according to their structures and learning algorithms as feedforward and recurrent networks.

An Elman network, which is a recurrent network, is used in this study. In an Elman network, in addition to the input units, hidden units, and output units, there are also context units. The input and output units have an interaction with the outside environment, however the hidden and context units have not. The input units only pass the signals without changing them. The output units sum the signals fed to them. The context units are used only to memorize the previous activations of the hidden units. At a specific time, k, the previous activations of the hidden units (at time k X 1) and the current inputs (at time k) are used as inputs to the network.

The input/output mapping of a network is established according to the weights and the activation functions of their neurons in input, hidden and output layers. The number of input neurons corresponds to the number of input variables in the neural network, and the number of output neurons is the same as the number of desired output variables. The choice of the number of hidden layers and the neurons in the hidden layer(s) depends on the network application. Since four composition values in the distillate are desired to be taken as outputs from the neural network, there must be four neurons in the output layer. Selection of the number of hidden layers is a critical issue in designing a network and is not as straightforward as input and output layers.
There is no mathematical approach to obtain the optimum number of hidden layers, since such selection is generally fall into the application oriented category. Nevertheless, the number of hidden layers can be chosen by trial and error where the configuration with the fewest number of layers and neurons, which quickly and efficiently yield the minimum root-mean-squares (RMS) error, is selected. In general, adding a second hidden layer improves the network X  X  prediction capability due to the nonlinear separability property of the network. However, adding an extra hidden layer commonly yields prediction capabilities similar to those of two hidden layer networks, but requires longer training times due to the more complex structures. In this study; two hidden layers with 20 neurons in the first hidden layer and 34 neurons in the second hidden layer are used in the network structure. Hyperbolic tangent sigmoid transfer functions ( tan-sigmoid) are used for the hidden layers and linear transfer function ( purelin) is used for the output layer. The hyperbolic tangent sigmoid transfer function is represented as: tan sig  X  x  X  X  X  e x e x  X  =  X  e x  X  e x  X  X  4  X 
The linear transfer function also known as purelin function is simply a linear function that produces the same output as its input. The purelin function is represented as: purelin  X  x  X  X  x  X  5  X  4.4. Range of variables
Neural networks cannot make accurate estimations if the operating input/output data are outside their training data range.
Therefore, the training range is considered to cover enough number of reflux ratios and the neural network is trained with temperature and composition data generated by the help of 5.2. Artificial neural network state estimator
The inferential control of the distillation column under study is achieved by using some of the temperature measurements along the column to estimate the distillate compositions by the use of
ANN estimator system. An important issue for the developed neural network estimator system is how well the network system performs once training is completed. Testing the performance of the estimator system must be done in two steps: verification step and recall/generalization step. 5.2.1. Verification tests
In the verification step, the estimator system X  X  performance is evaluated using a specific initial input that is used in training. The estimator system then attempts to predict the corresponding output. In Fig. 2 , the responses of the distillate compositions for a reflux ratio (L/V) of 0.7, 0.9 and for the optimum reflux ratio compositions in the reflux drum or in product-cut tanks are the inputs to the actual scheduling sytem as measured variables and the reflux ratio of the column is used as the manipulated variable.
The optimal reflux ratio profile of the column is used as the pre-set reflux ratio values in the control algorithm. The tank, to which the distillate stream has to be diverted and the time for diversion (i.e. to change the reflux ratio to optimized pre-set value) are decided by the input compositions to the controller and by utilizing the actual scheduling policy. In the control structure, the compositions are supplied by the ANN estimator system. The block diagram and flow chart of this control scheme are shown in
Fig. 5 a and b, respectively. In control studies, the previously developed column simulation model ( Bahar, 2007 ) is used to find the  X  X  X imulated-actual X  X  distillate composition responses to adjust the operation scheduling (i.e. the reflux ratio policy). The same procedure is repeated with the estimated values of the compositions using the ANN estimator system. IAE scores of the response of distillate compositions, CAP and the total batch time, t are used as the performance measures. a) Control Studies with Actual Composition Values:
In simulation, the distillate composition data obtained from the column model are used as feedback signal to the controller.
The desired product purities [0.52, 0.5, 0.65, and 0.999] in the 15 min intervals. It is observed in Fig. 6 b that deviation in compositions start after the total reflux period. Thus, a correction at this point is crucial. As a first trial, a correction during the total reflux period and another one just after this period is considered.

In Fig. 7 , the change of compositions in the reflux drum with time is shown for the feedback inferential control algorithm where error refinement is considered by utilizing two actual measured distillate composition values of the column.
The optimum reflux ratio values adjusted in time by the controller are shown with dashed line. The IAE scores in the estimations of four components in the reflux drum are remarkably reduced. In addition, the errors in the CAP (5.34 mol/h) and the total batch time (37.41 h) are also reduced to 5% and 2%, respectively.

As a result of this analysis, it can be said that, the reactive batch distillation column can be controlled for variable reflux ratio policy by the use of ANN estimator system. discharge to the product/slop-cut tanks. Thus, an optimization procedure utilizing capacity factor (CAP), is used in a reactive batch distillation column. This is the first utilization of the neural networks for the estimation of product compositions in a reactive batch distillation system which is proved to be adequately successful for the control of the system.
 References
