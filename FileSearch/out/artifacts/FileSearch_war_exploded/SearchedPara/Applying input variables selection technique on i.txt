 1. Introduction
BOF is a widely preferred and effective steelmaking method due to its high productivity and considerably low production cost.
Therefore, almost 65% of the total crude steel productions in the world are melted by using the BOF method. BOF steelmaking is a very complex chemical physical process. The quality of scrap iron changes from batch to batch. The grades of steel produced vary frequently, and the components of raw materials fluctuate largely.
As a result, it is a tough task to implement the operation of BOF production. The main objective of controlling oxygen converter steelmaking is to obtain prescribed parameters for the steel when it is tapped from the furnace, including weight, temperature, and each element content. In practical steelmaking process, the criterion whether the molten steel is acceptable or not is often decided by the endpoint carbon content and temperature. In general, there are two main tasks of BOF: one is to make carbon percentage decrease from approximately 4% in hot metal to less than 0.08% in liquid steel, and the other is to make temperature increase from approximately 1250 1 C in hot metal to more than 1650 1 C.

Generally, the BOF steelmaking process with sub-lance system can be divided into two stages: static control and dynamic control. Static models include oxygen supplying model, slaging model and bottom blowing model; dynamic models include decarburization speed model, molten steel warming model and the model for the amount of coolant. Dynamic control ( Feng et al., 2006) for sub-lance is on the basis of static control.
For converter steelmaking plant, mechanism model, statistical model and neural network model ( Blanco and Dixz, 1993 ) are commonly used in recent years. A solution based on heat and mass balance from the static model ( Neto, 1981 ) has been employed. But unfortunately, a lot of theoretical assumptions and too many parameters are involved in the traditional control methods, such as mechanism models based on heat balance and material balance, or statistic models based on regression analysis. Therefore, these models are often difficult in modeling precisely. With the development of artificial intelligence technology, neural network models and other intelligent methods have been widely applied in BOF steelmaking process. Kubat et al (2004) proposed a fuzzy model for the static control of BOF process. As a result of the application of the fuzzy model, acceptable levels of compatibility were achieved compared to the empirical BOF data in an integrated steel plant in Turkey. Coxa et al. (2002) proposed three BP models for the dynamic control of BOF process, these three models are used to predict the quantity of end-blow oxygen and end-blow coolant and determine whether the coolant is added or not. Xie et al. (2003) , Bigeev and Baitman (2006) also adopted different intelligent models to describe the BOF steel-making process. Though these aforementioned intelligent models make up the deficiencies of the traditional models to some degree, they ignore the influence of input simplifying on the prediction precision. According to Szekely (2003) , it is very necessary to simplify the input variables to reduce the complexity and improve the generalized capacity of the industrial model. Han et al. (2008) proposed ICA and Greedy Kernel Components ( Han and Huang, 2008) to reduce the dimensions, but ICA and GKC make the inputs inexplicable.

This research focuses on the prediction of BOF endpoint carbon content and temperature. Support vector machine method is used to construct the prediction models. To improve the prediction precision with less dimensional and more effective inputs, a variable selection process which contains mechanism analysis and mutual information is proposed. Furthermore, each selected variable is weighted by the mutual information values. Finally, two simpler and more accurate input weighted support vector machine endpoint prediction models are established.

The main contribution of this paper is that a variable selection method composed of mechanism and mutual information calculation is proposed to select input variables appropriately and effectively. Also, the prediction and hit rate performance of BOF process is improved by endpoint carbon and temperature SVM prediction models.

The remainder of this paper is organized as follows. Section 2 presents the proposed BOF steelmaking endpoint dynamic model system. Section 3 and Section 4 describe the variable selection algorithm and support vector machine model, respectively.
Experiment results are presented in Section 5 and concluding remarks are in Section 6. 2. BOF steelmaking endpoint dynamic model system 2.1. Process description
The BOF comprises a vertical solid-bottom crucible with a vertical water-cooled oxygen lance entering the vessel from for charging and tapping. The charge is normally made up of 85% molten pig iron (hot metal) and 15% scrap before blowing the oxygen. After that, the converter is rotated to a vertical position and then oxygen is turned on. During the blowing period, high-purity oxygen is blown onto the top of the hot metal at a speed of 16,000 cubic feet per minute. Assistant materials such as burnt-lime, dolomite and iron ore are added into vessel by two or three batches during the blowing time. BOF process aims to lower the levels of impurities which are carbon, silicon, manganese and phosphorus and raise the temperature from about 1350 to 1680 1 C. The heat is from the oxidation reaction and no external heat is required. Carbon is oxidized to carbon monoxide and carbon dioxide, are taken out from the exhaust gas hood. Silicon, manganese and phosphorus are oxidized and combined with the assistant materials to form the slag. If the carbon level and temperature meet the requirements, the liquid steel is tapped from the tapping hole into the steel ladle. Slag is on the top of steel and be left in the converter.
 consists of specified chemical composition, at the proper tapping temperature. Control is difficult because the entire process takes only half an hour and it is hard to sample and analyze during this time. Generally, the real production adopts dynamic control practice which is shown as Fig. 2 . Before blowing, the static model estimates the oxygen consumption value of the total steelmaking process. When the blowing reaches about 85% of the total value, the sub-lance (i.e. a probe is dipped into bath) goes down into the liquid steel to detect carbon content and temperature. Based upon the on-line measured carbon content and temperature, the oxygen volume and the added coolant weight in second blow period are determined. The second blow period is also called dynamic period or end-blow period. Correspondingly, in metallurgy, the model of this period is called dynamic model. If the carbon content or temperature of second measurement does not hit the target, a re-blow step is needed until liquid steel carbon content and temperature are acceptable.
 criterions to determine whether the steel can be tapped. Dynamic period is designed to enhance the hit rate of carbon content and temperature at the end of the blow. In dynamic period, chemical reactions tend to equilibrium and the main reaction occurs between oxygen and carbon. Other impurities, such as manga-nese, phosphor and so on, have achieved dynamic equilibrium values basically. In this period, Oxygen affects molten steel X  X  carbon content through the reaction with carbon. At the same time, the caloric from the oxidation reaction makes the tempera-ture rise. Coolants added into converter mainly affect the molten steel X  X  temperature by physical effect and reduction reaction.
During the dynamic process, decarbonization rate is described as formula (1) and formula (2) t  X  Q I  X  2  X  time, Q is blown oxygen volume and I is blow velocity of oxygen.
The integration of formula (3) is given by ln w  X  C  X  ln w  X  C 0 kt  X  3  X  where w  X  C 0 is the carbon content measured by sub-lance. Take exponent to formula (3) on both sides, carbon content of bath in dynamic period can be calculated as Bath temperature can be described as
T  X  T 0  X  T r T c  X  5  X  where T 0 is the temperature measured by sub-lance, T r is the raised temperature by blowing the oxygen and T c the decreased temperature by adding the coolant. 2.2. Solution strategy
The BOF endpoint prediction model here is used to predict endpoint carbon content and temperature of liquid steel. They are concerned with carbon content and temperature measured by sub-lance, second blow oxygen volume and added coolant such as lime, sheet iron, ore and dolomite.

High dimension is common in industry field and it is disadvantageous for the improvement of model precision. With the dimension increasing, the density of sample data always reduces by exponent and makes the data insufficient. While the dimension increases from one to three, the data density decreases from 50% to 12.5% and is illustrated in Fig. 3 . As we know, machine learning methods have the ability of self-learning, but they usually need enough data information to study adequately. The low density of training sample will limit the study of intelligent model.

In this study, corresponding variable selection techniques are adopted to choose more important input variables and decrease the number of inputs. Two variables selection steps to simplify the endpoint carbon content and temperature prediction models are described as follows:
First, analyze the mechanism of reaction and determine the importance of each variable based on the physical meaning to reduce the inputs as few as possible.

Second, calculate the mutual information between input and output variables. Add or remove input variables based on mutual information value and mechanism analysis.

After variable selection, the input weighted support vector machine is used to construct the endpoint carbon content and temperature prediction model. The weights are determined according to the mutual information values, to distinguish the importance of each input and strengthen the effect of more important ones to the output. Two separate models are employed to predict endpoint carbon content and temperature. BOF steelmaking dynamic model system framework is shown in Fig. 4 . 3. Variables selection
As described above, the available inputs for prediction models are sub-lance measured carbon content and temperature, second blow oxygen volume and quantities of coolants contain lime, sheet iron, ore and dolomite. Through Section 2.1, sub-lance measured carbon content and second blow oxygen volume are selected as the input variables of endpoint carbon content prediction model. All available input variables are chosen for endpoint temperature prediction. 3.1. Mutual information
A number of selection criteria, such as correlation coefficient and least square regression error, can be used to select the input variables. Mutual information (MI) is chosen here because MI is capable of estimating a general dependence between two variables ( Reyhani et al., 2005 ; Cover and Thomas, 1990 ).
Between two random variables X and Y , mutual information value can be interpreted as a quantity that measures the knowledge on Y provided by X . Therefore, it can Y.
Given two discrete variables X =[ x 1 , x 2 , y , x n ]and Y =[ y the MI between X and Y is traditionally defined as I  X  X ; Y  X  X  where x i isasampleofvariable X and y j isasampleofvariable Y ; p x and p y are marginal probability distributions of X and Y ,
Mutual information is related to the information theoretic notion of entropy by the following equations: where H ( X ) and H ( Y ) are the entropy of X and Y , respectively, entropies, respectively.
 H ( X ), H ( X / Y ) and H ( X , Y ) are defined as H  X  X  X  X  H  X  X = Y  X  X  H  X  X ; Y  X  X  where p x/y ( x i ) is the conditional probability of X given Y . The entropy H ( X ) is known as a measure of the amount of uncertainty about the random variable X , while H ( X / Y ) is the amount of uncertainty left in X when knowing Y .
 the random variable X by the knowledge of another random variable Y , or, equivalently, the amount of information that Y contains about X . the relationships can be illustrated as Fig. 5 .
If X and Y are independent, p xy ( x , y )= p x ( x ) p y
I ( X , Y ) Z 0. Thus, mutual information can play the same role with the correlation coefficient method while it reveals nonlinear correlation between variables. 3.2. Variable selection algorithm
In this section, a proposed input variables selection algorithm is presented. The algorithm is based on the mechanism analysis and mutual information calculation.

Through the mechanism analysis, the carbon content which is measured by sub-lance and the quantity of oxygen which is blown after the sub-lance measurement are more important markedly than other input variables to endpoint carbon content.
In addition, all the input variables have effect on endpoint temperature. In this step, for an output variable, if an input variable x i is selected, marked as m 1 X each input variable and output variable. The MI values are represented as m 2 X performed by the following procedure: 3) 8 X i F , compute the MI value m 2 X 4) Compute the threshold value T  X  b P X i A Fm 1 X 5) 8 x i F ,if m 2 x cross-validation. 4. Support vector machine (SVM) model vector machine method is used to construct BOF endpoint prediction model. SVM has been received increasing attention because of its remarkable characteristics, including a strong theoretical foundation, good generalization performance, the absence of local minima, and sparse representation of solution (Vapnik, 1995 ).
 ( x 2 , y 2 ), y ,( x N , y N )}, where x i A R m , y i A space F by using a function column vector F ( ), and a linear regression is then performed in this feature space so that f  X  X  X  X  w T F  X  X  X  X  b  X  11  X  where w A R , b is the threshold.
 following function should be minimized C where J J denotes the Euclidean distance, C is the regularized function.
 study
E e  X  f  X  x  X  y  X  X  variables x n and ^ x n for each data point.
 C subject to f  X  x i  X  y i r x i  X  e i  X  1 ; ... N by introducing Lagrange multipliers a n Z 0, ^ a n Z 0, m ^ m
Z 0 and optimizing the Lagrangian L  X  C
Setting the derivatives of the Lagrangian with respect to w , b , x and ^ x n to zero gives w  X   X  a n ^ a n  X  X  0  X  17  X  a  X  n  X  C  X  18  X  ^ a  X  ^ m n  X  C  X  19  X 
Using these results to eliminate the corresponding variables from the Lagrangian, the dual problem involves maximizing ~ L  X  a ; ~ a  X  X  1 2
The predictions for new inputs can be made using y  X  x  X  X  The parameter b can be found by considering the Karush X  X uhn X 
Tucker (KKT) conditions b  X  t 5. Results
The paper constructs the endpoint carbon content and temperature prediction models according to the approach described above with industrial production data set of 60 data points. The available input variables are carbon content of molten steel which is measured by sub-lance x 1 , quantity of re-blown oxygen x 2 ; temperature of molten steel which is measured by sub-lance x 3 ; weight of lime x 4 ; weight of mixed material x weight of sheet iron x 6 ; weight of ore x 7 ; weight of dolomite x
Two output variables are endpoint carbon content y 1 and endpoint temperature y 2 . 5.1. Pre-treatment and criteria
Before modeling, the input and output data were normalized in the range of 0 X 1 by the follow transform:  X  k  X  X  where x 0 i  X  k  X  is the normalized value of x i ( k ), and x are the minimum and maximum of the variable x i .

After the normalization, all the inputs own the same importance to the output variable. But based on the mutual information calculation, the selected input variables have differ-ent weightiness to the output variable, some inputs are more important for output and some are less important. To distinguish the different weightiness and enlarge the information in more important variables relatively, two input weighted support vectors machine models are used to predict the endpoint carbon content and temperature. The weights are added onto each input variable and established by consulting the mutual information values, as formula (24) shows w output variable y i , s j is the set of input variables for output variable y j , l is the number of inputs.

Two criteria are employed to evaluate the results: hit ratio and root mean square error (RMSE). Hit is used to judge whether the prediction result satisfies the request of practical production or not. If the absolute value of distance j D T j between temperature prediction model output and practical temperature satisfies if the absolute value of distance | D T | between carbon content prediction model output and practical carbon content satisfies content and temperature hit the target at the same time, define that simultaneously hits the target. Hit ratio is the ratio of hit heats in all prediction heats that can be calculated as formula (25) Hr  X  N hit N where Hr is the hit ratio, N hit is the number of heats that hit the target, N heats is the number of the predicted samples.
Root mean square error (MSE) is used to evaluate the precision of the model which can be calculated as follows: rmse  X  number of the predicted samples. 5.2. Variable selection for BOF endpoint prediction models
Based on the mechanism analysis, carbon content which is measured by sub-lance and the quantity of oxygen which is blown after the sub-lance measurement are selected as input variables for endpoint carbon content prediction model. And for endpoint temperature prediction model, all the input variables are selected. Hence, a matrix that can represent the result of mechanism analysis variable selection is M variable is selected for the j th output.

Calculate the mutual information valves m 2 x inputs and outputs, the results are shown in Table 1 .
Calculate the threshold values for the input variables selection of these two prediction models, using the formula (18)
T  X 
The parameter b and SVM parameters which are the width of radial basis function b and regulation coefficient C are established by cross-validation. The parameters values are shown in Table 2 with b =0.9.

According to the variable selection criterion m 2 x content prediction model and variables x 1, x 2, x 3, x 4, set S 2 as the inputs of endpoint temperature prediction model.
The weighted value for each input variable is calculated as formula (24) and the final input to SVM are w i x i. 5.3. Tests
The support vector machine method is more proper for small sample data than neural network, so the support vector machine method is chosen here. Radial basis function is selected as kernel function. Thirty-five data points are used to modeling and the remaining 25 data points are used to test the model.
Based upon the variable selection, the selected input variables for endpoint carbon content and temperature prediction models are shown in Table 3 .

Endpoint carbon content and temperature prediction curves are shown in Figs. 6 and 7 , where solid line represents the practical value and the dashed represents the prediction value. It shows a good performance on prediction and achieves a satisfying result.
 The result that compared using all variables is shown in
Table 4 . Here hit ratio ( C ) denotes the hit ratio of carbon content prediction; RMSE ( C ) denotes the RMSE of carbon content prediction. Hit Ratio ( T ) and RMSE ( T ) are concerned with temperature prediction. SVM means support vector model with all available input variables. MI_IWSVM means support vector model based on mutual information variable selection and input weighted. When endpoint carbon content prediction error satisfies | D C | o 0.05%, the hit ratio raises from 84% to 92% and root mean square error (RMSE) decrease from 3.9989 to 2.7828. When endpoint temperature prediction error satisfies | D T | o 15 1 C, the hit ratio raises from 88% to 92% and root mean square error decreases from 9.0921 to 8.7539.

From the comparison in Table 4 , the hit ratio and RMSE are improved through the proper variable selection and input weighted. The results indicate that variable selection algorithm is essential and effective.

Table 5 details the statistical analysis of the error. 5.4. Comparison
Xie et al. (2001) combined gray model with a neural network method (G_NN) to predict the endpoint carbon content and temperature of steel with the same data as this paper used and chose all the data available as the model inputs. When the also the same as this paper, endpoint temperature hit ratio is 88%, endpoint carbon content hit ratio is 88%, and the simultaneous hit ratio is 76%.The root mean square error of temperature prediction is 11.6064 and the mean square error of the carbon content is 3.5964.

Han et al. (2008) employed mechanism analysis and inde-pendence component analysis to reduce the input dimension, and then construct RBF neural network models (ICA_NN) to predict the endpoint carbon content and temperature of steel with the same data as this paper used. When the requirement of prediction error is | D T | o 15 1 Cand| D C | o 5 which is also the same as this paper, endpoint temperature hit ratio is 92%, endpoint carbon content hit ratio is 92%, and the simultaneous hit ratio is 88%. The root mean square error of temperature prediction is 8.7645 and the mean square error of the carbon content is 3.0754.

The comparison between these two methods and method in this paper (MI_WSVM) is shown in Table 6 , all criteria of the models in this paper are better than the model in references. For hit ratios, ICA_NN and MI_WSVM are the same. For root mean square error of temperature prediction, MI_WSVM is a slightly better than ICA_NN. But for carbon content prediction,
MI_WSVM makes a considerable progress as the temperature measured by sub-lance is selected by mutual information calculation. 6. Conclusions
This research presents an effective variable selection and modeling method for converter steelmaking endpoint carbon content and temperature prediction. Variables selection process contains two steps of mechanism analysis and mutual informa-tion calculation. The selected variables are used to construct the prediction models. After the pre-treatment, input dimension of endpoint carbon content prediction model reduces from 8 to 3 and endpoint temperature prediction model X  X  inputs reduces from 8 to 6. The model precision and hit ratio achieve a remarkable improvement comparing with using all the inputs. The results of this method are better than existed methods. Dimension reduction pre-treatment for modeling is necessary and valid.
 Acknowledgments
This research is supported by the project (2007AA04Z158) of the National High Technology Research and Development Program of China (863 Program), the project (60674073) of the National Nature Science Foundation of China, the project (2006BAB14B05) of the National Key Technology R&amp;D Program of China and the project (2006CB403405) of the National Basic Research Program of China (973 Program). All of these supports are appreciated.
 References
