 Witnessing the rapid growth of online social networks, viral marketing (i.e., influence maximization) in social networks has attracted much attention of data mining community in the last decade [ 5 , 7 , 10 ]. Traditional viral marketing prob-lem aims at selecting the set of seed users to maximize the awareness of ideas or products merely based on the social connections among users in one single tain heterogeneous information [ 18  X  20 ], e.g., various types of nodes and complex links, via which users are extensively connected and have multiple channels to influence each other [ 9 ]. multiple social networks simultaneously to enjoy more social network services. The shared users across multiple social networks are named as anchor users [ 13 ]. Anchor users exist widely in the real world. Via these anchor users, influence can propagate not only within but also across social networks [ 16 ]. To support such a claim, we investigate the partially aligned network dataset studied in this paper (i.e., Twitter and Foursquare) and the results are given in Fig. 1 . In Fig. 1(a) ,we randomly sample a subset of anchor users from Foursquare and observe that 409 out of 500 (i.e., 81 . 8%) sampled users have reposted their activities (e.g., tips, location checkins, etc.) to Twitter. Meanwhile, the activities reposted by these 409 anchor users only account for a small proportion of their total activities in Foursquare, as shown in Fig. 1(b) .
 ple partially aligned heterogenous social networks simultaneously. This is for-mally defined as the Aligned Heterogeneous network Influence maximization (AHI) problem. The AHI problem studied in this paper is very important and has extensive concrete applications in real-world social networks, e.g., cross-community [ 1 ]even cross-platform [ 16 ] product promotion [ 17 ]and opinion dif-fusion [ 2 ].
 Fig. 2 -A shows the two partially aligned heterogeneous input networks. To con-duct viral marketing in the input networks and solve the AHI problem, we first extract multiple influence channels (i.e., multi-relations) among users with the heterogeneous information (e.g., traditional follow links, retweet, location check-ins, as well as anchor links, etc.) and then select the optimal seed user set based on the constructed multi-relational network, as shown in Fig. 2 -B. works on information diffusion and influence maximization, including:(1) tra-ditional viral marketing problems in one single homogeneous social network [ 6 , 12 , 17 ], like the Twitter network shown in Fig. 2 -C; (2) topic diffusion in heterogeneous information networks [ 9 ], which explores information diffusion in one single multi-relational network (e.g., the Twitter network in Fig. 2 -D); and (3) influence maximization in multiplex social networks [ 16 ], which studies infor-mation maximization problem across multiple homogeneous social networks by simply combining multiple networks into one single homogeneous network (e.g., the network shown in Fig. 2 -E). In paticular, [ 16 ] assumes that the shared users will propagate all the information reaching them to the other network, which is unrealistic and severely violates our observation in Fig. 1(b) . Different from all these related works, in the AHI problem: (1) the social networks are heteroge-neous [ 18 ]; (2) multiple social networks [ 20 ] are studied simultaneously, where the different heterogeneous networks may have different structures or network schema as shown in Fig. 3; and (3) social networks studied in this paper are partially aligned by anchor links [ 20 ] instead of being simply merged together. Addressing the AHI problem is very difficult due to the following challenges:  X  Information Diffusion in Heterogeneous Networks : Users in heterogeneous networks are extensively connected with each other by different types of links and information can diffuse among users via different channels. Modeling information diffusion in heterogeneous social networks is very challenging.  X  Cross-Network Information Propagation : Via the anchor links, information can propagate across networks. Modeling inter-network information diffusion remains an open problem.  X  NP-hard :The AHI problem is proved to be NP-hard , which cannot be solved in polynomial time.
 To address the above challenges, a new model M ulti-aligned M ulti-relational extracts multi-aligned multi-relational networks with the heterogeneous infor-mation across the input OSN based on a set of inter and intra network social meta paths [ 18 , 20 ]. M&amp;M extends the traditional Linear Threshold (LT) model to depict the information propagation within and across these multi-aligned multi-relational networks. Based on the extended diffusion model, the influence function which maps seed user set to the number of activated users is proved to be both monotone and submodular . Thus the greedy algorithm used in M&amp;M, which selects seed users greedily at each step, is proved to achieve a (1 approximation of the optimal result.
 studied problem in Section 2. In Sections 3-4, we introduce the proposed M&amp;M method. Experiments are given in Section 5. Finally, we introduce the related works in Section 6 and conclude the paper in Section 7. In this paper, we will follow the definitions of concepts  X  anchor user  X ,  X  het-erogeneous networks  X ,  X  aligned networks  X , ect., proposed in [ 20 ]. Based on the definitions of these terminologies, the AHI problem can be formulated as follows: AHI : Given two partially aligned networks [ 20 ] G (1) and G undirected anchor link set A [ 13 ] between G (1) and G (2) and G (2) can be represented as U (1) and U (2) respectively. Let  X  ( U (1)  X  X  (2) be the influence function [ 12 ] which maps the seed user set number of users influenced by users in Z .The AHI problem aims at selecting the optimal set Z  X  which contains d seed users to maximize the propagation of information across the networks, i.e., Z  X  = arg max Z X  X  (1)  X  X  (2) In this section, we will introduce the method M&amp;M in details. M&amp;M can extract multi-aligned multi-relation networks (MMNs) based on a set of inter and intra network social meta paths. The traditional LT model is extended in M&amp;M to depict the information propagation across MMNs. 3.1 Multi-aligned Multi-relational Networks Extraction We utilize the meta paths [ 18 , 20 ] defined based on the network schema to extract multi-aligned multi-relational networks with the heterogeneous information in aligned networks.
 Definition 1. Network Schema: For the given network G , its network schema can be defined as S G =( O, R ) with O and R denoting the set of node types and link types in G .
 the network schemas of the two networks are different, so the heterogeneous networks cannot be simply merged together as in the homogeneous case [16]. Based on the network schema, we can represent the diffusion channels as a set of intra and inter network social meta paths that are defined as follows. Definition 2. Intra-network Social Meta Path: An intra-network social meta path P , based on the given network schema S G =( O, R ) , is denoted as O { 1 , 2 ,  X  X  X  ,k  X  1 } . In addition, O about meta paths connecting users, i.e., social meta paths [ 20 ]. Definition 3. Inter-network Social Meta Path: Given two partially aligned heterogenous networks G (1) and G (2) with network schemas S and S to be an inter-network social meta path between G (1) and G O  X  O (2) ,i  X  X  1 , 2 ,  X  X  X  ,k } , R i  X  R (1)  X  R (2)  X  X  Anchor and Anchor is the anchor link type. Furthermore, O 1 = User User  X  O (2) ,and  X  m  X  X  1 , 2 ,  X  X  X  ,k  X  1 } such that R m = { In both Foursquare and Twitter, users can follow other users and check-in at locations, forming two intra-network influence channels among users. Mean-while, (1) in Foursquare, users can create/like lists containing a set of locations; (2) while in Twitter, users can retweet other users X  tweets, both of which will form an intra-network influence channel among users in Foursquare and Twitter respectively. The set of intra network social meta paths considered in this paper as well as their physical meanings are listed as follows: intra-network social meta paths in Foursquare (1) follow :User (3) co-location via shared lists :User List  X   X  X  X  X  X  X  X  X  X  X  X  X   X  User intra-network social meta paths in Twitter (1) follow :User (3) contact via tweet :User write  X   X  X  X   X  Tweet retweet  X   X  X  X  X  X  X   X  Users can diffuse information across networks via the anchor links formed by anchor users. This can be abstracted as inter-network social meta path : User  X   X  X  X  X  X  X   X  User . By taking the inter-network meta paths into account, the studied problem becomes even more complex due to the fact that non-anchor users in both networks can also be connected via intra-and inter-network meta paths. As a result, the number of social meta path instances grows mightily. Each meta path defines an influence propagation channel among linked users. If linked users u , v are connected by only intra-network meta path, we say u has intra-network relation to v , otherwise there is inter-network relation between them. Based on these relations, we can construct multi-aligned multi-relational networks (e.g., the network shown in Fig. 2 -B) for the aligned heterogeneous networks (e.g., the networks shown in Fig. 2 -A). The formal definition of multi-aligned multi-relational networks is given as follows: Definition 4. Multi-Aligned Multi-Relational Networks: For two given heterogenous networks G (1) and G (2) , we can define the multi-aligned multi-relational network constructed based on the above intra and inter network social meta paths as M =( U, E, R ) ,where U = U (1)  X  U (2) denote the user nodes in the MMNs M .Set E is the set of links among nodes in U and element e can be represented as e =( u, v, r ) denoting that there exists at least one link ( u, v ) of link type r  X  R = R (1)  X  R (2)  X  X  Anchor } ,where R intra-network link types of networks G (1) , G (2) and the inter-network Anchor link between G (1) and G (2) respectively. 3.2 Influence Propagation in Multi-aligned Multi-relational In this subsection, we will extend the traditional linear threshold (LT) model to handle the information diffusion across the multi-aligned multi-relational net-works (MMNs).
 G =( V, E ), user u i  X  V can influence his neighbor u k  X  to weight w i,k  X  0( w i,k =0if u i is inactive ), where  X  following u i (i.e., set of users that u i can influence) and Each user, e.g., u i , is associated with a static threshold  X  minimal required influence for u i to become active .
 users with different diffusion relations is estimated by pathsim [ 18 ]. Formally, the intra-network (inter-network) diffusion weight between user u and v with relation i ( j ) is defined as: paths instances, starting from u and ending at v with relation i ( j ). the size of the set. Thus, P i ( u, ) ( Q j ( u, ) )and P path instances with users u, v as the starting and ending users, respectively. the network. In step t , all active users remain active and inactive user can be activated if the received influence exceeds his threshold. Only activated users at step t can influence their neighbors at step t +1 and the activation probability for user v in one network (e.g., G (1) ) with intra-network relation i and inter-network relation j can be represented as g (1) v,i ( t +1) and h (1) g v,i ( t +1)= respectively and  X  ( u, t ) denotes if user u is activated at timestamp t . Note that anchor user v (1) is activated does not mean that v (2) is activated at the same time, but v (2) will get influence from v (1) via anchor link.
 By aggregating all kinds of intra-network and inter-network relations, we can obtain the integrated activation probability of v (1) [ 9 ]. Here logistic function is used as the aggregation function. where  X  (1) i and  X  (1) j denote the weights of each relation in diffusion process, can get activation probability of a user v (2) in G (2) . In this section, we will first analyze the influence maximization problem based on M&amp;M model, and then provide M&amp;M Greedy algorithm for seed users selection. 4.1 Analysis of Influence Maximization Problem Kempe et al. [ 12 ] proved traditional influence maximization problem is a NP-hard for LT model, but the objective function of influence  X  ( submodular . Based on these properties, the greedy approximation algorithms can achieve an approximation ratio of 1  X  1 /e .
 With the above background knowledge, we will show that the influence maxi-mization problem under the M&amp;M model is also NP-hard and prove the influence spread function  X  ( Z ) is monotone and submodular.
 Theorem 1 . Influence Maximization Problem across Partially Aligned Heteroge-nous Social Networks(AHI) is NP-hard.
 Proof: The AHI problem can be easily mapped to  X  X ertex Cover X  problem which is NP-complete. Thus AHI problem is NP-hard.
 Theorem 2 . For the M &amp; M model, the influence function  X  ( Proof: Given the existing seed user sets Z ,let z be a seed user selected in this round. Since the weights of multi-relation are nonnegative, adding a new seed user z will not decrease the number of influenced users, i.e.,  X  ( Therefore the influence spread function is monotone for the given M&amp;M model. Theorem 3 . For the M &amp; M model, the influence function  X  ( Proof: It can be proved with the live-edge path method proposed in [ 12 ] very easily. The detail is omitted due to space limitation.
 Algorithm 1. M&amp;M Greedy Algorithm for AHI problem 4.2 Greedy Algorithm for AHI problem Since the influence function is monotone and submodular based on the M&amp;M model, step-wise greedy algorithms which select the users who can lead to the maximum increase of influence can achieve a (1  X  1 e )-approximation of the optimal result. Algorithm 1 is a greedy algorithm to solve the AHI problem based on M&amp;M model. 5.1 Experiment Preparation In this part, we will introduce the dataset and baselines used in the experiments. Dataset Description : The partially aligned heterogeneous network dataset used in the experiment are Foursquare and Twitter, The statistics of the two datasets are given in Table 1 . For more detailed information about the dataset as well as its crawling methods, please refer to [ 13 ].
 Baselines : We use following methods as baselines:  X  The M&amp;M method (M&amp;M): M&amp;M is the method proposed in this paper, which can select seed users greedily from the extracted MMNs. Depending on from which network to select the seed users, different variants of M&amp;M are compared: (1) M&amp;M (which selects seed users from both Foursquare and Twitter), (2) M&amp;M-Foursquare (selecting only from Foursquare), and (3)
M&amp;M-Twitter (selecting only from Twitter).  X  Lossless method for multiplex networks (LCI) : Method LCI is the influence maximization method proposed for multiplex networks in [ 16 ], which selects seed users from the merged network as shown in Fig. 2 -E.  X  Greedy method for single heterogenous network (Greedy) : Based on a multi-relational network (as shown in Fig. 2 -D), method Greedy selects seed users who can lead to the maximum influence gain within one single network. Sim-ilar to M&amp;M, Greedy also has two variants: Greedy-Foursquare and Greedy-
Twitter.  X  Seed Selection method based on traditional LT model(LT) : Based on one sin-gle homogeneous network (e.g., Fig. 2 -C), LT selects seed users who can lead to the maximum influence gain. Two variants of method LT, LT-Foursquare and LT-Twitter, are compared in the experiments. 5.2 Experiment Setup Based on the input aligned heterogeneous networks, the MMNs are extracted based on a set of intra and inter network social meta paths. The influence score among users in each relation is used to calculate the aggregated activation prob-ability with the logistic function. For simplicity, the weights of all relations (both intra and inter network) are set to be equal (i.e., 0.25 in this paper). The thresh-olds of users are randomly select from the uniform distribution within range [0,1]. The number of selected seed users is selected from { 5 , 10 , different partially aligned networks, we randomly sample the anchor links from the networks with different anchor ratios: { 0 . 3 , 0 . 6 anchor links are preserved while the remaining 70% are removed.
 To evaluate the performance of all comparison methods, the number of finally activated users by the seed users is counted as the evaluation metric in the experiments, where anchor users are counted at most once. For example, for an anchor user u (whose accounts in Foursquare and Twitter are u respectively), if neither u (1) nor u (2) is activated, then u will not be counted as the activated user (i.e., 0); otherwise u will be counted as one activated user finally (i.e., 1). 5.3 Experiment Results The experiment results are given in Fig. 4 , where the anchor ratios of (a) and (b) are 30% and 60% respectively.
 As shown in both figures, the number of influenced users will increase as more users are added as the seed users. M&amp;M outperforms all the baselines consistently. that M&amp;M can perform better than both M&amp;M-Foursquare and M&amp;M-Twitter in both Fig. 4(a) -4(b) . It demonstrates that selecting seed users globally (i.e., both of the networks) can achieve better results than the method selecting seed users locally (i.e., either Foursquare or Twitter).
 For example, in Fig. 4(a) with seed user set size 20, seed users selected by M&amp;M can activate 246 users, which is 117% larger than the 113 users activated by the seed users selected by LCI. Similar results can be observed for other seed user set sizes in both Fig. 4(a) and Fig. 4(b) . As a result, M&amp;M which selects seed users from MMNs can perform better than LCI which selects seed users from combined multiplex networks.
 Foursquare and Greedy-Twitter) and LT methods (both LT-Foursquare and LT-Twitter), M&amp;M can always achieve better performance for different seed user set sizes and anchor ratios in Fig. 4(a) -4(b) . In summary, selecting seed users based on cross-network information propagation model can select better seed user sets than those merely based on intra-network information propagation models. 5.4 Parameter Analysis To study the effects of anchor ratio parameter, we compare the performance of all these comparison methods achieved at anchor ratio 0 . 3 and 0 . 6, whose results are shown in Fig. 5 , where Fig. 5(a) -5(b) correspond to the seed user set sizes 5 and 50 respectively. We abbreviate M&amp;M-Twitter and M&amp;M-Foursquare as M&amp;M-T and M&amp;M-F, while Greedy is abbreviated as G.
 different anchor ratios in Fig. 5(a) -5(b) , we observe that Greedy-Foursquare, Greedy-Twitter, LT-Foursquare and LT-Twitter can perform exactly the same with different ratios, as these comparison methods are all based on intra-network information propagation models.
 with lower anchor ratio, e.g., 0 . 3. With lower anchor ratio, less information can propagate across networks. However, with lower anchor ratio, more users will be non-anchor users. According to the evaluation metric introduced in Subsec-tion 5.2 , anchor users X  accounts in multiple aligned networks will be counted at most once in the results, which is the reason why M&amp;M can perform a little better for networks with anchor ratio 0 . 3 than those with anchor ratio 0 . 6. Influence maximization problem as a popular research topic recent years was first proposed by Domingos et al. [ 6 ]. It was first formulated as an optimization problem in [ 12 ]. Since then a considerable number of work focused on speeding up the seed selection algorithms. CELF in [ 14 ] is faster 700 times than original Greedy method, and Chen designed heuristic algorithms for both IC model [ 4 ] and LT model [ 5 ]. Some other papers extended information diffusion models and provided efficient algorithms [ 3 ]. However almost all existing work studied influence maximization problem only for one single network. Nguyen et al. [ 16 ] studied the least cost influence problem across multiplex networks. As to another related topic, information diffusion study, heterogenous and multi-relational networks became an increasingly hot topic [ 18 , 19 ]. Tang et al. [ 15 ] proposed a generative graphical model to mine topic-level influence strength with both link and textual information. Gui et al. [ 9 ] proposed models by consid-ering weighted combination of different types of relations. While all these work focused on one network. In this paper, we study the novel problem of influence maximization across par-tially aligned heterogeneous social networks. To solve this problem, we propose multi-aligned multi-relation network based on intra and inter network meta paths to model information diffusion process. Greedy algorithm is proposed to select seed users in multiple heterogenous networks. Extensive experiments conducted on two real OSNs verify the effectiveness of the proposed algorithm. We believe that our work will not only advance the research on influence maximization problem, but also benefit many real-world applications.

