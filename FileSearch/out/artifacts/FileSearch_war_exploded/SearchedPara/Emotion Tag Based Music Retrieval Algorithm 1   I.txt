 retrieval is now the heavy traffic on the Internet [1]. Traditional MIR (music informa-tion retrieval) system cannot meet people X  X  various needs. As there is a close connec-tion between music and emotion, the idea of emotion based music retrieval is listen to a piece of music that can cheer her or him up, at this moment she or he will search music by mood no matter what the melody sounds or whom the artist is. 
As the prevalence of Web 2.0, web users are bestowed more freedom of motion to define music tags according to their own understanding of music, which denote users X  distinguishing comprehension of music. Music is to express emotions and interpreted joviality or sorrow. Emotion based MIR system allows users to search music via im-puting emotional words, which satisfies the individual needs. 
This paper proposes an emotion tag based music retrieval algorithm to assist in im-Popularity. Emotion tags, provided by listeners from different perspectives, are usually good the music  X  X ake Me To Your Heart X  are  X  X ad X ,  X  X eartbroken X ,  X  X rieved X ,  X  X uffer-ing X ,  X  X ost X  etc. These emotion tags provide a new metadata for the similarity calcu-lation between a query and a piece of music. We propose a new similarity estimation algorithm, T_SimRank to compute latent semantic similarity between tags and music. they tend to click the popular the tags. Considering the above intuitions, we propose a novel algorithm, T_PageRank to measure the popularity of music using tags. 
In this paper, we will show the detailed algorithm and evaluate on a music corpus which consists of 169 emotion tags and 35421 corresponding songs. All tags are Chi-nese emotion tags, and most songs are Chinese. Preliminary experimental results show that T_SimRank can calculate the emotion tags similarities semantically, and satisfactory performance. By incorporating different methods (cosine, Co_Tags will be introduced below), it reaches a best performance. The rest of this paper is organized as follows. Section 2 discusses the related work. Section 3 presents the semantic similarity algorithms, especially, T_SimRank algo-rithm in detail. Section 4 proposes the popularity ranking algorithm, T_PageRank. experimental methods and corpus are presented together with results analysis. The last section concludes the paper with a brief outlook on future work. Nowadays, much research work on music emotion chiefly is emphasized on the analysis of audio information such as tempo, rhythm, timbre, strength, etc [2-6]. In the dimensional model [8] are two most popular ways to demonstrate the relationship between music and emotions. In Hevner X  X  adjective circle, eight groups of adjectives user perceptions. Thayer X  X  model describes mood as a product of the dimensions psychological emotion from  X  X appy X  to  X  X nxious X  . In traditional MIR system, music mood is annotated by audio experts, but professionally created labels have been criti-cized for not capturing the users X  perspectives on mood. Emotion tags were imported to analyze the music mood to avoid the discrepancies between the general human and last.fm and found that the number of emotion tags is second only to genre tags [10], emotional tags can enhance music information retrieval. express music sentiment from various views, can be attached to the same music. Emo-tion tags defined in this article includes not only conventional emotion terms such as  X  X oyful X  and  X  X orrowful X  , but also  X  X eartbroken X ,  X  X ummer X ,  X  X unshine X ,  X  X ove X  emotion tags including  X  X raceful X ,  X  X eisure X ,  X  X irst love X ,  X  X ummer X ,  X  X uietness X ,  X  X appy X ,  X  X enderness X  ; likewise,  X  X orrowful X  is added to Fish Leong X  X   X  X reathing many-to-many relationship between tags and songs. Figure 1 depicts a bipartite graph of tags and songs. 
Tags  X  X ad X  and  X  X orrow X  are both added to  X  X  little pain X  ,  X  X fter I X  X e gone X  an d  X  X eparation song X  , which denotes that the two tags are semantically similar; as such, because of the same tags attached to them. Music information retrieval based on tags similarity aims to retrieve songs that do not have just tags but are highly similar. Tak-actly have the tag. 3.1 Co_Tags Semantic Similarity from different perspectives, e.g. emotion, th eme, genre and so on. Semantic similarity computing method based on tag concurrence is defined with respect to use tag concur-rence frequency [11]. Here, value of 3.2 T_SimRank Semantic Similarity between two arbitrary vertices by using global information of a graph [12]. The main idea of it lies in the assumption that the two objects are similar when the neighbors of them are similar. Meriting our reference to it, we propose T_SimRank algorithm, the idea of T_SimRank can be described as following: (1) Similar tags are usually assigned to similar music. (2) Similar music usually has similar tags. (3) A tag has highest similarity with itself. (4) A piece of music has highest similarity with itself. 
T_SimRank is a iterative procedure as described in Table 1 where N tag denotes the t probability from s i to its tag is 1/N. 
The convergence of the algorithm can be proved in a similar way as SimRank. For improved methods such as BlockSimRank[13], we can reduce the complexity. Figure 2 shows the first iteration X  X  T_SimRank results of the sample data in Figure 1, where c and c 2 are set to 1. 
Tags are used as query in tags based information retrieval systems, in this situation, tags set of music s , the similarity between q and s can be computed by: to the formula: choose a song with higher popularity. The more popular the music is, the more people tend to pick it while browsing the music list, and the more tags will be annotated to it. In this paper, we suppose that all tags are annotated by the users to express their ideas. In Web2.0, many people like clicking the tags to search the music. The more popular the tag is, the more people tend to click it. When people is browsing the music pages, connect the different music with tags, the more same tags two songs have, the higher probability of jumping from one music to another. Taking advantage of PageRank rithm which can be elaborated as: (1) Music is more popular if it is linked by more music. (2) Music is more popular if it is linked by popular music. (3) Music is more popular if it has more popular tags. Here, tag popularity, in general, refers to the number of usage of the tags, and can be number of annotated music, then () () v Figure 3 shows the subgraph of music graph. 
Similar to PageRank, T_PageRank is iterative, the key point of it can be described by the formula (5), after convergence, we use Hot ( v i ) to represent final popularity of can see that () () ii In v Out v = . the average number of neighbor nodes for each song. We can use some improved methods such as the idea of block to reduce the complexity. Ranking is the key step in information retrieval system and ranking algorithm in-cludes traditional cosine similarity measurement, T_SimRank, T_PageRank and so ranking problem, the goal of it is to optimize loss function through fusing all ranking algorithms into one algorithm. 
The data necessitated in learning to rank comprises the following three parts: query, query related documents and manually annotated relatedness between query and documents. In this paper, users X  emotion tags are taken as query, songs are repre-sented as documents. Similarly, relatedness between query and documents are tagged by members in our lab. Ranking SVM model [16] employed here adopts partial or-the following formula: w
G is the weight vector and needs to be gr adually adjusted during the learning proce-document j k d to eigenvector j j X . 6.1 Datasets and Evaluation Measure men.baidu (http://zhangmen.baidu.com), which consists of 169 emotion tags and  X  X leasant to hear X  ,  X  X avorite X  and  X  X ove X  are removed. (2) Tags with ambiguous means the song is about love or the user loves the song. To ensure the quality of the emotion tags, these ambiguous words are removed. (3) Obviously synonymous tags emotion tag is not selected. At last, we get 140 emotion tags and 35418 songs. 
We build 20 query sets which involves 10 positive queries and 10 opposite. There each query, according to the times recommended, each music is set as one of the five levels: Irrelevant (score 1, recommended by 0 times), Weakly Relevant (score 2, rec-mended by 9-10 times). We use P@N and NDCG@N (Normalized Discounted Cu-mulative Gain) [17] as the performance evaluation measure. P@N: In this paper, P@N is defined as the ratio of Most Relevant (score 5) music in the TopN returned results. NDCG@N: NDCG is well suited to MIR evaluation as it returns relevant music that is top-ranked more heavily than those ranked lower. NDCG@N is computed as: Where Z n is a specially calculated normalizatio n constant for making a perfect order-music returned. 6.2 Experiment Result In our experiment, the  X  cosine Similarity  X  and  X  Co_Tags Similarity  X  are taken as the baseline. In cosine Similarity, tags assigned to music are consider ed as the short text, each tag is a feature term whose weight is computed by TFIDF. The songs are ranked by the cosine score. Co_Tags Similarity has been introduced in section 3.1. 
In this paper, Ranking SVM [16], a typical method of learning to rank, is used to learn weights for all the features. All parameters are default in SVM light tool. 6.2.1 Ranking Using Similarity Figure 4 shows the comparison of P@N of the cosine, Co_Tags and T_SimRank. We can easily find that both Co_Tags and T_SimRank perform much better than cosine, T_SimRank performs best. In the top5 or top10 results returned by T_SimRank, more than 70% songs are Most Relevant (score 5). 
The average NDCG@N results with different methods are illustrated in Figure 5, and the results demonstrate that T_SimRank can achieve better performance than others. 6.2.2 Ranking Using Similarity and Popularity T_PageRank algorithm with cosine, Co_Tags and T_SimRank respectively. 6.2.3 Ranking Using Fused Methods harmony with the average results, but for the two queries  X  X atural fresh enjoyment X  and  X  X esthetic relax soul life X  , T_SimRank does not perform as good as cosine method. By analyzing the data, we figure out that there are many unwell-known songs retrieved as inputting the two queries mentioned above. When computing the similar-ity between two tags, T_SimRank considers the average similarity of songs related by tags which is superior in songs with less tags. maining 8 results are test sets. Figure 8 and Figure 9 show that the fused methods are better than single method and by incorporating the three all methods, we can achieve the best search result, and both P@N and NDCG@N show statistically significant improvements. Music is to express emotions; emotion tags based MIR allows users to search music by describing one X  X  mood. In this paper, we study the novel problem of integrating emotion performance on MIR. The experimental results show that T_SimRank can successfully popularity effectually. With the tool of Ranking SVM, we find that the fused method is better than single method; by incorporating all methods, we can achieve the best search result. The main contributions can be concluded in three aspects: (1) The proposal of the T_SimRank algorithm to measure the association among (2) The proposal of the T_PageRank algorithm to measure the music popularity; (3) The proposal to incorporate different methods with Ranking SVM to get a In the future, our mainly work will focus on optimizing the proposed algorithms and exploring more sophisticated features to improve the search quality. We will also take advantage of other related researches such as audio music mood and so on. We are grateful to the annotators in these experiments, and particularly, we also thank three anonymous reviewers for their valuable comments. This work was funded by NSFC under award #60673039 and #60973068. 
