 So c i a ln et wo rk a n a ly s i s i sbec o m in gah o tt o p i c in the database a n ddatam inin g c o mmu ni t i es wi th the fast gr owin gp o pu l ar i t yo fs o c i a ln et wo rk app li cat ion s in the w eb age .A s o c i a ln et wo rk i susua lly m o de l ed as a graph wi th no des represe n t in gpe o p l ea n d edges represe n t in gthe i rre l at ion sh i ps , such as ema il a i ms t o u n dersta n dthem i cr o-a n dmacr o-character i st i cs in s i de the n et wo rk . B ased on the ph ilo s o ph y that fr i e n d  X  sfr i e n ds are a l s o pr o bab ly fr i e n ds in a s o c i a ln et wo rk , C l uster in gC o effic i e n t ( CC )i s on e o fthefu n dame n ta l measures f o r assess in g the degree t ow h i ch no des te n dt o c l uster t o gether .T rad i t ion a lly, w euseeach no de  X  s lo ca l CC t o character i ze the no de , a n duseag lo ba l CC t o character i ze the w h ol egraph .

In s o c i a ln et wo rk a n a ly s i s , CC i s wi de ly used t o measure the c lo se n ess o f pe o p l et o agr o up , a n dthe lo ca l X  c li que n ess  X , w h i ch i sthestab ili t yo fs o c i a l c o mmu ni t i es t owi thsta n dthee ff ect o f lin krem ov a l[1 7 ], e . g ., c o-auth o rsh i p in the DBLP dataset [1 2 ]. Ano ther usefu l app li cat ion o fCC i sema il a n dm o b il e messag in ga n t i-spam .So me papers pr o p o sed s o c i a ln et wo rk based detect ion ap -pr o aches t o e x am in ep o te n t i a l spammer  X  ss o c i a l beha vio r [ 7 ].
T ech ni ca lly, CC ca l cu l at ion b oil sd own t o the pr o b l em o ftr i a n g l ec o u n t -in g in graphs .I thasbee n addressed in se v era l appr o aches f o re x act ca l cu l a -t ion [ 2 , 4 ,11,10]. To e li m in ate the li m i tat ion o fh i gh mem o r y c on sumpt ion f o r l arge graphs , samp lin gmeth o ds [15,16] as w e ll as stream o rsem i-stream based appr oxi mat ion meth o ds ha v ea l s o bee n pr o p o sed [ 8 ,5]. How e v er , a ll o f the pr io r art f o cuses on a on e -t i me ca l cu l at ion f o r a certa in graph . C on s i der in gthesce -n ar io o f spam detect ion, CC o ftherec i p i e n ts in a spammer  X  sd i str i but ion li st te n ds t o0w h il eCC o f no rma l users d o es no t .Fo rtherequ i reme n t o f onlin e detect ion, CC will be ca l cu l ated wi th in the rec i p i e n ts o fthese n d in gbatch in a certa in t i me win d ow. B ecause the in c o m in grec i p i e n ts are u n k nown at ru n t i me , the spam detect ion sce n ar io ra i ses the n e w cha ll e n ge o f onlin eCCquer i es o f ra n d o m subsets ov er a d yn am i cs o c i a ln et wo rk .

Ano ther cha ll e n ge i sthatmass iv es o c i a ln et wo rks ca nno tbemem o r y res i de n t a n d are usua lly st o red in re l at ion a l databases , s o d i sk accesses bec o me the b o t -t l e n eck f o rsuchk in ds o fquer y. How e v er , f o r onlin eapp li cat ion s ,lowl ate n c yo f the quer yi sa lw a y sake y requ i reme n t .Fo re x amp l e , u n der the spammer detec -t ion sce n ar io, the s oon er w e detect the spammer the l ess damage i t will cause . So the pr o b l em i s : h ow t o speed up the CC quer yon a n e x treme ly l arge graph that ca nno tfit in the mem o r y?
T h i spaperpr o p o ses a n e win de xin g structure n amed A ppr oxi mate N e i gh -b o rh oo d In de x (ANI) t o s olv e the pr o b l em o f onlin eCCquer i es o fara n d o m subset o fad yn am i cs o c i a ln et wo rk . ANI i samem o r y res i de n t in de x mapp in g each no de t oi ts appr oxi mate n e i ghb o rh oo ds w h i ch i sst o red in a Bloo m -fi l ter li ke data structure .T he space o f ANI l arge ly depe n ds on the s i ze o fthe Bloo m fi l ter used b y each no de , a n dgr ow s lin ear ly wi th n umber o f no des .Fo r a sparse graph li ke a s o c i a ln et wo rk graph , ANI i s v er y space -effic i e n t .Al th o ugh ANI will yi e l dm o re accurate resu l t wi th m o re space ,o ur e x per i me n ts dem on strate that t wo b y tes per no de are e ff ect iv e on as o c i a ln et wo rk o fm illion s o fpe o p l e .W e a l s o prese n tthee x per i me n ta l f o rmu l at o est i mate a su i tab l e Bloo m -fi l ter s i ze g iv e n the c on crete s o c i a ln et wo rk .

ANI ca n be bu il tb yini t i a lly tra v ers in ga ll the edges in s o c i a ln et wo rks in astream in gma nn er , at ca n be in creme n ta lly updated w he n the s o c i a ln et wo rk cha n ges d yn am i ca lly. W he n quer yin gtheCC o f a subset , ANI will retur n aCC upper b o u n da n damuchsma ll er edge set that n eeds t o be further loo ked up in the database t o get a n accurate CC . E x per i me n ta l resu l ts sh ow a2 -10 t i mes speedup w h il ee n sur in g accurac y, a n da 100+ t i mes speedup i f the CC upper b o u n d i sg oo de no ugh f o rtheapp li cat ion.

T he rema in der o fth i spaper i s o rga ni zed as f ollowin g :S ect ion 2 in tr o duces s o me re l ated wo rk ,S ect ion 3 g iv es the deta il ed des i g no f ANI, S ect ion 4sh ow s the perf o rma n ce o f ANI thr o ugh e x per i me n ta l resu l ts , a n d S ect ion 5 c on c l udes . 2.1 Triangle Counting CC ca n be ca l cu l ated b y c o u n t in g n umber o ftr i a n g l es in c l ud in gaspec i fic v er -te x. T here has bee nwo rk on e x act tr i a n g l ec o u n t in g [ 2 , 4 ,11,10]. T he brute -f o rce a l g o r i thms e x am in eeachc o mb in at ion o f no des , resu l t in g in at i me c o mp l e xi t y o f O ( n 3 ). T he t i me c o mp l e xi t y ca n be reduced t o O ( n 2 . 376 ) us in gmatr ix mu l t i-p li cat ion [9]. How e v er , th i sma y st ill be t oo s low t o be app li cab l e on v er yl arge graphs .

B ecchett i et al. [5] pr o p o se t wo appr oxi mat ion a l g o r i thms f o rc o mput in gthe lo ca ln umber o ftr i a n g l es ,w h i ch are based on the i dea o fm in-wi se in depe n de n t permutat ion s .T he y use O ( | V | ) space in ma in mem o r y(on e o fthea l g o r i thms a l s o uses O ( | E | ) space in e x ter n a l mem o r y dur in gc o mputat ion) a n dperf o rm O ( log | V | ) seque n t i a l sca n s ov er the edges in the graph .
 wo rks .T he ma in i dea o fthea l g o r i thm i st o use a low-ra n k appr oxi mat ion o fthe matr ix w h i ch i sge n erated vi athe A ch lio ptas -M c S herr y[1] spars i ficat ion o fthe ad j ace n c y matr ix t o c o mpute the n umber o ftr i a n g l es based on the E i ge nT r i a n g l e a l g o r i thm [1 4 ]
Do u lion [16] i sa n a l g o r i thm that t o sses a c oin t o keep a n edge wi th a certa in pr o bab ili t y p wi th w e i ght equa l t o 1 p in o rder t oo bta in asma ll er w e i ghted graph . T he ni tc o u n ts each tr i a n g l e as the pr o duct o fthe w e i ghts o ftheedgesc o mpr i s in g the tr i a n g l e .T he y pr ov e that the e x pected n umber o ftr i a n g l es in G i sthe w here  X  i sthet o ta ln umber o ftr i a n g l es in G , a n d k i sthe n umber o fpa i rs o f tr i a n g l es that are no tedged i s join t .Any tr i a n g l ec o u n t in ga l g o r i thm ma y use the i dea o f Do u lion as a prepr o cess in gstep .

A ppr oxi mate CC c o mputat ion a l g o r i thms are c l a i med t o be a hu n dred t i mes faster tha n accurate meth o ds wi th a certa in accurac y us in gtech ni ques such as edge samp lin g [ 8 ,15,16] a n dm in-wi se in depe n de n tpermutat ion s [5]. How e v er th o se meth o ds are des i g n ed f o rc o mput in gtheg lo ba l CC o re v er yno de  X  s lo ca l CC at a t i me . 2.2 Bloom Filter ABloo mfi l ter [6] i sas i mp l espace -effic i e n tra n d o m i zed data structure f o rrep -rese n t in gaset in o rder t o supp o rt membersh i pquer i es .Bloo mfi l ters a llow fa l se p o s i t iv es but the space sa vin gs o fte no ut w e i gh th i sdra w back w he n the pr o ba -b ili t yo fa n err o r i smadesuffic i e n t ly low.

A sta n dard Bloo mfi l ter i sab i t arra yo f b b i ts , a ll set t o0.T here must a l s o be k d iff ere n thashfu n ct ion sdefi n ed , each o f w h i ch maps o rhashess o me set e l eme n tt oon e o fthe b arra y p o s i t ion s wi th a u ni f o rm ra n d o md i str i but ion. To add a n e l eme n t , feed i tt o each o fthe k hash fu n ct ion st o get k arra y p o s i t ion s a n dsettheb i ts at a ll these p o s i t ion st o1.To quer y f o ra n e l eme n t ( test w hether i t i s in the set ), feed i tt o each o fthe k hash fu n ct ion st o get k arra y p o s i t ion s . I fa ny o ftheb i ts at these p o s i t ion sare 0, the e l eme n t i s no t in the set .I fa ll are 1, the n e i ther the e l eme n t i s in the set ,o rtheb i ts ha v ebee n set t o1 dur in g the in sert ion o f o ther e l eme n ts .ABloo mfi l ter ma yyi e l dafa l se p o s i t iv e ,w here i t suggests that a n e l eme n t x  X  S e v e n th o ugh i t i s no t .S upp o se that w eadd i i tems in t o a Bloo mfi l ter o f b b i ts wi th k hash fu n ct ion s , Equat ion (1) sh ow sthe pr o bab ili t yo ffa l se p o s i t iv es . Ob vio us ly, the pr o bab ili t yo ffa l se p o s i t iv es decreases as b in creases , a n d in creases as i in creases .Fo rag iv e n b a n d i , the v a l ue o f k that m ini m i zes the pr o bab ili t yi s T ak in gthe o pt i ma ln umber o fhashes , the fa l se p o s i t iv epr o bab ili t y(w he ni t i s no tgreatertha n0.5) ca n be re w r i tte n a n db o u n ded [13]. T h i smea n sthat in o rder t o ma in ta in afi x ed fa l se p o s i t iv epr o bab ili t y, the l e n gth o fa Bloo mfi l ter must gr ow lin ear ly wi th the n umber o fe l eme n ts be in gfi l tered . T h i s sect ion first f o rma li zes the pr o b l em , the n descr i bes the t y p i ca l database database that ca n great ly i mpr ov ethequer y perf o rma n ce . 3.1 Formalization L et V de no te a set o f v ert i ces , a n d E aset o fedges w r i tte n as e i,j  X  E w here v ,v j  X  V .A d i rected graph i sthe n defi n ed as G =( V, E ). T he n e i ghb o rh oo d f o ra v erte x v i , de no ted as N i ,i sdefi n ed as i ts i mmed i ate ly c onn ected n e i ghb o rs as f ollow s : N i = { v j : e i,j  X  E } .H ere w eg iv e o ut the defi ni t ion o f lo ca l CC t o de no te h ow no des in ag iv e n subset o f V c l uster t o gether ,n amed S ubset C l uster in gC o effic i e n t (S CC ). S upp o se S i s a subset o f V a n d | S | = M , the n 3.2 Database Only Solution In the database -only s ol ut ion, as o c i a ln et wo rk i sst o red in a database as a tab l e ; each edge in the graph c o rresp on ds t o arec o rd ( s o urce , dest in at ion, w e i ght )in the tab l e .T he nw ecreatea nin de xon b o th s o urce a n ddest in at ion. A cc o rd in gt o the defi ni t ion o f S CC ,w e n eed t o c o u n tthe n umber o fedges o f w h i ch the s o urce a n d dest in at ion are b o th in the g iv e n subset .S upp o se the tab l ec on ta inin gthes o c i a l n et wo rk i sca ll ed SN TABLE , the f ollowin g S Q L quer y ca l cu l ates the n umerat o r o f S CC f o rag iv e n subset { v 1 ,v 2 , ... ,v M } : SELECT COUNT(*) FROM SN_TABLE WHERE SOURCE IN (V1,V2,...,VM) AND DESTINATION IN (V1,V2,...,VM) AND SOURCE&lt;&gt;DESTINATION T he e x ecut ion t i me o ftheab ov equer y depe n ds on mu l t i p l efact o rs ,in c l ud in g the e x ecut ion path o fthe S Q L quer y, the s i ze N o fthetab l e , the s i ze N o fthe g iv e n subset , a n d the degrees (n umber o f n e i ghb o urs o f v erte x v i in the subset ) D i o feach no de in the g iv e n subset .Fo rs i mp li c i t y, in the f ollowin gd i scuss ion, w e only c on s i der the a v erage degree D o ftheg iv e n subset . Ge n era lly speak in g , the t i me i sma inly spe n t on three k in ds o f o perat ion s : sca nnin gthe in de x, fetch in g each no de  X  s n e i ghb o rs fr o mthetab l e , a n dc o mpar in gtheg iv e n subset wi th each no de  X  s n e i ghb o rs .T ab l e 1 sh ow s the deta il s .W he n N a n d M in crease t o a certa in degree , the quer yl ate n c y beg in st o e x ceed the app li cat ion s  X  restr i ct ion. 3.3 Approximate Neighborhood Index Using Bloom Filter W he n mem o r yi s no tsuffic i e n tt olo ad in the e n t i re graph in de x, a n dthe l ate n c y o fd i rect ly quer yin gfr o m the database i st oo lon gf o rarea l-t i me app li cat ion, w epr o p o se a ba l a n ced meth o dthatusesa nA ppr oxi mate N e i ghb o rh oo d In de x (ANI) tak in g li m i ted mem o r y space t o speed up the CC quer y.

A s w ea n a ly ze in database only s ol ut ion, the quer y t i me in creases wi th N a n d M .To decrease N ,w eca n part i t ion the database , quer y CC on each par -a n dma n ageme n tc o st ,i t i sbe n efic i a l t o keep as much data as p o ss i b l e in each database in sta n ce .H ere ,w epr o p o se ANI t o great ly reduce M .W he n the s o c i a l n et wo rk gr ow st o a n e x treme ly l arge sca l e , database part i t ionin ga n d ANI ca n be used t o gether t o c on tr ol the quer y t i me .
 Approximate Neighborhood Filter (ANF). Fo reach no de in the graph , w eusea Bloo mfi l ter t o st o re i ts n e i ghb o rs ca ll ed  X  X  ppr oxi mate N e i ghb o r Fil ter (ANF) X . G iv e n a n acceptab l efa l se p o s i t iv epr o bab ili t y p a n dthe n umber o fhash fu n ct ion s k , fr o mEquat ion (1) w eca n get Equat ion ( 2 ) t o est i mate h ow ma ny b i ts w e n eed f o reach no de t o st o re on e n e i ghb o r : T ab l e2sh ow sthe v a l ue o f b i o fs o me t y p i ca l k, p c o mb in at ion s . I fthefa l se p o s i t iv erequ i reme n t i s no tthatstr i ct ( sa y1%i s acceptab l e ), the Bloo m -fi l ter appr o ach n eeds ab o ut on et o t wo b y tes t o st o re on eedge .An s w er in g w hether a no de i sthe n e i ghb o r o fthe o thers requ i res O (1) t i me , thus reduc in g the t i me c o mp l e xi t yo fCCt o O ( N ). How e v er , the sh o rtc o m in gs o fus in g Bloo m fi l ters are a l s oo b vio us .Fi rst , s in ce on ep o s i t ion in the Bloo mfi l ter ma y be set t o sett in gthec o rresp on de n ce p o s i t ion st o  X 0 X  ma y resu l t in fa l se n egat iv es . O n e s ol ut ion i st o add a c o u n ter t o each p o s i t ion; a no ther s ol ut ion i st o rebu il da no de  X  s Bloo mfi l ter wi th the rest o f i ts n e i ghb o rs ,w h i ch requ i res that accurate n e i ghb o rs  X  X n f o rmat ion n eed t o be st o red s o me w here .S ec on d , the  X  X  e i ght  X  X  fa n edge ca nno tbest o red in a Bloo mfi l ter , s o th i smeth o dca nno test i mate w e i ghted upper b o u n d o f the accurate CC .

A s o c i a ln et wo rk i sk nown t o ha v ethe  X  X on gta il X  pr o pert y[3,1 7 ], w h i ch mea n s i t i s a sparse graph .Fo r subset c o mmu ni t i es c on ta inin ghu n dreds o f no des , the CC ma y be as low as 10  X  4 o re v e n10  X  5 in pract i ce .Ino rder t o d i st in gu i sh bet w ee n a spammer ,w h o se c on tacts  X  CC i sa l m o st a lw a y s 0in a ny t i me in-ter v a l s , a n da no rma l user , the acceptab l efa l se p o s i t iv epr o bab ili t yo fCC i s 10  X  6 .S upp o se the subset c on ta in s M no des v Equat ion (3): So i trequ i res the a v erage fa l se p o s i t iv epr o bab ili t yo fthe ANF t o be l ess tha n 10  X  6 ,w h i ch makes i t no lon ger space e ff ect iv et o use the Bloo m -fi l ter only s ol u -t ion.

F urtherm o re , the s o c i a ln et wo rk i se volvin g wi th t i me , s o de l et in gs o me no des o r edges ca nno tbea voi ded ,w h i ch mea n sthe Bloo mfi l ter must be used wi th a no ther data st o re t o keep a n accurate rec o rd o fthes o c i a l graph .

So, w epr o p o se a Bloo m -fi l ter based in de x ca ll ed  X  X NI X  in fr on t o fthere l a -t ion a l database t o guara n tee the c o rrect n ess f o rtheCCquer yw h il es i g ni fica n t ly reduc in gthequer yl ate n c y at a reas on ab l emem o r y c o st .
 ANI Construction. W e first create a hash map f o ra ll the no des .I tmaps each no de t oi ts own ANF. T he nw etra v erse the graph in the database in a stream in g w a y. Each t i me w ee n c o u n ter a ( s o urce , dest in at ion) pa i r ,w e in sert the dest in at ion in t o the s o urce  X  s ANF. Fo rs i mp li c i t y, w euseafi x ed l e n gth o f Bloo mfi l ters f o ra ll o fthe no des .A sd iff ere n t no des ha v ed iff ere n t degrees , the no des ha v esma ll degrees , s o as lon gasthe l e n gth o f Bloo mfi l ter ca n c on tr ol the fa l se p o s i t iv es o fthema jo r i t yo f no des , the in de x will be v er y e ff ect iv e .W e sh ow the p i ece o fc o de that bu il ds the in de x fr o m the database in Al g o r i thm 1. Query Through ANI. Fo rag iv e n subset S = { v 1 ,v 2 , ... ,v M } ,w eca nloo k up the ANI, us in geach no de  X  s ANF t o fi l ter o ut the edges that defi ni te ly d ono t e xi st a n dt o get a set o fedgesthatc o u l de xi st in the subset .S pec i fica lly, f o reach v  X  S ,w e will first loo kup i ts ANF fr o mthe ANI, a n dthe n test w hether v ( v edge n umber .T he nw eca n further rem ov efa l se p o s i t iv es us in g the database t o get a n accurate CC v a l ue .T he quer y ca n be re w r i tte n as : SELECT COUNT (*) FROM SN_TABLE Al g o r i thm 2 sh ow s the pseud o-c o de that tra n sfers a subset  X  gr o up  X  X n t o asma ll graph that fi l ters o ut m o st non-e xi ste n tedgesb yloo k in gup n e i ghb o r in d i ces . ANI Update. W he n the s o c i a ln et wo rk e volv es wi th t i me ,i fa no de o ra n edge i s in serted in t o the graph , the ANF will a l s oin sert the n e wno de o redge .I fa no de o redge i sde l eted fr o m the graph ,only the database i s updated acc o rd in g ly. th i spr o b l em b y per io d i ca lly rebu il d in gthe n e i ghb o r in de x fr o m the database . E ffi ciency Analysis of ANI. By quer yin g the database wi th h in ts fr o mthe ANI, w eca n reduce the t i me o f in de x sca nnin g , data fetch in g , a n d n e i ghb o r li st c o mpar in g .In a sparse graph li ke a s o c i a ln et wo rk ,on e no de ma yonly c onn ect t o afe wo re v e n zer oo ther no des wi th in a subset .So s o me no des ca n be safe ly rem ov ed fr o mthes o urce li st .Fo reachs o urce ,i ts n e i ghb o rs ca n a l s o be further restr i cted t o are l at iv e ly sma ll area . R o ugh ly speak in g , up t o(1  X  CC  X  p )o fquer y wo rk lo ad ca n be reduced .H ere w eca n see that the effic i e n c yo f ANI i sma inly infl ue n ced b y the a v erage fa l se p o s i t iv epr o bab ili t y p a n dtherea l CC v a l ue o f the subset .Sin ce CC i s v er y sma ll in sparse graphs a n d p ca n be c on tr oll ed t o a sma ll v a l ue b y pr o per ANF, the reduced wo rk lo ad i s o b vio us . T h i s sect ion e v a l uates the perf o rma n ce o fthe n e i ghb o r in de x b y measur in gthe perce n tage t i me reduct ion fr o mus in g ANI in fr on t o f a database .T he data set w eusedc on ta inin g 3,091,9 4 3 users a n d 1 2 ,10 8 ,369  X  k nowin g  X  re l at ion sbet w ee n them .T he data set i sge n erated fr o m on e w eek  X  sser v er lo g o fash o rt messag in g ce n ter o fac i t y b y rem ovin gpr iv ate in f o rmat ion. O n epers on i sc on s i dered t o  X  k now X  a no ther pers on i fhe / she freque n t ly c on tacts h i m / her .Fi g .1 sh ow sthe cumu l at iv eedgedegreed i str i but ion o f the data set .W eca n see that ab o ut 8 0% o fthe no des ha v eadegree l ess tha n 4 , a n d ov er 90% no des ha v eadegree l ess tha n 8 .

W euset wo k in ds o fCCquer y ser i es .T he fist on e i sca ll ed  X  fi x ed s i ze same degree  X  (FSSD) w h i ch c on ta in s27quer i es ge n erated b y the pr o gram . Each quer y in the FSSD ser i es quer i es CC o f a subset o f 1,000 e l eme n ts wi th the same degree . T he degree v ar i es fr o m 1 t o 27 .T he sec on dquer y ser i es ca ll ed  X  rea l trace  X ( R T) i sarep l a yo ftherea l quer i es o bser v ed in the rea l app li cat ion. I fauserc on tacts ov er 10 d iff ere n tpe o p l e in the past 10 m in utes , aquer yo fCC o fh i spre vio us ly c on tact o rs i str i ggered .T he R T ser i es c on ta in s 1 42 , 848 quer i es a n d the subset s i ze v ar i es fr o m 10 t o 600.

In the FSSD ser i es e x per i me n ts ,w ema inly dem on strate h ow fa l se p o s i t iv e infl ue n ces the perf o rma n ce o f ANI. All the quer i es in the FSSD ser i es ha v e v er y sma ll CC (10  X  4 t o10  X  5 ) because o ft wo reas on s : first , the s i ze o f the subset i s v er yl arge ; a n dsec on d , the e l eme n ts are a ll ra n d o m ly se l ected am on ga ll no des that ha v e a certa in degree .So the ma in fact o rthatd iff ere n t i ates the perf o rma n ce o f ANI in d iff ere n tquer i es i s the pr o bab ili t yo ffa l se p o s i t iv es .Sin ce w eusea b y the s i ze o fthe Bloo mfi l ter , s ow ech oo se t wo d iff ere n ts i zes o f Bloo mfi l ter t o bu il dthe ANF: 3 2 -b i ta n d 6 4 -b i t .Wi th the 3 2 -b i t Bloo mfi l ter ,no des wi th degree no m o re tha n 4ca n ha v eafa l se p o s i t iv epr o bab ili t y be low 0.05, a n d wi th the 6 4 -b i t Bloo mfi l ter ,no des wi th degree no m o re tha n 8ca n ha v eafa l se p o s i t iv epr o bab ili t y be low 0.05. Fi g . 2sh ow s that the 6 4 -b i t Bloo mfi l ter has better perf o rma n ce tha n the 3 2 -b i t Bloo mfi l ter , a n dtheperf o rma n ce decreases as the a v erage degree in creases , as pred i cted b yo ur a n a ly s i s .W he n the a v erage degree i s l ess tha n5,ov er 90% o ft i me ca n be sa v ed b y us in g ANI o fb o th s i zes . W he n the degree i s l arger tha n5, the perf o rma n ce o fthe 3 2 -b i t Bloo mfi l ter decreases sharp ly. B ut the 6 4 -b i t Bloo mfi l ter ca n sa v e7 0% t o 99% quer y t i me in a ll o fthequer i es .

Fi g . 2a l s o p lo ts the upper b o u n d o fCCretur n ed w he nloo k in gup ANI, w h i ch a no pp o s i te tre n dtha n the upper b o u n dfact o r . C o mpar in g CC upper bound 64 , CC upper bound 32 , a n dCC ,w eca n see that the space bet w ee n the upper b o u n d a n drea lv a l ue great ly in creases as the degree in creases .Soino rder t o get a n effic i e n t ANI, w e n eed t o carefu lly ch oo se the s i ze o fthe Bloo mfi l ter . Our sug -gest ion i s that the s i ze be b i ge no ugh t o e n sure that at l east 90% o f no des  X  ANF ha v eafa l se p o s i t iv epr o bab ili t yl ess tha n5%, thus the a v erage fa l se p o s i t iv e pr o bab ili t yo fCCca n be c on tr oll ed u n der 90%  X  5% + 10%  X  1 = 15%.

T he e x per i me n ts on the R T ser i es ma inly sh ow the e ff ect iv e n ess o f ANI in rea l app li cat ion s .Fi rst ,w ea n a ly ze h ow much the wo rk lo ad ca n be reduced b y ANI us in ga 6 4 -b i t Bloo mfi l ter .InFi g .3,1 42 , 848 quer i es are gr o uped a n d o rdered acc o rd in gt o the i rCC on the x -a xi s ; three cur v es represe n ttheperce n tage o f rem ov ed edges , perce n tage o frem ov ed s o urces , a n dcumu l at iv ed i str i but ion o f quer yn umbers .Fo rthequer i es that ha v ethesameCC ,w ep lo tthe i ra v erage v a l ue on the y -a xi s .W eca n see that in ab o ut 4 0% CC quer i es ,w eca n rem ov e ov er 4 0% s o urce no des that d on X  tc onn ect t o a ny o ther no de in the g iv e n subset . An dt o ta lly in ab o ut 8 0% quer i es , 8 0% edges ca n be fi l tered o ut b y ANI.
C o mpar in gCCa n d CC upper bound in Fi g . 4 ,w eca n see that m o st fa l se p o s -i s8 . 77 %.T he sa v ed t i me a l s o sh ow sthesametre n das w esee in the FSSD e x per i me n ts :i tg o es in the o pp o s i te d i rect ion o f CC upper bound .By us in ga n e i ghb o r in de xwi th a 6 4 -b i t Bloo mfi l ter ,w eca n sa v e 6 7 . 2 5% t i me on a v erage . In s o me rare case , the fa l se p o s i t iv epr o bab ili t yi s n ear ly 0.5. T he reas on i sthat there are ma ny super no des ( ha vin g v er y h i gh degree )in the subset , s o the fa l se p o s i t iv es o f such quer i es are much h i gher tha n the a v erage l e v e l. In s o me o ther W eca ll such cases  X  t i me -o ut  X  cases .T he ov erhead o f loo k in gupthe in de xi sa reas on but no tthema in reas on, because the n e i ghb o r in de xi ssma ll e no ugh t o be lo aded in t o ma in mem o r y a n d loo k in gupthe in de x c o sts no m o re tha n se v era l m illi sec on ds ,w h i ch i sa v er y sma ll part o fthe w h ol equer y t i me .An d in each repeated ru n, w eha v eab o ut 1%  X  t i me -o ut  X  cases , but non e o fthemarethe same . O n ep o ss i b l ee x p l a n at ion i s that the u n usua ll ate n c yi scausedb y ra n d o m fact o rs in the s y stem ,li ke a bu ff er fl ush j ust happe n ed .

Fin a lly, w emeasurethet i me t o bu il dthe in de x. T he a v erage t i me t o bu il d a nin de x f o r the dataset in the ab ov etests i s48 .1 s .T he t i me i sma inly spe n t on read in gdatafr o m the database , s oi t will be lin ear ly in creased wi th the s i ze o f the data set .An d in pract i ca l app li cat ion s , rebu il d in gthe in de x da ily o r w eek ly i se no ugh f o ras o c i a ln et wo rk . In th i spaper ,w eprese n ta Bloo m -fi l ter based in de x  X  X NI X  bu il tup on are l a -t ion a l database t oi mpr ov etheperf o rma n ce o f the subset CC quer yon e x treme -sca l es o c i a ln et wo rks .W eca n get 2 -10 t i mes speedup w h il ee n sur in g the accurac y a n d 100+ t i mes speedup i f a certa in fa l se p o s i t iv e i s acceptab l e .W ea l s o prese n t crete s o c i a ln et wo rk .Al th o ugh the des i g no f ANI i str i ggered b y the CC quer y, i tc o u l d further be used in ma ny o ther graph quer i es li ke sub -graph match in g a n dreachab ili t y quer i es .

