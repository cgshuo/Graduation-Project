 N u mero u s advancements have been seen in the area of medical ima g e retrieval since the past few years. C u rrent medical ima g e retrieval techniq u es can be classified ac-cordin g to the type and nat u re of the feat u res u sed for indexin g . They are text-based, content-based and semantic-based approaches. The P ACS system is widely u sed in medical instit u tions where it is dedicated to the stora g e, retrieval, distrib u tion and presentation of medical ima g es. Ima g es in P ACS are annotated man u ally by medical officers and indexed by text keywords, hence limitin g its feat u res to text u al descrip-tions only, besides u nable to s u fficiently describe the vis u al feat u res of the ima g es. In TBIR, information is either extracted from a DICOM ima g e header or annotated man u ally by an expert and stored in a traditional relational or object-relational data-base. This type of retrieval has very limited ability to represent all the possible de-scriptions of anatomical information, complex ima g e contents, and it is also u nable to capt u re the vis u al content s u ch as colo u r, text u re or shape. The method is considered  X  X raditional  X  and limited, th u s the research foc u s in medical ima g e retrieval has shifted to the content-based approach. 
Dia g nostic radiolo g y req u ires acc u rate interpretation of complex si g nals in medical ima g es. CBIR techniq u es co u ld be val u able to radiolo g ists in assessin g medical im-s u pport. Many advances have occ u rred in CBIR, and a variety of systems have ap-peared in the medical domains. Altho ug h CBIR has freq u ently been proposed for u se in medical ima g e mana g ement, only a few CBMIR systems have been developed and u sin g vario u s ima g e types with different project g oals. The most pop u lar CBMIR systems fo u nd in the literat u re are ASSERT (HRCT of the l u n g ), FICBOS (f u nctional P ET), CBIR2 (spine X-Ray), MIMS (CT of the head), A P KS (mammo g raphics of breasts), IRMA (varied ima g es), medGIFT (varied ima g es), S P IRS (spine X-Ray), Cervi g ramFinder (cervico g raphic ima g es for cervix cancer), ILife (MRI brain), MIRS (spine X-Ray) and S P IRS-IRMA (spine X-Ray). Some of the systems were reviewed intensively in these literat u res [1,2,3,4,5]. 
Each desi g ned system will address the ima g in g modality u sed in their dataset. The modality defines the type of information that can be extracted from medical ima g es. This limits u sable ima g e representation and feat u res. Conseq u ently, the modality tar g eted by a medical CBIR system is important. Only few medical CBIR systems s u pport m u ltimodality [6,7] and tested with more than one datasets [8,9]. Several systems were tar g eted to retrieve different body parts from the same modality, par-tic u larly radio g raphs of vario u s body parts from Ima g eCLEF[10,11,12] and IRMA [13], as well as u ltraso u nd of liver, kidney and pelvis [14]. The remainin g systems were desi g n to retrieve specific modality and body part. It is important to note that, if the CBIR techniq u es are foc u sed on the analysis of certain patholo g y, hi g h level fea-t u res can be achieved for processin g certain types of ima g es. It is also very interestin g to note that, to the best of o u r knowled g e, no work has been done in CBMIR for the retrieval of chest radio g raphs, specifically to retrieve the similar l u n g diseases. 
Ima g e descriptors or feat u res are one of the main components in a CBIR system, which represents the vis u al information contained in ima g e pixels. They are derived from vis u al c u es of an ima g e and their representations are desi g ned to encode colo u r and text u re properties of the ima g e, the spatial layo u t of objects and vario u s g eomet-ric shape characteristics of percept u ally coherent str u ct u res within the ima g e. The colo u r and text u re c u es are derived directly from raw pixel intensities, while the shape c u es are ded u ced directly from the ima g e, s u ch as point sets, conto u rs or c u rves, s u r-obtained by binnin g pixel colo u r components into a histo g ram, or by dividin g the ima g e into s u b-blocks, and comp u te the avera g e colo u r component vector of each block. However, since most of the medical ima g es are in g rey scale, the characteriza-tion is only applicable in intensity scales s u ch as g rey level histo g ram and g rey level co-occ u rrence matrix [9], [14,15,16]. 
In medical domain, text u re-based descriptors have become very important beca u se they may potentially reveal the fine details contained within an ima g e str u ct u re. Cysts and solid nod u les for instance, normally have u niform characteristics of internal and si g nal density, while more complex lesions and infiltrative diseases have hetero g ene-o u s characteristics. Text u re feat u res encode the spatial or g anization of pixel val u es of ima g e re g ion. Generally, it is obtained by invokin g the standard transform domain analysis tools s u ch as Fo u rier transforms, wavelets or Gabor filters [8], [13,14], [16] on local ima g e blocks. Some text u re feat u res may be u nperceivable by h u mans, and comp u ters may be able to extract important text u re and pattern information that is not readily visible. 
P revio u s works on the l u n g analyses prove that the best feat u re extraction tech-niq u es in analysin g l u n g diseases specifically the infections in chest X-Ray (CXR) are text u re and intensity-based feat u res. In [17], van Ginneken et al. u sed the s u bdivision of the l u n g fields and applied a m u ltiscale filter bank to extract text u re feat u res based on Ga u ssian derivatives for detection of t u berc u losis cases and other abnormalities of a diff u se text u ral nat u re in CXR. Other work in [18] u sed an intensity histo g ram si g na-t u res characterisin g the intensities for detection of p u lmonary infections and in [19], they u sed the Grey Level Histo g rams to g ether with Gabor text u re feat u res for detec-tion of consolidations. For detection of pne u monia cases in [20], a few of wavelets feat u res were u sed, namely the Discrete Wavelet Transform (DWT), Wavelet Frame Transform (WFT) and Wavelet P acket Transform (W P T). 
In this paper, we present a CBMIR system to retrieve the infections and fl u ids cases from chest radio g raphs. Both intensity and text u re feat u res are tested and the retrieval acc u racies are compared and disc u ssed in order to find the best techniq u e to be u sed in f u rther application. The feat u res are based on Gabor Transform, Discrete Wavelet Frame and Grey Level Histo g ram. This system is aimed to assist the radiolo-g ists in healthcare by providin g pertinent s u pportin g evidence from previo u s cases. It medical st u dents. 
This paper is or g anized as follows. The next section briefly describes the method-olo g y of the system, incl u din g the review of medical ima g es, feat u re extraction tech-niq u es and the retrieval proced u re u sed in the experiment. The res u lts will be pre-sented and disc u ssed in Section 3, followed by the concl u sions and f u t u re work in Section 4. 2.1 Medical Images Medical ima g es in o u r collection consist of chest radio g raphs from both p u blic and private datasets. The p u blic dataset is provided by Japanese Society of Thoracic Radi-olo g y (JSRT) and the private dataset is obtained from collaboratin g hospital, Serdan g Hospital (SH), Malaysia. The JSRT dataset comprises of 247 standard posterior-anterior ( P A) chest radio g raphs with no infection or fl u id case, and the SH dataset contains both P A and anterior-posterior (A P ) radio g raphs, with a total of 125 ima g es: 18 with infection, 17 with fl u id cases, and the rest are normal. The ima g e format is DICOM with varyin g resol u tions. For the abnormal cases, 32 infection re g ions are man u ally extracted from the 18 ima g es, and 24 fl u id re g ions from the 17 ima g es. Some examples of the ima g es for both infection and fl u id cases are shown in Fi g . 1. 2.2 Feature Extraction Techniques The feat u re extraction techniq u es that have been u sed in the system are text u re and intensity based feat u res. The first techniq u e u sed is a two-dimensional Gabor trans-form proposed by Manj u nath and Ma [21],which extracts text u re information from an ima g e. Based on o u r observation d u rin g experimental work, the total n u mber of scales, S=4 and total n u mber of orientations, K=6 are fo u nd to be the best parameters. There are SxK o u tp u t ima g es prod u ced by the Gabor transform, res u ltin g in a total of 24-dimensional feat u res for each radio g raph. 
In addition, Discrete Wavelet Frame (DWF) is applied to prod u ce fo u r wavelet co-wavelet decomposition [22]. It is called an over complete decomposition beca u se the filtered ima g es are not s u b-sampled. The coefficient ima g es prod u ced are from these channels: low-low (LL), low-hi g h (LH), hi g h-low (HL), and hi g h-hi g h (HH). For the next decompositions, it is done on the LL channels j u st as normal wavelet transform. In this paper, we u se a three level decomposition with the Da u bechies 4-tap wavelet basis, res u ltin g in 10-dimensional feat u re vector. 
The last techniq u e is the basic intensity-based Grey Level Histo g ram (GLH), where the intensity of g rey level colo u r map is described by a set of bins. Each bin represents We tested with no of bin, n=64 and 128, yieldin g 64 and 128 feat u res respectively. 
As a comparison, we also tested the retrieval with combinations of these feat u res, to see if the combined feat u res will g ive better res u lts and if it is si g nificant or not. 2.3 Retrieval Procedure The retrieval system comprises of 2 sta g es: offline feat u re extraction sta g e and online retrieval sta g e. The methodolo g y of the proposed retrieval system is ill u strated in Fi g . 2. The feat u res of the ima g es are extracted u sin g the three feat u re extraction techniq u es vectors (FVs), as previo u sly described in Section 2.2. The FVs are stored in the FV database, separated for each techniq u e. Thro ug ho u t the online retrieval sta g e, the fea-t u res of the q u ery re g ion are comp u ted u sin g one of the techniq u es and compared to all FVs in the FV database of the selected techniq u e. The similarity index between the FVs of the database ima g e is comp u ted u sin g several distance metrics. Small distance indicates that the res u ltant ima g e is similar to the q u ery ima g e and vice versa. 
The distance metrics u sed in this work are E u clidean, Manhattan, the normalized of both and Mahalanobis. Several metrics are tested in order to g et the most s u itable metric for each of the feat u re extraction techniq u es. The eq u ations of all distance metrics are described in o u r previo u s work in [23]. To q u antitatively eval u ate the performance of the feat u re extraction techniq u es, each of the 32 and 24 cases for in-ima g es from the same case to the q u ery ima g es indicates the acc u racy of the feat u re extraction techniq u es. The g ro u nd tr u ths of the relevant cases were prepared with the help of radiolo g ists from Serdan g Hospital. The retrieved ima g es are then a u tomati-cally compared u sin g a simple al g orithm to check if they are relevant or not. The retrieval acc u racies for the techniq u es in the proposed system are eval u ated u sin g a meas u re called reco g nition rate, which is defined in eq u ation (1). The reco g nition rate is well known as recall rate (and normally u sed with precision rate), b u t when u sed alone, it is s u itable to meas u re the pro g ress of the retrieval rate a g ainst the n u m-ber of retrieved ima g es. Table 1 s u mmarises the reco g nition rates for all tested tech-Since the n u mber of infection cases is 32 and fl u id cases is 24, we initially analyse them as the top 35 and 25 retrieved ima g es respectively, then followed by the top 50 for both. As the n u mber of retrieved ima g es increased, the reco g nition rates will also increase to indicate that more relevant ima g es are fo u nd. For the infection cases, amon g all the techniq u es tested, the intensity-based techniq u e g ives the hi g hest retrieval acc u racy, where the rates are almost identical to the two decimal points for both GLH64 and GLH128 of all distance metrics, except Maha-lanobis metric. The hi g hest rate is g iven by E u clidean metric with 0.761 for top 35 of both intensity techniq u es, and 0.957 and 0.961 for top 50 of GLH64 and GLH128. This is followed by text u re-based techniq u e of DWF, with the retrieval acc u racies of 0.693 and 0.888 for both top 35 and 50, u sin g Normalized Manhattan distance metric. The lowest amon g the tested techniq u es is u sin g Gabor transform, where the top 35 and 50 g ive only 0.297 and 0.319 reco g nition rates. 
For the fl u id cases, similar res u lts to the infection cases were obtained, where the hi g hest acc u racies are from the GLH techniq u e, followed by DWF and lastly Gabor. However, there are differences in the res u lts for GLH64 and GLH128 which are q u ite si g nificant, where the top 25 retrieved ima g es g ives an acc u racy of 0.554 for GLH64, and 0.602 for GLH128, both obtained by Mahalanobis distance metric. For the top 50 res u lts, GLH128 prod u ced the hi g hest rate with 0.986, then DWF (0.957), GLH64 (0.932) and Gabor (0.328). Different distance metrics were observed in providin g g ood res u lts for the fl u id cases, especially the GLH techniq u e. By takin g the majority performance, we can see that the Gabor transform works best with E u clidean and DWF with Normalized Manhattan for both infection and fl u id cases. The GLH how-ever performs excellently with E u clidean for infection cases, and Mahalanobis for fl u id cases. Based on these res u lts, next we will disc u ss the performances of com-bined techniq u es, which are presented in Table 2. 
From Table 2, it is observed that g enerally techniq u es that are f u sed with intensity feat u res g ive better reco g nition rate compared to combination of text u re feat u res alone. For the case of infection, the best acc u racies are achieved with combination of DWF and GLH128 for both top 35 and 50 retrieved ima g es with the rates of 0.739 and 0.927. These are followed by similar res u lts obtained by Gabor, DWF and GLH64 or GLH128: 0.665 and 0.900 respectively for top 35 and 50. The lowest rates are g iven by Gabor and DWF, with acc u racies of only 0.542 and 0.662.For the tech-niq u es that are f u sed with intensity feat u res, Normalized E u clidean offers the best rates, whilst for text u re feat u res, it is Normalized Manhattan, ca u sed by the bias of DWF alone. 
The fl u id cases g ive sli g htly different res u lts, where the combination of all text u re and intensity feat u res prod u ce the best rates, similar effect either with GLH64 or GLH128 for the top 25 and 50 retrieved ima g es. These were obtained by u sin g Nor-malized Manhattan distance metric, with ro u nded meas u re of 0.61 and 0.99. The next combined techniq u es that g ive hi g her res u lts are depends on the n u mber of retrieved ima g es. For the top 25, it is g iven by Gabor and DWF (0.580 u sin g Normalized Man-hattan) and then DWF and GLH128 (0.564 u sin g Mahalanobis). Whereas the top 50 res u lts show the opposite performance; second hi g hest is DWF and GLH128 (0.972 with Manhattan metric) and then Gabor with DWF (0.842 by Normalized Manhattan metric). From the overall res u lts, we can see that any techniq u e f u sed with Gabor will not perform well u sin g Mahalanobis distance, and combinations of all three tech-niq u es achieve hi g h reco g nition rates with Normalized E u clidean for infection cases and Normalized Manhattan for fl u id cases. For DWF and GLH128, the most s u itable metric to retrieve infection cases is Normalized E u clidean. Since the difference of rates g iven by Mahalanobis and Manhattan is very minimal for the top 50 of fl u id cases, we concl u de that Mahalanobis is better in retrievin g fl u id cases for this com-bined techniq u e. g raphical u ser interface (GUI) for the proposed CBMIR system, as shown in Fi g . 3. The left panel contains the q u ery information: q u ery ima g e name, selected distance with u ser-selected re g ion shown in the ima g e. The middle panel shows the retrieved res u lts, with 20 ima g es per pa g e. When the u ser selected one of the ima g e  X  s res u lt, the details of that partic u lar ima g e will be shown in the ri g ht panel, consists of the ima g e itself with the similar re g ion hi g hli g hted, the FV list, and the similarity meas u re u sin g the selected distance metric. In this paper, we presented a content-based medical ima g e retrieval (CBMIR) system feat u re extraction techniq u es and distance metrics have been tested to g et the best retrieval acc u racies. We also experimented with a few combinations of those tech-niq u es to see if hi g her rates can be achieved. For the infection cases, the best method to describe the feat u res is the GLH128, with E u clidean as the best distance metric for the retrieval. The reco g nition rates are 0.761 and 0.961 respectively for top 35 and 50 retrieved ima g es. As for the fl u id cases, the hi g hest acc u racy was achieved by f u sin g the Gabor, DWF and GLH64 techniq u es with Normalized Manhattan as the most s u itable distance metric. The meas u res for both top 25 and top 50 ima g es were 0.606 and 0.993 correspondin g ly. 
Based on these res u lts, it can be concl u ded that fl u id cases are harder to be de-scribed by the text u re and intensity techniq u es alone or even after combinin g them. This is d u e to the fact that both cases represent similar vis u al appearance. The motiva-tion of this research is to retrieve the infections and fl u ids cases, however for normal cases, the proposed system will retrieve vis u ally similar ima g es or re g ions to the one define and distin gu ish them amon g the normal feat u res. Other possible enhancement can be done by selectin g the feat u res amon g the feat u re vectors for each feat u re ex-traction techniq u e. Acknowledgment. The a u thors wo u ld like to thank Dr. Fadzilah Hashim, Radiolo-g ists in Dia g nostic Ima g in g Department, Serdan g Hospital, Malaysia, for providin g the chest radio g raphs dataset and medical advice. This research is s u pported in part by an FRGS/1/2012/TK06/UKM/03/2 by Kementerian P en g ajian Tin gg i Malaysia and a GG P M-2013-012. 
