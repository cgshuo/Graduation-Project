 Clickthrough rate provides a fundamental measure of ad-vertising quality, which is widely used in ad selection strate-gies. However, ads placed in contexts where they are rarely viewed, or where users are unlikely to be interested in com-mercial results, may receive few clicks regardless of their quality. In this paper, we gain insight into user browsing and click behavior for the purpose of click analysis in sponsored search domain. The list of ads displayed on a page, the user X  X  initial motivation to browse this list, and the persistence of the user are among the contextual factors considered in this paper. We propose a probabilistic model for user X  X  brows-ing and click behavior using these contextual factors. To evaluate the performance of the model, we compare it with state-of-the-art methods. The experimental results confirm that these contextual factors can better reflect user browsing and click behavior in sponsored search.
 H.3.5 [ Information Storage and Retrieval ]: On-line In-formation Services Click model, Bayesian inference, query log, sponsored search Under the examination model [13, 15] of the user behavior, it is assumed that the chance of a click decreases towards the lower ranks on result pages, reflecting the user X  X  position bias with respect to the displayed ranked results. A more recently developed click model, referred to as the cascade model [4] of user behavior, assumes that the user scans search results from top to bottom and eventually stops because either their information need is satisfied or their patience is exhausted. The benefit of the cascade model over the position model is its ability to explain clicks with respect to the relevance of documents appearing higher in the result list. However, the cascade model makes the strong assumption that there is only one click per search; hence, it cannot explain abandoned searches or searches with multiple clicks. Moreover, none of these models distinguish between the perceived relevance and the post-click relevance of the result links. The perceived relevance [2] is the relevance of a document judged by the user based on their examination of the document as it is summarized on a result page. The post-click relevance is the relevance of the document judged by the user once she/he clicks on it and sees its content.

Most of the existing efforts in user click behavior model-ing fall into the domain of organic search, i.e. dealing with the regular (non-sponsored) links that are displayed as the main results of a user X  X  query. The sponsored links (a.k.a. advertisements or ads) represent a major source of revenue for commercial search engines. Due to the differences (e.g. user X  X  negative bias and the click sparsity) that exist between these two types of links, the current user browsing/click models for the organic search may not be fully applicable to sponsored search.

The main goal of this paper is to gain insight into user browsing and click behavior in sponsored search. We con-sider each ad in the context of the ads appearing with it on a result page, as opposed to the case where ads are only con-sidered individually. The rate at which an ad is viewed and clicked is assumed to depend both on its own quality and on the quality of the other ads that are displayed above it on the result page. Query biases are introduced into the pro-posed probabilistic model in order to account for the initial motivation of the users to browse ads and for their persis-tence (patience) to continue browsing these links. A group of standard evaluation metrics has been used in order to eval-uate the performance of the proposed model and compare it with state-of-the-art performance. The evaluation results indicate that significant improvements can be achieved in modeling the click behavior once the overall quality of ads shown on a result page is taken into consideration, along with the two query biases. Most of the existing click studies in sponsored search adopt the common assumption of a trust bias [13] with respect to displayed results, which is the basis of the examination model [15]. The main factors deriving an ad X  X  clickthrough under the examination model are the relevance of each in-dividual ad to the user X  X  need and the rank position of the ad on the page. A more intuitive approach considers the influence of the co-appearance of ads with each other. This concept is introduced by Ghosh and Mahdian [8] as the ex-ternality effects of ads in advertising, and it is based on the assumption that users visually scan the ad list from top to bottom. In contrast to the examination model, the probabil-ity of clicking on an ad is considered to be dependent on the other ads shown above it on the page. The model proposed in this paper is based on this linear browsing behavior of users over the ad results that considers the externality effect of the ads. It can be also explained by the cascade model of user behavior [4]; i.e. an ad is examined only if the user scans over all the previously displayed ads.

Given a query q , the probability of examining document d displayed at rank i is denoted by P ( E i = 1). According to the cascade model of user behavior [4], this probability is assumed to be dependent on the quality of the documents shown prior to it on the page. The cascade model makes the following assumptions about a user X  X  click and browsing behavior: i) the user performs a linear scan of the result list starting from the top, ii) there is at most one click per search; hence, the model cannot explain multiple clicks, and iii) if the user does not click on a viewed link, they continue examining links, i.e., the user is infinitely persistent: where C i presents the click event (0 or 1) over the document displayed at rank position i . The factor  X  q d document X  X  attractiveness and relevance with respect to the query as perceived by the user (referred to as the perceived relevance [2]).

There are other biases and factors addressed by various re-search work. The user browsing model (UBM) [6] is among the click models that do not employ the cascade assumption. It extends the examination hypothesis by considering the de-pendency on the positional distance to the previous click in the query session. The task-centric click model (TCM) [16] considers the sequences of queries and clicks in a session as a task and characterizes user behavior related to a task as a collective whole. It formalizes user X  X  behavior with respect to two biases; one is query reformulation and the other is the user X  X  interest towards the fresh documents in a session. Hu et al. [10] study the impact of query intent diversity on the existing click models. They argue that user click can not be explained only by the relevance and position of the document, but also by the diversity of the user X  X  queries. The whole page click model [3] differs from the previous ap-proaches as the authors explore the whole search result page including all the click blocks (e.g. organic results, sponsored results, etc) on the page as an integrated entity. Zhu et al. [17] define a group of user and URL specific attributes, such as query, browser type, local hour, and the position to model the relevance and examination transition effects as random variables. Click chain model (CCM), proposed by Guo et al. [9], defines transition probability from document i to i + 1 in the cascade model through three global param-eters. These parameters are fixed and independent of users and URLs. Dynamic Bayesian Network (DBN) model, pro-posed by Chapelle et al. [2], defines a persistence factor that is assumed to be fixed and shared across query sessions.
According to DBN, a user starts from the first document and keeps on examining d i +1 , given they already examined d in two cases: i) either they do not click on d i and skip it with a probability of  X  , or ii) they click on d it un-satisfying (non-relevant), so they move on to the next document with a probability of  X   X  (1  X   X  q d post-click relevance known as the ratio between the actual relevance and the perceived relevance (  X  q d Here, S i is a binary variable indicating whether the user was satisfied with d i after they clicked on it.  X  represents the persistence of the user in browsing, and it is shared among the query sessions.

Our work aims at using differences found between user X  X  behavior in dealing with sponsored links and organic links to better model click behavior in sponsored search. One of these differences is derived by the user X  X  bias against spon-sored search [12]. Hence, we study the impact of variability in user X  X  persistence in sponsored search domain. Following related work in click and browsing modeling in Web search, this paper introduces query biases to better reflect the be-havior of users of sponsored search within this context. A user with commercial intent [1] may have a greater initial motivation to consider ad list. On the other hand, if there is no commercial intent involved, the user may not be inter-ested in continuing browsing the ads. These have motivated us to introduce two types of query bias as factors involved in browsing behavior, in order to account for the intention of the user to examine a list of ads: their initial motivation to browse sponsored links, and their persistence (patience) in continuing to browse through the sponsored links. The set of ads displayed on a search result page is modeled through a dynamic Bayesian network. There is an extended version of DBN [2] dedicated to each page in order to model users X  browsing and click behavior in presence of the query biases. This model is referred to as DBN with varying persistence and initial motivation (DBN+VPI) throughout the paper.
Let N be the number of displayed ads displayed on a re-sult page (also called an impression ). It is assumed the rank of ads are assigned in a way that the ads displayed on the top (if any) are ranked higher than the ones displayed at the side [11]. For a given impression with a total of N ads dis-played for the query q , the following variables are defined to model various characteristics of the user (in fact the query) and the displayed ads: We note that U and E i are properties of the query (thus properties of the user who issues the query), which means they are shared across the impressions with the same query. The sequence of click observations obtained from the page with respect to its ads represent the C i values. Finally, A and S i are considered to be the properties of the ads with respect to the query for which they are displayed, so they are defined over the ad-query pairs. The triggering point to start examining results should mat-ter more for the sponsored results as opposed to the organic results. The reason goes back to the user X  X  bias against spon-sored links, as compared to organic links [12], where users appear to have a higher tendency towards the organic links than to the sponsored links. It is assumed that if a user ini-tially has any motivation to consider ads on the page then they start examining ads. In other words, E i = 1, if and only if the user has any intention to consider ads placed on the page: Therefore, parameter u q is defined at the query-level, where q represents the query. u q is defined as the probability of the user being motivated to consider the ads listed on the page, i.e. P ( U = 1) = u q . Using this definition and Equation 3, given query q , the probability of examining the first ad can be calculated as follows: Once a user starts browsing the ads listed on a page, their persistence in continuing to browse through the list can be addressed using a variation of the cascade model, as ex-plained next. Newer generations of the cascade model [2, 9, 17] share a no-tion of the user X  X  patience and persistence (  X  ) as they move from document to document. This transition probability is assumed to depend on the relevance of the ad that is ex-amined and on the patience of the user. In order to study the relationship between user persistence and their query, this paper accounts for the variability of parameter  X  with respect to the query. We hypothesize that different users have different levels of patience in browsing through an ad list. As a result, the persistence factor for the DBN model in Equation 2 can be revised to  X  q in order to take into account the user X  X  query ( q ).
 Given query q , if the user exhibits initial motivation (see Eq. 4), they start browsing the list of ads. If the user exam-ines ad a displayed at the rank position i , two scenarios are likely; click or no click:
If they do not click on the ad (i.e. C i = 0), they either move on to the next ad with a chance of  X  q , or they abandon their search with a chance of 1  X   X  q : On the other hand, the user may find the ad attractive (i.e. A i = 1) with a probability of  X  q a and click on it (i.e. C Three scenarios are likely upon the click: 1. With a chance of  X  q a , the user may be satisfied by the 2. With a chance of  X  q (1  X   X  q a ) they may move on to the 3. With a chance of (1  X   X  q )(1  X   X  q a ) they may abandon Here,  X  q a is the post-click relevance parameter, and  X  q attractiveness parameter to reflect the perceived relevance of the user from ad a with respect to the query q . The perceived relevance may depend on the presentation quality of the ad, such as the ad X  X  header or its creative, and of course on the user X  X  understanding of the relevance of the ad to the query once they examine it. The click probability at rank i given the examination can therefore be formulated as: Clearly, when there is no examination, there is not going to be any click according to the cascade assumption.

The inference algorithm finds the maximum likelihood es-timates for the parameters set  X  = ( u q , X  q , X  q a sponding to the hidden variables of the model. There is no known way to analytically solve for the model which maximizes the probability of a click observation sequence C . However, Pr ( C |  X  ) can be locally maximized using the stan-dard Baum-Welch iterative approach for expectation maxi-mization [5]. Each iteration consists of the estimation of the posterior distribution of the hidden variables (E-step) using the forward-backward algorithm [14] followed by updating the value of each parameter (M-step) through maximizing the expected complete-data log-likelihood function [7]. Our experimental study is based on sponsored search data from Microsoft adCenter sampled over a few months in 2007. For evaluation purposes, we selected a set of 8M search im-pressions (i.e., result pages) over three consecutive weeks. These impressions correspond to a sample of about 105K queries, all of which were required to have at least one ad click recorded in the history of their appearance in the log. For each query, we sort its impressions according to their time stamp and split them into training and test sets at a ratio of 2:1. We make one pass over each query X  X  impres-sions set and learn the parameters values using expectation maximization and based on the click signals recorded for im-pressions in the first 2 3 of the set. We then test over the last of the impressions set.

The cascade model [4] is selected as the baseline of our analysis. Under this model, the user is assumed to be in-finitely persistent, continuing their examination unless they make a click (see Eq. 1). In addition, the dynamic Bayesian network (DBN) model [2] has been selected as it is one of the state-of-the art click models in which both the perceived relevance and the post-click relevance and also the user X  X  per-sistence in transition are modeled. However, the persistence factor is assumed to be constant across all sessions in DBN (see Eq. 2). DBN is also the basis of our proposed model that reflects the ad X  X  externality effect and the user X  X  initial motivation and persistence in transition.

None of these click models require extra information about the client side, ad content, or bid terms, which enables us to reproduce them on our log data. For each click model, we evaluate the performance of the model in the presence of the biases that were introduced in this work. The rea-son is to study whether any of these models and settings are able to better reflect users X  click behavior on advertising links. These settings are categorized and labeled in order to be referenced easily throughout the experiments. Their description can be found in Table 1. The formulation and inference of all the extended models are similar to those of DBN+VPI that were explained in the previous section.
As the persistence factor (  X  ) is fixed in the original DBN model (see Eq. 2), we train DBN using various values of this parameter. Thus, under four settings of DBN in Table 1, four values for  X  are provided, each resulting in a separate run for DBN. Among these, the run with  X  = 0 . 9 represents the original DBN model with a relatively patient user while the rest, particularly the one with  X  = 10  X  3 , represent a relatively impatient user. We end up with a total of 9 differ-ent runs for evaluation purposes. Table 2 depicts these runs across different settings that are numbered from 1 to 9.
We evaluate the performance of the models within dif-ferent settings based on two standard metrics: average log-likelihood and perplexity . For each model, the average log-likelihood (LL) is calculated with respect to the predicted click probability for each ad and the actual click signals ob-served in the log. A larger value of LL indicates a better model fit, where the ideal value is zero. The average log-likelihood for the runs are plotted in Figure 1, where the run ids match those shown in Table 2 . Each group of mod-els are presented in a different pattern. It can be seen that the overall performance of the DBN runs is relatively bet-ter than the cascade models, as expected. The inclusion of the user X  X  persistence reports improvements over the origi-nal models, specially for the cascade model. As for the DBN model, the inclusion of persistence factor (i.e. DBN+VP in run 8) shows improvement over the original DBN (i.e. DBN with  X  = 0 . 9 in run 4) and over DBN with  X  = 0 . 5 in run 5. However, DBN+VP shows slight improvement over the two settings of DBN with impatient users (i.e. DBN with  X  = 0 . 1 in run 6 and DBN with  X  = 0 . 001 in run 7). This is due to the fact that the inclusion of the persistence fac-tor is intended to reflect the lower persistence of the users in browsing through the advertising links which is obviously the same as assuming the user to be impatient. Thus, runs 6,7, and 8 are relatively comparable. On the other hand, the inclusion of both user X  X  initial motivation and persistence in examination (i.e. VPI runs) improves the performance of all the original models under various settings. Runs 3 and 9 substantially outperforms their peers in cascade group and DBN group respectively, suggesting that modeling user X  X  ini-tial motivation and persistence in browsing ads better re-flects their browsing and click behavior in sponsored search. To further study the impact of the introduced query biases, the perplexity measure is used as the log-likelihood powers computed independently at each rank position [16]. A lower value of perplexity indicates a better fit between the model and the actual data. The plots in Figure 2 depict these re-sults for each setting of biases separately. Paired t-tests were carried out between the probability values obtained for the ads in each pair of runs at a significant level of 95%, which all resulted in p-values under 0 . 001, indicating the significance of the differences in the results.

In Figure 2a, the impact of the inclusion of persistence factor is evaluated against the original cascade and DBN models. As it can be seen, for both groups of models, the inclusion of this factor results in a better performance than the corresponding original models at almost all ranks. The exception is the first rank which is compensated by taking into account the initial motivation of the user in the models as depicted in Figure 2b. In this plot, the superior perfor-mance of DBN+VPI and CAS+VPI is confirmed over the original DBN model and cascade model respectively. This paper studies the impact of a group of contextual fac-tors on modeling user behavior in sponsored search. These factors include the user X  X  initial motivation to browse adver-tising links on the page and their persistence in continuing to browse these links, which are modeled as query biases. A probabilistic model for click analysis is proposed that incor-porates these contextual factors and learns its parameters from click signals recorded in the logs.

The performance of a group of existing click models has been evaluated and compared with respect to these biases. The evaluation results indicate that significant improvements can be achieved in click analysis once the overall quality of ads shown on a result page, along with the query biases, are taken into account. Further investigation in this direction over other well-known click models are among the future directions for this work. The authors would like to thank Microsoft Research and Microsoft adCenter for providing the Beyond Search data. [1] A. Ashkan and C. Clarke. Characterizing commercial [2] O. Chapelle and Y. Zhang. A dynamic Bayesian [3] W. Chen, Z. Ji, S. Shen, and Q. Yang. A whole page [4] N. Craswell, O. Zoeter, M. Taylor, and B. Ramsey. An [5] A. Dempster, N. Laird, and D. Rubin. Maximum [6] G. Dupret and B. Piwowarski. A user browsing model [7] J. Gauvain and C. Lee. Maximum a posteriori [8] A. Ghosh and M. Mahdian. Externalities in online [9] F. Guo, C. Liu, A. Kannan, T. Minka, M. Taylor, [10] B. Hu, Y. Zhang, W. Chen, G. Wang, and Q. Yang. [11] B. Jansen. The comparative effectiveness of sponsored [12] B. Jansen and M. Resnick. An examination of [13] T. Joachims, L. Granka, B. Pan, H. Hembrooke, and [14] L. Rabiner. A tutorial on hidden Markov models and [15] M. Richardson, E. Dominowska, and R. Ragno.
 [16] Y. Zhang, W. Chen, D. Wang, and Q. Yang.
 [17] Z. Zhu, W. Chen, T. Minka, C. Zhu, and Z. Chen. A
