 With the increasing popularity of social network sites, social network services have become information providers on a w eb scale, providing researchers a new opportunity on content mining. Microblog platforms are very popular in social networks, and recent progress of Web 2. 0 applications has witnessed the rapid development of microblog in China (i.e., Sina Microblog[1]), which has already been one of the most important ways for people X  X  online communications, es-pecially on sharing information[2]. Sina Microblog provides similar services as other famous microblog platforms, such as Twitter[3]. Since its launch in Au-gust 2009, Sina Microblog has grown into the biggest Chinese microblog with 500 million registered users by the end of 2012[4]. Therefore, we choose Sina Microblog as our data resource. Although microblogging is increasingly popular, methods for organizing and providing a ccess to microblog data are still in the early stages. In this paper, we propose a novel method of sleep quality evalua-tion by processing and mining large scale data on Sina Microblog. To the best of our knowledge, this is the first study that makes an effort to evaluate sleep quality totally based on large scale online data. Because of the characteristics of our method, only Active Microblog Users(e.g., the users who posts more than 100 microblogs per year) are useful in our research, and for simpleness,  X  X MU X  means  X  X ctive Microblog User X  in the rest of our paper.

It is obvious that surveying people X  X  sleep quality is quite important in many interdisciplinary fields from academic interests to practical decision makings of government, enterprise and individual. However, in China, there are no related research about sleep quality until 2013. In 2013 and 2014, CHINESE MEDICAL DOCTOR ASSOCIATION, known as CMDA, released two reports[5,6] about sleep quality of Chinese people. This project was supported by a furniture com-pany and was actualized by a Research Advisory Group. With many people involved and two months X  hard work, they interviewed 8286 people face to face or online. Clearly, the number of samples is limited. In contrast with CMDA X  X  method, our method by utilizing the large scale data of social network sites has many natural advantages. 1)The people whom we can survey are limitless in some degree. 2)Many features of people can be chosen to carry out our investi-gation, which includes living areas, occupations, sex, age and so on. 3)We can get most of the information on social network sites freely. However, limited to the usage of social network are more likely to be young people, the age structure tend to be younger in our survey. According to a survey about Sina Microblog, 90% of Sina Microblog users are people from age 18 to 35[7](about 80% in our survey). Therefore, the discovery in ou r research are more suitable to describe this group in China.

In our paper, we certainly could not get the accurate sleep time of a user, because people won X  X  fall asleep immedi ately after posting the last microblog. However, according to the study of CMDA, 58.9% Chinese people have the habit of playing phone before going to sleep, and among them 60% people like to post microblogs using their mobile phones. That is to say, there is a great chance for AMUs to post microblogs befo re they go to sleep. Besides, normal AMUs usually post a lot of microblogs in their working or leisure time, but few microblogs in sleep time. Then by mining user microblog data, we can get the user X  X  approximative sleep period and then evaluate it. Experiment will show that the sleep time we get is similar to CMDA X  X  result.

The rest of this paper is organized as follows: In section 2, we introduce some related work on social network platform. In section 3, we explain the detail of our sleep quality evaluation method over Sina Microblog data. Section 4 illustrates our experimental results conducted with a real dataset of Sina Microblog. Section 5 concludes our work and makes a brief description of future work. Social network is becoming an important research topic in various fields. Early works by Java et al.[8], Zhao et al.[9] and Krishnamurthy et al.[10] examined the usage and role of Twitter in creating a social community on the basis of its basic functions. In these studies, Twitter was investigated for its social networking role, that is, how it would be used to send massive amounts of short messages about social activities.

Later, people gradually started to pay attention to the large amount of user data on social networks. Thanks to the advent of social networks, researchers can obtain crowd life logs and observe their lifestyles easily. Ren et al.[11] uti-lized the users historical data to discover meaningful tweets given a users in-terests. Fujisaka et al.[12] and Lee et al.[13,14] conducted detecting unusual social events such as festivals and disasters by turning up anomaly crowd behav-ior. Wakamiya et al.[15] proposed a method to find crowd viewing TV programs from people X  X  tweets and rated the TV programs. Another of their work[16] used geolocation-based tweets to extract urban area characterization. Sue Jamison-Powell et al.[17] discussed insomnia and sleep disorders using microblogging so-cial media service Twitter. In this section, we introduce the detail of our evaluation method as follows: First we demonstrate how to model the users life patterns over their microblogs in section 3.1. Then we introduce how to extract the sleep pattern from user life pattern, and method of evaluating it in section 3.2. 3.1 Modeling User Life Pattern In this paper, we proposed an explorative method to evaluate user sleep quality based on large scale online data. Specifically, China only has a single time zone, therefore time zone is not considered in our method. In addition, we assume that most people don X  X  travel to other countries too much in a year and this assumption is true in most conditions for ordinary Chinese people. Our main idea is to detect users X  sleep time from th eir microblogs. First we define the time period p i to be the time period from i o X  X lock to ( i + 1) o X  X lock, 0  X  i&lt; 24. Then we collect the total microbl ogs which a user posts in period i of every day in a long time(e.g., a year in this paper). After that, we define Microblog Time Distribution as follows:
M =( m 0 ,m 1 ,m 2 ...m 23 ) where m i is the total number of microblogs which a user posted a year in period i . Then we define a user X  X  life pattern as follows:
L p =(( p 0 ,r 0 ) , ( p 1 ,r 1 ) , ( p 2 ,r 2 ) ... ( p 23 ,r 23 )) where p i is the percentage of microblogs which are published in period i ,and r i represents the change rate of current period compared with previous one. Their calculation can be got in formula (1) and (2). where ib is the period before i (i.e., ib =( i +23)%24), x = m i  X  m ib . The function of P ( x )isdefinedasfollows: The parameter  X ,  X  in formula (3) are both empirically set 5 in this paper. P ( x ) is a smooth function, we use it to avoid the situation that the denominator is zero. Also, it can help avoid the case that the change rate r is too big, when m ,m ib are both small and their difference x is close to the bigger one. For example, when  X  m i =31 ,m ib = 1 X , the result of r i is 3 . 48 with P ( x ), compared with 30 without P ( x ). In another condition of  X  m i = 130 ,m ib = 100 X , m i ,m ib are larger but the difference between th em is 30 the same as before. The result of r i won X  X  differ too much, 0 . 28 with P ( x ), and 0 . 30 without P ( x ).
Different users have different sleep ha bits, some users sleep early at night, othersmaygotobedratherlate,andso me users even sleep in the daytime. Al-though users won X  X  always get up in the same time everyday, a user with regular sleep habit will get up in the same peri od in most days of a year. Therefore, there is some statistical regularity in most users X  microblog data. Then we can find the start and end period of a user X  X  sleep base on the vectors M and L p . Table 1 shows an example of a Sina Microblog user data. The user X  X  Microblog Time Distribution M ( m i ) can be obtained from our database. Then we get user life pattern L p ( p i ,r i )from M using the formulas above.
 3.2 Sleep Pattern Detection and Evaluation After we get the user life pattern L p , the next step is to detect the user sleep pattern S p from it. The definition of S p is as follows: where s, e represent the start and end perio d which are detected by algorithm 1. The main idea of algorithm 1 is based on the size of percentage p i and change rate r i . The detail introduction of algorithm 1 is as follows:
The input of algorithm 1 is User Life Pattern L p whichwedefinedinlast section. The output is User Sleep Pattern S p . Phase 1 from step 1 to 6 calculates Algorithm 1. (User Sleep Pattern Detection) the start period of sleep time, while phase 2 from step 7 to 17 gets the end period. In step 11, we assign end period e as the period before j if r j &gt; = 30, because there is a great probability that, on most days of a year, the user gets up in period ( j + 23)%24. On the other hand, if r j &lt; = 30, it means the user doesn X  X  often got up in period ( j + 23)%24 of a year. Therefore, we will consider j as the end period of user sleep time if the condition in step 13 is satisfied.
Some threshold values of p i and r i in line 2,3,9,10 and 13 are set based on the experiment using training dataset which is not inclued in the experiment dataset below. For detail interpretation of line 2 and 3, if p i is under 0 . 04 or r i is under  X  1, we consider there is a probability that the user starts to sleep in period i in most days of a year. Then we will check whether the p values of next three periods are all under 0 . 03, and whether the p value of the period before is bigger than 0 . 04. If so, the start period of sleep time will be set i .Theideaof setting end period is similar to start period. For the user data which is shown in Table 1, we can get start period and end period are 0 and 8 respectively by our algorithm, and the user X  X  sleep time is 9 hours(including start period and end period).

Even if a user with a rather regular sl eep habit, she won X  X  go to sleep and get up in the same periods everyday. Howev er, the start and end periods often keep the same in most days of a year, and the two periods of the rest days maybe a little earlier or later. Generally, our me thod can detect the two periods correctly if the user have a regular sleep habit. Re sults of experiment in next section can prove that algorithm 1 works well in our dataset. The concept of  X  X leep time X  mentioned in the rest of our paper means the time between period s and period e (including s, e ), i.e. ( e  X  s + 1 + 24)%24. We should notice that the sleep time detected by our method is more like an a verage number for a year rather than an accurate one for every day.

The performance of algorithm 1 will be discussed in detail in the experiment section. Assuming that we have gotten the sleep pattern S p , the next work that we need to think over is how to evaluate it. Our evaluation method mainly considers two aspects: one is the length of S p , and another is the quality of S p . Generally, there is no unified or authoritative standard for the sleeping length of people. According to the instruction of CDC(U.S. Center for Disease Control), 7-9 hours X  sleep is needed by an adult. Therefore, for length part, we choose a middle value of CDC X  X  instruction -8 hours as a boundary. User will get a score punishment if his sleep time is lower than 8 hours. In fact, the sleep time detected by our method will be a little longer than the actual time, for the reason that people won X  X  fall asleep immediately after they stop posting microblogs, nor will they post microblogs immediately when they get up in the morning. Detail comparison will be shown in the experiment section. For quality part, considering that S p represents a user X  X  sleep situation of a whole year X  X  time, p i won X  X  always be zero even if it is in the sleep pattern S p .Peoplemay post microblogs to complaint if they are disturbed by phone calls or other noises when they are sleeping. Therefore, the larger the p i is, the lower score a person will get. We can compute the score of a sleep pattern S score as follows: where L score ,Q score represent the score of length part and quality part. l is the length of sleep pattern S p . The right part of formula 5 is a sigmoid function to give a score of length part. The parameter  X  is set 5 in this paper, which means a user will get L score =0 . 5 if he sleeps 5 hours, and 0.73, 0.88, 0.95 corresponding to 6, 7, 8 hours. The value of L score will almost keep the same while sleep time continues to increase from 8 hours, and its upper limit is 1. Therefore, formula 5 is fit for our requirement.

The parameter  X  is set a small value 0.2 in formula 4, because Q score also takes the length into account i n some degree. The parameter  X  of gauss function G ( x ) is set 0.02. Formula 7, 9, 10 are all gauss function. The usage of them is similar to the sigmoid function of formula 5. On the basis of large experiments, we set parameters of gauss function empi rically to make the score of sleep quality more reasonable. Notice that we use percentage instead of numbers in our score system to reduce the influence of the varying total amount of microblogs of different users. That is to say, a user who posts 1000 microblogs a year could also get a higher score than a user who posts 100 microblogs a year.
After we get the scores of users X  sleep qu ality, we can evaluate the sleep quality of cities. The average score of city users is the first aspect which should be considered. Besides it, we define a u ser whose score is higher than 90 as a healthy user , user whose score is lower than 60 as an unhealthyuser ,andtherestof users are in a state of subhealthy . We will punish a city if the number of healthy users is small or the number of unhealthy users is large. The score of city sleep quality can be computed as follows: where | c | is the number of users in city c . f c , o c are the percentage of unhealthy users and healthy users in city c . Three parameters  X , x max , X  of gauss function In this section, we describe our experim ent to extract the sleep patterns of crowd which were mentioned in the section 3. F irst we computed the aforementioned life pattern respectively by cities and extracted the sleep patterns from them. Then we made a proper evaluation both for individual users and cities. 4.1 Experimental Dataset In order to carry out our method of sleep quality evaluation, first we use our distributed crawling system to collect mi croblogs from Sina Microblog sites. The dataset covers 16 cities in China, containing 553,269 distinct Sina users, 304,809 active Sina Microblog users and 731 million microblogs in all. The information of a user X  X  living city is stored in our database. Our method mentioned in section 3 is designed only for AMUs, for the reason that if a user posted too few microblogs a year, the user X  X  data won X  X  form a valid life pattern. The detail of our dataset is shown in Table 2.
 4.2 Performance of User Sleep Quality Evaluation For each AMU, we generate the user life pattern as we mentioned in section 3. Then we extract user sleep patterns from life patterns. Figure 1 shows some examples of user life and sleep pattern wh ich are detected by algorithm 1. The ordinate of the figure represents the number of microblogs a user posts, while the abscissa represent the period. The area between two dotted lines is the sleep time of a user detected by our algorithm. We should pay attention that a period is one hour X  X  time in this paper, and the sleep time includes both start and end period. Therefore, the sleep time in Figure 1 are 9, 6 and 9 respectively with scores of 94.6, 61.3 and 82.3, and the difference of the scores can be seen intuitively from the figures.

Our detection rate is about 74.2% for AMUs in the whole dataset. Considering that there exists some noise users in the dataset, for example, advertisement users who are microblogging all day long, users whose microblog time distribution can not form a regular life pattern, 74.2% is good enough for our research.
Next, we evaluate each city by the method we mentioned in section 3. Table 3 shows the users X  average sleep time of each city. The overall average sleep time of China published by CMDA group is 7.5 hours in 2013, which is a little shorter than our analysis. One possible explanation which we have mentioned is that people may do some other things after they stop posting microblogs. The reason is the same in the morning.

From Table 3 we can see that the sleep time of year 2012 is a little shorter than that of 2011. But from 2012 to 2013, the sleep time of most cities even become longer. We made a st atistical test to show the difference between two adjacent years is significant by usin g spearman correlation coefficient.
Spearman correlation coefficient is commo nly used in calculating the relevance of two distributions. It has two values: 1) r-value(from -1 to 1) shows the de-gree of correlation between two distributions and larger absolute value means more relevant. The plus or minus sign of r-value represents that whether the two distributions have positive or negative correlation. 2) p-value(from 0 to 1) shows the significant degree of r-value. Usually, we are confident to say r-value is significant when p-value is under 0.05, and very significant when p-value is under 0.01. The result of the statistical test is shown in Table 4 and from it we can conclude that the difference is statistically significant.

The average sleep time in China is stable in some degree, and almost every city in our experiment can reach 8 hours every year. However, in contrast with Figure 2, the situation of sleep quality is not optimistic -scores are generally low and most of them keep declining from year 2011 to 2013, merely the descend is smaller from 2012 to 2013 than that of 2011 to 2012. The reason for the descend from year 2012 to 2013 is that, although the sleep time in some cities increased, the frequency of microblogging behavior during sleep time increased too. 4.3 Reasoning by LDA Method To reason the difference between high score users and low score users, we try to make a exploratory explanation by the popular method of Latent Dirichlet Allo-cation, known as LDA. In our experiment, we implemented the open source soft-ware jGibbLDA[19], a version of LDA model with Gibbs sampling. The original data comes from the database of city Sha nghai, which contains 1120 unhealthy users and 3713 healthy users. We randomly selected 200 microblogs from each user to form the original text which LDA requires. Then after some necessary preprocessing steps(e.g., word segmentation by using ICTCLAS system, remov-ing stop words and other no ise words), we proceeded the LDA training of each group. To specify the number of topics in LDA, we tried several numbers from 10 to 50. The training results are not satisfied and varies a lot when the num-ber is set under 20. When the topic number is larger than 20, the top topics which users involve most don X  X  differ too much. Therefore, we choose a middle number 30 in our experiment. Other param eters are set default according to the instruction of jGibbLDA document.

We analyzed the result after the tra ining process finished. We gave every latent topic a name based on the observation of the top frequent words in it. Figure 3 shows some topics with high percentage and from the figure we can see the two groups X  topics mainly differ in two aspects. One is that the percentage of unhealthy group on topic  X  X ove, life and sentiment X  is 11 points higher than that of healthy group. Another discovery is that healthy users have more relax topics, such as  X  X ovie, music X ,  X  X ood X ,  X  X ames, anime X ,  X  X onstellations X . Maybe such difference in topics is one of the possible reasons which cause the gap in sleep quality scores between healthy users and unhealthy users. In this paper, we proposed a novel meth od to evaluate sleep quality of AMUs based on crowd-sourced data of Sina Microblog. Meanwhile, we introduced a practical method of processing and mining of large scale data. In our work, we presented a complete set of system on h ow to evaluate people X  X  sleep quality, which includes 1) collecting massive microblogs from Sina as the base data. 2) modeling user life pattern and sleep pattern from base data. 3) method of eval-uating user sleep pattern and also the city sleep quality. 4) finding the difference between high score crowd and low score crowd in topics by LDA method. By conducting the experiment using the data we collected, we showed that our evaluating system is reasonable.

Our research shows that the sleep quality of AMUs is not optimistic in China, the sleep quality keeps declining from year 2011 to 2013. Therefore, both gov-ernment, enterprises and individuals should be aware of such situation and work together to improve it. In the future work, first we will make a comparison of sleep quality between different group o f AMUs who have the same feature such as interest, occupation. Another aspect is that we want to improve our evaluation method by adding sentiment analysis. For example, AMUs who post microblogs with happy sentiment before sleeping will have a score reward.
 Acknowledgment. This work was supported by Natural Science Foundation of China (61272240, 60970047, 61103151), the Doctoral Fund of Ministry of Ed-ucation of China (20110131110028), the Natura l Science foundation of Shandong province (ZR2012FM037), and Microsoft research fund (FY14-RES-THEME-25).

