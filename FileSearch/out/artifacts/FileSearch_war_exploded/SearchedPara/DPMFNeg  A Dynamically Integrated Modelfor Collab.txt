 With the vigorous development of elect ronic commerce, a huge amount of com-modity information is produced for consumers. In fact, it is not trivial to offer consumers with appropriate choices. Recommender systems have attracted a lot of attention to solve the information overload problem. Many related rec-ommendation techniques have been researched in fields of information retrieval [1,2], machine learning [3] and data mining [4].

Recommender Systems actively present to users a list of items such as films, music, books, news and so on, which the users may be interested in. Typically, the known techniques of recommende r systems can be categorized as Collab-orative Filtering (CF) [5,6] and content-based filtering [7]. CF algorithms are based on the assumption that if users have rated similar items or have similar behaviors, activities or preferences, t hey will rate or act on other items simi-larly [5]. Meanwhile, researchers also face several challenges that pose danger [8], which are mainly data sparsity, scalability, diversity and so forth. Some hy-brid recommender systems [9,10] are studied with unifying advantages of CF and content-based filtering, which may have better performance and improvements.
For two categories of CF, memory-based and model-based algorithms can be mutually complementary in some way to take advantages of two methods. However, integrated CF algorithms are simply researched by far, and most of them are only combined with the fixed co efficients. We observe that memory-based methods need significant relationship and model-based algorithms always ignore strong correlations, so we propose a dynamically integrated CF model that individually combines the memory-based and the model-based algorithms. We study our method with explicit ratings on on two datasets and the experimental results show that it outperforms other state-of-the-art algorithms. 2.1 Neighborhood Approaches The most representative of memory-based CF methods, neighborhood approaches [11,12] still enjoy a huge amount of popularity. Neighborhood-based CF computes similarity between users or items, and th en uses the weighted sum of ratings or simple weighted average to make predictions based on the similarity values. We adopt Pearson Correlation Coefficient (PCC) [13] as similarity function, denoted by Sim ( u,v ), which is defined as: where r u,i is the score rated by user u for item i ,  X  r u represents the average of ratings by user u and I u,v is the set of items that co-related by both user u and user v .Topredict r u,i , the user-based neighborhood approach firstly need choose the top-k most similar users, and then r u,i is calculated by the formula: where N k u is the set of top-k users which are the most similar to u . 2.2 Probabilistic Matrix Factorization In [3], Salakhutdinov et al. presented a probabilistic linear model, named as Probabilistic Matrix Factorization (PMF). PMF seeks to obtain two low-rank matrices, P and Q , for the user-item rating matrix R . It assumed that attitudes or preferences of a user are determined by a small number of features. A d -dimensional column feature vector of use u or item i is respectively denoted as p u and q i . The rating r u,i can be formulated as follows: where r m is a global offset value. The user and item latent factors can be learned by minimizing the sum of squared errors for objective function: where I u is set of items rated by u , the parameters  X  p and  X  q are regularization coefficients to prevent the over-fitting , and  X  is the Frobenius norm of matrix.
Adopting a stochastic gradient descent t echnique using observed ratings data, where the parameters  X  1 and  X  2 are learning rates to cont rol convergence steps. In above-mentioned section, we have introduced neighborhood approaches and PMF algorithm in detail. Despite the fact that neighborhood models and PMF method have made a great success in collabo rative filtering, the two algorithms have their own disadvantages in the real world application. Neighborhood models need to compute similarities between user s based on their co-rated items, which often ignores the vast majority of ratings by some users and can not capture the totality of weak signals encompassed in all of a users ratings [4]. The drawback of PMF is poor at detecting strong associations among closely related items, whereas neighborhood model makes better. Hybrid models for neighborhood approaches and latent factor models may be able to get better performance.
In [4], Koren has proposed a hybrid CF model that combined neighborhood and latent factor model, which showed th at it improves the prediction accuracy by capturing the advantages of two models. In this paper, the regularized loss function of simplified hybrid model can be formulated as:
In above hybrid model, Koren just simply integrated a neighborhood model and latent factor method. That is, the tradeoff parameters of predicted ratings for two approaches are fixed as the constant with coequal form. Due to the difference of values rated by each user, like a user may have few or many ratings, or he (she) has diverse or focused interests, the prediction accuracy of neighborhood model and latent factor method should be diverse for each user. In our opinion, since the two algorithms pay attention to different parts of ratings data and every user has their own features, the tw o methods should have varying degrees of improvement for each user. In consequence of above motivations, we propose a dynamically integrated model to predict ratings, which combines a neighborhood approach and latent factor method with the adaptive trade-off parameters. We call it DPMFNeg, in which we use PMF as latent factor model. Because our focus is on the user, so we assume that the effect of user-based neighborhood approach and PMF algorithm are different for each user. Namely, each user has of ones own trade-off parameters for two methods. The predicted rating for dynamically integrated model can be combined with Equation 2 and 3, and then its formula can be defined as: where  X  u and  X  u are tradeoff coefficients to control the neighborhood model and PMF, r N ( u,i ) is the predicted rating of user-based neighborhood model.
In our proposed method DPMFNeg, our model can be solved by the regular-ized least squares problem, which is defined as follows: parameters respectively for user and item latent factors,  X   X  and  X   X  are also regularization parameters of uses trade-off coefficients.

Model parameters for Equation 8 can be learned by moving in the opposite direction of the gradient, and learning rules are updated by: where  X  1 ,  X  2 ,  X  3 and  X  4 are all learning rates to update parameters. In this section, we conduct a series of experiments to evaluate our proposed method DPMFNeg and compare it to some existing approaches on two Movie-Lens datasets. 4.1 Datasets The MoiveLens datasets are publicly available in GroupLens 1 . We use MovieLens-100K and MoiveLens-1M to evaluate our proposed method, which are respec-tively denoted as ML100K and MoiveLens-1M. The detailed statistics of the datasets are displayed in Table 1. 4.2 Evaluation Metrics In order to measure the prediction accura cy of our experiments, we employ Mean Absolute Error (MAE) and Root Mean Square Error (RMSE) as evaluation metrics. MAE, is the average of absolute errors, and the definition is given as: where R test is the set of the whole user-item pairs in the test dataset. And RMSE is defined as:
From the definition, we can know that smaller values of MAE and RMSE indicate better prediction accuracy. 4.3 Methodology In the experiments, we use differently split training dataset and test dataset to evaluate the algorithms. For the ML100K dataset, we use 90% of ratings as train dataset, and the remaining as the test dataset. We also split up ML1M into training and test set in percentage of 90, 80, 60 and 30 accordingly, which are respectively to train models and predict the missing values. And the num-ber of neighbors is set as 50. For two datasets, ML100K and ML1M, we set regularization parameter for all methods as 0.01 in order to avoid over-fitting.
To evaluate the performance of DPMFNeg, we compare our proposed methods with several following methods:  X  X serAvg: This method uses the average rating of each user to predict the  X  X temAvg: Similar to UserAvg. This method uses the average rating of each  X  X eighbor: This method computes the similarity between users by PCC and  X  X MF: As a state-of-art rating-oriented CF method, PMF is proposed in [3].  X  X ybCF: This approach is a simply integrated CF algorithm, which was 4.4 Impact of Dynamic Parameters  X  u and  X  u In this subsection, we investigate the impact of dynamic parameters  X  u and  X  u on the performance of our proposed DPMFNeg model. The parameters  X  u and  X  u of the DPMFNeg balance the weight of the users own characteristics on neighborhood approach and PMF method. In above subsection mentioned, the DPMFNeg is equivalent to PMF if the trade parameters  X  u =0and  X  u =1. And when  X  u =1and  X  u = 0, the DPMFNeg can be regard as neighborhood method, because the loss of function ca n be directly calculated. HybCF method is also the special case of the DPMFNeg when Neighbor and PMF are integrated with equality. Figure 1 show the influence of dynamic parameters  X  u and  X  u in their different situations, i.e., RMSE and MAE here. We can see that dynamic parameters can improve the performance of predicting accuracy, because they are learned to adapt to every user by DPMFNeg. 4.5 Performance Comparison This subsection presents the results of our experiments which made on ML100K and ML1M datasets, and then we analyze the results concretely in various as-pects. Table 2 shows the details of MAE and RMSE for our proposed method DPMFNeg and compared approaches.

We firstly tested whether the number of neighbors for user-based neighbor-hood model has a heavy influence on methods. Figure 2 shows that the changes of RMSE are very small for neighborhood model on ML100K and ML1M datasets when number of neighbors is greater than 20, so we set the number of neighbors for user-based neighborhood approach, simple hybrid model and DPMFNeg as 50 to predict the missing value in the test datasets.

From the results on the ML100K as shown in the upper part of Table 2, we can see that the performance of DPMFNeg is better than the other methods both on MAE and RMSE. HybCF achieves large improvement than other baseline meth-ods, and it indicates that hybrid model ca n improve the accuracy in prediction. And in the results, our proposed method DPMF++ outperforms HybCF. Due to the fact that DPMFNeg integrates memory-based method and model-based model, it can be applicable to small dataset. The lower part of Table 2 displays the results of our experiments on ML1M dataset. It shows that our methods can generate better results than other state-of-the-art CF algorithms on four kinds of train data and test data, which are all split from ML1M in different percentages. HybCF also mostly performs better than other methods, and yet the results of DPMFNeg are better than those of HybCF, which is similar to that on ML100K. The observations suggest that our method can better take ad-vantages of two methods than simple hybrid CF. We also analyze the raised level for ML1M. And in Figure 3, it shows that along with the decrease of training data, our method DPMFNeg improves more compared with the best results of other methods. In this paper, we focus on the hybrid Collaborative Filtering problems which are rarely studied in the literature before. Based on the motivation that two types of CF pay attention to different parts of ratings data and they can be mutually complementary, we propose a dynamically integrated CF model called DPMFNeg, which combines a neighborhood approach and Probabilistic Matrix Factorization with the adaptive trade-off parameters on the user-oriented. We also experimentally test the recommendation performance of DPMFNeg. The results show that our method outperforms the other state-of-the-art methods in terms of MAE and RMSE and performance improvements are consistent with respect to various datasets.
 Acknowledgments. This work is supported by the Natural Science Founda-tion of China (61272240, 60970047, 61103151, 71301086), the Doctoral Fund of Ministry of Education of China ( 20110131110028), the Natural Science founda-tion of Shandong province (ZR2012FM037) and the Excellent Middle-Aged and Youth Scientists of Shandong Province (BS2012DX017).

