 For top-k document search, users are usually only interested in a few documents at the top of the returned results list. The traditional approaches to this top-k retrieval problem focus on the relevance of results only: they make use of a stan-dard retrieval model [9] that computes th e relevance score of each document with regard to the query individually and then just return the k documents with the highest relevance scores. However, man y recent studies have shown theoretically and empirically that it is beneficial to take the diversity of results into account as well [4], particularly when different users are interested in different meanings or aspects of the query. Retrieving a diverse set of the most representative relevant documents is more likely to ensure that all possible information needs of a given query are satisfied. So finding the best set of top-k documents for a given query is of crucial importance to IR systems.

In order to resolve the query ambiguity and avoid the information redundancy, a number of diversification techniques [1,14,13,15,2,12,16] have been designed to optimize the top-k documents collectively, in terms of both relevance and diversity. Most these former work, for example MMR, define some objective functions to trade off between maximizing relevance and maximizing diversity. [16] is the latest work which addressed this problem within the framework of facility location analysis [6]  X  a branch of operations r esearch concerning optimal placement of facilities. Objective functions based on Desirable Facility Placement and Obnoxious Facility Placement are designed and optimization of the objective functions is carried out by using the local search [11] algorithm. However the local search is expensive, so [16] can X  X  obtain the top-k documents efficiently and fast approximations are desired.

In this paper, we revisit this problem through a submodularity analysis of the desirable-facility-placement objective function, which provides a theoretical approximation guarantee of factor 1  X  1 e with the (best-first) greedy search al-gorithm. Furthermore, in order to improve effectiveness, we propose a two-stage search strategy which first obtains a high-quality initial set of top-k documents via greedy search, and then refines that r esult set iteratively via local search. Compared to the previous approach where the local search algorithm starts from the set of k documents with highest relevance scores, the proposed approach sig-nificantly improves not only the effectiveness (i.e., the quality of final result set) but also the efficiency (i.e, the speed of convergence). The advantages of our new approach over the existing ones are confirmed by extensive experiments on two large TREC benchmark datasets.

The rest of this paper is organized as follows. The framework of facility location analysis is discussed and the submodularity of the objective functions is analyzed in Section 2. A two-stage hybrid search strategy is employed to optimize the objective function in Section 3. The experiments and the analysis of the results is presented in Section 4. We c onclude our work in Section 5. 2.1 Top-k Retrieval Problem Suppose that for a given query q , the set of relevant documents found by the retrieval system is D = { d 1 ,d 2 ,...,d n } .

The relevance score of a document with respect to q is calculated by a function r : D  X  R . Without loss of generality, we assume that r ( d 1 )  X  r ( d 2 )  X  ...  X  r ( d n ). Furthermore, the distance or dissimilarity between any two documents in D is calculated by a function w : D  X  D  X  R .

The task of top-k retrieval is to pick a subset S  X  D of k documents that is both relevant and diverse simultaneously.

Recently facility location analysis from operations research has been intro-duced as a unified framework for top-k retrieval [16]. To find the optimal subset, we formulate it as a facility location problem [6] in operations research  X  given a set of customer  X  X ocations X  D , we would like to find a subset S  X  D to open k  X  X acilities X  there so as to optimize a graph-theoretic objective that is dependent on the cost of opening a facility at each location and also the distance between each pair of locations. The facility opening cost at location d i is set to  X  r ( d i ) which reflects our preference for high r elevance. Making use of different opti-mization objectives, facility location analysis would lead to different retrieval techniques for search result diversification.
 Several state-of-the-art techniques for diversified retrieval, including MMR [1], QPRP [15], and MPT [13], treat the top-k documents as obnoxious facilities to be dispersed as far as possible from each other, but a much better performance could be obtained by considering the top-k documents as desirable facilities to be placed as close as possible to their  X  X ustomers X  (other relevant documents). In the following sub-sections, we firstly give the sub-modularity analysis for opti-mization function in top-k retrieval problem, and then prove the sub-modularity of both Obnoxious Facility Dispersion(OBN) function and Desirable Facility Placement(DES) function, where OBN and DES are two kinds of approaches in the framework of Facility Location analysis. 2.2 Submodular Function Maximization A function f :2 X  X  R is submodular if for any S  X  T  X  X and i/  X  T , characterized by the diminishing return property: the marginal gain of adding an element to a smaller subset of X is higher than that of adding it to a larger subset of X . We are often interested in finding the subset with cardinality constraint |
S | X  k that maximizes a submodular function, i.e., arg max this problem is in general NP-hard, even for some simple submodular functions. In recent years, submodular functions h ave been receiving much attention from the Artificial Intelligence (AI) community because of the following insight about their approximate optimization. The greedy algorithm was employed to optimize the normalized, monotone, and submodular function with approximation ratio 1 2.3 Obnoxious Facility Dispersion (OBN) The optimization objective of obnoxious-facility-dispersion is two-fold: (1) to minimize the total cost of opening k facilities and (2) to maximize the spread of those facilities. ALL the standard forms of MMR [1], QPRP [15], and MPT [13] could be expressed as the dispersion of the top-k documents.

The Maximum Marginal Relevance (MMR) [1] is the first diversification method which balances the relevance and diversity of the result list. The marginal gain of MMR, i.e., f MMR ( S  X  X  d } )  X  f MMR ( S ), is defined as  X r ( d )  X  (1  X   X  )max d  X  S s ( d, d ), where r ( d ) is the relevance between the document d and the query, S is the set of select documents and s ( d, d ) is the similarity between the document d and d . [8] has proved that f MMR is submodular, but it has also pointed out that f MMR is not monotone.

The Quantum Probability Ranking Principle (QPRP) [15] states that doc-uments should be ranked according to d i =argmax P ( d )+ d  X  S I d,d . With the substitution I d,d =  X  P ( d ) P ( d ) s ( d, d ), we see that the marginal gain f QP RP ( S  X  X  d } )  X  f QP RP ( S ) can be rewritten as: 1 2 P ( d )  X  2 d  X  S P ( d ) P ( d ) s ( d, d ), where P ( d ) is the probability of d being relevant to the query. The diminishing return property obviously holds due to the fact that d  X  S P ( d ) P ( d ) s ( d, d )  X  d  X  T P ( d ) P ( d ) s ( d, d ) for all S  X  T and d/  X  T , and therefore f QP RP is submodular. However, it is easy to show that f QP RP is monotone nondecreasing.

In the Modern Portfolio Theory (MPT) for IR [13], the marginal gain f where w d is the importance weight of d  X  X  rank position using nDCG, E [ r d ] is the expected relevance scores, b is a specified risk preference parameter for users, and  X  d is the standard deviation of d . This means that f MPT would not be submodular since  X  d,d could be negative. Nevertheless, if we replace the Pearson X  X  coefficient with a non-negative similarity function s ( d, d ) as employed in the experiments of [16], then we get a submodular function due to fact that for all S  X  T and d/  X  T , However, once again, it is easy to show that f MPT is not monotone. 2.4 Desirable Facility Placement (DES) The optimization objective of desirable-f acility-placement is also two-fold: (1) to minimize the total cost of opening k facilities; and (2) to minimize the distances from the customer locations to their closest facilities. In the context of top-k retrieval, by treating the top-k documents like desirable facilities, we are in fact selecting the best representatives of the relevant documents so that the top-k result set consists of a concise summary of all the relevant information, and as such novelty and diversity naturally arise.

In order to facilitate submodularity analysis, we re-write the original mini-mization problem of desirable-facility-placement into its equivalent maximization problem as follows. The optimal set of top-k documents, considered as desirable f is defined as follows: where w ( d, d ) could be the dissimilarity between the document d and d . Essen-tially it can be regarded as a mixtur e of relevance-based ranking and k -medoids clustering.

The above mentioned diversified retrieval models  X  MMR, QPRP, and MPT  X  can all be transformed to use the above desirable-facility-placement objective function instead, as pointed out by [16].
 Theorem 1. The desirable-facility-placement objective function f ( S ) is sub-modular and also monotone nondecreasing. Proof. Let S  X  T  X  D and i  X  D \ T . For any d  X  D \ ( S  X  X  i } ), the nearest neighbor is i or in D \ S . Consequently, we have that =  X  =  X r ( i )+(1  X   X  )min The marginal gain is nonnegative, i.e. f ( S ) is nondecreasing set function. D
It is obvious that f is monotone nondecreasing. Both the obnoxious-facility-dispersion (OBN) problem and the desirable-facility-placement (DES) problem are in general NP-hard [16], therefore we are only able to solve them through an approximation algorithm. The greedy search algorithm is (1  X  1 e )-approximation for DES problem thanks to the monotonicity and sub-modularity of the objective function. Bot h greedy search and local search, can be straightforwardly applied to top-k retrieval. In greedy search, the most relevant document d 1 is initialized to S , and then the document d D/S  X  D/S with maxi-mum marginal gain f ( S  X  X  d } )  X  f ( S ) is added into S , until the size of result set S is k . In local search, the set S is initialized with a random documents subset { d 1 ,d 2 , ..., d k i.e for some f ( S  X  X  d D/S }\{ d S } ) &gt;f ( S )forsome d S  X  S ,then d S is replaced with d D/S , until the result set does not change.

Generally, greedy search is simpler and t hus more efficient, but local search is often more effective at the expense of running time. In [16], it has been demon-strated that using the local search (LS) algorithm to optimize the desirable-facility-placement objective function works much better than using the greedy search (GS) algorithm to optimize the obnoxious-facility-dispersion objective function. Particularly, the DES variant of the MPT retrieval model optimized by local search achieves the highest perfo rmance scores. However, on large docu-ment collections, local search is very slow . Is it possible to accelerate local search without hurting its excellent performance?
The effectiveness and efficiency of local s earch actually depend on its starting point, i.e., the initial result set S in our context. If the starting point is within the vicinity of the global optimal solution, local search is not only more likely to end up with the best possible result set, but also more likely to reach that Algorithm 1. GSLS algorithm for top-k retrieval result set quickly. It is non-trivial to find a good starting point for local search: quite often people just run the local search algorithm for a number of times with randomly generated  X  X eeds X , and then pick the best one from all those result sets produced. Fortunately, for top-k retrieval, Theorem 1 tells us that a near-optimal result set could be obtained quickly through greedy search (which itself is quite fast). Inspired by this fact, we propose a two-stage hybrid search strategy named GSLS (outlined in Algorithm 1): it first obtains a high-quality initial set of top-k documents via greedy search (line 1-5), and then refines that result set iteratively via local search (line 6-15). 4.1 Datasets The document collection used for our experiments was the ClueWeb09 corpus 1 part B (the first 50 million documents). It was indexed by employing the toolkit Lemur/Indri 2 , where standard stop-word removal and Porter stemming were applied. There are two (query) topic sets from the TREC-2009 and TREC-2010 Web Tracks 3 that have been widely adopted as the benchmarks for diversified retrieval: the former contains 50 topics and the latter contains 48 topics. The title of each topic was used as a query over the document collection. 4.2 Settings We conducted a series of experiments to evaluate and compare the performances of the following different approaches to top-k retrieval: 1. LM: standard language modeling. 2. OBN-GS: obnoxious-facility-dispersion, using the greedy search algorithm. 3. DES-LS: desirable-facility-placement, using the local search al-gorithm. 4. DES-GS: desirable-facility-placement, using the greedy search al-gorithm. 5. DES-GSLS: desirable-facility-placement, using the two-stage hybrid search algorithm.
 Among them, LM is the baseline without diversification; OBN-GS and DES-LS are described in [16]; DES-GS and DE S-GSLS are proposed in this paper.
The ranking provided by standard language modeling was used as the basis by all the diversity based top-k retrieval techniques.

We computed the relevance score of a document d with respect to a query estimated from document d i with Dirichlet smoothing (the Dirichlet prior  X  = 2000), and | q | was the number of terms in the query. The scaling factor 1 / | q | was introduced to remove the influence of query length and facilitated setting the parameter  X  across queries. We then calculated the distance between d and d using Kullback-Leibler divergence. estimated from document d using the maximum likelihood estimation, and  X  M ( d ) was the unigram language model estimated from document d with Dirichlet smoothing. To better compare the retrieval techniques independently from the distance function, we used the KL divergence based similarity s ( d, d )forre-placing the Pearson X  X  correlation in MPT and for approximating the quantum interference term in QPRP.

For each query q in the test set Q , we retrieved n = 100 documents with the highest relevance scores to form the set D . Then the retrieval techniques  X  MMR, MPT, QPRP (as OBN variants), and their DES variants  X  were employed to select the top k =20documentsastheset S to be returned to users. 4.3 Evaluation Metrics of Effectiveness The effectiveness of top-k retrieval was measured at rank positions 5, 10 and 20 by three metrics: ERR-IA [3],  X  -nDCG [5] and subtopic-recall (S-recall) [14], where both ERR-IA and  X  -nDCG were following the standard configurations in the TREC-2011 Web Track (i.e. in ERR-IA all intents were given the same probability, and in  X  -nDCG,  X  was set to 0.5).
 Expected Reciprocal Rank [3]. This metric is defined as the expected re-ciprocal length of time that the user will take to find a relevant document, which overcomes implicitly discounts documents which are shown below very relevant documents. The criterion for the PRP model(Probability Ranking Principle) is the number of selected documents and R i is the probability of satisfying the user which is always set to 0.5. To measure the diversity of document result set, the ERR can be extended to ERR := n r =1 1 r t P ( t | q ) r  X  1 i =1 (1  X  R t i ) R t r . Normalized Discounted Cumulative Gain [5]. The premise of DCG is that highly relevant documents appearing lower in a search result list should be penalized as the graded relevance value is reduced logarithmically proportional to the position of the result. The discounted CG accumulated is defined as DCG := i =1 rel i / (log 2 (1 + i )) .
 where t is the subtopic of the document i ,  X  reflects the possibility of assessor error with 0 &lt; X   X  1and c is the count of subtopic t appeared.
 Subtopic Recall [14]. This metric is to measure the number of different subtopics covered as a function of rank. More precisely, consider a topic T with n A subtopics A 1 ..., A n A , and a ranking d 1 ..., d m of m documents. Let subtopics( d i ) be the set of subtopics to which d i is relevant. So the objective
Obviously, it makes the retrieval to cover as many different subtopics as pos-sible quickly. 4.4 Results The experimental results for the MMR and MPT retrieval models (under both OBN and DES formulations) are reporte d here, while the experimental results for the QPRP retrieval model are omitted due to the space limit. As observed in [16], the performance of QPRP was consistently lower than that of MPT. Effectiveness. The effectiveness of top-k retrieval was measured at rank posi-tions 5, 10 and 20 by three metrics described in the part 4.3.

Table 1 show the results on TREC-2009 and TREC-2010. For each measure, the best result is reported in bold for MMR or MPT. As expected, all approaches with diversification OBN-GS, DES-GS, DES-GS, and DES-GSLS beat the base-line without diversification LM easily.

While both using greedy search for optimization, DES-GS achieved much higher performance than OBN-GS, which confirms the main conclusion of [16]: the desirable-facility-placement formulation is indeed better than the the obnoxious-facility-dispersion formulation.
 While both optimizing the desirable-facility-placement objective function, DES-LS achieved much higher performance than DES-GS, indicating that lo-cal search is in general more effect ive than greedy search for top-k retrieval.
More importantly, it can be seen that the proposed two-stage hybrid search strategy DES-GSLS significantly outperformed all other approaches including DES-LS (which is the best performing one in [16]). This is probably because greedy search in its first stage could find a n ear-optimal initial result set (which is close to the global optimum as guaranteed by the submodularity, see Theorem 1) as the starting point for local search in its second stage, and thus combining them sequentially could greatly improv e the overall effectiveness compared to just starting from the set of k most relevant documents.
 Efficiency. Figure 1 and 2 show the average time costs of different search strate-gies for optimizing the desirable-facility-placement objective function: DES-LS, DES-GS and DES-GSLS. Not surprisingly, greedy search DES-GS is the fastest while local search DES-LS is the slowes t. More importantly, it can be seen that the proposed two-stage hybrid search strategy DES-GSLS runs much faster than pure local search DES-LS (which is the best performing one in [16]). The larger k , the bigger time gap between DES-GSLS and DES-LS. Furthermore, running DES-GSLS does not require much extra time compared to DES-GS, which sug-gests that starting from the high-quality initial result set obtained via greedy search in the first stage, local-search in the second stage of DES-GSLS can con-verge to the optimal solution within a small number of iterations. The fast speed of greedy search and the quick convergenc e of local search (as a consequence of good starting point) ma ke DES-GSLS efficient.
 Comparison of Different Similarity Measures. In the above experiments, we used the KL divergence based similarity s ( d, d 0 ) for these retrieval models. To assess the influence of different document similarity measures to our approaches, we have also done experiments to compare the KL divergence with the cosine similarity and Pearson X  X  co rrelation coefficient. Since the experimental results with the cosine similarity are very similar to results with Pearson X  X  correlation coefficient, we omit the former here. Figu re 3 shows the effectiveness scores at rank position 10 on the TREC-2009 dataset. As expected, these top-k document retrieval methods using different document similarity measures exhibit the same pattern. The four top-k document retrieval methods, in the ascending order of effectiveness, are OBN-GS, DES-GS, DES -LS, DES-GSLS. More importantly, we see that the MPT retrieval model with K L divergence generally performs the best. In this paper, we formalized the top-k retrieval problem as a submodular function maximization problem to search a subset of documents that had nice accuracy-diversity trade-off.

It would be very promising to apply the same idea of integrating greedy search and local search to solve other submodular function optimization problems in a variety of domains.
 Acknowledgments. This work was supported by the 973 project (No. 2010CB328106), NSFC grant (No. 61170085 and 61033007), Program for New Century Excellent Talents in China (No.NCET-10-0388) and Shanghai Knowledge Service Platform Project (No. ZF1213).

