 For a long time, people expect the elect ronic devices around them can have perception towards the environment.In early 2012, IDC (Internet Data Center) predicted that around 1.1 billion smart connected devices would be sold in 2012, and this number would even be doubled in 2016 1 . As one of the important ap-plications of ubiquitous computing system, localization application has drawn more and more attention. In general, these systems often need to provide infor-mation or services according to user X  X  cu rrent location. For example, a customer who is shopping in a new mall may need to know where his /her favorite shop isandhowtoreachit.Advertisementscanberecommendedtousersbasedon their locations etc..

Nowadays, outdoor localization technologies, such as GPS, have become quite popular in daily life. Recent years also wi tness the increasing demand for indoor localization. Several indoor localizatio n techniques have been developed in recent years, including Bluetooth [3], RFID [8] and WiFi [1]. Bluetooth and WiFi based approaches rely on Received Signal Stren gth (RSS) for localization, while RFID based approaches determine the location of the moving object by reading the active RFID tag. WiFi localization has many advantages, such as ubiquitous coverage, scalability, no additional hardware required, extended range, no line of sight restrictions and free measurement etc.

We can see that WiFi is a good choice for localization in indoor space. How-ever, the accuracy of basic approaches is low due to the instability of WiFi signal strength. Some projects combined WiFi with other devices such as RFID [5] [13], Bluetooth [2] [12] to improve the accuracy. Although the accuracy is improved, additional devices are required, and will cause extra burden to the setup process. Besides, very few approaches have taken advantage of continuous monitoring of users X  locations and cons idered the features of WiF i signal strength itself.
In this paper, we propose a novel approach to estimate a moving object X  X  location, by taking into consideration the instability of signal strength and the movement of objects. This method is based on the Fingerprint approach in estimating the location of a moving object.

The remainder of this paper is organized as follows. In Section 2, we survey related work in localization technologi es. In Section 3, we discuss our research methodology. In Section 4, we present and analyze our approach. Section 5 re-ports a comprehensive experimental study. Finally, we present our conclusions and provide some future research directions in Section 6. The existing work on indoor localization can be divided into two main groups: signal propagation approaches and fingerprinting approaches. 2.1 Signal Propagation (SP) Approaches Signal propagation approaches tend to as exponential attenuation models for WiFi signals and use the path loss 2 to determine location based upon distance from the Access Points (APs), whose lo cations are assumed known [10]. Al-though the signal propagation models may work well in open space, they cannot be used directly in indoor environmen t since there exists many kinds of ob-structions. In other words, we need to co nsider additional path loss caused by the physical obstructions between the APs in indoor localization and make the models much more complex than in the open area. The model proposed by Seidel and Rappaport [11] is the most popular one till now. In this model, the walls made of different materials are assigned different attenuation factors for better precision. SP models can therefore be gener alized to locations without available reference data. Furthermore, it only requires storage for the location of each AP and a simple description of its signal attenuation. However, since WiFi signals are unstable, attenuation is almost never radially symmetric. In addition, other complex factors, such as multipath, different construction materials, and various objects in the building, ever decrease the precision of the above methods.
As a conclusion, signal propagation approaches are easy to implement, but the performance is low. 2.2 Fingerprinting (FP) Approaches FP approaches ignore attenuation and instead compute likelihoods from location-specific statistics compiled from refer ence data. FP needs to create a signal strength map in off-line manner in order to start localization. When a user sub-mits a location request, his current signal strength values are compared with those in the database. The system then compute a most probable location for the user. Although FP techniques require reference data to setup, reference data is only needed to be collected once in a new building and the accuracy of FP is better than SP.

FP approach was developed by Microsoft Research RADAR [1]. In their paper, they proposed two ways to match signal strength values. One is to return the position with the nearest neighbor in signal space; the other is to return the average of the coordinates of k neighbors in signal space as an estimate. In general, it was found that WiFi signal strength at the same location changes with time, temperature and objects around it. Thus, it is hard to achieve good accuracy based on pure matching of signal strength.

Most existing methods estimate the user X  X  location only by using of the cur-rent signal strengths. Ho et. al. proposed a method to retrain the system when the user finds that the estimation location is wrong [7]. N. Hernandez et. al. proposed a WiFi localization system based on fuzzy techniques. It is only suit-able for the small-scale variations which happen when the user moves over a small distance (in the range of wavelength) [6]. Baniukevic et. al. proposed an indoor localization algorithm by combining WiFi with Bluebooth [2]. It uses WiFi signal strength to localization and adjusts the coordinates of the location using Bluetooth at reference points. The methods proposed by D. L. Lee and Q. X. Chen have considered the movement o f objects, but these methods can only identify the room where the user is in [4] [9].

Our algorithm is a type of Fingerprint approach. Existing approaches deter-mine the location according to signal s trength received directly. However, the signal strength is unstable in the indoor environments. Meanwhile, few of them consider the continuous movement of t he user. Our approach records the signal strength received at the mob ile user continuously, eliminates the locations that are unlikely to be reachable from the previous location by considering the walk speed and then determines the user X  X  location in the possible locations by match-ing the signal strength with weights (which are got by considering the instability of signal strength. To be discussed in Section 4.2). In this section, we describe the exper imental testbed and data collection. 3.1 Experimental Testbed Our experimental testbed is located at the ground floor of a 3-storey building. Figure 1 shows the layout of the floor (765.43 m 2 ). Five Access Points (APs) are deployed at different locations, denoted as AP 1 , AP 2 , AP 3 , AP 4 and AP 5 .Each AP is a Totolink N300R Router. In our tests, a mobile host is a laptop computer equipped with Intel WiFi Link 5100 AGN running Windows 7. The APs provide overlapping coverage over the entire floor together. 3.2 Data Collection Data collection phase is critical in this research methodology. We use Native WiFi API 3 to record the signal strength value s. The reference data set and the testing data sets are created as follows:  X  reference data set : We select 71 reference points, as shown in Figure 1. At  X  testing data set 1 : This data set contains the signal strength values received  X  testing data set 2 : This data set contains the signal strength values received In the first data set, each record is described as ( x , y , represent the location, and the last two sets, the form of the each record tuple is ( t , x , y , represents the timestamp to record the signal strength, and the definition of the rest attributes are as same as the above definition. In this section, we describe our algorithm in detail. Ideally, we expect the signal strength of an AP remains almost stable with time going on. Figure 2 shows the signal strength levels at different distances. We can find that almost all of the signal strength values received 1m awa y from the AP are the same, while the stand deviation of the signal strengt h values received 10m away from the AP is around 3%. When the distance reaches 35m, the stand deviation can be around 6%. From this, we conclude that the signal strength keeps fluctuating all the time and the ones with higher value is more stable. We also test the stability of signal strengths received by a moving object, as shown in Figure 2. In this figure, a user walks from AP5 to AP1 slowly, we can observe that the signal strengths would have greater fluctuation when the user is moving. How to use these unstable signal strengths to localization is challenging to us.
Figure 2 and 3 show that the signal strength would reflect distance more accurately if the fluctuation of the signal strength could be smoothed. Besides, in Figure 2, it X  X  easy to see that stronger signal strength are more stable. And the degree of fluctuation of the signal strength changes with time. So we can be convinced that the signal strength with d ifferent values and the signal strength received at different time should have different credibility.
 Due to these particular features, we propose an approach, called FIMO (FInd Me Out), for indoor localization. FIMO continuously records signal strength values from each AP at the user X  X  location at fixed intervals when the user is walking around. When the user submits a location request, FIMO will pro-cess the data and then determine the location of the user using Algorithm 1. FIMO backtracks the signa l strengths received by the user which are recorded in the database and put them into ssArray (Line 2). It smoothes the signal strength values in ssArray chronologically and puts the Smoothed Values into smoothArray (Line 3), as discussed in Section 4.1. After calculating the weight of every signal strength value using the Original Value (The signal strength values that haven X  X  been smoothed) (Line 5), a s discussed in Section 4.2, FIMO returns the location to the user by matching the ref erence points (Line 7-14, Section 4.4) in the possible range (Line 6, Section 4.3).
 Algorithm 1. FInd Me Out (FIMO) 4.1 Smoothing the Signal Strength Since the signal strength is unstable, we smooth the signal strength values be-fore matching them. As shown in Figure 3, all of values have different degree of fluctuation. We need to smooth the fluctuation while keeping the trend of signal strength. A moving average 4 is commonly used with time series data to smooth short-term fluctuations and highlight lo nger-term trends or cycles. So we calcu-late the moving averages of all values to smooth their fluctuations. Figure 4(a) shows that this method is effective.

However, there is a special situation when the fluctuation is not continuous, just as shown in Figure 4(b) . If we just calculate the moving averages, the smoothed values may be inaccurate. Under the situation, we detect the outliers and deal with them through the following process before calculating the moving averages of all values. 1. Detecting the outliers: The system scans the signal strength values ac-2. Dealing with the outliers. The system replaces the outlier b with the
Figure 5 shows the signal strengths after smoothing. Compared with Figure 3 which is before smoothing, it seems that the quality of the data has improved obviously after smoothing. We call the values after smoothing the Smoothed Value and the values having not been smoothed the Original Value. 4.2 Calculating the Weights Figure 2 shows stronger signal strength tends to be more stable. To a certain extend, stronger signal strength has higher credibility. There are a lot of moving objects in indoor spaces, and the number and behaviors of them are constantly changing. These will cause the fluctuation of signal strength. Significant fluc-tuation will have material impact upon the credibility of the signal strength. Therefore, even at the same location, diffe rent signal strength has different cred-ibility, and we should give different weights to different signal strength when matching the signal strength in the database. Considering the two factors af-fecting the credibility of signal strength mentioned above, we propose a method to calculate the weights. The rule is to give the signal strength with the value which is higher and more stable higher weight. We can use the Original Value ( o )of AP i  X  X  signal strength to represent the credibility of AP i  X  X  signal strength.
Then it comes to the question of how to measure the stability of signal strength. It is generally known that the sample standard deviation shows how much variation from the average (or e xpected value). A low sample standard deviation indicates that the data points tend to be very close to the mean, vice verse . However, the average value is not the expected value because the signal strength varies with distance, so we cannot simply use the sample standard de-viation here. Although the trend of the s ignal strength sho uld be described as curve function, we just focus on the stability of signal strength in a short time (such short time is deemed as a time window), and then it can be seen as linear. We regard the time period containing four continuous signal strength values as a time window in our experiments, and the length of the time window can be changed. If the length is too long, the items could not be fit with the linear function. And if it is too short, the linear function fitting out could not rea-sonably reflect the trend of the changes of signal strength. The method of least squares 5 is a standard approach to the approximate solution of overdetermined systems. Least Squares means that the overall solution minimizes the sum of the squares of the errors made in the results of every single equation. So we use Least Squares to find out the linear function which could describe the distribution of signal strength in a short time. Then we can get the expected signal strength value ( e i,j ) received from AP i at time t j with the linear function.
Using the expected signal strength values, the sample standard deviation of several signal strength values (  X  i ) in the same period can be calculated with Equation (1) below. where W indicates the length of the time window, and o i,j is the Original Value of AP i at time t j .

To sum up, the weight of every signal strength value of AP i would be w i coming from Equation (2). 4.3 Considering the Walk Speed The points on the circle centered at AP would have the same signal strength in free space. And the user might receive the s ame signal strength values at different locations. Therefore, the user X  X  position might be located at a location which is far away from the actual one. In order to avoid this situation, we should consider the behavior of the user. In the indoor space, walking is the most common way of moving and the speed will has an upper limit. Thus, we could use the speed of the user and the last location of the user recorded to limit the possible candidate locations.

Specific studies have found pedestrian walking speed ranging from 1.25 m/s to 1.32 m/s for older individuals to 1.48 m/s to 1.51 m/s for younger individuals 6 . The highest normal pedestrian walk speed is about 1.5 m/s. Of course, with speed testing equipment, the accuracy of the speed can be improved. Here we use 1.5 m/s as the pedestrian walk speed to limit the candidates. We take the last location of the user as the center of circle and the maximum distance the user could walk from the last location as radius. The locations in the circle are the candidates. But the last location of the user recorded in database might not be the actual location which the user was, so we should extend the range of candidate locations prope rly because each record interval is the same. We use 2 times of the maximum distance as the radius of circle to limit the candidate locations. The process of calculation can be described as r =2 vT ,where r is the radius of the circle containing candidate locations, v is the pedestrian walk speed (here we use 1.5m/s) and T is the time from the last record to this record.
The reference points located in the circle with the radius of r, which is centered at the last location of the user are the candidate locations of the user X  X  current location. Thus, the location of the user must be one of the candidate locations. 4.4 Determining the Location Similar with the base Fingerprint approach, we use the reference point with the most similar signal strength values as the user X  X  location. We use the Equation (3) to compute the degree of similarity. where sim c is the similarity between the signa l strength values received by the user and the signal strength values of the c th reference point which is a candidate location, n is the number of APs which can be detected by the user X  X  device, w i is the weight of AP i  X  X  signal strength value, s i is the Smooth Value of AP i  X  X  signal strength value and r c,i is the AP i  X  X  signal strength value of the c th reference point.

The reference point with the signal strength closest to that received by the user ( sim c is the minimum) would be returned to the user as the estimated location . We have conducted series of experiments on the testbed described in Section 3.1. The testing data sets are also introduced in Section 3.2. We use four different approaches to locate the user. Two approaches are ours, one is FIMO introduced in Section 4, the other is FIMO without considering the walk speed. We use the Fingerprint using the nearest neighbor (Fingerprint(NN))and the Fingerprint using the multiple nearest neighbors (Fingerprint(kNN)) introduced in Section 2.2 as comparisons.

Figure 6 and 7 show the results of localization. Here, x -axis represents the ID of querying requirement, and the y -axis represents the error. In Figure 6(b)-(c) and 7(b)(c), we can observe that FIMO is much better than the Fingerprint(NN) and Fingerprint(kNN). In FIMO, considering the walk speed is the only step that might requires other device or estimation. In Figure 6(a) and 7(a), we can see the FIMO without considering the walk speed of the user already has good accuracy, but the FIMO considered the walk speed could generate better results. Table 1 shows the sums of squares among the groups 7 (SSA) in Figure 6 and 7. The statistics suggests that the accuracy of FIMO has improved significantly com-paring with the Fingerprint(NN) and Fingerprint(kNN). The FIMO is proved to have the best accuracy with respect to all t he parameters (i.e. the average,medium and maximum values,as shown in Table 2). The errors in distances of all query points are less than 7m, and the points erred within 3m are more than 70%. In this paper, we presented FIMO, a WiFi-based localization method. In this approach, the system records the signal strength values the user receives while he is moving, and determines the user X  X  location by backtracking the signal strength values and the user X  X  movement . Experimental reports show that the performance is significantly improved over existing methods.

In this paper, our work merely applies t o specific environmental. We are con-sidering to expand the application to more complicated situations, such as mul-tiple floors or models of access points e tc. Since FIMO is ba sed on fingerprint approach, a lot of data is required to be collected for reference points in ad-vance. If the signal strength values of som e reference points could be estimated, the setup would be less time consuming. The curve fitting might be a practicable method. We believe that it is a direction worth exploring in the future. Acknowledgments. The research of Cheqing Jin is supported by the National Basic Research Program of China (Grant No. 2012CB316200), the Key Program of National Natural Science Foundati on of China (Grant No. 60933001), National Natural Science Foundation of China ( Grant No.61070052). The research of Aoy-ing Zhou is supported by National Science Foundation for Distinguished Young Scholars (Grant No. 60925008), and Natura l Science Foundation of China (No. 61021004).

