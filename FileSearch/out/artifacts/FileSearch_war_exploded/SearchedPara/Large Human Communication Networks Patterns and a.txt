 Given a real, and weighted person-to-person network which changes over time, what can we say about the cliques that it contains? Do the incidents of communication, or weights on the edges of a clique follow any pattern? Real, and in-person social networks have many more triangles than chance would dictate. As it turns out, there are many more cliques than one would expect, in surprising patterns.

In this paper, we study massive real-world social networks formed by direct contacts among people through various per-sonal communication services, such as Phone-Call, SMS, IM etc. The contributions are the following: (a) we discover sur-prising patterns with the cliques, (b) we report power-laws of the weights on the edges of cliques, (c) our real networks follow these patterns such that we can trust them to spot outliers and finally, (d) we propose the first utility-driven graph generator for weighted time-evolving networks, which match the observed patterns. Our study focused on three large datasets, each of which is a different type of commu-nication service, with over one million records, and spans several months of activity.
 Categories and Subject Descriptors: H.2.8 [Database Management]:Database Applications X  Data Mining General Terms: Experimentation, Measurement Keywords: Social networks, Graph generators, Cliques Questions have emerged from research on social networks. What patterns should we expect in a network of human-to-human interactions? How can we spot anomalies (e.g., tele-marketers, spammers)? What will be the net effect if we lower the price of each phone-call?
Social networks, and graphs in general, have had an in-crease of interest recently. The related applications are nu-merous and almost everywhere in people X  X  modern life. On-line social networks, like Facebook ( www.facebook.com )and LinkedIn ( www.linkedin.com ), mimic publicly the telecom-new). The major advantage over older generators is that it can answer what if scenarios. For example, if the connection price of each phone-call goes up, will this decrease the aver-age number of friends/edges? What about a change in the price-per-minute? What if there is a flat rate?
We examine multiple large anonymized human communi-cation networks, where we have the hash-codes of the source, and the destination, as well as the time-stamp of the con-tact (Phone-Call, IM, or SMS -the specific service is also anonymized). For ease of presentation, we will refer to these contacts as Phone-Calls generally. The analysis of human communication networks is important because various per-sonal communication services and applications are ubiqui-tous. Furthermore, unlike many artificial social networks, such as the scientific collaboration network which emerges as a one-mode projection of the bipartite graph between authors and papers, the massive anonymized human com-munication networks are formed from the real-time direct contact events of people. They can fully capture the under-lying realistic social structures, and lay a solid foundation for our upcoming work.

The paper is organized as follows. Section 2 reviews re-lated work. Section 3 proposes background materials. Sec-tion 4 presents our observed patterns. Section 5 describes the utility-driven model. Section 6 gives the conclusion.
The network formation problem has been studied by many researchers from the fields of statistical physics, economics, game theory, combinatorial opt imization and computer sci-ence. A major class of network models extend from the clas-sic Erd  X  o s-R  X  e nyi(ER) random graph model [14] where edges are randomly placed among nodes. Many famous graph generators belong to this class, including the small-world model [36], the preferential-attachment model [5], the forest fire model [21], as well as the recent  X  X utterfly X  model [22]. [See [3] and [8] for a detailed review]
There is another whole class of network models, often re-ferred to as games of network formation , mainly from the fields of economics and game theory. Here, linking between two nodes is regarded as a strategic activity and the net-work structure can arise from the collective interactions be-tween the nodes. Laoutaris [19] proposes a network forma-tion game, where links have costs and lengths, and players have preference weights on the other players, to study the properties of pure Nash equilibria [26] in different settings. Albers [2], Demaine [11], and Fabrikant [16] study a simi-lar game where players do not have fixed budgets and the cost function is defined in terms of the sum of the number of edges. Even-Dar [15] proposes a network creation game where nodes act as buyers and sellers such that the resulting graphs are bipartite.

Moreover, Onnela [28][29] and Nanavati [25] have also used mobile phone-call data to examine and characterize the social interactions of cell-phone users. Seshadri [31] fur-ther shows that the degree distribution of large scale mo-bile phone-call networks can be better fitted using the lesser known but more suitable DPLN distribution[24][30], which is close to yet more precise than the power-law distribution.
In summary, our work differs from earlier work as fol-lows: most research work on network formation games is only interested in the effect of specific linking strategies on the properties of the system equilibria. By contrast, our Figure 2: Known properties of communication net-works. (a) is the pdf of the number of partners in calls in the same graphs. Both are in logarithmic scales, and follow a DPLN distribution. The rest networks behave similarly. erage number of maximal cliques, which seems to remain rather stable over time so that we trust them to further detect outliers and spot anomalies. The second is Clique Participation Law (CPL), which gives the distribution of the number of maximal cliques that each node participates in. Finally, the third comes Triangle Weight Law (TWL), de-scribing how the weights are distributed on the edges of triangles, based on which we could further make predictions about the missing values of the edge weights in time-evolving weighted networks.
The datasets analyzed are made of a large collection of records from several human com munication services includ-ing voice, data, IM, SMS etc. Each record is represented as atriple &lt;ID i ,ID j ,Time &gt; ,where &lt;ID i &gt; and &lt;ID j &gt; are generally referred to as the cal ler and cal lee .During a particular time period, there can be multiple times for a pair of people to communicate with each other, and the accumulated number of communication times between ID i and ID j is defined as the edge weight between node i and j . We have the weighted graphs extracted from the records of three types of services ( S 1, S 2and S 3), referred to as G S 1 , G S 2 ,and G S 3 respectively. Each type of service has on aver-age about 1 million records, which were collected by different geographic locations. Apart from this spatial diversity and the service type variety, we also incorporate temporal diver-sity by collecting data for each type of service during five consecutive time periods represented from T 1to T 5, so G S 1 T 1 is the graph of service type S 1 in time period T 1, and G S 2 T 5 is the graph of service type S 2 in time period T 5etc.
Notice that we only focus on the link between the caller and callee. It is important to know that our work is only an aggregate statistical analysis, and therefore, we do not study any individual X  X  behavior from any specific type of communication service. More importantly, any information that could identify users is stripped to access. We only use the encrypted user id in this study, and restrict our inter-est only in the statistical findings that are held within the networks.
We first consider the total number of unique callers and callees which are often referred to as the partners associated G over time. The detected outliers are marked by red circles. (a) Centered with vertex v y (b) Centered with vertex v z Figure 5: Detected typical outliers. Both v y and v z (in G S 1 T 3 and G S 1 T 5 from Figure 4) have too many unrelated partners, resulting in a star-like subgraph. exponent takes values in the range [1 . 84 , 1 . 88], [2 . 04 , 2 . 21] and [1 . 41 , 1 . 58] for G S 1 , G S 2 ,and G S 3 , which seems to be stable over time.
 The direct application of CDPL is to spot outliers. In Figure 4, all of the detected anomalies are marked by red circles. We can see that these points present a clear pattern which does not conform to the established normal behavior. In other words, for these users the actual number of the maximal cliques that they belong to is significantly distant from the one that they should have according the number of their friends.

It is also interesting to notice that some outliers are sta-while others are more casual and bursty, such as node v z in egocentric subgraphs centered with node v y and v z ,which are composed of the connections among their neighbors in Figure 6: Clique-Participation Law. PDF of #Max-imal Cliques in G S 1 T 1  X  G S 3 T 1 . The rest graphs behave similarly.
 Table 1: Power-Law exponents of CPL in G S 1  X  G S 3 from T 1 to T 5 . Notice the stability.

According to the above discussion, for most people in real world social networks, they are often involved in a small number of maximal cliques (or social circles). Only a few of them are really  X  X ocial butterflies X  that can actively span many social circles simultaneously. In Figure 6, we report the results from G S 1  X  G S 3 only in T 1 for brevity, because inTable1weobservethat CPL is rather stable over time, leading to similar plots in the rest.

Actually, the CPL pattern could be potentially applied to help the operators to make better designed family plans. Because we have a model of the distribution of user behav-ior to form close-knit groups, we can propose better pricing strategies that charge users differently according to the size of their social circles. For example, in most cases people only belong to one or two cliques, which may be formed by their families or best friends. We can design specific billing plans which are favorable to the communications among members of the same clique who are also the customers of the same operator. Even if our friends are the customers of other op-erators, we may still like to invite them to join us, because we know that it will be good for all of us. As a result, this could implicitly improve the loyalty of the current users, and may further help to increase the rate at which new customers sign up the plans. Moreover, we can also reward a few loyal users who span multiple social groups, because they might help to achieve a quick market promotion by introducing new products and services to their friends.
According to the clique definition, each node in a clique has connections with all the other nodes. Although it is very intuitive that all these nodes are equivalent in topology, will this also mean that they could have equally close rela-tionships? In our communication networks, the edge weight w ij gives the total number of contact times between i and j , which is an important indicator to show how intimately they could relate to each other. Since that triangle is the base case of a clique, given any triangle { i, j, k } , will w ij , w ik ,and w jk hold approximately equal values because of the structure equivalence between i , j ,and k ? Although thisintuitiveconjectureseemstomakesense,wehavemade Figure 8: Persistence of Triangle Weight Law. Ex-ponent  X  ,  X  ,and  X  (red, blue, green) in G S 1  X  G S 3 remain about constant from T 1 to T 5 . lem, which not only is important to fill and complete the missing values, but also is useful for discovering anomalous links, because if the actual value of w 23 is significantly dif-ferent from the predicted value, it would be highly unusual.
Based on the above discussion, TWL canhelpustosolve the weight prediction problem. Formally, given e ij  X  E ( G ), let denote the set of all the edges (excluding e ij itself) of the triangles that e ij belongs to.  X  e k  X  , w ( e k ) denotes the weight of e k . The minimum and maximum values of w ( e k ) are represented as min and max accordingly. On one hand, if w ij &lt; min or w ij &gt; max ,thenumerical relationship between w ij and the weights on the other two edges is determined, so we can use either equation (4) and (5) or (3) and (4) to estimate w ij directly. On the other, if w ij  X  [ min , max ], w ij might be the minimum in one triangle, while might be the maximum in another triangle. Thus, for  X  e k  X  , we define  X  ( e ij ,e k ) ( x )torepresentone of the three equations (3)  X  (5) based on the particular nu-merical relationship that e ij and e k could hold. The return the possible value x of w ij . Here, we assume that all edge weights are positive integers. Let w min be the minimum es-timated value of w ij when w ij &lt; min ,and w max be the maximum estimated value of w ij when w ij &gt; max .Then the optimal value of w ij is given as: where x  X  [ w min ,w max ]. We evaluate this approach in G S 1  X  G S 3 by comparing  X  w ij with w ij for each edge in T 1, T 3and T 5. Due to the persistence of TWL ,weset  X  =1 . 5,  X  =2 . 2, and  X  =1 . 2for G S 1 ;  X  =1 . 3,  X  =1 . 7, and  X  =1 . 4for G S 2 ;  X  =1 . 4,  X  =2 . 1, and  X  =1 . 3for G S 3 .Let = |  X  w ij  X  w ij | denote the prediction error. The the aver-age prediction accuracy of = 0 (the exact prediction) and = 1 is around 0.21 and 0.32 accordingly. One problem of this simple method is that it can not predict w ij ,iftheedge e ij does not belong to any triangle. To solve this problem, and further improve the prediction accuracy is an area of future work.
The next goal is to design a generative model that mim-ics people X  X  natural communication behaviors. The guiding principle is that such a model should be utility driven ,asop-posed to earlier models (preferential attachment [5], forest-fire [21], butterfly [22], etc.) which are mainly randomness-guided generators. so that we can simulate the mixture of different ages in a real network. Once an old agent leaves, all his links will be removed, and a new agent replaces his position with the friendliness and P l initialized to new values.

Utility-Driven Phone-Calls and Saturation . An agent X  X  payoffs are the difference between the benefits and costs. The benefits are defined based on the following consider-ations. Two open agents usually can benefit emotionally from a happy conversation. When an open agent meets a shy agent, they may benefit less from their conversation. Finally, two shy agents might gain little in the end. In addition, after two agents have been talking for a while, they may gradually lose interest, and gain less emotionally as time goes by. For agent a i and a j , they can achieve
F i  X  F j  X   X  m  X  1 emotional dollars per minute from a con-versation, where  X   X  (0 , 1) is called the saturation factor to represent the loss of interest, and m is the number of minutes for which they have been talking.

For an m -minutes long conversation, the total benefits are defined as benef its = F i  X  F j  X  (1 +  X  +  X  2 + ... +  X  m  X  1 ) The costs are the expenses of phone-calls, which include C ini and C pm . C ini is the cost to initiate a phone-call, and C pm is the per-minute fee. The total costs for an m -minutes call will be C ini + m  X  C pm , so our utility function is defined as and each agent starts and maintains a conversation until the payoffs by equation 8 reach the maximum value or the agent has used all his money.

Expected Payoffs on Strangers . At first, each agent is given an initial capital which is enough to make one call only. Since none of the agents have ever talked before, for agent a i , he first uniformly calls a stranger a j , and keeps the conversation until either the payoffs by equation 8 begin to decrease or he spends all his money in the call ( a i .capital &lt; = 0). When the call is finished, a i and a j will achieve the payoffs P j from the conversation. A link is built between a i and a j with weight 1, and a i will remember the payoffs P j earned by talking to a j .Because a j was first a stranger to a before they met, a i also updates his expected payoffs from talking to strangers as : where S is the total number of times talking to strangers, and P i is the payoffs achieved at each time. S exp is initialized to 0 in the beginning. In each round of the game, agent a i is only allowed to call a j for one time. If a i still has some money left (note that the payoffs earned in the current round can only be used in the next round), he will continue to interact with other strangers.

Recommendations : Once agent a i has some partners, he will first prioritize his partners according to the remembered payoffs, and talk to them respectively. If the payoffs of the currently chosen partner is less than a i  X  X  expected payoffs from strangers ( S exp  X  0), a i will stop talking to partners and choose to call strangers again. He first asks his partners for recommendations. Every partner will tell a i how much money he actually earned by talking to his own partners (a)PDF of #Partners (b)PDF of #Calls (c) SPL (d) CPL (e) CDPL (f) TWL PaC gives skewed distributions like the real ones. Figure 11: PDF of Connected-Component Size. The sizes of the connected-components in G S 1 T 1 (the left) and in the synthetic graph (the right) follow the power-law distribution. a , F i and P l are randomly chosen from 0 to 1. Figure 10 shows the results of these checkpoints. The top row is the actual graph G S 1 T 1 , and the bottom row is a synthetic graph, generated by our PaC model. Figure 10(a)  X  (c) show the old patterns, and Figure 10(d)  X  (f) illustrate the new ones. Moreover, in Figure 11, we see that except for the giant con-nected component which is an isolated point distant from the rest, the size distribution of the connected-components con-forms to a power-law. The exponents take values within the range observed in real world networks with a least-square fit of R 2 &gt; 0 . 95. In all cases, notice that PaC gives skewed distributions that are remarkably close to the real ones.
From earlier research [24][30], we understand how heavy-tailed distributions such as power-law, lognormal and DPLN could arise for the degree distribution and the node weight distribution. According to Mitzenmacher [24], lognormal distributions can be naturally generated by multiplicative processes . For a biological example, at each step j ,anor-ganism may grow or shrink by a certain percentage accord-ing to a random variable F j .If X j denotes the current size of the organism, X j = F j X j  X  1 where F j is independent of X  X  1 .Considerln X j =ln X 0 + j k =1 ln F k if F k , 1  X  k  X  j , are independent lognormal distributions, then X j is always lognormal. If F k are not lognormal, but are independent geometric lifetime. Therefor e, although we do not explic-itly assume any prior distribution about the ratio (the File Model in [24] explicitly assumes a lognormal distribution for F ), the PaC model can still mimic the DPLN degree distri-bution and the node weight distribution which are identical with the real social networks. By comparing with the ex-isting graph generators, we see that preferential-attachment guided models usually ignore the weight information, and only generate the giant connected component [22]. The but-terfly [22] model can reproduce all the connected compo-nents, however it does not include the weight either. In contrast, our model is able to reproduce the networks that have not only the patterns holding in un-weighted networks, but also the patterns followed by the weighted networks.
The main contributions are: (a) we found surprising pat-terns that cliques follow, like the CDPL and CPL ;(b)weob-served the weights on the edges of triangles followed power-laws TWL ; (c) the discovered patte rns are stable and per-sistent in several, diverse, real social networks, and finally (d) we propose the first utility-driven graph generator for weighted time-evolving networks.

The (anonymized) datasets had over one million records, spanning several months, and over various (anonymized) ser-vices. Thanks to our new patterns, we discovered several outliers. Closer inspection showed that they indeed had very suspicious behaviors. Further investigation was impossible, due to privacy issues. Moreover, our PaC model stands out from the rest, because (a) it does not use randomness (using a utility function instead) (b) it only uses local information (c) it still generates graphs that follow all the old and new patterns. Based on its utility function of PaC ,wecanex-plore what is the impact of, say, lower prices, on the shape of the network, as well as several other  X  X hat if X  questions.
Acknowledgments. This material is based upon work supported by the National Science Foundation of China un-der Grant No.60402011, the National Key Technology R&amp;D Program of China under Grant No .2006BAH03B05, the IBM China Research Laboratory Project No.JTP200806014-3, the National Science Foundati on under Gra nt No. IIS-0705359, the iCAST project sponsored by the National Science Coun-cil, Taiwan, unde r Grant No.NSC97-2745-P-001-001, and the Ministry of Economic Affairs, Taiwan, under Grant No.97-EC-17-A-02-R7-0823. Any opi nions, findings, and conclu-sions or recommendations expressed in this material are those of the authors and do not necessarily reflect the views of the National Science Foundation, or other funding parties. We would like to thank Charlotte Yano and Mary McGlo-hon for valuable comments, and Qi Ye for preprocessing the datasets.
