 The problem of ethnicity identification from names has a variety of important applications, including biomedical re-search, demographic studies, and marketing. Here we re-port on the development of an ethnicity classifier where all training data is extracted from public, non-confidential (and hence somewhat unreliable) sources. Our classifier uses hidden Markov models (HMMs) and decision trees to clas-sify names into 13 cultural/ethnic groups with individual group accuracy comparable accuracy to earlier binary (e.g., Spanish/non-Spanish) classifiers. We have applied this clas-sifier to over 20 million names from a large-scale news cor-pus, identifying interesting temporal and spatial trends on the representation of particular cultural/ethnic groups. I.2.1 [ Applications and Expert Systems ]: Cartography Algorithms, Experimentation ethnicity detection, name classification, news analysis, social science research
Names are important, and can convey considerable infor-mation about people, places, and things. For example, we believe most readers have little difficulty proposing likely  X 
Corresponding author. skiena@cs.sunysb.edu. Partially supported by NSF Grants EIA-0325123 and DBI-0444815. cultural/ethnic origins for people with names such as An-gelo Fasciano , Mohammad Al-Sabah , Luis Hernandez , Zvi Shamir , Dmitry Medvedev , Jiang Chen , and Akshay Ghandi .
Here we describe our classifier for deducing the likely cul-tural/ethnic origins of arbitrary names. This work is part of our effort to develop the Lydia news/blog analysis sys-tem [14] into a resource for the social and political sci-ence research. Interactions between distinct ethnic/cultural groups comprise one of the dominant social forces shaping our world. Accurately quantifying the nature of these in-teractions provides essential data for social science research, in fields as diverse as history, political science, and interna-tional relations.
 In this paper, we describe the methods underlying our Lydia name ethnicity classifier, as well as interesting analy-sis resulting from applying our classifier to large-scale news data. Table 1 demonstrates how our classifier deals appro-priately with the names of twenty world leaders. We are by no means the first to build such a classifier; see our discus-sion of prior work in Section 2.

We do not claim our classifier is more accurate than others described in the literature because direct comparisons could not be conducted. However, informal comparisons suggest our 13 ethnicity classifier is quite competitive with simple binary (Spanish/non-Spanish) classifiers reported elsewhere. That said, we believe our classifier is interesting primarily because of its dependence on open data sources, methods, and because of our unique application to news analysis: Table 2.
Our paper is organized as follows. We discuss related work in name ethnicity analysis in Section 2. Methods for extracting reference data from Wikipedia are discussed in Section 3. The HMM and decision tree techniques under-lying our classifier are presented in Section 4. Performance results on the accuracy of our classifier and the impact of various design decisions is reported in Section 5. Interesting applications of our analysis to large-scale news feeds follow in Section 6. Finally, our conclusions and future work are presented in Section 7.
The problem of ethnicity identification from names has a variety of significant applications. Perhaps the most impor-tant application is to biomedical research [6, 4, 7, 8, 20]. The notion of race or ethnicity can serve as a surrogate re-flecting the genetic or dietary differences among individuals. Experimental design criteria may block direct requests for ethnic-self identification, or the need for such data may not be realized until too late in the course of a study. Other ap-plications include population demographic studies [12, 16], including predicting overall identity status [1] and measur-ing the eradication of discrimination [17]. Finally, there are business applications in targeting product marketing efforts towards particular groups of individuals. Mateos [16] pro-vides an excellent review of work in the ethnicity detection.
An important problem faced by any such classification program is identifying a meaningful taxonomy of linguistically-distinct cultural/ethnic groups, a task requiring extensive knowledge of history, linguistics, and demographics. Here we have been most impressed by the work of Mateos, Web-ber, and Longley [17], who propose a taxonomy into Cul-tural, Ethnic and Linguistic (CEL) types. Their taxonomy consists of 185 CEL types which are grouped into 15 broad CEL groups. These groups correspond closely to the ethnic groupings recognized by our classifier.

Many previous efforts in ethnicity classification focuses on distinguishing members of a single CEL group. Binary clas-sifiers can be very useful to particular domains. The Gener-ally Useful Ethnicity Search System (GUESS) uses Spanish names to determine Hispanic ethnicity [5]. Coldman, Braun, and Gallagher perform binary classification of names as ei-ther Chinese or non-Chinese [6]. SANGRA ( South Asian Names and Group Recognition Algorithm ) is one of several programs to identify South Asians by names, which are an-alyzed in [10, 11]. However, for the purposes of our analysis, we require a multi-faceted classification system, capable of discriminating among a relatively large number of ethnic groups. As noted by Mateos [16], this type of classification engine has seen relatively little attention.

The primary method used in ethnicity classification is comparison to known surname lists. Deriving accurate name lists for use in a classification engine requires sub-stantial efforts, however. Lauderdale and Kestenbaum de-scribe the development of surname lists for six Asian ethnic-ity groups [12]. Coldman et al. [6] use a simple probabilistic method based on full name lists which is somewhat simi-lar to our system. This system could not, however, classify names which did not appear in the input name lists. Fiscella and Fremon [7] describe the combination of geocodal infor-mation and surname analysis to predict the ethnicity. They state that better results are achieved by combining both the geocodal and surname information. In subsequent sections, we will describe methods for the compilation of our name lists, the classification methods which utilize them, and the accuracy of our resulting system.
Wikipedia is an open repository containing much of the world X  X  general knowledge, which makes it an attractive fo-cus for projects on information extraction. In this case, we needed to extract fairly accurate lists of names labeled by ethnicity, but more generally we would like to produce lists of entities corresponding to members of any natural group [19].

We sought to exploit Wikipedia X  X  extensive network of categories under which articles are classified. For example, basketball player  X  X teve Nash X  is classified as member of the following categories: From these categories, we might hope to learn that he is a basketball player and possesses a name of Welsh ancestry. At the time of this study, Wikipedia X  X  roughly three million articles were classified into exactly 293,119 categories with 610,032 edges/relationships defined between them, making this a valuable potential source of ontologies.

Our task is complicated by several factors. First, the cat-egory names are not systematically constructed, so it is dif-ficult to identify the root category associated with a par-ticular group. Second, membership in interesting categories (say  X  X asketball player X ) is often not explicitly defined but implied by category inclusion. Third, the network of cat-egories is a directed graph with cycles, not a hierarchy or a DAG, rendering it ill-defined to expand categories by in-clusion. Finally, we note that irregularities result because subcategories are not explicitly defined by  X  X s a X  relation-ships. For example,  X  X erial Killer Movies X  is a sub-child of the category  X  X erial Killers X , which should be semantically restricted to people.

We employed the following procedure to build our refer-ence lists:
Table 2 gives the number of names in each ethnic groups used for training and description of corresponding Wiki-categories.
Our classifier consists of two major components: (1) a set of non-deterministic automata which map name strings to ethnic categorizations, and (2) a decision tree reflecting the historical/linguistic origins and coarse groupings of each eth-nic group (see Figure 1). Starting at the root, the automaton is applied at intermediate nodes in the tree to decide which child to branch to. The identity of the leaf node on this root-to-leaf path through the decision tree defines the classified ethnicity of the given name.
 Figure 1: Hierarchical categorization of CEL groups. We classify names at each level of the tree, resolving identity at the leaves.
Our classification engine consists of a series of sub-classifiers operating at each level of the CEL group hierarchy. Each classifier is a Hidden Markov Model (HMM) automaton, with states corresponding to the position within a name, and observations corresponding to substrings from the name. We divide each full name into three parts: first-name, middle-name and last-name. When only two words exists in the full name, we consider only the first-name and last-name. When only one word exists, we declare it to be the last name.
For a classifier discriminating between e ethnicities, the states of the classifier constitute a directed acyclic graph with e subgraphs, each corresponding to a single ethnicity. Each of these paths has edges with observations consisting of strings of letters determined by the strings X  relative fre-quency within the training data for that ethnic group.
Observations along edges consist both of full name-parts (e.g., X  X ohn X ) and substrings thereof (e.g., X  X o X  X r X  X n X ). The set of these observations, as well as the transition probabil-ities along these edges, determine the likelihood of a partic-ular name being generated by the portion of the automa-ton corresponding to each ethnicity. Transition probabili-ties along multiple possible paths were manually determined, and biased towards paths which consume larger numbers of letters. That is, the system will prefer paths which corre-spond to names which appear in the input data over those which it assembles from prefixes and suffixes, all other things being equal. Figure 2 shows diagrammatically the construc-tion of an individual automaton.

The dark-gray states in Figure 2 correspond to matching a name-part which occurs in the training data set. The set of observations and observation probabilities on the transitions to this state are made up of full name-parts and their associ-ated frequency within this ethnicity in the training dataset. The initial white state corresponds to the case in which the full name-part does not occur within this ethnicity in the training dataset. The transition probabilities to these two states are biased such that there is a large preference for paths which consume full names.

The remaining states correspond to matching k -mer com-ponents ( k length substrings) of the name-part. Here, en-tering each light-gray state corresponds to matching an in-dividual k -mer, while entering each white state corresponds to a failure to match a k -mer. Observations and observa-tion probabilities on each light-gray state correspond to the relative frequency of each k -mer within the training data for the ethnicity. Observation probabilities on each white state are evenly split among all possible k -mer observations. Transition probabilities were chosen to bias heavily towards Figure 2: Top-level automaton of the ethnicity clas-sifier. Its three stages match the first-name, middle-name and last-name respectively for the Asian , Greater African and Greater European CEL groups. matching each k -mer through a light-gray state, if possi-ble, and thusly penalize the use of the non-matching white states.
 The observation probability f ( N ) E for the full name-part N match (dark-gray state) in ethnicity E is calculated as:
The observation probability for the k -mer match s (light-gray state) in ethnicity E is calculated similarly. The prob-ability distribution on each of these k -mers is determined not only by the distribution of k -mers in the ethnic names, but also on the k -mers X  positions within these names. That is, the appearance of certain k -mers are strongly biased to-wards the beginning or end of names, and this is reflected in the observation probabilities of the k -mer match states.
The automaton is also constructed to allow a path which  X  X lends X  ethnicities. That is, the given name and the sur-name of a name may indicate two separate ethnicities. The automaton allows this by allowing a path to move between ethnicities between first/middle/last name boundaries, at some cost. Parameter settings allow us to vary the relative significance of the first, middle, and last names in the fi-nal analysis. A particular name is assigned the label of the ethnic group associated with the final state with the largest probability.
A particular significant set of k -mers for ethnicity classi-fication are associated with the prefix/suffix strings of both String Type Ethnicity Freq Score S Singh full IndianSubContinent 225 0.93 Yoshi prefix Japanese 165 0.96 Yama prefix Japanese 145 0.91 Naka prefix Japanese 140 0.94 mura suffix Japanese 178 0.97 ensen suffix Nordic 102 0.98 Table 3: Most significant prefix/suffix rules for name ethnicity classification. family and given names. The prefix  X  X ac X  suggests Scottish or Irish ancestry (British CEL group, in our categorization) far more strongly than the 3-mer in general. Moreover, as our system uses 2-mers in its optimized configuration, this could be missed entirely.

To exploit this valuable cue, we compute prefix/suffix probabilities independently from other k -mers to define the appropriate transitions in the classifier. In particular, we sought a set of prefixes and suffixes providing some certainty that the names belong to a particular ethnicity. Table 3 lists some of the most significant prefixes/suffixes we iden-tified in this search. We experimented with prefix/suffix lengths ranging from three to five, and identified the fre-quency f ( p ) E as the number occurrences of prefix/suffix p within distinct names of the given ethnicity E . The signifi-cance score S of this frequency is analogous to the observa-tion probabilities on states as given in Equation 1.
We broadly follow the basic CEL groups identified by [17], though we depart in several minor ways so as to allow for a more natural hierarchical categorization of these groups. The reason is three-fold. First, this hierarchical categoriza-tion allowed us to analyze the accuracy of our classification engine at multiple levels of granularity as well as identify name groups which were mutually indistinct. Second, ef-ficiency issues arise in dealing with classification over our 20 million name news corpus which favor batch processing of smaller sets of groups. Finally, we must compensate for the sparsity of data about certain groups. The hierarchical classification provides us with reasonable aggregation levels for this purpose, allowing us to vary the trade-off between granularity and accuracy in our analysis.

Figure 1 shows our hierarchical categorization of CEL groups. Among the changes with respect to the Cultural Ethnic and Linguistic (CEL) groups of [17], we have col-lapsed Spanish and Portuguese together to form a Hispanic group. We replaced the English group with a broader British group including Celtic , English and African American . Fi-nally, we have placed the Jewish group within the broad group European .
To assess the accuracy of our classification engine, we constructed automatons for each level of classification us-ing training sets comprising 70% of the data extracted from Wikipedia and tested against the remaining 30%. Figure 3 shows the precision, recall, and F-scores for each ethnicity as computed by the hierarchical classifier.

In general, the accuracy at the coarsest level of granularity is quite good, while at the finest it is comparable to other published ethnic classification systems. For example, the performance of our system in classifying Hispanic names is roughly equivalent to the accuracy of GUESS (as assessed by Stewart et al. [21]). The most significant practical failing of the classifier is in the classification of Jews. The classifier here has quite low accuracy, and is heavily confused with the British CEL group, resulting in the Jewish group being artificially inflated. Table 5 gives the total entity counts and breakdown by total names and total entity references of each ethnicity as determined by our classifier on our U.S. daily newspaper corpus.
 We find that we did particularly well in ethnic groups like British , Japanese , IndianSubContinent , EastAsian ( Chinese , Korean ). This is because these names are fairly distinct and our classifier identifies this difference. In cases such as Jew-ish or Africans , our classifier is not quite as good, because of forces of history and colonization blur the interpretation of name as a surrogate for ethnicity. Additionally, small train-ing sets from the wikipedia data for the groups, such as the German and Jewish groups, also worsened performance for these groups.
 Figure 3: Precision, recall and F-score curves for all the CEL groups in the hierarchy, with ethnicities sorted by F-score.
To optimize the performance of our classifier, we experi-mented with five design decisions in the construction of the classifier and evaluated their impact on precision/recall:
Overall, the single-tier best-path classifier arguably per-formed best. This is not, however, the final classifier used in our news analysis. This is because, as previously mentioned, the hierarchical classifier has several practical advantages we wished to exploit. Thus, we use the hierarchical best-path classifier for our news analysis.
Our work on ethnic name classification was motivated by our goal to develop the Lydia news/blog analysis system as a resource for research in the social sciences. Lydia [2, 3, 9, 14, 13, 15, 18] employs natural language processing (NLP) and statistical analysis to reduce text streams to time series data on the news volume and sentiment associated with each news entity. See www.textmap.org for a representation of our analysis. Asian 0.82 0.83 0.82 N/A N/A N/A  X  1 . 1% +0 . 5%  X  0 . 1% +0 . 6% Nordic 0.71 0.63 0.67 0.58 0.66 0.62  X  2 . 3%  X  0 . 1%  X  1 . 8%  X  3 . 8% experiments with the hierarchical classifier
Ward, et.al. [23] have used our classifier in the course of a significant study on differences in news coverage between cultural groups. We present a small portion of their data here to provide the flavor of this analysis and illustrate the significance and utility of our name classifier. Table 5 cap-tures the scale of this study showing the classifications of over 20 million distinct names, comprising over 100 million individual entity references in our text corpus.
 Table 5: Distribution of entities by classified ethnic-ity as % of distinct person entities and % of news coverage
Each name was subjected to ethnic classification us-ing the program described in this paper, and the refer-ence/sentiment counts aggregated over all entities within each CEL group. Figure 4 presents time series showing the relative frequency and sentiment of CEL groups over the past four years as represented within U.S. daily newspa-pers. Interesting phenomena include large seasonal fluctua-tions in the number of references to Hispanics (attributable to their representation in professional baseball) and persis-tently lower sentiment associated with Muslims and (to a lesser extent) Hispanics than members of the British and French CEL groups.

By associating each news source with its point of origin and modeling its sphere of influence, we can identify spatial trends in reference and sentiment using the methods of [18]. Figure 5 demonstrates the uncanny agreement between our modeling of the frequency of Hispanic names (as identified using our classifier) in newspapers and U.S. Census data on the distribution of Hispanics within the United States. Results like these confirm both the general accuracy of our name classifier and its utility for social science research.
We have presented a methodology for name-based eth-nicity classification from open sources, with experimental results governing performance. In general, we are pleased with our results, as our classifier performs fairly well except for some ethnicities where the training data is limited or ambiguous.

One direction for further work involves improving the pre-cision of our classifier as well resolving finer distinctions be-tween ethnic groups (e.g. distinguishing between Russian and other Eastern European groups). The key issue is ob-taining a more precise and comprehensive training data-set. One approach we have been evaluating is using person/place collocations in our extensive news corpus to name each name to nationality, thus generating a significantly larger (albeit noisier) training set.

Our other main focus is in applying our classifier more extensively to news data to analyze historical trends in in-Figure 5: Comparison of the distribution of Hispan-ics in the United States according to news analysis (top) and the U.S. Census (bottom). ternational relations, intergroup relations, and racial/ethnic discrimination. We anticipate that this analysis will be of great interest to a wide class of social scientists. [1] E. Aries and K. Moorehead. The importance of [2] M. Bautin and S. Skiena. Concordance-based [3] M. Bautin, L. Vijayarenu, and S. Skiena. International [4] E. Berchard, E. Ziv, and et. al. Importance of race [5] R. W. Buechley. Generally useful ethnic search [6] A. J. Coldman, T. Braun, and R. P. Gallagher. The [7] K. Fiscella and A. M. Fremon. Use of geocoding and [8] P. Gill, R. Bhopal, S. Wild, and J. Kai. Limitations [9] N. Godbole, M. Srinivasaiah, and S. Skiena.
 [10] S. Harding, H. Dews, and S. Simpson. The potential to [11] D. Honer. Identifying ethnicity: A comparison of two [12] D. S. Lauderdale and B. Kestenbaum. Asian american [13] L. Lloyd, P. Kaulgud, and S. Skiena. Newspapers vs. [14] L. Lloyd, D. Kechagias, and S. Skiena. Lydia: A [15] L. Lloyd, A. Mehler, and S. Skiena. Identifying [16] P. Mateos. A review of name-based ethnicity [17] P. Mateos, R. Webber, and P. Longley. The cultural, [18] A. Mehler, Y. Bao, X. Li, Y. Wang, and S. Skiena. [19] A. Mehler and S. Skiena. Expanding network [20] K. Nanchahal, P. Mangtani, M. Alston, and I. dos [21] S. L. Stewart, K. C. Swallen, S. L. Glaser, P. L. [22] J. Wales. Wikipedia. http://www.wikipedia.org, 2009. [23] C. Ward, M. Bautin, and S. Skiena. Identifying
