 Much effort has been devoted to the development of community detection algorithms [7,2,3,5], which can be used to identify clusters of nodes in social network data whose connections exhibit similar tendencies. Su ch clusterings may be intended for use as a predictive feature, or as a crude summary of network structure. In empirical studies, these algorithms often produce clusters tha t agree with general intuition about the net-work that is being studied, corresponding closely with known affiliations or genres held by the network nodes.

Here we develop a community detection model for time-evolving network data, and use this model to analyze a real-world call network. This data set is challenging to because its structure also appears to change over time. To illustrate that the network is time-varying, Figure 1 shows a Q-Q plot of the degree distribution for calls made between 7-8AM and 8-9AM on a single day. The plot suggests that 7-8AM exhibits higher call density, and also a more heavy-tailed distribution (i.e., the largest values of the degree distribution grow more extreme). However, it is unclear to what extent the change in layout is due to time-varying structure (as opposed to being an artifact of the visualization process), and more importantly, how to quantify our observations.
In light of these concerns, we take a statistical model-based approach. Statistical modeling of dynamic network structure i s challenging, and still nascent as a field of research. Sociological theories for dynamic networks are not as well developed as for static networks, and hence less guidance is a vailable for modeling. Perhaps due to this, existing time-varying models are typically designed to model many potential types of behavior [14]. Here we take a different approach. Our model is designed to detect only a single type of behavior; specifically, we find communities that exhibit persistent lev-els of communication over time. Our motivation is to distinguish between steady-state activity and impermanent behavior, such as cascades caused by a noteworthy event. We feel that persistence is the simplest type of dynamic behavior, making it a logical next step from the static setting.

Our contributions are summarized as follows. 1. We formally define a new network structure, persistent community , which exhibits 2. We propose a novel algorithm to detect persistent community by a time and degree 3. We conduct extensive empirical experiments on real-life big social networks data.
The rest of the paper is organized as follows. Section 2 surveys the previous work on community detection in dynamic networks. Section 3 proposes our algorithm. The empirical experiment results are reported in Section 4. At last, we conclude our work and give the future research directions in Section 5. The literature on static community detection is very large. Various extensions to the basic community model have been proposed, such as overlapping or mixed community membership [1,13], degree-corrections which allow for heterogeneity within commu-nities [6,16], and community detection fro m trajectories [12]. In particular, without degree-correction, maximum likelihood me thods often group the nodes according to their degree (i.e. their number of neighbors) [6]. As such behavior is typically undesir-able, we will also include degree-corrections in our model.
 Recent attention has been pa id to community detection in dynamic social networks. Existing approaches, such as [7,8,4], generally detect communities separately for each time slot, and then determine correspondences by various methods [15,18,17]. How-ever, such approaches often result in community structures with high temporal variation [10,9]. Our approach differs in that infer ence in performed jointly across time, so as to find communities with low temporal variation (excepting network-wide fluctuations in call volume, such as night/day and weekday/weekend cycles). Our model can be considered to be a time-varying version of degree-corrected block-model in [6], specialized to directed gra phs, where the expected call volumes within each community are assumed to all follow a singl e network-wide trajectory over time. 3.1 Time and Degree-Corrected Blockmodel General Model. We assume a network of N nodes over T time periods, where nodes are free to leave and re-enter the network. Let I t  X  X  1 ,...,N } ,t =1 ,...,T denote the subset of nodes which are present in the network at time t .Let K denote the number of communities, which determines the model order. Let A ( t )  X  N N  X  N denote a matrix of call counts at time t =1 ,...,T ; i.e., for i = j , A ( t ) ij denotes the number of calls from node i to node j at time t . Our model is that the elements of A (1) ,...,A ( T ) are independent Poisson random variables, whose parameters are jointly parameterized (with explanation of all parameters to follow):
We see that the expected number of calls  X  ij for each dyad ( i, j ) is a function of parameters g, X , X , X , and  X  . We now describe each parameter, its allowable values, and its function: 1. The vector g  X  X  1 ,...,K } N assigns each node to a latent community in 1 ,...,K . 2. The matrix  X  ( t )  X  R K  X  K gives the expected total call volume between each com-3. The vector  X  ( t )  X  [0 , 1] N controls the out-degree for each node at time t =1 ,...,T . 4. The vector  X  ( t )  X  [0 , 1] N controls the in-degree for each node at time t =1 ,...,T , 5. The scalar  X  ( t )  X  [0 , 1] for t =1 ,...,T , modifies the total network call volume Discussion. While self-calls are disallowed in a phone network, we note that our model expressions for the parameter estimates. Self-calls predicted under the model should be disregarded as a modeling artifact. As the number of predicted self-calls will be a vanishing fraction of the total call volume, the effect will be negligible.
In the data, there exist pairs of individuals with extremely high call volumes, exceed-ing an average of 10 calls to each other per day. Such pairs are very sparse in the data ( &lt; 1% of all dyads), and do not seem to conform to the idea of community-based call-ing behavior. It is unlikely that the Poisson-based community model will explain these dyads. As such, we have opted to treat these dyads as outliers, and remove them before estimating the model parameters. Our interpretation is that the data is best described by the community based model, plus a small set of dyads whose high call volumes distinguish them from the overall network.

We note that  X  and  X  involve large numbers of parameters, as they are allowed to vary over time. A simpler model, in which  X  and  X  are constant over time, was considered. However, formulas for parameter infere nce become significantly more complicated in this case, unless I t is also constant over time. If I t is constant over time, so that nodes cannot enter and leave the network, then the equations to be presented in Section 3.2 may be used with only slight modification if  X  and  X  are held constant over time. 3.2 Inference here that given g , the maxmizing values of the remaining parameters can be found analytically, so that the maximizing the likelihood consists of a search over all commu-nity assignments in { 1 ,...,K } N . While this exact maximization is computationally intractable, heuristic methods seem to give good results in practice, and we use a greedy search method described in [6] with multiple restarts.

We now derive formula for the rema ining parameter estimates given g . The joint the product of Poisson distributions
This expression can be simplified using the following intermediate terms. Given g and A (1: T ) ,forall i, j, t let: the call volume between communities a and b at time t ; m (  X  ) aa is the total call volume within community a over all time, and m ( t )  X  X  is the total intra-community call volume (versus inter-community call volume) at time t . Using these terms, the likelihood L can be written as where we have used the constraints that i  X  X  function  X   X  log L is given by
We observe that  X  can be grouped into terms which can be separately maximized, can be analytically shown to satisfy for t =1 ,...,T :
Subsitution of the optimal values yields a function of g : where the mapping H is given by H ( { x i } k i =1 )= k i =1 x i log x i k and the mapping h is given by h ( x )= x log x  X  x for x  X  R + .

We estimate the model parameters by optimizing  X  ( g ) over all group assignments g  X  X  1 ,...,K } N . While it is intractable to find a global maximum, a local maximum can be found using the method described in [ 6]. After multiple restarts, the highest scoring local optima was chosen for the parameter estimate. 4.1 Description of Data and Fitting Procedure The call records correspond to all mobile calls involving a particular service provider, with origin and destination within a particular city region, in the year 2008. The city area is roughly 8700 km 2 , is covered by 5120 base sta tions, and serves 3.6 million mobile phone users. The data set is roughl y 1 TB in size (more than 10 billion phone call records). The data set was prepared by th e service provider, for the purpose of data mining to improve service and marketing capabilities. It contains call metadata (such as phone number, date of call, instant location of call), linked with customer profile information.

Using the call metadata, a set of directed adjacency matrices A (1) ,...,A (365) was created, with nodes corresponding to customers (i.e., phone numbers), and edge weights corresponding to the number of calls between the sender and receiver on each day of the year. Community labels g were chosen to maximize  X  as given by Eq.(2), using the algorithm described in Section 3.2, with the number of groups K chosen to be 800. 4.2 Out of Sample Prediction To test the model, out of sample prediction was conducted, by randomly withholding 5% of the dyads from the fitting procedure. Af ter fitting, the probability of connection held dyads had non-zero call volume. The model was highly predictive of the withheld dyads, with precision is 0.74  X  0.05 and recall is 0.53  X  0.05. 4.3 Description of Model Fit To describe the fitted model, we give the following statistics. From the CDF giving the fraction of customers belong to the k largest communities, for k =1 ,..., 800 ,it shows that the majority of customers are concentrated in the 10 largest communities by the algorithm. Figure 2 (a) shows the fitted intra-community call densities, i.e., the call volume divided by the number of dyads in each community. The figure shows that the network is quite dense, with 30% of users in the largest community, in which every pair of members experienced an average of 0 . 008 phone calls over the course of a year. Figure 2 (b) plots the call densities (i.e., normalizing by the square of the community size). Figure 2 (c) shows the fitted inter-community call volumes  X  ( t ) ab ,for a = b and t =1 ,...,T , as a quantile-plot. Based on Figure 2 (b) and Figure 2 (c), we see that the inter-and intra-community parameters follow different different distributions. Figure 3 (a) and 3 (b) shows the fitted degree corrections  X  and  X  as quantile plots. Figure 4 shows the fitted time-corrections  X  (1) ,..., X  ( T ) . We note that larger values of  X  occur on holidays and weekends.

To further understand the inferred comm unities, we compared th e community labels g with groupings produced by various customer covariates included in the customer profile information:  X  Age: the age of the customer, grouped by increments of six months.  X  Gender: the gender of the customers.  X  Workplace: the geographic r egion containing the registered workplace address of  X  Residence: the geographic region containing the registered home address of the  X  Shopping mall: the shopping mall location. In our record, we have fifty shopping  X  Occupation: The occupational category reported by the customer. In our record, Table 1 (second column) reports the Jacaard s imilarity between the i nferred community labels g and the customer covariates 1 . We find that the model has high similarity with Age, Workplace, and Residence, and Occ upation, but not with Gender and Shopping Mall.

Figure 5 (a) shows the correlation coefficient for the intra-community and inter-community call volumes, for time l ags varying from 10 to 40 weeks.
The figure shows that the observed intra-community call volumes are more persistent over time compared to the inter-community call volumes, suggesting that the method is successful in finding communities with persistent intra-community call volumes. 4.4 Work v.s. Leisure Groupings To differentiate work and leisure interacti ons, the data was separated into weekdays and weekends, and then g was fit separately by Eq.(2) on the two scenarios. As shown in Table 2, we found that the weekday groupings corresponded more closely to (place of employment, or some other covariate), which the weekend groups were more closely aligned with family relationships (which are recorded in the data set).

We also notice that the usage of persistence constraints had a larger effect in the weekend groups; this suggests that the social/weekend groups are less visible in the data (i.e., a  X  X eaker signal X ), causing the mode l regularization to have greater effect. 4.5 Comparison with Other Community Detection Algorithms The results of our method were compared agains t several other algorithms. Specifically:  X  A2: A static degree-corrected blockmodel, as described in [6], is fit to the static  X  DSBM: A bayesian approach [17] for det ecting communities in dynamic social
Under the algorithm A1, as shown in Table 1 (third column), the groupings differed significantly compared to those found by our proposed method, and did not correspond as well to observed covariates, as describe d in Table 1 (second column). Figure 5 (b) shows the average correlation coefficients fo r the intra-and inter-community call vol-umes. We observe that the coefficients are lower compared to our proposed algorithm, suggesting that the call volumes are less persistent over time.

Under the algorithm A2, similar findings resulted, as shown in Table 1 (fourth col-umn) and Figure 5 (c). It is interesting that the similarity results of A1 and A2 are different and can be interpreted by the methods we use. For A1, we release the persis-tence constraint for intra-community conn ection, while for A2, we use a static model. For Age and Gender, A1 and A2 give similar results, but for Workplace, Residence and Occupation, A2 can give much better similarity result than A1, while for Shopping Mall, A1 is better. It means in working places an d resident locations, people prefer to make connections within communities, wh ile in shopping mall locations, the dynamics of social connection is much stronger and impacted by time of day and day of week. We can further interpret the result as that human social behavior is not only impacted by real life behaviors, but also the time of day and day of week. 4.6 Computational Runtime In Figure 6, we report computational runtimes for the different algorithms. The results show that our method runs much faster than two other baseline methods. For a fixed number of random restarts, the runtime scales nearly linearly for the graph sizes con-sidered here. All algorithms were conducted on a standard server (Linux), with four Intel Core Quad CPUs, Q9550 2.83 GHz and 32 GB main memory. In this paper, we studied an interesting but challenging problem, persistent community detection in evolving social graphs. Extensive empirical experiment results show that our proposed method performs much better than a set of baseline methods, in merits of persistence in time series analysis, consistency in social graph structure and efficiency in algorithm running time cost.
 In the future, we are going to apply our method to online social networks (e.g., Facebook and Twitter), and then we would like t o compare the persistent community in mobile social networks with the persistent community in online social networks. Acknowledgments. This research was supported by the Singapore National Research Foundation under its International Research Centre @ Singapore Funding Initiative and administered by the IDM Programme Office, Media Development Authority (MDA) and the Pinnacle Lab at Singapore Management University. Shuhui Wang was sup-ported in part by National Basic Research Program of China (973 Program): 2012CB316400, and National Natural Science Foundation of China: 61303160. The au-thors also thank David Choi for valuable discussions and support regarding this work.
