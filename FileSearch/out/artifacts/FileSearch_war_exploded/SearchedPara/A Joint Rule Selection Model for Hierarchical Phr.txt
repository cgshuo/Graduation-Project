 Hierarchical phrase-based model has strong ex-pression capabilities of translation knowledge. It can not only maintain the strength of phrase trans-lation in traditional phrase-based models (Koehn et al., 2003; Xiong et al., 2006), but also char-acterize the complicated long distance reordering similar to syntactic based statistical machine trans-lation (SMT) models (Yamada and Knight, 2001; Quirk et al., 2005; Galley et al., 2006; Liu et al., 2006; Marcu et al., 2006; Mi et al., 2008; Shen et al., 2008).

In hierarchical phrase-based SMT systems, due to the flexibility of rule matching, a huge number of hierarchical rules could be automatically learnt from bilingual training corpus (Chiang, 2005). SMT decoders are forced to face the challenge of proper rule selection for hypothesis generation, in-cluding both source-side rule selection and target-side rule selection where the source-side rule de-termines what part of source words to be translated and the target-side rule provides one of the candi-date translations of the source-side rule. Improper rule selections may result in poor translations.
There is some related work about the hierarchi-cal rule selection. In the original work (Chiang, 2005), the target-side rule selection is analogous to the model in traditional phrase-based SMT system such as Pharaoh (Koehn et al., 2003). Extending this work, (He et al., 2008; Liu et al., 2008) in-tegrate rich context information of non-terminals to predict the target-side rule selection. Different from the above work where the probability dis-tribution of source-side rule selection is uniform, (Setiawan et al., 2009) proposes to select source-side rules based on the captured function words which often play an important role in word re-ordering. There is also some work considering to involve more rich contexts to guide the source-side rule selection. (Marton and Resnik, 2008; Xiong et al., 2009) explore the source syntactic informa-tion to reward exact matching structure rules or punish crossing structure rules.

All the previous work mainly focused on either source-side rule selection task or target-side rule selection task rather than both of them together. The separation of these two tasks, however, weak-ens the high interrelation between them. In this pa-per, we propose to integrate both source-side and target-side rule selection in a unified model. The intuition is that the joint selection of source-side and target-side rules is more reliable as it conducts the search in a larger space than the single selec-tion task does. It is expected that these two kinds of selection can help and affect each other, which may potentially lead to better hierarchical rule se-lections with a relative global optimum instead of a local optimum that might be reached in the pre-6 vious methods. Our proposed joint probability model is factored into four sub-models that can be further classified into source-side and target-side rule selection models or context-based and context-free selection models. The context-based models explore rich context features from both source and target sides, including function words, part-of-speech (POS) tags, syntactic structure in-formation and so on. Our model can be easily in-corporated as an independent feature into the prac-tical hierarchical phrase-based systems with the log-linear model framework. The experimental re-sults indicate our method can improve the system performance significantly. Following (Chiang, 2005),  X   X , X   X  is used to repre-sent a synchronous context free grammar (SCFG) rule extracted from the training corpus, where  X  and  X  are the source-side and target-side rule re-spectively. Let C be the context of  X   X , X   X  . For-mally, our joint probability model of hierarchical rule selection is described as follows:
We decompose the joint probability model into two sub-models based on the Bayes formulation, where the first sub-model is source-side rule se-lection model and the second one is the target-side rule selection model .

For the source-side rule selection model, we fur-ther compute it by the interpolation of two sub-models: where P s (  X  ) is the context-free source model (CFSM) and P s (  X  | C ) is the context-based source model (CBSM),  X  is the interpolation weight that can be optimized over the development data.

CFSM is the probability of source-side rule se-lection that can be estimated based on maximum likelihood estimation (MLE) method: where the numerator is the total count of bilin-gual rule pairs with the same source-side rule that are extracted based on the extraction algorithm in (Chiang, 2005), and the denominator is the total amount of source-side rule patterns contained in the monolingual source side of the training corpus. CFSM is used to capture how likely the source-side rule is linguistically motivated or has the cor-responding target-side counterpart.

For CBSM, it can be naturally viewed as a clas-sification problem where each distinct source-side rule is a single class. However, considering the huge number of classes may cause serious data sparseness problem and thereby degrade the clas-sification accuracy, we approximate CBSM by a binary classification problem which can be solved by the maximum entropy (ME) approach (Berger et al., 1996) as follows: where  X   X  { 0 , 1 } is the indicator whether the source-side rule is applied during decoding,  X  = 1 when the source-side rule is applied, otherwise  X  = 0 ; h i is a feature function,  X  i is the weight of h i . CBSM estimates the probability of the source-side rule being selected according to the rich context information coming from the surface strings and sub-phrases that will be reduced to non-terminals during decoding.

Analogously, we decompose the target-side rule selection model by the interpolation approach as well: where P t (  X  ) is the context-free target model (CFTM) and P t (  X  |  X ,C ) is the context-based tar-get model (CBTM),  X  is the interpolation weight that can be optimized over the development data. In the similar way, we compute CFTM by the MLE approach and estimate CBTM by the ME approach. CFTM computes how likely the target-side rule is linguistically motivated, while CBTM predicts how likely the target-side rule is applied according to the clues from the rich context infor-mation. 3.1 The acquisition of training instances CBSM and CBTM are trained by ME approach for the binary classification, where a training instance consists of a label and the context related to SCFG rules. The context is divided into source context 7 and target context. CBSM is trained only based on the source context while CBTM is trained over both the source and the target context. All the training instances are automatically constructed from the bilingual training corpus, which have la-bels of either positive (i.e.,  X  = 1 ) or negative (i.e.,  X  = 0 ). This section explains how the training in-stances are constructed for the training of CBSM and CBTM.

Let s and t be the source sentence and target sentence, W be the word alignment between them, r s be a source-side rule that pattern-matches a sub-phrase of s , r t be the target-side rule pattern-matching a sub-phrase of t and being aligned to r s based on W , and C ( r ) be the context features re-lated to the rule r which will be explained in the following section.

For the training of CBSM, if the SCFG rule  X  r s ,r t  X  can be extracted based on the rule extrac-tion algorithm in (Chiang, 2005),  X   X  = 1 ,C ( r s )  X  is constructed as a positive instance, otherwise  X   X  = 0 ,C ( r s )  X  is constructed as a negative in-stance. For example in Figure 1(a), the context of source-side rule  X  X 1 hezuo X  that pattern-matches the phrase  X  X ouhao hezuo X  produces a positive instance, while the context of  X  X 1 youhao X  that pattern-matches the source phrase  X  X e youhao X  or  X  X huangfang de youhao X  will produce a negative instance as there are no corresponding plausible target-side rules that can be extracted legally 1 .
For the training of CBTM, given r s , suppose there is a SCFG rule set { X  r s ,r k t  X  X  1  X  k  X  n } extracted from multiple distinct sentence pairs in the bilingual training corpus, among which we as-sume  X  r s ,r i t  X  is extracted from the sentence pair  X  s,t  X  . Then, we construct  X   X  = 1 ,C ( r s ) ,C ( r i as a positive instance, while the elements in { X   X  = 0 ,C ( r s ) ,C ( r j t )  X  X  j 6 = i  X  1  X  j  X  n } are viewed as negative instances since they fail to be applied to the translation from s to t . For example in Fig-ure 1(c), Rule (1) and Rule (2) are two different SCFG rules extracted from Figure 1(a) and Figure 1(b) respectively, where their source-side rules are the same. As Rule (1) cannot be applied to Fig-ure 1(b) for the translation and Rule (2) cannot be applied to Figure 1(a) for the translation either,  X   X  = 1 ,C ( r a s ) ,C ( r a t )  X  and  X   X  = 1 ,C ( r b s are constructed as positive instances while  X   X  = 0 ,C ( r a s ) ,C ( r b t )  X  and  X   X  = 0 ,C ( r b s ) ,C ( r viewed as negative instances. It is noticed that this instance construction method may lead to a large quantity of negative instances and choke the training procedure. In practice, to limit the size of the training set, the negative instances con-structed based on low-frequency target-side rules are pruned. 3.2 Context-based features for ME training ME approach has the merit of easily combining different features to predict the probability of each class. We incorporate into the ME based model the following informative context-based features to train CBSM and CBTM. These features are carefully designed to reduce the data sparseness problem and some of them are inspired by pre-vious work (He et al., 2008; Gimpel and Smith, 2008; Marton and Resnik, 2008; Chiang et al., 2009; Setiawan et al., 2009; Shen et al., 2009; Xiong et al., 2009): 1. Function word features , which indicate 8 2. POS features , which are POS tags of the 3. Syntactic features , which are the constituent 4. Rule format features , which are non-5. Length features , which are the length 4.1 Experiment setting We implement a hierarchical phrase-based system similar to the Hiero (Chiang, 2005) and evaluate our method on the Chinese-to-English translation task. Our bilingual training data comes from FBIS corpus, which consists of around 160K sentence pairs where the source data is parsed by the Berke-ley parser (Petrov and Klein, 2007). The ME train-ing toolkit, developed by (Zhang, 2006), is used to train our CBSM and CBTM. The training size of constructed positive instances for both CBSM and CBTM is 4.68M, while the training size of con-structed negative instances is 3.74M and 3.03M re-spectively. Following (Setiawan et al., 2009), we identify function words as the 128 most frequent words in the corpus. The interpolation weights are set to  X  = 0 . 75 and  X  = 0 . 70 . The 5-gram lan-guage model is trained over the English portion of FBIS corpus plus Xinhua portion of the Giga-word corpus. The development data is from NIST 2005 evaluation data and the test data is from NIST 2006 and NIST 2008 evaluation data. The evaluation metric is the case-insensitive BLEU4 (Papineni et al., 2002). Statistical significance in BLEU score differences is tested by paired boot-strap re-sampling (Koehn, 2004). 4.2 Comparison with related work Our baseline is the implemented Hiero-like SMT system where only the standard features are em-ployed and the performance is state-of-the-art. We compare our method with the baseline and some typical approaches listed in Table 1 where XP+ denotes the approach in (Marton and Resnik, 2008) and TOFW (topological ordering of func-tion words) stands for the method in (Setiawan et al., 2009). As (Xiong et al., 2009) X  X  work is based on phrasal SMT system with bracketing transduc-tion grammar rules (Wu, 1997) and (Shen et al., 2009) X  X  work is based on the string-to-dependency SMT model, we do not implement these two re-lated work due to their different models from ours. We also do not compare with (He et al., 2008) X  X  work due to its less practicability of integrating numerous sub-models.
 Table 1: Comparison results, our method is signif-icantly better than the baseline, as well as the other two approaches ( p &lt; 0 . 01 )
As shown in Table 1, all the methods outper-form the baseline because they have extra mod-els to guide the hierarchical rule selection in some ways which might lead to better translation. Ap-parently, our method also performs better than the other two approaches, indicating that our method is more effective in the hierarchical rule selection as both source-side and target-side rules are se-lected together. 4.3 Effect of sub-models Due to the space limitation, we analyze the ef-fect of sub-models upon the system performance, rather than that of ME features, part of which have been investigated in previous related work.
 Table 2: Sub-model effect upon the performance, *: significantly better than baseline ( p &lt; 0 . 01 )
As shown in Table 2, when sub-models are inte-9 grated as independent features, the performance is improved compared to the baseline, which shows that each of the sub-models can improve the hier-archical rule selection. It is noticeable that the per-formance of the source-side rule selection model is comparable with that of the target-side rule se-lection model. Although CFSM and CFTM per-form only slightly better than the others among the individual sub-models, the best performance is achieved when all the sub-models are integrated. Hierarchical rule selection is an important and complicated task for hierarchical phrase-based SMT system. We propose a joint probability model for the hierarchical rule selection and the experimental results prove the effectiveness of our approach.

In the future work, we will explore more useful features and test our method over the large scale training corpus. A challenge might exist when running the ME training toolkit over a big size of training instances from the large scale training data.
 We are especially grateful to the anonymous re-viewers for their insightful comments. We also thank Hendra Setiawan, Yuval Marton, Chi-Ho Li, Shujie Liu and Nan Duan for helpful discussions.
