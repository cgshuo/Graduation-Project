 With recent advances in mobile and sensor technologies, a large amount of efforts have been made on developing intel-ligent applications for taxi drivers, which provide beneficial guide and opportunity to improve the profit and work effi-ciency. However, limited scopes focus on the latent social in-teraction within cab drivers, and corresponding social prop-agation scheme to share driving behaviors has been largely ignored. To that end, in this paper, we propose a compre-hensive study to reveal how the social propagation affects for better prediction of cab drivers X  future behaviors. To be specific, we first investigate the correlation between drivers X  skills and their mutual interactions in the latent vehicle-to-vehicle network, which intuitively indicates the effects of social influences. Along this line, by leveraging the classic social influence theory , we develop a two-stage framework for quantitatively revealing the latent driving pattern propa-gation within taxi drivers. Comprehensive experiments on a real-word data set collected from the New York City clearly validate the effectiveness of our proposed framework on pre-dicting future taxi driving behaviors, which also support the hypothesis that social factors indeed improve the pre-dictability of driving behaviors.
 Mobile Data Mining, Social Influence, Taxi Trajectories
Recent years have witnessed the growing interests on data-driven technologies for developing new paradigms of taxi business. On the one hand, the dramatic expansion of ur-ban areas results in the urge demand of efficient taxi services, which cannot be solved by simply increasing the amount of cabs or drivers. On the other hand, thanks to the rapid de-velopment of wireless sensor technologies in mobile environ-ments, such as GPS, Wi-Fi and RFID, the abundant real-time trajectories could be promptly collected [40]. There-fore, through the analysis of trajectory data from taxi drivers, a variety of intelligent services can be enabled, which will not only lead to the improvement of work efficiency and profit of taxi drivers [10], but also help to strike a balance between the needs of taxi drivers and passengers [33].

In the literature, most of the research efforts on taxi busi-ness focus on extracting effective transportation patterns, e.g., the fastest driving route like [32] and [38], sequence of pick-up points [23] or customers within the shortest driving distance [10]. However, although the above works can ef-fectively enhance taxi business, they may still suffer some defects due to the ignorance of drivers X  behaviors. First, the case-by-case recommendation are sensitive to the context, thus frequent update is required, which results in heavy burden of computation. Second, as drivers tend to be at-tracted by popular routes, it will be difficult to distribute the cabs for keeping regional balances. Last but not least, predictability of taxi route is still limited as individual fac-tors of taxi drivers have been largely ignored, i.e., neither the self-learning ability, nor the social sharing scheme are considered in the system design.

Indeed, though related techniques could highly support the intellectual services, cab drivers could also rely on them-selves to well fit the taxi business. For the experienced drivers who are sensitive to the route and rules, they could effectively summarize the patterns and regulate the lines. At the same time, for those inexperienced ones, thanks to rapid development of intelligent mobile devices and social network services (SNS), not only offline (e.g., refueling or lunching) but also online (e.g., forum, or twitter) gatherings are now available, where driving experience could be shared within drivers, which results in the  X  social propagation  X  of driving behaviors. For instance, an motivating example be-low, which summarizes a real post in a online taxi forum 1 could intuitively illustrate this phenomenon.

A Motivating Story. A new taxi driver, who was unfa-miliar with the traffic in New York City, posted a question http://www.nycitycab.com/forum/Replies.aspx?postid=649 in online forum to ask for sharing driving experience. Then, an experienced driver replied with several detailed sugges-tions on how to drive in Manhattan to avoid the rush hour or earn more tips. Based on these recommended patterns, the new driver could better adjust his driving trajectory to improve the work efficiency .

The true story above indicates that social interactions ex-isting to influence drivers X  driving behaviors. Intuitively, if we treat taxi drivers as  X  X ocial agent X  in the mobile social networks, and simulate how the  X  X ocial propagation X  scheme functions to interpret their future behaviors, taxi route will be more predictable, and further social-oriented taxi ser-vices, e.g., social-based  X  X utor X  or pattern recommendations could be effectively conducted. Unfortunately, due to the constraint of user privacy, there is no exposed signal for so-cial interactions to be observed. Thus, techniques to reveal latent connections within taxi drivers are required.
To deal with this task, in this paper, we aim at explor-ing latent vehicle-to-vehicle networks among taxi drivers based on the analysis of their driving behaviors. To be spe-cific, we propose a two-stage framework to capture the la-tent propagation of driving behaviors among taxi drivers. We assume that the increasing proportion of certain behav-ior patterns may be caused by stronger influence, and vice versa. Therefore, sequential driving behaviors with integrat-ing social propagation could be formulated as time series and solved as partial ranking tasks. Based on the framework, we could better model the historical driving behaviors to predict their future trends, and also discover the latent social con-nections within taxi drivers. To the best of our knowledge, we are the first to investigate the impact of social factors on taxi driving patterns to explain drivers X  behaviors.
Finally, extensive experiments are conducted on a real-world data set collected from the New York City. The ex-perimental results clearly verify that our framework can bet-ter predict driving behaviors of taxi drivers with dramatic margin outperforming the baselines, which validates the hy-pothesis that social factors indeed affect the driving pattern decisions, and also demonstrates the capability of social an-alytics in intelligent taxi services.
 Overview. The rest of this paper is organized as follows. Section 2 further illustrates the motivation with some intu-itive statistics. In Section 3, we propose the novel framework for driving behavior analysis with integrating social factors. Afterwards, we comprehensively evaluate the performances in Section 4, and then conduct some further discussion in Section 5. Related works are summarized in Section 6. Fi-nally, in Section 7, we conclude the paper.
As we propose the idea of driving behavior propagation within cab drivers, in this section, we will intuitively dis-cuss the effects of social propagation with related statistical analysis to further support our motivation.
We conduct our study on a real-world data set collected from the taxi driving transactions in New York City during the whole year of 2013, which is provided by NYC Taxi and Limousine Commission (NYC TLC). This is a large-scale data set that totally consists of more than 169 million Figure 1: The distribution of transaction amount and average driving speed of taxi drivers. transaction records of 43,191 drivers in 14,144 cabs. For each transaction, we have the spatial and temporal information for both pick-up and drop-off, as well as fares including tip and toll. The statistical details are shown in Table 1.
As mentioned above that usually there is no explicit sig-nal of social interactions. In the following sections, we will conduct our two-stage framework to reveal the latent so-cial connections via simulating the driving behavior propa-gation. However, for the intuitive statistics here, we choose the heuristic method which is widely used in  X  X phemeral so-cial networks X  study such as [31] and [39], i.e., co-occurrences lead connections, and the frequency indicates the strength. Along this line, if two cabs stop at the same place for a relatively long time (e.g., more than 10 minutes), we guess that a short-term communication may occur, which proba-bly results in social interactions. Therefore, to be the same with the prior arts like [39], an undirected edge will be built between two drivers if long-time co-parking happened, and the frequency will be counted as the link strength.
With the above  X  X phemeral vehicle-to-vehicle networks X  , we could now discuss about the social effects on taxi drivers. In details, two questions remain to be answered: 1) if drivers with similar skills hold stronger connections, and 2) if drivers with better skills hold stronger influences. To measure cor-Table 2: Correlations between social link strength and driving skill of taxi drivers.
 relations of driving skills, here we choose three evaluation metrics, i.e., the transaction amount , the average driving speed and the total income , to study on this issue. Par-ticularly, we choose these three metrics since they can be regarded as the representative symbols of work effectiveness (i.e., more business), efficiency (i.e., faster trip) and profit (higher benefits). Specifically, the distributions of further two metrics are shown in Figure 1, while the curve for total income is quite similar with the first one.

For better understand the correlation between skill level and social influence, here for each evaluation metric, the top 10 drivers are ranked, compared with other 10 randomly se-lected drivers. Afterwards, for each driver, we list his/her  X  X riends X  with two values: connection strength and skill sim-ilarity (absolute value of difference), and then measure cor-relation between them. Also, we have P-Value presents the significance of correlation. Besides, those with positive coef-ficients, i.e., strong social connection leads to higher differ-ence, are individually listed as they may violate the assump-tion that social effects encourage similar driving patterns.
The statistical results are shown in Table 2, in which  X  X 10 X  presents the top 10 drivers and  X  X 10 X  indicates the random ones for comparison. For each group, we list average correla-tion, count of significant correlations, and count of positive correlations. Expectedly, we find that for all the three met-rics, the top-ranked drivers reflect more significant correla-tion, and further almost no positive correlation occur. As random selected drivers reflect no significant correlation be-tween skill level and social connections,  X  X omogeneity X  may fail to explain this phenomenon. Thus, we may draw the conclusion that skilled drivers may act as the influential nodes to share expertise, and stronger connections lead to better skills via  X  X ocial learning X  scheme, which further sup-ports our motivation.
As significance of social effects have been revealed, in this section, we will introduce our two-stage framework to cap-ture the driving behavior propagation within taxi drivers, in which the technical solution for social influence modeling and optimization task will be explained in detail.
In this paper, we focus on the social interaction which affects the driving behaviors. Thus, some other factors, e.g., the profit, traffic flow or festivals that may also influence the routes will be temporally ignored, and more complicated framework will be studied in future work.

Though we intuitively discover the social factors with in-troducing heuristic  X  X phemeral vehicle-to-vehicle networks X , however, it could hardly summarize the complete social in-teractions due to the following reasons. First, co-occurrences do not necessarily means face-to-face communication, thus they are not adequate clues to reveal latent social connec-tions. Second, occasional co-occurrences are indeed events of small probability ( 1%), while majority of interactions might be neglected. To deal with these challenges, in this section, we target at formulating social propagation of driv-ing behaviors within taxi drivers, and then the social inter-actions could be revealed conversely.

Firstly, to describe the social effects on driving behaviors, we define the vector s i to present the driving behaviors of a certain taxi driver u i , in which each element corresponds to a kind of driving patterns. Specially, each pattern here will be described as a triple contains the information about pick-up area, drop-off area and pick-up time period, such as ( Cen-tral Park, JFK Airport, 10:00AM-11:00AM ). The details of extracting these patterns will be introduced in experimental part. Then, we have s i,k to indicate the proportion of k -th pattern in u i  X  X  driving behaviors, and definitely, the vector is normalized by P k s i,k = 1.

Further, to integrate social factors, we assume that the driving behaviors could be represented as temporal conse-quences, and in each round, the effects of social propagation will be reflected by the fluctuation in next round. Thus, timestamp information should be introduced into the driv-ing behavior vectors as s t i , which indicates the driving be-havior of driver u i in t -th round. And intuitively, if we could accurately reveal the latent social connections, we will pre-cisely predict drivers X  behavior in the future, i.e.,  X  X  t + 1 be well estimated.

At the same time, to describe the social factors within taxi drivers, i.e., to draw the latent vehicle-to-vehicle network, similar with traditional social network, we introduce e ij present the edge from u i to u j , and correspondingly, w dicates the edge weight, or the influential strength, which will be estimated during the training stage. What should be noted is that the social network here is asymmetric and all edges are directional. Afterwards, we have N i to present the entire social  X  X eighbors X  of driver u i . Furthermore, dif-ferent from the traditional social propagation problems, to integrate drivers X  own opinion into this framework, here we treat each driver as neighbor of itself , i.e., u i  X  N i introduce w ii to measure how the drivers insist their own habits. Obviously, higher w ii indicates less propagation and more succession, and vice versa.

Along this line, finally, we could now formally define our research problem as  X  social-driven behavior prediction  X  as a typical time series analysis as follows.

Problem Statement. Given the target group of taxi drivers U , and for each u i  X  U , we have corresponding pat-tern vectors s t i during the time period t = 1 , 2 ,...,T . The problem of driving behavior prediction is to accurately reveal weighted social connections w ij within each pair of drivers u i and u j , then the fluctuation of driving behavior vector  X  X  T + 1 i in T + 1 could be estimated.

Technical details to solve the problem will be introduced in following subsections, and the mathematical notations used throughout this paper are summarized in Table 3.
With problem defined and notations summarized, now we turn to formulate the behavior prediction task in de-tail. Firstly, to describe the social propagation, for each pattern, we have the accumulated social influence p t i,k k -th pattern to driver u i , while the technical solution will be explained in next subsection.

As we assume that fluctuation of driving behavior vec-tors is due to the social propagation within cab drivers, spe-cially, for a certain cab driver i i , if k -th pattern is holding an increasing proportion in round T + 1, we conclude that the social influence p t i,k could be relatively higher, and vice versa. Following this assumption, as it could be difficult to exactly estimate the value of s T +1 i,k , here to ease the mod-eling, we target at predicting whether s T +1 i,k will increase or decrease in the T + 1 round, and how the increment  X  s T +1 ranks among all the patterns, which may reflect the rank of corresponding social influence.

Therefore, the problem defined above could be intuitively transformed as a partial ranking problem, i.e., rank  X  s t +1 and label the top results in the list as increased. Here, we define the set of patterns whose frequency are raised in time larly, D t i presents set of decreased ones. Then, for each pair  X  X  r,d  X  i,t where r  X  R t i and d  X  D t i , the fluctuation is due to the pairwise ranking of corresponding social influence, i.e., p
With the assumption above, finally, we realize that if we could accurately reveal the latent social interactions, we could achieve the optimal ranking results of social influence p . Correspondingly, optimization of the ranking task will leads to the solution of social connections. Thus, the task of learning latent social connections w ij will be summarized as a pairwise ranking problem as follows:
Ranking Objective. Finding appropriate w ij , so that for  X  X  r,d  X  i,t where r  X  R t i , we will have p t i,d &lt; p
To deal with this task, we formulate the loss function of pairwise ranking problem as follows: where h (  X  rd ) is a loss function to assign a non-negative penalty according to the difference of social influence  X  p i,d  X  p t i,r . Usually, we have the penalty h (  X  rd ) = 0 when p To ease the computation, here we utilize the squared loss function as follow:
In this framework, we have a soft margin parameter b to tolerate a small error. To ease the computation, here we simply treat b = 0, and h ( x ) could be rewritten as
As ranking objective is proposed, now we turn to formu-late the social influence within taxi drivers. Traditionally, to simulate the propagation, or so-called  X  X ocial influence X  process, classic models like Independent Cascade or Linear Threshold model [16] might be selected, in which each nodes usually has only two statuses, i.e., activated or inactivated. However, in our task, the proportion of a certain driving pattern may never jump from 0 to 1 sharply. Thus, here we adapt the Steady State Spread (SSS) model [1] to simulate the social propagation, in which each node holds its own ac-tivating probability . Then, in each round, all the nodes (but not only activated nodes in IC model) attempt influence their neighbors, and then influence will be measured not only by strength of social connections, but also their activating probabilities. With adapting the formulation by introducing pattern proportion s t I,k instead of activating probability, we have the equation as follow:
For  X  t  X  1 i,j,k , we design it to present pairwise influential prob-ability sensitive to the pattern, which is different with the overall social connection strength w ji . Similar with the Sig-moid function, we have the formulation as follow:
Based on the formulation,  X  t  X  1 i,j,k will be controlled within [0,1], and the relation between s t j,k and s t i,k will affect the influence, i.e., if s t j,k &gt; s t i,k , we will have  X  enhance the influence, while for s t j,k &lt; s t i,k influence will be impaired.
As all the formulations established, we could now optimize the loss function Equation 1 to estimate latent social factors w ij . To be specific, we approach the latent social factors w ji by first deriving the gradient of F ( w ) with respect to w ji , and then use a gradient based optimization method to find proper { w } that minimize F ( w ). Specially, as defining  X  rd = p t i,d  X  p t i,r , we have the derivative as follow: where h 0 ( x ) could be easily achieved as derivation of square function, while for the social influence model, we have: According to the formulations, finally gradient descent meth-ods could be exploited to deal with the optimization task.
Based on the formulations above, we could now formally define our two-stage framework as follows.

Training Stage. Given a group of taxi drivers U = { u i } as well as their pattern vectors s t i during the time period t = 1 , 2 ,...,T , in the training stage, we aim at inferring the latent social connections { w ij } within drivers, which achieve the best explanation for the ranking of driving behavior vector fluctuation  X  X  T + 1 i .
Test Stage. After obtaining the latent connections { w ij in the training stage, in the test stage, given the taxi drivers group U = { u i } with their pattern vectors s t i during the certain p-time lag as t = T  X  p + 1 ,...,T  X  1 ,T , we aim at predicting the driving behavior vector fluctuation  X  X  T + 1 with accurate sign and ranking.

With these definitions, for the training stage, we target at optimizing the Equation 1 to achieve the latent social con-nections w ij . For the test stage, we could directly calculate p i,k according to Equation 4 for each pattern of driver u i and then rank the propagation to estimate the ranking of driving pattern proportions, or classify the increment sign. According to the framework, social interactions will be dis-covered and social propagation scheme will be simulated, which will be beneficial for further discussion on intellectual taxi services.

Based on the definitions above, in training stage, latent social connections will be revealed to support the social-driven behavior prediction task in test stage. The data flow of two-stage framework is summarized in Figure 2.
To verify our hypothesis that social factors may affect the driving behaviors of taxi drivers, which result in the change of pattern frequency, in this section, we conduct extensive experiments on a real-world data set. And further, some related discussion will be conducted.
Here, we introduce the data set pre-processing and base-line algorithms for evaluation.
Similar with the statistical analysis in pre-study, our ex-periments were conducted on the real-world taxi data set collected from New York City. To generalize the driving patterns, we first clustered all the pick-up and drop-off lo-cations in the historical transaction records. Specially, we conducted a bottom-up hierarchial with minimum variance criterion until only 30 clusters were left (indeed, the number of zones doesn X  X  disturb the results if around 20-50). The Figure 3: Clustering results of New York City Lo-cations.
 Figure 4: Pattern frequency in each hour, in which X-axis presents the label of area, and Y-axis presents the hour. clustering results are shown in Figure 3. Interestingly, we find some landmarks have been distinguished, such as the JFK Airport (i.e., the orange part in the southeastern cor-ner) and EWR Airport (i.e., the brownish-green part in the west), as well as some key regions in Manhattan, e.g., the red region around the Central Park, and the pale green in Lower Manhattan representing the Wall Street.

After location clustering, we counted pattern frequency in each hour with respect to different pick-up locations, which is shown in Figure 4. We could find except for the check out time around 18:00 PM, in Manhattan downtown (e.g., area No. 8 and 13), the peak time usually happen around midnight when passengers finish their night life. But for the suburb area (e.g., area No. 3 and 6), the peak time happen around 8:00 AM for those who take taxi for work. Also, only a few areas attract most of the taxi transactions, while some other areas, especially for area No. 25-30, may attract even completely no transactions.

Furthermore, we generalized the patterns by dividing the time period into every 2 hours, e.g., 7:00 AM to 9:00 AM, then 24 hours lead to 12 intervals. Figure 5 shows the most frequent patterns appear around 8:00 AM, which is the peak of the morning rush hour. We can see many passengers take taxi from WTC station to the downtown for work, or return Figure 5: Frequent patterns in NYC taxi driving around 8:00 AM Figure 6: Frequent patterns in NYC taxi driving around 6:00 PM home from JFK Airport after the long-time international flight. While on the contrary, in Figure 6, which indicates the most frequent patterns around 6:00 PM, passengers re-turn home in Queens and Brooklyn after one day X  X  work. As Figure 4 shows, due to the imbalance distribution of trans-action amount with respect to different areas, only the most frequent patterns are considered in order to reduce the inter-ference of data sparsity. The sensitiveness of pattern amount will be discussed in Section 4.3.
In this paper, we target at discussing the social factors within taxi drivers which may affect their driving behaviors. As mentioned above, we assume that accurate estimation of social propagation leads to better explanation of future driving behaviors. Thus, here we indirectly validate the pre-diction results of driving pattern fluctuation to measure the performance of our framework.

As mentioned in Section 3.5, to predict the pattern change, we indeed have two tasks, i.e., the binary classification to distinguish the sign (positive / negative) of pattern incre-ment, and then ranking the patterns with respect to their increments. For each task, related metrics will be selected to measure the performance. For the binary classification task, typically, we select the common used Precision and Recall rates for validation.

For the ranking task, similar with the state-of-the-art learn-ing to rank problems, NDCG and MAP are selected. Spe-cially, we get NDCG following the equation DCG iDCG , in which iDCG presents the ideal results and DCG will be calculated based on the formulation as below: where r i denotes the relevance of result, which is set as re-versal order in our experiments. Furthermore, when calcu-lating MAP , we treat the top 10 patterns in ground truths as  X  X xpected results X  , and the score will be calculated based on their ranks in the result list.
 NDCG 0.3502 0.1603 0.2211 0.3619 Improve (%) -+118.46 +58.39 -3.23 P-Value -0.000 0.000 0.755 MAP@10 0.2128 0.0254 0.1042 0.2018 Improve (%) -+737.79 +104.22 +5.45 P-Value -0.000 0.000 0.472 Precision 0.1579 0.0134 0.0474 0.0192 Improve (%) -+1078.35 +233.12 +722.39 P-Value -0.000 0.000 0.000 Recall 0.6892 0.0298 0.4151 0.0875 Improve (%) -+2212.75 +66.03 +687.66
P-Value -0.000 0.000 0.000
As mentioned in preliminary, the prediction task could be generally regarded as a time-series analysis problem. Thus, here we exploit three related baselines in our experiments. 1) Personalized Average (Ave) . As the basic time-series analytical tool, we follow the simple assumption that drivers X  pattern ratio will only fluctuate around the average value of each dimension. Thus, this baseline uses the average value of previous p intervals (i.e., the selected time lag), to predict the change of pattern frequency in next time interval. 2) Overall Popularity (Pop) . Another heuristic assump-tion is that drivers will follow the overall popularity to up-date their own patterns. Based on this assumption, we intu-itively rank the overall popularity within time lag for ranking task. For the binary classification, we compare the ranking with last time lag, and the raising ones will be labeled as positive, while falling ones as negative. 3) Vector Autoregression (VAR) [20]. Vector Autore-gRession (VAR) is a classical econometric model to cap-ture the linear interdependencies among multiple time se-ries, which suits modeling the autoregression for more than one evolving variable. As we extracted the driving records into pattern vectors, it will be appropriate to analyze the time-series with VAR model. What should be noted is that there will be one VAR model trained for a certain driver, and the estimation will also be normalized.

In summary, we select two baselines, i.e., personalized av-erage and VAR model that are based on time-series estima-tion, while one more baseline according to the overall popu-larity, which follows the similar assumption of our framework that taxi drivers tend to follow suggestions from external information source. With these baselines, comprehensive analysis comparing different assumptions will be achieved.
Here, we show the overall prediction performance of our approach SPC ( S ocial-aware P attern-C hange prediction) and other baselines. To be specific, the top 300 patterns were studied and the time lag was set as 5 months (i.e., we have transactions in 5 months as training data to predict the variance of 6th month), while the parameter sensitiveness will be discussed later. Similarly, to ensure the data quality b) MAP@10, c) Precision, d) Recall. MAP@10, c) Precision, d) Recall. with reducing sparsity, we selected top 100 taxi drivers with the most records in our experiments. Besides, we set the top 20% of results in ranking list as positive, while the detailed ROC curve will be studied at the end of this section.
The overall results are shown in Table 4. According to the results, we realize that behavior patterns of cab drivers could be largely random, as all the performance are relatively poor. However, we can find that except for the comparison with VAR on ranking problem, our approach outperforms the other baselines with dramatic margin, even 20 times better in some experiments. The performance highly supports our assumption that with introducing the latent social factors, drivers X  behaviors could be better explained. The conclu-sion could also be partially supported by the comparison between overall popularity and personalized average, as the former one beats the later on all the metrics, and achieves a relatively good result in terms of MAP, which indicates that, especially for the most popular patterns, taxi drivers will be glad to follow the trend.

Another interesting finding is that for VAR model, it per-forms truly great in ranking task, but terribly fails for binary classification. With deep looking of the output of VAR, we realize that usually VAR predicts the proportion as 0 or neg-ative, not only for those patterns that the drivers never try (i.e., no training data), but also for those drivers tried for once but never reappear. With considering auto correlation, VAR model indeed  X  X efused X  to change. Combined with the terrible performance on binary classification, we could con-clude that the ranking list of VAR might be meaningless as it fails to reveal the real pattern but only maintains the outmoded ones.

According to the results, we may finally draw the conclu-sion that the heuristic methods might not be appropriate to estimate driving patterns of taxi drivers if without con-sidering additional factors, like financial benefits or running speed. This phenomenon might further explains why our model could outperforms the baselines, as we do not  X  X each the model X  how to predict the change, but intuitively  X  X imu-late the social propagation scheme X , which is finally proved as effective. Clearly, except for those intellectual services, taxi drivers themselves could be the  X  X est learner X  .
As the overall performance has been validated, in this subsection, we evaluate the sensitiveness of parameters. In this task, two parameters are concerned, i.e., the amount of pattern, as well as the time lag.

For the amount of pattern, we conducted our experiments on four sets of patterns, which contains 200, 300, 500 and 800 patterns separately. The results are shown in Figure 7. We realize that for the ranking task, the metrics become worse with more patterns that may be due to the following two reasons: 1) more patterns results in more sparse data set, especially when those unpopular ones are studied; 2) more patterns raise the difficulty of ranking. Interestingly, we find that for the overall popularity method, the performance dra-matically deteriorates when patterns increase from 200 to 300, which may further prove our conclusion that drivers will be glad to follow the popular trend, but for the unpop-ular ones, it will be difficult to predict. On the other hand, though data sparsity will also disturb the binary classifi-cation, the precision and recall rates keep relatively stable when patterns increase.

For the time lag, similarly, four sets of experiments are conducted with lag as 3, 4, 5 and 6. The results are shown in Figure 8. It seems that for our approach as well as over-all popularity, the time lag does not reflect significant ef-fect. However, for personalized average and the VAR model, which are based on time-series estimation, when time lag in-creases, the performance seems slightly worsen. It is inter-Figure 9: ROC Curve of our framework with differ-ent positive ratio. esting as for time-series analysis, longer lag is usually better to catch the trend, but for taxi driving patterns, as proved above that it might be even a random event, thus time-dependent rules may suffer the over-fitting problem. Finally, we discuss about the ROC curve of our approach. In former experiments, we treated the top 20% of ranking list as positive. Here we conducted experiments with the same parameters of overall result, while the threshold fluc-tuates from 10% to 70% with interval as 10%. The ROC curve is shown in Figure 9, in which numbers near the line present the percentage of positive labels. From the figure, we can clearly find that for any threshold, our framework could outperform all the baselines in binary classification task with significant margin. However, we also realize that the recall may hardly pass 0.8 no matter how we regulate the threshold, which indicates that social influence from other taxi drivers or overall popularity may explain at most 80% for pattern selected, while for 20% left, they may be caused by other factors, like municipal engineering or festivals.
In this section, we will further conduct discussions on the estimated social connections for revealing the potential rules of how taxi drivers connect and how driving patterns spread.
Firstly, we attempt to discover whether the driving skill levels will affect the social connections. What should be noted is that all the connections here are indeed in-edge. Similar with the statistics in pre-study, average speed and total income will be selected to measure the skills. Generally, with some interesting rules found by statistical analysis, we realize that though the driving skills may not affect how many connections you have, they can determine who you will connect to or study from.

When checking the correlation between the amount of con-nections and two skills, we find it as completely insignificant by statistical analysis, with P-Value even larger than 0.5 for all the tests. It may indicate that better skills do not neces-Table 5: Social Metrics for Pattern Spread Graph sarily mean more in-edge connections. Clearly,  X  X umber X  of  X  X utors X  is not a critical factor.

However, since we treat the drivers themselves as one of their connections, when we check the correlation between connection amount and their own position in the ranking list of connection strength. Indeed, it surprisingly results in significantly negative correlation (with the Pearson X  X  coeffi-cient as -0.17), meaning that for those who have better skills are even more willing to learn from the others and update the patterns, while for the ordinary ones, they tend to insist past patterns and refuse to change.

And finally, we check the correlation between driver X  X  skill level, as well as their difference (of rank) with  X  X uthorities X , i.e.,  X  X utors X  with top 5 strongest connection strength. We find a significant correlation with Pearson X  X  coefficient as 0.323 and P-Value 0.001, which indicates that all the drivers tend to learn from those top drivers with best skills, and those with worse driving skills will be more dependent on shared experience from top drivers.
Then, we discuss about the spread trend of driving pat-terns. Similar with traditional social spread analysis, we build one spread graph for each pattern, and for each driver u , if the proportion of k -th pattern is increased in time t compared with t  X  1, we defined it as u i is activated in time t . Further, if u i is activated in t and one of the in-edge connection u j was activated in t  X  1, it is defined as u cessfully activates u i in time t and there exists an directed edge from u j to u i in k -th spread graph. Based on these definitions, we could draw the pattern spread track similar with traditional social influence analysis.

Then, we count four metrics to measure the graph struc-ture of pattern spread, i.e., the amount of edges , which in-dicates the pattern X  X  popularity; the longest path , which in-dicates the depth of spread; the maximal out-degree , which indicates the width of spread; and finally the density , which indicates the frequency of spread.

We conduct our study with the same setting of overall experiments in Section 4.2, i.e., top 300 patterns with time lag as 5 for 100 drivers. Table 5 shows the average statistics of this four metrics. With these four metrics, we could now evaluate the correlation between social spread and pattern profit. Specially, to measure the profit, we select the average speed, the average distance and total fare.

The correlation statistics are shown in Table 6. Interest-ingly, we find that for almost all the pairs, no matter sig-nificant or not, the co-efficient is negative. In other words, higher metrics lead to lower social attraction. Indeed, this phenomenon could be reasonable. Take the  X  X istance X  met-ric as an example since all the correlations are significant, we can conclude that long-range trip might not be popular among taxi drivers. Similar conclusion could be drawn for Table 6: Correlation within Pattern Spread and Profit Metrics Term Edge Long Path Out Degree Density Speed -0.026 -0.041 -0.040 0.010 P-Value 0.756 0.617 0.631 0.908 Distance -0.202 -0.182 -0.194 -0.280 P-Value 0.014 0.027 0.018 0.001 Fare -0.060 -0.044 -0.066 -0.235
P-Value 0.468 0.597 0.426 0.004 the  X  X are X  metric, it seems that experienced drivers are not so willing to share patterns with high rewards.
In this paper, we deeply analyze taxi driving patterns with considering latent social factors. Indeed, plenty ef-forts have been made on understanding behaviors of taxi drivers, and further developing intelligent systems, e.g., rec-ommending hotspots that are more likely to pick up pas-sengers quickly [34], planning practically fastest route to a given destination [33] or route which provides a optimal sequence of pick-up points [10], and even constructing the spatio-temporal profitability map for drivers to select profit locations [22]. On the other hand, for passengers to take taxi, prior arts may also list location to easily achieve vacant taxi [34], or support them to share taxi with optimal can-didate [21]. Besides, though not directly generating recom-mendation, some other works also focus on the taxi analysis. For instance, [17] discussed about the comparison of top and ordinary drivers based on several ranking schemes, while [15] studied the strategy to pick up passengers with creating tree structure with highest probability. For the anomaly detec-tion, historical trajectories maintained for fast distinguish-ing new trajectories that are isolated [36], and similar way was also utilized to detect the taxi fraud [11] or outlier tra-jactories [9]. Further, some applications were designed based on the taxi driving analysis, e.g., [12] proposed the method to detect traffic jams by searching the GPS records that are close together, and [4] constructed a model to automati-cally determine the capacity of each road segment using taxi GPS data. Finally, [5] leveraged taxi GPS traces to suggest nightly bus routes.

Another related topic of this paper is social network anal-ysis, to be specific, the social influence or spread analysis, and the location-based social network analysis. Since social network structures are analyzed for marketing in [7] for the first time, the social-based  X  X ord-of-mouth X  effect, has be-come one of the hottest issue in recent years, and several prior arts, e.g., [16], [1], and [19] were proposed following [7] that explicitly represent the step-by-step dynamics of influ-ence. Among them, Independent Cascade (IC) model [16] is treated as one of the most widely-studied models with intuitive simulation and simple computation, which moti-vated several linear approximation like [29] and [26]. Based on the definition, some related works targeted at estimat-ing the influence probability, i.e., the edge strength, like [14] discussed effectiveness of several heuristic method to reveal link strength, [24] predicted diffusion probabilities by us-ing the EM algorithm, and [35] investigated the relation-ship between the tie strength and information propagation with several strategies of tie selection. Recently, due to the complexity of evolving social network, more issues were dis-cussed, e.g., [28] studied on how to model the implicit social diffusion with time decay, and [2] discussed about differen-tiation of social influence and homogeneity, as well as the effects of weak ties in social spread.

For the location based social network analysis, the ba-sic issue is whether human mobility indeed reflects social characteristics. Recent studies showed that human mobility is highly repetitive and non-random [13], so did [6] which revealed that 10%-30% of human movement could be ex-plained by social factors, even more evident on long-ranged travel. Also, as comparing the social structure between on-line and offline social network, prior arts [18] announced that more cohesive communities will be found for offline event-driven social networks than the ordinary ones. Since social ties lead to similar mobility patterns and frequent physical contacts, mobility patterns, in return, shape and impact so-cial connections like [8] and [25]. For instance, [3] indicated that the place of gather may benefit community detection. Also, prior arts like [37] discussed about the homogeneity and influence in location based network, and [27] further dis-cussed the dynamic social influence within decision-making of event participation. Finally, some related work studied the offline user behaviors in the perspective of ephemeral social networks , e.g., [39] developed a factor graph model based framework to infer the likelihood of future encounter, and [31] recommended offline geo-friends based on pattern-based heterogeneous information network analysis.

Different from the prior arts, to the best of our knowl-edge, we are the first to investigate the impact of latent social factors within taxi drivers, and leverage it to explain drivers X  future behaviors. Also, to reveal the social connec-tion strength, we formulate the social influence from differ-ence patterns in the perspective of pairwise ranking opti-mization, which is novel compared with related works.
In this paper, we investigated the latent social factors within the latent vehicle-to-vehicle network with simulating the social-driven behaviors pattern change of taxi drivers. To be specific, we proposed a social-driven two-stage frame-work to simulate latent social interactions within taxi drivers, which could better explain drivers X  future behaviors. A unique characteristic of our framework is that it can trans-fer the problem of driving behavior prediction into the form of partial ranking with social influence, which can be re-garded as a pairwise ranking problem for optimization. Ex-tensive experiments conducted on a large-scale real-world data clearly validate the effectiveness of the proposed frame-work, which also prove the hypothesis that social factors indeed affect the driving behaviors of taxi drivers.
As we discussed that though social factors could better ex-plain the pattern fluctuation at most for around 80%, there are still some other key factors, e.g., financial profit or traf-fic environment. In the future, we would like to investigate these factors with more comprehensive prediction frame-work. Also, social-oriented taxi services, e.g., social-based  X  X utor X  or pattern recommendations will be considered. Fi-nally, we will discover whether similar solutions could be used for other service-oriented professions. This research was partially supported by grants from the National Science Foundation for Distinguished Young Schol-ars of China (61325010), the Natural Science Foundation of China (61403358), the Natural Science Foundation of China (71329201), the Science and Technology Program for Public Wellbeing (2013GS340302) and the National High Technology Research and Development Program of China (2014AA015203). Also, Qi Liu gratefully thanks the support of CCF-Intel Young Faculty Researcher Program (YFRP). Finally, Tong gratefully thanks for Guangyi Lv X  X  kind help during the paper writing.
