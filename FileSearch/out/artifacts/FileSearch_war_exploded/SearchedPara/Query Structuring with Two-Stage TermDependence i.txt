 Japanese text retrieval is required to handle several types of problems specific to the Japanese language, such as compound words and segmentation [1]. To treat these problems, word-based indexing is typically achieved by applying a morphological analyzer, and character-based indexing has also been investigated. Some researchers compared this kind of character-based indexing with word-based indexing, and found little difference between them in retrieval effectiveness (e.g., [1,2,3]). Some other researchers made use of supplemental phrase-based indexing in addition to word-based indexing for English (e.g., [4]) or for Japanese (e.g., [5]). However, we believe this kind of approaches is not appropriate for the languages, for instance Japanese, in which individual words are frequently composed into a long compound word and the formation of an endless variety of compound words is allowed.

Meanwhile, the structured query approach has been used to include more meaningful phrases in a proximity search query to improve retrieval effective-ness [6,7]. A few researchers have investigated this approach to retrieval for Japanese newspaper articles [1,3]; however, they emphasized formulating a query using n-grams and showed that this approach performed comparably in retrieval effectiveness with the word-based approach. We are not aware of any studies that have used structured queries to formulate queries reflecting Japanese compound words or phrases appropriately. Phrase -based queries are known to perform effec-tively, especially against large-scale and noisy text data such as typically appear on the Web [8,7]. Again, we have not seen any studies that used structured queries to effectively retrieve web documents written in Japanese.

In this paper, we use the structured query approach using word-based units to capture, in a query, compound words and more general phrases of the Japanese language. Our approach is based on a theoretical framework using Markov ran-dom fields [7]. We experiment using a large-scale web document collection mostly writteninJapanese.  X  X ndri X  is a search engine platform that can handle large-scale document col-lections efficiently and effectively [9]. The retrieval model implemented in Indri combines the language modeling [10] and inference network [11] approaches to information retrieval. This model allows structured queries similar to those used in  X  X nQuery X  [11] to be evaluated using language modeling estimates within the network. Because we focus on query formulation rather than retrieval models, we use Indri as a baseline platform for our experiments. We omit further details of Indri because of space limitations. See [9] for the details.

Metzler and Croft developed a general, formal framework for modeling term dependencies via Markov random fields (MRFs) [7], and showed that the model is very effective in a variety of retrieval situation using the Indri platform. MRFs are commonly used in statistical machine learning to model joint distributions succinctly. In [7], the joint distribution P  X  ( Q, D )overqueries Q and documents D , parameterized by  X  , was modeled using MRFs, and for ranking purposes the posterior P  X  ( D | Q ) was derived by the following ranking function, assuming a graph G that consists of a document node and query term nodes: where Q = t 1 ...t n , C ( G ) is the set of cliques in an MRF graph G , f ( c )issome real-valued feature function over clique values, and  X  c is the weight given to that particular feature function.

Ful l independence ( X  X i X ), sequential dependence ( X  X d X ), and full dependence ( X  X d X ) are assumed as three variants of the MRF model. The full independence variant makes the assumption that query terms are independent of each other. The sequential dependence variant assumes dependence between neighboring query terms, while the full dependence variant assumes that all query terms are in some way dependent on each other. To express these assumptions, the following specific ranking function was derived: where T is defined as the set of 2-cliques involving a query term and a docu-ment D , O is the set of cliques containing the document node and two or more query terms that appear contiguously within the query, and U is the set of cliques containing the document node and two or more query terms appearing noncontiguously within the query. In compound words that often appear for instance in Japanese, the dependencies of each constituent word are tighter than in more general phrases. Therefore, we consider that these term dependencies should be treated as global between query components that make up a whole query and as local within a compound word when the compound word appears in a query component. Metzler and Croft X  X  term dependence model, which we summarized in the previous section, gives a theoretical framework for this study, but must be enhanced when we consider more complex dependencies as mentioned above. In this paper, we propose two-stage term dependence model that captures term dependencies both between query components in a query and between constituents within a compound word.
To achieve the model mentioned above, we extend the term dependence model given in Eq. (2), on the basis of Eq. (1), as follows: where Here, Q consists of query components q 1  X  X  X  q k  X  X  X  q m , and each query component consists of individual terms t 1  X  X  X  t n . T ( Q ), O ( Q )and U ( Q ) can be defined in the same manner as in Eq. (2) with the query components consisting of a whole sisting of a query component. The feature functions f T , f O and f U and another feature functions g T , g O and g U can be given in the same manner as f T , f O and f
U that were defined in Section 2 , respectively. Hereafter, we assumed that the constraint  X  T +  X  O +  X  U = 1 was imposed independently of the query, and as-sumed  X  T =  X  O =  X  U = 1 for simplicity. When Q consists of two or more query components and each of which has one term, Eq. (3) is equivalent to Eq. (2). The model given by Eq. (2) can be referred to as the single-stage term dependence model .When f T ( x )= f O ( x )= f U ( x )= x for any x , Eq. (3) represents depen-dencies only between constituent terms within each query component, which can be referred to as the local term dependence model ; otherwise, Eq. (3) expresses the two-stage term dependence model .

According to Eq. (3), we assumed the following instances, considering special features of the Japanese language [12].
 4.1 Data and Experimental Setup For experiments, we used a 100-gigabyte web document collection  X  X W100G-01 X , which was used for the NTCIR-3 Web Retrieval Task ( X  X TCIR-3 WEB X ) [13] and for the NTCIR-5 WEB Task ( X  X TCIR-5 WEB X ) [14]. We used the topics and relevance judgment data of the NTCIR-3 WEB for training the model para-meters 1 . We used the data set that was used in the NTCIR-5 WEB for testing 2 . All the topics were written in Japanese. The title field of each topic gives 1 X 3 query components that were suggested by the topic creator.

We used the texts that were extracted from and bundled with the NW100G-01 document collection. In these texts, all the HTML tags, comments, and explicitly declared scripts were removed. We segmented each document into words using the morphological analyzer  X  X eCab version 0.81 X  3 .Wedidnotusethepart-of-speech (POS) tagging function of the morphological analyzer for the documents, because the POS tagging function requires more time. We used Indri to make an index of the web documents in the NW100G-01 using these segmented texts. We used several types of stopwords in the querying phase, on the basis of the empirical results reported in [12].

In the experiments described in the following sections, we only used the terms specified in the title field. We performed morphological analysis using the  X  X eCab X  tool described above to segment each of the query component terms delimited by commas, and to add POS tags. Here, the POS tags are used to specify prefix and suffix words that appear in a query because, in the query structuring process, we make a distinction between compound words containing prefix and suffix words and other compound words, as described in Section 3 . 4.2 Experiments for Training Using the NTCIR-3 WEB test collection, we optimized each of the models de-fined in Section 3 , changing each weight of  X  T ,  X  O and  X  U from0to1in steps of 0 . 1, and changing the window size N for the unordered phrase fea-ture as 2, 4, 8, 50 or  X  times the number of words specified in the phrase expression. Additionally, we used (  X  T , X  O , X  U )=(0 . 9 , 0 . 05 , 0 . 05) for each N value above. Note that stopword removal was only applied to the term fea-ture f T , not to the ordered/unordered phrase features f O or f U .Theresultsof the optimization that maximized the mean average precision over all 47 topics ( X  X vgPrec a  X ) are shown in Table 1 . This table includes the mean average preci-sion over 23 topics that contain compound words in the title field as  X  X vgPrec c  X .  X %increase X  was calculated on the basis of  X  X ase X , the result of retrieval not us-ing query structuring. After optimization, the  X  X lsd+ X  model worked best when (  X 
T , X  O , X  U ,N )=(0 . 9 , 0 . 05 , 0 . 05 , (  X  T , X  O , X  U ,N )=(0 . 9 , 0 . 05 , 0 . 05 , 50).

For comparison, we naively applied the single-stage term dependence model using either the sequential dependence or the full dependence variants defined in Section 2 to each of the query components delimited by commas in the title field of a topic, and combined the beliefs (scores) about the resulting structure expressions. We show the results of these as  X  X aive-sd X  and  X  X aive-fd X , respectively, in Table 1 . These results suggest that Metzler and Croft X  X  single-stage term dependence model must be enhanced to handle the more complex dependencies that appear in queries in the Japanese language. For reference, we also show the best results from NTCIR-3 WEB participation [13] ( X  X tcir-3 X ) at the bottom of Table 1 . This shows that even our baseline system worked well. 4.3 Experiments for Testing For testing, we used the models optimized in the previous subsection. We used the relevance judgment data, for evaluation, that were provided by the organiz-ers of the NTCIR-5 WEB task. The results are shown in Table 2 .Inthistable,  X  X vgPrec a  X ,  X  X vgPrec c  X  X nd X  X vgPrec o  X  indicate the mean average precisions over all 35 topics, over the 22 topics that include compound words in the title field, and over the 13 topics that do not include the compound words, respectively.  X %increase X  was calculated on the basis of the result of retrieval not using query structuring ( X  X ase X ). The results show that our two-stage term dependence mod-els, especially the  X  X lfd+ X  model, gave 13% better performance than the baseline ( X  X ase X ), which did not assume term dependence, and also better than the local term dependence models,  X  X sd+ X  and  X  X fd+ X . The advantage of  X  X lfd+ X  over  X  X ase X ,  X  X sd+ X ,  X  X fd+ X  and  X  X lsd+ X  was statistically significant in average precision over all the topics. The results of  X  X vgPrec c  X  X nd X  X vgPrec o  X  imply that our models work more effectively for queries expressed in compound words. In this paper, we proposed the two-stage term dependence model, which was based on a theoretical framework using Markov random fields. Our two-stage term dependence model captures both the global dependence between query components explicitly delimited by separators in a query, and the local depen-dence between constituents within a compound word when the compound word appears in a query component. We found that our two-stage term dependence model worked significantly better than the baseline that did not assume term dependence at all, and better than using models that only assumed either global dependence or local dependence in the query. Our model is based on proximity search, which is typically supported by Indri [9] or InQuery [11].

We believe that our work is the first attempt to explicitly capture both long-range and short-range term dependencies. The two-stage term dependence model should be reasonable for other languag es, if compound words or phrases can be specified in a query. Application to natur al language-based queries, employing an automatic phrase detection technique, is worth pursuing as future work. We thank Donald Metzler for valuabl e discussions and comments, and David Fisher for helpful technical assistance with Indri. This work was supported in part by the Overseas Research Scholars Program and the Grants-in-Aid for Sci-entific Research (#17680011 and #18650057) from the Ministry of Education, Culture, Sports, Science and Technology, Japan, in part by the Telecommunica-tions Advancement Foundation, Japan, and in part by the Center for Intelligent Information Retrieval. Any opinions, findings and conclusions or recommenda-tions expressed in this material are those of the author(s) and do not necessarily reflect those of the sponsor.

