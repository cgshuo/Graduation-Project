 Most queries in web search are ambiguous and multifaceted. Identifying the major senses and facets of queries from search log data, referred to as query subtopic mining in this paper, is a very important issue in web search. Through search log analysis, we show that there are two interesting phe-nomena of user behavior that can be leveraged to identify query subtopics, referred to as  X  X ne subtopic per search X  and  X  X ubtopic clarification by keyword X . One subtopic per search means that if a user clicks multiple URLs in one query, then the clicked URLs tend to represent the same sense or facet. Subtopic clarification by keyword means that users often add an additional keyword or keywords to expand the query in order to clarify their search intent. Thus, the keywords tend to be indicative of the sense or facet. We propose a clustering algorithm that can effectively leverage the two phenomena to automatically mine the major subtopics of queries, where each subtopic is represented by a cluster containing a num-ber of URLs and keywords. The mined subtopics of queries can be used in multiple tasks in web search and we evalu-ate them in aspects of the search result presentation such as clustering and re-ranking. We demonstrate that our clus-tering algorithm can effectively mine query subtopics with an F1 measure in the range of 0.896-0.956. Our experi-mental results show that the use of the subtopics mined by our approach can significantly improve the state-of-the-art methods used for search result clustering. Experimental re-sults based on click data also show that the re-ranking of search result based on our method can significantly improve the efficiency of users X  ability to find information. H.3 [ INFORMATION STORAGE AND RETRIEVAL ]: Information Search and Retrieval Algorithms, Experimentation Search Log Mining, User Behavior, Query Subtopics, Clus-tering, Search Result Clustering
Understanding the search intent of users is essential for satisfying a user X  X  search needs. How to best represent query intent is still an ongoing research problem. One consensus among the researchers is that the intents of queries can be characterized along multiple dimensions. The intents of a query can be represented by its search goals, such as infor-mational, navigational, and transactional [7]. It can also be represented by semantic categories or topics [8, 23, 24]. Furthermore, it can be represented by subtopics (cf., [14]), denoting multiple senses or multiple facets of the query.
Most queries are ambiguous or multifaceted [14]. For ex-ample,  X  X arry shum X  is an ambiguous query, which may refer to an American actor, a vice president of Microsoft, or an-other person named Harry Shum.  X  X box X  is a multifaceted query. When people search for  X  X box X , they may be look-ing for information on different facets of an Xbox, such as  X  X nline game X ,  X  X omepage X , and  X  X arketplace X . Note that a query can be both ambiguous and multifaceted. The more frequent a query is, the more likely that it has multiple senses or facets. The major difference between the topics and subtopics of a query is that the former is more coarse-grained and related to other queries, while the latter is fine-grained and is only about the query in question.

Identifying the major subtopics of a query is very impor-tant for many search tasks such as personalized search, query suggestion, and search result presentation including cluster-ing, re-ranking, and diversification. In this paper, we aim to automatically mine the major subtopics (senses and facets) of queries from the search log data. Although there is some related work, the subtopic mining problem as defined in this paper does not seem to have been studied previously.
We performed a comprehensive study of the two phenom-ena, referred to as  X  X ne subtopic per search X  (OSS) and  X  X ubtopic clarification by additional keyword X  (SCAK) re-spectively. We show that we can mine the subtopics of queries from search log data by effectively using the phe-nomena. We then represent the senses or facets of a query b y a number of URLs and keywords. We observe that this can be done with high accuracy for head queries. Although the phenomena have been observed or mentioned in pre-vious work (cf., [26]), there has not been a detailed study conducted on them, as far as we know.

If a user clicks multiple URLs after submitting a query (the multiple URLs are also referred to as multi-clicks in this paper), then the clicked URLs tend to represent the same subtopic, which is called one subtopic per search (OSS). Figure 1 shows an example of search results for the query  X  X arry shum X  on a web search engine. The result contains URLs about two Harry Shum X  X . The search log data in-dicates that URLs 1, 3, and 5 are usually clicked together in individual searches, and URLs 2 and 4 are clicked to-gether. Each group of URLs actually corresponds to one sense, i.e., one subtopic. Gale and Church discovered a sim-ilar phenomenon in natural language texts, called  X  X ne sense per discourse X  [19], which means an ambiguous word usually only has one sense in a specific context. Users often add ad-
Fi gure 1: Search result for query  X  X arry Shum X . ditional keywords (in most cases, one additional keyword) to a query to expand the query in order to clarify its subtopic. This phenomenon is called subtopic clarification by addi-tional keyword (SCAK). As a result, the URLs clicked after searching both with the original and the expanded queries tend to represent the same subtopic and the keyword also tends to be indicative of the subtopic. For example, people may submit  X  X arry shum microsoft X  as an expanded query to specify the subtopic. The URLs clicked in searches for both  X  X arry shum X  and  X  X arry shum microsoft X  usually rep-resent the same subtopic, Harry Shum from Microsoft, and therefore  X  X icrosoft X  becomes a keyword of the subtopic.
We employ a clustering algorithm to group URLs as well as keywords into clusters, where each cluster represents one subtopic of a query. For example, one cluster for query  X  X arry shum X  may contain the home page of the Microsoft Harry Shum, his wiki profile, and the keywords  X  X icrosoft X  and  X  X ing X . The clustering is performed based on the two phenomena of user behavior, as described above. Specifi-cally, for each query and its expanded queries (the original query plus keywords), the related click log data is collected. Clustering is then carried out on all the clicked URLs. If two URLs are clicked together many times in the click data, then they are likely to be clustered together. If two URLs are clicked both under the original and expanded queries, then they are likely to be clustered together. We employ a special data structure consisting of a prefix tree and a suffix tree to facilitate recursive execution of the clustering algo-rithm on the log data. In this way, the mining of subtopics can be conducted very efficiently.

We conducted experiments to measure the accuracy of our clustering method on a TREC data set and a new data set in which the subtopics of both queries are labeled. For ambiguous subtopics, our method can achieve a B-cubed F1 from 0.925 to 0.956. For multifaceted subtopics, our method can achieve a B-cubed F1 from 0.896 to 0.930 in terms of B-cubed F1. The results indicate that our method can effectively perform query subtopic mining.
 We also evaluated our method in search result clustering. We compared our method with a state-of-the-art method of search result clustering. Experimental results show that our method can significantly improve accuracy. The improve-ments are 5.4% in terms of B-cubed precision and 6.1% in terms of B-cubed recall. When compared side-by-side with human generated results, we also find that our method is significantly better than the baseline.

We further evaluated our method on search result re-ranking, in which the user is confirmed with the subtopic she has in mind and re-ranking of search results based on user feedback is performed. We used the average click posi-tion in the log data as the evaluation measure. The results show that our method can boost the average click position 0.61 points higher, which implies a promising improvement in the user experience.

There are three major contributions in our work: 1. We have analyzed two phenomena in user search be-havior that can be utilized to identify query subtopics. 2. We have developed a clustering method that can effec-tively and efficiently mine the subtopics on the basis of the phenomena and use them to represent query subtopics. 3. We have successfully applied the mined results to two tasks: search result clustering and re-ranking.

The rest of the paper is organized as follows. Section 2 introduces related work. Section 3 describes the detailed analysis of user behavior in the log data for subtopic min-ing. Section 4 explains our approach to subtopic mining and Section 5 presents the experimental results. Section 6 presents two applications of our subtopic mining algorithm. Section 7 concludes the paper.
The intent of a query can be characterized along several dimensions, including search goals [7], semantic classes [5], topics [4], and subtopics [14]. The search goals can be informational, navigational, or transactional. The seman-tic classes of a query can be represented by ODP cate-gories 1 . The topics or subtopics of a query can be repre-sented by a number of queries or URLs. Topics are usually more coarse-grained and can cover multiple queries, while subtopics are more fine-grained and associated with a spe-cific query [14]. For example, for the query  X  X box X , all aspects related to Xbox including online game, market place, and even other game consoles are usually included in the topic of the query. In contrast, each aspect of Xbox is represented by one subtopic of the query.

Mining topics from search log data has been intensively
Op en Directory Project: http://www.dmoz.org/. st udied 2 . Click-through bipartite graph data can be used for clustering queries and URLs. Specifically queries which share the same clicked URLs are considered similar. Meth-ods for performing the task have been proposed (e.g., [4, 10, 15, 18, 21, 25, 27]). Beeferman et al. [4], for example, proposed conducting clustering on a click-through bipartite graph and viewing the obtained clusters as topics covering multiple queries. Radlinski et al. [25] proposed first using search session data to find similar queries, and then using a click-through bipartite graph to refine the discovered queries that are similar, and finally grouping the similar queries into the same clusters. The clusters containing the same query are then regarded as topics of the query.

There are some similarities but also significant differences between our work and Radlinski et al. X  X  work. 1) The prob-lem settings are different. In their work, a subtopic is rep-resented by multiple queries, while in our work a subtopic is represented by keywords and URLs. 2) The information used for subtopic mining is different. They used search ses-sions to find frequently co-occurring query pairs, considered them candidates of similar query pairs, and finally used a click-through bipartite graph to filter unlikely queries. 3) The goals are also different. The mined results in their work were utilized for manual creation of TREC data. In this pa-per, we quantitatively evaluated our method on two search tasks, namely search result clustering and re-ranking.
Methods for utilizing a user X  X  click behavior in individual searches have been developed, e.g., [12, 15]. Existing work aimed at modeling and predicting a user X  X  click behavior while our work attempts to find the subtopics of queries. The exploitation of the prefix and suffix relationship between queries was also considered in the previous work, e.g., [26]. In our work, we not only use the prefix and suffix relationship between queries, but also the clicked URLs of the queries and our goal is to conduct query subtopic mining.
When a query is ambiguous or multifaceted, presenting its search result by sense or facet to users would improve the search experience [9]. Many methods have been proposed, including search result clustering and dynamic ranking.
Search result clustering attempts to cluster the search re-sults according to semantic classes, topics, or subtopics [11]. For example, Chen and Dumais [13] proposed using text classification technologies to classify search results into pre-defined categories. Zeng proposed using text clustering tech-niques to cluster a research result based on the titles and snippets of web pages [29]. See also [2, 16, 17]. The major characteristic of these methods is that they use the content of documents in search result clustering.

Wang and Zhai further extended the idea and proposed exploiting the search results of the current query as well as the search results of similar queries [26]. They first build query relationships. For each query, similar queries are found from previous search sessions. They then perform cluster-ing on the clicked URLs of the query and its similar queries. They use the titles and snippets of web pages for similarity calculation. The major difference between their work and our work is that they did not consider mining and utiliza-
Th e topics or subtopics of queries cannot be obtained by simply clustering the search results (documents) of queries [25].
 Table 1: Multi-clicks in search logs of  X  X arry shum X  tio n of query subtopics. In this paper, we use Wang and Zhai X  X  method as the baseline for search result clustering.
Recently, Brandt et al. proposed a new search UI called dynamic ranking model [6]. The mined subtopics by our method can also be used in the dynamic ranking model. Specifically, when the user hovers the mouse on an URL in the UI, we can dynamically show the other URLs in the same subtopic under the mouse-hovered URL.
One subtopic per search (OSS) means that the jointly clicked URLs in a specific search are likely to represent the same subtopic. We conducted analysis on the phenomenon with a search log data set from a commercial web search en-gine (DataSetA as described in Table 8) and validated the correctness of this hypothesis. Our explanation of the phe-nomenon is: 1) Search users are rational and they do not randomly click on search results (cf., [1, 20]). 2) Users usu-ally have one single subtopic in mind for a particular search.
Table 1 shows two groups of multi-clicked URLs (i.e., the multiple URLs clicked by a user in a query) from search logs for the query  X  X arry shum X . The three URLs in the first group are about one sense and the two URLs in the second group are about another sense. Users may accidently click URLs belonging to two different groups, but such cases are rare. This is reasonable, because if a user searches for a specific person then she usually would only click the URLs about the person and skip the URLs about other people. We call such user behavior  X  X ne subtopic per search X . We examined the accuracy of using one subtopic per search as a rule for subtopic identification. By accuracy we mean the percentage of the multi-clicks that share the same subtopics among all multi-clicks. We sampled 10,000 groups of multi-clicks of individual queries in DataSetA, which are labeled based on the sense or facet. When all the URLs within the multi-clicks are about the same sense or facet, we consider that the rule has correctly identified a subtopic. Table 2 shows the accuracy versus the number of multi-clicks. We can see that the average accuracy of one subtopic per search is about 84%, suggesting that it is very helpful for identifying the subtopics of queries. Table 2 also shows that the accu-
Table 2: Accuracy of rule v.s. number of clicks rac y will decrease when the number of URLs in a group of multi-clicks increases. That is to say, the more URLs there are clicked in a search, the less likely that the URLs share the same subtopic. Clicking many URLs in one query may indicate that the user is uncertain about what she is looking for or wants to learn about all aspects of the query. We also observe that the higher the frequency a group of multi-clicks has, the more likely they share the same subtopic. Figure 2 shows the relation between accuracy and frequency. When a multi-click is only observed twice in the log data, the av-erage accuracy is 0.779. In contrast, when it happens more than 100 times, the accuracy can be as high as 0.880. We in vestigated the relationship between the click positions and the accuracy of the rule. Table 3 shows the results.  X  X ame subtopic X  means that the rule is correct and the results rep-resent the same subtopic.  X  X ifferent subtopic X  means that the rule is incorrect and the results represent different top-ics. We can see that click positions do not affect the one subtopic per search phenomenon.

Figure 3 shows the percentages of queries with multi-clicks. The queries with higher frequencies in search log data are more likely to have multi-clicks. For example, for the top 1% frequent queries in the search logs (corresponding to about 50% of search traffic), more than 90% of them have multi-clicks. Therefore, the phenomenon of one subtopic per search can help query subtopic mining for head queries.
Many short queries are simply noun phrases, and long queries often contain short queries plus additional keywords, in which the keywords clarify the subtopics of the short queries. We refer to a short query as the original query, and longer queries containing the short query as expanded queries. The clicked URLs after searching with the origi-nal query and the expanded queries tend to represent the same subtopic. The keywords can also become labels of the subtopic. This is the phenomenon of subtopic clarification by additional keyword. The phenomenon can be explained in the following ways: 1) Search users are rational users. 2) Sometimes users tend to add additional keywords to spec-Fi gure 3: Distribution of top n% queries having multi-clicks. ify the subtopics in their minds. We have also empirically validated the correctness of this hypothesis.

Table 4 shows the expanded queries and their clicks with respect to the query  X  X arry shum X  in the search log data. From the table, we can see that the clicked URLs of query  X  X icrosoft harry shum X  also appear in the former group of URLs corresponding to Harry Shum of Microsoft. The clicked URLs of  X  X arry shum jr X  can be found in the latter group of URLs corresponding to the actor Harry Shum. The key-words  X  X icrosoft X  and  X  X r X  can be used to represent the two groups (subtopics) respectively. Therefore, each expanded query covers one subtopic of the original query with the keyword as the label of the subtopics.

We conducted analysis on the patterns of queries. We clas-sified queries into four types. If the query is a single phrase, usually a noun phrase, then the type is  X  Q  X . The other three types are  X  Q + W  X ,  X  W + Q  X , and  X  X thers X , where  X  W  X  de-notes a keyword and  X  Q  X  denotes a phrase. We estimated the distribution of the four types. We randomly selected 1,000 queries from the search log data. For each query, we checked whether it might be an expansion of another query. More specifically, we enumerated all queries that could be expanded from the considered query. The most reasonable query-expanded query pair is selected and then the query type is labeled. The clicked URLs were also used to help make the judgments. The distribution of query types is pre-sented in Table 5. From the table, we can see that the types  X  Q + W  X  and  X  W + Q  X  consist of about 42% of the queries.  X  Q + W  X  is more popular than  X  W + Q  X . We further examined wh ether the subtopics of the expanded queries are covered by those of the original queries. In other words, given two queries with the types  X  Q  X  and  X  Q + W  X , we judged whether the subtopics of the latter are contained in the subtopics of the former. We randomly selected 500 pairs of queries with the forms  X  Q  X  and  X  Q + W  X , where the queries in Q form are from DataSetA, and studied the relationship between the subtopics of the original query and expanded query. If subtopics of an expanded query are contained in subtopics of the original query, then we say there is  X  X ubtopic overlap X  b etween the two. We also checked whether two queries share identical clicked URLs, and if so we call it  X  X RL overlap X . In the investigation we found there is no significant differ-ence between the results of queries in the forms  X  Q + W  X  and  X  W + Q  X . Thus, we merged the two types. Table 6 shows Table 6: Relation of subtopic overlap and URL over-lap between query and expanded query pair Al l query pairs 0.814 0.186 S ubtopic overlap 0.801 0.199
None subtopic overlap 0.183 0.817 th e results. From the results, we can see that 81.4% of ex-panded queries have URL overlap with the original queries, and 18.6% of expanded queries do not. For the expanded queries with URL overlap, 80 . 1% of them have subtopic over-laps with the original queries. For the expanded queries without URL overlap, 81 . 7% of them do not have subtopic overlap with the original queries. For example,  X  X eijing X  and  X  X eijing duck X ,  X  X ast X  and  X  X ast food X , and  X  X omputer science X  and  X  X omputer science department X  do not have URL over-lap, and they do not have subtopic overlap either. Hence we can exploit URL overlap to filter out unrelated  X  X xpanded queries X  (they are not  X  X rue X  expanded queries), and use the subtopics of the remaining expanded queries to help identify the subtopics of the original queries. This becomes another rule for subtopic mining.

We also investigated the percentage of queries the rule can be applied. Figure 4 shows the more popular (frequent) a query is, the more likely the rule is applicable. For the top 1% frequent queries (about 50% of search traffic), about 88% have expansions, and on average there are 89 expanded queries for each query. The results indicate the identification by keyword rule can be used for subtopic mining. Fi gure 4: Distribution of top n% queries having ex-panded queries.
We employ a clustering method to mine subtopics of queries leveraging the two phenomena and search log data. The flow of the method is shown in Figure 5. In the preprocessing stage, we build an index to store all the queries and their clicked URLs. False expanded queries are then pruned from the index. In the clustering stage, the URLs associated with a query and its expanded queries are grouped into clusters, each representing one subtopic. In the post-processing stage, keywords are assigned to the clusters (subtopics) to enrich the representations of subtopics.

We first index all the queries in an index consisting of a prefix tree and a suffix tree to facilitate efficient clustering. We only consider queries in three forms ( X  X  X ,  X  Q + W  X  and  X  W + Q  X ), as discussed in Section 3.2.

We then segment queries and index them. In the prefix tree, query  X  X  X  and its expanded queries  X  X +W X  are indexed in a father node and child nodes respectively. Search log data of each query is also stored in its node. With the prefix tree, we can easily find the expanded queries of any query. In the suffix tree query  X  X  X  and its expanded queries  X  X +Q X  are indexed as a father node and child nodes respectively. Figure 6 illustrates the data structure. For query  X  X arry shum X , we can easily find its expanded queries  X  X +W X  from the prefix tree, such as  X  X arry shum jr X ,  X  X arry shum glee X , and  X  X arry shum bing X . We can also easily find its expanded queries  X  X +Q X  from the suffix tree, such as  X  X icrosoft harry shum X  and  X  X ctor harry shum X .
We then remove the false expanded queries from the prefix and suffix trees by using a heuristic rule: If a query  X  Q  X  does not have URL overlap with its expanded queries  X  X +W X  Fi gure 6: The data structures to index search logs. and  X  X +Q X  (i.e., there is no clicked URL shared by the queries), then those expanded queries will be viewed as false expanded queries and pruned from the trees. For example,  X  X ast food X  and  X  X ast X  do not have URL overlap, and thus  X  X ast food X  will be pruned as a child node of  X  X ast X . Similarly,  X  X ot dog X  and  X  X og X  do not have URL overlap so  X  X ot dog X  will be pruned as child node of  X  X og X . This heuristics is based on the discussions in Section 3.2. After pruning, only the  X  X rue X  expanded queries are stored in the prefix and suffix trees.
We conduct clustering on the clicked URLs of each query and its expanded queries. Since all the queries are indexed in the trees, the clustering can be performed locally and recursively on the trees. The clustering of clicked URLs is guided by the two phenomena described in Section 3. After clustering, each group of clustered URLs is taken as one subtopic of the query in the father node.
The clustering is repeatedly conducted on the clicked URLs of a query and its expanded queries on the trees. The sim-ilarity function between two clicked URLs is defined as a linear combination of three similarity sub-functions.
Specifically, the similarity function between URLs u i and u j is defined as
Here S 1 is a similarity function based on the OSS phe-nomenon, S 2 is based on the SCAK phenomenon, S 3 is based on string similarities, with  X  ,  X  , and  X  as weights. S 1 is defined as where  X  X  u i and  X  X  u j denote the vectors of multi-clicks of u and u j respectively,  X   X  denotes the dot product, and jjjj denotes the L 2 norm. Each element of the vector corre-sponds to one multi-click pattern, and its value represents the frequency of the multi-clicks. Intuitively, URLs u i and u j will become similar if they frequently co-occur. S 2 is defined as where  X  X  u i and  X  X  u j denote the vectors of keywords associ-ated with u i and u j respectively, denotes the dot product, and jjjj 2 denotes the L 2 norm. Note that there is a null keyword, which is associated with the original query (father node). Intuitively, URLs u i and u j will become similar if they are clicked in searches of expanded queries containing the same keywords. Figure 7 shows the clustering of URLs u , u 2 , u 3 , etc on query q and its expanded queries q + w 1, q + w 2, and q + w 3. The URLs are represented by vectors with each element corresponding to one keyword. S 3 sim-Fi gure 7: Example of clustering using subtopic clar-ification by keyword. ply represents the similarity between u i and u j as strings. Intuitively, two URLs will be viewed as similar if there are many words shared by the two URLs [22]. To conduct a similarity calculation, we segment a URL into tokens based on the slash symbols, and calculate the cosine similarity of the tokens as S 3 .
We employ an agglomerative clustering algorithm to per-form clustering. The algorithm has the advantage of ease of implementation. One can also consider employing other clustering algorithms. The specific algorithm is as follows:
Step 1: Select one URL and create a new cluster con-taining the URL.

Step 2: Select the next URL u i , and make a similarity comparison between the URL and all the URLs in the exist-ing clusters. If the similarity between URL u i and URL u in one of the clusters is larger than threshold  X  , then move u i into the cluster. If u i cannot be joined to any existing clusters, create a new cluster for it.

Step 3: Finish when all the URLs are processed.
The output of the clustering process is clusters of URLs for each query and its expanded queries. The clusters which consist of only one URL are excluded. Each cluster repre-sents one subtopic of the query. We further extract key-words from the expanded queries and assign them to the corresponding cluster as subtopic labels. As a result, each cluster not only consists of URLs but also retains keywords as cluster labels. The subtopic popularity can be further es-timated from the frequency of clicked URLs in each cluster.
Table 7 shows the mined search subtopics of query  X  X arry shum X . The first subtopic has three keywords and two URLs and the second subtopic has three keywords and three URLs.
We carried out experiments on the accuracy of our method with three data sets. The first dataset (TREC Data) is from the TREC search result diversification track 3 in 2009. About 7% of URLs in the data set are not accessible on the web now, so we removed them and added new URLs in the search results of the queries at a commercial search engine. The remaining two datasets consist of queries and URLs randomly sampled from the logs of the commercial search engine in the EN-US market from June 1st, 2010 to March 31st 2011. To reduce the data size, we selected queries which occurred at least two times in one week during a year. Human assessors labeled the subtopics by grouping the URLs associated with the queries. The guideline for the la-beling is exactly the same as that in TREC. For ambiguous queries, it is usually easy to make distinctions between the subtopics of the queries. For multifaceted queries, it is some-times difficult to make distinctions between the subtopics. We asked the assessors to refer to the examples in the TREC data as a spec in their data labeling. Table 8 gives the statis-tics of the datasets.  X  X ixed queries X  means that the queries are both ambiguous and multi-faceted.
 # of items TREC DataSetA DataSetB Qu eries 50 100 50 URLs 6,498 9,657 4,899 Subtopics 243 1,415 / Am biguous queries 11 57 20 Multifaceted queries 39 19 24
Mixed queries 0 24 6
The quality of a clustering algorithm is usually measured in terms of purity and inverse purity. Recently, Amigo et al. [3] showed that B-cubed precision, recall and F1 are more suitable for the evaluation of clustering results, thus we adopted those measures for evaluation.

We split DataSetA into three parts and used 1/3 of them for parameter tuning and 2/3 of them for evaluation. The entire TREC dataset was used for evaluation. There are four parameters in our algorithm:  X  ,  X  , and  X  in the similarity function, and  X  in the clustering algorithm. We tune the parameters heuristically. First, we set all parameters at the value 0.3. Then we increase or decrease the parameter value in increments of 0.05. After several rounds of tuning, we found the final  X  ,  X  ,  X  , and  X  were 0.35, 0.4, 0.25, and 0.3, respectively. h ttp://trec.nist.gov/data/webmain.html
Table 9 shows the accuracy of our methods on the two data sets for ambiguous queries, multifaceted queries, and mixed queries. The experimental results indicate that our Table 9: Accuracy of subtopic mining for different types of queries Dat a Set Qu ery Type B -cubed B -cubed B-cubed TRE C A mbiguous 0 .918 0. 932 0. 925 DataSetA M ultifaceted 0 .937 0. 924 0. 930 ap proach performs quite well in the subtopic mining task. To understand the effect of each similarity sub-function, we conducted another experiment with the two datasets com-bined together and Table 10 reports the results. We can see Table 10: Accuracy of subtopic mining with different similarity functions on the  X  X ombined X  data set th at all three similarity sub-functions can achieve high pre-cision, which indicates that the two phenomena described in Section 3 really exist. The recalls of the three functions are not so high, however, mainly due to the sparseness of the available data. By combining the uses of all the similarity sub-functions, we can significantly improve the recalls while maintaining high precision.

The clustering accuracy in Table 10 differs from the ac-curacy in finding subtopics using the two rules in Section 3. There are two main reasons for this. First, different evalu-ations are made. Table 10 shows the accuracy of subtopic mining using clustering. Section 3 shows the accuracy of individual rules without using clustering. Second, different evaluation measures are utilized.
We consider two applications, search result clustering and re-ranking, and evaluate our method within the applications.
Search result clustering is about grouping the URLs in the search result of a query by subtopics. Many methods have T able 12: Accuracy comparison from various per-spectives b een proposed for search result clustering. Wang and Zhai X  X  method [26] can be viewed as state-of-the-art and we take it as a baseline. We conduct comparisons in two settings: accuracy comparison and side by side comparison.
Our method conducts query subtopic mining offline and stores the mined results in a database. Once the search re-sults for a query are given by the search system, our method performs search result clustering online. Specifically, our method first refers to the database and finds the subtopics of the query, each of which may contain several URLs. For each search result, our method then takes the subtopics of the query as seed clusters. There might be some URLs which do not belong to any of the mined subtopics. We calculate cosine similarity between them and the URLs in the existing clusters by using the TFIDF of terms in titles and snippets. We then assign those URLs to the existing clusters or create new clusters on the basis of the calculated similarities and regard them as the final search result clusters.
We compared our method with the baseline method on ambiguous queries, multifaceted queries, and mixed queries, respectively. Table 11 shows the detailed comparison be-tween our method and the baseline.

From the results, we can see that our method outperforms the baseline method. When combining the two datasets, the improvement of our method over the baseline is 5.4% in terms of B-cubed precision, 6.1% in terms of B-cubed recall, and 5.9% in terms of B-cubed F1 respectively.
We also compared our method with the baseline side-by-side. We created a new dataset referred to as DataSetB. DataSetB contains 50 queries and includes all three types of queries. First we applied both our method and the baseline to each query to obtain two sets of clustering results. Then, we showed the two results to two assessors to perform side by side evaluations. To avoid bias, we randomly swapped the sides of the two results. The assessors could not figure out which result was from which approach.

Several measures were used for evaluation of the results by each method: purity, diversity, coverage, and granular-ity. Purity is similar to precision and coverage is similar to recall. Diversity shows the difference between clusters. Granularity means how specific the cluster is. An ideal clus-tering should have high purity, high diversity, high coverage and fine granularity. We asked the assessors to give a score (1 to 5) for each measure.

Table 12 shows the average scores of the methods in terms of the measures for all 50 queries. The results show that our approach is much better than the baseline. The overall improvement is about 28%.

Table 13 shows the side-by-side evaluation results aver-aged over the 50 queries. When conducting an evaluation, the assessors made judgments on which result was better using three labels:  X  X etter than, X   X  X qually good, X  and  X  X orse than. X  The results show that for about 60% of the queries, our method is better than the baseline; for about 21% of the queries, our method is equal to the baseline. We found that the clusters generated by our method are easier for humans to understand than the baseline.

When analyzing the results, we found the clusters gener-ated by our approach are more accurate and natural (easy to understand) than the clusters generated by the baseline. This indicates that the clustering of URLs from a user X  X  per-spective (log mining based) can achieve better results than from a content creator X  X  perspective (content based).
Our approach outperforms the baseline approach in terms of F1 measure for ambiguous, multifaceted, and mixed queries. The improvements of our approach on recall are larger than the improvements on precision. This is because our ap-proach starts from the mined subtopics that cover the main subtopics of queries. On the contrary, the baseline has no such information, and it tends to generate larger clusters. The improvement of our method over the baseline on the TREC data is not as high as those on DataSetA. Because in the TREC data, each subtopic consists of about 26.7 URLs while in DataSetA each subtopic only consists of about 6.8 URLs. In other words, DataSetA has finer grained subtopics than the TREC data. When the granularity of subtopics is coarser, our method can benefit less from log mining.
Here we show three examples of results given by the two methods. For simplicity, we only show the labels (subtopics) of URLs in each cluster. The first example is an ambiguous query, the second is a multifaceted query, and the third is a mixed query. We can see that our method often gives more specific clusters (subtopics) while the baseline tends to produce more general clusters (subtoipcs).
 Table 14: Examples of comparison between our ap-proach and baseline
We consider another search task for the evaluation of our subtopic mining method, namely, search result re-ranking. We chose to do so because we can easily use click-through data to conduct quantitative evaluation.
When the search system provides the results to the user, there might be multiple ways to present it if the query contains multiple subtopics, i.e., it is ambiguous or multi-faceted. These include simple ranking, clustering of URLs by subtopics, dynamic ranking of URLs belonging to the same topic, as well as re-ranking of URLs by subtopics.
Re-ranking is conducted in the following way. The user is first asked which subtopic she is interested in, with the subtopics shown at the top of the results page. When the user selects a subtopic, the URLs belonging to the subtopic will be moved to the top (re-ranked). The relative order be-tween URLs inside and outside of the subtopic will be kept. The subtopics are assumed to be represented by keywords of subtopics mined with our method.

Figure 8 shows an example UI in which re-ranking is per-formed for the query  X  X arry shum. X  The second subtopic of the query is selected and all the URLs belonging to it are re-ranked at the top. This will significantly improve a user X  X  experience compared with the conventional approach (Figure 1). Although re-ranking is a simple, interactive ap-proach to search results presentation (cf., [28]), there seems to be no study before on the approach to the best of our knowledge. Note that re-ranking can only be done for head queries, because it is based on log data mining, which is a shortcoming that any data mining method may suffer from.
We collected search log data of 20 , 000 randomly selected searches at the commercial search engine, for which the query has at least two subtopics mined by our method. The search log data contains the ranking results of URLs as well as the clicks on URLs in the searches. We used the data to estimate how much the cost of users X  searches can be saved by re-ranking based on our subtopic mining method. Fi gure 8: Example of search result re-ranking.
 We first calculated the average position of last clicked URLs in the 20 , 000 searches. The result is 3 . 41. The num-ber indicates the average cost of finding information in the conventional search UI based on ranking.

Next, we used the same log data to estimate the cost for users based on re-ranking. We assumed that the cost for the user to check the subtopics and click one of them is 1 . 0, because the subtopics are shown in one line at the top, and examining them is almost equivalent to examining the title and snippet of a URL. The cost of finding the last click within each selected subtopic can be calculated by using the search log data, because within the subtopic the ranking order is preserved. Note that because of the one subtopic per search phenomenon, the clicked URLs in a search usually belong to the same subtopic. We calculated the average position of last clicked URLs belonging to the same subtopics in the 20 , 000 searches and found that it is 1 . 80.
The cost saved in the re-ranking may be calculated as This is the result for the saved cost per search. Similarly, we can estimate the saved cost per query, which is 0.7. We can conclude, therefore, that the re-ranking method can reduce a user X  X  effort in finding information, and thus our method of subtopic mining is effective.
In this paper, we have studied the problem of query subtopic mining. Specifically, we have discovered two phenomena of user search behavior that can be used as signals to mine ma-jor senses and facets of ambiguous and multifaceted queries. One is called one subtopic per search and the other subtopic clarification by additional keyword. We have developed a clustering algorithm that can effectively and efficiently mine query subtopics on the basis of the two phenomena. We have evaluated the effectiveness of the proposed approach. On the TREC dataset, the F1-measure is 0.925 for find-ing ambiguous subtopics and 0.896 for finding multifaceted subtopics. When applied to search result clustering, our method can improve precision by 5.4% and recall by 6.1%. The effectiveness of our method has also been verified in search result re-ranking, using click data.

There are several issues we want to further explore to en-h ance our current work. First, only three types of features were used in the current clustering algorithm. We plan to investigate the use of other features to further improve the accuracy. Second, we only tried one clustering algorithm as an example. Other existing algorithms can be applied as well. Third, the mined subtopics by our method were only applied to two applications, and they can be useful in other applications as well. We also plan to try some other appli-cations such as personalized search and search result diver-sification. Finally, our method can only be employed when there is enough search log data, which is also a drawback for most log mining algorithms. How to apply the approach in tail queries is also an issue we need to consider.
This research was done when the second author was vis-iting MSRA, her research was supported by the SPKLSTN Lab (National Science Foundation of China under Grant No. 60825202, 61173112, and Cheung Kong Scholar X  X  Program). Jian Pei X  X  research is supported in part by an NSERC Discovery Grant, a BCFRST NRAS Endowment Research Team Program project, and a GRAND NCE project. [1] E. Agichtein, E. Brill, and S. Dumais. Improving web [2] O. Alonso and M. Gertz. Clustering of search results [3] E. Amig  X o, J. Gonzalo, J. Artiles, and F. Verdejo. A [4] D. Beeferman and A. L. Berger. Agglomerative [5] S. Beitzel, E. Jensen, A. Chowdhury, and O. Frieder. [6] C. Brandt, T. Joachims, Y. Yue, and J. Bank.
 [7] A. Z. Broder. A taxonomy of web search. Sigir Forum , [8] A. Z. Broder, M. Fontoura, E. Gabrilovich, A. Joshi, [9] M. Burt and C. L. Liew. Searching with clustering: [10] H. Cao, D. Jiang, J. Pei, Q. He, Z. Liao, E. Chen, and [11] C. Carpineto, S. Osi  X nski, G. Romano, and D. Weiss. A [12] O. Chapelle and Y. Zhang. A dynamic bayesian [13] H. Chen and S. Dumais. Bringing order to the web: [14] C. L. A. Clarke, N. Craswell, and I. Soboroff. [15] N. Craswell and M. Szummer. Random walks on the [16] H. Deng, I. King, and M. Lyu. Entropy-biased models [17] P. Ferragina and A. Gulli. A personalized search [18] S. Fujita, K. Machinaga, and G. Dupret. Click-graph [19] W. Gale, K. Church, and D. Yarowsky. One sense per [20] T. Joachims. Optimizing search engines using [21] R. Jones and K. Klinkner. Beyond the session [22] M. Kan and H. Thi. Fast webpage classification using [23] Y. Li, Z. Zheng, and H. K. Dai. Kdd cup-2005 report: [24] H.-T. Pu, S.-L. Chuang, and C. Yang. Subject [25] F. Radlinski, M. Szummer, and N. Craswell. Inferring [26] X. Wang and C. Zhai. Learn from web search logs to [27] J.-R. Wen, J.-Y. Nie, and H.-J. Zhang. Clustering user [28] X. Yuan and N. J. Belkin. Supporting multiple [29] H. Zeng, Q. He, Z. Chen, W. Ma, and J. Ma. Learning
