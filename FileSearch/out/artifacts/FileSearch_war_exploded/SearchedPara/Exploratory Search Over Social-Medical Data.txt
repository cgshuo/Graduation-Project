 In this demo we shall present the IBM Patient Empower-ment System (PES), and more specifically, its social-medical discovery sub-system. Social and medical data are repre-sented using entities and relationships and are explored us-ing a combination of expressive, yet intuitive, query lan-guage, faceted search, and ER graph navigation. While this demonstration focuses on the healthcare domain, the un-derlining search technology is generic and can be utilized in many other domains. Therefore, this demo has two main contributions. First, we present a novel entity-relationship indexing and retrieval solution, and discuss its implementa-tion challenges. Second, the demonstration depicts a practi-cal entity-relationship discovery technology in a real domain setting within a real IBM system.

The IBM Patient Empowerment System (IBM PES) is a novel clinical decision support system (CDSS) developed in collaboration between three IBM labs and the GIL hospital in Korea. IBM PES empowers the patients and helps to in-crease patient safety by assisting patients and their medical providers with daily medical decision-making. Each patient in IBM PES acts as a unique source of information such as patient X  X  family history, life style (e.g., nutrition, social or physical habits), over the counter drug consumption, etc. Every patient also acts as a  X  X ata hub X  for external sources, e.g., clinical data records such as treatment plans and lab tests, genomic and sequencing data, etc.

IBM PES includes a convenient web portal (see Figure 1) where patients can manage their clinical data and enjoy diverse and intuitive services for their benefits. Patients are Figure 1: IBM Patient Empowerment System portal viewed as knowledge consumers; they may wish to find infor-mation about expert physicians, possible therapies, clinical trials, diets, etc. As another example, patients may wish to find information about some over the counter drug in order to avoid possible interaction of this drug with other drugs or foods they consume, or their clinical condition (e.g., preg-nancy).

IBM PES collects medical data from diverse unstructured and (semi) structured data sources and data formats such as user profiles and personal health records (PHRs), provided directly by patients, hospital electronic medical records (EMRs), lab test results, health sensory data (e.g., ECG readings), third party service provider records (e.g., PHR data from Google Health 1 and Microsoft HealthVault 2 or genomic data from 23andMe 3 ), and medical-related semi-structured web data (e.g., FDA RSS alerts).

Data collected from these sources is stored in several ded-icated data repositories. User profile data is maintained by the User Data Management (UDM) system and includes each patient X  X  personal details and social relationships with other patients, physicians, or service providers. Data pri-vacy is a major concern within IBM PES. The UDM system also maintains the privacy policies of each user (either pa-tient or physician). IBM PES users have full control on their data privacy and can define policies that identify with whom http://www.google.com/health/ http://www.microsoft.com/en-us/healthvault/ https://www.23andme.com/ they wish to share data and what kind of data, e.g., only medical data, only personal data, specific medical data such medications or social data such as treating physicians and family members. IBM PES includes a novel privacy model for generalized entity-relationship data used for enforcing the various user privacy policies during discovery time and filtering out private pieces of information.

The Clinical Data Management (CDM) system integrates all medical related data (e.g., PHR, EMR, sensory data, etc) into an HL7 RIM 4 compliant datawarehouse. A dedicated Knowledge Model Management (KMM) system maintains medical knowledge (in RDF format), gathered from both internal and external knowledge sources (e.g., internal hos-pital ADE knowledge, HCLS Linked Open Drug Data 5 , etc).
IBM PES continuously monitors it X  X  patients clinical sta-tus using its Clinical Event Engine (CEE)  X  a rule-based stream processing engine that detects clinical events in pa-tient medical records. Clinical events enrich patient medi-cal records by tagging patients with new clinical conditions (e.g., a patient may be tagged as being suspected for dia-betes due to constant high blood sugar levels). Alerts can be delivered to relevant patients and physicians to take active actions.

IBM PES provides an open platform and a set of APIs from which various clinical decision support services can be implemented. For example, IBM PES Adverse Drug Event (ADE) analysis service utilizes ADE and drug knowledge maintained by the KMM system to actively monitor the drug consumption patterns of patients and detect potential ADE risks before they actually happen. As another exam-ple, personalized medical content gathered from multitude web sources is recommend to patients based on their CDM medical profile [3].
Many of IBM PES services require to uniformly search social and medical data, stored in its heterogeneous data repositories, in order to gain insights and provide value. We term such services as social-medical discovery services [4]. Example services span from simple search services that re-quire to locate relevant information about some patient or medication, to more complex data exploration services that require to query the social-medical  X  X ataspace X  to reveal in-teresting patterns (e.g., relevant patients for some new clin-ical trial).

IBM PES has a novel interactive query interface with flexible question capabilities, which includes an expressive, yet intuitive, query language, faceted search, and entity-relationship graph navigation capabilities. IBM PES query language allows to query entities not only based on their di-rect attribute data, but also based on their relationship par-ticipation patterns and roles within each relationship. Using this query interface, even non-expert users, such as patients and physicians naturally are, can submit queries over multi-tude of social-medical data sources, regardless of their type, underlining data model, and semantics.

A typical search in IBM PES starts with the initial user need, usually expressed as a free text query. Then, users can utilize IBM PES interactive query interface for guid-ing their search towards achieving their information seeking http://www.hl7.org/implement/standards/rim.cfm http://www.w3.org/2001/sw/hcls/ goals. Every interactive querying step results in a query re-formulation that adds structured query predicates that best capture the user X  X  information need.

As an example, lets assume a searcher that submits an ini-tial text query  X  Warfarin 20mg  X . As a result to her query, the system returns all social and medical entities that in-clude these keywords in the  X  X ontent X  given by their at-tributes. First, the searcher can choose the facet entity-Type:Medication to refine her query to return only related medication entities. Next, the searcher may be interested in exploring patients that consume some specific medication by clicking on the relType:PatientMed relationship facet. Fi-nally, the searcher may be interested in limiting her search to return only patients whose age is between 20 to 30 by defining an age range using the attName:age facet. The fi-nal query that represents the searcher information seeking goal would result with the following query written in IBM PES query language:
Patient.age:[20 TO 30] AND (PatientMed WITH Medication.*:"Warfarin 20mg") )
Other example IBM PES social-medical discovery services include various recommendation services that may require to discover similar entities given entity and/or relationship patterns of interest. One such important discovery service in IBM PES is the  X  X atients-Like-This X  service that requires to discover similar patients to a given patient as an input based on that patient X  X  personal medical profile and relation-ships with other social-medical entities. Such service can be further leveraged for implementing other recommendation services, e.g., collaborative-filtering-like recommenders that can recommend possible treatment plans, expert physicians, or patient communities to a given patient.
IBM PES social-medical discovery (SMD) system is a spe-cialized search platform that provides efficient (sub-second time) search, discovery and recommendation services over social-medical data. SMD is based on a unique framework for rich entity-relationship data indexing and retrieval. This framework extends traditional text-based faceted search so-lutions [6] with expressive query language and ER data ex-ploration capabilities [2]. Built as a NoSQL extension to Apache Lucene 6 , novel faceted search capabilities were im-plemented which allow to index complex inter-related facets within an inverted index. In turn, the framework allows to index complex relationships between entities such as arbi-trary n-ary relationships with rich contextual data (i.e., re-lationship attributes) and even aggregations (relationships with other relationships).

As an example, Figure 2 depicts a trinary relationship that can be indexed within SMD system that documents some medical treatment of some patient disease using some prescribed medication, including the details of prescription. The following query can be then used to retrieve all patients in the system (including the one depicted in Figure 2) that were treated with Advate medication for some blood related disease: http://lucene.apache.org/ Figure 2: Example trinary relationship which doc-uments a medical treatment for some patient X  X  dis-ease.

Entity multi-typing and inheritance are also supported by the framework. For example, a query like User.age:[20 TO 40] can be used to query all SMD users, no matter if they are patients or physicians.

Entity similarity search is also supported, and allows to discover similar entities based on both direct (attribute-based) entity similarity and relationship similarity. The most common use of entity similarity search in SMD is for discovering similar patients for a given patient. Traditional entity similarity search solutions usually find similar entities using PageRank like methods (e.g., SimRank [1], PRank [7], etc) and require offline computation. Compared to these methods, SMD entity similarity search is based on a discov-ery approach and can be run online. Given a patient X  X  social-medical data, direct patient features (e.g., age, gender) are augmented with relationship based features extracted from entities related to the patient (e.g., consumed medications, diseases, allergies, genetic variations, etc). For that, SMD first clusters entities related to the patient based on their features (i.e., entity type, attribute names, and relationship types). Next, for each cluster, the top entity features are extracted and used for representing the cluster by a single ER query predicate. Finally different cluster query predi-cates are conjuncted together and submitted to the system. Utilizing the unique querying interface of IBM PES, sim-ilar entities are returned in a similar manner as in a reg-ular search scenario, accompanied with facets and relation-ship links that allow further exploration. Furthermore, SMD users can define preferences for similarity search by weigh-ing various similarity features using SMD X  X  advanced search options.

Figure 3 depicts the high level architecture of the SMD system. On the top right side, heterogeneous data from the different IBM PES data repositories is delivered to the SMD system for indexing. The SMD system includes three main sub-systems. The first sub-system, Social-Medical Indexing (SMI), is responsible for indexing the data obtained from the various IBM PES data sources. SMI includes several compo-nents that extract, transform and index the heterogeneous data into a unified entity-relationship model representation. First, entities are extracted from the data using dedicated data adapters that represent every data item as an entity with a type (e.g., Patient ) and (typed) attributes (e.g., Patient.age(Integer) ). Relationships that are known to exist among indexed entities (e.g., Treatment ) are indexed and any relationship context information is also kept (e.g., Figure 3: IBM PES Social-Medical Discovery (SMD) system high level architecture.
 Treatment.dosage:2/day ). An entity resolution component is further utilized to resolve entity mappings between the dif-ferent data sources (e.g., UDM and CDM patient records). SMI also includes a flexible text analysis framework that is used to determine the text analysis pipeline for each entity (e.g., usage of stop word removal, lemmatization, stemming, etc). Entities and relationships are then serialized and in-dexed in SMD X  X  specialized unified search index.

The second sub-system, Social-Medical Search (SMS), pro-vides the query interface to SMD X  X  unified search index. Queries submitted to the system are parsed and run against the unified index. SMS supports arbitrary textual and/or structured predicate queries. Search results include entities together with their attributes data, their relationships, and various facets that can be used for further exploring the data (e.g., entity type facets, attribute facets, etc). Entities are ranked according to their relevance to the query. Entity relevance is determined by a combination of ranking heuris-tics, among others are specialized extensions to the basic Lucene ranking model, link-analysis of the social-medical graph, context-based proximity, etc.

Finally, the Social-Medical Privacy (SMP) sub-system is responsible for enforcing the privacy policies of various IBM PES users during indexing and search time. For that, a novel authorization model was implemented [5]. During indexing, SMP translates user privacy policies into special ACLs that constrain the question answering permissions of every in-dexed entity in the system. During search, SMP maps each query to a set of ACLs which are added to the query which makes sure that the searcher gets as a result to her search only those entities that she is allowed to query. Furthermore, ACLs attached to result entities are used for data filtering, i.e., only portions of entity data that is allowed to be viewed by the current searcher will be returned.
During the demonstration we shall introduce IBM PES, describe its data sources, and its various clinical decision support services. Using anonymized IBM PES social-medical data, we shall discuss the main motivations for this system, and demonstrate the system X  X  patient empowerment capabil-ities for improved patient safety. First, we shall demonstrate the typical use of IBM PES by various users. For example, we shall show how patients can define their personal med-ical profile, social network, clinical history, etc. We shall then present the IBM PES and its SMD system and discuss the various challenges in implementing its social-medical dis-covery capabilities, including among others its novel entity-relationship indexing and retrieval capabilities. SMD X  X  in-teractive querying UI will be used for the demonstration and is depicted in Figure 4. The UI enables to submit various query types to the SMD system and explore the retrieved re-sults. To demonstrate the various social-medical capabilities of the system, we shall use the following three usecases.
This usecase will demonstrate the various search and dis-covery capabilities of the SMD system. We shall illustrate how non-expert users (i.e., patients/physicians) can access data kept within the different IBM PES heterogeneous data sources in a unified and intuitive way using its interactive querying interface. Demo users will be able to enter various queries spanning from free-text queries to structured predi-cates and explore the results returned by SMD. A convenient faceted search UI allows users to navigate the social-medical data graph and explore important aspects such as data dis-tributions for various facets of interest, lineage, etc.
This usecase will demonstrate SMD X  X  entity similarity search capabilities. During the demonstration we shall focus on SMD X  X  capability of discovering similar patients, also termed the  X  X atients-Like-This X  X  task. As was already mentioned, this task is an important enabler for various advanced social-medical services in IBM PES. Demo users will be able to discover similar patients for any patient in the results set. Users will also be able to search similar patients for a given patient social-medical profile and refine the similarity search according to facets of interest.
This usecase will demonstrate the social-medical privacy capabilities of SMD system. During the demonstration we shall define various privacy policies that restrict data sharing in various privacy levels and demonstrate how SMD enforce privacy during search by translating user queries into proper ACLs.
