 In this paper, we aim to provide a point-of-interests (POI) recommendation service for the rapid growing location-based social networks (LBSNs), e.g., Foursquare, Whrrl, etc. Our idea is to explore user preference, social influence and geo-graphical influence for POI recommendations. In addition to deriving user preference based on user-based collabora-tive filtering and exploring social influence from friends, we put a special emphasis on geographical influence due to the spatial clustering phenomenon exhibited in user check-in ac-tivities of LBSNs. We argue that the geographical influence among POIs plays an important role in user check-in behav-iors and model it by power law distribution. Accordingly, we develop a collaborative recommendation algorithm based on geographical influence based on naive Bayesian. Further-more, we propose a unified POI recommendation framework, which fuses user preference to a POI with social influence and geographical influence. Finally, we conduct a compre-hensive performance evaluation over two large-scale datasets collected from Foursquare and Whrrl. Experimental results with these real datasets show that the unified collaborative recommendation approach significantly outperforms a wide spectrum of alternative recommendation approaches. H.3.3 [ Information Search and Retrieval ]: Information Filtering; J.4 [ Computer Applications ]: Social and Be-havior Sciences Algorithms, Experimentation.
 Collaborative Recommendation, Location-based Social Net-works, Geographical Influence.

With the rapid development of mobile devices, wireless networks and Web 2.0 technology, a number of location-based social networking services, e.g., Loopt 1 ,Brightkite Foursquare 3 and Whrrl 4 , have emerged in recent years. 5 These LBSNs allow users to establish cyber links to their friends or other users, and share tips and experiences of their visits to plentiful point-of-interests (POIs), e.g., restaurants, stores, cinema theaters, etc. In LBSNs, a POI recommen-dation service, aiming at recommending new POIs to users in order to help them explore new places and know their cities better, is an essential function that has received a lot of research momentum recently [25, 26]. Figure 1: Graph representation of user-user friend-ship and user-location check-in activity in a LBSN
Indeed, facilitating POI recommendations in LBSNs is a promising and interesting research problem because valuable information such as the  X  X yber X  connections among users as well as the  X  X hysical X  interactions between users and lo-cations have been captured in the systems. Nevertheless, these information have not been fully explored in prior re-search studies relevant to POI recommendations. For ex-ample, Zheng et. al. have extracted visited locations from GPS trajectory logs of mobile users for location recommen-dations [25, 26]. However, their studies consider neither the social links between users nor the interactions between users and locations in the recommendation process. In this paper, we aim to exploit the unique geographical implications em-www.loopt.com www.brightkite.com www.foursquare.com www.whrrl.com
These services are often referred as location based social networks and thus abbreviated as LBSNs in the paper. bedded in users X  interactions with locations, in addition to applying the social influence from users X  friends, for POI recommendations in LBSNs.
 Users and POIs are two essential types of entities in LB-SNs. As illustrated in Figure 1, users in an LBSN, de-noted as u 1 ,u 2 ,u 3 ,u 4 , are interconnected via social links to form a user social network. Moreover, POIs, denoted as l ,l 2 , ..., l 6 , are connected with users via their  X  X heck-in X  ac-tivities, which generally reflects the users X  tastes on various POIs. Finally, as also logically illustrated in the figure, the POIs, geocoded by longitude, latitude , are constrained ge-ographically. To make recommendations of POIs to users, obviously the records of previous user check-in activities are very useful. With the availability of such information in LBSNs, an intuitive idea for supporting POI recommenda-tions is to employ the conventional collaborative filtering (CF) techniques by treating POIs as the  X  X tems X  in many successful CF-based recommender systems. The basic argu-ment for this idea is that users X  tastes can be deduced by other users who exhibit similar visiting behaviors to POIs in previous check-in activities. Thus, user-based or item-based collaborative filtering techniques may be applicable to POI recommendations. Additionally, the social network of users, which is handily available in the LBSN, can be explored to enhance performance of POI recommendations. Recent studies have argued that social friends tend to share common interests and thus can be used in the process of collaborative filtering for making recommendations [11, 12, 2, 13, 24].

While the ideas above aim to explore the essential infor-mation available in LBSNs, i.e., the user-location interactiv-ities and user-user social links, we argue that the geographi-cal influence naturally existing in the activities of users and their geographical proximities cannot be ignored. According to Tobler X  X  First Law of Geography  X  X verything is related to everything else, but near things are more related than distant things X  [19]. Thus, a user intuitively tends to visit nearby POIs. There are two major implications that can be derived from this intuition for POI recommendations: (1) people tend to visit POIs close to their homes or offices; and (2) people may be interested in exploring nearby POIs of a POI that they are in favor of, even if it is far away from home, e.g., a user may explore some restaurants and shops around Time Square when she goes there for a broadway show. Due to the geographical nature of the LBSNs, we believe the geographical influence between users and POIs as well as that amongst POIs are as important as the so-cial influence amongst users, which as indicated earlier may play a positive role for supporting POI recommendations in LBSNs. In short, we are interested in studying the im-pact of geographical influence and social influence on POI recommendations in LBSNs.

Our approach for supporting POI recommendation ser-vice in LBSNs is to develop effective collaborative recom-mendation techniques that discover POIs of users X  interests by incorporating the three complementary factors: i) user preference of POIs; ii) social influence; an d iii) geographical influence. Notice that users X  implicit preferences of POIs can be derived from their check-in activities on POIs. By con-sideringtwouserswhohavecheckedintoalotofcommon POIs as similar users, we may discover the implicit prefer-ence of a user through the previous check-in activities of her similar users. Recall the example in Figure 1. Since u 1 and u 2 shares many commonly visited POIs, they may be con-sidered as similar users who are assumed to share similar check-in behaviors, i.e., preference of POIs. As a result, l is a good candidate for recommendation to user u 2 since u has visited this POI before. On the other hand, social influ-ence of friends can be incorporated in the recommendation process. For example, when considering l 4 as a recommen-dations candidate for u 1 , the social influence of u 4 on u contribute to the decision making. Finally, the geographical influence of POIs on nearby POIs can be considered. As shown in the example, since u 2 has visited l 2 and l 3 before, their nearby POIs l 1 and l 5 may be considered positively due to the geographical influence.

As discussed earlier, the conventional item recommenda-tion techniques based on user preference [9, 18, 14, 15, 13] and social influence [12, 13] seem to be applicable for POI recommendation. Nevertheless, their effectiveness on POI recommendations in LBSNs have not been studied. Most importantly, the idea of incorporating the geographical in-fluence between POIs, which is refreshing and promising for POI recommendation, has not been investigated previously. In this paper, we examine the  X  X eographical clustering phe-nomenon X  of user check-in activities in LBSNs and propose a power-law probabilistic model to capture geographical in-fluence among POIs. Accordingly, we realize the targeted collaborative POI recommendation service for LBSNs by in-corporating the geographical influence of POIs via Bayesian theory. Finally, we propose a unified location recommenda-tion framework to fuse user preference to POIs along with the social influence among users and the geographical influ-ence among POIs.

In summary, the contributions we made in this research work are four-fold.
The rest of this paper is organized as follows. In Section 2, we provide some background on conventional recommenda-tion techniques according to user X  X  own preference and so-cial influence and review related works in the literature. In Section 3, we describe the location recommendation process according to geographical influence. In Section 4, we pro-pose a location recommendation framework, which unifies all three factors together. In Section 5, we perform an empirical study on the different location recommendation algorithms upon two large scale datasets crawled from Foursquare and Whrrl, respectively. Finally, in Section 6, we conclude the paper.
In this section, we first provide background on user-based collaborative filtering and friend-based recommendation, which serve as the building blocks in our fusion approach to exploit user preference and social influence. Next we review some relevant studies in recommender systems.
Based on collaborative filtering, users X  implicit preference can be discovered by aggregating the behaviors of similar users. Let U and L denote the user set and the POI set in an LBSN, which keeps track of check-in activities in the system. The check-in activity a user u i  X  U has at a POI l j  X  L is denoted as c i,j where c i,j = 1 represents u i has a check-in at l before and c i,j = 0 means there is no record of u i visiting l . These recorded user check-in activities at POIs are thus used to discover a user X  X  implicit preference of a POI, which can be represented as a probability to predict how likely the user would like to have a check-in at an unvisited POI. We denote this prediction by c i,j and obtain this predicted check-in probability of u i to l j as follows. where w i,k is the similarity weight between users u i and u
To compute the similarity weights w i,k between users u i and u k , several similarity measures can be adopted, e.g., cosine similarity and Pearson correlation. In our study, we choose cosine similarity due to its simplicity. The cosine similarity weight between users u i and u k , denoted as w is defined as follows.
Friends tend to have similar behavior because they are friends and might share a lot of common interests, thus lead-ing to correlated check-in behaviors [15, 13]. For example, two friends may hang out to se e a movie together sometimes, or a user may go to a restaurant highly recommended by her friends. All those possible reasons suggest that friends might provide good recommendation for a given user due to their potential correlated check-in behavior. In other words, we can turn to user X  X  friends for recommendation, and we call it recommendation based social influence from friends.
POI recommendations based on social influence can be realized by the friend-based collaborative filtering approach as described in [13]. where c i,j is the predicted check-in probability of u i at l F i is the friends set of u i ,and SI k,i is directional social influence weight u k has on u i [14, 15, 13].

On the one hand, we think friends who have closer social tie may have better trust in terms of their recommendation; on the other hand, friends who show more similar check-in behavior should have more similar tastes with the active user, thus suggestions from those friends are more worthy. Thus, in the following, we introduce how to derive the social influence weight by combining the above two aspects.
One way to derive the social influence weight between two friends is based on both of their social connections and sim-ilarity of their check-in activities [12].
 where  X  is a tuning parameter ranging within [0 , 1], and F k and L k denote the friend set and POI set of user u k , respectively. 6
Another way of measurement is via the Random Walk with Restart (RWR) technique [20] over the graph that cap-tures both the social connections among users as well as the check-in activities between users and POIs [24]. Starting from a node k , an RWR is performed by randomly following a link to another node at each step. Notice that there is a probability a in every step to restart at node k .Byit-erating RWR repeatedly until the whole process converges, a stationary (or steady-state) probability for each node can be obtained. The stationary probabilities of nodes give us a long-term visit rate for each user node (e.g., user u i )givena bias towards a particular starting node (e.g. user u k ). This can be interpreted as the social influence weight user u k on u i , i.e., SI k,i .
Content-based and collaborative filtering techniques are two widely adopted approaches for recommender systems [1]. A content-based system selects items for recommendation based on the similarity between item content (e.g., key-words/tags describing the items) and user profile [3, 8, 17].
The friend set of a user refers to the socially connected friends of the user in the LBSN, while her POI set refers to the set of POIs she has check-in activities. Since it mainly relies on dictionary-bound relations between the terms used in user profiles and item content, implicit associations between users are not considered.

The collaborative filtering systems are divided into two categories, i.e., memory-based and model-based. Memory-based systems can be further classified into user-based and item-based systems. For user-based systems [9], the simi-larity between all pairs of users is computed based on their ratings on associated items using some selected similarity measurement such as cosine similarity or Pearson correla-tion. Based on the user similarity, missing rating corre-sponding to a given user-item pair can be derived by com-puting a weighted combination of the ratings upon the same item from similar users. For item-based systems [18], instead of using similarity between users to predict missing rating, predications are made by finding similarly rated items first in order to compute a weighted combination of user ratings upon similar items. On the other hand, the model-based collaborative filtering systems assume that users may form clusters based on their similar behavior in rating items. A model can be learned based on patterns recognized in the rating behaviors of users using machine learning techniques such as clustering algorithms or Bayesian networks [5, 23].
Under the context of social networking systems, social friendship is shown to be beneficial for collaborative filtering based recommendation systems, e.g., memory-based [11, 12] and random walk based [2, 11, 12]. These works argue that social friends tend to share common interests and thus their relationships should be considered in the process of collab-orative filtering. Random walk captures a social network as a graph with probabilistic weighted links to represent social relations and thus is able to accurately predict user prefer-ences to items [12] and social influence to other users [24]. On the other hand, social friendship has also been explored in the model-based systems [14, 13]. These work mostly focus on conventional recommendation systems for recom-mending items such as movies.

Recently, location recommendation and mining has at-tracted a lot of attentions from the research community [27, 26, 7, 25, 22]. Among them, [27, 26, 7, 25] are mainly fo-cused on GPS datasets which do not consider social rela-tionships among users. In these works, unfortunately, the geographical influence among POIs are not explored [27, 26, 25]. Recently, the correlation of locations in GPS trajecto-ries are explored [7]. In this work, however, locations are still treated as conventional items. As such, the correlations between locations are established through users X  activities instead of their geographical influence. [22] is the first re-search to provide location recommendations services in LB-SNs, but with the goal of improving efficiency of location recommendation.

Our study differentiates itself from all these prior works in four aspects: i) the application domain of location-based social networking systems, embracing both social and geo-graphical features in the captured data, is new and unique; ii) the study of social influence and geographical influence in recommender systems for LBSNs is unexplored previously; iii) the proposal of unified collaborative recommendation approach, which incorporates geographical influence along with user preference and social influence, is new and inno-vative; iv) two large-scale real dataset collected from well known LBSNs, namely, Foursquare and Whrrl datasets, are adopted for performance evaluation. Figure 2: Geographical influence probability distri-bution As mentioned earlier, the check-in activities of users in LBSNs record their physical interactions (i.e., visits) at POIs, Thus, we argue that the geographical proximities of POIs have a significant influence on users X  check-in behavior. To better understand this geographical influence on users, we perform a spatial analysis on real datasets of user check-in activities collected from two well known LBSNs, i.e., Foursquare and Whrrl. Specifically, we aim to study the implication of distance on user check-in behavior by measuring how likely two of a user X  X  check-in POIs are within a given distance. To obtain this measurement, we calculate the distances be-tween all pairs of POIs that a user has checked in and plot a histogram (actually probability density function) over the distance of POIs checked in by the same user. As shown in Figure 2, a significant percentage of POIs pairs checked in by the same user appears to be within short distance, indi-cating a geographical clustering phenomenon in user check-in activities. 7 This phenomenon may be attributed to the ge-ographical influence which may be intuitively explained by the following tendencies: (1) people tend to visit POIs close to their homes or offices; and (2) people may be interested in exploring nearby POIs of a POI that they are in favor of, even if it is far away from home. As a result, the POIs visited by the same user tend to be clustered geographically. We believe that this geographical clustering phenomenon in user check-in activities can be exploited for POI recommen-dations in LBSNs. Thus, in the following, we study and model this geographical influence on user check-in behavior at POIs, aiming to utilize it in POI recommendations.
To achieve our goal, we would like to compute the like-lihood that a user u i would check in both POI l j and l k Based on Figure 2, we intuitively think the check-in proba-bility may follow the power-law distribution. Nevertheless, we observe that the check-in probability of POI pairs vis-ited by the same person over distance is not a standard power-law distribution. Even though the left part of the figure decreases linearly (i.e., decreases exponentially in reg-ular scale) and thus fits power-law distribution very well, the right part may sometimes deviate irregularly (i.e., the prob-ability is high at some points). A reasonable explanation is that users may travel to different places and thus create mul-tiple check-in spatial clusters. Generally speaking, the fact thatauser X  X check-inPOIstendtobeinashortdistanceis confirmed in our data analysis. As mentioned earlier, nearby POIs are more related to each other, which exhibits strong geographical influence. Moreover, the linear portion of the
Note that the figure has been shown in log-log scale. plot in Figure 2 covers the majority (90%) of the POI pairs. Thus, we propose to use power law distribution to model the check-in probability to the distance between two POIs visited by the same user as follows. where a and b are parameters of a power-law distribution, and x and y refer to the distance between two POIs visited by the same user and its check-in probability, respectively.
Equation (5) can transformed into Equation (6) in  X  X og-log X  scale to fit a linear model.
Thus, the original power-law distribution can be recovered via the following equation.
Hence, we can simply apply a linear curve fitting method to realize regression as follows. More specifically, let y = log y and x =log x . We shall fit data as follows where w 0 and w 1 are the linear coefficients, collectively de-noted by w . In other words, the model can be learned in form of w . In order to avoid over-fitting, we approach the weight coefficients by least square error method and add a penalty term (i.e., regularization term) to discourage the coefficients from reaching large values as below [6]. where E ( w ) denotes the loss function, N presents the cardi-nality of input dataset, t n is the ground truth corresponding to x n ,and  X  is the regularization term.

Accordingly, the optimal values of a and b form the setting which minimizes the loss function E ( w )asbelow.
In the following, we introduce a collaborative recommen-dation method based on the naive Bayesian method to real-ize POI recommendation in LBSNs. For a given user u i and its visited POI set L i , we define the probability that u check-in activities at all locations in L i by considering the pair-wise distances of POIs in L i as follows.
 where d ( l m ,l n ) denotes the distance between POIs l m l ,and Pr [ d ( l m ,l n )] = a  X  d ( l m ,l n ) b which follows the pow-law distribution model we obtained above. Note that here we assume the distances of POI pairs are independent.
Thus, for a given POI l j (i.e., the recommendation can-didate), user u i , and her visited POI set L i ,wehavethe likelihood probability for u i to check in l j as follows. To make a POI recommendation ,wesortallthePOIsin L  X  L i in accordance with their Pr [ l j | L i ]( l j  X  L  X  return the POI with the highest Pr [ l j | L i ] to the user.
In this section, we propose a unified framework to perform collaborative recommendation, which fuses ideas factors of user preference, social influence and geographical influence in POI recommendation. Notice that, different from pre-dicting a POI X  X  rating, we aim to return a ranked list of candidate POIs, which is very similar to conventional infor-mation retrieval [4].
As discussed, each factor, i.e., user preference, social in-fluence or geographi cal influence, can be u tilized to realize POI recommendation. Thus, we intuitively can implement three different recommender systems. We propose to use a linear fusion framework to integrate ranked lists provided by the three above-mentioned recommenders into the final ranked list [4, 21]. By integrating multiple recommenders, top-ranked POIs from each of the recommendation algo-rithms could increase both recall (due to the different highly ranked POIs) and precision (giving that the recommender systems have a high density of user-preferred POIs on top of the results lists.

Let S i,j denote the check-in probability score of user u POI l j , i.e., the more likely u i has a check-in activity at l in probability scores of user u i at POI l j , corresponding to recommender systems based on user preference, social influence and geographical influence, respectively. We have S i,j as follows.
 where the two weighting parameters  X  and  X  (0  X   X  +  X   X  1) denote the relative importance of social influence and ge-ographical influence comparing to user preference. Here  X  = 1 states that S i,j depends completely on the prediction based on social influence;  X  = 1 states that S i,j depends completely on the predication based on geographical influ-ence; while  X  =  X  = 0 states that S i,j counts only on user preference.
According to the above fusion framework, in order to esti-mate the check-in probability score S i,j , we need to predict the check-in probability score of S u i,j , S s i,j and S sponding to user preference, social influence and geograph-ical influence, respectively. Accordingly, we estimate the check-in probability p u i,j , p s i,j and p g i,j for a user u
First, the predication of p u i,j can be estimated based on the idea of user-based collaborative filtering as discussed before. More specifically, we utilize the behavior of similar users to realize the predication as Equation (1). Thus we have where w i,k is the similarity weight between users u i and u
Similarly, the prediction of p s i,j can be estimated based on based on the idea of friend-based collaborative filtering. Thus, according to Equation (3), we have where F i is the friends set of u i , SI k,i is the weight measuring social influence from u k to u i .
Finally, p g i,j can be directly obtained from Equation (12) where L i is the visited POI set of u i ,and d ( l j ,l y the distance between POIs l j and l y .

After we get the check-in probability estimation, we ob-tain the corresponding scores as follows.
 where Z u i , Z s i and Z g i are normalization terms.
In this section, we design and conduct several experiments to compare the recommendation qualities of the proposed collaborative recommendation algorithms with some state-of-the-art recommendation techniques, including collabora-tive filtering and random walk with restart, and to investi-gate several interesting questions. Specifically, the design of the experiments aims to achieve the following goals. (1) As our proposed method factors in user preference, social in-fluence from friends and geographical influence from nearby location, we intent to study parameters  X  and  X  to under-stand the roles/weights of the above-mentioned factors in obtaining optimal recommendations. (2) We intend to val-idate our ideas by comparing the effectiveness of the pro-posed approach with other state-of-the-art techniques. (3) Due to the growing research interests in social influence from friends, we intend to further study the similarity of check-in behaviors in terms of the strength of  X  X ocial ties X  between two friends. (4) In our proposal, user-based collaborative filtering approach has been employed to discover user pref-erence. We intend to explore the feasibility and necessity of integrating item-based collaborative filtering approach to further enhance the recommendation quality. (5) We would like to understand how data sparsity may affect POI rec-ommendations in LBSNs. (6) How well our techniques deal with cold start users, who do not have many check-in records for discovery of their interests [10].
We crawled the websites of Foursquare and Whrrl, two of the most representative LBSNs, for a month to collect two datasets consisting of 153,577 users and 96,229 POIs in Foursquare, and 5,892 users and 53,432 POIs in Whrrl, respectively. Our performance evaluation is conducted on these two large-scale real dat asets. After summarizing the check-in records, we get the user-POI check-in matrix densi-ties as 4 . 24  X  10  X  5 for Foursquare dataset and 2 . 72 Whrrl datasets, respectively. Note that, the effectiveness of recommendation service for sparse dataset (i.e., low density user-POI check-in matrix) is usually not high due to the lim-ited information provided by the dataset. For example, the reported precision in [12] is 0.17 over a pre-prossed dataset with 7 . 8  X  10  X  4 density. Thus, in our experiments, we focus on observing the relative performance of algorithms instead of their absolute effectiveness measures, which we expect to improve as the number of LBSN users continues to grow and more check-in activities are logged. To facilitate our evalu-ation, for each individual user in the datasets, we randomly mark off x %( x =10 , 30 , 50 (with 30 as the default value) of all POIs visited by the user. In the experiments, the eval-uated POI recommendation algorithms are used to recover the missing user-POI pairs that have been marked off.
A POI recommendation algorithm under evaluation com-putes a ranking score for each candidate POI (i.e., POI that user has not visited) and returns the top-N highest ranked POIs as recommendations to a targeted user. To evalu-ate the prediction accuracy, we are interested in finding out how many POIs previously marked off in the preprocessing step recovered in the returned POI recommendations. More specifically, we examine two metrics: (1) the ratio of recov-ered POIs to the N recommended POIs, and (2) the ratio of recovered POIs to the set of POIs deleted in preprocessing. The former is precision@N while the latter is recal l@N ,and collectively referred as performance@N .Inourexperiment, we test the performance when N =5 , 10 , 20 with 5 as the default value.
Three factors, namely user preference (U), social influence from friends (S) and geographical influence from POIs (G), are incorporated in our unified collaborative recommenda-tion algorithm, denoted by USG in our evaluation. A num-ber of state-of-the-art and new collaborative filtering ap-proaches, some of which can be configured by controlling the weight parameters, 0 &lt; X  ,  X &lt; 1, in USG , are also evaluated for comparison. In addition of USG , the recommendation approaches under evaluation are listed below. (a) Precision@5 -Foursquare (c) Precision@5 -Whrrl (a) Precision@N -Foursquare (c) Precision@N -Whrrl
As mentioned, two parameters  X  (for social influence fac-tor) and  X  (for geographical influence factor) can be con-trolled to tune the performance of USG and to configure it into other recommendation approaches for evaluation. Here we vary them in USG to understand the roles of user pref-erence, social influence from friends and geographical influ-ence from POIs played in achieving the optimal USG per-formance. Similarly, we tune  X  in US and  X  in UG to findout their optimal settings as well. Figure 3 shows the perfor-mance@5 results of USG under different  X  and  X  settings, where the best parameter settings are indicated in the fig-ures. The optimal settings for US and UG can also be observed in the figures, i.e., dashed line for US and solid line for UG . Those optimal parameter settings are also summarized in Table 1.

Through this study, we can easily observe that user pref-erence plays a dominate role in contributing to the optimal recommendation, while both social influence and geograph-ical influence are innegligible. More specifically, as shown in Table 1, the factor of user preference contributes at least 70% in making the best recommendation, while both social influence and geographical influence contribute at least 10%.
Next, we compare the effectiveness of the recommendation approaches under evaluation. Figure 4 shows the performance@ N ( N =5 , 10 , 20) of all approaches in terms of their best per-formance (i.e., the performance under the optimal param-eter settings). The experiments used both Foursquare and Whrrl datasets. The precision and recall for them are plot-ted in Figure 4(a) and Figure 4(b), and Figure 4(c) and Figure 4(d), respectively. In these figures, USG always ex-hibits the best performance in terms of precision and recall under all values of N s, showing the strength of combines all three factors of user preference, social influence and ge-ographical influence. Notice that both of our real datasets (i.e., Foursquare and Whrrl) have low density. According to the empirical study in [12], the reported precision is about 0.17 over a pre-processed dataset with 7 . 8  X  10  X  4 density of user-item matrix. Thus, the measured low precision over our datasets (which are not preprocessed) is reasonable. Most importantly, USG outperforms the baseline approach U (i.e., user-based CF) by about 50% percentage of performance improvement in both datasets.

Between the two alternative social influence measurement methods (i.e., S and S rwr ) for friend-based CF, we find S to have much better performance than S rwr .Moreover, RWR shows poor performance for POI recommendation in these experiments. This raises a very interesting question of whether Random Walk and Restart technique is suitable for POI recommendations. In a later section, we shall answer this question by analyzing the correlation between (i) the similarity of check-in behavior among friends and (ii) social ties among friends. For the rest of the experiments, we use S as the component of social influence from friends in US and USG .

Figure 4 also indicates that both social influence and ge-ographical influence can be utilized to perform POI recom-mendation. As shown, both S and G provide comparable results against U . Notice that, in LBSNs, since the check-(a) Precision@5 -Foursquare (c) Precision@N -Whrrl (a) Precision@5 -Foursquare (c) Precision@5 -Whrrl Walk and Restart. Note that, based on [12], user similarity can be derived from the social graph matrix and user-POI check-in matrix. Figure 7(a) and Figure 7(d) show the plots on Foursquare and Whrrl datasets under the best RWR set-tings. Both figures show that similar users do not necessarily have high similarity in their check-in behaviors. For exam-ple, user pairs with similarity larger than 0.1 usually share nothing in their check-in behavior in both Foursquare and Whrrl datasets. The results indicate that the tastes of a user X  X  friends may actually vary significantly, which has also be discussed in [16] recently. To further verify this finding, we also examine the correlation between the similarity of check-in behaviors between two friends and the strength of their social ties. In our tests, the social tie is defined in two forms: 1) number of common friends (see Figure 7(b) and Figure 7(e) for experimental results) and common friend ratio (see Figure 7(c) and Figure 7(f) for experimental re-sults), where common friend ratio is measured by Jaccard coefficient. For friends who have very strong social tie (i.e., larger number of common friends or larger common friend ratio), we again find their check-in behaviors are not neces-sarily similar as shown in the figures.

From the above observations, we conclude that friends have different tastes. The similarity in friends X  check-in behaviors may not necessarily be reflected in terms of the strength of their social ties. As a matter of fact, in measur-ing the social influence between friends, we find the factor of check-in behavior to be more important than the fac-tor of social tie. Through our experiments on the S algo-rithm, we find the optimal setting for  X  in Equation (4) to be smaller than 0.05 in both Foursquare and Whrrl datasets, which indicates the factor of check-in behavior weighs more than the factor of social tie. While RWR treats both factors equally, thus degrading the performance in our Foursquare and Whrrl datasets.
Here, we study how USG deals with the data sparsity prob-lem. In order to produce user-POI check-in matrix with different sparsity, we mark off x% = 10%, 30% and 50% of user X  X  check-in activity records from the original check-in datasets for three groups of tests as shown in Figure 8. The larger the mark-off ratio x is, the sparser the user-POI check-in matrix is. As shown, USG always exhibits the best performance@5 under all mark-off ratios. Particularly, when the data is very sparse, e.g., x% = 50%, geographical influ-ence plays an extremely important role in recommending interesting POIs to users. The reason is that both users and their social friends have relatively small check-in logs. Thus, the similarity weight or social influence score derived from such sparse data may be misleading. On the other hand, ge-ographical influence, reflecting a global behavior affected by geography, fits the behaviors of most users in LBSNs. Thus, the approaches incorporating geographical influence factor, i.e., G , UG and USG , show great strengths under various data sparsity scenarios.
Finally, we test the performance of POI recommendations for cold start users. Here, we consider those users who have less than 5 check-in activities in the user-POI check-in ma-trix after removing 30% check-ins as cold start users. As showninFigure9,inallcaseswetested, USG always shows the best performance. Note that in POI recommendations for cold start users, user preference is hard to capture as POIs visited by this user are few. Consequently, U shows the worst performance as it only considers user preference. G , which explores the spatial clusters of user check-in activi-ties, is also affected. On the other hand, S overcomes the lack of user X  X  check-ins as social friends may supply many use-ful check-ins, potentially useful for POI recommendations. Thus, in this experiment, we find that the recommendation performance of S usually works better than U and G do. No-tice that, we find the performance of G to be better than S in extremely sparse scenario in Figure 8 because in that scenario, social friends X  check-in records are very limited as well. Thus, geographical influence prevails due to its appli-cability to most of the people. However, it is noteworthy that all three factors are very important for the POI recom-mendations to cold start users, as USG is always the best.
This research attempts to facilitate a POI recommenda-tion service in location-based social networks. Our idea is to incorporate user preference, social influence and geograph-ical influence in the recommendation. In addition to de-riving user preference by user-based collaborative filtering and capturing social influence from friends, we model the geographical influence among POIs by employing power law distribution to uncover the spatial clustering phenomenon in user check-in activities. Furthermore, we propose a unified POI recommendation framework, which fuses user prefer-ence to a POI with social influence and geographical influ-ence. We conduct a comprehensive performance evaluation over two large-scale real datasets collected from Foursquare and Whrrl. Experimental results show that the unified col-laborative recommendation technique is superior to all other recommendation approaches evaluated. Additional findings have been uncovered through analysis of the experimental results, including 1) geographical influence shows a more significant impact on the effectiveness of POI recommenda-tions than social influence; 2) Random Walk and Restart may not be suitable for POI recommendation in LBSNs, be-cause friends exhibit significantly different preferences (i.e., the strength of social ties do not reflect the similarity of check-in behavior among users in LBSNs; 3) Item-base CF is not an effective approach in our application due to insuf-ficient number of visitors to many locations at the current state of LBSNs.

The semantic tags of POIs contain very rich information brought in by LBSN users. As for the next step, we plan to incorporate the semantic tags of POIs to further improve the unified POI recommendation framework we proposed in this paper. [1] G. Adomavicius and A. Tuzhilin. Toward the Next [2] R. Andersen, C. Borgs, J. T. Chayes, U. Feige, A. D. [3] M. Balabanovic and Y. Shoham. Content-based [4] B. T. Bartell, G. W. Cottrell, and R. K. Belew. [5] D. Billsus and M. J. Pazzani. Learning collaborative [6] C.M.Bishop. Pattern Recognition and Machine [7] X. Cao, G. Cong, and C. S. Jensen. Mining significant [8] A. M. Ferman, J. H. Errico, P. van Beek, and M. I. [9] J.L.Herlocker,J.A.Konstan,A.Borchers,and [10] Z. Huang, H. Chen, and D. D. Zeng. Applying [11] M. Jamali and M. Ester. TrustWalker : a random walk [12] I. Konstas, V. Stathopoulos, and J. M. Jose. On social [13] H. Ma, I. King, and M. R. Lyu. Learning to [14] H.Ma,M.R.Lyu,andI.King.Learningto [15] H. Ma, H. Yang, M. R. Lyu, and I. King. SoRec: [16] H. Ma, D. Zhou, C. Liu, M. R. Lyu, and I. King. [17] P. Melville, R. J. Mooney, and R. Nagarajan. [18] B. M. Sarwar, G. Karypis, J. A. Konstan, and [19] W. R. Tobler. A Computer Movie Simulating Urban [20] H. Tong, C. Faloutsos, and J.-Y. Pan. Fast Random [21] J. Wang, A. P. de Vries, and M. J. T. Reinders. [22] M.Ye,P.Yin,andW.-C.Lee.Location [23] H. Yildirim and M. S. Krishnamoorthy. A random [24] Q. Yuan, S. Zhao, L. Chen, S. Ding, X. Zhang, and [25] V. W. Zheng, B. Cao, Y. Zheng, X. Xie, and Q. Yang. [26] V. W. Zheng, Y. Zheng, X. Xie, and Q. Yang.
 [27] Y. Zheng, L. Zhang, X. Xie, and W.-Y. Ma. Mining
