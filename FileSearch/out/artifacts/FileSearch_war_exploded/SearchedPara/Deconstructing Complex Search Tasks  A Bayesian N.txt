 Search behavior, and information behavior more generally, is often motivated by tasks that prompt search processes that are often lengthy, iterative, and intermittent, and are characterized by distinct stages, shifting goals and multitasking (Kelly et al., 2013; Mehrotra et al., 2016). Current search sys-tems do not provide adequate support for users tack-ling complex tasks, due to which the cognitive bur-den of keeping track of such tasks is placed on the searcher. Ideally, a search engine should be able to understand the reason that caused the user to submit a query (i.e., the actual task that caused the query to be issued) and be able to guide users to achieve their tasks by incorporating this information about the actual informational need. Clearly, identifying and analyzing search tasks is an extremely impor-tant activity not only for search engine providers but also other web based frameworks like spoken dia-logue (Sun et al., 2015) and general recommenda-tion systems (Mehrotra et al., 2014) in their effort to improve user experience on their platforms.

Previous work in the area have proposed a num-ber of methods for identifying and extracting task knowledge from search query sessions (Mehrotra and Yilmaz, 2015b; Wang et al., 2013; Lucchese et al., 2011; Verma and Yilmaz, 2014; Mehrotra and Yilmaz, 2015a). However, while some tasks are fairly trivial and single-shot (e.g.  X  X atest Taylor Swift album X ), others are more complex and often involve multiple steps or sub-tasks (e.g.  X  X lanning a wedding X ).

Deciphering sub-tasks from search query logs be-comes an important problem since users might ex-hibit different search preferences as well as expend different amounts of search effort while executing the sub-tasks. For example, while planning a wed-ding, users might choose to spend more time and ef-fort on searching for a suitable venue, while spend-ing considerably less on the choice of a wedding cake. However, even before we can analyze the vari-ance in search effort across sub-tasks, it becomes imperative to successfully identify and extract sub-tasks for a specific task from search query logs. This turns out to be a complex problem for two reasons. First, the number of sub-tasks in a given task is not a parameter than can be explicitly defined, and is gen-erally task dependent. Second, while similar sound-ing queries like  X  X edding planning checklist X  and  X  X edding dress X  belong to the same task, they inher-ently represent different sub-tasks. This necessitates the use of advanced distancing techniques, beyond the usual bag-of-words or TF-IDF approaches.
In our current study, we propose a method for extracting search sub-tasks from a given collection of queries constituting a complex search task, using a non-parametric Bayes approach. Our generative model is not restricted by a fixed number of sub-task clusters, and assumes an infinite number of latent groups, with each group described by a certain set of parameters. We specify our non-parametric model by defining a Distance-dependent Chinese Restau-rant Process (dd-CRP) prior and a Dirichlet multino-mial likelihood (Blei and Frazier, 2011). Further, we draw on recent advancements that emphasize the su-periority of embedding based distancing approaches over others, especially when comparing documents with less or no common words (Mikolov et al., 2013). We enrich our non-parametric model by working in the vector embedding space and propose a word-embedding based distance measure (Kusner et al., 2015) to encode query distances for efficient sub-task extraction. Web search logs have been extensively studied to generate insights and provide explicit cues about the information seeking behavior of users, that would improve their search experiences. There have been attempts to extract in-session tasks (Jones and Klinkner, 2008; Lucchese et al., 2011; Spink et al., 2005), and cross-session tasks (Wang et al., 2013; Kotov et al., 2011; Li et al., 2014) from query se-quences based on classification and clustering meth-ods. Hagen et al. (Hagen et al., 2013) have re-cently presented a cascading method for logical ses-sion detection that can also be applied to search mis-sion detection. Kotov et al (Kotov et al., 2011) and Agichtein et al (Agichtein et al., 2012) have stud-ied the problem of cross-session task extraction via binary same-task classification. Unfortunately, pair-wise predictions alone cannot generate the partition of tasks, and post-processing is needed to obtain the final task partitions (Liao et al., 2012).

Some previous attempts have been made to sup-port people engaged in complex tasks by allowing them to take notes and record results that they al-ready examined (Donato et al., 2010), or to provide task continuation assistance (Morris et al., 2008). Jones et al. (Jones and Klinkner, 2008) was the first work to consider the notion that there may be multiple sub-tasks associated with a user X  X  informa-tional needs. However, they fall short of propos-ing a method to identify a task from queries. Since most of these task extraction methods are based on relating a user X  X  current query to one of her previ-ous tasks, these methods cannot be directly used in finding and extracting sub-tasks. As a result, while task extraction methods abound, very little has been done to explicitly identify the sub-tasks from within complex search tasks. Consider a collection of queries ( Q ) issued by search engine users, trying to accomplish certain search tasks. Quite often, these search tasks (e.g. plan-ing a trip) are complex and conceptually decompose into a set of sub-tasks (e.g. booking flights, find-ing places of interest etc), each of which warrants the user to further issue multiple queries to solve. It is important to note that while the queries are ob-served, the inherent sub-tasks and their numbers are latent. Given a collection of on-task queries, ex-tracted using a standard task extraction algorithm, our goal is to extract these sub-tasks from the on-task query collection.

The distance dependent Chinese restaurant pro-cess (dd-CRP) (Blei and Frazier, 2011) was re-cently introduced to model random partitions of non-exchangeable data. To extract sub-tasks, we consider the dd-CRP model in an embedding-space setting and place a dd-CRP prior over the search tasks. 3.1 Nonparametric Priors for Sub-tasks The Chinese restaurant process (CRP) is a distribu-tion on all possible partitions of a set of objects (in our case, queries). The generative process can be described via a restaurant with an infinite number of tables (in our case, sub-tasks). Customers (queries) i enter the restaurant in sequence and select a table z i to join. They pick an occupied table with a probabil-ity proportional to the number of customers already sitting there, or a new table with probability propor-tional to a scaling parameter  X  . The dd-CRP alters the CRP by modeling customer links not to tables, but to other customers.

In our sub-task extraction problem, each task is associated with a dd-CRP and its tables are embel-lished with IID draws from a base distribution over mixture component parameters. Let z i denote the i th query assignment, the index of the query with whom the ith query is linked. Let d ij denote the distance measurement between queries i and j, let D denote the set of all distance measurements between queries, and let f be a decay function. The distance dependent CRP independently draws the query as-signments to sub-tasks conditioned on the distance measurements, Here, d ij is an externally specified distance between queries i and j , and  X  determines the probability that a customer links to themselves rather than an-other customer. The monotonically decreasing de-cay function f ( d ) mediates how the distance be-tween two queries affects their probability of con-necting to each other. The overall link structure specifies a partition: two queries are clustered to-gether in the same sub-task if and only if one can reach the other by traversing the link edges. R ( q 1: N ) maps query assignments to sub-task assignments.
Given a decay function f , distances between queries D , scaling parameter  X  , and an exchange-able Dirichlet distribution with parameter  X  , N M-word queries are drawn as follows, 1. For i  X  [1 ,N ] , draw z i  X  dist  X  2. For i  X  [1 ,N ] ,
We experimented with 3 different values of alpha and reported the best performing results. We next define the distance and decay functions which help us find task-specific query distances. 3.2 Quantifying Task Based Query Distances Word embeddings capture lexico-semantic regulari-ties in language, such that words with similar syn-tactic and semantic properties are found to be close to each other in the embedding space. We leverage this insight and propose a novel query-query dis-tance metric based on such embeddings. We train a skip-gram word embeddings model where a query term is used as an input to a log-linear classifier with continuous projection layer and words within a certain window before and after the words are pre-dicted. We next describe how we use these query term embedding vectors to define query distances.
For a search task like  X  X lanning a wedding X , fre-quent queries include wedding checklist , wedding planning and bridal dresses . Ideally, checklist and planning related queries constitute a different sub-task than bridal dresses. Given the overall context of weddings, words like checklist and dresses are more informative than generic words like weddings . To this end, we classify each word as background word or subtask-specific word using a simple fre-quency based approach on the given collection of on-task query terms and use a weighted combina-tion of their embedding vectors to encode a query X  X  vector: where t i is the i-th term in the query q , n q number of queries in the current task which contain the term t i . We encode each query by its correspond-ing embedding vector representation V q and take the cosine distance of these vectors while defining d ij . We consider a simple window decay f ( d ) = 1[ d &lt; a ] to only considers queries that are separated from the current query for a given sub-task, by a distance of, at most, a . 3.3 Posterior Inference The posterior of the proposed dd-CRP model is in-tractable to compute because the dd-CRP places a prior over a combinatorial number of possible cus-tomer configurations. We employ a Gibbs sampler, wherein we iteratively draw from the conditional distribution of each latent variable, given the other latent variables and observations.
 The Gibbs sampler iteratively draws from The first term is the dd-CRP prior and the second is the likelihood of observations ( x ) under the parti-tion, and t ( z ) is the sub-task formed from the assign-ments z . We employ a Dirichlet-Multinomial con-jugate distribution to model the likelihood of query terms.

Queries are assigned to sub-tasks by considering sets of queries that are reachable from each other through the query assignments. Notice that many configurations of query assignments might lead to the same sub-task assignment. Finally, query as-signments can produce a cycle, e.g., query 1 linking with 2 and query 2 linking with 1. This still deter-mines a valid sub-task assignment: all queries linked in a cycle are assigned to the same sub-task. Figure 1 provides a pictorial representation of the sub-task assignment process. In this section, we evaluate the robustness of the pro-posed sub-task extraction framework. In addition to qualitative analysis of the extracted sub-tasks, we perform a user judgment study to evaluate the qual-ity of the extracted sub-tasks. 4.1 Dataset &amp; Baselines We make use of the AOL log dataset which consists of 20M web queries collected over three months (Pass et al., 2006). The dataset comprises of five fields viz. the search query string, the query time stamp, the rank of the selected item (if any), the domain of the selected items URL (if any), and a unique user identifier. We augment on-task queries extracted from the AOL logs with the re-lated searches output from different search engines by making use of their APIs.

To compare the performance of the proposed sub-task extraction algorithm, we baseline against a number of methods including state-of-the-art task extraction systems, in addition to parametric and non-parametric clustering approaches: 1 QC-HTC (Lucchese et al., 2011): a frequently 2 LDA (Blei et al., 2003): a topic model based 3 vanilla-CRP : a vanilla non-parametric CRP 4 Proposed Approach : the proposed embedding 4.2 Qualitative Evaluation Table 1 shows some exemplar sub-tasks identified by the proposed model and the baseline methods using a CRP, QC-HTC and a LDA process. Each task is visualized using four search queries that were most frequently executed in relation to that sub-task, but not in any specific order among themselves. The task selected for this illustration was that of plan-ning a wedding, and the three sub-tasks identified using our proposed method, for this particular task were wedding hairstyles, wedding dresses, and wed-ding cards. In comparison, however, the baseline methods failed to identify diagnostic clusters. For instance, LDA grouped wedding insurance, wed-ding planning books and wedding cards as a sin-gle sub-task, while CRP grouped wedding planning kits, wedding dresses and wedding decorations into a single sub-task. Our proposed method, however, demonstrated remarkably good discriminant valid-ity, as is clear from Table 1. 4.3 User Study Evaluation of tasks and sub-tasks is an open research question. Owing to the absence of ground truth data on sub-task classification, we resort to user judg-ments in order to validate the quality of sub-tasks extracted. We select a sub-task at random and then choose a randomly selected pair of queries from that sub-task. Next, we ask the judges, recruited via be assigned to the same sub-task category. We repeat this process for a total of 100 iterations and compare the results with the ones predicted by our proposed approach, as well as with the ones predicted by the baselines.

We report the proportion of correct matches (i.e. proportion of times our predicted sub-task classifica-tions matched the expert judgments) in Fig. 2. The label agreement among the judges was 85.4% and the performance differences were statistically sig-nificant. It is clear that our proposed method out-performs both, task extraction &amp; topic model based baselines in making correct sub-task classifications. Web search tasks are often complex and comprise several constituent sub-tasks. In this paper we of-fer a non-parametric Bayesian approach to identi-fying sub-tasks by grouping search queries using an embedding based dd-CRP approach. The pro-posed model combines insights from Bayesian non-parametrics and distributional semantics to extract Figure 2: Judgments results for sub-task validity across compared approaches. sub-tasks which are not only meaningful but are also coherent. We evaluate our proposed method on the popular AOL search log dataset augmented with related search queries and demonstrate supe-riority over comparable approaches such as LDA and CRP. Further, we contend that our proposed ap-proach is significantly more useful in online environ-ments where the number of sub-tasks is never known apriori and impossible to ascertain or approximate.
In future work, we intend to consider hierarchi-cal extensions for extracting hierarchies of tasks-subtasks. Further, using an embedding based dis-tancing scheme, we offer an improvement in em-pirical performance over prior clustering approaches that have used either a bag-of-words or TF-IDF based solution. Our method offers search engine providers with a novel method to identify and an-alyze user task-behavior, and better support task de-cisions on their platforms.
 This work was supported in part by a Google Faculty Research Award.
