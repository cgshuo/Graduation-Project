 Market research has shown that consumers exhibit a vari-ety of different purchasing behaviors; specifically, some tend to purchase products earlier than other consumers. Iden-tifying such early buyers can help personalize marketing strategies, potentially improving their effectiveness. In this paper, we present a non-parametric approach to the prob-lem of identifying early buyers from purchase data. Our formulation takes as inputs the detailed purchase informa-tion of each consumer, with which we construct a weighted directed graph whose nodes correspond to consumers and whose edges correspond to purchases consumers have in com-mon; the edge weights indicate how frequently consumers purchase products earlier than other consumers.

Identifying early buyers corresponds to the problem of finding a subset of nodes in the graph with maximum dif-ference between the weights of the outgoing and incoming edges. This problem is a variation of the maximum cut problem in a directed graph. We provide an approximation algorithm based on semidefinite programming (SDP) relax-ations pioneered by Goemans and Williamson, and analyze its performance. We apply the algorithm to real purchase data from Amazon.com, providing new insights into con-sumer behaviors.
 Categories and Subject Descriptors: H.2.8 [Database Management]: Database Applications  X  Data Mining General Terms: Algorithms, Theory, Economics.
 Keywords: consumer behavior, early buyers, semidefinite programming, social network.
Marketing literature has long recognized differences be-tween early and late buyers [2]. Although no precise defini-tion for these two groups of consumers exists, the term early buyers generally refers to consumers who tend to purchase products earlier than other consumers. Identifying these  X  This work was done while the author was at Amazon.com. early buyers can help personalize marketing strategies. Fur-thermore, we can potentially use sales information among early buyers to predict product trends, forecast sales, or guide new product introduction. The problem of identifying and distinguishing early buyers has received much attention in the marketing literature [6].

In this paper, we present a non-parametric approach to the problem of identifying early buyers from purchase data. Our formulation takes as inputs the detailed purchase in-formation of each consumer, and partitions the consumers into two sets: early and late buyers. We construct from the purchase data a weighted directed graph whose nodes corre-spond to consumers. We have an edge from node i to node j with weight w ij  X  0 if, among the products that consumer and j bought in common, w ij of these products were bought by consumer i before consumer j . A large value of w ij rel-ative to w ji indicates that, in general, consumer i bought many products before consumer j .

Using the above graphical representation, the problem of identifying early buyers can be formulated as a variation of a maximum cut problem in a directed graph. Using tech-niques pioneered by Goemans and Williamson [5], we pro-vide an approximation algorithm based on semidefinite pro-gramming (SDP) relaxations and analyze its performance. We apply the algorithm to real purchase data from Ama-zon.com, providing new insights into consumer behaviors.
Let us briefly contrast our graph-based formulation with another approach for identifying early buyers. As a proxy for the set of early buyers, we might consider, for each product, the first x % of consumers who purchased the product, or those consumers who purchased the product before a certain cutoff date. Then, we can combine these sets of consumers together. This simple approach raises many questions: How do we choose the cutoff point for each product? Also, how do we combine the various sets of consumers together?
Our formulation obviates the need to answer these ques-tions since the graphical representation encapsulates all of the relevant purchase information of each consumer. More-over, we will show that the set of early buyers has a natural interpretation in our graph-based formulation, correspond-ing to the set of nodes with maximum difference between weights of the outgoing and incoming edges. We believe that the intuitive formulation and the interpretability of the solution constitute some of the advantages of our formula-tion over other approaches.
Our work relates to the study of the diffusion of inno-vations in the marketing literature. Management science researchers have attempted to understand and model the evolution of product sales over time, assuming that product sales arise from two groups of consumers: innovators who tend to buy products early, and imitators who tend to buy products later [2]. Models developed in this literature typ-ically assume that product sales over time follow a specific parametric form [6, 7]. Most of the research focus on esti-mating the model parameters from data and understanding the evolution of product sales over time, without character-izing each individual consumer. Our work shares with this line of research a common goal of understanding the behav-ior of early and late buyers. Departing from this line of research, however, we focus on characterizing each individ-ual consumer and identifying those who are early buyers.
We should note that our work differs from recent works in the study of social networks [4, 8]. Most of this research attempts to model the influence among consumers and un-derstand how this influence propagates in the networks. Al-though our work aims to identify consumers who tend to purchase products before other consumers, we do not know if these early buyers actually influence the late buyers to adopt the products.

Agrawal et al. [1] proposed a similar graphical representa-tion for the problem of identifying consumers who are  X  X or X  or  X  X gainst X  a particular topic in newsgroup postings. They modelled the links between newsgroup postings as an un-weighted undirected graph and formulated the problem as the standard maximum cut problem. Our formulation dif-fers from this approach in the use of a weighted directed graph. Our representation applies to consumer purchase data, with a different interpretation from the graph used by Agrawal et al. [1]. Moreover, it turns out that the problem of identifying early buyers differs from the standard maxi-mum cut problem and requires a dedicated analysis.
In summary, the contributions of this paper are as follow:
In Section 2, we present a detailed problem formulation and show how our formulation relates to the problem of finding a maximum likelihood assignment under a certain probabilistic model. Section 3 presents an approximation algorithm based on semidefinite programming relaxations. Then, in Section 4, we apply our algorithm to real pur-chase data from Amazon.com and identify new insights gen-erated from our analysis. Section 5 presents conclusions and discusses possible improvements. Due to space constraints, most of the results are stated without proofs. For more de-tails, the reader is referred to a full-length version of our paper.
Assume that we have M consumers indexed by 1 , 2 ,...,M and n products. We have the detailed purchase information of each consumer, including the date and time of each pur-chase. We will represent this information using a weighted directed graph G =( V , V X V ,w ), where each node v  X  V = { 1 ,...,M } corresponds to a consumer. The mapping w : V X V X  + represents the non-negative weight on each edge. Wehaveanedge( i,j )  X  X  X V with weight w ij  X  0if, among the products that consumer i and j bought in com-mon, w ij of these products were bought by i before j .For ease of exposition, we represent a missing edge from i to an edge with zero weight. An edge ( i,j )with w ij =0means that either consumer i and j never bought any product in common, or that, among products that i and j bought in common, consumer i always purchased them after consumer j . Note that for any i and j ,thesumof w ij and w ji equals the total number of products purchased by consumer i and j . A large value of w ij relative to w ji indicates that con-sumer i and j bought many of the same products, and in most cases, consumer i bought them before consumer j .
We want to identify consumers who tend to purchase products earlier than other consumers. Let us briefly discuss the underlying motivations leading up to the final formula-tion considered in this paper. Since the weight of each edge measures how frequently a consumer bought products be-fore another consumer, as a first try, we might formulate the problem as a maximum cut problem. In that case, we want to find a subset S  X  X  with maximum weights of the where Y c denotes the set of nodes not in Y .

The above formulation determines the subset of consumers who have bought the greatest number of products before all other consumers. However, this criterion does not quite capture our notions of early buyers, as demonstrated in the following example.

Example 1. Assume that we have 3 consumers { 1 , 2 , 3 } and the following 4 edges with nonzero weight: The standard maximum cut formulation will identify { 1 } as the early buyer and label { 2 , 3 } as late buyers. However, the set of early buyers should be { 1 , 2 } since these two con-sumers bought so many products earlier than the other con-sumer (consumer 3). In addition, consumer 1 bought prod-ucts before consumer 2 only slightly more than half of the time (10/19). So, it does not seem reasonable to character-ize consumer 1 as an early buyer, while labelling consumer 2 as a late buyer.

It follows from the above example that early buyers should correspond to those consumers who bought more products earlier relative to other consumers. We thus need to take into account the weights of the incoming edges as well. So, an alternative formulation that we might consider is the fol-lowing: We can also put different weights on incoming and outgoing edges. In Section 2.1, we will show how these weights are related to the probability that an early buyer will purchase a product before a late buyer. This leads us the following general formulation, named EARLY BUYERS ( G , X , X  ): where the parameters  X  and  X  denote the weights associated with outgoing and incoming edges, respectively.

The following result follows immediately from the fact that EARLY BUYERS( G , 1 , 0) corresponds to the standard maximum cut problem in a directed graph.

Theorem 1. EARLY BUYERS ( G , X , X  ) is NP-complete.
In this section, we provide a probabilistic interpretation for our formulation, showing that the EARLY BUYERS problem is related to the problem of finding a maximum likelihood assignment in a certain probabilistic model. This probabilistic view provides an alternative interpretation for the parameters  X  and  X  .

For each consumer i  X  X  1 ,...,M } ,let X i denote a binary random variable that indicates the state of consumer i ,with X i = 1 indicating an early buyer and X i = 0 indicating a late buyer. Assume that X 1 ,...,X M are independent and identically distributed with Pr { X i =1 } = p 0 for all i
Under this model, we assume that we have an infinite number of products, a reasonable assumption in our setting since Amazon.com sells millions of products. Let W ij de-note the weight of the edge ( i,j ). Conditioned on X i and X , we assume that W ij has a geometric distribution with parameter f ( X i ,X j ), i.e. for any w ij  X  X  + , Pr where for some parameter 0 &lt;p 1 &lt; 1. The parameter p 1 corre-sponds to the probability that an early buyer will purchase a product before a late buyer. In this model, whenever two nodes have the same state, we assume that the probability of having an edge between nodes is 1 / 2.

We can consider the problem of finding an assignment x =( x 1 ,...,x M )  X  X  0 , 1 } M that maximizes the likelihood of the graph G under this model. For any x =( x 1 ,...,x M be shown that the log-likelihood l ( x 1 ,...,x M )isgivenby l ( x 1 ,...,x M )=logPr { W ij = w ij  X  i,j and X k = x k  X  k } where for any x =( x 1 ,...,x M )  X  X  0 , 1 } M ,  X  ( x )= | S 0 | log(1  X  p 0 )+ | S 1 | log p 0  X  =log2 p 1 ,and  X  =  X  log 2(1  X  p 1 ). Since  X  ( x ) depends on x only through the following lemma.

Lemma 1. Let  X  and  X  be defined as above. Then, for any 0  X  K  X  M , argmax The above lemma shows that finding a set of early buyers of size K is equivalent to finding a maximum likelihood assign-ment of X 1 ,...,X M subject to the constraint that exactly K of the X i  X  X  are one.

The above lemma also establishes a relationship between the parameters  X  ,  X  , and the probability p 1 that an early buyer will purchase a product before a late buyer. We showed that  X  =log2 p 1 and  X  =  X  log 2(1  X  p 1 ). This result allows us to estimate the parameters  X  and  X  from p . Also, if we assume that this probability is at least 1 / then it follows that  X   X   X  . In this section, we develop algorithms for solving the EARLY BUYERS problem. Section 3.1 presents an exact polynomial-time algorithm for a special case when  X  =  X  . Then, Section 3.2 presents an approximation method for the general prob-lem.

To facilitate our discussion, let us introduce the follow-ing notations that will be used throughout the paper. For any  X   X  0and  X   X  0, let Z MAX (  X , X  ) denotes the opti-mal value of the EARLY BUYERS ( G , X , X  ) problem, i.e.
When  X  =  X  , it turns out that the EARLY BUYERS problem can be solved efficiently via a simple algorithm. This result is stated in the following theorem.
 Theorem 2. For  X   X  0 , where S G =
It follows from the above theorem that, when  X  =  X  , we can determine the optimal cut for the EARLY BUY-ERS problem from the difference, at each node, between the weights of the outgoing edges and of the incoming edges. The optimal cut corresponds to those vertices whose differ-ence is non-negative. Although we have an efficient algorithm for solving the EARLY BUYERS problem when  X  =  X  , it is unlikely that such an algorithm can be found for general  X  and  X  .In this section, we develop an approximation algorithm based on semidefinite programming relaxations pioneered by Goe-mans and Williamson [5].
We will first formulate the EARLY BUYERS problem as an integer quadratic programming as follows: where for any ( i,j )  X  X  X V , f ij ( y 0 ,y i ,y j )=((  X   X   X  )(1  X  y i y j )+(  X  +  X  ) Note that for y 0 ,y i ,y j  X  X  X  1 , +1 } , The above function is non-zero only when y i = y j .More-over, the variable y 0 can be used to determine which side of the graph constitutes a cut. Given y i  X  X , we define a cut as the set { i : y i = y 0 } . The above formulation differs from the standard maximum cut formulation (Section 6.3 in [5]) because our objective function can be negative.

We will now relax the above integer programming problem to the following semidefinite programming problem ( P ): where S n = { v  X  n : v 2 =1 } denotes the n-dimensional unit sphere. It follows from [5] that the above problem ( is a semidefinite programming problem, and can be solved efficiently. Our algorithm proceeds as follows: Algorithm: 1. Solve the problem ( P ) and obtain solutions v 0 ,...,v 2. Generate a random vector r that is uniformly dis-3. Define y 1 ,...,y n as follows: y i =1ifsgn( v i  X  r )= 4. Define a cut S as { i : y i =1 } .
In this section, we offer bounds on the performance of our solution. Since our objective function can be negative, the standard analysis of the error bounds for the maximum cut problem does not apply directly in this case. We will provide a dedicated analysis specific to this problem.

Let v 0 ,v 1 ,...,v M denote the solutions of the semidefinite program ( P ) given in Section 3.2.1, and let y 1 ,...,y M note the integral solution found after the randomized round-ing. Let us introduce the following notations. Let W total note the total weights of all edges, i.e. W total = Let Z P (  X , X  ) denote the optimal value of the semidefinite programming relaxation problem ( P ). Finally, let Z H (  X , X  denote the of the value of the cut S determined by our al-gorithm after the randomized rounding. Note that for any  X  and  X  , Z H (  X , X  )  X  Z MAX (  X , X  )  X  Z P (  X , X  ).
The main result of this section is stated in the following theorem, which relates the expected value of the cut pro-duced by our algorithm to the optimal value. The proof of this result relies on techniques similar to that of Goemans and Williamson [5].

Let us briefly discuss the performance bound given in The-orem 3 and the choice of  X W total which appears in the result. Note that our objective function can be negative, and let us denote its minimum value by Z MIN (  X , X  )  X  0. Since the value of the cut produced by our algorithm can also be neg-ative, a natural performance measure to consider is given by Unfortunately, we could not find a constant lower bound for R (  X , X  ) that holds for all  X  and  X  .Since  X   X W total  X  Z MIN (  X , X  )  X  Z H (  X , X  ), we instead use  X   X W total as an approximation to Z MIN (  X , X  ) and develop the bound given in Theorem 3.

Although we cannot find a lower bound for R (  X , X  )that holds in general, for specific instances of  X  and  X  ,wecan still assess the quality of our solution as indicated in the following lemma.
 Lemma 2. For any  X , X   X  0 , E Z H (  X , X  )  X  Z MIN (  X , X  ) The proof of Lemma 2 makes use of the fact that Z MIN (  X , X   X  Z MAX (  X , X  ). This result enables us to develop a conser-vative lower bound on the quality of our solution for specific instances of  X  and  X  by solving two semidefinite program-ming problems: one with (  X , X  ) and another with (  X , X  ).
In this section, we apply our algorithm to real purchase data from Amazon.com, providing new insights into con-sumer behaviors. Section 4.1 describes the dataset used in our experiment. Section 4.2 compares the performance of our algorithm with other heuristics. The next two sections evaluate the set of early and late buyers identified by our al-gorithm, contrasting the purchasing behavior between these two groups of consumers. Finally, Section 4.5 concludes with an evaluation of our algorithm for different values of  X  and  X  .
We use purchase data from Amazon.com during the year 2002. To ensure that we have sufficiently many consumers, we chose the top 50 most popular electronics items sold in the year 2002 as the set of products for our analysis. More-over, to eliminate consumers who purchased very few prod-ucts, we only consider those who bought at least four of these 50 products in 2002.

Given consumers i and j ,wecreateanedge( i,j )with weight w ij  X  0 if among the 50 products that i and j have bought in common, w ij of those products were bought by consumer i at least 24 hours prior to consumer j . We will use purchase data from the year 2002 to identify the set of early and late buyers. Then, we will evaluate the performance of this set of consumers using purchase data from the year 2003.
We evaluate the performance of two different algorithms: our algorithm based on SDP relaxations and the Top-Net-Weight algorithm.
The Top-Net-Weight algorithm uses the following set of nodes as an approximation to the optimal cut: { i  X  X  :  X  gorithm yields the optimal cut by Theorem 2.

For our experiment, we choose the following set of parame-ters:  X  =0 . 3365 and  X  =0 . 5108. This choice of parameters is motivated by the discussion in Section 2.1. We showed that the parameters  X  and  X  are related to the probability p that an early buyer will purchase a product before a late buyer, where  X  =log2 p 1 ,and  X  =  X  log 2(1  X  p 1 ).
Since an early buyer is more likely to purchase a product before a late buyer, we want p 1 to exceed 1 / 2. Our choice of  X  and  X  is determined by setting p 1 =0 . 7. We chose this value only as a benchmark, and in Section 4.5, we will eval-uate the performance of our algorithm on different values of  X  and  X  . Also, for our algorithm, we use an implementa-tion of the dual-scaling algorithm for positive semidefinite programming developed by Benson and Ye [3].

The objective values of the cuts produced by the algo-rithms are given in Table 1. The results in Table 1 show that our algorithm based on semidefinite programming re-laxations yields a 7.18% improvement in the objective value over the Top-Net-Weight algorithm.
 Top-Net-Weight 34.31% 700,037 Table 1: Performance comparison between the Top-Net-Weight algorithm and the SDP.
Using the set of early and late buyers identified by our al-gorithm, we compare the characteristics of these two groups of consumers across different dimensions. We look at the fol-lowing characteristics for the year 2002 and 2003: 1) overall revenue (total amount of money that the consumer spent on all products), 2) electronics revenue (total amount of money that the consumer spent on electronics products), 3) overall quantity (total quantity of all products purchased), and 4) electronics quantity (total quantities of electronics products purchased).

For each of these characteristics, we compute its average for each group of consumers. Table 2 shows, for each vari-able, the ratio between the average among the early buyers and the average among the late buyers for the year 2002 and 2003. If the ratio exceeds one, then the average value among the early buyers is higher than the average among the late buyers. All variables are statistically significant at p-value less than 5%.

It follows from Table 2 that for the year 2002, the early buyers spent more money than the late buyers overall and on electronics products. Moreover, the early buyers continued to spend more money overall and on electronics products even in the year 2003.
In the previous section, we showed that early and late buy-ers exhibit significant differences in their overall purchasing behaviors. In this section, we look at the actual timing of the product purchases between these two groups of consumers. electronics revenue 1.15 1.02 electronics quantity 1.14 0.98 Table 2: Purchase characteristics between early and late buyers for the year 2002 and 2003. All variables are statistically significant at p-value less than 5%. Figure 1: Cumulative sales distribution for the year 2002 among early buyers, late buyers, and the over-all population for a wireless notebook adapter
Figure 1 shows the cumulative sales distributions in 2002 for a wireless notebook adapter, one of the top selling elec-tronics products in the year 2002 that appears in our analy-sis. As expected, in the year 2002, the early buyers are more likely to purchase this product before the late buyers. We see from the graph that over 90% of the sales from the early buyers occurred by July 2002, while at the same time, less than 10% of the sales have occurred for the late buyers. A similar purchasing pattern continues to holds for almost all of the products in our analysis.

In Figure 2, we consider sales distributions for two brand new products that were not introduced until the year 2003 (and hence not part of the analysis): a portable CD player and a 40GB iPod. This figure shows the sales distribution in the year 2003 for these two products. It it interesting to note that the early buyers identified by our algorithm purchased both of these products significantly before the late buyers.
We conclude this section by evaluating the performance of the SDP algorithm against the Top-Net-Weight algorithm introduced in Section 4.2 for different values of  X  and  X  It follows from the definition that, for  X &gt; 0, the EARLY BUYERS( G , X , X  ) problem is equivalent to the EARLY BUY-ERS ( G , X / X , 1) problem. Thus, in this experiment, we set  X  =1 . 0 and vary only the parameter  X  .Figure3shows the relative difference between the objective value under the SDP and the Top-Net-Weight algorithm for different choices of  X  . As predicted by Theorem 2, when  X  =  X  =1 . 0, the difference is zero since both algorithms yield the optimal value. However, as  X  differs from  X  , the SDP outperforms ( a ) Portable CD Player ( b ) 40GB iPod Figure 2: Cumulative sales distribution in the year 2003 for (a) portable CD player and (b) 40GB iPod. These products were not released until 2003. Figure 3: Relative difference between the objective values under the SDP and the Top-Net-Weight al-gorithm for different values of  X  .Weset  X  =1 . 0 . the Top-Net-Weight algorithm, yielding a much higher ob-jective value for all values of  X  .
We presented a non-parametric approach to the problem of identifying early buyers. Our formulation makes use of a new graphical representation of purchase data. We provided an approximation algorithm based on semidefinite program-ming relaxations and analyzed its performance. We also ap-plied the algorithm to real purchase data from Amazon.com, providing new insights into consumer behaviors. Our cur-rent formulation offers many interesting extensions and di-rections for future research. We outline a few of these here. Scalability: Millions of consumers shopped at Amazon.com Constraints on Number of Early Buyers: The paper aims Definition of the Edge Weights: Currently, the weight Product Life Cycles: Our formulation uses purchase data Choices of  X  and  X  : In this paper, we treat the parame-We are grateful to Ronny Kohavi, Benjamin Van Roy, and the referees whose suggestions greatly improved the con-tent and the presentation of this paper. We also thank Jeremy York, Doug Bryan, and Mike Perkowit zfor many helpful comments. We thank our colleagues, David Liu, John Rauser, Dan Sommerfield, and Toby Walker for stimu-lating discussions on related topics. We would like to thank Yinyu Ye and Aileen Sandridge for pointers to interesting problems during the early part of this research. Finally, we are grateful to Steven J. Benson for the use of his semidefi-nite programming solver and for all of his assistance.
