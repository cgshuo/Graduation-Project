 ORIGINAL PAPER Antoine Doucet  X  Gabriella Kazai  X  Bodin Dresevic  X  Aleksandar Uzelac  X  Bogdan Radakovic  X  Nikola Todic Abstract This paper describes the setup of the Book Struc-ture Extraction competition run at ICDAR 2009. The goal of the competition was to evaluate and compare automatic techniques for deriving structure information from digitized books, which could then be used to aid navigation inside the books. More specifically, the task that participants faced was to construct hyperlinked tables of contents for a collection of 1,000 digitized books. This paper describes the setup of the competition and its challenges. It introduces and discusses the book collection used in the task, the collaborative con-struction of the ground truth, the evaluation measures, and the evaluation results. The paper also introduces a data set to be used freely for research evaluation purposes.
 1 Introduction Mass-digitizationprojects,suchastheMillionBookproject, 1 efforts of the Open Content Alliance, 2 and the digitization work of Google 3 are converting whole libraries by digitiz-ing books on an industrial scale [ 1 ]. The process involves the efficient photographing of books, page-by-page and the conversion of each page image into searchable text through the use of optical character recognition (OCR) software.
Current digitization and OCR technologies typically pro-duce the full text of digitized books with only minimal struc-ture information. Pages and paragraphs are usually identified and marked up in the OCR, but more sophisticated structures, such as chapters, sections, etc., are currently not recognized. In order to enable systems to provide users with richer brows-ing experiences, it is necessary to make available such addi-tional structures, for example in the form of XML markup embedded in the full text of the digitized books.

The Book Structure Extraction competition aims to address this need by promoting research into automatic struc-ture recognition and extraction techniques that could com-plement or enhance current OCR methods and lead to the availability of rich structure information for digitized books. Such structure information can then be used to aid user nav-igation inside books as well as to improve search [ 15 ].
The paper is structured as follows. We start by placing the competition in the context of the work conducted at the INEX evaluation forum (Sect. 2 ). In Sect. 3 , we describe the setup of the competition, including its goals and the task that has been set for its participants. The book collection used in the task is detailed in Sect. 4 , while the proposed measures for the evaluation of the participating systems X  performance are described in Sect. 5 . The approach chosen to construct the ground truth and obtained data are presented in Sect. 6 . The results of the Structure Extraction competition are given in Sect. 7 . We conclude with a summary of the competition and our future plans in Sect. 8 . 2 Background Motivated by the need to foster research in areas relating to large digital book repositories, see e.g., [ 8 ], the Book Track was launched in 2007 as part of the Initiative for the Evaluation of XML retrieval (INEX). 4 INEX was chosen as a suitable forum as searching for information in a collec-tion of books can be seen as one of the natural application areas of focused retrieval approaches [ 7 ], which have been investigated at INEX since 2002 [ 4 , 5 ]. In particular, focused retrieval over books presents a clear benefit to users, enabling them to gain direct access to parts of books (of potentially hundreds of pages in length) that are relevant to their infor-mation need.

The overall goal of the INEX Book Track is to promote inter-disciplinary research investigating techniques for sup-porting users in reading, searching, and navigating the full texts of digitized books and to provide a forum for the exchange of research ideas and contributions. In 2007, the track focused on information retrieval (IR) tasks [ 9 ]. In 2008, two new tasks were introduced, including the book structure extraction task [ 11 ]. The structure extraction task was set up with the aim to evaluate automatic techniques for deriving structure from the OCR texts and page images of digitized books. The first round of the structure extraction task, in 2008, ran as a  X  X eta X  and permitted to set up appropriate eval-uation infrastructure, including guidelines, tools to generate ground truth data, evaluation measures, and a first test set of 100 books built by the organizers. The second round was run both at INEX 2009 [ 10 ] and at the International Conference on Document Analysis and Recognition (ICDAR) 2009 [ 3 ]. This round builds up on the established infrastructure with an extended test set of 1,000 digitized books. 3 Competition setup 3.1 Goals The goal of the structure extraction competition at ICDAR 2009 was to test and compare automatic techniques for deriv-ing structural information from digitized books in order to build hyperlinked tables of contents (ToC) that could then be used to navigate inside the books.

Example research questions whose exploration is facili-tated by this competition include, but are not limited to:  X  Can a ToC be extracted from the pages of a book that  X  Can a ToC be extracted only from textual information or  X  What techniques provide reliable logical page number 3.2 Task description Given the OCR text and the PDF of a sample set of 1,000 digitized books of different genre and style, the task was to build hyperlinked tables of contents for each book in the test set. The OCR text of each book is stored in DjVu XML for-mat (see Sect. 4 ). Participants could employ any techniques and could make use of either or both the OCR text and the PDF images to derive the necessary structure information and generate the ToCs.

Participating systems were expected to output an XML file (referred to as a  X  X un X ) containing the generated hyper-linked ToC for each book in the test set. The document type definition (DTD) of a run is given in Fig. 1 .

Participants were invited to submit up to 10 runs, each run containing the ToCs for all 1,000 books in the test set.
The ToCs created by participants were compared to a man-ually built ground truth; see Sects. 5 and 6 for details on the annotation process and the evaluation measures. 3.3 Participating organizations Following the call for participation issued in April 2009, 11 organizations registered. They are listed in Table 1 . Several organizations have expressed interest but renounced partic-ipation due to time constraints. Of the 11 organizations that signed up, 3 dropped out, that is, they neither submitted runs nor participated in the ground truth annotation process.
Interestingly, among the organizations that signed up and did not manage to send runs, more than half (4 out of 7) still contributed to the ground truth creation, possibly suggesting their intent to participate in forthcoming rounds of the com-petition. However, contribution to the ground truth was also the sole condition upon which access to the compiled ground truth was then given. This condition was imposed with the aim to incentivise participants and increase the number of fully annotated ToCs, which in turn would lead to more reli-able evaluation results. The observed community interest is a good indicator of the relevance of this new competition, and an encouragement to pursue it in coming years, as was already requested by several of the participants. 4 Book collection The corpus of the INEX book track contains 50,239 digitized, out-of-copyright books, provided by Microsoft Live Search and the Internet Archive [ 11 ].

Theset of books usedinthebookstructureextractioncom-petition comprises 1,000 books selected from the INEX book corpus. It consists of books of different genre, including his-tory books, biographies, literary studies, religious texts and teachings, reference works, encyclopedias, essays, proceed-ings, novels, and poetry.

To facilitate the separate evaluation of structure extraction techniques that are based on the analysis of book pages that contain the printed ToC versus techniques that are based on deriving structure information from the full book content, we selected 200 books that do not contain a printed ToC into the total set of 1,000. To do this, we used a tool developed by Microsoft Development Center Serbia, which converts the DjVu XML OCR text into BookML, a format in which pages that contain the printed ToC (so called ToC pages) are explicitly marked up. We then selected a set of 800 books with detected ToC pages, and a set of 200 books without any detected ToC pages into the full test set of 1,000 books. We note that this ratio of 80:20% of books with and without printed ToCs is proportional to that observed over the whole INEX corpus of 50,239 books.

The uncompressed size of the structure extraction corpus is around 33GB.

Each book was provided in two different formats: portable document format (PDF), and DjVu XML containing the OCR text and basic structure markup as illustrated below:
An &lt; OBJECT &gt; element corresponds to a page in a dig-itized book. A page counter, corresponding to the physical page number, is embedded in the @value attribute of the &lt;
PARAM &gt; element, which has the @name= X  X AGE X  attri-bute. The logical page numbers (as printed inside the book) can be found (not always) in the header or the footer part of a page. Note, however, that headers/footers are not explicitly recognized in the OCR, i.e., the first paragraph on a page may be a header and the last one or more paragraphs may be part of a footer. Depending on the book, headers may include chapter/section titles and logical page numbers (although due to OCR error, the page number is not always present).
Inside a page, each paragraph is marked up. It should be noted that an actual paragraph that starts on one page and ends on the next is marked up as two separate paragraphs within two page elements. Each paragraph element consists of line elements, within which each word is marked up sep-arately. Coordinates that correspond to the four points of a rectangle surrounding a word are given as attributes of word elements. 5 Measures The automatically generated ToCs submitted by participants wereevaluatedbycomparingthemtoamanuallybuiltground truth. The evaluation required the definition of a number of basic concepts: Definitions. We define the atomic units that make up a ToC as ToC Entries. A ToC Entry has the following three properties: Title , Link , and Depth Level . For example, given a ToC entry corresponding to a book chapter, its Title is the chapter title, its Link is the physical page number at which the chapter starts in the book, and its Depth Level is the depth at which the chapter is found in the ToC tree, where the book represents the root.
 Given the above definitions, the task of comparing two ToCs (i.e., comparing a generated ToC to one in the ground truth) can be reduced to matching the titles, links and depth levels of each ToC entry. This is, however, not a trivial task as we explain next.

Matching Titles. A ToC title may take several forms and it may only contain, e.g., the actual title of a chapter, such as  X  X is Birth and First Years X , or it may also include the chap-ter number as in  X 3. His Birth and First Years X  or even the word  X  X hapter X  as in  X  X hapter 3. His Birth and First Years X . In addition, the title that is used in the printed ToC may dif-fer from the title that then appears in the book content. It is difficult to differentiate between the different answers, as all of them are in fact correct titles for a ToC entry.
Thus, to take into account not only OCR errors but also the fact that many similar answers may be correct, we adopt vague title matching in the evaluation. We say that two titles match if they are  X  X ufficiently similar X , where similarity is measured based on a modified version of the Levenshtein algorithm (where the cost of alphanumeric substitution, dele-tion and insertion is 10, and the cost of non-alphanumeric substitution, deletion and insertion remains 1) [ 12 ]: Two strings A and B are  X  X ufficiently similar X  if D = Le is less than 20% and if the distance between their first and last five characters (or less if the string is shorter) is less than 60%.

Matching Links. A link is said to be correctly recog-nized if there is an entry with matching title linking to the same physical page in the ground truth.

Matching Depth levels. A depth level is said to be cor-rect if there is an entry with matching title at the same depth level in the ground truth.

Matching complete ToC entries. A ToC entry is entirely correct if there is an entry with matching title and same depth level, linking to the same physical page in the ground truth.
Measures. For a given book ToC, we can then calculate precision and recall measures [ 14 ] for each property sepa-rately and for complete entries. Precision is defined as the ratio of the total number of correctly recognized ToC entries and the total number of ToC entries in a generated ToC, and recall is defined as the ratio of the total number of correctly recognized ToC entries and the total number of ToC entries in the ground truth. The F -measure is then calculated as the harmonic mean of precision and recall. Each of these values was computed separately for each book and then averaged over the total number of books (macro-average).

The measures were computed over the two subsets of the 1,000 books (see Sect. 4 ), as well as the entire test set to calculate overall performance. The two subsets, originally comprising of 800 and 200 books, respectively, which do and do not have a printed ToC, allowed us to compare the effectiveness of techniques that do or do not rely on the pres-ence of printed ToC pages in a book.

Results. For each submission, a summary was provided in two tables, presenting general information about the run as well as a corresponding score sheet (see an example in Table 2 ). 6 Ground truth creation Naturally, to compare the submitted runs to a ground truth necessitates the construction of such a ground truth. Given the burden that this task may represent, we chose to split it between participating institutions, and rather than forcing participants to do annotations (which may trigger hasty and careless work), we encouraged them with an incentive: we limited the distribution of the resulting ground truth set to those who contributed a minimum number of annotations. This section describes the ground truth annotation process and its outcomes. 6.1 Annotation process The process of manually building the ToC of a book is very time-consuming. Hence, to make the creation of the ground truth for 1,000 digitized books feasible, we resorted to (1) facilitating the annotation task with a dedicated tool, (2) mak-ing use of a baseline annotation as starting point and employ-ing human annotators to make corrections, and (3) sharing the workload.

An annotation tool was specifically designed for this pur-pose and developed at the University of Caen. The tool takes as input a generated ToC and allows annotators to manu-ally correct any mistakes. A screen capture of the tool is shown in Fig. 2 . In the application window, the right-hand side displays the baseline ToC with clickable (and edit-able) links. The left-hand side shows the current page and allows to navigate through the book. The JPEG image of each visited page is downloaded from the INEX server at http://www.booksearch.org.uk and is locally cached to limit bandwidth usage.

Using the submitted ToCs as starting points of the anno-tation process greatly reduces the required effort, since only the missing entries need to be entered. Others simply need to be verified and/or edited, although even these often require annotators to skim through the whole book.

An important side effect of making use of a baseline ToC is that this may trigger a bias in the ground truth, since annota-tors may be influenced by the ToC presented to them. To reduce this bias (or rather, to spread it among participat-ing organizations), we chose to take the baseline annotations from participant submissions in equal shares.

Finally, the annotation effort was shared among all partici-pants. Teams who submitted runs were required to contribute a minimum of 50 books, while others were required to con-tribute a minimum of 100 books (20% of which are books without a printed ToC). The created ground truth was made available to all contributing participants for use in future eval-uations. 6.2 Collected ground truth data Seven teams participated in the ground truth annotation pro-cess, four of which did not submit runs. This joint effort resulted in a set of 649 annotated books. To ensure the quality and internal consistency of the collected annotations, each of the annotated ToC was reviewed by the organizers and a significant number had to be removed. Any ToC with annotation errors were then removed. Errors were most of the time due to failure to follow the annotation guide-lines or incomplete annotations.

Following this cleansing step, 527 annotated books remain to form the ground truth file that was distributed to each con-tributing organization. Ninety-seven of the annotated books are ones for which no ToC pages were detected.

Freely available ground truth. To facilitate the partic-ipation of other institutions in the future, it was decided to make available the ground truth set of the 100 ToCs that were built during the first Book Structure Extraction task at INEX 2008 [ 11 ].

This ground truth set is available from the competition X  X  website, together with the corresponding evaluation soft-ware. 5
Consistency of the annotation. As this competition is in its early years and as the evaluation is based on manually built ground truth, it was crucial to validate the approach by verifying the consistency of the gathered ToC annotations.
To do this, we assigned the same set of books to two dif-ferent institutions. This resulted in 61 books being annotated twice. We measured annotator agreement by using one of these sets as a run and the other as the ground truth and calculating our official evaluation metrics (see Sect. 5 ). The result of this comparison is given in Table 3 ).

We can observe an agreement rate, of over 70% for complete entries based on the F -measure. It is important to observe that most of the disagreement stems from title matching, which makes us question whether the 20% tolerance utilized when comparing title strings with the Levenshtein distance may need to be increased, so as to lower the impact of annotator disagreement on the eval-uation results. However, this requires further investigation as an excessive increase would lead to uniform results (more duly distinct titles would be deemed equivalent). 7 Results A summary of the performance of all the submitted runs, based on F -measure for complete entries (see entry in bold in Table 2 ) is given in Table 4 .

The score sheets corresponding to each of the runs is avail-able online. 6 7.1 Approaches presented Descriptions of the approaches by the participants revealed that MDCS [ 13 ] and Noopsis focused on exploiting the con-tents of ToC pages. They made no use of the rest of the books, except for the purpose of page linking (that is, to find the right page number corresponding to a ToC entry). The technique employed by MDCS consists of three steps: recognizing ToC pages, assigning every page in the book to a physical page number, and finally processing each ToC page to extract all ToC entries through a supervised method relying on pattern occurrences detected in a training set.

On the other hand, the technique followed by the Univer-sity of Caen (GREYC) [ 6 ] works on full documents, with no particular focus on ToC pages (with no attempt to detect them). Their goal is to detect chapter beginnings with a 4-page window that aims to spot large whitespaces as strong indicators of the end of a chapter and the beginning of a new one. They report that a bug in the assignment of the phys-ical page numbers unfortunately made their results hard to interpret.

XRCE X  X  approach is entirely unsupervised [ 2 ]. An inter-esting first step is the removal of all headers and footers, which are said to be a common cause of error. Each page in a book is then assigned a physical page number. The detection of ToC and index pages is unsupervised and keyword based. Each ToC page is then  X  X egmented X  into ToC entries using the references to page numbers. The runs also experiment with the use of  X  X railing whitespaces X , a feature very similar to that used by the University of Caen. The impact of this feature is said to be very promising. 7.2 Detailed results The fact that an identified portion of the 1,000 books does not contain a ToC section allows for a separate evaluation over this subcollection. This part of the corpus is of particu-lar interest, since ToC extraction in this case permits a clear improvement for the digitized version of a book compared to its printed version: the addition of a table of contents, which does not exist in the printed version.

Results for subset with books without ToC pages . The results, calculated over the set of 97 books in the ground truth that did not contain ToC pages are presented in Table 5 .
Focusing the evaluation on this subset highlights the dif-ference between the techniques that exploit the presence of the printed ToCs to techniques that extract structure from the inner-content of the books, e.g., by searching for titles throughout the book and not only within the ToC pages. From the results, it is clear that much remains to be done before these approaches can be deemed reliable. Compared with the best performance of 41.51% achieved over the whole test set (see Table 4 ), the best performance on the subset of 97 books without a printed ToC present is only 7.81% for com-plete entries, achieved by XRCE. When the F -measure is calculated over titles only, the best performance of 16.09% is obtained by the University of Caen. Noopsis and MDCS perform relatively poorly on this subset, stemming from their sole focus on extracting structure from ToC pages and their page-linking process.

Results for the books with an identified ToC . We also compiled results based on the subset of 430 books that con-tained ToC pages. These are presented in Table 6 . The results are in line with the observations obtained for the whole ground truth set, although the scores are naturally increased due to the removal of the set of books with no ToC pages (which is typically associated with poor performance). 7.3 Alternative measure Participants were encouraged to propose alternative metrics, and Meunier and D X jean introduced the XRCE link-based measure to complement the official measures with the aim to take into account the quality of the links directly, rather than conditionally to the title X  X  validity [ 2 ].

Indeed, the official measure works by matching ToC entries primarily based on their title. Hence the runs that incorrectly extract titles will be penalized with respect to all the measures presented in the score sheet of Table 2 .For instance, a system that incorrectly extracts titles, while cor-rectly identifying links will obtain very low scores (possibly 0%). The XRCE link-based measure permits to evaluate the performance of systems works by matching ToC entries pri-marily based on links rather than titles. The corresponding results are given in Table 7 . As it can be seen, the results improve as possible errors in the titles no longer lead to whole ToC entries being discounted.

The  X  X omplete entries X  measure, used as a reference in most of this paper is a global, cumulative measure. Because an entry must be entirely correct, i.e., title, link, etc., to be counted as a correct entry, an error in any of the criteria implies a complete error.

While the various measures presented in Sect. 5 have in common a sensitivity to errors in the titles of ToC entries, the alternative measure in turn is strongly dependent on the correctness of page links.

We do not claim that success with respect to one metric is more important than with another, but believe that the mea-surespresentedshouldbeseenascomplementary.Depending on the application or situation, one metric may be preferred over another. For example, if navigation is key, then being able to land the user on a page where a chapter starts may be more important than getting the title of the chapter right.
One of our goals in the future is to provide a toolbox of metrics, to be used by researchers enabling them to ana-lyze and better understand the outcome of each of their approaches. The current version of this toolkit is available at the competition X  X  Web site. 7 8 Summary and future plans A strength of the conjoint organization between INEX and ICDAR 2009, is that while the results were announced at the ICDAR conference, 26 X 29 July 2009, in Barcelona, Spain, the participants had the opportunity to submit papers describ-ing their approaches to the INEX 2009 Workshop, which was held in December 2009 in Brisbane, Australia.

We plan to continue running the competition in the com-ing years. This was also requested by several participants intending to return, as well by several other institutions who were developing their structure extraction systems this year. Some of these groups participated this year by contributing to the building of the ground truth set, even though they did not manage to submit any runs.

Another motivating reason to continue the competition is evidenced by the current results indicating that much could still be improved upon, especially in the case of books that do not contain ToC pages.

In future years, we aim to investigate the usability of the extracted ToCs. In particular, we will explore the use of qualitative evaluation measures in addition to the current precision/recall measures. This would enable us to better understand what properties make a ToC useful and which are important to users engaged in reading or searching. Such insights are expected to contribute to future research into providing better navigational aids to users of digital book repositories. References
