 College of Command Information System, PLA University of Science and Technology, Naijing, Jiangsu, China
Xi X  X n Communications Institute, Xi X  X n, Shaanxi, China Institute of Electronic System Engineering of China, Beijing, China 1. Introduction
The past decade has witnessed a rapid development and change of the Internet. Numerous social networking sites have been cropping up, drawing people together and empowering them with new forms of collaboration and communication. In social media, a user however, can be both a consumer and a producer. With hundreds of millions of users in various social networks, everybody can be a media outlet [1]. This new type of mass publication enables the production of timely news and grassroots information and leads to mountains of user-generated contents, forming the wisdom of crowds. All those lead to some interesting phenomenon in social network, users X  relationship and influence between each other tend to be a community structure instead of the random. Thus, social networks exhibit a strong community structure [2]. That is, users in a group tend to interact with each other more than with those outside the group. Nodes in a community keep a close contact with each other; they share information or cooperation [23]. For example, social media services like Facebook and Twitter allow the users who have the same interest in a community to share content and interact to each other such as comments. So, to study the social network, it is important to study communities rather than individuals. Furthermore, user play different role in the community because of rich user interaction, that is, more user interaction encourages more user participation. In fact, the majority of nodes have a low attraction for others, while few have an extremely high attraction. To evaluate node characteristics in community can help analyze community structure and evolution. For example, in blogosphere, spam blogs and spam comments which be identified in building a blog search engine [9], this need a study obtaining the spam features [13] in networks. Thus, no matter digging valuable knowledge in the large social network or optimizing the network functions, we need a serious research in social network, because there are millions of nodes and only a few of them play an important role in community structure, it is necessary to discover community and evaluate node characteristics in community in social network.

Now, community discover is a well-established field and many efficient graph-based methods have been introduced [3,4,24]. Unfortunately, these methods expose the strong dependence on the network topology as well as the implicit meaning and modeling simply as undirected graph interpretation [5]. Many methods try to model the network as an undirected graph. However, this representation of a social network is inaccurate and cannot cover the details about relations among users. For example, many users are interested in the super stars X  blogs or hot twitters and they are willing to visit those blogs and twitters, but the stars wouldn X  X  be interested in every fan. Therefore, choosing directed graphs to same strength; users only frequently communicate with a few of their friends and connect with others occasionally, so different connections should have different weight. Furthermore, there always exist the some users who spread illegal information, or keep on line occupying the precious resources but doing nothing. Therefore, in most cases, real-world social networks should be modeled as a weighed directed model, which will benefit the tasks of discovering community and analyzing node characteristics in community.

Nonnegative Matrix Factorization (NMF) [6] is a very effective tool to cope with many problems. It is can be used to discover community, and NMF-based algorithms for network communities discover have gained great attention due to its meaningful interpretation [7,26]. Its core idea is to approximate a higher dimensional matrix with non-negative lower dimensional matrices. When a social network is be represented by a matrix G, the tri-factorization of G to XSX T is equivalent to deal with the eigenvalue decomposition on G, and the matrix X can be described to represent the community membership. In fact, NMF begin with the random initialization, different S can lead membership appear uncertain, especially in weighed directed graph model, In this paper, to discover community, we model the node relationships as weighted directed graph to construct a relation matrix, a reasonable optimization objective function was built, which is guided by the so me useful constraint conditions in X and S. Meanwhile, we propose a pertinent partition algorithm to handle weighted asymmetric matrix well. Furthermore, evaluating nodes importance is useful to find network structure and function; we will propose a method show how to analyze the node characteristics and importance to community by the NMF results, finally, some interesting experiments on real world networks to show the effectiveness of the algorithm. The proposed framework can be used to deal with overlapping communities and provides a method for coping with community discover containing thousands of nodes in social network.

The rest of this paper will be organized as follows. Section 2 will introduce some related work, the de-tails about our NMF algorithm with the weighted directed representation will be introduced in Sections 3 and 4 introduces the node characteristics analyzing and nodes importance evaluating in community, the experimental results will be introduced in Section 5, conclusions and discussions will be introduced in Section 6. 2. Related work
The link relationships of a network can be represented by graph G = (V, E, W), where V is the set of n vertices which denote the nodes of network, E is the set of edges which connect a pair of vertices in G, and W is the weight value of edge. The adjacency matrix is a nonnegative matrix G  X  R n  X  n + . g ij =0 , it show that there is no connection from the i th node to the j th node. Generally, G is sparse because the user only share links with a few of nodes and the network is usually far from being a fully connected network. In order to study the social network characteristics, it is important to discover its community structure and find the node characteristics in community firstly.

Fei Wang and his colleagues proposed the methods of community discovery using NMF method considering the undirected network, directed network and compound network by Frobenius norm in [26].The expression can be described as a Tri-Factorization: G  X  XSX T munity membership that the element describe the degree which belong to a particular community. For shows the relationships between communities and the s ii of S shows the connectivity within each com-munity. It is a nonconvex optimization problem, a framework of alternating nonnegative least squares was introduced as the basic concept, which the iterations can be performed with an alternating updating step. In [26], some iterative algorithm are proposed to solve the Tri-Factorization problems, the conver-gence of the algorithm is proved too. Nam P. Nguyen [20] believes the method for the directed network in paper [26] is not effective and do not appear to perform well on weighted directed networks, they used generalized KL-divergence as its loss function, and proposed a algorithm dealing with all directed and undirected networks with or without weights, their algorithm is calculated by Multiplicative update rules. But, both of them didn X  X  take the sparseness of the matrix into consideration. According to pa-per [25], Yu Zhang believes that being non-negative is not enough to describe the community structure exactly. They use 1-norm to describe the sparseness of the matrix and solve Tri-Factorization problem with the coordinate descent method. They didn X  X  consider tags, labels and other relationships which ex-ist in real communities at all. Jiliang Tang [21] take A  X  WH T structure of community in social network. What X  X  more, they X  X e taken tags and other relationships into consideration to build an integrating community discovery model. To get the solution, they used active sets and the alternating iterative algorithm. But that method would be inefficient when used in matrix with weights.

Our contributions in this paper differ from existing work on several fronts, first, we model the nodes relationships in social network as weighted directed matrix, and build a reasonable optimization objec-tive function in which the asymmetric problem change symmetric problem with a constraint condition, iterative algorithm are proposed to discover community. Second, although there are many methods to analyze node characteristics, such as nodes importance using methods with degree centrality, between-ness centrality, closeness centrality, it is more necessary to evaluate node characteristics in community than in whole network, unlike works already exist, we introduce a method according to the NMF results to evaluate node characteristics. Finally, some experiments on datasets show the effectiveness of the algorithm. 3. Community discovery for weighted directed network 3.1. Motivation and problem definitions The adjacency matrix G summarizes all the network information and it consists of k Communities in G, let k&lt;&lt;n ( n  X  1)/2 . The NMF factorization G  X  XSX T gives us X as the community indicator and S as the community internal-strength indicator. As mentioned before, G should be a weighted asym-metric matrix to model network accurately, this make G  X  XSX T factorization complex because both Gand S are asymmetric. In fact, both g ij and g ji are nonzero show that the i th node has relatively close There are no friendships between them when both g ij and g ji are zero, this motivates us make some transformation and reasonable method for NMF to discover community.

The matrix X n  X  k  X  R + n  X  k denotes the community membership of the n vertices in G . For each element x ij in X , it is the likelihood that the i th node belong to the j th community. The value of x ij that the node belongs to the community, therefore we define this constraint to be illustrated as a degree for contribute to the community.
 Definition 1. Contribution to Community Degree (CCD) is a degree value that a node contribute to forming a community.
 shows that the higher CCD of x ij is, the more active the i th node in the j th community is and the higher the i th node belongs to the j th community. The bounded constraint on X as following:
The matrix S k  X  k  X  R + k  X  k represents the relations between communities. The element s ij in S k  X  k denotes the relationship between the i th community and the j th community. Obviously the diagonal elements s ii of S shows the internal-relationship within the community itself, and it is the strongest relationship than others formed by the i th community with any other communities. For example, the communities  X  X conomics X  and  X  X olitics X  are strongly related and hence it is a large value for the corre-sponding entity in S ; on the contrary, the communities  X  X ovies X  and  X  X olitics X  are only weakly related S should be a diagonally dominant matrix. We can describe this by constraint conditions as: E denote the unit matrix. The Hadamard or elementwise product is denoted by  X  . We define matrix 3.2. Modeling for community discovery
As we mentioned before, to discover community, we approximate G by a nonnegative matrix tri-factorization as: its transpose form as: It can be concluded that when we use the matrix A as the objective matrix, it will not change the structure in X and still can be got the same community structure from A as same as from G, furthermore, it becames more accurate about X because contains more information about links between nodes. When there are links with each other, it usually can obtain high sum of the weighted values in matrix A .
For S is the community internal-strength indicator, we usually not take much attention on relationship from one community to another, so, let: W = S + S T ,and W is symmetric. we can define the objective function as follow: the node try its best to belong to a community.  X  balances the trade-off between the sparse of X and the approximation accuracy. 0 is the matrix of size n  X  k , whose elements are all 0, and the elements of matrix I are 1. 3.3. The upating rule
In this section, we discuss how to solve the optimization problem. In general, some types of optimiza-tion methods have been used for solving NMF-based methods, such as auxiliary function methods [6], projected gradient methods [18], Active Set Method [17], and coordinate descent methods [19,25]. We will develop coordinate descent methods.
 We define a matrix N k  X  k whose elements are 1, so the function can be wrote as: According to methods in [11], we can obtain updating rule as: For the constraint conditions, hence, we get the Community Discovery Algorithm as follow. Remark: K, the number of communities, is predetermined or given as part of the input, C j ( 0 &lt;j&lt; K ) is the set of the jth community which is a two-dimensional array containing two columns: the first column is the node index and the second one is the node value. diag W j denote the diagonal element in matrix W. The convergence analysis for our proposed Algorithm 1 is shown via an auxiliary function defined as follow in [6,11,26]. 4. Evaluating node characteristics in community
In social networks, nodes play different roles in community because of rich user interaction, a few of characteristics in the community. In fact, the importance of a node depends on not only its degree but also its neighbors or frie ndships. Furthermore, due to millions of nodes in net work, it is more necessary to study node characteristics in community. By applying Algorithm 1, we can discover some properties of the nodes in the net.
 Definition 2: Community Distribu ting Ratio (CDR): Given a node devote to many communities, it is the Ratio of maximum CCD to the sum of CCD for all communities.
 In the community me mbership matrix X n  X  k , for the ith node, its CDR i define as: In fact, nodes usually have links with many communities, they contribute to forming those communities, The Definition 2 describes the cha racteristic that the node is dynami c and evolve with changing com-a given community, while, when CDR = 0, it is isolated node, If CDR = 1 K , it shows the node equally contributs to all communities, which means the node activities are widely distributed in the network. Definition 3: Importance Ranking (IR): Given a set of nodes which belonged to the community C j ,all nodes are ranked in descending order according to the CCD to community C j .
 In community, not all nodes are as same important, only few play main roles to form a community. Unlike traditional social network identify nodes with high centrality commonly used methods such as degree centrality, between ness centrality, closeness centrality, and so on. By importance ranking, we can find nodes importance in the community. In the result of IR, the first node can be defined as the center node in community which has the greatest CCD, while nodes which have the lower CCD are the border nodes, and the lowest is defined as the furthest neighbor node in community. The center node plays an important role in forming a community, and the border nodes usually have a small influence. When there is only one community in network, as K =1 , the center node in community is the network center, and the furthest neighbor node is the furthest node in network. So, we can evaluate nodes importance according to IR in network. The Algorithm is as follow.

Remark: X nC j describe the nodes sets which belong to the C j th community. 5. Experiments and discussion In this section, we validate our method on different synthesized networks including Zachary club Datasets 1 and an example network in paper [26], both of them contain the clear communities X  structure, the Zachary club Datasets is used to confirm our method is useful for community discovery and the example network in paper [26] is used to test reliability of our method with different kinds of initial matrix. Then we will present our findings on real-world networks including directed networks and undi-rected networks to certify our performance. Zachary club Datasets is a well known datasets in complex network study, which contain 34 nodes and 78 edges, divided into two communities, the first node and the thirty-fourth node are their centre. It is usually used to verifying the method correctness, we can generate asymmetric matrix by software gephi. 2 The example in paper [26] is a directed network which contains 30 nodes and four communities. 5.1. Zachary club datasets 5.1.1. Community discovery
Firstly, we use the datasets generate relational matrix which contain 156 nonzero values; it is a sym-metric matrix with weight is 1 to denote unweighted undirected network. Set K =2 , the result is show in Fig. 2 by Algorithm 1. Then, we use the datasets generate asymmetric matrix G 34  X  34 containing 78 nonzero values to denote directed and no weighted network by gephi. the result is as same as Fig. 2 show, no matter the matrix is symmetric or asymmetric, with our method Algorithm 1, correct result keep up with the results in papers [14 X 16] .

Furthermore, we use a random value which greater than 1 modify the weighted value to obtain a times, the results are different in some nodes, but there are some interesting common conclusions. First of all, when the node only contributes to one community and has no links with other nodes belonging to another community, what community it belongs will not be influenced by weighted value, eg: the node 7, 5, 6, 17, 27 (in Fig. 3(a), (b)). Secondly, when th e node has link with other communities, the weight will determine which community the node belongs to. For example, the 10th node (in Fig. 3(c)) has a edge to the third node, also has a edge from the 34th node, when the weight value w 10  X  3 = 5.9903, w 34  X  10 = 0.7310, we can get the results by Algorithm 1 as: x 10 , 1 = 0.0763, x 10 , 2 = 0.0947, the 10th node will belong to the second community whose centre is the first node, while, when the weighted value w 10  X  3 = 7.6349, and w 34  X  10 = 8.0484, so x 10 , 1 = 0.3368, x 10 , 2 = 0.0702, it is show that the 10th node will belong to the first community whose centre is the 34th node. In fact, although there are many factors such as influences of the neighbor nodes can be effect the result, the weighted value is the most important one, which can be understood that the high the weight is, the close the relation is between two nodes. In our method, all factors will be integrated handled to get correct conclusion. 5.1.2. Nodes importance evaluation There are 34 nodes in Zachary club Datasets. Firstly, the nodes importance can be got by Algorithm 2.
When K =1 , matrix is described for directed matrix, we can obtain the former 10 important nodes: (34, 1, 3, 33, 2, 9, 14, 4, 32, 31). Comparing with results [12], the results are the same except the 31th node. In our method, as shown in Fig. 4, although the degree of the 24th node is bigger than the 31th node, it is found that the 31th node (0.4681) is more important than the 24th node (0.4021), because the 31th node have links with important nodes (34, 33, 9, 2), while the 24th node have many links with unimportant nodes (26.28.30). As the same reason, the 8th node (0.4579) is more important than the 24th node (0.4021), and the 17th node (0.0633) is the most unimportant node. When K =2 ,the network divides into two communities. In the first community, its former 5 important nodes are 1, 2, 3, 4, 8 and the most important node is the first node (0.9997); In the second community, its former 5 important nodes are 34, 33, 24, 30, 32 and the most important node is the 34th node (1.000), it show that the center node play an important role in forming community, and others CCD will be influenced by the center node.

When we use weighted directed network to describe the relationship in the dataset, with the changing of the weight, the nodes importance vary obviously. When K =1 , which node is the most important one, the first node or the 34th node, will be influenced by the weight value, and no matter how weight value vary, both of them are important in community, the reason is they all have many links with others, it can be ensure that they can obtain bigger weight value in statistic. When K =2 , in the first community, the most important node is the first node (0.9992); and other nodes importance will be influenced by the weight value. So it is in the second community.

When matrix is directed matrix, according to Algorithm 2, the CDR of each node can be obtained. It is obviously that the first and the 34th node have the higher CDR value, which illustrate those node usually interact in a relatively stationary community, and the 17th node has the lowest CDR value because it is far away from the center of the community. When matrix is weighted directed G wei , the nodes which are in the boundary of the community usually have a changeable CDR value with the change of the weighted value, it can be explained with the fact that those node have effect to both two community. 5.2. An example from paper [26] 5.2.1. Community discovery
In this section we show the effectiveness and reliability of algorithm 1 (Algorithm 1) on the graph model in [26] (as shown in Fig. 5). It is a typical network with 4 inside communities, where nodes in different ellipses belong to different communities, and different communities may share commons nodes (such as the 18th node and the 19th node). We compare our method to the following state-of-the-art competitors:  X  NMTFSQ [25]: using L2-norm.  X  NMTFKL [25]: using Kullback  X  Leibler Divergence (KLD)  X  WeiF(Direct) [26]: a solution for directed graph.  X  WeiF(Undirect) [26]: a solution for undirected graph.

When we use the NMF methods to factorize G, the matrices X and S are initialized randomly, and number of results discovering each community correctly to find which algorithm is more reliable. The results for unweighted directed network are shown in Fig. 6. the meaning of X-axis is that all algorithms solve same questions repeatedly 20, 40, 60, 80 and 100 times with initializing matrices randomly and obtain corresponding re sults, the Y-axis illustrate the number o f results discovering communities cor-rectly. The result shows that our algorithm has higher accuracy; on the one hand the presented method has excellent performance than other algorithms when we use diagonally dominant matrix S, especially S is a diagonal matrix, its accuracy is 100%. On the other hand, when the values of initial matrix and targets matrix are changed randomly, our method achieved much better performances
The results for weighted directed network are show in Fig. 7: For boundary node 4, 5, 6, 10, 13, 14, 18, 19 et al, they have relationships in every community. The initial component is determined by the original weighed matrix and the value decides which community the node belonging to. In other words, the weight value can reflect the tightness degree of connection. Take the 18th node for example, By considering this, they belongs to the same comm unity. In order to study the algorithm reliability on weighted directed graph, we make all algorithm repeat 20, 40, 60, 80 and 100 times respectively with initializing randomly and count the co rrect times of discovering communities. Like previous simulation, the result shows that the presented algorithm has better performance than others: when we use diagonally dominant matrix and general diagonally dominant matrix S, it has excellent performance of classification accuracy, especially since S is a diagonal matrix, and the accuracy is the highest. 5.2.2. Nodes importance evaluation
Although the result value of X is not same with the different initialization value, the relationships between nodes are described clearly by Algorithm 1, the node characteristics can be found easily by Algorithm 2. When K =4 , we take the first community as an example to show the results (Fig. 8). According to the Algorithm 2, we can find that the 7th node (CCD = 0.6548) is the center node and greater than the 8th node, in fact, even they have the same degree, link between the second node with the 8th node is not important as the link between the 7th node and the 5th node, in fact, the second node is one of the border nodes, which has the lowest CCD value. The nodes including: 1,2,3,7,8, have the most greatest CDR (CDR = 1), CDR 5 is the lowest in the community, it shows that the 5th node has in community than others.

When we change the weight in network, The CDR of those nodes including: 1, 2, 3, 7, 8, will not change, because those node have relationships with others all inside the community, while, which node is the center node is determined by the weight value. 5.3. Real world datasets
In this section, we report the empirical performance of Algori.1by comparing it with the other methods mentioned before. The performance measure is modularity which was proposed by Newman and Girvan in [8,10]. The modularity measure Q is defined as
Where W denotes the weight value in all network, and W ij is the weight value from the i th node to the j th node, w out i denotes the outcoming weight value belonged to the i th node, and w in j denotes the incoming weight value belonged to the j th node. C i is the community that the i th node belong to. Function  X  is defined as follow, when  X  = 1, it show the i th node and the j th node are belong to the same community. We use several benchmark datasets (see Table 1) from real-world applications for the experiments.
We compare Algorithm 1 with NMTFKL, Wei F(Directed) and Wei F (Undirected) based on the modularity score. The results are summarized in Fig. 9. The superiority of our approach becomes more visible on both weighted directed networks and undirected networks except the Dolphin dataset. We note that Algori.1 usually can obtain the higher value in terms of the optimal group number. The free parameters in Algori.1 include the rank parameter k and the regularization parameter  X  .Herewealso conduct some experiments on those datasets to study the sensitivity of these parameters. When we vary the rank parameter k from 3 to 30, the results are shown in as follow. When k does not exceed 10, the performance change is small. The performance deteriorates very fast as k increases. This is not surprising because the total number of communities is generally very small.

For the regularization parameter  X  , we vary it from 0.01 to 100. Figure 10 shows the results in those datasets. No matter how many number the community is, it can be found that the performance is very stable except with some slight degradation as  X  approaches 100. Because the performance is not sensitive to  X  , setting its value is quite easy. 6. Conclusion
In this paper, we propose how to apply nonnegative matrix factorization based method to solve the community discovery problem on weighted directed networks. By using diagonally dominant matrix as constraint matrix, our method models the community membership of each node and the interaction among communities, making it outperform other NMF-based methods in our empirical comparative study; furthermore, according to the result of community discovery, we provide a new method for eval-uating node importance and characteristics. Finally the experiments on real world network data sets are presented to show the effectiveness of our method. Despite the good aspects, there are still some limita-tions of the proposed algorithms that are worthy of working on as future works. Currently, NMF-based methods require the maximum number of communities to be set in advance, so it is very useful to de-termine the actual number of communities automatically, another interesting direction is to extend our method to dynamic community detection by modeling dynamic network evolution over time.
 Acknowledgments This research was supported by the National Technology Research and Development Program of China (863 Program, grant number: 2012AA01A510) and the National Natural Science Foundation of China (Nos. 61035004, 61273213, 61072043, and 61305055). We also thank reviews for their useful advices to our papers.
 References
