 This paper proposes a novel Collaborative Filtering scheme; it focuses on the dynamics and precedence of user preference to recommend items that match the latest preference of the target user. In predicting which items this user will pur-chase in the near future, the proposed algorithm identifies purchase history logs of users who have similar preferences and a high degree of purchase precedence (i.e., purchasing the same items earlier) relative to the target user. We call this metric the Personal Innovator Degree (PID). Experi-ments using real online sales data show that the proposed method outperforms existing methods.
 H.3.3 [ Information filtering ]: Information filtering Algorithms, experimentation Personalization, Serendipity, Recommendation, Purchase In-novator, Personal innovator degree, Collaborative filtering
Collaborative filtering(CF) aims to help individuals ef-fectively identify preferred items from a potentially over-whelming set of choices. In conventional CF, each user log is represented as a vector consisting of items that have been purchased by this user. CF systems compute the similarity between these logs and select user logs with high similar-ity to the log of the target user. Many measures have been proposed to compute the similarity. Since these measures weight every item equally without considering when these items were purchased, naive CF systems that simply apply these measures cannot reflect the dynamics of user prefer-ence in identifying the logs of like-minded users. Therefore, these systems may recommend items that do not match the latest preferences of the target user.

To recommend items matching the latest preference of the target user, CF algorithms must take two kinds of time factors, namely the change of user preference and that of user-user relationship over time, into account when iden-tifying logs of like-minded users. Unfortunately, publihed algorithms incorporate only one of these changes. Although Ding [2] incorporated the former change by using the time decay factor, the algorithm assigns uniform weights to the logs in the same time period and thus ignores the latter change. Pavlov [6] incorporates the former change by uti-lizing the order of item purchase, but ignores the change in the user-user relationship. On the other hand, Song [8] in-corporates the latter change by focusing on the information flow and ignores the former change.

In this paper, we propose a novel CF algorithm that incor-porates the changes of both user preferences and user-user relationships over time. We assume that the target user to whom we wish to recommend items generally follows the ear-lier adopters who have demonstrated similar preferences to the target user but purchased items earlier, and that these purchase precedence relationships may change over time. Our algorithm defines the degree of precedence of an earlier adopter by evaluating how much earlier the earlier adopter purchased the same item that the target user finally pur-chased. We call the earlier adaptors the Personal Innovators (PI) of the target user; their effectiveness is defined as the Personal Innovator Degree (PID).
Here, we intuitively explain why both the precedence of user behavior and the change in user preference over time are useful in predicting items that match the latest prefer-ences of each user. Figure 1 shows a simple example of the purchase logs of four users: u 1 , u 2 , u 3 and u a which is the target of personalized recommendation.

Conventional algorithms compute the similarity scores among users from the number of items commonly purchased. Our approach is to differentiate these users by focusing on the precedence of item purchase time. In Figure 1, each of u 1  X  3 purchased items i 1  X  3 Was also purchased by u a . Here, u purchased none of the three common items earlier than u a and u 1 and u 2 purchased two common items earlier than u . As stated before, we naturally assume that the pur-Figure 1: Typical temporal order of item purchases in purchase history logs: Let u a be the target user, i.e., the target of personalized recommendation.
 The horizontal axis indicates the timeline, and item position indicates its purchase time. chase history logs of u 1 and u 2 , who are earlier adopters of u , reflect the future preferences of u a , while the log of u may correspond to the past preferences of u a .

Among like-minded consumers, some are X  X nnovative X  X on-sumers who know about some items well before their release and purchase these items soon after their release. According to Rogers X  innovator theory, these early consumers who focus on the items X  novelty value, are called X  X nnovative X  X 7]. Since the initial buyers are more familiar with items of interest and discover new items before other like-minded users, we assume that their logs are more useful in making recommen-dations than others. Actually, many such early consumers are observed in CD/DVD purchase behavior log data. Early adopters are able to discover even poorly-marketed movies (e.g. The Blair Witch Project, which become popular long after its release) ahead of others. These movies, once  X  X is-covered, X  become rapidly known to and accepted by like-minded followers.
We define personal innovator degree (PID) by following the idea discussed in the previous subsection. We identify innovators for each target user by focusing on their items purchased and purchase times and call them  X  X ersonal In-novators X . We define PID ( u b , u a ), the degree of u b so as to be able to weight any user u b appropriately given target user u a and identify logs that match the latest pref-and item factor v ( i ), and is defined as follows: Here, C ab is the set of common items that both u a and u have purchased, r ( i ; b, a ) denotes the degree of u b as a per-sonal innovator to u a for item i , w ( i ; a ) denotes how recently u a purchased item i and v ( i ) denotes how important item i is as a discriminator of like-minded users.

Let f ( t ) be a probability density function of purchase time of item i . By modeling f ( t ) as a continuous function of t , we can apply statistical methods such as the statistical test. By using f ( t ), r ( i ; b, a ) is formulated as follows: where t a,i and t b,i denote the times at which u a and u chased i , respectively. In this work, we use the exponential density function, which is commonly used for modeling pur-chase time intervals, and reformulate r ( i ; a, b ) as follows: where T i denotes the release time of i and  X  t i denotes the average time i was purchased after its release. Higher values of r ( i ; a, b ) indicate that u b purchased i more in advance than u .

Since user preference can change over time, it is reasonable to weaken the influence of old history for more precisely predicting future preference. We assume that this weakening also follows an exponential distribution as described in [7], and define w ( i, a ) as follows: where e a,i denotes the time passed since u a purchased i , and  X  e a denotes the average of e a,i over all items purchased by u a . This allows us to put larger weights on more recent purchases and smaller weights on older ones.

Since early adopters purchase items ahead of others and their logs are older than those of others, the method of Ding [2] assigns a decreasing weight to logs of these ear-lier users and thus prevents CF from using these logs. We, on the other hand, assign a unique exponential function to each target user in order to more correctly capture the recent preferences of the target user.

For evaluating the importance of items in the history logs to users, we employ the inverse of the number of users in v ( i ), which is similar to the inverse document frequency (IDF) often employed in information retrieval. We set the discrim-ination power of item i as follows: where U i denotes the number of users who purchased i . High weights are assigned to novel items that are not known to many users yet, and the weight thus tends to filter out items that are not useful in terms of matching both freshness and similarity in user preference.
We identify the informative logs for target user u a by us-ing PID and then recommend items to u a according to the weights based on PID. By using PID defined in Eq. (1), P ( i | u a ), the probability that u a will purchase item i , is de-fined as follows: where,  X  ( i | u j ) represents the evidence that u i has purchased item i , namely,  X  ( i | u j ) = 1 when i is in the purchase history logs of u j , otherwise  X  ( i | u j ) = 0 . Clearly, P ( i | u high when there are many personal innovators with high PID who purchased i . When P ( i | u a ) is computed for all items i , we can simply recommend the top-N items with the N largest P ( i | u a ) to u a . The computational cost of cal-culating PID is linear O ( I ) against the number of items, I , and thus is no larger than that of the conventional methods. Additionally, this calculation is performed only when PID &gt; 0. We can easily introduce PID without extra cost into any personalized recommendation service.
We conducted simulations on the following four data sets, two of which consist of purchase histories obtained from real on-line music and video download services in Japan, the rat-ing logs in Netflix, and the search query logs.

In the purchase log sets, the first one is a set of music purchase records from April 1st, 2005 to July 31st, 2006. The second set is a set of movie video purchase records from September 1st, 2005 to February 28th, 2006.

Netflix contains a set of rating records from Nov 11th, 1999 to Dec 31st, 2005. We first selected only those users who rated at least 20 movies and movies that were rated by at least 100 users. Unlike the first two purchase log data sets above, Netflix consists of user rating logs of movies with multi-valued ratings. As proposed by Herlocker [3], we con-verted the highest rating values 4 or 5 to 1 (purchase) and the other lower values to 0 (no purchase). We denote this data set as Netflix(h).

By focusing on the bias of ratings, we prepared another data set. Namely, we converted the ratings that were higher than the average rating of the user to 1 (purchase) and to 0 (no purchase) if not. We denote this data set as Netflix(p).
The data set Query was generated from a search engine server log collected from April 1st, 2006 to May 31st, 2006.
Our approach aims to predict which music, video or movie (query) a user will purchase (submit) given the past pur-chase history of the user. We conducted simulations to eval-uate the predictive performance of recommendation via K cross-validation where the original data is partitioned into K subsamples at random. Each subsample is appropriately divided into learning and test periods. We call the data in the test period the test data and that in the learning period the learning data.

In the simulations, we treated each user in the test data as a target user to whom we applied each of the recom-mendation methods by using user logs collected from the learning data. We then presented the top N ranked items to the target user and confirmed that these recommended items existed in the test data. To evaluate the quality of the proposed method, we used top N precision, a measure com-monly used for evaluating the performance of CF systems.
We applied a total of nine proposed and conventional rec-ommendation methods to the data sets and compared the precision of their top-N recommendations ( N values were 1, 5 and 10). Pearson and Cosine are based on user similar-ity, measured by Pearson X  X  correlation coefficient and cosine similarity, respectively. On the other hand, Item is based on content similarity measured by Pearson X  X  correlation coeffi-cient proposed in [1]. bPLSA is based on Probabilistic La-tent Semantic Analysis [4] with Bernoulli distribution. MEA is the maximum entropy approach proposed in [6]. IFD is collaborative filtering for implicit feedback datasets [5]. EABIF represents the early adoption based information flow approach proposed in [8]. PID(-) and PID are the proposed methods but the former uses only r ( i ; b, a ) and omits w ( i ; a ) and v ( i ) in Eq (1). The results are shown in Table 1. We can see that PID offers the best accuracy for all data sets ex-amined. The fact that PID attains the best accuracy bears out our hypothesis that the dynamics of preference is use-ful for differentiating user logs in CF. These results can be explained by the characteristics of the data sets; they con-sist of  X  X uxury items X . When an individual user desires and purchases these items, they are generally motivated by their preferences rather than their needs.

In particular, items that each individual user has recently purchased are likely to match his latest preference. There-fore, the item purchase time is an important factor in track-ing the changes in preference. PID uses time decay factors to assign larger weights to more recently purchased items and differentiate like-minded users by using the dynamics of preference. Consequently, the proposed method ranks items that match the latest preferences which improves its preci-sion.

In addition to the top-N precision above, we also evalu-ated the performance attributes of  X  X tem coverage X  (the per-centage of the number of unique items appearing in the top-N recommendation list against the number of total unique items),  X  X ser coverage X  (the percentage of the number of users to whom each method can recommend any item against the number of all users who purchased any item in the test period), and the Gini coefficient (a measure of the statistical dispersion of the distribution of users over items).
The results are shown in Table 2. We can see that PID exhibits the highest item coverage and the lowest Gini co-efficient, close to 0. This indicates that PID can rank and recommend various different items with much less bias than the other methods. In fact, those conventional algorithms, which do not consider the dynamics of user preference or the user-user relationship, achieve lower item coverage and higher Gini coefficients, close to 1. They use logs of like-minded users who are also late adopters as well as earlier adopters and thus rank generally popular and trivial items. With regard to user coverage, those algorithms that employ the dynamics of the user-user relationship obtain slightly lower values than others. Users who are not covered by the former algorithms are innovators who do not need item rec-ommendation anyway. Although the latter algorithms can recommend some items to these innovators, most of these items have already been purchased by them which yields low precision close to 0.
We discuss the potential of the proposed algorithm from the view of novelty and serendipity, which is are novel and important considerations for analyzing recommender sys-tems that must address the  X  X on obviousness X  of recommen-dations [3].

The novel items are generally known to fewer users than older items, and thus are ranked lower in conventional CF. Our method assigns higher weight to users who tend to purchase novel items earlier than others. Accordingly, the proposed method can rank these novel items higher in the recommendation list. The fact that the proposed method improves the item coverage and pushes the Gini coefficient close to 0 indicates that it can offer different recommenda-tions to each of several like-minded users, which is a nec-essary condition for serendipitous recommendations. This implies that the proposed method helps the user to find not only items that match their latest preferences, but also novel and surprisingly interesting items he might not have other-wise discovered. Therefore, although we cannot evaluate serendipity directly, we assume that the proposed algorithm improves not only precision but also serendipity.
The contribution of this paper to the recommendation re-search field is to show that temporal precedence in user be-havior is useful for recommending items that match the lat-est user preferences. This information can improve user/item coverage and the Gini coefficient, and improve the predictive performance simultaneously. [1] J. K. B. Sarwa, G. Karypis and J. Riedl. Item-based [2] Y. Ding and X. Li. Time weight collaborative filtering. [3] J. L. Herlocker, j. Konstan, L. Terveen, and J. Riedl. [4] T. Hofmann. Collaborative filtering via gaussian [5] Y. Hu, Y. Koren, and C. Volinsky. Collaborative [6] D. Pavlov and D. Pennock. A maximum entropy [7] E. M. Rogers. Diffusion of Innovations . The Free Press, [8] X. Song, C. Lin, B. Tseng, and M. Sun. Personalized
