 In this paper we investigate generic methods for placing pho-tos uploaded to Flickr on the World map. As primary input for our methods we use the textual annotations provided by the users to predict the single most probable location where the image was taken. Central to our approach is a language model based entirely on the annotations provided by users. We define extensions to improve over the language model using tag-based smoothing and cell-based smoothing, and leveraging spatial ambiguity. Further we demonstrate how to incorporate GeoNames 1 , a large external database of locations. For varying levels of granularity, we are able to place images on a map with at least twice the precision of the state-of-the-art reported in the literature.
 H.3.3 [ Information Search and Retrieval ] Algorithms, Measurement, Performance, Experimentation image localisation, language models, Flickr
Due to the massive production of affordable GPS-enabled cameras and mobile phones [13, 16], location metadata such as latitude and longitude are automatically associated with the content generated by users. Users have the opportunity to spatially organise and browse their personal media, and photo sharing services are leading the growing enthusiasm for personal location-awareness [22]. Geo-referenced photos
Research performed while the author was an intern at Ya-hoo! Research.
Also affiliated with TU Delft, ICT Group http://www.geonames.org visited May 2009 can be organised in a browsable taxonomy of major locations or pin-pointed on a map to identify very small regions. Some of the most popular examples are Flickr Places 2 and Google Panoramio. 3
While in theory every photo can be anchored to the loca-tion it was taken, in practice many photos are location ag-nostic. Furthermore, the majority of Flickr users do not own location-aware cameras. Thus a large proportion of pho-tos uploaded to Flickr contain no location information even when the photo merits localizing. When uploading photos on Flickr users can still geo-tag their photos by dragging the photos to a particular point on the world map. This process is time-consuming and results in less accurate geo-tagging of photos compared to automatically geo-tagged photos from GPS-enabled cameras. When manually geo-tagging photos, Flickr initially suggests the location of the last uploaded photo or simply displays the world map.

The objective of this paper is to provide a more accurate starting point for geo-tagging photos, uploaded on Flickr, us-ing the textual annotations provided by the user. According to recent literature [2, 21] users spend considerable effort to organise their X  X emory X  X eographically by describing photos with tags related to locations where they were taken. The location specific tags (such as Torre Agbar which is only located in Barcelona), and location related tags (such as elephants which are related to locations such as zoos, Africa and Asia) provide essential cues as to where a picture was taken. For photos that are location agnostic (such as dog ), location information may or may not be provided, but it is normally not relevant to the context of the photo.
The literature related to geo-tagging of photos and its use is extensive. In particular the reverse problem of discov-ering important landmarks and events, given a geographic co-ordinate has been studied extensively [1, 17, 13]. However the problem of placing images on a map using the textual annotations provided by the user has received less attention. While we focus on Flickr as our primary application, our ap-proach can be applied to a wide range of service providers dealing with geo-referenced resources.

In this paper we investigate generic methods for placing photos uploaded in Flickr on the world map. We construct an m  X  n grid based on the longitude/latitude co-ordinates of the globe, where each grid cell represents a location. Us-ing a set of images whose locations are known, we place each image in its corresponding grid cell. As a baseline we employ the collective knowledge of Flickr users by es-http://www.flickr.com/places/ visited May 2009 http://www.panoramio.com visited May 2009 timating a language model from the terms people use to de-scribe images taken at a particular location. We extend this model in several ways, using neighbouring cells under the assumption that  X  X ood X  locations come from  X  X ood X  neigh-bourhoods, and leveraging spatial ambiguity. Finally, we investigate how to incorporate external resources into the model, by boosting the importance of known location tags identified by their presence in GeoNames. We train, develop and evaluate our system using a snapshot of nearly 400,000 geo-tagged photos from Flickr with textual annotations. We predict the single most likely location of a photo in terms of accuracy at different levels of spatial granularity.
The remainder of this paper is organised as follows. The related research on spatial data mining of user generated content and web pages is reviewed in the next section. In Section 3 we explain our approach for location representa-tion. In Section 4 we introduce our geographic location iden-tification framework based on language models using a bag-of-words approach, and our improvements over the baseline language model. A description of our dataset and evalua-tion measures can be found in Section 5. The results are discussed in Section 6. Finally, Section 7 summarizes our findings and outlines directions for future research.
Crandall et al [6] propose a system to place images on a map with a combination of textual and visual features, us-ing a corpus of 20 million images crawled from Flickr. In spirit their work is similar to ours, but they limit their task to deciding which of ten landmarks in a given city is the subject of an image, whereas in our system the location of the image is completely unrestricted. They build a classifier for each of the ten landmarks in the city where the image was taken. For each of the ten classifiers the positive ex-amples are images of a given landmark, and the negative examples are images from the other landmarks. The images are represented by vectors of features of the tags, and visual keywords derived from a vector quantization of the SIFT de-scriptors. Our images are represented only by the tags used to describe them, without incorporating any visual features. Furthermore, while they investigate a location granularity of 100 kilometers and 100 meters, we investigate multiple granularities. We do not assume any prior knowledge about the city or country the image was taken in, and such infor-mation may or may not be present in the tag sets. It is not clear how to scale the system described in Crandall et al. to place an image at any point on the globe, without prior knowledge of the city or country the image was from.
The work of Hayes and Efros [8] is also related to the work described in this paper. Using Flickr images, they propose visual features to predict the geographic location using a nearest-neighbour classification method. They report geo-locating 16% of test images within 200 km. Their data is limited to a sub-set of Flickr images tagged with at least one name of a country, continent, densely populated city or pop-ular tourist site and not tagged with specific non-geographic tags such as  X  X irthday X  or  X  X oncert X . By contrast, our ap-proach is knowledge-free, highly scalable and not limited to photos that are known to contain locations in the textual annotations.

The remaining related literature falls into three areas: spatial data mining of user-generated content, finding the geographical focus of Web pages, and toponym resolution.
Working with blog data, Mei et al. [12] present methods for finding latent semantic topics and their distribution over locations (states or countries) and Wang et al. [25] propose a Location-Aware Topic Model based on Latent Dirichlet Al-location. The works are similar to ours in that they attempt to discern whether a topic is location-related, however blog data has a considerably richer semantic representation than the tags associated with images on Flickr, which may be only two or three terms.

Web queries are more similar to tags than blogs, in the sense that queries are two or three content terms represent-ing much larger concepts. Backstrom et al. [4] propose a method to measure the geo-specificity of a query, using the level of dispersion around the location of the query X  X  highest frequency. With a similar goal in mind, Zhuang et al. [28] calculate the inverse correlation of a query X  X  click distri-bution over locations with their populations. Vadrevu et al. [24] use the probability of co-occurrence of a query term with place names from each region to determine queries that might be related to a given region.

In relation to the location identification of images, Ah-ern et al. [1] propose a method for detection of Flickr tags exhibiting spatial patterns. They find dense areas using geodesic distances between images, and rank all tags in these areas with a tf.idf -based feature selection measure to select the most representative location-related tags. The focus of their research is on selecting tags, rather than localizing im-ages. In later papers they propose a method for detection of tags that correspond to local events [17]. Naaman et al. [14] look at the other side of the coin, recommending tags to the user, given a known location for an image.
The task of finding a geographical focus of a web page was first proposed by Ding et al. [7]. Their approach was two-fold: finding locations of web pages with hyper-links to the analysed page and detection and disambiguation of toponyms in its content. Follow-on work by Amitay et al. [3] and Zong et al. [29] relied on propagating the confidence weights of found toponyms up to the root of the gazetteer taxonomy to find the most probable common ascendants (e.g. finding a country for several cities mentioned).
The research on finding geographical focus of text de-scribed in the previous section is almost entirely based on finding and resolving toponyms. For our task of placing images on a map, an obvious solution would be to simply resolve the toponyms in the Flickr tags. This would allow us to identify locations that are mentioned in the tags, but does not allow us to infer locations from tags that are not found in gazetteers or other resources. We briefly describe the state-of-the-art in toponym resolution. A complete and detailed description of toponym resolution heuristics is made by Leidner [10], but most approaches are derived from the following ideas.

Using location priors . Even without any context it is possible to make an intelligent guess about the most prob-able referent for a toponym by just considering the prior probabilities of places. For example, places with larger pop-ulations, or more frequent mentions in text are more likely candidates.
Search for disambiguators . It is assumed that each place has a list of disambiguators, such as its neighbours in gazetteer hierarchy, which resolve it if found in the proximity of the place name mention. For example, the country of France and the state of Texas are both disambiguators for the city of Paris .

Spatial minimality . If several toponyms are mentioned in the text without disambiguators, then those places are selected as referents that minimise the minimum bounding rectangle containing them or the sum of their pair-wise dis-tances from each other. For example, if Moscow and Helsinki appear together in the text, then Moscow, Russia is selected instead of Moscow, Idaho, US since it is thousands of kilo-meters closer to Helsinki, and Helsinki is unambiguous.
Ranking locations by the probability of generating a tag set implies leveraging the above-mentioned approaches. Both spatial minimality and disambiguator-based methods are im-plicit in the language modeling approach because places are more likely to appear together with their disambiguators in tags and tag sets from the same location. A significant num-ber of users enlist disambiguators for place names in their tag sets by mentioning not only a city, but also a coun-try, for example. However, as demonstrated in Figure 1, in addition to toponyms, other region-specific terms tradi-tionally unnoticed by gazetteers can serve as disambiguators (e.g. hermitage for St. Petersburg, Russia and pelican for St. Petersburg, Florida ). Using additional population and popularity based priors for locations is also not necessary due to the origin of tags representing locations: popular and highly populated locations get more image uploads and hence higher related tag counts.
 Figure 1: Tags for places with ambigu-ous names, generated with Flickr Places: http://www.flickr.com/places
This section explains how geo-tagged photos are associ-ated with a particular grid-cell on a map an how a textual representations of locations is build and organised in a graph structure to model their spatial and semantic relations.
For each photo in our collection we have the following sources of information: a FlickrID , a geographic co-ordinate , and a set of tags . The first task is to map each geographic co-ordinate to a location on the map. For that purpose we place a grid over the world map, which allows us to define a location as a cell on this grid, described by a pair of universal geographical co-ordinates (UGC). We can then investigate the accuracy of our system given various levels of spatial granularity of the grid. To universally represent locations we bind them to a cell using their latitudes and longitudes, considering 0 -2 digits of the decimal part (UGC are rep-resented in Flickr as decimals). For example, each pair of co-ordinates, ignoring the decimal part and considering only degree units, defines a unique location : an approximate rect-angle, or a cell of the earth grid, with longitude side of about 111 kilometers long and variable latitude side. The length of latitude side varies from 0 kilometers at the poles (but 60 starting from inhabited places) to 111 kilometers at the equator [23]. In this paper we consider locations (cells) of roughly 1, 5, 10, 50 and 100 kilometers long over latitude.
Alternatively, one can tie a geographic location to a known semantic location as defined in Gazetteers. Locations are named and either defined by a bounding box (GeoPlanet 4 ), or just by a point on the map (GeoNames). In the first case, bounding boxes are often overlapping and do not cover all regions where people may appear. In the second case, it is unclear how to define boundaries in an unsupervised way. Moreover, developing methods dependent on specific sym-bolic representation of geographical information may lead to difficulties in maintaining such a framework, including the need to rebuild models with every new update of the under-lying topology. At the same time, when the most probable geographic location of an image is determined, mapping this location onto a specific geographical ontology ( reverse geo-coding ) is almost straightforward.

Each photo has associated one or more textual tags which are used to derive a language model that represents a loca-tion. In addition to tags, users may annotate their photos with titles and descriptions. Although titles and descrip-tions are potentially useful in combination with tags, we have chosen to limit ourselves to a tags-only representation, as they are the most compact and concise descriptions of a photo. We assume that the order of tags is not important for placing images on a map and adopt a bag-of-tags approach to sample representative tags for a given location. In order to preserve the unique semantics of each tag set we do not apply any stemming or stop-word filtering. However, we use the standard tag normalisation automatically provided by Flickr: all terms in compound tags are concatenated and all special characters are stripped.
In web retrieval it is common to assume various relations among documents defined by hyper-links. In our case we consider that the grid structure underlying our collection of locations implies a spatial relationship. Based on these ob-servations, we represent all locations in an undirected graph, where the link between a pair of locations (grid cells) exists only if they are situated close enough on the grid. For the sake of simplicity, we use cell-based distance and consider that any cell has 8 cells situated within 1-cell distance from it, 24 cells situated within 2-cell distance etc. Those loca-tions that are found within a predefined distance can be then linked and hence considered to be neighbours . In our case http://developer.yahoo.com/geo/ visited May 2009 representing locations as pseudo-documents implies not only spatial, but also semantic similarity. This fact should not be neglected when localising a tag set: it is easy to expect that linked locations will have high probability to be represented by similar tags and that locations relevant to a classified image will also be close in the graph.
In this section we describe the baseline approach for de-termining the location of a photo, given a set of tags. By estimating a language model through analysis of the terms people use to describe images taken at a particular location, we can predict the most likely position where this photo was taken. In other words, we are interested in obtaining a rank-ing list of locations L , which is ordered by the descending probability for a given tag set T belonging to an image is taken within the bounds of L :
A location in our framework is represented by a multi-nomial probability distribution over the vocabulary of tags. Since we do not have any prior information about locations and tags that would otherwise influence the ranking, we con-sider that P ( L ) is distributed uniformly and P ( T ) does not influence the ranking. The locations are then ranked by the probability to generate the tag set of the image. Assuming that each tag t i in the tag set T is generated independently, the tag set likelihood can be expressed as: where P ( t | L ) ML and P ( t | G ) ML are maximum likelihood es-timates of tag generation probabilities for the location and for the global language models, | L | is the size of the loca-tion L in tags and  X  is the parameter of Dirichlet smooth-ing [27]. Dirichlet smoothing outperformed other kinds of smoothing in our preliminary experiments, seemingly due to its capability to decrease the influence of model lengths on ranking: other smoothing models imply the preference for smaller models, while in our case we have a large number of  X  X iny X  models (i.e. locations containing only a few images) due to sparseness of our data. This becomes even more crit-ical, when the granularity of the earth grid is small.
The motivation to smooth from neigbourhoods of loca-tions comes from the need to overcome data sparseness and from understanding that some tags indicate an area that ex-ceeds the bounds of specific location. For example, even if we use very large 100 km cells, some tags specify a country or continent, which may be larger than 100 km. Moreover, some geographical objects and related tags can be situated in several locations due to the way the grid is placed on the earth surface (for example Rio de Janeiro is situated in 4 neighboring 100 km cells).

The smoothing of document class models with models for broader categories is known to be effective for hierarchical document classification [11]. We employ a similar strategy, with a slightly smaller boundary, as we use a static grid where cell size is pre-determined.

The first way to use spatial neighbourhood is to consider that each tag found within a specific location is generated by either the location X  X  language model, or by language models of neighbouring locations: P ( t | L ) =  X  where NB(L) consists of all locations included in the neigh-bourhood of location L , d is the minimal distance (in grid cells) between locations to be connected in our earth grid graph and  X  is the smoothing coefficient on the probability that the term is generated from the initial location X  X  lan-guage model.
It is reasonable to assume that X  X ood X  X ocations come from  X  X ood X  neighbourhoods. This means that some relevance should be propagated through the links between close loca-tions. Similar techniques have shown themselves to be effec-tive for the web retrieval [20] or expert finding [19]. While relevance propagation on document and entity graphs is tra-ditionally modeled with random walks [20], we do not expect very distant nodes to have high influence on the relevance of the specific location. For these reasons and also because of computational efficiency requirements, we apply a simple weighted in-degree approach: the probability to generate the tag set of a certain location is augmented with the proba-bilities of neighbouring locations: P ( T | L ) =  X P ( T | L ) + (1  X   X  ) X Note that we are still able to include indirectly adjacent locations by setting parameter d &gt; 1:
So far we have regarded our grid graph as undirected, which means that probabilities from all neighboring loca-tions are used in equation 6. It is known from document retrieval [18, 20] that it is more efficient to propagate rele-vance in the hyper-link graph in the direction of more rel-evant documents. We propose to propagate relevance only from those locations that have lower scores than the location to be smoothed. The motivation is that it is safer to support those documents that have already enough probability to be relevant, than to make highly relevant documents support poor ones. Speaking of location retrieval, we may think of the following similar motivation. In the cases when smooth-ing from nearby locations helps, it succeeds not to select the best location within a certain neighborhood, which is al-ready efficiently selected by the initial retrieval step, but to select the right  X  X lobal winner X  among those  X  X ocal winners X  from different parts of the globe. Thus, relevance propaga-tion in the direction of  X  X ocal losers X  is not motivated. In graph-related terms, we make our graph query-dependent: edges between cells become directed (from lower scored to higher scored cells) and hence not all of them are used for calculating weighted in-degree. We test propagation on both undirected and directed graph models in our experiments.
It is known that users often annotate images with tags that can be recognised as location-specific from a first glance: names of places (e.g. cities or countries), points-of-interest (e.g. monuments, stadiums, hotels, or bars) or events known to happen in certain locations (e.g. festivals, sport competi-tions). While the geo-specificity of these tags is captured by our models, it is possible to conclude that some of these tags should be more popular near certain locations even without analysis of their spatial distribution. We introduce prelim-inary knowledge about tags into our models using a simple boosting approach, similar to the one recently used by Cao et al. to boost expansion terms [5]: where P ( Loc | t ) is a probability of the tag t to be location-specific,  X  is a boosting coefficient and Z is a normalisation coefficient.

For the research described in this paper, we use the list of toponyms limited to English names of populated loca-tions, which is taken from the GeoNames database to de-cide whether the tag is location-specific. For all tags that are in this list the P ( Loc | t ) equals 1.0 and otherwise equals 0. More sophisticated approaches to tag classification such as described by Overell et al. [15] also fit our boosting ap-proach. Although the suggested method depends on exter-nal sources, we can assume that most popular gazetteers more or less agree on official names of populated places, but might differ significantly in how they define location cen-troids, bounding boxes and geographic ontologies.
It is obvious that some tags are specific for more than one location: either because their scope exceeds the bounds of a single cell, or due to their ambiguity (for example bath and Bath, UK or because they are instances that are typically spotted at a few specific locations, such as Elephants [26]. It is intuitive to trust highly spatially ambiguous tags less than tags that have a single geographical focus. Since we know the co-ordinates of all tag instances in the training data, we are able to characterise spatial ambiguity of a tag by the standard deviation of its latitudes and longitudes  X  lat ,  X  To include this factor into our model we let the smoothing coefficient  X  in Equation 3 be tag-specific and proportional to the ambiguity of a tag: where  X  is a weight coefficient to control the influence of ambiguity level on smoothing. The individually generated probabilities of ambiguous tags will be less decisive for find-ing the most probable location for a tag set. This is es-pecially important to prevent over-boosting the ambiguous toponyms.
In this section we describe the experimental setup for pre-dicting the locations where an image was taken. We will first discuss the Flickr data set, followed by the evaluation mea-sures adopted.
We randomly sampled a set of 397,000 geo-tagged Flickr images with the associated tags. We applied a filter to re-move the effect of bulk uploads by users. Users can decide to apply the same set of tags set of a large number of pho-tos which can be taken at the same or different locations. With the filter in place, we ensure that at the smallest spa-tial granularity, there is at most one photo per user with the same tag set. This reduces the set of photos to 140,000 which is still larger than data sets used recently for data mining in Flickr [17, 9].

To better understand the data, we geo-referenced all im-ages with the GeoNames gazetteer. Figure 2 (left) indicates that a third of photos originate from the U.S., and an equal number of photos relate to Europe. Overall, the collection contains photos from about 180 different countries which makes the data set more representative compared to data used recently, which focus on the U.S. [9].

We partition the data into three parts: data for building location models, data for parameter tuning, and test data. User-specific tags play a decisive role for finding locations (what would be a re-finding of one of the previous locations of the user). Despite that we expect the results to be bet-ter for the users that have their own data in the collection already, it was more important to find out whether we are able to make good predictions for unseen users and their tag sets. Therefore, to separate the data we just sorted the initial image set by unique user ids and considered roughly 120,000 (  X  85%) images to build models, 10,000 (  X  7%) to tune parameters and 10,000 (  X  7%) to test our methods. Figure 2: Images over countries: all images (left) and mapped correctly within 100 km (right)
The main metric that we use for the evaluation and for tuning parameters on training data is location accuracy ( Acc ), which calculates the percentage of correct predictions over all test examples. However, since we consider location rec-ommendation as a likely task to benefit from our location prediction techniques, we also analyse additional measures of prediction quality: Mean Reciprocal Rank (MRR) measures the ability of the system to find the actual location of a photo among its top recommendations.
 Parent Accuracy (PAcc) determines whether the pre-dicted location belongs to the same parent with the correct location (for instance, 100 km cells are parents for 50 km cells, 50 km cells -for 10 km cells, etc.). Table 1: Performance of the baseline LM method Accuracy within K cells (Acc@K) computes whether the actual location is within a K -cell distance from the pre-dicted location.

For many tag sets (e.g. dog or birthday ) it is difficult, if not impossible, to predict the location of a photo due to the generic nature of the tag set. Furthermore, very generic tag sets are less likely to have an implicit geo-intent. However, when the user does have an implicit geo-intent, they expect the system to be able to properly determine the area where the photo was taken. Given that we are only working with a small sub-set of all geo-tagged photos in Flickr, we expect to suffer from data sparseness when building the language models for the smaller grid cells. The context-free nature of our language model allows us to scale to the full set of geo-tagged photos, which is likely to result in significant improvement in terms of accuracy.
We evaluated the following methods and their combina-tions: baseline language model LM (Section 4), tag-based smoothing TS (Section 4.1), cell-based smoothing CS , cell-based smoothing with score propagation in the direction of higher relevance CSR (Section 4.2), toponym based boost-ing TB (Section 4.3) and ambiguity-aware tag specific smooth-ing AS (Section 4.4).

All parameters for the tested methods (see Equations 3, 4, 6, 7, 8) are optimised on the held-out data using line search strategy, maximising accuracy ( Acc in the table). After optimising  X  for the baseline retrieval model, the other parameters are optimised independently.

Table 1 details the performance of our methods for the dif-ferent evaluation measures at five different levels of spatial granularity (1, 5, 10, 50, and 100 km). Focusing first on the results for our baseline LM method, we observe that the ac-curacy increases, when increasing the grid size, from 0.067 to 0.288, which is consistent with our expectations. Additional performance improvement is observed when analysing the relaxed accuracy measures to include the direct neighbours of the predicted location.

Focusing on the effect of the three neighbourhood smooth-ing extensions TS , CS and CSR , we find some marginal im-provements, with the CSR method outperforming the other two smoothing extensions independent of the chosen grid size, as shown in Table 2 for the grid size of 1, 10, and 100 km. Smoothing was only done with the immediate neigh-bours ( d = 1 in Equations 5, 6), using larger neighbourhoods did not turn out to be beneficial.
 Finally, we have tested different combinations of LM , TB , AS and CSR methods. Table 3 shows the baseline and the best performing methods from Table 2 for clarity. We first observe that all methods improve over baseline LM for all measures. Second, among all improvements applied alone, TB method shows the best performance. The in-formation in the GeoNames knowledge base added a small Table 2: Performance of neighbourhood smoothing boost in performance, but the information gleaned from such a knowledge base is already inherent in the language model itself. However, the combinations of two methods produce even better results and the maximum performance is reached by using all three methods together (except for Acc and MRR measures for 1 km grid division). To sum up, the pro-posed techniques equally improve the performance of Acc and MRR measures for all cell sizes and are especially ef-fective for 1 km cells according to the rest of measures (up to 31% improvement). The results for accuracy-based mea-sures were not tested for statistical significance because they have a binary outcome (correct or incorrect). The final im-provements for MRR are significant at p &lt; 0 . 001 for 1 km and 10 km cells, and at p &lt; 0 . 005 for 100 km cells for the paired t-test.

To study the potential of the proposed improvements, we also measured highly relaxed accuracies with K up to 50. Classification into regions of larger bounds is princi-pally easier and, as shown on Figure 4, the performance of the baseline method increases accordingly. Despite that fact, the benefit from the advanced methods stays the same which probably means that they avoid especially coarse er-rors (from improperly predicted continents to countries).
We conducted an error analysis of our best method to know the boundaries of its performance. There are two main sources of errors: those caused by sparsity and noisiness of the location models and those arising from ambiguity and incompleteness of the tag sets used for mapping. In the first case, the right location is either not represented in the data (from 70% test cases for 1 km to 7% for 100 km cells), or poorly represented with tags specific for this location only (e.g. containing no toponyms).

There are several types of images that are difficult to lo-calize in the second case: (1) images with tags specific to too many locations (e.g. beach coast rocks lovers ; (2) im-ages with toponyms, but with no tags disambiguating them (e.g. michigan cats dogs ); (3) images with a tag falsely indi-cating the reference to a location (e.g. madrid toronto taken in Madrid, but mapped to Toronto, or paris hilton picturing a poster in New York); (4) images containing a tag specific to a region larger than a chosen grid cell size (e.g. alaska snow for 100 km cells or montmartre paris for 1 km cells). We suppose that first three types of errors can be eliminated in the future by taking some contextual or user-specific evi-dence: for instance, tags of recently uploaded images or the location of user IP. Highly ambiguous tagsets may be suc-cessfully mapped by relying on the history of user locations, since such tagsets might be location-specific on the personal level (for example, people celebrating their birthday in their home location).

Cases like the one shown in Figure 3 may be resolved with additional image content analysis. Errors resulting from im-ages containing tags specific to a larger region are more dif-ficult to avoid. This is due to the fact that some parts of large locations are richer in region-specific tags because they are more popular among users. However, the suggestion of the most popular part of it instead of the region as a whole or its centroid is a sensible strategy conceivably correlating with user satisfaction. It is interesting to notice that the dependence of mapping performance on the quality of test tag sets is reflected in distribution of accurately mapped im-ages over countries. As we see on Figure 2 (right), photos taken in very popular tourist destinations, such as France, Italy or Morocco, are represented better among correct map-pings than in the entire data set, seemingly because tourists almost always describe their photos with location specific tags.
 Figure 3: Images with palma tag falsely mapped near Palma de Mallorca, Spain Acc@K
In this paper we presented and evaluated generic meth-ods for automatically placing photos uploaded in Flickr on the world map. We show that we can effectively estimate a language model through analysis of the terms people use to describe images taken at a particular location. This provides us with an extensible baseline, for which we have shown that we can further increase the accuracy of our predictions by in-corporating ambiguity-aware smoothing, cell-based smooth-ing with score propagation in the direction of highly relevant neighbours, and using an external knowledge base.
There are several ways in which we would like to extend this work. First, it is necessary to automatically define an appropriate grid division for a tag set. It is important to minimise interactions between users and the system by showing a map view at the optimal zoom level: probably covering more than one cell, if there are several relevant cells near each other. Second, it seems promising to study the utility of additional evidence coming from a user profile, uploads history, social network or IP address. Finally, im-ages used to build location models can be distinguished by using common (e.g. noise ratio) or Flickr-specific (number of views, interestingness) quality measures.
We would like to thank Djoerd Hiemstra for fruitful dis-cussions and his comments on the first versions of the paper. The research leading to these results has received funding from the European Community X  X  Seventh Framework Pro-gramme FP7/2007-2013 under grant agreements (nr. 231507 and nr. 215453). [1] S. Ahern, M. Naaman, R. Nair, and J. Yang. World [2] M. Ames and M. Naaman. Why we tag: motivations [3] E. Amitay, N. Har X  X l, R. Sivan, and A. Soffer. [4] L. Backstrom, J. Kleinberg, R. Kumar, and J. Novak. [5] G. Cao, J.-Y. Nie, J. Gao, and S. Robertson. Selecting [6] D. Crandall, L. Backstrom, D. Huttenlocher, and [7] J. Ding, L. Gravano, and N. Shivakumar. Computing [8] J. Hays and A. A. Efros. im2gps: estimating [9] L. Kennedy and M. Naaman. Generating diverse and [10] J. Leidner. Toponym Resolution in Text: Annotation, [11] A. McCallum, R. Rosenfeld, T. M. Mitchell, and A. Y. [12] Q. Mei, C. Liu, H. Su, and C. Zhai. A probabilistic [13] M. Naaman, S. Harada, Q. Wang, H. Garcia-Molina, [14] M. Naaman, A. Paepcke, and H. Garcia-Molina. From [15] S. Overell, B. Sigurbjornsson, and R. van Zwol. [16] J. Raper, G. Gartner, H. Karimi, and C. Rizos. [17] T. Rattenbury, N. Good, and M. Naaman. Towards [18] M. Richardson and P. Domingos. The intelligent [19] P. Serdyukov, H. Rode, and D. Hiemstra. Modeling [20] A. Shakery and C. Zhai. A probabilistic relevance [21] B. Sigurbjornsson and R. van Zwol. Flickr tag [22] C. Torniai, S. Battle, and S. Cayzer. Sharing, [23] K. Toyama, R. Logan, and A. Roseway. Geographic [24] S. Vadrevu, Y. Zhang, B. Tseng, G. Sun, and X. Li. [25] C. Wang, J. Wang, X. Xie, and W.-Y. Ma. Mining [26] K. Weinberger, M. Slaney, and R. van Zwol. Resolving [27] C. Zhai and J. Lafferty. Two-stage language models [28] Z. Zhuang, C. Brunk, and C. L. Giles. Modeling and [29] W. Zong, D. Wu, A. Sun, E.-P. Lim, and D. H.-L.
