 e-commerce sites. For example, users give reviews containing comments and rat-ings to products they bought or services they received on Yelp 1 and Dianping 2 . These review comments contain abundant information about the opinions and preferences of users, which could be valuable to recommendation systems. How-ever, in the traditional approaches the review comments are often ignored. More while the content-based approaches utilize the predefined description of users and items.
 rative Filtering (CCF), by utilizing the review comments to predict rating scores. Compared with the traditional collaborative filtering approaches, our approach makes prediction based on the comments given by similar users rather than ratings. In our approach, the relationships between users and interdependen-cies among products are connected via analyzing the review comments. We first apply a topic model to analyze each comment to obtain hidden aspects/topics which represent the opinions or preferences of users. Then, profiles of users and items are represented by the hidden topics. Finally, we build prediction systems The systems are further enhanced by combining the traditional collaborative filtering model. The main issue of comment-based prediction is how to auto-matically generate simulated comments because the comments are not available when testing. We tackle with this issue by utilizing the profiles of users and items.
 reviews in China. The experimental results show that the CCF approach yields better performance than strong baselines. Our main contributions are: First, we combine a probabilistic topic model in review comments with classifiers in rating prediction; Second, in our approach, the profiles of items are generated by analyzing the review comments written by the users who share similar interests; Third, our model can deal with multiple tasks to predict any kinds of service rating that has ratings and review comments. ing past user rating behavior to make predictions on new items for a user, in which text reviews are not utilized. On the other hand, there have been ample ies the linkage between ratings and text reviews for making recommendations. [ 7 , 16 ] studies review rating prediction by combining text analysis techniques. The flowchart of our approach to predict ratings is presented in Figure 1 .The input to our system is a review corpus and a rating matrix. LDA model is used to uncover hidden aspects in review text and generates user/item profiles with a K-dimensional topic. Combing profiles with rating matrix, we can predict rating of an item, to which a user never given a review with regression models. As shown in Figure 1 , Our model consists of two main components: profile generator and rating predictor .
 Profile generator accepts item reviews { d ui } as input and outputs user/item profiles: p u for user u and q i for item i .
 Rating predictor accepts a pair of user u and item i as input and outputs the rating user u would give to item i .
 q , are fed into the rating predictor for training regression models and making predictions.
 to representative reviews of items. 3.1 Topic Analysis Similar to probabilistic latent semantic analysis (pLSA), Latent Dirichlet Allo-cation(LDA) is a generative probabilistic model which regards each document d is composed of a K -dimensional topic distribution  X  [ 2 ]. Meanwhile, words in document d state each of topic k with probability  X  . It X  X  easily seen that LDA reduces dimensions of the vector space with referencing topic dimension between documents and words. In this work, LDA is used for analyzing aspects hidden in user reviews.
 is a collection of M documents.  X  and  X  are two parameters for drawing  X  and given user u , we define her profile p u as follows: profile q i for item i as: reviews of a given user u /item i . The notations are summarized in Table 1 . 3.3 Representation of Samples Given a pair of user u and item i , we want to predict the rating  X  r ui the user u would give to item i . Recommendations are then made based on  X  r ui of items that u have not rated/visited.
 review text define the latent factors that affect the ratings. Prediction models (described in Section 3.4 ) learn the relationship between ratings r ui and topic distributions  X  ui of d ui on training data and predict the ratings on test data. Training Samples. As described above, each sample d ui in the training data is represented as a feature vector which has K dimensions (a topic distribution generated by LDA), The prediction model is trained on the feature vectors of the training data. Test Samples. When testing, the review comment d ui is not available since q . Each dimensional value of  X  d ui is estimated as, Then,  X  d ui is represented as,  X  d ui is then fed into the prediction model to predict  X  r ui .
 3.5 Enhanced Systems So far, we have described the CCF systems based on different machine learn-ing techniques. In this section, we enhance the CCF systems by combining a traditional collaborative filtering approach.
 recently. Among them, Bias From Mean (BFM)[ 8 ] is a very efficient method with low computational cost. In BFM, the rating is predicted by, value of ratings user u gives.
 new prediction function for the LR model is, where W  X  is the weight for the new feature. All the weights are re-trained on the training data. In this section, we evaluate our systems on a real data set. 4.1 Dataset We crawl the review data from Dianping which is the biggest restaurant review site in China to evaluate the performance of our system. The reviews contain user IDs, restaurant IDs, numeric ratings ([1, 5]), and comments. We filter out the reviews that do not have comments. Finally, our dataset consists of 3.62M the data sets are summarized in Table 2 , where  X  X riginal X  refers to the data we we report the log-log plot of the distributions in terms of the number of users or restaurants with various amount of reviews. The two distributions on users and restaurants follow the power law. We randomly split the whole data set into two sets: 80% as training data and 20% test data. We also randomly select 10% of training data as development data to tune the parameters of the systems. 4.2 Evaluation Metric We report the mean absolute error (MAE) of the rating predictor, i.e., are the predicted rating and the user assigned rating scores for user u and item i , respectively.
  X  HFT : As mentioned in the related work, HFT[ 13 ] combines rating dimen- X  CCF-LR and CCF-LR+ : CCF-LR refers to the CCF system based on  X  CCF-GBRT and CCF-GBRT+ : CCF-GBRT refers to the CCF system  X  CCF-RF and CCF-RF+ : CCF-RF refers to the CCF system based on 4.4 Topic Analysis We use GibbsLDA++ 5 to perform topic analysis and set the hyper-parameters  X  =0 . 2, and  X  =0 . 1, and the number of iterations is set to 1000. As for the number of topics, we run the CCF-LR system with different values. The experiment results are shown in Figure 4 . From the figure, we find that the system achieves the best score when the number of topics is 6. In the following sections, we set the number of topics as 6 for LDA in the experiments. 4.5 Tree Depth for Random Forest Here we investigate the effect of the maximum depth of the tree which is a very important parameter for Random Forest. We run the CCF-RF system with different values for the maximum depth. The results are shown in Figure 5 . The figure shows that the CCF-RF system provides the best score when the maximum depth is 4. In the following sections, we set the maximum depth as 6 for the RF model in the experiments. 4.6 Main Results Table 3 shows the main results of predicting ratings on the test data. From the table, we find that BFM performs the best among the baselines. Compared with HFT which also utilizes comments for prediction, our CCF systems achieve better scores. The results also show that the enhanced systems can perform better than the single systems. Among all the systems, CCF-RF+ obtains the highest MAE score. This fact indicates that the information the CCF model learns is different from the information that the traditional CF models learn. In this paper, we present a comment-based collaborative filtering approach that novelly explores the connections between ratings and review comments. In partic-ular, we utilize the hidden topics discovered in review comments to model users and items in a latent space. Our prediction systems build on several learning models to union predicted ratings with latent topic distributions. The systems are evaluated on a real data set from the biggest restaurant review site in China. The experiments demonstrate the effectiveness of our proposed method in rating prediction over state-of-art approaches.

