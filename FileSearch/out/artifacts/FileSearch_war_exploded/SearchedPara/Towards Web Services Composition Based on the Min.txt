 To implement automatic Web services composition, an underlying model, the corresponding reasoning approach, and the measure for service associations are indispensable [1, 2, 3, 4]. Thus, the guidance of services composition can be obtained, and then the composition can be carried out automatically. Different approaches are proposed to address this problem, among which most are given at a syntactic level of services themselves, or annotated with ontologies, or based on keyword retrieval [12, 13, 14, 15, 16]. Actually, many services have nothing to do with the actual provision although they have the matched syntactic or keyword description [4]. This requires that the composition be done at the semantic level, and the reasoning among given services is necessary too. Therefore, towards automatic Web services comp-osition, we should first develop a model to represent the implied semantic relation-ships among given services, and then the composition guidance can be derived. 
Intuitively, by mining distributed historical service invocations, we can discover the knowledge or behavior rules, and learn the implied model of given services. In real paradigms, statistic computation is one of the frequently adopted approaches, and the Bayesian network (BN) [5] is such an effective model that can be used to represent the causal relationships implied among Web services. It is known that BNs are the graphical representation of probabilistic relationships between variables. They are widely used in nondeterministic knowledge representation and reasoning under conditions of uncertainty [5, 6, 7]. Modeling of Web services based on BN not only can describe the causal dependencies with a graph structure, but also can give the quantitative measure of these dependencies. 
In this paper, we focus on discovering causal relationships for elementary services, described as operations in WSDL documents. An approach to the probabilistic graphical modeling of Web services is proposed, and the method for constructing the Web services Bayesian network, denoted WSBN, is presented. 
The Markov blanket (MB) of a variable X consists of X  X  X  parents, X  X  X  children, and parents of X  X  X  children in a BN. Actually, MB de scribes the direct causes, direct effects, and the direct effects of direct causes of a variable [9, 10, 11]. In this paper, we develop a composition guidance of elementary services making use of the idea of MBs and corresponding reasoning mechanisms in the WSBN [5, 9, 11]. 
With preliminary experiments and performance analysis, the effectiveness and feasibility of the proposed method are verified. 
The remainder of the paper is organized as follows: Section 2 introduces related work. Section 3 gives the method to constructing the WSBN. Section 4 presents the algorithm to developing the semantic guidance of services composition. Section 5 shows the experimental results. Section 6 concludes and discusses the future work. Similarity search for Web services is discussed in [4]. Firstly, the approaches to modeling Web services based on predefined rules and expert knowledge is discussed Web services architectures [16, 17]. Secondly, the approaches to modeling Web services based on messages, events, activities and procedures are discussed in [2, 18]. 
However, both of these two classes of approaches are established on the pre-defined domain knowledge, which does not always make sense and is difficult to be updated and refined incrementally.

BNs have been used in many different intelligent applications [5, 6, 7]. Cheng et al. proposed the method for learning the BN from data based on information theory [8]. The concept of Markov blanket and its discovery are discussed in [5, 9, 10, 11]. 
Recently, there has been some research work of BN-based applications on Web services. In the semantic Web, BNs can be constructed from ontology by expanding OWL with probabilities [19]. The BN representing given domain knowledge is used to evaluate cost factors verses benefit factors of services [20]. In addition, Web services metadata are obtained based on the na X ve Bayesian classifier [21]. According to our knowledge, the dynamic characteristic and inherent causal dependencies are almost not considered in these BN-b ased applications on Web services. Following, we first give the definition of elementary services. given domain, in which S i (1  X  i  X  n ) is a separate elementary service represented as an operation in the corresponding WSDL document. Fig. 1 shows the invocations of these three types with respect to elementary services a , b , c and d . Now we give the following definition to universally describe service invocations. elementary services in composition procedures, and let T be a temporal domain of  X  containing direct invocations from the same procedure. 
In this paper, for given elementary services, we will construct the semantic model from their historical invocations based on the BN. Definition 3. A Bayesian network is a directed acyclic graph in which the following properties hold [5]: A set of random variables makes up the nodes of the network. A set of directed links connects pairs of nodes. An arrow from node X to node Y means that X has a direct influence on Y . Each node has a conditional probability table (CPT) that quantifies the effects that the parents have on the node. The parents of node X are all those that have arrows pointing to X . 
A BN represents the joint probability distribution in products by the chain rule: 
Based on the general definition of BNs, we will construct the elementary Web services Bayesian network (WSBN), G =( ES , BE ), to describe their implied causal relationships, in which ES represents the node set including given elementary services, and BE is the corresponding se t of directed edges. 3.1 Fixpoint Deduction of El ementary Services Associations iterative process of computation, and thus so me indirect service associations can be deduced [22]. We adopt the basic idea of the fixpoint to obtain all the service associations completely by the deduction on the instances of P . in Definition 2.
From Definition 3, P  X   X  holds ultimately since only direct associations are described in P . In order to obtain  X  taking as input P , a recursive function is defined. Definition 5. Let the function f from (  X  , P ) to  X  be respectively, similar to those in the relational algebra. 
Initially,  X  is empty, i.e.,  X  =  X  . We note P is given as a constant one, so equation 3-1 can be simplified to 
Clearly, f gives the recursive rule for defining the fixpoint computation [23]. The monotonic. The instances of  X  are composed of two parts: the direct associations in P , and the indirect ones derived using equation 3-1. By using the above method, we can get the unique fixpoint given P , argued by Theorem 1. Theorem 1.  X  that satisfies equation 3-2 is the least fixpoint of f .  X  iteration in this process, the obtained instances of  X  must be included in the results of given in Algorithm 1. For the invocations of the first composition procedure given iteration, and (1, a , d ,  X  1 ,  X  5 ) will be obtained after the second iteration. 3.2 Constructing the Elementary Web Services Bayesian Network Based on the existing theory and approach, the WSBN will be constructed considering the specialty of Web services. It is well known that the most challenging and time-consuming operation is the tests of conditional independencies (CI tests). In this paper, we adopt the conditional mutual information to test whether X is independent of Y given Z , computed by the following equation: computed directly from the sample data preprocessed by the deduction of fixpoint function. Thus, we first give a transformation for the sample data by augmenting the matrix of traces of invoked elementary services, in which m ( i , j )=1 if S j is in the trace of the i -th row of  X  , and m ( i , j )=0 otherwise. Fig. 2 gives an example of M IST . 
According to the general method to constructing a BN [5], the WSBN constructed from the M IST in Fig. 2 is shown in Fig. 3, where the CPTs of c and d are ignored. procedure, we can observe that e is likely to be concerned, since e is the child associated with c directly. As well, d is also likely to be concerned in the composition Definition 6. A Markov blanket (MB) S of an element  X   X  U ( U is the set of elements in the BN) is any subset of elements for which I (  X  , S , U  X  S  X   X  ) and  X   X  S . The union of the following three types of neighbors is sufficient for forming a Markov blanket of node  X  : the direct parents of  X  , the direct successors of  X  , and all direct parents of  X   X  X  direct successors [5]. The elements in the Markov blanket of an elementary service S ( S  X  ES ) are causally associated with S . The invocation guidance is desired to demonstrate the immediate and subsequent services for each step. Additionally, the causal relationships among given services cannot be reversible when it comes to service invocations. Thus, we consider the associated services of S by the MB except its ancestors in the WSBN. For the WSBN in Fig. 4, c is directly associated with e and d , since e is c  X  X  child and d is e  X  X  another parent. neighbor of S . For example, SN ( c )={ e , d }. Moreover, we always want to give the most probable or most associated services in each step instead of all possible ones. Although SN ( S ) gives the associated services of S , how associated between them is not interpreted. We note that there exist following facts for the nodes in SN ( S ): (1) For each Y j in Y S , we consider the probability that Y S may be invoked when S is invoked, P ( Y S =1| S =1), which can be obtained directly from the CPT in the WSBN. P ( f =1| Y j =1). It is the posterior probability that can be computed by the Bayes formula based on the corresponding CPTs in the WSBN: ( 1 | 1) ( 1 | 1) ( 1) ( 1) jj j
Pf Y PY f Pf PY === == = = , in which P ( Y j =1| f =1) and the marginal probabilities P ( f =1) and P ( Y j =1) can be easily computed from the CPTs. Definition 8. A service neighbor sn in SN ( S ) is active if (1) sn  X  Y S and P ( Y S =1| S =1)&gt; ta 1 , (2) sn  X  F j and P ( Y j =1| S =1)&gt; ta 1 and P ( sn =1| Y j =1)&gt; ta 2 , where ta 1 and ta 2 are two given threshold values. Definition 9. Given a WSBN G = ( ES , BE ), let SCG = ( GB , GS , GE ) be the services composition guidance, as a subgraph of G , in which elementary service S in GS  X  GB , there is an elementary service S  X  ( S  X  S X  ) in GS , such that S is an active service neighbor of S  X ; Algorithm 1 gives the recursive method for constructing the WSBN. 
By Algorithm 1, services composition guidance can be generated. SN ( S ) can be WSBN are much less than those of the completely connected graph on ES . In this section, we mainly show the performance of constructing the WSBN. It is simulated on the machine with a 1.4GHZ P4 processor, 512M of main memory, running Windows 2000 server. The codes were written in JAVA, and JDBC-ODBC is used to communicate with DB2 (UDB 7.0). The elementary Web services and their invocations were generated by our program based on the real City -Travel services given by e-commerce Inc. [23], and revised considering the instances in [16]. 
Given 6 elementary services, the performance of generating M IST and constructing the WSBN are shown in Fig. 5 and Fig. 6 respectively. Clearly, the time of generating M IST is sensitively decreased with the increa se of services composition procedures. 
Meanwhile, by 50 services composition procedures and with the increase of the elementary services, the performance of preprocessing when generating M IST , and the construction of WSBN are shown in Fig. 7 and Fig. 8 respectively. We note that by a certain number of composition procedures, the performance of generating M IST only slightly decreases with the increase of elementary services, while the performance of constructing the WSBN on the generated M IST is largely decreased. 
Generally, the performance of our proposed method depends on the number of given elementary services and the size of historical services composition procedures. The experimental results show that our proposed approach is effective and feasible. In this paper, we propose an approach to the probabilistic graphical modeling of Web services based on the Bayesian network, and propose the services composition guidance based on the Markov Blankets in the WSBN. The proposed approach can be used to Web services clustering, intelligent services management, etc. As well, the behavior modeling of Web services to describe the inherent hierarchical, temporal and logical dependencies can be done based on the WSBN. These research issues are exactly our future work.
