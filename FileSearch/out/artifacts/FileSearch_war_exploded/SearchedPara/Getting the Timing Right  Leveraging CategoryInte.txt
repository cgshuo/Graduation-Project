 In the marketing domain, models of grocery buying behavior consider purchase incidence as a key dimension. However, in recommender systems, timing is often subsumed under con-textual information and has received little attention yet. For this reason, we analyze the relation between the timing of a recommendation and its acceptance across different product categories. Our study is based on a real-world deployment of an in-store recommendation system in the brick-and-mortar grocery industry. We base our analysis on transaction data of more than 100,000 unique users and more than four mil-lion product recommendations. Our findings suggest that the success of a recommendation significantly depends on the inter-purchase time within the respective category. Dif-ferent sensitivities across product categories further stress the importance of timing and its interplay with category characteristics within the context of recommender systems. The insights gained in this study enable retailers to improve scheduling recommendations and target promotions more ef-ficiently.
  X  Information systems  X  Computational advertising; Data mining; Data analytics;  X  Applied computing  X  Online shopping; inter-purchase times; category; retail; fast moving consumer goods
Customer purchase decisions, both online and in-store, are to a great extent influenced by recommendations. They might be proactively inquired by customers seeking advice or provided by retailers leveraging their customers X  past brows-ing or purchasing behaviors. In the latter scenario, a cus-tomer X  X  interest in buying in a particular category at a par-ticular time is not evident and needs to be inferred indi-rectly, a task often performed by automated recommender systems [2]. Consequently, recommender systems need to solve two questions in order to provide meaningful recom-mendations: First, whether or not to recommend a product and second, when to recommend it X  X hus, getting the timing right [12]. In contrast to common retailer promotions, per-sonalized recommendations enable the promotion of specific products based on individual product and time preferences.
In this paper, the success of a recommendation X  X s in-dicated by the redemption of personalized in-store price-off promotions X  X s modeled as a function of category inter-purchase times. We find that inter-purchase times signifi-cantly influence the acceptance of recommendations with the effect depending on the respective product category. Partic-ularly, in many fast moving categories, there is an optimal point in time for a product recommendation. Thus, incor-porating category inter-purchase times can improve the ac-curacy of recommendations by up to 6 % 1 . Furthermore, we show that the optimal point in time for a recommenda-tion does not coincide with average category inter-purchase times. Thus, recommendations can influence individual inter-purchase times. Our findings contribute to the efficiency of personalized promotions and their successful implementa-tion within recommendation schedules.
Traditionally, research on recommender systems has fo-cused on developing distinct approaches for recommending products or services to users. For this reason, content-based [10], collaborative-filtering [8] and hybrid approaches
As measured by the increase of correctly classified redemp-tions. [4] have been advanced, incorporating information of the current system user, of similar peers or a combination of both. Yet, independently of the underlying approach, rec-ommender systems have traditionally aimed at answering what to recommend to whom [12]. More recently, research has begun to further leverage context as a multidimensional feature. Such context-aware recommender systems incorpo-rate all kinds of contextual information, depending on the dimension of the respective problem [1]. When a recom-mender system is used in a commercial context, it should ide-ally benefit both customers and retailers. While the former improve or facilitate their decision making [8], the latter can improve targeting and exploit cross-and up-selling opportu-nities [12]. Grocery purchase decisions are usually modeled as consisting of three dimensions, purchase incidence, brand choice and purchase quantity [7, 3]. Hence, customer pur-chases simultaneously cover the questions when to buy in a certain product category, which brand to buy and how much to buy. First, purchase volumes are assumed to be driven by household size, inventory levels, consumption rates as well as price promotions [7, 3]. The second dimension, brand choice, coincides with the main purpose of recommender sys-tems and thus has been extensively covered in the respective literature [8]. The decision whether or not to buy a certain brand is driven by the entire product attributes including price. Finally, the last dimension describes the timing of a purchase which depends on consumption rates, inventory levels and in-store or price promotions [7, 3]. From a retailer perspective, recommendations are personalized promotions that allow for a precise targeting of single customers and can thus be used in order to influence any of the three di-mensions of the customer purchase decision. Retailers can try to influence the timing of a purchase by providing cus-tomers with recommendations. The aspired purchase accel-eration increases sales if customers do not only engage in stockpiling but adapt their consumption levels accordingly [9]. This is eventually dependent on the underlying product category and its characteristics. Moreover, well-timed pro-motional recommendations might encourage store switching. Customers would be expected to relocate purchases from competitors X  stores to the focus retailer [11]. Thus, the tim-ing of recommendations should receive a greater amount of attention in research on recommender systems, especially in industries where products are regularly re-bought and cate-gories are characterized by distinct purchasing cycles.
To analyze the influence of category-specific inter-purchase times on the success of recommendations, an empirical study of transaction and recommendation data has been conducted at a brick-and-mortar grocery retailer. The results of the empirical analysis address the following questions: (1) Is there a category-specific optimal point in time for a prod-uct recommendation? (2) Can recommendations be used to influence individual inter-purchase times? (3) Does incor-porating inter-purchase times have a positive effect on the redemption of a recommendation? The studied in-store recommendation system provides cus-tomers with personalized product recommendations in the form of tailored price promotions. Customers can receive these personalized recommendations when they enter the store by scanning their loyalty card at special in-store kiosk terminals. The terminal prints a list of tailored price promo-tions, in the form of individual discounts on selected prod-ucts, for every customer. Price promotions are chosen from a specific set of currently active campaigns, which retailers and manufacturers can define to target specific consumers. The specific underlying algorithm is subject to our partner X  X  secrecy. Campaigns are assigned using a dynamic scoring model estimating redemption probabilities based on a simil-iarty measure between a user X  X  historic shopping baskets, the promoted products and an individual price-off derived from user heterogeneity in price sensitivity. Inter-purchase times are not considered in the scoring algorithm. Campaigns are then assigned to users maximizing total expected revenue constrained to specific campaign goal fulfillment criteria and filters. At the checkout promotions are automatically re-deemed when the customer X  X  loyalty card is scanned. As the loyalty program is completely anonymous, no demographics are available. In the following, we analyze transaction data that was collected in 2015 over a period of two months in more than 100 stores in a big European city. Our sample in-cludes more than 100,000 unique users as well as more than four million product recommendations, out of which we an-alyze more than 500,000. The categorization is provided by a large market research organization. We limit our analysis to the top ten most recommended campaigns in our sam-ple and pick four fast-moving categories which are regularly purchased X  X amely bread, cola, milk and curd. These are used for an examination of our proposed research questions. This allows us to identify and illustrate different patterns in the adoption and timing of recommendations.
To quantify the impact of inter-purchase times on cat-egory level redemptions, we conduct a linear regression of category redemption rates (abbreviated as RR ) on the pre-dictor  X  X ime since the last category purchase X  (subsequently abbreviated as T SLP ). In order to account for a potentially nonlinear relationship, we add a quadratic and cubic term of our T SLP variable to the regression. We hypothesize that for most categories c there is an optimal point in time for a recommendation that will correspond to the average category inter-purchase time. We expect recommendations made much earlier (low T SLP ) to be penalized as customers inventory will not be low enough to induce another category purchase. Furthermore, we also expect lower redemption rates for customers that have not made purchases in the re-spective category for a long time (high T SLP ). These could either have purchased at a competitor X  X  store or become un-interested in the category itself.

Table 1 summarizes the results of the regression described in equation 1 for our four selected categories, while Figure 1 illustrates the corresponding fitted redemption rates. Apart from the category cola, all categories exhibit a characteris-tic inverse u-shape, indicating the existence of an optimal point in time for a category recommendation. For milk and curd, average inter-purchase times without promotion are higher than the optimal points in time for a recommen-dation. Thus, in these categories recommendations might trigger purchase acceleration. In the case of the category Figure 1: Comparing fitted redemption rates to avg. category inter-purchase times without promotions cola, this effect might even be so strong that redemptions are highest right after a category purchase.

T SLP 0.016  X  X  X  X   X  0.017  X  X  X  X  0.025  X  X  X  X  0.013  X  X  X  X 
T SLP 2  X  0.001  X  X  X  0.001  X   X  0.003  X  X  X  X   X  0.001  X  X  X 
T SLP 3 0.00002  X  0.00002 0.0001  X  X  X  X  0.00003  X 
Constant 0.024  X  0.223  X  X  X  X  0.123  X  X  X  X  0.085  X  X  X  X 
R 2 0.625 0.843 0.823 0.543 Adjusted R 2 0.559 0.816 0.792 0.462 F Statistic 9.445  X  X  X  X  30.540  X  X  X  X  26.386  X  X  X  X  6.725  X  X  X  X 
Note:  X  p &lt; 0.1;  X  X  X  p &lt; 0.05;  X  X  X  X  p &lt; 0.01
In order to determine whether recommendations have an influence on individual category inter-purchase times, we split individual purchases, distinguishing category purchases that are affected by promotions from those that are not. In a first scenario, purchases are only affected by promotions when a promotion is redeemed during that particular pur-chase. In a second case, we also account for stockpiling, by including the purchase directly following a purchase on promotion into the promotion sample. In this way, we de-termine average inter-purchase times with and without pro-motional redemptions, considering only those customers for whom both inter-purchase times can be calculated. 2 Using two-sided Kolmogorov-Smirnov tests (p &lt; 0.05), we analyze the average inter-purchase times in both scenarios. In the
It should further be noted that purchase volumes are not accounted for as we only focus on purchase incidence. first case, we find significant differences in average inter-purchase times for all categories. In the second scenario, ac-counting for stockpiling, we find significant differences in av-erage inter-purchase times for all categories except for curd, where customers might engage in stockpiling when redeem-ing a promotion.
In order to test the validity of our findings we randomly split our data in an estimation and validation sample (2:1) and then train two different logistic regressions to predict coupon redemptions. First, the standard model only uses the scoring values ( SCORE ) provided by our research part-ner as a predictor, also accounting for the magnitude of the individual price discount. Second, the extended model ad-ditionally includes a variable that indicates the deviation of the T SLP variable from the optimal recommendation time, derived in our previous regression model. We allow the co-efficient of this feature to vary depending on whether the recommendation was provided too early ( d early ) or too late ( d late ). We analyze whether the incorporation of the opti-mal recommendation time leads to an improvement in the prediction of coupon redemptions. The standard model, im-plemented by our research partner, will serve as a baseline. Table 2: Summary of classification estimation and validation results d d Constant  X  2.116  X  X  X  X   X  1.825  X  X  X  X   X  2.401  X  X  X  X   X  1.953  X  X  X  X  Observations 30,881 30,881 33,032 33,032 LL  X  11,770  X  11,559  X  10,762  X  10,471 AIC 23,545 23,126 21,529 20,949 Recall 0 . 123 0 . 141 0 . 035 0 . 061 Precision 0 . 524 0 . 540 0 . 339 0 . 345 Prevalence 0 . 136 0 . 136 0 . 090 0 . 090 Balanced Accuracy 0 . 553 0 . 561 0 . 514 0 . 524 Note:  X  p &lt; 0.1;  X  X  X  p &lt; 0.05;  X  X  X  X  p &lt; 0.01
We report the quality of our models on the hidden eval-uation set for the two categories with the best model fit in our previous regression analysis: milk and cola. Table 1 summarizes the results of our classification model which will further be discussed with respect to the classification metrics precision and recall. 3 The standard model provides similar results for milk as obtained in previous studies within the retailing industry regarding the classification metrics [6]. The extended model, which incorporates the distance to the optimal recommendation time, improves precision by 3.1 % and recall by 14.6 % compared to the standard model. For the category cola, we can increase recall by 74 %, however, precision can only be marginally increased by 1.8 %. We believe that our extended model can only marginally im-prove the correct classification in the second category due to the monotonous relationship between T SLP and over-all redemption rates as indicated in Figure 1 and Table 1. Furthermore, we get similar precision improvements for the remaining two categories (bread 6.6 % and curd 2.4 %).
Purchase incidence is a key pillar of every customer choice decision [7, 3]. Yet, so far it has only received marginal at-tention in the context of recommender systems. However, as commercial recommendations aim at influencing customer choices [2], purchase incidence should be incorporated when a recommendation is made. For this reason, we have ana-lyzed customer data from an in-store recommendation sys-tem at a brick-and-mortar grocery retailer that provides cus-tomers with tailored price promotions. Our findings support the view that recommender systems should not only focus on the product or service to recommend but also on the timing of the recommendation [12]. Regarding the first re-search question we find that in many fast moving categories, there exists an optimal point in time for a recommendation which maximizes its acceptance among customers. In partic-ular, we show that considering this optimum and category-specific individual inter-purchase times, has a positive effect on the success of recommendations, increasing precision by up to 6 %. Thus, answering the third research question, incorporating this additional information improves recom-mender systems. Moreover, we find that the optimal point in time for a recommendation precedes the average category inter-purchase time for most categories, indicating acceler-ated category purchases. Finally, regarding the second re-search question, we find that recommendations can influence individual inter-purchase times.

Altogether, the findings we present in this paper empha-size the importance of incorporating category-specific inter-purchase times when making product recommendations. Yet, the data we have used for our analyses is limited to only four categories and two months. It would be worthwhile to analyze a larger number of categories and to extend the ob-servation period in order to capture seasonality and model dynamic inter-purchase times. Furthermore, as we do not use scanner data but transaction data of a single retailer, we cannot directly account for category purchases at com-petitors X  stores and for inventory building. However, in further analyses deviations from predicted parametric inter-purchase times could help to indicate consumers X  shopping
Precision: Number of instances in which coupon redemp-tion was correctly predicted divided by all instances in which coupon redemption was predicted.
 Recall: Number of instances in which coupon redemption was correctly predicted divided by all observed redemptions. at other retailers [5]. This individual risk could be modeled using identifiers based on past purchases and category char-acteristics. Additionally, it should be noted that in our par-ticular case, recommendations are combined with individual price discounts. Therefore, an analysis of the profitability a recommendation should further consider customers pur-chase decisions in the absence of a discount. Finally, these opportunities for further research will help to improve the timing of recommendations and design recommender sys-tems that better address the needs of individual customers while leveraging category-specific inter-purchase times.
We want to thank our research partner, who decided to remain anonymous, for providing us with the data sample. [1] G. Adomavicius, R. Sankaranarayanan, , S. Sen, and [2] A. V. Bodapati. Recommendation Systems With [3] R. E. Bucklin, S. Gupta, and S. Siddarth. Determining [4] R. Burke. Hybrid Recommender Systems: Survey and [5] Y. X. Chen and J. H. Steckel. Modeling Credit Card [6] A. Gunawardana and G. Shani. A Survey of Accuracy [7] S. Gupta. Impact of Sales Promotions on When, [8] J. L. Herlocker, J. A. Konstan, L. G. Terveen, and [9] S. A. Neslin, C. Henderson, and J. Quelch. Consumer [10] R. J. Mooney and L. Roy, R. J. M. Roy, and L. [11] R. P. L. V. Kumar. Measuring the effect of retail store [12] J. Wang and Y. Zhang. Opportunity Models for
