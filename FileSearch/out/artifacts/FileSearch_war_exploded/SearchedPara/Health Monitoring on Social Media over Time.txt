 Social media has become a major source for analyzing all as-pects of daily life. Thanks to dedicated latent topic analysis methods such as the Ailment Topic Aspect Model (ATAM), public health can now be observed on Twitter. In this work, we are interested in monitoring people X  X  health over time. Recently, Temporal-LDA (TM X  X DA) was proposed for effi-ciently modeling general-purpose topic transitions over time. In this paper, we propose Temporal Ailment Topic Aspect (TM X  X TAM), a new latent model dedicated to capturing transitions that involve health-related topics. TM X  X TAM learns topic transition parameters by minimizing the predic-tion error on topic distributions between consecutive posts at different time and geographic granularities. Our experi-ments on an 8-month corpus of tweets show that it largely outperforms its predecessors.
 public health; ailments; social media; topic models
Social media has become a major source of information for analyzing many aspects of daily life. In particular, public health monitoring can be conducted on Twitter to measure the well-being of different geographic populations [5]. The ability to model transitions for ailments and detect state-ments such as  X  X eople talk about smoking and cigarettes before talking about respiratory problems X , or  X  X eople talk about headaches and stomach ache in any order X , has a range of applications in syndromic surveillance such as mea-suring behavioral risk factors and triggering public health campaigns.

Popular probabilistic topic modeling methods such as La-tent Dirichlet Allocation [2] and pLSA [4] have a long his-tory of successful application to news articles and academic abstracts. However, the short length of social media posts such as tweets poses serious challenges to the efficacy of such methods [9]. Dedicated methods, such as the Ailment Topic Aspect Model (ATAM), have thus been proposed to discover ailments from tweets [5].

While the primary goal of probabilistic topic modeling is to learn topic models, an equally interesting objective is to examine topic transitions . A temporal extention to LDA (TM X  X DA) was hence developed for discovering the evolu-tion of general-purpose topics in tweets [8]. In this paper, we examine the feasibility of measuring and predicting ailment transitions in Twitter, by combining ATAM and TM-LDA into a new model, coined TM X  X TAM. Our model is differ-ent from dynamic topic models such as [1,7], as it is designed to learn topic transition patterns from temporally-ordered posts, while dynamic topic models focus on changing word distributions of topics over time. TM X  X TAM learns transi-tion parameters by minimizing the prediction error on ail-ment distributions of consecutive periods at different tem-poral and geographic granularities.

The effectiveness of TM X  X TAM requires to carefully model two key granularities, temporal and geographic. A temporal granularity that is too-fine may result in sparse and spuri-ous transitions whereas a too-coarse one could miss valuable ailment transitions. Similarly, a too-fine geographic gran-ularity may produce false positives and a too coarse one may cover a user population that is exposed to different weather conditions and miss meaningful transitions. Our experiments on a corpus of more than 500 K health-related and geo-localized tweets collected over a period of 8 months, show that TM X  X TAM outperforms ATAM, TM X  X DA and LDA in estimating temporal health-related topic transitions of different geographic populations. The health-related topic transitions we unveiled can be broadly classified in 2 kinds: stable-topics are those where a health-related topic is men-tioned continuously. One-way-transitions cover the case where some topics are discussed after others. For example, our study of tweets from Arizona revealed many self-transitions such as headaches and body pain. On the other hand, tweets about smoking, drugs and cigarettes in California, are fol-lowed by respiratory ailments.
Table 1 summarizes the terminology we use throughout this paper. By using suitable geographic granularity g (coun-try, state, county) and temporal granularity t (week, fort-night and months), we build our document sets D t g . While LDA is successful at uncovering generic topics, its limita-tions at discovering infrequent and specific topics such as health has already been shown [5]. The probabilistic Ail-ment Topic Aspect Model (ATAM) was designed specifically Figure 1: LDA vs ATAM: Comparison of topic dis-tributions for an example tweet. to uncover latent health-related topics present in a collection of tweets [5]. ATAM achieves remarkable improvement over LDA in discovering topics that correspond to ailments (in addition to discovering general topics). The topic distribu-tion vector generated by ATAM for a sample tweet is shown in Figure 1. Note the stronger relevance to health X  X elated matters in this vector than in the topic distribution vector generated by LDA for the same tweet. While ATAM is ef-fective at modeling health-related topics, it is not designed to model topic transitions over time.
In [8], TM X  X DA was introduced to extend LDA with modeling topic evolution over time. However, While being quite elegant in modeling general-purpose topics TM X  X DA is not specialized to capture health transitions over time.
Let  X  t g be a ailment distribution vector where the weight of each ailment is representative of the discourse density of ailment in the tweets originating from region g during period t . For a region g , the interval of time spanning a set of con-secutive time periods { t i ,t i +1 ,... } during which discovered ciably forms a homogenous time period w.r.t. ailments. By definition, a homogenous time period is (nearly) ho-mogeneous in terms of ailments. In other words, the ail-ments evolve in a smooth fashion within a homogenous-time period and change abruptly across homogenous time-period boundary. We posit that such homogenous time periods exist after which they encounter change-points in ailment topic discussions. These change-points in ail-Algorithm 1 TM-ATAM: change-point Detection and Training Ailment Distribution Predictor 1: for all g  X  G do 2: Run ATAM on D g 3: for all t  X  X  do : 4: for all z  X  X  do : 5:  X  t g [ z ]  X  0 6: end for 7: for all d  X  D t g do : 8: for all w  X  d do : 9: z  X  topic ( w ) 11: end for 12: end for 13: end for 14: t c = argmax 15: pre = [ t 1 , t c  X  1 ] 16: post = [ t c , t |T| ] 17: for all s  X  X  pre, post } do : 20: end for 21: end for ment topic discussions may be caused by onset of the dis-ease or some other external factors. Nevertheless, they are the interesting points for analyzing purposes. As an exam-ple, in Figure 2, we show the difference between ailment distributions of consecutive months for 3 different regions Kuala Lumpur (a city in Indonesia), Oklahoma (a state in the USA), and Bristol (a city in the UK). The sharp peaks obtained validate the existence of time intervals that are homogeneous w.r.t. ailments.

Our problem: Given a set of documents D t i  X  1 g formed by tweets originating from a region g  X  G during time period t i  X  1 , predict  X  t i g , the ailment distribution of documents in D g , corresponding to posts from g in period t i from  X  the ailment distribution of document D t i  X  1 g corresponding to posts from g during period t i  X  1 .
To solve our problem, we propose TM X  X TAM that builds on top of ATAM and TM X  X DA. We first convert inferences of ATAM over a single document to associate with a given set of documents D t g , an ailment distribution,  X  t g . We then go on to find homogenous time periods . We model ail-ment transitions within each homogenous time period and when a change-point is encountered we update these tran-sitions. This is a fresh departure from existing solutions that operate in a homogenous time period -agnostic fashion [8]. TM X  X TAM, at its heart, solves the following equation. where M  X  is an unknown transition matrix which is obtained by solving the following least squares problem.
 Algorithm 1 contains the steps of our solution. It has two parts: change-point detection and ailment prediction .
We use Z to refer to the set of all health-related and non-health related topics. For each region g  X  X  (Line 1) we first run ATAM over the full time period D g (Line 2). Next for each period t  X  X  (Line 3), we use the output of ATAM over D g to generate a topic distribution  X  t g (Lines 4 X  12). We then examine the Bhattacharyya Distance between consecu-most significant change-point , t c , for region g (Line 14). The time periods preceding and succeding change-point are termed as homogenous time periods .

In the second module of TM X  X TAM algorithm, we predict distribution of ailments in twitter discourse ahead of time for each homogenous time period . Lines 17 X 20 of Algorithm 1 outline the steps undertaken to identify the detection of ail-ments for intra-homogeneous periods.
We conducted experiments to evaluate the performance of TM X  X TAM and to compare with the state of the art.
We employ Twitter X  X  Streaming API to collect tweets be-tween 2014 -Oct-8 and 2015 -May-31 . Collected tweets were subjected to two pre-processing steps as follows.
Identifying health-related tweets: We filter the tweets returned by the Decahose Stream to obtain health-related tweets. We say that a tweet is health-related if it contains a health keyword and passes our classification criteria. We used 20,000 health-related keywords crawled from wrongdi-agnosis.com to first filter the tweets. The process is then automated with the help of an SVM classifier [3]. To this end, 5128 tweets were annotated through crowdsourcing ef-forts. The precision and recall of the classifier are 0 . 85 and 0 . 44 . Table 2 shows that out of the 1.36B tweets we col-lected, 698K were health-related.

Identifying geolocalized tweets: The ability to oper-ate seamlessly at varying geographic resolutions mandates that the exact location of each tweet be known to TM X  X TAM. Twitter affords its users the option to share their geoloca-tion. In our case, over half a million tweets are retained ( 569 K as indicated in Table 2).

We examine various choices for the geographic granulari-ties, temporal granularities and distance measures. TM X  X TAM performs better on smaller regions. We attribute this result to the fact that tweets from smaller regions show less diver-sity in topics. We also found weekly ailment distributions to be very sparse. We also used 2 distance measures to measure distribution difference namely, cosine similarity and Bhat-tacharyya distance. We observed that number of tweets at a given time granularity t may affect the performance of Co-sine Similarity. Finally, we chose to work with geographic granularity of states , temporal granularity of months and distance measure of Bhattacharyya .

Test-bench and measures: We run our experiments on a 32 core Intel Xeon @ 2.6Ghz CPU (with 20MB cache per core) system with 128 Gig RAM running Debian GNU/Linux 7.9 (wheezy) operating system. All subsequently discussed components were implemented in Java 1.8.0_60. We used perplexity to compare between models [6].
Recall that the terms change-point and homogenous-time period refer to the point in time at which discourse density of ailments changes substantially, and the time pe-riod before and after that point, respectively. We divide each homogenous time period into training and test sets. ATAM is then re-run over the training set of each homogenous-time period . We then model a transition matrix M  X  tmatam on the training set of each homogenous time period as described in Section 2.2. We compute the probability of "health topic" z for each tweet p of the first month ( |T| X  1 ) in the test set using the following formulas: Here, values for n ( z,w ) , n ( w ) are taken from ATAM run on the training months. P(w|p) is simply the number of times word w occurs in the tweet p divided by the total number of words in p . We then predict the future probability of each topic in the second month of the test data using the corresponding transition matrix M  X  tmatam . Probability of word p l ( w i ) for any document set is calculated as follows: Having computed P ( w ) , we can compute perplexity against the words of the tweets of second test month. Figure 3: Comparison for top 10 active regions. His-tograms denote ratio of perplexities. TM X  X TAM is always at 1.0.
Figure 3 shows the perplexity ratio of TM X  X TAM with state-of-the art models. If ratio computes to be less than "1" for competitor topic model , TM X  X TAM is perform-ing worse. If ratio is more than "1" for competitor topic model , TM X  X TAM is performing better. In order to assert the fact that health topics transit from one to another, we compute the perplexity of ATAM on words of the first month of the test set and not predicting any topic distribution us-ing any transition matrix . Hence, this denotes the case where health topics stay static . As shown in Figure 3, TM X  X TAM beats ATAM in all social media active regions (an active region is a region where the proportion of tweets if high enough). For training TM X  X DA, we merge the train-ing data (same as TM X  X TAM) of each homogenous time period in each region and train a transition matrix of TM X  X DA by solving least squares problem. For each tweet p of the first month of the test set, we compute the proba-bility of topics using LDA trained on merged training data (Formula 3). We then predict the future probability of each topic in the following month using M  X  tmlda . We can then compute the perplexity of TM X  X DA against words of ac-tual tweets in the test set. Figure 3 shows that TM X  X TAM consistently beats TM X  X DA and LDA in predicting future health topics on the test month. Perplexity is indeed lower for all words of the test month in all active states.
In Figure 4 we show the top-2 sharpest change-points for the top regions. Those points can be explained with weather changes in those regions. Texas can be explained with a drop in temperature while Jervis Bay can be explained by an increase in rainfall. Dublin sees its lowest temperature in November. Singapore and Manila have very similar weather conditions and exhibit the same change point. Entry m ij in the transition matrix M produced by TM X  X TAM, shows the degree that topic z i will contribute to topic z j in the subsequent homogenous time period . We adapt the threshold used in [8] to our settings: Threshold =  X  + 2  X   X  non  X  diagonal . We identify two kinds of interesting Figure 4: Top-2 Monthly homogenous time period for top active regions.
 Table 3: One-Way Transitions for California (threshold: 0 . 815 ) transitions based on the above threshold: selftransitions : popular topics and one way transitions : i th topic is dis-cussed before j th topic. As an example, one-way-transitions of California are summarized in Table 3.
We studied how to uncover ailment distributions over time in social media. We proposed a granularity-based model to conduct region-specific analysis that leads to the identifica-tion of time intervals characterizing homogeneous ailment discourse, per region. We modeled disease evolution within each homogeneous region and attempted to predict ailments. The fine-grained nature of our model results in significant improvements over state of the art methods. [1] D. M. Blei and J. D. Lafferty. Dynamic Topic Models. [2] D. M. Blei, A. Y. Ng, and M. I. Jordan. Latent [3] C. Cortes and V. Vapnik. Support-vector networks. [4] T. Hofmann. Probabilistic Latent Semantic Indexing. [5] M. J. Paul and M. Dredze. You Are What You Tweet: [6] H. M. Wallach, I. Murray, R. Salakhutdinov, and [7] X. Wang and A. McCallum. Topics Over Time: A [8] Y. Wang, E. Agichtein, and M. Benzi. TM-LDA: [9] W. X. Zhao, J. Jiang, J. Weng, J. He, E. Lim, H. Yan,
