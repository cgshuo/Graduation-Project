 Social Network Marketing techniques employ pre-existing social networks to increase brands or products awareness through word-of-mouth promotion. Full understanding of social network marketing and the potential candidates that can thus be marketed to certainly offer lucrative opportu-nities for prospective sellers. Due to the complexity of so-cial networks, few models exist to interpret social network marketing realistically. We propose to model social net-work marketing using Heat Diffusion Processes . This paper presents three diffusion models, along with three algorithm s for selecting the best individuals to receive marketing sam -ples. These approaches have the following advantages to best illustrate the properties of real-world social networ ks: (1) We can plan a marketing strategy sequentially in time since we include a time factor in the simulation of product adoptions; (2) The algorithm of selecting marketing candi-dates best represents and utilizes the clustering property of real-world social networks; and (3) The model we construct can diffuse both positive and negative comments on prod-ucts or brands in order to simulate the complicated com-munications within social networks. Our work represents a novel approach to the analysis of social network marketing, and is the first work to propose how to defend against nega-tive comments within social networks. Complexity analysis shows our model is also scalable to very large social net-works.
 Categories and Subject Descriptors: J.4 [ Computer Applications] : Social and behavioral sciences; H.m [ Infor-mation Systems] : Miscellaneous General Terms: Algorithms, Theory, Measurement Keywords: Social Network, Marketing, Heat Diffusion
Although Social Network Analysis has drawn much at-tention in the past decades, marketing on social networks has just started, and shows great potential to be much more successful than traditional marketing techniques. Accord ing to eMarketer 1 , advertisement spending on worldwide social-networking sites in 2007 is expected to reach $1.12 billion, up from $445 million in 2006, and will achieve about $2.8 billion in 2010.

Unlike the traditional social network, online social net-works have a number of important distinguishing features. Massive quantities of data are available on online social ne t-work sites, blogs, knowledge sharing sites, collaborative fil-tering systems, newsgroups, email systems, etc. Millions o f users participate in these social networks, and act as differ -ent roles. All of these social networks provide valuable inf or-mation for decision-making in marketing campaigns, espe-cially in marketing of new products from start-up businesse s. Several successful examples, like Hotmail, Google, MySpac e, etc. have already shown the powerful abilities of social net -work marketing. Full understanding of social network mar-keting and the potential customers that can thus be reached certainly offer lucrative opportunities for prospective se llers.
Research into how information flows in a social network started from a book called  X  X iffusion of Innovations X  by Rogers [21]. Rogers formalized that adopters of any new innovation could be categorized as innovators (2.5%), earl y adopters (13.5%), early majority (34%), late majority (34% ) and laggards (16%). Some similar work in [7, 25] also focuses on developing theories of innovation adoption.

Many researchers started to analyze the diffusion pro-cess in terms of  X  X ord-of-mouth X  marketing [4, 6, 10, 19], since  X  X ord-of-mouth X  advertising can be much more effec-tive than traditional marketing methods. Although these studies made great contributions to the analysis of innova-tion diffusions, they were descriptive, rather than predict ive  X  they are built at a very coarse level, typically with only a few global parameters, and are not useful for making ac-tual predictions of the future behavior of the network [8]. In view of the subsequent exponential growth of online so-cial network resources, researchers now have more data to investigate and model the dynamics of viral marketing, the innovation adoption problem and the information diffusion process [9, 12, 13, 18, 20, 22, 23, 24].

In [9, 20], authors attempt to compute customers X  net-work value as well as the intrinsic value of customers. They focused on the following problem: given a potential social network of consumers, if we can try to convince a subset of individuals to adopt a new product or innovation, and the goal is to trigger a large cascade of further adoptions, which set of individuals should we target [13]? Although http://www.emarketer.com/ simulations showed their work can help companies achieve much more revenue than direct marketing, several remaining problems still need to be studied, which we will introduce in the next section. Song et al. [23] proposed leveraging users  X  access patterns to model information flow and generate ef-fective personalized recommendations. Their later work [2 2] proposed an information flow model that leverages diffusion rates for identifying where information should flow to and identifying who will most quickly receive the information.
A social network is a very complex network with all kinds of messages flowing within it. Modeling social network mar-keting realistically is an extremely difficult problem. Aimi ng at the limitations of previous work, we propose a social net-work marketing framework which utilizes the heat diffusion theory from Physics to describe the diffusion of innovations . These heat diffusion models provide our work with the fol-lowing contributions: (1) Due to the time-dependent prop-erty of the heat diffusion process, our model can simulate product adoptions step by step, which helps marketing com-panies divide their marketing strategies into several phas es. (2) Marketing candidates selection algorithms based on the diffusion models can best represent the clustering coefficien t property of real-world social networks. The approximation algorithm is proved to be within a good bound of the op-timum solution. (3) Every consumer or customer in social networks can not only diffuse positive comments on prod-ucts but also can influence others with negative comments even if those others have already adopted those products themselves. Our model captures this important feature of social networks, which has not been studied extensively in previous work, and provides suggestion on planing market-ing strategies.

The rest of the paper is organized as follows. We review related work in Section 2. Section 3 proposes several heat diffusion models. In Section 4, we provide three marketing candidates selection algorithms. Section 5 gives the com-plexity analysis of our proposed models and algorithms. In Section 6, we demonstrate the empirical analysis of our mod-els and algorithms. Finally, conclusions and future work ar e given in Section 7.
Rogers theorizes in [21] that innovations spread through society in an S curve, as the early adopters select the tech-nology first, followed by the majority, until a technology or innovation is common. A tremendous expansion has oc-curred in the marketing literature on diffusion since the 1970s. The most important single impetus to this schol-arly explosion is a model for forecasting the diffusion of new consumer products proposed by Frank Bass in [4]. The Bass model characterizes the spread of a new product and tech-nology in a market by N ( t ) = N ( t  X  1)+ p ( m  X  N ( t  X  1)+ q N ( t  X  1) where N ( t ) is the cumulative number of adopters by time t ; the parameter m is the market potential, indicating the to-tal number of people who will eventually adopt the item; the coefficient p is called the coefficient of innovation, indicating the external influence or advertising effect; and the coeffi-cient q is called the coefficient of imitation, indicating in-ternal influence or word-of-mouth effect. However, the Bass model is an overly simplified representation of a complex reality, and it ignores the network structure, which could significantly influence the diffusion process [22].
Recently, in order to help companies determine which po-tential customers to market to, Domingos and Richardson [9, 20] proposed a fundamental algorithm to model customers X  network value as well as the intrinsic value of the customer. The customer X  X  network value is defined as the expected profit from sales to other customers this customer may in-fluence to buy, the customers those may influence, and so on recursively.

Although simulations show their work can help companies achieve much more revenue than direct marketing, several remaining problems still need to be studied. First, Domingo s and Richardson considered making marketing decisions at a specific point in time, whilst in practice, the adoptions of a product by customers happen at different time with different interventions. The time aspect needs to be considered when modeling social network marketing since the social network is evolving from time to time. Second, their work ignores the negative influence of every customer. In practice, one customer will have a negative influence on others (neighbors ) if this customer does not like this product. Third, in realit y, marketing to individuals with the highest network values is not an appropriate choice since these peoples maybe come from the same community of a social network. The best strategy is to choose marketing candidates from different communities.

In [23], Song et al. proposed to model users X  adoption patterns as an information flow network for a recommenda-tion system. An Early Adoption Based Information Flow (EABIF) network model and a Topic-sensitive Early Adop-tion Based Information Flow (TEABIF) network model were proposed. In [22], Song et al. proposed another information flow model that captures the diffusion rates of information in a network. These two models are well defined, and espe-cially useful for problems in recommendation and ranking. However, these two models need additional data on users X  profiles, access patterns, login logs, or purchase logs, whi ch may not always be available.
Heat diffusion is a physical phenomenon. In a medium, heat always flows from a position with high temperature to a position with low temperature. Recently, heat diffusion-based approaches have been successfully applied in various domains such as classification and dimensionality reductio n problems [5, 16, 17]. [17] approximated the heat kernel for a multinomial family in a closed form, from which great im-provements were obtained over the use of Gaussian or linear kernels. In [16], Kondor et al. proposed the use of a discrete diffusion kernel for categorical data, and showed that the simple diffusion kernel on the hypercube can result in good performance for such data. Belkin et al. employed a heat kernel to construct the weight of a neighborhood graph, and apply it to a nonlinear dimensionality reduction algorithm in [5]. In [28], Yang et al. proposed a ranking algorithm known as the DiffusionRank using heat diffusion process; simulations showed that it is very robust to Web spamming.
In this paper, we model diffusion of innovations as pro-cesses of heat diffusion. Actually, the process of people in-fluencing others is very similar to the heat diffusion phe-nomenon. In a social network, the innovators and early adopters of a product or innovation act as heat sources, and (a) A small undirected so-cial network have a very high amount of heat. These peoples start to influence others, and diffuse their influence to the early ma-jority, then the late majority. Finally, at a certain time point, heat is diffused to the margin of this social network, and the laggards adopt this product or innovation.
The heat flows throughout a geometric manifold with ini-tial conditions can be described by the following second or-der differential equation: where f ( x, t ) is the temperature at location x at time t , beginning with an initial distribution f 0 ( x ) at time zero, and  X  f is the Laplace-Beltrami operator on a function f [17].
In the light of the several successful existing application s of the heat kernel, it is natural to investigate the heat equa -tion whose special solution is the heat kernel K t ( x, y ). The heat kernel K t ( x, y ) describes the heat distribution at time t diffusing from the initial unit heat source at position y , and thus describes the connectivity (which is considered as a kind of similarity) between x and y . However, it is very dif-ficult to represent the social network as a regular geometry with a known dimension. This motivates us to investigate the heat flow on a graph. The graph is considered as an approximation to the underlying manifold, and so the heat flow on the graph is considered as an approximation to the heat flow on the manifold.

In this paper, we model a social network as a graph, and each consumer or customer in the social network is defined as a node on this graph. The relationships between peoples are represented by edges that connect nodes. We propose three different diffusion models to describe different social networks: undirected social networks, directed social net -works and directed social networks with prior knowledge of their diffusion probabilities.
Consider an undirected social network graph G = ( V, E ), where V is the vertex set, and V = { v 1 , v 2 , . . . , v { ( v i , v j ) | there is an edge from v i to v j } is the set of all edges. The edge ( v i , v j ) is considered as a pipe that con-nects nodes v i and v j . The value f i ( t ) describes the heat at node v i at time t , beginning from an initial distribution of heat given by f i (0) at time zero. f ( t ) denotes the vector consisting of f i ( t ).

We construct our model as follows. Suppose, at time t , each node i receives an amount M ( i, j, t,  X  t ) heat from its neighbor j during a period  X  t . The heat M ( i, j, t,  X  t ) should be proportional to the time period  X  t and the heat differ-ence f j ( t )  X  f i ( t ). Moreover, the heat flows from node j to node i through the pipe that connects nodes i and j . Based on this consideration, we assume that M ( i, j, t,  X  t ) =  X  ( f j ( t )  X  f i ( t )) X  t , where  X  is the thermal conductivity-the heat diffusion coefficient. As a result, the heat difference at node i between time t +  X  t and time t will be equal to the sum of the heat that it receives from all its neighbors. This is formulated as: where E is the set of edges. To find a closed form solution to Eq. (2), we express it in a matrix form: where In the limit  X  t  X  0, this becomes Solving this differential equation, we have: where d ( v ) denotes the degree of the node v , and e  X t H be extended as: The matrix e  X t H is called the diffusion kernel in the sense that the heat diffusion process continues infinitely many times from the initial heat diffusion.

In order to interpret Eq. (6) and the heat diffusion pro-cess more intuitively, we construct a small undirected soci al network graph with only five consumers as showed in Fig-ure 1(a).

Initially, at time zero, suppose node 1 is given 3 units of heat, and node 2 is given 2 units of heat; then the vector f (0) equals [3 , 2 , 0 , 0 , 0] T . The entries in matrix H are
Without loss of generality, we set the thermal conductivity  X  = 1, and vary time t from 0 to 1 with a step of 0 . 05. The curve for the amount of heat at each node with time is shown in Figure 1(b). We can see that, as time passes, the heat sources node 1 and node 2 will diffuse their heat to nodes 3, 4, and 5. The heat of nodes 3, 4, and 5 will increase respectively, and the trends of their heat curves are the sam e since these three nodes are symmetric in this graph.
Now we can interpret this figure in the aspect of social net-work marketing. Node 1 and node 2 are two consumers rep-resenting innovators or early adopters, who influence their direct neighbors in this social network, and to diffuse innov a-tions to others. Eventually, nodes 3, 4, and 5 are successful ly influenced by nodes 1 and 2 step by step as time elapses.
The above heat diffusion model is designed for undirected social networks, but in many situations, the social network graphs are directed, especially in online recommender sys-tems or knowledge sharing sites. Every user in knowledge sharing sites always has a trust list. The users in the trust list will influence this user deeply. These relationships ar e directed since user a is in the trust list of user b , but user b might not be in the trust list of user a . Based on this consid-eration, we modify the heat diffusion model on an undirected social network as follows.

On a directed graph G ( V, E ), in the pipe ( v i , v j ), heat flows only from v i to v j . Suppose at time t , each node v receives RH = RH ( i, j, t,  X  t ) amount of heat from v j a period of  X  t . We have three assumptions: (1) RH should be proportional to the time period  X  t ; (2) RH should be proportional to the heat at node v j ; and (3) RH is zero if there is no link from v j to v i . As a result, v i will receive P that points to it.

At the same time, node v i diffuses DH ( i, t,  X  t ) amount of heat to its subsequent nodes. We assume that: (1) The heat DH ( i, t,  X  t ) should be proportional to the time period  X  t ; (2) The heat DH ( i, t,  X  t ) should be proportional to the heat at node v i ; (3) Each node has the same ability to dif-fuse heat; (4) The heat DH ( i, t,  X  t ) should be uniformly dis-tributed to its subsequent nodes. The real situation is more complex than this, in view of the dynamic environment of social networks, but we have to simplify these in order to make our model concise. As a result, node v i will diffuse  X f i ( t ) X  t/d i amount of heat to each of its subsequent nodes, and each of its subsequent nodes should receive  X f i ( t ) X  t/d amount of heat, where d i is the outdegree of node i . There-fore  X  j =  X /d j . In the case that the outdegree of node i equals zero, we assume that this node will not diffuse heat to others. To sum up, the heat difference at node v i between time t + X  t and t will be equal to the sum of the heat that it receives, deducted by what it diffuses. This is formulated as where  X  i is a flag to identify whether node i has any out-links, such that  X  i = 0 if node i does not have any outlinks, otherwise,  X  i = 1. Similarly, solving it, we obtain
In Section 3.2, we modeled heat diffusion on directed so-cial networks in which each person will diffuse innovation to all of his (her) directed neighbors with equal probabilit y. In the real case, due to limited time and enthusiasm, each person will not diffuse innovation to everyone in his (her) contact list. For example, if you find Gmail or Hotmail is very useful, you probably will tell your best friends or some of your friends who may need this service, but not all of your friends. This consideration motivates us to propose our third heat diffusion model on directed social networks with prior knowledge of diffusion probabilities.

Consider a directed graph G = { V, E, P } , where V is the vertex set, and V = { v 1 , v 2 , . . . , v n } . P = { p is the probability that edge ( v i , v j ) exists } . E = { ( v there is an edge from v i to v j and p ij &gt; 0 } is the set of all edges. If we consider a more general case, we could also include the parameter that describes each person X  X  person-ality. Some individuals in the social network are very activ e and willing to share everything they like or dislike to their friends. On the other hand, some individuals are inactive with regard to diffusing innovation to others. We employ  X  to describe the personality factor of each person.
According to the above analysis and the analysis in Sec-tion 3.2, the expected heat difference at node i between time t +  X  t and time t will be equal to the sum of the heat that it receives from all its neighbors. This is formulated as f ( t +  X  t )  X  f i ( t )  X  where  X  i is a flag to identify whether node i has any outlinks. The parameters diffusion probability p and personality fac-tor  X  can be any value in the range [0 , 1]. Solving it, we obtain f ( t ) = e  X t H f (0), where
Parameter  X  plays an important role in the innovation diffusion process.  X  is the thermal conductivity, i.e., the heat diffusion coefficient. If it has a high value, heat will diffuse very quickly. Otherwise, heat will diffuse slowly. In the extreme case, if it is infinitely large, then heat will diff use from one node to other nodes immediately.

Different social networks have different values of  X  . In-formation on hot online social network sites and blogs will transfer information faster than other types of social net-works. At the same time, different types of information also have different values of  X  . For an example, bad news or neg-ative information tends to transfer much faster than good news or positive information in real-world social networks .
In most cases, each company has a certain quota of prod-uct which is used for marketing candidates selection. These products will be delivered to some pre-selected consumers at a discount or totally free. Supposing we have data on a social network which has N individuals, the problem we need to solve is: given the quota number k , how to choose the initial k  X  X nfluential X  individuals who will be delivered a free sample product, in order to maximize the number of cascade adoptions by which these individuals will influence other individuals on their direct contact list.

In this paper, we model social network marketing using heat diffusion processes. Initially, we choose k individuals as the seeds for heat diffusion, denoted by a set S k , and give a certain amount of heat h 0 to each individual. At time zero of the heat diffusion process, we set f i (0) = h 0 , where i  X  S . As time elapses, the heat will diffuse through the whole social network. If the amount of heat of individual i at time t is greater than or equal to a threshold  X  , this individual i will be considered as having been successfully influenced by others, and will adopt the product. We define the influence set of a set of k individuals S k , denoted as I S k ( t ), to be the expected number of individuals who will adopt the product at time t . Now the above problem could be interpreted as: finding the most influential k size set S k to maximize the size of set I S k ( t ) at time t, where I S k ( t ) = { i | f This problem is NP-hard, as already proved in [13].
In this paper, three approximation algorithms are pro-posed to target the initial k -individual set S k . All latter algorithms are more realistic than former algorithms, but at the same time, are more computationally expensive than former algorithms.
Given a social network composed of N individuals, Al-gorithm 1 shows the steps in finding the top-k influential individuals. The basic idea of this approximation algorith m is: first calculate the influence set of each individual, and then find the k most influential individuals.
 Algorithm 1 : Top-k Algorithm
Algorithm 1 is very naive since it ignores the potential overlaps of top-k influential sets. We therefore propose a greedy algorithm to minimize the overlaps between top-k influential sets, as follows: (1) First calculate the influen ce set of each individual, and set U = { I 1 ( t ) , I 2 ( t ) , . . . , I (2) set R =  X  , each time choose the set I i ( t ), i  X  N to maximize the size of { I i ( t )  X  R  X  I i ( t ) } , then R = R  X  I U = U  X  I i ( t ), until k sets are selected out. The detail of this greedy approximation algorithm is described in Algorithm 2 . Algorithm 2 : k -Step Greedy Algorithm
In each step of the greedy implementation, we wish to find the influence set I i ( t ) which provides the maximum improvement in terms of the product adopters. If we let R  X  ( k ) denote an optimal solution, using this k -step greedy approximation algorithm, we will show that this algorithm is a (1  X  1 e )-approximation algorithm, where e is the base of natural logarithm, and
Theorem 4.1. Algorithm 2 is a (1  X  1 e ) -approximation algorithm, and R ( k )  X  (1  X  (1  X  1 k ) k ) R  X  ( k ) .
Proof. At least R  X  ( k )  X  R ( k  X  1) individuals not covered by R ( k  X  1) are covered by the k subsets of R  X  ( k ). Hence, by the pigeonhole principle, one of the k subsets in the optimal uals. Let r l denote the subset or influence set selected by the greedy algorithm at step l . From the above analysis, we
Since as k  X   X  , (1  X  (1  X  1 k ) k )  X  (1  X  1 e ), Algorithm 2 provides a (1  X  1 e )-approximate solution.

As increases k , the accuracy of this greedy algorithm will keep decreasing, but the result will converge to (1  X  1 e timal solution.
Although the k -step greedy algorithm above can often generate a very good approximate solution to the problem of marketing candidates selection, it still can not interpr et the real-world social network activities very well.
In Algorithm 2, we first compute the influence set of each individual in turn, then choose the k sets with maximum coverage. In reality, at the beginning of the innovation dif -fusion process, several diffusion sources (innovators or ea rly adopters) in the network diffuse the innovation at the same time, not just one single source. The information one person receives from his (her) social network may come from sev-eral diffusion sources. We therefore propose Algorithm 3, an enhanced k -step greedy algorithm, to make our model more realistic, although it is more computationally intensive t han the above two algorithms.

In Algorithm 3, before the l -th step starts, we first set marketing candidates who are already selected out in the ( l  X  1)-th step as the diffusion sources (or heat sources), then launch the greedy search algorithm to find the l -th marketing candidate. This algorithm best preserves the social networ k properties among all three algorithms, but increases the al -gorithm time complexity, which we will analyze in Section 5. Algorithm 3 : Enhanced k -Step Greedy Algorithm
Function HeatDiffusion( Set A )
A common property of social networks is that cliques form, representing circles of friends or acquaintances in w hich every member knows every other member [1]. This inherent tendency to cluster is quantified by the clustering coefficien t in [27]. Our two greedy algorithms also capture this prop-erty by maximizing the improvement of coverage at each step, and finally tend to select out the most influential nodes in each community (cluster) as the marketing candidates.
A typical social network always consists of tens of thou-sands of individuals, and some very large social networks even could reach several millions of individuals. In this se c-tion, we will analyze the complexity of our proposed meth-ods, and introduce some very efficient techniques to reduce the complexity, and to ensure our algorithm is scalable for very large social networks.
When the graph of a social network is very large, a direct computation of e  X t H is very time-consuming. We adopt its discrete approximation to compute the heat diffusion equa-tion: where P is a positive integer. In order to reduce the compu-tational complexity, we introduce two techniques: (1) sinc e f (0) is a vector, we iteratively calculate ( I +  X t P H ) applying the operator ( I +  X t P H ) to f (0); (2) for matrix H , we employ a data structure which only stores the information of non-zero entries, since it is a very sparse matrix. Thus, supposing a social network is connected by M edges (rela-tionships between individuals), the complexity of executi ng the heat diffusion process is O ( P M ), which means the num-ber of iterations P multiplied by the number of edges M in a social network. In most cases, P = 30 is enough for approxi-mating the heat diffusion equation. The complexity O ( P M ) shows that our heat diffusion algorithm has very good per-formance in scalability since it is linear with respect to th e number of edges in social networks.
We now consider the three approximation algorithms de-scribed in Section 4. Supposing a social network is composed of N individuals and M edges, the complexity for each al-gorithm is: (1) for Algorithm 1, if the sorting part needs time complexity N log N , the time complexity is O ( N ( P M + N + N log N )); (2) for Algorithm 2, if the average size of in-fluence set of each individual is d , the time complexity is O ( N ( P M + M + kdN )); (3) for Algorithm 3, the time com-plexity is O ( kN ( P M + N + d )). We could see that in terms of time complexity, which is the same ranking as for the models X  reality, reasonableness and accuracy, Algorithm 3 &gt; Algorithm 2 &gt; Algorithm 1. We will show the detailed comparisons in Section 6.

We can employ some techniques to reduce the computa-tion time. In all three algorithms, for each individual, we execute the heat diffusion process, and calculate the influ-ence set. Actually, it is not necessary to compute this for every individual, since the degrees of social networks fit wi th power-law distribution [2, 3]. A very large number of indi-viduals have very small numbers of neighbors each (outlinks or inlinks). We could assume that selecting these individua ls as marketing candidates is not productive. This will greatl y decrease the computation time of the algorithms.
We conduct several experiments to measure the perfor-mance of our proposed models and algorithms, but due to the space limitation here, we present only the experimen-tal results of the three marketing candidates selection alg o-rithms on the directed social network. For the undirected social network and directed social network with prior knowl -edge of diffusion probabilities, the results and trends are similar to this. The experiments address the following ques -tions: (1) What is the performance of our marketing candi-dates selection algorithms? (2) How does influence diffuse in the social network? (3) How should sequential marketing actions be planned? and (4) How to defend against diffusion of negative information? In the following, Section 6.2 to 6. 5 answer these questions respectively. A tremendous amount of data has been produced on the Internet every day over the past decade. Millions of people influence each other implicitly or explicitly through onlin e social network services, such as MySpace, Facebook, Orkut, etc. As a result, there are many online opportunities to mine social networks for the purposes of viral marketing [20].
We choose Epinions 2 as the data source for our experi-ments on social network marketing. Epinions.com is a well-known knowledge sharing site and review site that was es-tablished in 1999. In order to add reviews, users (contrib-utors) need to register for free and begin submitting their own personal opinions on products, companies or movies, etc. These reviews will influence future customers when they are deciding whether a product is worth buying or a movie is worth watching. Every member of Epinions maintains a  X  X rust X  list which presents a network of trust relationship s between users, and a  X  X lock (distrust) X  list which presents a network of distrust relationships. This network is called t he  X  X eb of trust X , and is used by Epinions to re-order the prod-uct reviews such that a user first sees reviews by users that they trust. Epinions is thus an ideal source for experiments on social networks and viral marketing.

We construct the graph of the Epinions social network by the following rules: (1) We consider only the  X  X rust X  rela-tionship between members of Epinions. (2) If a member v trusts another member w , we create a directed link from node w to node v to interpret the trust relationship between these two members. The intuition behind this consideration is that if v trusts w , then w has a very high probability to influence v by word-of-mouth. Thus, we need to scan the trust list of every member in Epinions to build a social network graph. The dataset we employed is one of the 25 product categories,  X  X ids &amp; Family X , as it had the most re-views per product (10.2 on average) and reviews per person who submitted at least one review in the category (5.8, on http://www.epinions.com/. average). This social network is composed of 75,888 users from Epinions, and 508,960 edges are created between these users. The indegrees and outdegrees of this social network fits with power-law distribution [2, 3] which has been found in many social networks [26]. The degree distributions of Epinions social network are shown in Figure 2(a) and 2(b).
We describe the simulations on evaluating our three mar-keting candidates selection algorithms first. As stated abo ve, all the experimental results presented here use the heat diff u-sion model on a directed social network (Section 3.2). Three parameters need to be specified before starting the candi-dates selection algorithms. The first parameter is the initi al heat vector f (0), and this vector determines how much heat the heat sources need. For the purpose to let heat sources have enough heat to diffuse, we need to allocate a relatively large heat value to heat sources. We choose N k as the amount of heat for each heat source, where N is the number of con-sumers in this Epinions dataset, and k is the number of marketing candidates (heat sources). This consideration i n-dicates that the average amount of heat of every consumer is 1. The second parameter is the thermal conductivity value  X  , which controls the heat diffusion rate of our model. We set  X  = 1 in all of our experiments. The third parameter is the adoption threshold  X  . If at time t , one consumer X  X  heat value is greater or equal to  X  , we consider this consumer to adopt this product. Actually, in real life, consumers may have different adoption threshold values, but in this paper, in order to simplify the model, we set  X  = 0 . 6.

We employ the term  X  X overage X , which denotes how many consumers adopt the products, to evaluate our three pro-posed algorithms. Figure 3 shows the simulation results at t = 0 . 10, t = 0 . 15 and t = 0 . 20 under the following scenario: if we are given 1 to 20 product samples ( k = 20), who we should choose as the marketing candidates and what is the performance (measured by the value of cover-age) if we choose these candidates. Figure 3(a) and Fig-ure 3(d) show the simulation results at time t = 0 . 10. The star, down triangle and diamond in solid line represent the Top-k algorithm, k -step Greedy algorithm and Enhanced k -step Greedy algorithm, respectively. In Figure 3(a), 3(b) and 3(c), the x-axes denote the number of marketing candi-dates we are given, and the y-axes present the resulting cov-erage. We can easily draw the conclusion from these results that the Enhanced k -step Greedy algorithms has the best performance among the three algorithms. Figure 3(d), 3(e) and 3(f) show the increase of coverage of each selection step compared with the previous selection step. Since the Top-k algorithm does not consider the overlap between each in-fluence set, we can observe that its curve fluctuates sharply. This indicates that the Top-k algorithm is a very naive algo-rithm and it does not performs well in practice. Generally, the curves of k -step Greedy algorithm and Enhanced k -step Greedy algorithm are much smoother than that of the Top-k algorithm; also the Enhanced k -step Greedy algorithm causes more consumers to adopt products than the k -step Greedy algorithm.

We also list the IDs of corresponding consumers who are selected as the marketing candidates by our algorithms in Table 1. The ID numbers range from 0 to 75,887 since we have 75,888 users in Epinions social network totally. We ob-serve that the first four selected candidates (IDs are 18, 143 , 737 and 790) are the same for all of these algorithms. This phenomenon matches the real life situation that a social net -work is a network composed of several different communities or clusters, and every community has some very influential persons. These four persons are very likely to be belong to four different communities and fulfil important roles in these communities, like the authoritative entities in a soc ial network which can be identified by the HITS algorithm [14, 15]. Beyond the first four marketing candidates, however, the remaining candidates chosen by each of our three algo-rithms are different. The above analysis indicates that our proposed framework can best represent the clustering coef-ficient property of real-world social networks.
In the preceding section, we select 20 marketing candi-dates out of 75,888 consumers using each of our three selec-tion algorithms. These 20 consumers will be treated as the diffusion sources, and start to influence others through word -of-mouth process. More and more consumers will adopt this product. Due to the large number of consumers, it is im-practical to list here all the detailed data on how influence diffuses in this social network. Hence, in this section, we illustrate this process in a simple, clear and visual way.
First we plot out the Epinions social network graph. Every relationship in this social network is represented by a gray line. At time t = 0, we color the 20 marketing candidates which are selected by Enhanced k -step Greedy algorithm in dark red using RGB value. When the time reaches t = 0 . 2, as Figure 4(a) shows, more and more consumers are influ-enced by their neighbors(consumers colored dark red have higher probabilities to adopt this product than consumers colored light red; the degree of darkness is computed using our heat diffusion models). In Figure 4(b), when t = 0 . 5, we observe that more consumers tend to adopt this prod-uct than when t = 0 . 2. This phenomenon coincides with the intuition that the number of adopters will grow rapidly through a word-of-mouth process in real-world.
So far, our algorithms plan the marketing strategies only once; actually most companies hope to plan a marketing strategy step by step to satisfy the market demand. Sup-pose we have k samples for marketing a product, and we wish to deliver a quota k 0 , k 1 , . . . , k n  X  1 of samples to pre-selected candidates at specific time point t 0 , t 1 , . . . , t where k 0 + k 1 + . . . + k n  X  1 = k . The problem is how to design the marketing strategy and how to choose the mar-keting candidates to maximize the adoptions of this product .
Since our diffusion models have the advantage of being time-dependent, we can easily design marketing strategies at different time points. Suppose at time t 0 = 0, we de-liver k 0 samples to k 0 consumers selected by our algorithms, denoted by a set C t 0 , and from time t 0 to time t 1 , several other consumers adopt this product, denoted by a set A t 0  X  t 1 We could observe that a total of { U  X  ( C t 0 + A t 0  X  t 1 sumers have not adopted this product at time t 1 , where U is the set of all consumers. We then start our next step marketing action by selecting C t 1 candidates from these { U  X  ( C t 0 + A t 0  X  t 1 ) } consumers, and marketing products to them. Thus, at time point t 2 , A t 1  X  t 2 consumers are suc-cessfully influenced by others. We repeat this process until all the actions are executed. In real life, n is often less than 3.
We have also conducted several experiments to simulate the sequential marketing actions at different time points; w e omit the details here due to space limitations. In general, we observe that the above heuristic algorithm ensures that our marketing strategies cover the greatest number and most diverse possible range of consumers. Social networks are very dynamic and complex networks. All kinds of information flows on social networks; we can simply classify this information as positive and negative. The presence of negative information makes modeling social network marketing extremely difficult; no previous models have considered negative information. Although in [11], a propagation model of trust and distrust is proposed, this model tries only to answer the question of why people trust and distrust others, and does not address the question of how positive and negative comments diffuse.

Previous diffusion models all assume that people will al-ways positively recommend a product to their friends if they adopt it. Actually, in real life, one has a high probability to tell one X  X  friends not to buy a product if he or she feels that this product is not good enough after he or she used it. Unfortunately, no previous work has taken account of this serious problem.

In this paper, our proposed diffusion models can naturally simulate product adoptions in the presence of both positive and negative comments. At the beginning of the marketing candidates selection algorithms, based on some prior knowl -edge, if we find a consumer u does not like the product that will be marketed to him(her), this consumer will be allocate d a negative value of heat f u (0) by our algorithms. Thus, this consumer will diffuse negative comments to his (her) friends or neighbors in his (her) social network. At time point t , a consumer v in this social network will receive different types of comments from their neighbors. Some are positive and others are negative. Consumer v will decide whether to adopt this product or not depending on the heat diffusion equation f ( t ) = e  X t H f (0). If f v ( t )  X   X  , consumer v will adopt this product, and if f v ( t ) &lt;  X  , consumer v will not adopt this product. Another possibility is f v ( t ) &lt; 0, which means con-sumer v is persuaded by the negative comments, and will diffuse negative comments to his (her) neighbors too.
How can the influence of negative comments be mini-mized? We utilize a heuristic algorithm to try to allevi-ate the impact of negative comments as much as possible. Before describing this algorithm, we make the following as-sumptions: (1) Determining whether a consumer likes or dislikes a specific product needs some prior knowledge on this consumer X  X  previous profiles, such as purchase record, reviews and feedback. Due to the lack of such data, we pre-assign some consumers to diffuse negative comments. (2) In order to simplify the model, we assume that only the first selected marketing candidates could diffuse negative com-ments, which means, at time t , if a consumer adopts this product, in the remaining time, this consumer will only dif-fuse positive comments to others.

Now the heuristic defense algorithm on how to choose marketing candidates to defend against negative informa-tion can be described as follows: (1) First select k mar-keting candidates using the k -step Greedy algorithm or the Enhanced k -step Greedy algorithm, and suppose some of these candidates dislike this product, and will be allocate d negative initial heat values. (2) For each candidate who dis -likes the product, select an additional k a candidates who have the most common influence sets with this candidate as the complementary diffusion sources. These complemen-tary candidates can alleviate the damage that the negative comments cause, or even eliminate it.

Suppose we are given 10 product samples to market to consumers, and we select 10 candidates based on the En-hanced k -step Greedy algorithm. If no-one among these candidates diffuses negative comments on this product, the coverage curve or adoption curve is shown in Figure 5 as the star curve in a solid line. If the first candidate dislikes this product, he(she) will diffuse negative information to h is (her) friends. Since the first candidate is the most influ-ential node in this social network, the adoption curve will drop substantially, as shown in the down triangle curve in Figure 5. We then execute the defense algorithm described above, and suppose k a = 2, which means we select two de-fense candidates to alleviate the negative impact as much as possible. From the diamond curve in Figure 5, we see that this defense algorithm works well and alleviates the damage
Figure 5: Defense Against Negative Information caused by the negative comments. The reason why the di-amond curve will drop a little at the beginning is that the two defense candidates are employed to alleviate the dam-age from the first candidate; however, eventually, they will increase the number of product adoptions. Since the social network is really a very complicated network, we have il-lustrated only a simple example of how to defend against negative information in this paper. A more detailed and ex-tensive analysis of diffusion of negative information will b e included in the future work.
In this paper, we propose a social network marketing frame-work which includes three diffusion models and three mar-keting candidates selection algorithms. The purpose of our work is to model social network marketing as realistically as possible. Our proposed methods have several advan-tages compared with previous work, including how to de-fend against diffusion of negative information, which has no t been explored previously. The complexity analysis shows our framework is scalable for very large social networks, an d an empirical study using the Epinions dataset confirms the promise of our proposed framework.

Although we have developed some models and algorithms for social network marketing, several remaining issues nee d to be studied in the future. We coin the concept of  X  X ega-tive information diffusion X  in this paper, and introduce how to defend against this kind of information by employing a simple heuristic algorithm. The understanding of how nega-tive information is diffused is still at a crude level, and mor e theoretical analysis will be conducted in the future.
As we mentioned in this paper, a social network is a very complicated network, and that is why we always try to model social network marketing as accurately as possible within a simple model. An important property of any social network is evolution. Every social network is evolving all the time. So far, our work considers social network as a static network only, and ignores newcomers, new relationships between ex-isting members and the growth of the network X  X  size. In the future, we plan to consider the evolution property of social networks, and permit our social network to grow at a certain rate. The power-law distribution property of so-cial networks and some link prediction algorithms may be helpful in modeling dynamic social networks.
The work described in this paper was fully supported by two grants from the Research Grants Council of the Hong Kong Special Administrative Region, China (Project No. CUHK4150/07E and GRF #412507).
