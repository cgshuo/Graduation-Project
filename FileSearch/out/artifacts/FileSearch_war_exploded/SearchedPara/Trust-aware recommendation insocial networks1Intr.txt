
Due to the exponential growth of information, it is difficult for people to find items (Web pages, news, movies, music, book, etc.) they need. Nowaday s, recommender systems are becoming more and more important for solving information overload problem. The traditional recommender systems usually leverage the sparse user -item rating matrix to predict users  X  preferences , while ignore the social relationshi ps among users. However, the fact is the social relationships, such as trust relationship between users, play a very important role in influencing user selection. For example, people are typically used to accept an item (e.g. movie or hotel) recommended by their trusted friends. Online social networks are virtual communities, which allow people to connect and interact with each other, and build the corresponding social relationships to simulate the relationships of the real world. With the popularity of onl ine social networks, social network information (e.g. trust relationship) is beco m-ing increasingly important to improve recommendation effectiveness of the existing recommender systems.

In this paper, we give a fresh understanding to the relationships between users , that is, we incorp o rate the user -user trust relationship with the user -user similarit y to co n-struct a new hybrid information matrix H , in which each element h ij is e x pressed as a mixed value of trust relationship and similarity between user u i and user u j . Further , ence s together . The e x pe ri mental results on a large Epinions 1 dataset show that our based recomme n dation method s .

The rest of this paper is organized as follows. Section 2 reviews related work. Se c-tion 3 defines the notations and concepts used in this paper . Section 4 present s a novel trust -aware recommendation approach. Section 5 evaluates the proposed approach through extensive experiments, and Section 6 conclud es this paper.
The collaborative filtering (CF) approach to recommenders has enjoyed much i n-terest and progress [1]. The basic idea of CF is that if users shared the same interests in the past they will also have similar tastes in the future. CF methods utilize user s X  behaviors ( e.g. ratings or clicks) to infer a target user ' s preference for a particular item . The two main techniques of CF are the neighborhood approach [1 -5] and matrix factorization technique [1, 6 -1 5 ]. Neighborhood methods foc us on relationships b e-tween items or users. An item -item approach models the preference of a user to an item based on ratings of similar items [5]. Matrix factorization methods transform both items and users to the same latent factor space [1].

The traditi onal CF methods are based on the assumption that users are independent and identically distributed, and ignore the social trust relationships between users. To improve the recommendation accuracy and solve the data sparsity problem, users X  social network s hould be taken into consideration. T o enhance CF performance, Liu et al. [1 6 ] exploit to use social network information in a neighborhood based CF a p-proach . In [1 7 ], authors build factorization models that incorporate users X  social ne t-work, action, tag, p rofile and items X  taxonomy information. Although their method takes social networks into consideration, the authors X  core concern is the relationship between user and object. Ma et al. [1 8 ] introduce s ocial r egularization to represent the social constraint s on recommender systems and propose a matrix factorization framework with social regularization. Massa and Avesani [ 1 9 , 20 ] exploit the trust -aware recommender systems . They replace the similarity finding process with the use mate a trust weight . Ma et al. [ 2 1 ] propose a factor analysis approach based on prob a-bilistic matrix factorization to solve the data sparsity and poor prediction accuracy problems by employing both us ers X  social network information and rating records. The disadvantage of th e approach is that the authors only leverage the direct trust relationship between users and ignore the fact that the indirect trust relationship b e-tween users can also improve the a ccuracy of recommendation . In [ 2 2 ], authors propose a novel probabilistic factor analysis framework , called RSTE , which fuses the users X  tastes and their trusted friends X  favors together. Al t-hough RSTE employ the trusted friends  X  opinions in the social tr ust network to make recommendations for the users, it does not consider the possible p ropagation of trusts between various users. Under the circumstance that both the user -item rating matrix and the trust relations of a social network are very sparse, the diffusions of trust rel a-tions become inevitable since this consideration will help to alleviate the data sparsity problem and will potentially increase the prediction accuracy [2 2 ]. In this paper, we introduce the trust propagation and diffusion mechanism and propose a new trust measure to extend the trust domain . Further , we propose an improved trust -aware recommendation approach, called TRA , which consider both direct trust relationship s and in direct trust relationship s between users.
We use U to denote the set of users and P to denote the set of items. Let u i denote a t rust -aware recommendation in this paper involves three central elements : user -item r ating matrix , users X  trust network , and probability matrix factorization (PMF) [2 3 ] . 
A user -item rating matrix R is a | U | X | P | matrix , and each entry r ij of R represents the rating of user u i for item p j . A users X  trust network is modeled as a directed edg e -weighted graph G = ( E , U , W ) , where U is a set of vertex es , corresponding to the set of users of an online social network , E is a set of directed edges between two vertex es in U , and W is the set of weight values of all directed edges. If there is an edge e ij wi th weight w ij from vertex u i to vertex u j , we say a direct trust relationship existing from u i to u j , denoted by , where w ij represents the direct trust degree from u i to u j , and is defined in the range of (0, 1] . The greater w ij means u i more trusts u j . We use graph G and | In ( u i )| equal to the in -deg ree of vertex u i in graph G by the definitions of Out ( u i ), In ( u i ) and graph G .

The probability matrix factorization (PMF) [ 2 3 ] performs well on the large, spars e, and very imbalanced dataset. Suppose we have M items, N users , and integer rating values from 1 to K 1 . Let column vectors U i and P j representing user -specific and item -specific latent feature vectors respectively. Since PMF performance is measured by computing the root mean squared error ( RMSE ) on the test dataset, a probability lin e ar model with Gaussian observation noise is adopted. The conditional distribution over the observed ratings is defined as Equation (1). Wher e ( x |  X  , ) is the probability density function of the Gaussian distribution with mean  X  and variance , I ij is the indicator function that is equal to 1 if user u i rated item p j and equal to 0 otherwise , and is the logistic function , which makes it possible to bound the range of within the range [0, 1] .
In this section, we first construct a novel social trust matrix by fusing direct and i n-direct trust relationships between users. Then, we propose an improved trust -aware recommendation approach, called TRA , on the basis of the existing RSTE [2 2 ]. 4 . 1 Social trust matrix Suppose we have a users X  trust network graph G = ( E , U , W ) , where the vertex set U = represents all users in a social network, the edge set E denotes all direct trust relationships between users, and the weight set W represents all weights assoc i-ated with the corresponding edges. In RSTE [2 2 ], authors define a user -user ma trix S = as the social network matrix, where if existing an edge e i k from u to u k in graph G = ( E , U , W ) , otherwise . Obviously, the above -mentioned social network matrix is very sparse because it only ta kes into account the direct trust relationships between users. In the real world, however , trust p ropagation is ubiqu i-are some latent trust relationships between non -adjacent users in graph G = ( E , U , W ) , which are important for improving the accuracy of recommendation method s. Mot i-va t ed by this fact , we define three kinds of in direct trust relationships and intr o duce them into the social network matrix. On this basis, we define a novel social trust m a-trix.

Given a users X  trust network graph G = ( E , U , W ) , let u i , u k U and there is not the d i rect trust relationship between u i an d u k . In the following, we formally define the three kinds of indirect trust relationships.

Definition 1 If s . t . , we say there is the indirect trust relationship from u i to u k , denoted by , where represents the weight of the indirect trust relationship from u i to u k .
 Definition 1 reflects the transitivity of trust relationships.

Definition 2 If s . t . , we say there is the indirect trust relationship between u i and u k , denoted by and , where and and from u k to u i .

Definition 3 If s . t . , we say there is the indirect trust relationship between u i and u k , denoted by and , where and and from u k to u i .

Definitions 2 and 3 are based on the reasonable assumption : two users, which trust or are trusted by a common user, often ha ve a kind of latent trust relationship .
F urther , we formally define the weights of these indirect trust relationships accor d-ing to the theory of trust p ropagation in the real world . In the following definitions, we use to represent the average weight of all direct trust relationships, i.e., 
Definition 4 Let , then is defined by the equation:
Definition 6 Let , then is defined by the equation:
Considering the fact that direct trust relationships often have a greater impact on users than indir ect trust relationships, we use as a slack factor to adjust the weight values of indirect trust relationships in the above definitions 4 -6.
 Now, we give the definition of the social trust matrix .

Definition 7 Given a users X  trust network graph G = ( E , U , W ) , the social trust m a-trix is a user -user trust relationship matrix, denoted by Q , where 4 . 2 T he trust -aware recommendation approach
In t he proposed trust -aware recommendation approach ( TRA ) , we first build the u s-er -user trust relationship matrix Q and the user -user similarity matrix S based on the users X  trust network graph G = ( E , U , W ) and the user -item rating matrix R , respectively . The above definition 7 gives the way of building Q . We employ Pearson correlation coefficient [1] to compute the similar i-ty between two u sers. Specifically, given two users u i and u k , the similarity between u i and u k , i.e., , is computed by Equation (2).
In Equation (2), P represents the set of items , r ij represents the rating of user u i for item j , and denote the average ratings of u i .

Further, TRA fuses the user -user trust relationship matrix Q with the user -user similarity matrix S to construct a new hybrid information matrix H = , where .
 Finally, TRA leverages the modified PMF to calculate rating predictions based on H = by following RSTE [2 2 ] . Specifically, similar to RSTE , TRA models the joint conditional distribution of latent user and item feature mat rices U and P over the observed ratings and the hybrid information matrix H as:
The log of the posterior distribution for the recommendation is given by the fo l-lo w ing Equation (4).
Maximizing the log -posterior over two latent features is equivalent to minimizing the following sum -of -squared -errors objective functions :
In Equation (3) -(5), the diff erence of TRA and RSTE is that TRA uses hybrid i n-formation matrix H = to replace the social network matrix S = of RSTE .

A minimum of the objective function can be found by performing s tochastic gradi ent descent in and . According to the s tochastic gradient descent , first , and are calculated , respectively , and t hen, the following iterations are performed : w here is a step size ( le arning rate ).

Now , we can compute a rating prediction for user u i giving to item p j by the fo l-lowing Equation (8).
In this section, we evaluate the performance of the proposed approach ( T R A ) with the state -of -the -art matrix factorization and trust relationship based recommendation method s through extensive experiments . S imilar to other works in the literature s [21, 22] , the performance metrics of concern in this paper are the Mean Absolute Error ( MAE ) and the Root Mean Square Error ( RMSE ) . In what follows, we will first describe the exper i-mental dataset and two performanc e metrics , and then present the experimental results. 5 . 1 Dataset Description
Similar to the literature s [21, 22], we choose Epinions as the data source for our expe r-future users when they are about to decide whether an item is worth buying. Epinions also maintains a trust list which presents a social network of trust relationships between users. Epinions is thus an ideal data source for our experiments.

The datase t used in our experiments is collected from Epinions . It consists of 51670 u s-ers who have rated a total of 83509 different items. The total number of ratings is 631064. issued trust relationships is 511799. The statistics of this dataset is summarized in the literature s [21, 22]. 5 . 2 Performance Metrics
In our experiments, we use two performance metrics, the Mean Absolute Error ( MAE ) and the Root Mean Square Error ( RMSE ), to measure the performance of the proposed approach ( TRA ) . MAE is defined by the following Equation (9).
 where represents the rating of user for item p j , denotes the rating prediction of user for item p j by a recommendation method, and n represents the number of tested ratings.
 RMSE is formulated as the following Equation (10).

The smaller MAE and RMSE imply the more accurate prediction. 5 . 3 Experimental Results
In this subsection, we first evaluate the impact of parameter and dimension d on the performance of T R A , and then we compare T R A with the state -of -the -art reco m-mendation method s .

For T R A , the parameter makes a balance between the user -item rating matrix R and t he hybrid information matrix H . decides how much T R A should believe the user -item rating matrix R and the hybrid information matrix H . If , TRA d e-grades into an ordinary proba bility matrix factorization .

Based on the past experimental experiences, the percentage of training set is set at 80% and 90% to calculate MAE and RMSE in our experiments. We assume the latent factor vector dimensionality d = 20 and the step size =40 in evaluating the impact of parameter on the performance of T R A .

Fig. 1 shows the impact of parameter on MAE at d = 20 and . We can see from Fig. 1 that no matter using 80% or 90% training data MAE decreases at first as increases, but when is greater than a certain threshold ( such as 0.4) MAE increases with . This result is not surprising because balances the influence fro m the user -item rating matrix R and the hybrid information matrix H . Obviously, too big or too small is bad for fusing both R and H to make recommendations. Fig. 2 shows the impact of parameter on RMSE at d = 20 and . As we expect , no matter usi ng 80% or 90% training data RMSE decreases at first as increases, but when is greater than a certain threshold (i.e., 0.4) RMSE increases with . The reason is the same as the one for Fig. 1.

Fig. 3 and 4 depict the impact of dimensionality on MAE and RMSE at = 0.4 and . As shown in Fig. 3 and 4, we can learn that no matter using 80% or 90% training data , both MAE and RMSE decrease (prediction accuracy increases) as d increa s-es. We can also observe from Fig. 3 and 4 that the downward trend of MAE and RMSE becomes flat when is greater than a certain threshold. 
In order to show the performance improvement of T R A , we compare T R A with the following four methods on Epinions dataset . (1) BS: this is a baseline method, which purely leverage direct trust r elationships (2) NMF: the method is proposed in the literature s [1 5 ], which uses non -negative (3) PMF: i.e., probability matrix factorizati on [23]. T he method scales linearly (4) RSTE: the method introduces the direct trust relationships between users and
In the following experiments, the experimental parameter setting is as follows: = 0.4, d = 60 and . Similar to the previous experiments , we randomly select 80% or 90% of the ratings from Epinions dataset as the training data to predict the re maining ratings.

Fig. 5 show s the performance comparison of T R A with the above -mentioned four methods on MAE and RMSE . As we expect , our method T R A evidently outperforms the other four methods on both MAE and RMSE . This is because T R A makes a reasonable fu sion between the user -item rating matrix R and the hybrid information matrix H for the recommendations. This result also demonstrate s the method s (i.e., T R A and RSTE ), considering both the user -item rating matrix R and social trust relationship info r-mation , can provide a higher quality recommendation than these methods (like BS, NMF and PMF) which only leverage the single R or social trust relationship info r-mation. In addition , the reason that RSTE is not as good as T R A is RSTE neglects the impact of indire ct trust relationships on the recommendation accuracy .

In order t o better evaluate the performance of T R A , we further divide the training d a-ta i n to different user group s based on the number of observed ratings , and evaluate pr e-di c tion accuracies of these methods over different user group s . In our experiments, sim i-lar to RSTE [ 22 ] , u sers are divided into 6 groups according to the number of observed ratings users have rated.

Fig. 6 demonstrate s the distributions of testing data based on 6 user groups . Fig. 7 shows prediction accuracies of T R A and the other four methods over different user groups. We can see from Fig. 7 that T R A outperforms the other four methods over all 6 user groups , and the advantage becomes more obvious when fe w user ratings are given. This demonstrate s T R A is still valid for the sparse user -item rating matrix .
With the proliferation of online social networks , social trust relationships are b e-co m ing more and more important for improving the recommendation accuracy. Ho w-ever, t he traditiona l recommender systems usually ignore the social trust relationships between users. In this paper, we introduce the trust propagation and diffusion mech a-nism and propose a new trust measure to extend the trust domain . We first define three kinds of indirect trust relationships and introduce them into the social network matri x. On this basis, we define a novel social trust matrix , which naturally incorp o-rates direct trust relationship and three indirect trust relationships and help to alleviate the data sparsity problem . Further , we fuse the user -user trust relationship matrix Q with the user -user similarity matrix S to construct a new hybrid info r mation matrix H . Finally, we leverage the modified PMF to calculate rating predictions based on H and the user -item rating matrix R . To demonstrate the efficiency of our approach, e xte n-sults show that our approach out performs the state -of -the -art matrix factorization and trust rel a tionship based recomme n dation method s .
 This work is supported by the National Natur e Science Foundation of China under Grant No. 61170174 , major research project of National Natur e Science Foundation of China under Grant No. 91646117 and Tianjin Science and Technology Corr e-spondent Project under Grant No. 16JCTPJC53600 .

