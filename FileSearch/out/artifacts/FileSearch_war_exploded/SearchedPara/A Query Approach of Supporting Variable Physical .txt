 integrate of information technology, communication technology, computer height of national strategy, and expand the related technical research actively. time information control of important operating parameters in various parts of power management of devices. transmission line, smart grid need widely deploy different function sensors, Intelligent Electronic Devices (IED) and etc. For exampl e, with the ice disaster advance warning iced or will be iced in time. It can avoid wire icing or melt the ice within a short time through the way of increasing electric wire preheating. While query is executed through accessing historical data in Oracle or PI database in traditional power grid, it monitoring and real-time control in large-scal e smart grid [4, 5]. However, large-scale smart grid involves vast and complex geographical environment, the monitored objects increase by thousand magnitude and other factors. The traditional way of global query cannot satisfy the query in any area, and the communication cost is also large. Therefore, the research on energy efficient distributed query algorithm in large-scale smart grid monitoring system is in urgent need [6, 7]. 
Based on the requirement of data transmission, storage and query in large-scale window. The method uses physical window describing actual area of query which is variable by the user need at any time. In query process, the strategy of selecting query tree and node inside the query tree is used for modifying physical window and querying flexibly at any area. The mapping array is used for selecting node inside the query tree instead of physical window, and reducing network communication cost used for reducing the amount of data transmission in network. Experiments show that the approach can realize the queries for any physical regions, while reduce the cost of network communication and extend the lifetime for the monitoring system network. transmission line region radiated by substations. A large number of sensors and IED nodes [9] are deployed in these devices. 2.1 Classification of the Node high-voltage device of transformer substation in large-scale smart grid, and its radiation sensors on each level of transmission line and IED node. There are detailed divisions and introductions of function on the sensor node and IED node as follows.  X  Detecting node environment parameters, can deal with simple calculation.  X  Gathering node Gathering node is a sensor which is more powerful than detecting node. It can sense, participate in query issued and result gather.  X  Logical root node computing power. It can communicate with the compute IED node, detecting node and gathering node.  X  Compute IED node substation sets a compute IED node. The node integrates strong computation module and moderate storage module. 2.2 The Representation of Node Location A large number of sensor devices are deployed in transmission lines and substations in smart grid. Their geographical locations ar e normal determined when installed. In loc = &lt;lon  X  lat&gt;, and converts to the number which represents as the smallest unit in degrees. For example, the location of a sensor node is east longitude 23 X 27  X  30  X  X  , south latitude43 X 15  X  29  X  X  . Then it represents as loc = &lt;23.4  X  -43.2&gt; after conversion. After compute IED node receiving the initialization order from the centralized control substation form a logic query tree which support variable physical window query. And all the logic query trees constitute a logic query forest. 3.1 The Attribute of Node  X  The level of node levels of node. The level can represent parent-child relationship of nodes. The values level value of detecting node is 0, and that of gathering node is at least 1. The value of compute IED node level is the highest and that of logical root node second, which is shown in Figure 1.  X  The maximum range of node different. Range of the compute IED node is the possessed range of WSN [11]. Range of sensor node refers to the smallest rectangle range, which is received from the actual range latitude will be received, which is constituting the minimum rectangle range of the node, The maximum range of leaf node in the tree structure is its geographical location. There is long_max = long_min = long , and lat_max = lat_min = lat . 3.2 Data Structure of Node In the initialization of query path and query issued  X  the compute IED node and kinds of information based on the variable physical window query what we need.  X  Tuple of node need participate in query. If status equal to 0, the node doesn X  X  do it. The initial value of status is zero.  X  Table of node TB_Info is a static table that cannot change over the query, but only update when the dynamic table which constituted by node_route tuple. TB_Route of node in query path updates when query path changes. 3.3 Establishment of Logic Query Tree  X  Creating information table of node The compute IED node sends the order of establishing query path to the logical root node in a jump, which broadcasts the message in all the sensor nodes of the transmission efficiency[12]. S is determined by the maximum level of sensor in J . The rule is shown as follows. collected. The calculation rules are as follows. shown in Figure 2. And S i sends S i . node_info toward the next node approaching root node in a jump range.  X  Creating node path tables S TB_Route of node in query path will be updated when query path changing and play been established, after creating TB_Info and TB_Route . 4.1 Variable Physical Window devices in any area of large-scale smart grid through query statement. The format of query statement is shown as follows. The rules to determine query-range are similar to the max-range, here no longer say. 4.2 Selecting Query Tree The center gets query_range through analyzing the query statement, compares it with the max_range uploaded by each compute IED node, and selects the right logic query tree for global or local query in entire query forest.  X  Selecting rules of query tree (1) When query_range is disjoint from IED i .max-range , it can infer that the PW (2) When query_range intersects IED i .max-range , it can X  X  infer that the PW (3) When query_range contains IED i .max-range , it can X  X  infer that the PW  X  Selecting query tree algorithm 4.3 Selecting Node Inside the Query Tree bandwidth, and also accelerate the energy cost of sensor. To solve this problem, QPW utilizes Bloom Filter (BF) [13] to encode the data set of PW to transmit. In the range of allowable error, it decreases communication cost, saves the energy of sensor.  X  Setting the mapping array First, define a bit array w , whose initial state is 0. Then define a set of hash function, 5, y1 doesn't belong to X , y2 may be the element of X , or just a false positive. Using the set H which is set up in advance, compute IED node sets a w for the received PW  X  . The w is used for selecting nodes inside the query tree instead of PW  X  .  X  Selecting the path branches TB_Info . Judge the intersection relation between query_range  X  and max_range of the S its TB_Route (shown in Figure 6).  X  Selecting the detecting node S send S i .node_route tuple to S j . S j stores it to its TB_Route (shown in Figure 6).  X  The algorithm of selecting node inside the query tree The time complexity of Algorithm 2 is O (n). 4.4 Collecting the Query Result Sensor nodes get out a minimum value from the maximum of all its internal tuples, and In different network scale, we verify the performance of our work by comparing transmission cost of different distributed data. 5.1 Physical Window Size and Transmission Cost In the case of allowable error, the query approach proposed in this paper use mapping array to reduce the communication cost of network instead of actual physical window. When physical window size changes, the reduction rate of transmission cost is used to formula is shown as follows. 
Here physical window size is bit number of physical window which equals n multiply the bits of sensor geographic coordinates (in this experiment, the assumption mapping array when k = 3 in this experiment. According to different n , the reduction rate of transmission cost will be shown as follows. gradually when the number of mapping function is fixed. Through comparing table 1 System still has a reduction rate of 33.3% when m = 2000 and n = 100. However, the when physical window increases to a certain extent, for example n = 800, the bits of a mapping array is at least 2654 according to 1.43 2.32 mn  X  X   X  . Then the mapping array which m=2000 cannot satisfy the PW in query. Therefore, using mapping array up the physical window size and bit number of mapping array reasonable. 5.2 Physical Window Size and Negative Error Rate The above experiments show that mapping array can reduce the transmission cost of network. The limitations of mapping array cause that a few of sensors which are not in query range are considered in the range in correctly, that is negative error rate. This experiment sets k = 3 which is the number of mapping function. And variable m is set proportional to physical window size when m is fixed. Because the number of sensors in physical window increases, the number of 1 in mapping arrays increases, and negative error rate ascends. Furthermore, when the sizes of physical window are same, the negative error rate decreases as m increases. This is because that if the bits of mapping array and bits of 0 in the array increase, the probability of values, which smaller . That is, the negative error rate is low. In the practical application, when use should be set reasonable to reduce negative error rate. 5.3 Transmission Cost in different Correlation of Data This experiment assumes that each sensor is unified deployed(1node/10m 2 ) and location are all fixed. This experiment sets 100m*100m physical range as a stepping, and increases the stepping from 100m*100m to 600m*600m. It assumes that the test data are distributed evenly in sensor nodes, each node produces a tuple data in every moment, and the attribute dimension of tuple is 3. Each attribute is 4 bytes, and this experiment regards the normalized data in [0, 1]. Data are transmitted in the form of packets which the biggest length is 48 bytes. The simulated data are all generated by standard dataset generator of skyline query [15]. This experiment compares the MAIQS algorithm [16] based on agency with QPW on the average transmission cost under the positive and negative correlation distribution (see Figure 8). positive correlation is small, while negative correlation is the opposite. With network are distributed in positive correlation or negative correlation. strategy of query tree and tree node is used for meeting users to query flexibly at any area. The mapping array is used for selecting strategy of tree node instead of physical window, and reducing network communication cost when query issued. When collecting the query results, filter tuple approach is used for reducing amount of data transmission in WSN network, and improving the life of the monitoring system network. In the future, by resolving the optimal setting of mapping arrays and improving skyline query approach, it reduces the cost of network communication and improves the life of the monitoring system network. 
