 Data stream mining has recently received much attention in several communities includ-ing theory, data mining, financial and telecom network due to several important applica-tions. Recently, some efforts concentrate on a bnormal stream detection over co-evolving multiple streams [2]. In practice, the inherent evolution of trend over multiple streams are often correlated (e.g., temperatures in t he same building, traces in the same road net-work, stock prices in the same market, etc) . Thus, it is possible to detect the anomaly from hundreds of streams by using such inherent correlation. First of all, we illustrate our motivation with two real examples.
 Stock Market. Figure 1(a) shows a part of constituent stock streams of Heng Seng Index (Hong Kong) in one year. It exhibits a clear trend (upward movement) in a long-term period. Although in a short-term time scale, there are lots of fluctuations, the prices of mass of stocks generally follow a similar moving direction such as bull market in a long time scale (e.g., quarters or years). H owever, because of the mechanism of insider trading, it changes the nature balance of r andom oscillatory, such factor changes the price trend of one stock which will present a significant different characteristic of evo-lution. As shown in Figure 1(a), the Northeast Electrical stock stream shows an obvious opposite moving direction compare with others over T 1 time interval. In practice, de-tecting such abnormal stream will provide the speculators a well opportunity to make a profit, or for supervisors a well monitoring of the market status.
 Telecom. Consider a few number of SNMP streams collected from telecom backbone network ( Figure 1(b) shows 7 days of 4 streams ). Under normal situation, the network traffics ( in terms of flows, packets or byte counts ) follow a similar evolution of trend periodically, for example, at midnight the amount of flow gets down to the valley and in the morning the traffic volume begins to rise and gets its peak around 3:00 pm, then trend begins to move downward again. Although there are some short-term fluctuations, the main evolution of trend exhibits this regular pattern day by day. Assume during an abnormal period T 2 , some malfunctions occur in link 3 , the pattern of evolution will be broken up and exhibit a totally different feature of trend. During such kind of periods, our mission is to detect the link whose evolution of trend is significant different from others as soon as possible.
The main challenge of above problems lies in three aspects: (i) How to define the trend, it is easy to inspect visually, but quantify trend is non-trivial task, moreover, the definition must easy to be calculated in stream setting with restricted resource. (ii) How to select the optimal time scale, actually, it X  X  a balance between sensitivity and accuracy. (iii) How to monitor the status over multiple data streams efficiently, not only focus on volume but also distribution.

In this paper, we present a method to resolve above challenges. Our main contribu-tions are:  X  We p r o v i d e a SWAD named definition of trend, it will be calculated under constant  X  We improve a SVD (singular value decom position) based offline period initial- X  A strategy to label the abnormal periods based on the skewness is also briefly The paper is organized as follows: after introducing the related work in Section 2. We give our definition of trend and accuracy criterion in section 3. Then we illustrate our approach to choose optimal parameters in Section 4. Section 5 briefly introduce the strategy to label the abnormal period. Finally, we evaluate our algorithms on a variety of real datasets in section 6 and conclude in section 7 . Trend analysis has a long history in time series analysis field. There is extensive litera-ture in the statistics community regarding trend analysis [1], as well as in the database community [4]. Generally, a time series can be decomposed into trend, seasonal, peri-odic, and irregular fluctuation components. Th e traditional solution for this problem is to fitting a trendline [8] which is widely used by regression analysis. However, it X  X  not fit for the case of data stream, for one thing, due to there are various of fitting functions such as linear, logarithmic, power, exponential or polynomial, without prior knowledge, the selection of appropriate function is a nontrivial task, for another, the drawback of trendline-fitting technique is its high complexity, even in the simplest case, the com-plexity of linear regression is also O( n lo g n ) [4] which is also unacceptable by the stream setting.

The work of anomaly detection on data str eam has received much attention in recent years and can be loosely classified in two categories: single-stream and multiple-stream. Zhou et al. [5] presented a fractal based met hod to monitor aggregates and detect burst with multi-granularity windows over a single data stream. The authors of [6] provide a method to detect approximate top-k subspace anomalies in multi-dimensional time-series data. However, these methods were too sensitive to the fluctuations and focused on the outliers in single stream or burst over multiple data streams. Spiros et al. [2] intro-duced SPIRIT which was a streaming pattern discovery method in multiple time series data streams. It can incrementally detect ch anges and trends based on correlations.
However, none of above methods simultaneously satisfy the requirement in our in-troduction:  X  X treaming operation, scalability on the number of streams, evolution of trend analysis and abnormal detection X . Our method monitors the evolution of trend over multiple data streams with low cost without any predefined models. In order to trace trend in data stream, we have to define what is a trend . Problem 1. Given a time series data stream, how to find an appropriate trend indica-tor that can trace the evolution of trend and a n accuracy evaluation criterion among different trend indicators.
In order to describe our definition of trend smoothly, we take the stock data stream of Boeing Inc for example. Figure 2a shows the close price, it is plotted as the stair line. The periods A and C and periods B and D respectively represent the upward and downward trend cursorily. A careful study reveals the following observations: Observation 1. In the sliding window model, the average of long sliding window changes smoothly compared to the average of short sliding window. Generally speak-ing, the shorter of sliding window X  X  length, the faster moves of the window X  X  average. Through calculating the divergence between two different sliding windows X  averages, we can trace the evolution of trend. A positive difference indicates the short sliding window average is larger than the long wi ndow average, it means most recent points are larger than the older ones, the evolution of trend is in an upward movement and vice verse. If the difference enlarges, th e gap between the two averages is widening, it indicates the upward trend is being strengthened. According to above analysis, we propose our SWAD trend in Definition 1.
 Definition 1 (SWAD Trend). Suppose there is a data stream and two different length sliding windows  X  ,  X  , respectively represent the short and long period, and averages of such windows at time t is swa  X ,t and swa  X ,t , then our SWAD (sliding window average difference) trend is defined as SWAD t = swa  X ,t -swa  X ,t ; Example. Figure 2 gives an example to illustrate our SWAD trend definition. For conve-nience, the parameters 12/26 (short/long) are used for explanation. In Figure 2a, 12-unit time sliding window average ( swa 1 2 ) with the 26-unit time sliding window average ( swa 2 6 ) overlaid the stream plot. The short sliding window average ( swa 1 2 ) moves faster and fluctuates larger than the long sliding window average ( swa 2 6 ), the swa 2 6 is relatively more smooth. Generally speaking, an upward trend occurs when swa 1 2 moves above the line swa 2 6 ( A time interval) and a down ward trend occurs when swa 1 2 moves below the swa 2 6 ( B time interval). The divergence of two sliding windows X  aver-ages make up the SWAD histogram in Figure 2b. The histogram is positive when swa 1 2 is above swa 2 6 , that means an upward trend and vice versa.
 Ground Truth. As mentioned in Section 2, there are various trend definition in time series analysis, even if for our SWAD trend, through tuning the parameters, we can get different judgement of the trend status, thus some ground truth as criterion is needed to evaluate those accuracy. Our design idea is based on the intuition that if a trader in a bull (upward trend) market, he will make a profit, the more he earns, the more accurate of his trend tracing method and vice versa. Although this assumption is derived from finance domain, it is easy extended to other field. Thus, we provide our Trend Accuracy Score named criterion in Definition 2.
 Definition 2 (Trend Accuracy Score). Suppose there is a data stream &lt;x 1 ,x 2 ... ,x n &gt; with the stream advances, we will update m and s at each time stamp t according to following equation:  X   X   X  The Trend Accuracy Score G at time t is calculated as G t = m t + s t  X  x t ; The example of Trend Gain Score is that, suppose in the stock stream scenario, an investor is assigned 1$( m 0 ) initial fund. His operation strategy is that he will use all the money ( m ) to buy the stock ( s ) when the trend ( T )presents upward beginning or sell all his stocks when the trend changes to downwar d. If the trend does not change direction, he will hold the current stock and money without operation. Eventually, we use the final gain (sell all stocks plus money) as the score of his trend tracing method. With the optimal short and long sliding windows length (parameters  X  ,  X  in Defini-tion 1), we could calculate the SWAD trend easily. However, in practice, we have no idea of the proper length of sliding windows beforehand. Thus, we have to resolve fol-lowing problem: Problem 2. Given a data stream, and a set of windows w i = w 1 ,w 2 , .. w n .Howtofind the optimal short and long windows w s and w l from those in order to make sure they can describe two representative time peri ods and get high Trend Accuracy Score when calculating SWAD. 4.1 Parameter Initialization Note that from the view of signal processing, the short and long sliding windows re-spectively represent the main low-frequency and high-frequency periods. They can be used to separate low and high frequency components from the signal. Then, the need of choosing optimal window size transforms t o the requirement of selecting proper fre-quency. Our solution is based on following observations.
 Observation 2. If there is a trend pattern and it repeats in a period of T , then differ-ent non-overlapping subsequences of the stream should be highly correlated when the length of time interval is w  X  T .
 According to Observation 2, an SVD-based algorithm is designed for optimal time period exploration. The basic step in Algorithm 1 is that firstly according to each window length w , the stream is cut into non-overlapping windows to build a matrix M w (lines 2), then use the standard SVD algorithm [3] to obtain the top k singular values  X  i ,i =1 , 2 , ... k (lines 3) of M w . The sum of squares of discarded singular values  X  j ,j = k +1 , ... w consist of err ( w ) sequence corresponding to every window w (lines 4).
 Algorithm 1. InitialPara()
Then, we choose two appropriate windows th at best capture the main periods accord-and ignore all other drops occurring at windows c  X  w s ,c = 2 , 3 ... that are approxi-mately multiples of w s . In the same way, choose the second window w l that exhibits a sharp drop to be the long sliding window length. If there are several sharp drops in err ( w ) . We simply choose two smallest ones as the SWAD parameters.
 Example. Although the time series stream can be ar bitrary, we illustrate our idea with a signal x = s in( 2  X t/ 50) + s in( 2  X t/ 4 0) for example in Figure 3a. It composes of two sine waves whose frequency components are at 20Hz and 25Hz respectively.

In Figure 3b, we plot the err ( w ) line, as expected, the line drops sharply at 20 and 25 (unit window length) which essentially corresponds to the potential frequencies of the original signal. In addition, the 40 and 50 unit window length sharp drops are also from the 20Hz and 25Hz series respectively. 4.2 Parameter Adjusting In practice, the stream does not always exhibit stable feature (eg. constant period), such as the financial stream, it is one kind of typical unstable signal, the periods change with time lapse. Thus, how to adjust the SWAD calculation parameters dynamically is a new challenge. For this purpose, we propose a chessboard named sketch for adjusting parameters dynamically. As shown in the left of Figure 4, in our sketch, the short-axis and long-axis respectively denote the length of short and long sliding windows. Every positive integer point in this coordinate system represents a pair of input parameters for SWAD calculation.

The background data structure to support our sketch is a quadtree which can be used to efficiently index regions in a grid. It has been used successfully in image coding and has the benefit of small overhead and very efficient construction [7]. The main idea has been illustrated in Algorithm 2. It maintai ns Trend Accuracy Score (introduced in Sec-tion 3) of candidate points and updates the qua dtree if a more superior point is detected in order to make sure the root has the largest accuracy score. When calculating the trend at t , the SWAD procedure will pick up the root as the iuput. A simple update example is illustrated in Figure 4, at time t 0 , point O is labelled as the optimal parameter, while at t 1 , it is replaced by A 1 , due to the trend accuracy score of A 1 is larger than O . Algorithm 2. AdjustPara( x t ,C,S )
Note that in order to reduce the maintain cost and improve the performance, some heuristic pruning strategies have been designed to label the high probability region. For instance, we can use the information from the offline result, it can give some com-mendatory region where the optimal parameter may appear with high probability.  X  Line Pruning: According to Definition 1, the lowe r triangular region of the chess- X  Concentric Circle Pruning: The points nearby the current using parameters will In this section, we have a shift of focus from single stream and volume-based analysis to multiple streams and distribution-based dia gnosis. Based on the preparation of previous sections, the next problem to be resolved is: Problem 3. When and How to find the abnormal stream whose character of trend is significantly different from others? The problem of trend anomaly detection is to find the stream that is not similar to the majority in the collection. The two important issues of this problem is when to detect the anomaly and which one is abnormal. Through the observation of stream evolution, we discover the abnormal grade is correlated with the asymmetry degree of the distribu-tion. In a lopsided distribution (such as obviously bull trend in stock market or upward trend in telecom). The mass of the streams a re concentrated on a coherent trend direc-tion, there are a few streams in a downward trend movement, thus it is an appropriate period to pick up the abnormal ones. In statistics theory, skewness is used as a mea-sure of the asymmetry of variable distribution. It denotes as  X  and has been defined as  X  =  X  3  X  3 ,where  X  3 is the third moment about the mean and  X  is the standard deviation.
Our approach uses skewness to label the abnormal period, meanwhile returns the mi-nority according to the degree of skewness. Th e symmetry of trend distribution means the streams are approximate to a random distribution, the count of anomaly is small, while asymmetry of trend distribution indicates the trend evolve to one direction, then the number of abnormal ones is larger than the symmetry stage, hence it is an appropri-ate period to detect the anomaly. In this section, we implement experiment s on real dataset to demonstrate the effec-tiveness and efficiency of our approach in trend tracing and abnormal detection. We compare our method with two widely use d trend chasing methods. They are piece-wise polynomials trendline (TrendLine) [8] and stream linear regression (LRTrend) [9]. TrendLine is a software package for fitting trendline. LRTrend is a multi-dimensional linear regression analysis method for time-series data stream [9].

We employ three groups of real datasets in different domains for evaluating our al-gorithms. A brief description is provided in Table 1. The experiments are conducted on an Intel Pentium IV 3.0 GHZ CPU with 1 GB RAM and the experiment environment is windows XP Professional and matlab v7R14. 6.1 SWAD Accuracy and Efficiency In Figure 5(a), we illustrate four representative stock streams on the X-axis and use the Trend Accuracy Score (Definition 2) as the criterion illustrated on the Y-axis. As the same, in Figure 5(b), we sample four telecom SNMP streams from the backbone network and the length of each stream is re spectively week, month, quarter and year. It is clear that in each case, the accuracy of our method is better than other competitors. Furthermore, the superiority of our method is relatively more pronounced in the case of the telecom stream than fin ancial stream. This is because the financial stream has insignificant period, moreover the characteristic of period is also unstable.
Figure 5(c) presents the wall-clock time and space cost of our Matlab implementation for each algorithm on the sensor network data set. The result shows that the efficiency of our SWAD method is obviously superior to others. It is because, SWAD only needs to examine the new incoming point, thus it has almost scalable time cost and constant memory need with the streams advance. While, the TrendLine and LRTrend require scanning the points sequentially and buffering points in order to adjust the parameters, thus the performance of two methods decrease rapidly when more stream data come. 6.2 Period Analysis Offline and Online Figure 6(a) shows the result of SVD-based period analysis method in telecom data stream. The result shows that it has significant multiple periods such as 3 hours (36 points) , 6 hours (72 points) , 8 hours (96 points) , 12 hours (144 points). We will use 36 and 96 as the short and long sliding windows in the SWAD calculation. The 72 and 144 are integer multiples of 36, thus they can be interpreted as from the same period.
As the same, Figure 6(b) shows the finance stream result, we can see that the error line of Dow Jones Index shows decline at windows 12 and 20. The result of part of sensor network analysis is shown as 32 and 91 in Figure 6(c).

Then, we compare our adaptable, streaming and chesssboard -based approach against the constant parameter method in Figure 7(a). From the result, we can see our dynamic method achieves near 5% -10% accuracy improve ment. In order to test the effectiveness of two pruning method, we illustrate the resul t in Figure 7(b)-7(c) through tuning the radius and angle of pruning lines. The result is consistent with the intuition, the larger angel and radius, the more accuracy of trend tracing. 6.3 Anomaly Detection Our approach find out anomaly streams in different time intervals . Professional domain experts examine the result and judge whether they are meaningful alarms or just false alarms. The result shows that our skewness-based method performs accurate and stable. Figure 8(a)-8(b) illustrate parts of result over Heng Seng and Dow Jones data sets and Figure 8(c) shows the average count of anomalies per day over telecom data set. In this paper, we focus on the problem of trend tracing in single stream and anomaly detection over multiple data streams. We define trend as the difference between two sliding windows averages, then extend the SVD approach and provide a chessboard named sketch in order to support the parame ter initialization and dynamic adjustment in the calculating process. We also briefly discussed how to incorporate skewness into the anomaly detection. Finally, we conduct extensive experiments on a variety of real world data sets to show the efficiency a nd effectiveness of our approach.

