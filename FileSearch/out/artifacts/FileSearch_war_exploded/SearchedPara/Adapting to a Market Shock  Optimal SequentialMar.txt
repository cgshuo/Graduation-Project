 Designing markets to achieve certain goals is gaining renewed importance with the prevalence of many novel markets, ranging from prediction markets [13] to markets for e-services [11]. These markets tend to be thin (illiquid) when they first appear. Similarly, when a market shock occurs to the value of an instrument on a financial exchange, thousands of speculative traders suddenly possess new valuations on the basis of which they would like to trade. Periods of uncertainty, like This is a chicken-and-egg problem. People do not want to trade in thin markets, and yet, having many people trading is what creates liquidity. These markets therefore need to be bootstrapped through market-makers [12]. Market-makers are responsible for providing liquidity and maintaining order on the exchange. For example, the NYSE designates a single monopolist specialist (market-maker) for each stock, while the NASDAQ allows multiple market-makers to compete.
 There has been much debate on whether one of these models is better than the other. This debate gle monopolistic market-maker or multiple competitive market-makers? Alternatively, should the market-maker be based on some other criterion, and if so, what is the optimal design for this agent? Market makers want to maximize profit, which could run contrary to their  X  X ocial responsibility X  of providing liquidity. A monopolist market maker attempts to maximize expected discounted prof-its, while competitive (non-colluding) market makers may only expect zero profit, since any profits should be wiped out by competition. Therefore, one would expect markets with competitive market-makers to be of better quality. However, this has not been observed in practice, especially in the well-studied case of the NASDAQ vs. the NYSE [1, 9]. Many explanations have been proposed in the empirical literature, and have explained parts of this phenomenon. One reason that has been speculated about anecdotally but never analyzed formally is the learning aspect of the problem. For example, the NYSE X  X  promotional literature used to tout the benefits of a monopolist for  X  X aintain-ing a fair and orderly market X  in the face of market shocks [6].
 The main challenge to formally analyzing this question is the complexity of the monopolistic market maker X  X  sequential decision problem. The market maker, when setting bid and ask prices, is plagued by a heavily path dependent exploitation-exploration dilema. There is a tradeoff between setting the prices to extract maximum profit from the next trade versus setting the prices to get as much There is no known solution to this sequential decision problem.
 We present the first such solution within an established model of market making. We show the market shock than does a zero-profit competitive market maker. In various single period settings, it has been shown that monopolists can sometimes provide greater liquidity [6] by averaging expected in order to learn the new valuation more quickly. 1.1 Market Microstructure Background Market microstructure has recently received much attention from a computational perspective [10, trading in a market where different people have different beliefs about its value. An example is shares in the  X  X arack Obama wins the presidential election X  market. These shares should trade at the price of a stock should reflect the aggregate public belief about future cash flows associated with a company. It is well-known that markets are good at aggregating information into prices, properties of dealer markets, in which prices are set by one or more market-makers responsible for providing liquidity by taking one side of every trade.
 for example], but only recently has the dynamic multi-period problem gained attention [2, 3]. Since we are interested in the problem of how a market-maker learns a value for an asset, we follow the general model of Glosten and Milgrom which abstracts away from the problem of quantities by restricting attention to situations where the market-maker places bid and ask quotes for one unit of the asset at each time step. Das [3] has extended this model to consider the market-maker X  X  learning problem with competitive pricing, while Darley et al [2] have used similar modeling for simulations of the NASDAQ. The Glosten and Milgrom model has become a standard model in this area. the depth of the limit order book. In our models, we measure liquidity using the bid-ask spread , informational heterogeneity in the market, and of execution costs. The dynamic behavior of the spread gives insight into the price discovery process. 1.2 Our Contribution We consider the question of optimal sequential price-setting in the Glosten-Milgrom model. The market-maker sets bid and ask prices at each trading period 1 and when a trader arrives she has the is a single-period decision-making problem with online belief updates. Within this same framework, one can formulate the decision problem for a monopolist market-maker who maximizes her total discounted profit as a reinforcement learning problem. The market maker X  X  state is her belief about the instrument value, and her action is to set bid and ask prices. The market maker X  X  actions must trade off profit taking (exploitation) with price discovery (exploration). The complexity of the sequential problem arises from the complexity of the state space and the fact that the action space is continuous. The state of the market-maker must represent her belief about setting, the state space is finite dimensional, but continuous. Even if we assume a Gaussian prior quickly become a complex product of error functions, and the exact dynamic programming problem becomes intractable.
 We solve the Bellman equation for the optimal sequential market maker within the framework of Gaussian state space evolution, a close approximation to the true state space evolution. We present simulation results which testify to how closely the Gaussian framework approximates the true evolu-ment learning in continuous action and state spaces. 2 However within our setting, we prove a key monotonicity property for the state update. This property allows us to solve for the value function exactly using a single pass dynamic program.
 Thus, our first contribution is a complete solution to the optimal sequential market making problem implications for market behavior. We obtain the surprising result that in periods of extreme shock, when the market maker has large uncertainty relative to the traders, the monopolist provides greater liquidity than competitive zero-profit market-makers. The monopolist increases liquidity, possibly taking short term losses, in order to learn more quickly, and in doing so offers the better social outcome. Of course, once the monopolist has adapted to the shock, she equilibrates at a higher bid ask spread than the the corresponding zero-profit market maker with the same beliefs. 2.1 Market Model At time 0 , a shock occurs causing an instrument to attain value V which will be held fixed through time (we consider one instrument in the market). This could represent a real market shock to a stock We use a model similar to Das X  X  [3] extension of the Glosten and Milgrom [7] model. We assume that trading is divided into a sequence of discrete trading time steps, each time step corresponding to the arrival of a trader. The value V is drawn from some distribution g V ( v ) .
 The market-maker ( MM ), at each time step t  X  0 , sets bid and ask prices b t  X  a t at which she is a noisy estimate w t of V , where w t = V + t . The { t } are zero mean i.i.d. random variables with the instrument is overvalued) and do nothing otherwise. MM receives a signal x t  X  { +1 , 0 ,  X  1 } indicating whether the trader bought, did nothing or sold. Note that information is conveyed only by the present work abstracts away from those considerations.
 The market-maker X  X  objective is to maximize profit. In perfect competition, the MM is pushed to setting bid and ask prices that yield zero expected profit. In a monopolistic setting, she wants to solve. A commonly used alternative is to consider a greedy, or myopically optimal MM who only maximizes her expected profit from the next trade. This is a good approximation for agents with a high discount factor, since they are more concerned with immediate reward. We will consider all three types of market-makers, (1) Zero-profit, (2) Myopic, and (3) Optimal. 2.2 State Space The state space for the MM is determined by MM X  X  belief about the value V , described by a density MM receives signal x t  X  X  +1 , 0 ,  X  1 } as to whether the trader bought, sold, or did nothing. V . Assuming that F is continuous at b t  X  V and a t  X  V , a straightforward calculation yields p 2.3 Solving for Market Maker Prices P r true, a competing MM could place bid or ask prices so as to obtain less profit, wiping out MM  X  X  advantage. This should hold at every time step. Hence the MM will set bid and ask prices such that r t ( b t ) = 0 and r fixed point equations (these are also derived for the case of Gaussian noise by Das [3]), b = (assuming the denominators, which are the conditional probabilities of hitting the bid or ask are non-zero). The myopic monopolist maximizes r t . For the typical case of well behaved distributions p ( v ) and F , the bid and ask returns display a single maximum. In this case, we can obtain b myp t and a myp t by setting the derivatives to zero (we assume the functions are well behaved so that the a t satisfy the fixed point equations b The optimal strategy for MM is not as easy to obtain. When  X  is large, the expected discounted return R could be significantly higher than the myopic return. The optimal MM might choose to do this is if choosing a sub-optimal short term strategy will lead to a significant decrease in the then exploit this more certain information regarding V in the longer term.
 The optimal strategy for the MM is encapsulated in the Bellman equation for the value functional (where the state p t , is a function , ( b t ,a t ) is the action, and  X  is a policy): This equation reflects the fact that the MM X  X  expected profit is a function of both her immediate V is a value functional leads to numerous technical problems when solving this Bellman equation. The problem is heavily path dependent with the number of paths being exponential in the number of trading periods. To make this tractable, we use a Gaussian approximation for the state space evolution. Figure 1: Gaussian state update (dashed) versus true state update (solid) illustrating that the Gaus-sian approximation is valid.
 2.4 The Gaussian Approximation will be closely approximated by a Gaussian (see Figure 1). Thus, forcing the MM to maintain a space evolution, and the resulting optimal actions should closely match the true optimal actions. In making this reduction, we reduce the state space to a two parameter function class parameterized by  X  ), and the optimal action is of the form b t =  X  t  X   X  t ,a t =  X  t +  X  t . Thus, To compute the expectation on the RHS, we need the probabilistic dynamics in the (approximate) Gaussian state space, i.e., we need the evolution of  X  t , X  t .
 Let N (  X  ) ,  X (  X  ) denote the standard normal density and distribution. Let p t ( v ) = 1  X  so F ( x ) =  X ( x  X  ) . At time t + 1 , after the Bayesian update, we have E supplementary information), we obtain Figure 2 gives the expressions for A,B,C .
 Theorem 2.1 (Monotonic state update) .  X  2 t +1  X   X  2 t (see supplementary information for proof). the property of decreasing variance is well-known for the case of an update to a Gaussian prior when the observation is also Gaussian  X  we are showing this for threshold observations). 2.5 Solving the Bellman Equation We now return to the Bellman equation (1). In light of Theorem 2.1, the RHS of this equation is dependent only on states  X  t +1 that are strictly smaller than the state  X  t on the LHS. We can thus solve this problem numerically by computing V (0) and then building up the solution for a fine grid on the real line. We use linear interpolation between previously computed points if the variance update leads to a point not on the grid.
 We need to explicitly construct the states on the RHS with respect to which the expectation is being b =  X  t  X   X  t . The following table sumarizes some of the useful quantities: +1 1  X   X ( q t )  X  t +  X  t  X  t  X  t  X  t 0 2 X ( q t )  X  1  X  t  X  t  X  t  X  1 1  X   X ( q t )  X  t  X   X  t  X  t  X  t  X  t is the MM X  X  information disadvantage) where  X  2 ( x,q ) and  X  2 ( x,q ) are as defined above with  X  2 t = x and q t = q .
 q assumption, obtained by setting r t = 0 , yielding the fixed point equation: q zero =  X  2 t 1+  X  2 10 standard fixed point iterations are sufficient to solve these equations accurately. First, we validate the Gaussian approximation by simulating a market as follows. The initial value V is drawn from a Gaussian with mean 0 and standard deviation  X  , and we set the discount rate  X  = 0 . 9 . Each simulation consists of 100 trading periods at which point discounted returns become with mean V and variance 1). We report results averaged over more than 10,000 simulations, each with a randomly sampled value of V .
 In each simulation, the market-maker X  X  state updates are given by the Gaussian approximation (2), (3), according to which she sets bid and ask prices. The trader at time-step t trades by comparing w t to b t ,a t . We simulate the outcomes of the optimal, myopic, and zero-profit MMs. An alternative (a) Realized vs theoretical value function in the Gaussian ap-proximation (thin black line).
 The realized closely matches the theoretical, validating the Gaussian framework. is to maintain the exact state as a product of error functions, and extract the mean and variance for computing the optimal action. This is computationally prohibitive, and leads to no significant differences. If the real world conformed to the MM X  X  belief, a new value V t would be drawn from to which the Gaussian and real worlds differ.
 However, if we find that the theoretical value function for the optimal MM in the Gaussian world matches the realized value function in the real world, then we have strong, though not necessarily conclusive, evidence for two conclusions: (1) The Gaussian world is a good approximation to the real world, otherwise the realized and theoretical value functions would not coincide; (2) Since the two worlds are nearly the same, the optimal MM in the Gaussian world should closely match the true optimal. Figure 3(a) presents results which show that the realized and theoretical value func-tions are essentially the same, presenting the desired evidence (note that with independent updates, the posterior should be asymptotically Gaussian). Figure 3(a) also demonstrates that the optimal significantly outperforms the myopic market-maker. Figure 3(b) shows how the bid-ask spread will behave as a function of the MM information disadvantage.
 Some phenomenological properties of the market are shown in Figure 4. 3 For a starting MM in-formation disadvantage of  X  = 3 , the optimal MM initially has significantly lower spread, even compared with the zero profit market-maker. The reason for this outcome is illustrated in Figure 3(c) where we see that the optimal market maker is offering lower spreads and taking on significant the optimal MM X  X  spread and the myopic spread are equal, as expected. Our solution to the Bellman equation for the optimal monopolistic MM leads to the striking conclu-sion that the optimal MM is willing to take early losses by offering lower spreads in order to make MM offers more liquidity than a zero-profit MM after a market shock, especially when the MM is Competition may actually impede the price discovery process, since the market makers would have informationally efficient (there are quicker ways for the market to  X  X earn X  a new valuation). (a) Realized spread over time (  X  = 3 ). The optimal MM starts with lowest spread, and converges quickest to equilib-rium. Our solution is based on reducing a functional state space to a finite-dimensional one in which the Bellman equation can be solved efficiently. When the state is a probability distribution, updated according to independent events, we expect the Gaussian approximation to closely match the real state evolution. Hence, our methods may be generally applicable to problems of this form. While this paper presents a stylized model, simple trading models have been shown to produce rich market behavior in many cases (for example, [5]). The results presented here are an example of the kinds of insights that can be be gained from studying market properties in these models while approaching agent decision problems from the perspective of machine learning. At the same time, this paper is not purely theoretical. The eventual algorithm we present is easy to implement, and we pursuing is to endow the traders with intelligence, so they may learn the true value too. We believe the Gaussian approximation admits a solution for a monopolistic market-maker and adaptive traders.
