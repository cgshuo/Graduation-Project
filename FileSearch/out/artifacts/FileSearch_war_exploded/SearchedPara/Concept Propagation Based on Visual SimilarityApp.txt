 Automatic image annotation is still a very difficult task. Achieving reliable au-tomatic annotation is even more difficult when the resulting annotations are to be used for information retrieval purposes. The information retrieval task is highly semantic: it consists of finding a document which content matches the user information need specified most of the time at an abstract level. In the case of medical domain, the task can be to find similar cases of a patient in order to find some similar way to cure a disease. This level of abstraction is difficult to reach because of the so-called  X  X emantic gap X  between meaning and signal.
In some cases, the assumption that visual similarity implies (partial) seman-tic similarity can be made. Assuming we have a collection of images with free text annotations, the goal is to transfer some image annotations to images that are visually similar. Compared to other approaches found in the literature, the proposed approach makes use of a priori knowledge in order to select the anno-tations which are strongly characterized by the visual appearance. This paper presents some results on concept propagat ion using a medical database of images associated with text.

We propose an approach composed of three main phases: conceptual text in-dexing , visual indexing ,and concept propagation . A graphical representation of the processing flow can be found in Fig. 1. The input of the process is a set of images coupled with textual documents. The role of conceptual text indexing is to extract concepts from the annotations (1). Visual indexing (2) computes the similarity between pair-wise images of the collection. Annotation propagation (3) uses the results of (1) and (2) to produce new annotations.

This paper is structured as following. Section 2 gives an overview of the state of the art of annotation propagation. Section 3 explains the conceptual index-ing process of textual annotations. Section 4 shows how visual indexing leads to a similarity matrix of the images contained in the collection. Section 5 details the principles of concept propagation. Section 6 details results obtained on Im-ageCLEFmed [1] collection. Section 7 concludes this paper and presents future research directions. As explained in [2], two categories of approaches are usually used for dealing with the automatic image annotation problem. The first one poses the automatic image annotation problem as a supervised learning problem. In this case, classes are defined a priori and annotations and images are considered separately. A set of manually annotated samples is then used to train a set of classifiers. Image annotation is finally performed by using the resulting classifiers. This type of approach has been used in [3] and in [4]. The second category of approaches consists of a joint modelling of the statistical links between textual annotations and image features. The process of annotation propagation is then modeled as statistical inference . An example of such work can be found in [2] and [5].
The novelty of the approach proposed in this paper is that the semantic prop-agation is performed at a conceptual level whereas most other works stay at a text level. This means that propagation is not based on textual annotations but on a conceptual representation derived from the textual annotations. Prop-agating annotations at a conceptual level enables to solve ambiguity problems when a given image is inconsistently annotated. It is also the only way to apply a semantic control of propagated annotations. In this paper, we will show that this control is crucial to ensure positive benefit of propagation. Conventional text Information Retrieval (IR) approaches extract words or terms from text and use them directly for indexing. Despite staying at the text  X  X ignal X  level (syntactic) and the simplicity of word extraction, this method is most of the time effective enough to be used in various applications including web search. This success is probably due to the relatively higher semantic level of text com-pared to other media. Despite this fact, we think that rising up one more step in abstraction should produce better index and should offer more control like semantic filtering for automatic annotation propagation.

Conceptual text indexing consists of associating a set of concepts to a doc-ument and using it as index. Conceptual indexing naturally solves the term mismatch problem described in [6], and the multilingual problem.

In this paper, we focus on concept propagation for completing missing infor-mation in a restricted domain (medical), and we use a large dedicated concept set: UMLS 1 provided by the National Library of Medicine (NLM). For concept extraction, we uses MetaMap [7] provided by NLM. This tool associates part of speech to input text to detect noun phrases. One of the difficulties in concept finding relies on term variation. Even a large meta-thesaurus like UMLS cannot cover all possible term variations. MetaMap computes a large set of possible variation and try to match the largest best combination to an UMLS entry. Af-ter concept extraction, we use the classical vector space model for indexing and matching. The visual indexing process is based on patch extraction on all the images of the collection followed by feature extraction on the resulting patches. Let I be the set of the N images in the document collection. First, each image i  X  I is split into n p patches { p k i } 1  X  k  X  n p . Patch extraction on the whole collection results in n p  X  N patches. Fig. 2 shows the result of patch extraction for one image.

For a patch p k i , the numerical feature vector extracted from p k i is noted fe ( p k i )  X  X  n . The low-level features extracted on patches are RGB histograms. 32 bins are considered for each color component. This implies that the numerical vector extracted for one patch is of dimension 96.
The visual similarity between two images i and j ,  X  I ( i, j ), is computed as the average of pairwise L 2 distances between feature vectors extracted from patches.
Our goal is, for any image i of the collection, to evaluate its visual similarity to all the other images j of the collection. Since  X  I ( i, j )=  X  I ( j, i )andthat  X  ( i, i ) = 0, the number of distances to compute is ( N 2 / 2)  X  N .  X  I can be seen as disimilarity matrix. For our experiments, we have chosen L 2 as the Euclidian distance. Concept propagation is based on the following hypothesis: two images that are visually similar share some common semantics. Indexing documents at a concep-tual level enables to control the meaning of the propagation. Our model consists of a set of textual documents D , and a set of associated images I indexed by a set of concepts  X  ( d )= { c i } . Each image in I is associated with at least one document in D . The image set I is projected into a space from which we only know a distance function  X  I between any image pair  X  I ( i 1 ,i 2 )from I  X  I .The distance  X  is related to a visual similarity. Each document d is connected to any other document through the image space. This produces a new function  X  D between two documents. Among possible choices for the building of  X  D , for our purpose, as our emphasis is the visual similarity, we propose to define  X  D ( d i ,d j ) as the minimum distance  X  I between the set of images associated to d i and the set associated to d j . As each document is associated to a set of concepts, concept propagation consists of transferring concepts from a source document d i to a target set of document  X  ( d i ) based on function  X  D ( d i ,d j ). We define the target function  X  ( d ) that selects a target set of documents and  X  k ( d i )asthe k Nearest Neighbors of d i according to  X  D . Finally, concept propagation P on document d is performed by producing a new concept set  X  1 ( d ) from the original one  X  0 ( d ): Propagation P can be performed several times to obtain a final indexing  X  n after n iterations. As our method is based on semantic indexing terms categories, we need an indexing method that enables filtering on semantic categories. We have chosen the Medical CLEF [1] test collection because documents of this collection are medical cases associating medical images and multi-lingual texts with a set of test queries.

We use UMLS meta-thesaurus which is structured as a semantic network composed of semantic types and of semantic groups . Here are some examples of semantic groups: Living Beings (LIVB), Diagnostic Procedures (PROC), Disor-ders (DISO), Anatomy (ANAT).
 Fig. 3 shows the percentage of presence of a semantic group in the collection CasImage (left). Five main semantic groups appear in every document (Pro-cedure, Living Beings, Disorders, Concepts &amp; Ideas, Anatomy). The need for propagation of annotation is then rather low because this collection is already well annotated. The right side of Fig. 3 shows a much different repartition of the semantic groups. Only Anatomy is present in 95% of the documents. The goal of the propagation is to try to fill remaining 5% left. This task is rather diffi-cult. The information on procedure, which includes the modality of the image, is much lower: Less that 30% of image have this information. Query distribution is different and emphasis Disorders, Procedures, Concepts and Anatomy. Our experimentations are focused on these semantic groups: due to the query dis-tribution, we get more chance to measure a noticeable change when computing mean average precision using this query set. For testing concept propagation, we set up an indexing baseline (Fig. 4 and Fig. 5). We use the Log for term fre-quency weighting, inverse document fre quency and cosine for matching distance. For this baseline, we obtain a mean average precision 2 of 0 . 1307.
We have tested different propagation P with different k for the target function  X  . The influence of k value is difficult to interpret because of its instability. We have experimentally fixed k = 10. The full propagation (noted FULL in Fig 4) just transfers every concept. Propagation using semantic group authorizes con-cept transfers only if no concept from this group exists in the target document. A more precise filtering (noted ST ANAT and ST PROC)performsatthese-mantic type level: in this case, only concepts of the semantic group are used. Concepts of this group are transferre d only if no concept of the same semantic type is found in the target document.

Figure 4 shows propagation results for few semantic groups. The left figure shows the results for the first propagation, the right figure after 4 propagations. These results show a clear difference between this simple semantic filtering and no filtering: performing semantic filtering is always better than transferring all index information.

In order to examine closely the effect of propagation, we have degraded the original MetaMap indexing, by randomly deleting a given percentage of concepts belonging to the ANAT semantic groups. The goal is then to recover the lost information by the propagation mechanism described in section 5. Figure 5 shows results from 0% to 95% of anatomical concepts degradation. The MAP of the baseline also decreases when more degradation occurs. In Fig 5 we can see the evolution of the MAP for the baseline and ANAT and ST ANAT extension when degradation percentage is increasing. The same k = 10 is chosen and the results are computed after 4 expansions (  X  4 concepts set). Although we are not enable to fully recover removed information, we can notice that 5% of information lost affect the baseline but not really the extended version (for ANAT expansion only). Moreover, from 5% to 70% of information lost, our concept propagation always performs better than the baseline. From our point of view, this result clearly demonstrates the benefits on using a conceptual indexing and performing semantically controlled concepts propagation. If a large amount of information is lost (80% to 95%), no improvement is measured. Indexing for Information retrieval consists of associating annotations to docu-ments to facilitate their access. User needs are usually highly semantic, and low level indexing (at signal level), is not precise enough to solve precise queries because of the well known semantic gap. To bridge this gap, we see no other possibilities than providing the system knowledge it needs to  X  X nderstand X  user queries. Unfortunately, collecting valuable knowledge at large scale is a huge task, and the way this knowledge can be used in IR is not that clear. In sub do-main like medicine, where large valuable knowledge set like UMLS is nowadays available, conceptual indexing opens new opportunities. This paper has shown that conceptual indexing enables inter-media information exchanges. Even, if this work is at its beginning, we have shown the clear benefit of concept index-ing and propagation using visual similarity, mainly in the case of low ratio of index completeness (by simulation using concept degradation). We believe our approach opens up new research opportunities to go toward bridging the gap from visual to semantic indexing.

One important improvement that should be made to visual similarity is the use of several categories of low-level features (e.g. texture features). The use of several types of features would enable adaptive propagation based on prior knowledge. For instance, geometric features are very important to characterize the anatomy. Therefore, these features should be given a higher importance when propagating anatomy-related concepts. P roviding such prior knowledge can be done in a user-friendly way by using visual concepts as in [8].

