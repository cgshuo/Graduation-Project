 Retweeting is an important mechanism for information d-iffusion in social networks. Through retweeting, message is reshared from one user to another user, forming large cascades of message forwarding. Most existing researches of predicting retweeting utilize user social relationships for modeling which leads to vast calculating amount. In this paper, we propose two message clustering based matrix fac-torization models for retweeting prediction. Unlike previous approaches, our models exploit the clustering relationships of messages instead of social relationships. Our models are quite general because we do not need any auxiliary informa-tion except for message content. Several experiments on real datasets show that our models are effective and outperform the state-of-the-art methods.
 H.2.8 [ Database and Management ]: Data Mining; J.4 [ Social and Behavioral Sciences ]: Sociology Theory, Experimentation Retweeting Prediction; Clustering; Matrix Factorization Social media platforms such as Facebook, Twitter and Weibo play an increasingly important role for human inter-action and information diffusion, where people can not only follow popular celebrities and experts, but also share inter-esting information with their peers. In particular, retweeting is one of the most important functions in social network-s. Through this feature, message can be rapidly spread to hundreds of thousands of people. This causes messages to forward from user to user, forming large cascades of informa-tion [2]. Hence, understanding the mechanisms of retweet-ing and predicting who will retweet are important tasks to monitor the spread of information. But how do we predict retweeting behavior?
To achieve the task, considerable efforts [1, 4, 5, 6, 7, 8] have been conducted. Luo et al. [4] explored plenty of fea-tures, such as retweeting history, followers status, followers active time and followers interests, to find who will retweet a message posted on Twitter. Zhang et al. [8] conducted an investigation to verify the existence of influence locality in microblogging network and proposed an social influence lo-cality based model for retweeting behaviors prediction. Can et al. [1] utilized content, structure and image based fea-tures to predict the retweeting count of tweets which link an image. Although these methods have been obtained some significantly performance in users X  retweeting behavior pre-diction, many of them have their own unique purposes and features. This causes that these feature-based approach-es are too dependent on manually defined features, and the lack of any important feature may lead to poor performance. Recently, Wang et al. [6] proposed a nonnegative matrix fac-torization framework with social regularization for retweet-ing prediction. As well as previous works, they employed strength of social relationships to constrain objective func-tion and obtained a relatively satisfactory prediction result. However, it has to compute the similarity between every pair of users to determine neighborhoods which leads to expen-sive computation. This is not computationally feasible for rewteeting prediction with millions of users in social net-works.

In this paper, aiming at solving the problem mentioned above, we propose two message clustering based matrix fac-torization models for retweeting behavior prediction. Unlike the previous researches, we utilize the clustering relation-ships information among messages to improve the prediction accuracy of retweeting. More specifically, we argue that if two messages are similar (or belong to the same cluster) in the observation space, they are also similar in the latent s-pace as shown in Figure 1. We call this phenomenon as  X  X imilarity consistency X . Then, those similarity consistency information are employed in designing two message regular-ization terms to constrain the matrix factorization objective function. Our proposed approaches are quite general, and they can be applied to predict retweeting behavior for any social network platforms. The experimental analysis shows that our models outperform the state-of-the-art algorithms.
The rest of the paper is organized as follows: In Section 2, we give a formal definition of our problem. Section 3 presents our models. We describe our experimental study in Section 4 and conclude in Section 5. Figure 1: Similarity consistency in the observed and latent space.
Suppose that we have M users with the i -th user denoted as u i , and N messages with the j -th message denoted as m These messages can be grouped into K clusters. For the k -th cluster, it could be represented by C k = { c k 1 ,c k 2 ,  X  X  X  ,c where each c ki is a message from { m j } N j =1 and n is the size of the cluster.
 We denote the user-message retweeting matrix as R  X  R
M  X  N where R ij = 1 if u i retweets m j and R ij =  X  1 oth-erwise. Let U  X  R M  X  L be the latent user feature matrix, in which each row corresponds to a user and L ( L M,N ) is the number of the latent features. V  X  R L  X  N is the la-tent message feature matrix where V j = [ V 1 j ,V 2 j ,  X  X  X  ,V stands for the representation of m j in latent feature space.
The problem we study in this paper is how to effectively predict the missing values of R .
In this section, the retweeting prediction problem will be converted to matrix factorization problem. More specifical-ly, we propose two message clustering based models exploit-ing similarity consistency phenomenon.
The standard matrix factorization model maps both users and messages to a joint latent factor space, so that user retweeting behavior can be modeled as inner products in that space, i.e. R ij  X  U i V j . To learn the latent factors, it minimizes the regularized squared error on the set of known retweeting behaviors where k X k F is the Frobenius 2-norm,  X  and  X  are regular-ization parameters. I ij  X  { 0 , 1 } indicates whether R observed. The last two regularization terms are added to avoid overfitting. In general, gradient descent techniques are always used to find local optimal solutions.
In this section, we propose a novel message clustering based matrix factorization model, called centroid-based reg-ularization prediction model (CRPM), for retweeting pre-diction. Unlike the previous works which employ user so-cial relationships, CRPM exploits clustering relationships a-mong messages for constraints. We argue that these cluster-ing information have an impact on user retweeting behavior on account of the assumption that users are more likely to retweet similar content due to their personal interests. More precisely, we firstly group messages into clusters. Messages that are similar to one another within the same cluster and are dissimilar to messages in other clusters. We believe that if message m j is grouped to cluster C k in observed spaces, it should be consistent with the latent space. Hence, once the clusters are created, in latent message feature space, an individual message should more close to the centroid of that cluster to which it belongs. Under this scenario, we may arrive at the following cluster centroid regularizer where T jk is a indicator function that is equal to 1 if the j -th message belongs to the k -th cluster and equal to 0 otherwise. The details on how to cluster messages will be explained in Section 3.4. Then, we can obtain the following objective function through imposing the above cluster-based regular-ization term (2) onto (1): min where  X  1 is a positive regularization parameter.

In this paper, stochastic gradient descent method is used to solve the problem. Specifically, the gradients of the ob-jective function with respect to U i and V j are
CRPM emphatically considers the constraint on an indi-vidual message and the cluster to which it belongs. Fac-tually, similar messages within a cluster in observed space are expected to be close to each other in the latent feature space. Therefore, we propose another regularization term to constrain messages in a cluster where S ( j,x ) stands for the similarity between m j and m and the next section will introduce the details. Hence, it can be formulated as solving the following objective function min where  X  2 &gt; 0. Similar to CRPM, the gradients of the ob-jective function with respect to the variables are
Clustering is the critical and important step in our ap-proaches because the clusters give the centroid or neighbor-hoods of the active messages. All the computations follow-ing clustering step depends on the clusters. In this section, we are concerned with clustering techniques using messages X  structure and content features.

Structure-Based Features: Many works [4, 6, 7] have shown that messages X  structure characteristics that whether contains hashtag, URL, media or not, are important factors for affecting users X  retweeting behaviors. Hence, we take the number of hashtag, URL, media and mention as prediction features in our framework.

Content-Based Features: There is a consensus among researchers that users prefer to post or retweet a message which he is interested in. Furthermore, users X  interests can be reflected in the content of users X  messages, and users who retweet similar kinds of messages may have similar interests. Therefore, for better describing and understanding messages in semantic space, we use paragraph vector [3], an unsuper-vised vector-based approach which can model rich semantic information, to learn the vector representations of messages.
Hence, the vector of message presented to be clustered is a concatenation of two vectors, one from structure-based features and one from content-based features. In this paper, K-means algorithm is used for clustering.

In addition, we also use the vectors mentioned above to calculate the similarities among messages. More specifically, the similarity between m i and m j is calculated as
S ( i,j ) =  X   X  S structure ( i,j ) + (1  X   X  )  X  S content where  X  is employed to control the contribution of each fac-tor and we set  X  = 0 . 5 in this paper. S structure S content ( i,j ) are cosine similarities based on structure-based vectors and content-based vectors, respectively.
 Table 2: Tradeoff parameters for CRPM on D 100 . (L = 30)
In this section, we conduct several experiments to com-pare the retweeting prediction qualities of our approaches with other state-of-the-art methods. Impacts brought by parameters, latent feature number and iteration number are further discussed.
To evaluate the performance of our models, a publicly available Sina Weibo dataset collected by Zhang et al. [8] is employed. Our models are quite general, and can be uti-lized to predict retweeting with any sparse matrices. Hence, in this paper, we reconstruct four datasets which are ran-domly selected from the above dataset. Detailed statistics of the four sub-datasets are summarized in Table 1. Howev-er, we observe that positive instances (retweeting) and neg-ative instances (un-retweeting) are much unbalanced. Thus we randomly select a subset of negative instances with the equal number of positive number for experiments.
The training/testing sets are from a random 80% and 20% split of the constructed datasets. The corresponding entries in R of positive and negative instances for training are set to  X  1. The testing entries and the rest entries are set to 0. The cluster number is set to K = # Tweets/ 10. After train-ing, we use the learned approximate entries as feature for retweeting classification with Liblinear 1 as classifier. Four popular metrics, Precision, Recall, F 1 -value and Accuracy, are employed to measure the retweeting prediction qualities of our proposed approaches.
Here we focus on parameter settings. We investigate the performances of our models when the parameters change. Tradeoff Parameters: The tradeoff parameters  X  1 ,  X  2 ,  X  and  X  in our models play the role of adjusting the strengths of different terms in the objective functions. The impact of  X  2 generally shares the same trend as the impact of  X  Hence we only discuss the influences of  X  1 here due to the space limitation. Taking the scales of U and V into account, we scan orders of magnitude and try different combinations http://www.csie.ntu.edu.tw/ cjlin/liblinear/ Figure 2: F 1 -value vs. Latent Feature Number (L)
Figure 3: F 1 -value vs. Iteration Number on D 100 . of parameters as shown in Table 2. We use the fourth row for all datasets. Although they are not the perfect ones, the following experiments demonstrate they are adequate. Number of Latent Features: We train U and V to find the proper number of latent features L for users and mes-sages. More specifically, we conduct experiments with L from 5 to 50 on D 100 dataset. The results are shown in Figure 2, from which we can find that with the latent fea-ture number L increasing, F 1 -value increases gradually. We can also observe that F 1 -value becomes stable when L &gt; 30. Therefore, considering the calculation effect and time effi-ciency, we choose L = 30 as the latent space dimension in our experiments.
 Number of Iterations: Figure 3 illustrates the impacts of the number of iterations on F 1 -value. It is observed that it is better to run 30 iterations in order to reach a converged result with an acceptable time cost.
Table 3 shows the average results of the 5 runs with the 30 dimensions to represent the latent features. It should be not-ed that [6] and [8] share the same original dataset with us. From the results, we can draw the following observations: (1) Our models consistently obtain good performance in all datasets with different sparseness which shows our models have good robustness; (2) The two proposed models achieve a comparable performance with each other. Both of them could accurate in capturing the clustering relationships be-tween two messages; (3) CRPM and IRPM could generate better results than the social influence locality based model-s (LRC) and the state-of-the-art matrix factorization based algorithm (MNMFRP) even with less similarity calculation. In general, the results suggest that our proposed models provide a new thought for retweeting behavior prediction in social networks.
 Table 3: Performance of retweeting behavior predic-tion.
 Zhang [8]
Wang [6] MNMFRP 0.796 0.791 0.793 N/A
In this study, we put forward two message clustering based matrix factorization models for retweeting behavior predic-tion. Both of models are constructed on the basis of the clustering of messages with both structure and semantic fea-tures. We construct extensive experiments to validate our proposed models. The experimental results reveal that the proposed methods can effectively improve the performance of retweeting behavior prediction only based on message fea-tures. In future work, we will explore combining user clus-tering relationships to our models for further research. This work was supported by National Key Technology R&amp;D Program(No.2012BAH46B03), and the Strategic Lead-ing Science and Technology Projects of Chinese Academy of Sciences(No.XDA06030200). [1] E. F. Can, H. Oktay, and R. Manmatha. Predicting [2] J. Cheng, L. Adamic, P. A. Dow, J. M. Kleinberg, and [3] Q. V. Le and T. Mikolov. Distributed representations of [4] Z. Luo, M. Osborne, J. Tang, and T. Wang. Who will [5] B. Suh, L. Hong, P. Pirolli, and E. H. Chi. Want to be [6] M. Wang, W. Zuo, and Y. Wang. A multidimensional [7] Z. Yang, J. Guo, K. Cai, J. Tang, J. Li, L. Zhang, and [8] J. Zhang, B. Liu, J. Tang, T. Chen, and J. Li. Social
