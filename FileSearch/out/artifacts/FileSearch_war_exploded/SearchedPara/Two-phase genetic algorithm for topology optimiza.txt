 1. Introduction and problem de fi nition
Design and resource optimization has been one of the most active areas of research in recent years ( Hegazy et al., 2012; Luo et al., 2013;
Gao and Zhang, 2013 ). Biologically-inspired optimization techniques such as genetic algorithms (GAs) and particle swarm optimization ( Tao et al., 2012; Shafahi and Bagherian, 2013 ) have been among the most popular optimization techniques. Since the pioneering work of
Adeli and Cheng (1993) ,and Jenkins (1998) in the early1990s, a large number of articles have been publish ed on civil/structural engineer-ing applications of genetic algorithms (GAs). Recent examples of GA and evolutionary computing include cost optimization of composite fl oors ( Kim and Adeli, 2001 ), structural system identi fi ( Marano et al., 2011; Fuggini et al., 2013 ), damage detection and structural health monitoring ( Jafarkhani and Masri, 2011; Raich and
Liszkai, 2012 ), nonlinear structural control ( Jiang and Adeli, 2008 ), optimization of earthquake energy dissipation systems, structural cost optimization ( Sarma and Adeli, 2001; Adeli and Sarma, 2006;
Plevris and Papadrakakis, 2011 ), dependability assurance in the design of a long span suspension bridge ( Sgambi et al., 2012 ), construction ( Hsiao et al., 2012 ), and transportation engineering ( Putha et al., 2012 ).

Recently the authors presented a genetic algorithm (GA) for minimum weight sizing optimization of free-form steel space-frame roof structures consisting of discrete commercially available rectangular hollow structural sections (HSS) ( Kociecki and Adeli, 2013 ). The methodology was applied to t wo roof structures subjected totheAISCLRFDcode( AISC, 2011 ) and ASCE-10 snow, wind, and seismic loading ( ASCE, 2010 ). They are two of the 13 train stations making up the Ottawa Light Rail Transit (OLRT) ( http://www.ottawa lightrail.ca/en/ ) system to be completed in Ottawa, Canada, in 2018. Both examples have a diamond grid pattern and their members are subjected to torsion in additional to bending and axial forces. The initialdesigninbothcaseswasan actual design performed in a design of fi ce by the fi rst author iteratively using a general-purpose structural analysis software over a period of days. The optimum solutions obtained using the metho dology resulted in savings of 12% and 4% for the two examples. The advantages of the proposed GA algorithm are three fold: (a) automation of the design process of a complicated and one-of-a-kind structure; (b) relieving the designer of days of iterative design process; and (c) achieving a considerably lighter and therefore more economical design.

The objective of this paper is to extend the algorithm to topology optimization of free-form steel space-frame roof structures consist-ing of rectangular hollow structural sections (HSS) with the goal of achieving additional structural ef fi ciencies. An example of such a structure, referred to as Station 1 in this paper, is shown in Figs. 1 Fig. 2 is a 3D perspective view of the structure while Fig. 3 shows the top view, Fig. 4 shows a side view along the length, and Fig. 5 shows another side view along the width.

The goal of topology optimization is to use a fi xed structural geometry de fi ned by the designer and optimize both the member cross-sectional dimensions and the topology by adding (or sub-tracting) members to the structure. In other words, rearranging the members within a given shape to achieve a more ef fi cient design. For practical and aesthetic reasons, it is assumed that every frame member in the roof has the same width, b , and the same depth, d ,( Fig. 6 ). Columns, however, can have the same width, b and depth, d c , or different width and depth. Both roof frame and column member thicknesses can vary.

The roof structures considered are made up of a diamond grid pattern where each grid element has four joints and four frame members ( Fig. 7 ). In some cases, for example, when high minor-axis bending occurs, structural performance can be improved by using triangular grid elements rather than diamond grid elements.
By performing topology optimization, a diamond element is transformed into two triangular elements by adding a cross member ( Fig. 7 ). Cross members are hidden by wood panels and will not alter the esthetics of the structure.

To improve constructability by introducing regularity, the designer often divides the structure into regions based on similar response characteristics (e.g., internal forces and moments). In this case, each member in a region has the same cross-sectional dimensions. As an example, the roof structure of Fig. 1 may be divided into six roof regions and fi ve column regions shown in
Figs. 8 and 9 . As cross members are added they make up their own design regions separate from these 11 regions prede fi ned by the designer.
 f  X  d ; b ; d c ; b c ; t i ; t q  X  X   X   X  n i  X  1  X  bd  X  b 2 t where n is the number of groups of members in the roof structure with the same wall thickness, t i is the wall thickness of members in roof group i , L i is the total length of members in roof group i , n is the number of groups of columns with the same wall thickness, t q is the wall thickness of members in column group q , L total length of columns in column group q , d x , b x , and t depth, width, and thickness of cross members, respectively, L the total length of cross members, and  X  is the unit weight of steel. major-axis bending, minor-axis bending, shear force in the x and y -directions, and torsion as explained in Kociecki and Adeli (2013) .
Columns are used in pair in a V-shape form. They are pinned at the top and fi xed at the bottom ( Figs. 2  X  5 ). The basis of design is the
AISC LRFD speci fi cations and design constraints are de fi chapters D through H of the LRFD code ( AISC, 2011 ).
 2. Two-phase genetic algorithm for topology optimization of free form steel space frame roof structures
The minimum weight optimization problem is solved using a modi fi cation of the genetic algorithm (GA) developed by Adeli and
Cheng (1994a, 1994b) for sizing optimization of structures adapted into a two-phase algorithm in order to (a) to extend it into topology optimization and (b) to improve the optimization con-vergence and speed for large real-life structural design problems with complex geometries. In order to transform the constrained optimization problem into an unconstrained optimization pro-blem, the following fi tness function is de fi ned by combining the objective function, Eq. (1) , with the AISC LRFD-de fi ned constraints: min F  X  d ; b ; d c ; b c ; t i ; t q  X  X  1  X   X  n i  X  1  X  bd  X  b 2 t where g c , j represents the most critical constraint value (i.e., the constraint value which governs design), N is the total number of structural members, and  X  is a normalizing constant. The normal-izing constant is used to ensure that the objective function value does not dominate the fi tness function unduly and establishes a weighting between the objective function's and the constraint function's contribution to the fi tness function. In this research, a penalty function which penalizes g c , j values greater than 1.0.
Cross members support diamond grid elements against buck-ling inward. Their ends are fi xed to provide additional lateral stiffness along the length of the structure, and in the case when the roof structure has a cantilevered portion such as Example 2, can help support the cantilevered portion more ef fi ciently. Cross members are also rectangular HSS. To improve computational speed by avoiding additional design variables, all cross members are chosen to be of the same size during phase one of the algorithm but are allowed to change during the second phase. This is an effective strategy because the cross members are usually considerably smaller and lighter than the other frame members (up to 77% in cross-sectional areas in the examples to be presented in this paper).

Design solutions are represented by chromosomes or variable strings. Chromosomes can be made up of binary variables, actual variables (i.e., d , b , and t ), or a combination of the two. Genetic information for member cross-sectional dimensions consists of design variables b , d , b c , d c , b x , d x , t i , t q incorporate topology optimization simultaneously with dimension optimization, a binary string is added to the end of the discrete variable string. In this binary string a  X  1  X  represents the existence of a certain cross member and a  X  0  X  represents the non-existence of the cross member. The position of the binary bit within the string indicates the location of the cross member within the structure, and the number of bits is the total number of possible cross members, N px . Fig. 10 depicts an example string for a roof structure with four roof regions and one column region consisting of thefollowingHSSshapes:(1)HSS12x8 3/16; (2) HSS12x8 3/8; (3) HSS12x8 1/2; (4) HSS12x8 5/8, HSS12x16 1 columns, and HSS6x4 1/4 cross members. The example roof has two out of possible cross members.

A population of N p solutions are generated around the initial design for each design variable ( d , b , d c , b c , t i probability distribution ( N p is the number of designs or solutions in a given population including the initial design), and each cross member size and con fi guration is generated randomly by creating a binary string with randomly arranged  X  1  X  s and  X  0  X  s. It is assumed that the cross member can be placed across any diamond element in the roof structure.

The addition of cross members is a design strategy developed in this research. Therefore the initial design performed in a consulting design of fi ce by the fi rst author which is used to create the initial design population in this research does not consider cross members. While the initial population of design in the GA search is created around the designer's initial design, the initial design itself is deliberately excluded from the population. Cross member con fi gurations are generated randomly and initial designs based on them are relatively un fi t to begin with. Including the designer's better fi t design in the initial population would steer the optimization towards that design and away from a global optimum.

The three basic operations of a GA, reproduction, crossover, and mutation, are used to improve the fi tness of each population from one generation (iteration) to the next. The uniform crossover operation, used in this research, mates the selected design solu-tions by combining genetic information between two parent solutions to create more fi t offspring solutions by swapping variables corresponding to zeroes in a binary string known as a mask. The mutation operation is used to add diversity to the search space by randomly changing a variable in a design solution.
Roof structures of the type considered in this research are complex and may not easily be divided into a few regions of members having the same cross section. To arrive at an economic design in a reasonable amount of time, a two-phase method is developed where the GA is performed on the structure divided into a few regions preselected by the designer until a near-global but slightly infeasible optimal solution is found. At this point the highly stressed members in each region are determined, each highly stressed individual member is assigned its own region and the total number of regions is increased accordingly. A highly stressed member is de fi ned as a member with a critical ratio, g , of 0.95 or greater. These members are removed from large regions strategically and are assigned their own regions so that they do not control their respective region and result in overdesigned members.

Topology optimization is performed during phase one. The added cross members redistribute stresses making it even more dif fi cult to divide roof members into regions of the same sections.
Regions are initially de fi ned per designer's initial design which does not include cross members. As the topology optimization progresses the preselected regions become less effective and new cross member con fi gurations are formed. In the topology optimi-zation algorithm presented in this paper, roof regions are re-established periodically throughout the phase one design while column regions remain the same. Based on numerical experimen-tation, regions are re-con fi gured every three iterations which is short enough so that the design is not too dependent on the previous region assignments and will not get stuck in a local optimum, and long enough to lead to a global optimum topology within a reasonable number of iterations. The cross member con fi guration, column member dimensions, and outer roof mem-ber dimensions ( d and b ) at every third iteration are used to establish new regions. For this purpose, all roof frame member thicknesses are temporarily set to 1/2 in. to establish uniformity and allowing for a fair comparison of stresses in the roof members.
Structural analysis is run and critical constraint values for roof frame members are calculated and normalized with respect to the highest value for all members. Based on the availability of six different thicknesses for roof members, six roof regions or fewer are assigned using the following equations based on extensive numerical experimentation to achieve the most economical designs:
Region  X  initial design by increasing the thickness dimension of the over-stressed members one increment at a time until all constraints are met. When roof member thicknesses are maxed out based on HSS thickness availability, which is rarely the case, the values are kept where they are. However, when a column thickness is maxed out during this process, the column outer dimensions will change in order to move towards the global optimum. An initial population is created around the initial design using a normal probability distribution similar to that of phase one but with a smaller range of design variables to choose from (the initial design variable increment for d and b values and 7 3 increments for t values). optimization problem with additional regions including one for all cross members again until all constraints are satis fi ed and a global optimum solution is obtained. The stopping criteria for completing phase one are explained in Kociecki and Adeli (2013) . Fig. 11 is a fl ow chart describing the combined dimension and topology optimization algorithm. Flowcharts describing GA operations and phase two are presented in Kociecki and Adeli (2013) and will not be repeated here for brevity. 3. Examples in this paper. They are two of the 13 train stations making up the Ottawa Light Rail Transit (OLRT) system to be completed in
Ottawa, Canada, in 2018. Detailed descriptions of the examples including the loading and load combinations per ASCE7-10 can be found in Kociecki and Adeli (2013) . Only a brief description is provided here.
 t 3.1. Example 1
The fi rst roof model, Station 1, is located along the Rideau River in Ottawa. It has a diamond grid pattern and is shown in Figs. 2
The roof structure is 224 ft long, 75 ft wide, and 27 ft tall, and it has 278 structural members in the roof plus 10 inclined columns.
The structure is pin-connected to a concrete retaining wall on the side without columns. Roof connections to either the retaining wall or the top of the columns are shown in Figs. 3 and 5 .
The roof structure is initially divided into six regions with similar major-axis bending distribution, each with the same cross-sectional member as shown in Fig. 8 . Columns are divided into regions as shown in Fig. 9 all with the same outer dimensions in phase one of the design. As such the initial (phase one) optimiza-tion problem has 15 design variables: thickness, t i , for each roof region, depth, d , and width, b , for all roof members, thickness, t for each column region, and depth, d c , and width, b c , for all columns.

Values of the two parameters used in the constrained GA optimi-zation algorithm,  X  and  X  ,areproblem-speci fi canddeterminedfrom numerical experimentation as explained in Kociecki and Adeli (2013) . For Station 1,  X  is 3.0879 and gamma is 2.0.

The entire optimization took about 5 h using a common work-station machine with a 2.83 GHz dual core processor. Phase one optimization used an initial population of 50 designs and under-went 14 design iterations in about 3 h and 40 min. The design at the end of phase one weighs 201 kips and has nine overstressed members with the fi nal regions and fi nal cross member con uration as shown in Fig. 13 . The phase one solution is presented in Table 1 .

Phase two optimization added 14 regions (seven roof regions and seven column regions) and 28 design variables ( Figs. 12 and 13 ) and used an initial population of 30 designs. Roof region six and column regions seven through nine were eliminated during topol-ogy optimization. As such, at the end of phase one there are a total of 12 roof regions, one cross member region, and nine column regions. Phase two took about 1 h and 30 min and increased the phase one design weight to 220 kips. The convergence curve for the entire optimization process is shown in Fig. 14 and the initial, phase one, and fi nal solutions are presented in Table 1 . The sudden jump at iteration 14 in Fig. 14 is due to the fact that during the second phase, the algorithm starts with a new initial design by increasing the thickness dimension of the overstressed members one incre-ment at a time until all constraints are met as explained previously.
The fi nal solution is almost 3% heavier than the designer's initial solution though it uses smaller HSS8 8 members than the initial solution's HSS12 8 members. The structure is not lighter but it is thinner and sleeker looking which is a desirable trait among modern architecture.

Station 1 behaves much like a typical arched roof structure and its design is based more heavily on major-axis bending than minor-axis bending. There is no variation in height along the length of the roof structure ( Fig. 4 ), so vertical loads do not act to pinch the diamond elements together along the shorter span (joints A to B, Fig. 7 ). The small amount of minor-axis bending is caused by axial forces in the diamond frame elements. This example proves that a structure such as this does not bene the topology optimization presented in this research. Cross-members allow for smaller diamond frame members which results in a decrease in weight for frame members but does not outweigh the increase in weight caused by the addition of members. The optimization process converged quickly but if allowed to continue with more strict stopping criteria, the cross-members would most likely be eliminated from the structure. 3.2. Example 2
The second roof model, Station 2, consists of a pair of identical structures situated on either side of the New Booth Street bridge near Napean Bay in Ottawa though only one structure is consid-ered in this paper. Station 2 is geometrically more complex than
Station 1 with an irregular geometry but a similar diamond grid pattern ( Figs. 15  X  19 ). This structure has 306 roof members and 34 inclined columns. Fig. 16 is a 3D perspective view of the structure while Fig. 17 shows a top view, Fig. 18 shows a side view along the length, and Fig. 19 shows a side view along the width of the structure. The roof structure is 203 ft long, 67 ft wide, and 55 ft tall. It is pin-connected to columns at locations shown in Fig. 17 .
The taller columns, the four sets on the far side and the one set on the near side of Fig. 16 , are fi xed to the ground while the rest are pinned to the ground.

Station 2 is initially divided into 12 regions: six roof regions ( Fig. 20 ) and six column regions ( Fig. 21 ). As with Station 1, Station 2 is also highly controlled by major axis bending, so members with similar major-axis moments are grouped together. Due to large variances in height and stresses among the 34 columns, each column region is allowed to differ in outer dimensions, d and b ,as well as thickness, t . As such the initial (phase one) optimization problem has 19 design variables: thickness, t i , for each roof region, depth, d , and width, b , for all roof members, thickness, t , and width, b q , for each column region.

For Station 2,  X  is 6.5663 and  X  is 2.0. Unlike Station 1, Station 2 varies in height along the length of the structure ( Fig. 18 ) and consequently the short span of the diamond grid elements (joint A to B, Fig. 7 ) is not horizontal. One joint is higher than the other causing vertical loads to pinch the diamonds together along this shorter span. Therefore, in contrast to Station 1, minor-axis bending plays a signi fi cant role in the design of Station 2. In this case cross members reduce the overall stresses, mainly minor-axis bending, and allow for smaller and lighter frame members.
Station 2 considering its geometric complexity. When regions are reassigned to the roof structure based on Eqs. (3) and (4) region one consists of the smallest members and region six consists of the largest members, and there are typically no large changes in the region assignments from one set of three iterations to the next.
Fig. 22 shows the fi tness convergence curve for a small sub-optimization problem which uses 30 designs per iterations over 12 design iterations for Station 2. This fi gure shows relatively smooth fi tness convergence over the entire 12 iterations with no signi cant increase in fi tness after every three iterations. This lead the authors to choose the every-third-iteration strategy for topology optimization and proves the described method to be effective for reassigning regions.
 same aforementioned workstation. Phase one design was per-formed using an initial population of 50 designs and took about 8 h and 50 min to undergo 28 design iterations. The phase one solution weighs 246 kips with 11 overstressed members. Table 2 presents the phase one solution and Fig. 23 presents the fi region assignments and cross member con fi guration. During phase one, one roof region was eliminated resulting in a total of eleven regions (5 roof and 6 column regions).
 six column regions) and 36 design variables ( Figs. 23 and 24 ). At the beginning of phase two column region 11 was eliminated resulting in a total of 27 roof regions, two cross member regions, and 11 column regions. Phase two design was performed using an initial population of 30 design solutions and took about 5 h and 26 iterations. The fi nal weight of the structure is 252 kips which is 2% higher than the infeasible phase one solution but 9% lower than the designer's initial solution. Table 2 presents a comparison of the fi nal solution with the phase one and initial solutions and Fig. 25 presents the convergence curve for the entire process. In this case topology optimization is bene fi cial and the decrease in weight from the smaller frame members outweighs the increase in weight from the additional cross-members and results in a design which is 4% lighter than the dimension/size optimization fi nal solution obtained in Kociecki and Adeli (2013) . 4. Final comments
A major advantage of GAs is that no function gradient compu-tation is required ( Baraldi et al., 2011; Chabuk et al., 2012;
Campomanes- X lvareza et al., 2013 ; Hejazi et al., 2013 ). The topology optimization algorithm presented in this research is effective for structures with complex curvatures in multiple planes where both major-axis and minor-axis bending govern design.
Station 2 is a good example of such a structure while Station 1 proves that the less complex structure bene fi ts more from the simple diamond grid geometry with no additional members.
Automation of this design process allowed the authors to achieve the optimal cross member con fi guration while minimizing the number of added members and maximizing overall structural performance. For Station 2 the fi nal design was lighter and more economical than the designer's initial solution obtained in a design of fi ce over a period of days. The topology optimization algorithm presented in this paper extended the sizing optimization algo-rithm presented in Kociecki and Adeli (2013) and will be further extended to shape optimization of structures where coordinates are allowed to vary within certain prede fi ned limits. While a savings of 4% is relatively small on its own, topology optimization is an important addition to the entire algorithm and combined to work simultaneously with dimension and shape optimization will help reach the ultimate goal of a global optimal solution. References
