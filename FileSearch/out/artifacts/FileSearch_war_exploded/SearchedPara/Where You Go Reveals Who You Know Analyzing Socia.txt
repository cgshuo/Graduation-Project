 This paper aims to investigate how the geographical foot-prints of users correlate to their social ties. While conven-tional wisdom told us that the more frequently two users co-locate in geography, the higher probability they are friends, we find that in real geo-social data, Gowalla and Meetup, al-most all of the user pairs with friendships had never met ge-ographically. In this sense, can we discover social ties among users purely using their geographical footprints even if they never met? To study this question, we develop a two-stage feature engineering framework. The first stage is to charac-terize the direct linkages between users through their spatial co-locations while the second is to capture the indirect link-ages between them via a co-location graph . Experiments conducted on Gowalla check-in data and Meetup meeting events exhibit not only the superiority of our feature model, but also validate the predictability (with 70% accuracy) of detecting social ties solely from user footprints.
Location-acquisition techniques and ubiquitous mobile de-vices, along with the social networking services, foster the emergence of geo-social media, including Facebook Place, Foursquare, Meetup, and Plancast. Geo-social media allows users to not only maintain social connections but also keep track of their geographical footprints that are reflected by ei-ther check-in records or social activities (e.g. dinner gather-ing, attending conferences, and seeing movies). Both check-in records and social activities consist of latitude-longitude information and time stamps. Such geographical footprints depict where people show up and have face-to-face interac-tions in the physical world.

In this paper, we aim to uncover the hidden relationship between users X  social ties and their geographical footprints. Specifically, we would like to answer the following three ques-tions. First, can we discover social ties purely based on the geographical footprints of users? That said, to understand how footprints shape social ties, no social network informa-tion can be used. Second, what is the deterministic factor mation with friends. How to represent their possible spatial b ehaviors that characterize social ties?
To answer the three questions, we develop a novel fea-ture engineering framework. We represent the geographi-cal footprints of two users considering various degree of im-portance on their co-occurrence from the personal , collec-tive , and temporal aspects, which will be validated to deal with some of the aforementioned challenges. Besides the co-location features that depict the possibility of direct linkage between nodes, to model the the potential indirect friend-ships among users, we further devise a series of structural features based on a Co-location Graph that is constructed from co-location features of users. In the end, we conduct a systematic experiment on two well-known geo-social media datasets, Gowalla and Meetup , to evaluate the proposed feature engineering. framework.
Definition 1: Social Network. A social network is a graph G = ( V, E ), where V is the set of nodes and E is the set of edges. Each node v  X  V is associated with a list of geographical footprints a v .

Definition 2: Geographical Footprint. The geograph-ical footprint of node v is a sequence of locations and times-tion l i  X  L v is a geographic coordinate (longitude and lati-tude), and L v is the set of locations visited by node v .
Definition 3: Co-location. The geo-footprint ( l u i , t u i )  X  a u and ( l v j , t v j )  X  a v of nodes u and v can form a co-location  X  and a temporal condition | t u i  X  t v j | &lt;  X  , where  X  and  X  are the distance and time thresholds respectively, and l k is the average geographic position of l u i and l v j and t k is the average time of t u i and t v j . We also denote the set of co-locations of nodes u and v as C uv = { c 1 , c 2 , ... } . Note that the settings of  X  and  X  empirically depends on the various applications, and this study sets  X  = 20 (meters) and  X  = 1 (hour).
Datasets. We use two datasets in this study, and their statistics are given in Table 2. Gowalla 1 data, which is crawled from Sep 2011 to Nov 2011, is an online location-based social networking service that allow users to  X  X heck-in X  their geographical locations and share with their friends. Meetup 2 is crawled from an event-based social network meetup.com from July 2013 to Oct 2013, in which users be-long to multiple online social groups, and they can publish and participate geographical events via RSVP ( X  X es X ,  X  X o X , or  X  X aybe X ). Each node represents a user, and two users are connected by an edge if they appear in the same social group at least three times. Note that we have the time of each check-in in Gowalla data, but the Meetup data does not provide event time information. Table 3 reports the numbers of node pairs related to  X  X riends X  vs.  X  X on-friends X  and  X  X o-location X  vs.  X  X o co-location X , where  X  X o-location X  indicates that two users had ever meet in terms of geography and time. We can find that friends without co-locations take the major fraction, which reflects that users who are friends nearly never meet in the physical world (98% for Gowalla and 97% for Meetup).
The feature engineering has two stages. We first depict the direct linkages between users through their co-location h ttps://snap.stanford.edu/data/loc-gowalla.html http://lsna2012.net76.net/ebsn/ Hence, it is important to consider the personal location h istory into the measure of location significance LS ( u, l ). The most intuitive and effective way to model the personal factor is the probability that a node u visits a location l among all of its visits (at any locations), which is defined as p visiting of node u at location l .

In addition to the visiting probability at a specific loca-tion, a more general way to model the personal factor is con-sider the probability of traveling around a region , because sometimes people prefer to visit a certain district containing multiple locations. For a node u , we use a density function with respect to the geographical distances between a certain location l and all the locations visited by u , given by: where  X  d is a parameter that implicitly determines the area of a region. A larger  X  d may refer to a certain suburb district (e.g. an amusement park or zoo) while a smaller  X  d may be suitable for an urban district. We choose a small  X  d = 1 . 5 since the data we use for experiments is an urban area.
We can treat the probability p per ( u, l ) and the density d ( u, l ) as the weight of F oCL , i.e., w p per uv = arg max l  X  L  X  log( p per ( u, l )  X  p per ( v, l )) and w d uv = arg max l  X  L d ( u, l )  X  d ( v, l )), and derive two personal features: w p per uv  X  and d ( u, l ) are considered as the measure location signifi-cance LS ( u, l ). Therefore, there are 3 basic (i.e., CoLS , P oCL and SoLH )  X  2 personal (i.e., p per ( u, l ) and d ( u, l )) = 6 features. Totally we have 8 personal features.
The collective factor of a location reflects the visiting behaviors of the general public (i.e., all the users in the data). Some locations are frequently visited by a number of users such as famous landmarks and transportation sites while other locations are more specific to only a few per-sons, such as a private house. Those people co-locating at a public place tends to be strangers who encounter by co-incidence. In contrast, co-locating at a private place has higher potential to be friends. We take advantage of loca-tion entropy [4] to model the collective factor of a location. We first define the probability that a node u visits a loca-tion l among all the visits by all the nodes in the data as: p location l can be defined as: e ( l ) =  X  X A high entropy e ( l ) means location l is a public place at which many people have ever visited while a low e ( l ) implies l tends to be a private place that is visited by few users.
Similar to the personal features, we can consider the loca-tion entropy e ( l ) as the weight of F oCL , and derive a collec-tive feature: P l  X  L regarded as the location significance LS ( u, l ), and thus we have three additional collective features (i.e., CoLS , P oCL and SoLH ). Totally we have 4 collective features.
Considering consecutive co-locations of two users, the time gaps of friends are different from those of strangers who graph features (GF) based on the co-location strength val-u es on edges in the co-location graph G , in which  X  u is the set of neighbors of node u in G , path h len i u,v is the set of paths of length len between nodes u and v , and RW R ( u, v ) [6] restarts from u . We construct a location graph for each co-location feature, Graph-based Personal/Collective/Temporal Features (GPF/GCF/GTF), and the list of graph features is computed for each G .
The experiment consists of two parts: feature-based user pair ranking and social tie detection . The former is an unsu-pervised method to present the effectiveness of various fea-ture sets while the latter uses a supervised learning method to determine whether a given user pair has a friendship.
Feature-based User Pair Ranking . We rank all pairs of nodes in the social network using each feature set, select top N node pairs, and compute the ratio of node pairs with social ties (termed Accuracy@ N ) by varying N . Note that to we simply use geometric mean to combine the feature val-ues of each feature category (i.e., PF, CF, and TF). While the Meetup data do not have timestamps for user meeting events, we do not report the results of TF and GTF for the Meetup part. In addition to all user pairs, to understand whether our feature engineering model can identify users who have friendships but no geographical interactions, we also report the results of user pairs who do not have any co-location, termed by  X  X o Co-location (NCL) user pairs. X  The results are shown in Table 5. We can find that for lower N (= 50, 100), our feature model is able to near perfectly dis-tinguish friends from non-friends user pairs. However, as N increases, the distinguish ability decreases, especially being drastic for conventional features PF, CF, and TF. The ac-curacy values of our co-location graph-based features GPF, GCF, and GTF are much more stable, and using all the fea-tures can achieve the best accuracy. Moreover, by looking into the results of  X  X o co-location user pairs, X  the superiority of GPF, GCF, and GTF is more clear. Since PF, CF, and GTF highly depend on co-locations of users, their accuracy values are generally very low under this case. Such results indicate that the proposed graph-based features are capable of identifying friends who have no geographical meetings. Nevertheless, the accuracy values of N &gt; 1000 are still very low. Hence we resort to the supervised learning to detect whether any given user pair has a social tie in the following.
Social Tie Detection. We divide node pairs in the so-cial network into R % training instances and 1  X  R % testing instances ( R = 20 , 80). The Area under the ROC Curve (AUC) are used as evaluation metrics. Node pairs with so-cial ties (ground truth) are treated as positive instances. We use Random Forest, Support Vector Machine, and Logistic Regression as the supervised learning methods. Since dif-ferent learning methods exhibit very similar results, here we report the results of Random Forest due to the page limit. The results are shown in Table 6. We can find three things. First, the GPF, GCG, and GTF still generally out-perform PF, CF, and TF, especially on  X  X o co-location user pairs. X  Second, using only geographical footprints (no so-cial network information are employed) can achieve up to 70% AUC. This result tells us that social ties are able to be successfully detected through indirect linkages in the pro-posed co-location graph. Third, even using 20% pairs as the training set can lead to AUC around 60%.

