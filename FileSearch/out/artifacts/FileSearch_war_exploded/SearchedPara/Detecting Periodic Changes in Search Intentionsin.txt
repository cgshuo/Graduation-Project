 Information needs expressed by using the same query for a search engine might be totally different, whether on week days or weekends, or during the day or at night. For queries having no temporal changes in search intentions, the same search results ranking may be returned regardless of the time, but for those with temporal changes the ranking must be suitably altered depending on the time of input. To achieve time-dependent search results rankings, we focus on the temporal changes in the search intentions. We present the results obtained by analyzing a commercial search en-gine log and propose a method of detecting queries showing periodic changes in the search intentions.
 H.3 [ Information Storage and Retrieval ]: Miscellaneous; H.3.3 [ Information Search and Retrieval ]: Metrics X  Searchprocess,Relevancefeedback Algorithms, Experimentation search engine, classification of search intentions, periodicity analysis, search logs, time-dependent search results ranking
Search engines have become the most convenient and eas-iest Internet tool to look for the various information sources provided on the World Wide Web. A keyword input to search engines is called a  X  X uery X  and the information de-manded by the query is called  X  X earch intention X . In this paper, we refer to  X  X earch intentions generally expressed by using a query X  as  X  X earch intentions of the query X .
Understanding search intentions of queries is one of the essential research problems in IR communities. This is not only difficult, but the difficulty varies from query to query. For example, search intentions of navigational queries are clearer than those of informational ones[1]. The understand-ing becomes more challenging if we consider a realistic fea-ture, i.e., a change in time. If a query shows temporal changes in the search intentions and does not include any patterns, we have no clue as to how to capture the inten-tions. However, if the changes follow a clear pattern (i.e., for periodicities), we have a good chance to track them. If we could determine such periodic changes beforehand, it would become possible to prepare suitable rankings at the time the query is input. We believe that this would enable us to obtain significant improvement in retrieval accuracy.
To summarize, the contributions of this paper include:
We introduce related work in Section 2 and explain our method to ascertain search intentions and their temporal changes in Section 3. Section 4 describes the periodicity detection and our query classification based on the search intention features. In Section 5, we present the datasets analyzed and the results obtained. Finally, in Section 6 we conclude this paper with a summary of the main points.
We introduce papers in which the authors captured the temporal changes in the search intentions of queries and aimed to achieve time-dependent search ranking results.
Chien et al.[2] considered that the search intentions of two queries were similar when there was a correlation between their temporal changes in terms of input numbers. On the basis of this idea, they extracted highly correlated query pairs from search logs of the 2004 MSN search engine. Zhao et al.[7] considered that the search intentions of queries re-sembled each other if the search result sets clicked by these queries were similar. They formulated similarity degrees and investigated the temporal changes between them.
Diaz et al.[3] used time stamps of search results retrieved by a query to create the temporal model for that query and one for the whole document collection. They defined sev-eral temporal features such as the KL divergence between the models and investigated whether these features could improve the average precision of a query. Dong et al.[4] pro-posed rankings called recency rankings for breaking-news queries. They defined several features such as the difference between the query input time and the page creation time and developed a ranking model by using their recency data.
We first propose a method to ascertain search intentions of a query in Section 3-1. We then represent the temporal changes in the search intentions in Section 3-2.
We utilize the analysis results of search logs. Our basic idea is that the action performed immediately after the query input best expresses the search intention . That is, we consider that the search actions performed im-mediately after the query input, such as the first click on the search result or a reformulation of the query without clicking any search results, best show the intentions expressed by us-ing the query. We call these actions  X  X irst search actions X  and this idea is illustrated in Fig. 1.
 Figure 1: First search actions of query q . Users X  actions immediately after the query input are con-sidered as best expressing their search intentions.
In this figure, the users assigned userIDs A, B, and C first clicked different search results and the user assigned D reformulated the query from q to q without clicking any search results. As for the first clicks, even though user A clicked the search result ranked 1st, users B and C bypassed it. Further, user C bypassed the second ranked result that was clicked by user B. On the other hand, user D simply reformulated the query to one that expressed his/her search intention better without viewing any search results that the other users had clicked. By regarding each action as a latent search intention, we could determine that there were four different search intentions for this query q .

After obtaining all of the first search actions for a certain query by analyzing the search logs, we calculated the ratio of each to the whole. This procedure corresponds to estimating the ratio of each search intention behind the query.
We next constructed time series data of search intentions for a query to represent the temporal changes. These data are acquired by splitting long-term search logs into the parts of a certain time interval d and performing the method ex-plained in Section 3-1 for each log slot. We then sequentially placed the results of search intentions identified with the cor-responding ratios in time order. Figure 2 illustrates the time series data for a query obtained in this way.
 Figure 2: Time series data of query q search in-tentions obtained by analyzing log slots. The time interval of each log slot is d .
 There is one problem in using this simple time series data. The problem occurs as a result of the rank movements of search results. If the order of similar pages at higher ranks is replaced during the time series data, the ratios of search intentions featured by these URLs would fluctuate because higher ranked pages are more often clicked than lower ranked ones[5], leading to false detection of temporal changes. To solve the problem, we unify the pages that are frequently clicked by users inputting similar queries, i.e., the pages clicked by users with similar search intentions, because in that case the pages are regarded to be somewhat similar.
We analyzed the time series data resulting from this uni-fying procedure and tracked the temporal changes in each search intention to detect periodicities for the query.
We explain the periodicity analysis of the time series data in Section 4-1. In Section 4-2, we describe our query classi-fication based on the analysis results obtained.
Periodic changes in search intentions of a query are de-tected by performing the Discrete Fourier Transform(DFT) on the ratios of each search intention, i.e., on each line in the time series data of search intentions described in Fig. 2.
The DFT is often used to investigate data frequencies and is defined by the following equation: Here, f j ( q, n ) ,n =0 , 1 ,...,N  X  1 denotes the j th ratios of search intention of query q , which is illustrated in Fig. 3, and the data size is N . f j k ( q ) is the frequency defined as k/N, k =0 , 1 ,..., N/ 2 . The inverse of the frequency f ( q )= k/N multiplied by the time interval d in Section 3-2 becomes the period p ( f j k ( q )) = (1 /f k )  X  d . Figure 3: Performing DFT on the ratios of each search intention. The j th ratios of query q search intention are denoted as f j ( q, n ) .

The variance component of each frequency is estimated by calculating the power spectral density P ( f j k ( q )) defined by the following equation: The frequencies showing high P ( f j k ( q )) values are consid-ered to produce the periodicities. Therefore, we investigate P ( f j k ( q )) values to determine whether or not this query q includes any periodic changes in the search intentions.
As results obtained through the Fourier analyses, we ac-quired several power spectral densities of the frequencies. Among them, we focused only on those scoring much higher values than those of the others because these frequencies are considered dominant periods. In so doing, we utilized the technique originally presented by Vlachos et al.[6]. We de-tected queries showing such periods in the search intentions, i.e., those whose periodicities are clearly observed.
We classified queries based on the number and the tem-poral features of their search intentions. We present our hierarchical classification of search intentions in Fig. 4. Figure 4: Classification of search intentions accord-ing to their number and temporal features.

We classified queries that included search intentions whose average ratio during the time series data was more than 70% into the singular search intention category. On the other hand, when there were no search intentions scoring at least 70%, we classified them into the category of multiple inten-tions. We then divided these queries into two classes: those having lumped search intentions (i.e., at least one search in-tention scoring a ratio of 30% or more) and those having dispersed ones (i.e., are having a ratio of 30% or less). We classified the former queries as having only afew intentions and the latter queries as having many intentions.
We can further classify queries having only a few search intentions. Even if only one search intention whose ratio is at least 30% shows a change in time, we can classify the query into the category of temporal changes. A temporal change is defined by the standard deviation and a value of more than 5% is regarded as a temporal change. In con-trast, if the values of all the search intentions are under 5%, the query is classified as having constant search inten-tions. Furthermore, when at least one temporal change is confirmed as being periodic, we classify the query as having periodic changes. Those having other kinds of temporal changes (such as a burst or long-term decay) are classified as non-periodic . We first explain the datasets and settings in Section 5-1. We then present the analysis results showing a number of example queries in Section 5-2.
We analyzed the search logs of a Japanese commercial search engine. The acquisition time was the three-month period from June 1 to August 31, 2009. Queries were se-lected from the top of the ranking of the input numbers during this period. There were both Japanese and English queries and they were analyzed in the same way.

As for the time interval d described in Section 3-2, we set d = day or six hours .The d = day setting was used to detect the weekly periodicity and thus the logs were divided into day slots (e.g., Sunday, Monday, and Tuesday). For this setting, we analyzed about 4500 queries and a total of six weeks X  worth of logs was analyzed. The d = six hours setting was used to detect the daily periodicity. Logs were divided into six hour slots such as those from 0 a.m. to 6 a.m., from 6 a.m. to 0 p.m., from 0 p.m. to 6 p.m., and from 6 p.m. to 0 a.m. and we analyzed a total of 14 days X  worth of logs for about 1000 queries.
We first show the classification results of queries obtained by analyzing the search log slots described in the previous section. The results for the day log slots and the six hour log slots are given in Tables 1 and 2, respectively. Here, queries classified as non-periodic are those for which weekly or daily periodicities were not observed. This result indicates that there are a lot of queries showing temporal changes in search intentions and that among them, those showing periodic changes surely exist with an appropriate ratio.
Table 2: Classification results (six hour log slots)
We next present two examples of queries that were de-tected as being periodic. The query  X  X ini Loto X  is an exam-ple showing the weekly periodicity of search intentions and the results are presented in Fig. 5.
 Figure 5:  X  X ini Loto X  search intentions (upper) and the spectral analysis results (lower): query showing weekly periodicities in the search intentions.  X  X ini Loto X  is a public lottery in Japan and the drawing is held every Tuesday. From the upper results in Fig. 5, we can see that the search intention ratio concerning the lucky number report dramatically increased every Tuesday and Wednesday and decreased on the other days. The ratio on these days was much higher than that of the second in-tention, which was to seek general information about  X  X ini Loto X . Such weekly periodicity was also confirmed by the spectral analyses in the lower results in Fig. 5. A strong peak was observed at the frequency of the weekly period, i.e., at the frequency of 0 . 14  X  1 / 7, and was much higher than the threshold of the dominant ones. We considered that the periods of this type were generated as a result of the links to real-world event cycles. In this case, the event was a lottery held every Tuesday.

The query  X  X witter X  shows the daily periodicity and the results are presented in Fig. 6. The upper results show a clear tendency for most search users to input this query from 0 a.m. to 6 a.m., reaching the Twitter.jp page where the service was provided, while general information about Twitter was extensively searched at other times. Compared with those detected for  X  X ini Loto X , these types of periodic-ities seemed to occur due to the change in the class of search users. From the results, most users issuing  X  X witter X  during the period from 0 a.m. to 6 a.m. already knew about Twit-ter, while the users during the other periods were newcom-ers to Twitter. The transition yielded different intentions for the same query. In other words, these periodic changes were likely linked to the life cycles of the search users. Figure 6:  X  X witter X  search intentions (upper) and the spectral analysis results (lower); query showing daily periodicity in the search intentions.
In this paper, we proposed a method of detecting queries that show periodic changes in search intentions. In devel-oping our method, we classified queries according to the number and temporal features of their search intentions and showed the classification results by analyzing search logs of a commercial search engine. Examples of queries classified as having periodic search intentions were presented.
An immediate goal in our future work will be to detect longer periodicities such as seasonal and annual ones by us-ing our method. Successfully addressing the task would lead to the development of a time-dependent search engine that can suitably alter the rankings along with the changes in the search intentions of users. This would enable the search engine to adapt well to the life cycles of the users and to the events that occur with regular periodicity in the real world.
