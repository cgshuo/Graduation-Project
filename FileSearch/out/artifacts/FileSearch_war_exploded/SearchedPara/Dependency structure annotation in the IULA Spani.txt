 Abstract This paper presents the IULA Spanish LSP Treebank, an open-source treebank of over 40,000 sentences, developed in the framework of the European project METANET4U. The IULA Spanish LSP Treebank is the first technical corpus of Spanish annotated at surface syntactic level, following the dependency grammar theory. We present the method we used to create the resource and the linguistic annotations that the treebank provides, using examples and comparing with similar resources. We also provide the statistics of the treebank and the evaluation results. Keywords Spanish Treebank Dependency annotation Technical corpus 1 Introduction Syntactically annotated corpora X  treebanks  X  X onstitute a crucial resource for research in quantitative and qualitative studies of a wide range of phenomena in lexis, grammar, semantics, discourse, language variation, etc., as well as for natural language processing (NLP) research activities, such as training and evaluation data of data-driven parsing systems. Thus, in the past decades, there has been an increasing interest towards the construction of treebanks that provide constituent structure and/or dependency structure annotations.

First works on treebank projects were strongly influenced by the phrase structure grammar and most syntactically annotated corpora conformed to annotations of hierarchical constituent structures, along the lines of the pioneer Lancaster Parsed Corpus (Garside et al. 1992 ) and Penn English Treebank (Marcus et al. 1993 ). But, due to the recent advances in both grammar-driven dependency-based parsing systems (Karlsson 1990 ; Karlsson et al. 1995 ; Maruyama 1990 ; Harper and Helzerman 1995 ;Ja  X  rvinen and Tapanainen 1998 ; Menzel and Schro  X  der 1998 ; Eisner 2000 ; Covington 2001 ; Oflazer 2003 ) and data-driven dependency-based parsing systems (Eisner 1996a , b ; Collins et al. 1999 ; Samuelsson 2000 ; Bangalore 2003 ; Yamada and Matsumoto 2003 ; Nasr and Rambow 2004 ; Nivre et al. 2004 ; Wang et al. 2004 ; McDonald et al. 2005 ) more and more interest is being placed on the annotation of syntactic structure in the form of labeled dependency trees, derived from dependency grammar theories. The seminal work in this direction was the Prague Dependency Treebank (Bo  X  hmova  X  et al. 2003 ), and nowadays dependency treebanks have been built, on a smaller or larger scale, for at least 30 languages, natively or by means of algorithms that convert automatically available phrase structure treebanks to dependency structure notations. Descriptions of available annotated corpora can be found in Abeille  X  ( 2003 ) and in the proceedings from the annual editions of the International Workshop on Treebanks and Linguistic Theories (TLT). Ku  X  bler et al. ( 2009 ) give a thorough introduction to the methods that are most widely used today in dependency parsing, and Kakkonen ( 2005 ) presents the state of the art of dependency-based treebanks.

This paper presents the IULA 1 Spanish LSP 2 Treebank, a dependency treebank developed in the framework of the European project METANET4U. 3 While other existing Spanish treebanks (Moreno et al. 2000 ;Taule  X  et al. 2008 ) are newspaper text, the IULA Spanish LSP Treebank is the first technical corpus of Spanish annotated at surface syntactic level followingthe dependencygrammar theory and,therefore,itisthe only one that can be used in linguistic studies and NLP research activities for this text type in Spanish. The treebank is accessible with a browser that provides concordance-based search functions 4 and it has been made publicly and freely available from the META-SHARE platform 5 with a Creative Commons Attribution 3.0 Unported License. 6
After this introductory section, this article is organized as follows: Sect. 2 presents the main features of the corpus; in Sect. 3 we set out the annotation process; in Sect. 4 we give details about the generated dependency representations; Sect. 5 gives the statistics of the treebank; Sect. 6 presents the methods used to evaluate the quality of the resource; and, finally, Sect. 7 summarizes and presents the conclusions. 2 Description of the corpus The main purpose of this project was to add syntactic information to the Corpus T X cnic de l X  X ULA , a collection of written texts from the fields of Law, Economics, Computer Science, Environment, and Medicine, which includes a range of vertical variation ranging from science divulgation articles to research papers of contem-porary language and which is PoS tagged (Cabre  X  et al. 2006 ; Vivaldi 2009 ). This corpus, of 1,389 documents, contains 31,436,451 words distributed among 412,707 sentences. The distribution of the sentences in the corpus is such that the total amount of sentences whose length ranges from 4 to 30 words represents 65.1 %. Figure 1 shows the ratio of number of sentences per sentence length for the different domains and Table 1 shows a few sample sentences form the Computer Science field. 7
The IULA Spanish LSP Treebank contains over 40,000 syntactically annotated sentences, from 4 to 30 words. In order to annotate a representative sample of the Corpus T X cnic de l X  X ULA which could be used to create a model for automatic annotation, these sentences were chosen at random from the above mentioned range and with the same proportion in terms of number of sentences per length and domain. 8 Table 2 shows the number of sentences per sentence length and Table 3 shows the number of sentences, words, distinct words, and distinct lemmas distributed among the different domains.
 3 The annotation process The corpus was linguistically annotated in three different steps.

First, it was analyzed by means of the FreeLing toolkit 9 (Padro  X  and Stanilovsky 2012 ), which morphologically annotated each word according to the EAGLES tagset for Spanish 10 by dictionary look-up, performed Hidden Markov Model disambiguation, and identified punctuation symbols, mu lti-word units, and Named Entities (NEs). Figure 2 shows an annotation sample with the sentence (1), which includes the tags  X  X P00000 X  and  X  X  X  that FreeLing assigned to proper names and dates, respectively (other tags for NEs are:  X  X  X  for numbers,  X  X  m X  for currencies, and  X  X u X  for measures). (1) El Reino de Espan  X  a aplicara  X   X   X  ntegramente el Second, we parsed the PoS tagged sentences 11 using the Deep Linguistic Processing with HPSG Initiative (DELPH-IN) 12 open-source processing frame-work, also used in several treebank projects (Oepen et al. 2002 ; Hashimoto et al. 2007 ; Branco et al. 2010 ; Kordoni and Zhang 2009 ; Marimon 2010 ; Flickinger et al. 2012 ). The DELPH-IN processing framework offers a range of facilities: (a) the annotation is based on the manual selection of the correct analysis among all the analyses that are produced by a symbolic grammar, instead of using human annotation only 13 ; (b) the use of a stochastic learner that, based on the decisions taken by the annotators, sorts and reduces the outputs generated by the grammar, with a reduction of the manual annotation effort, especially for long sentences; (c) finally, the disambiguation decisions can be reused to update the treebank semi-automatically with a revised version of the grammar.
 In our treebank project, we used a broad-coverage Head-driven Phrase Structure Grammar (HPSG) (Pollard and Sag 1987 , 1994 ) grammar of Spanish implemented in the Linguistic Knowledge Builder (LKB) system (Copestake 2002 ): Spanish Resource Grammar (SRG). A detailed description of the grammar may be found in Marimon ( 2013 ).

The manual selection of the correct parse was done by the help of an interface X  the [incr tstb()] profiling environment (Oepen and Carroll 2000 ) X  X hat allowed the annotator to reduce the set of parses incrementally, through the choice of so-called discriminants (Carter 1997 ); i.e. by selecting (or, alternatively, rejecting) the features that distinguished between the different parses, until the appropriate parse was left. If none of the displayed parses was the correct one, all parses were rejected and an error analysis was performed to evaluate the performance of both the grammar and FreeLing and to identify and correct the grammar deficiencies w.r.t. coverage, errors, and unanticipated interactions. Then, we updated the treebank with the revised version of the grammar. 14 ; 15
As it is always the case with symbolic grammars, SRG produces several hundreds of analyses for a sentence. The DELPH-IN framework, however, provides a MaxEnt based stochastic ranker (Toutanova et al. 2005 ) that sorts the parses produced by the grammar. While this stochastic ranker could not be used to select the correct parse automatically without introducing a considerable amount of errors, it allowed the annotators to reduce the forest to the 500-top readings, such that the disambiguation should not require more than 9 decisions. Statistics were gathered from disambig-uated parses and the MaxEnt model was updated as the number of annotated sentences increased. 16
Finally, an automatic converter was developed to transform selected parses, represented as derivation trees, into dependency trees. 3.1 The conversion procedure: the source and target formats The linguistic analysis produced by the LKB system for each parsed sentence is represented as a parse tree with standard HPSG typed feature structures at each phrasal and lexical node. From this richly annotated output, all kinds of linguistic information can be extracted and represented in different formats that include (a) a binary branching phrase structure tree representing constituency structure, (b) a Minimal Recursion Semantic (MRS) semantic representation (Copestake et al. 2006 ) representing structural semantics (i.e. predicate-argument relations), and (c) a derivation tree representing coarse-grained dependency relations. For the purpose of this paper, we restrict ourselves to the derivation tree, which is the only format we considered to generate the dependency trees.

In the LKB format, derivation trees are encoded in a nested, parenthesized structure whose elements correspond to the identifiers of the phrase structure rules and the lexical items involved in the parsing. Phrase structure rules X  X arked by the suffix  X  _c  X  (for construction) X  X dentify the daughter sequence, separated by a hyphen, and, in headed-phrase constructions, a basic dependency relation between sentence constituents, namely: subject-head ( sb-hd ), head-complement ( hd-cmp ), and head-punctuation ( hd-pt ). Lexical items are annotated with part-of-speech information (e.g. NCMS000, VMIF3S0) and their lexical entry identifier (e.g. arancel_n, aplicar_v-np). 17 Figure 3 shows an example of a derivation tree with the sentence (1).

From this derivation tree, we obtained the information for the dependency structures that the IULA Spanish LSP Treebank provides in the CoNLL standardized format (Buchholz and Marsi 2006 ). In this target annotation, the syntactic analysis assigned to a sentence takes the form of lexical elements linked by asymmetrical dependency relations in which one of the related elements is considered the head of the relation and the other one is its dependent. In this dependency structure, only dependencies between actual words in the sentence are marked, so no elliptical elements are inserted, for example to identify null-subjects in finite clauses (pro-drop) or in infinitive-VP complements. Figure 4 shows the dependency tree for the same sentence as in Fig. 3 .

The conversion is a fully automatic and unambiguous process. A deterministic conversion algorithm makes use of the identifiers of the phrase structure rules to identify the heads, the dependents, and some dependency types that are directly transferred onto the dependency structure, e.g., subject, specifier, and modifier. The identifiers of the lexical entries, which include the syntactic category of the subcategorised elements, enable the identification of the argument-related depen-dency labels, e.g. direct object and indirect object. 4 The syntactic annotation Stemming from the theory of structural syntax developed by Tesnie ` re ( 1959 ), dependency grammar includes a large family of grammatical theories and formalisms that include Word Grammar (Hudson 1984 , 1990 ), Functional Generative Description (Sgall et al. 1986 ), Dependency Unification Grammar (Hellwig 1986 , 2003 ), Meaning-Text Theory (Mel X  X   X  uk 1988 ), Constraint Depen-dency Grammar (Maruyama 1990 ; Harper and Helzerman 1995 ; Menzel and Schro  X  der 1998 ), and Functional Dependency Grammar (Ja  X  rvinen and Tapanainen 1998 ), among others.

Centered upon the notion of dependency, the syntactic structure of a sentence that these frameworks provide is based in asymmetrical relations between a head and a dependent. These frameworks also provide a common analysis for a core of syntactic constructions. However, they differ in the criteria for identifying the head and the dependent in the relations, as well as in the analysis of certain types of syntactic constructions. In addition, the connections between theoretical frame-works and computational systems are often rather loose for dependency-based analysis (cf. Nivre et al. 2005 ), and the same loose connection is observed between theoretical frameworks and dependency treebanks, specially in those treebanks which have been derived from phrase structure annotations.

In this section we present, using examples and comparing with other treebanks, the linguistic annotations that the IULA Spanish LSP Treebank provides following the dependency grammar model. We start with the criteria for identifying the head and the dependent in the relations and the presentation of the dependency relations that we have compiled, then, we discuss the analysis that the treebank provides for coordination constructions and headless constructions. 4.1 Dependency relations, heads, and dependents While head-complement and head-modifier structures receive a fairly unified analysis in existing dependency treebanks, and they only differ with respect to the inventory of specific dependency labels, no agreement has been reached on the analysis of those constructions that involve functional words e.g. determiners, auxiliaries, complementizers, and case-marking prepositions. Based on semantic criteria, some versions treat the content word as the head of the relation. There are also theories and formalisms that make the opposite assumption following syntactic criteria. The IULA Spanish LSP Treebank annotation mostly follows syntactic criteria, as we detail below.  X  Nouns are the heads of noun phrases, and all determiners are their dependents,  X  For prepositional phrases, the treebank also provides the most standard approach  X  In the analysis of subcategorized subordinate clauses introduced by the 4.2 Coordination structures Coordination structures are often cited as one of the major problems in dependency grammar, since, even in their simplest case (i.e. a coordinating conjunction joins two syntactically compatible words or phrases), it is not possible to characterize them as asymmetrical relations between a head and a dependent. 23
In an early solution proposed by Tesnie ` re ( 1959 ), all conjuncts are attached directly to the head by horizontal edges and to the conjunction by vertical edges. Since then, many different alternatives have been proposed and adopted in the different treebank projects.

One alternative, proposed by Sgall et al. ( 1986 ) and used, for instance, by Beek Smrz et al. ( 2008 ), and Husain et al. ( 2010 ) is to assume that all conjuncts are headed by the coordinating conjunction (Fig. 9 a).

In a different analysis, originally proposed by Mel X  X   X  uk ( 1988 ), the first conjunct is the head of the other elements, which are organized in a chain; i.e. the conjunction is a dependent of the first conjunct and the second conjunct of the conjunction (in multi-conjunct coordination, the conjunction depends on the penultimate conjunct and the last conjunct on the conjunction) (Fig. 9 b). This approach has been followed in Brants et al. ( 2004 ), Ja  X  rvinen and Tapanainen ( 1998 ), Nilsson et al. ( 2005 ), Vincze et al. ( 2010 ), and Seeker and Kuhn ( 2012 ).

Finally, the first conjunct is the head and all other elements (including the conjunction) are attached directly to it (Afonso et al. 2002 ; Montemagni et al. 2003 ; Simov and Osenova 2005 ; Taule  X  et al. 2008 ) (Fig. 9 c).
 Figure 9 shows schematics of the three possibilities.

Various arguments can be found to support the particular choices. Sgall et al. ( 1986 ) X  X  approach provides more expressive power than Mel X  X   X  uk ( 1988 ) X  X  option, since it allows to distinguish between dependents that affect the entire coordination and dependents that affect only a particular conjunct. Mel X  X   X  uk ( 1988 ) X  X  has been proved to be best suited to dependency parsing (Nilsson et al. 2006 ).
Since one of the purposes of the treebank is to be a training corpus for the development of data-driven dependency-parsing, we have taken Mel X  X   X  uk ( 1988 ) X  X  approach, and coordinated elements are organized in a chain. This is illustrated in Fig. 10 with the noun phrase (9). (9) Una agenda y algunas relaciones sociales o profesionales In multi-conjunct coordinated constructions, we use the label ENUM, instead of CONJ, in all but the last coordinated element, as we illustrate in Fig. 11 with the sentence (10). (10) Esta dif X   X  cil tarea requiere tacto, sentido comu  X  n, compasio  X  ny 4.3 Elliptical structures Headless constructions X  X .e. elliptical structures where the head is elided X  X re one of the weaker points in dependency grammar approaches, since they assume that the dependency representation is restricted to the surface of the sentence and it is not clear where the dependents of an elided head should be attached.

For elliptical noun phrases, the standard strategy in dependency corpora is the following: the modifier of the elided head is chosen to become the head of the construction and it is labeled with the syntactic function of the elided head.
For elliptical finite verbs in e.g. gapping constructions, a number of idiosyncratic solutions have been proposed. One solution is to choose one of the dependents of a headless phrase to become the head, as in Brants et al. ( 2004 ).

In another solution, Mel X  X   X  uk ( 1988 ) introduces a zero word form (i.e. a phonetically empty head) into the dependency tree to provide an attachment point for the dependents of the ellipsis. Empty heads are used in several treebank projects, and Kuhn ( 2012 ), since they allow to preserve the parallelism in the syntactic structure of the two conjuncts; however, no statistical dependency parsing method models phonetically empty heads convincingly and performs on a satisfactory level. A third solution is the analysis we have adopted, also found in Ja  X  rvinen and Tapanainen ( 1998 ), Bo  X  hmova  X  et al. ( 2003 ), Kromann ( 2003 ), and Oflazer et al. ( 2003 ), where the coordinating conjunction (or a comma) represents the missing verb and inherits all its properties, such that subjects, complements, and adjuncts are linked to it, marked as SUBJ-GAP, COMP-GAP, and MOD-GAP.

Figure 12 illustrates the analysis of both elliptical noun phrases and gapping that the treebank provides with the sentence (11), in which the subject of the elliptical finite verb is a noun phrase whose head is elided. (11) Se necesita el m X   X  nimo cuando esta  X  n en orden inverso y 5 Statistics of the treebank As we have already mentioned in Sect. 2 , the IULA Spanish LSP Treebank contains 40,106 sentences distributed among different domains. The details about the statistics is shown in Table 3 . It is worth mentioning that 11.59 % of the words in the treebank are tagged as verb, 25 % as common noun, and 9.81 % as adjectives, as we show in Table 5 , which displays the relative frequency of the syntactic categories in the corpus. Finally, Table 6 gives some figures for the occurrences of the dependency tags identified in the treebank. 6 Quality evaluation To guarantee consistency, that is, that the same phenomena get the same annotation through the corpus, is crucial for any of the possible uses of the treebank. We measured the consistency level of the annotation using inter-annotator agreement analysis. 24
Three tests were done on three different series of 100 sentences (chosen at random from all domains) with two annotators (Ph.D. students) in three different moments in a six month period. We measured full agreement in selecting the analysis produced by the HPSG grammar. The agreements achieved in these tests were 75, 60, and 78 %.

Close examination of the disagreements allowed us to categorize them as follows:  X  Misunderstanding of the annotation guidelines which discussed the meaning of  X  Distinction between complements and modifiers. Whether a phrase is a nominal  X  The choice of the appropriate lexical entry of some words in certain contexts.  X  Adverbs caused analysis differences among annotators, especially in relation to  X  The inherent linguistic ambiguity of PP-attachment.  X  Complex syntactic issues. This included several types of syntactic constructions,  X  Annotators X  fatigue. Although some types of errors decreased when the 7 Conclusions This paper has described the IULA Spanish LSP Treebank, a dependency treebank of over 40,000 sentences, developed in the framework of the European project METANET4U. The IULA Spanish LSP Treebank is the first technical corpus of Spanish annotated at surface syntactic level, following the dependency grammar theory. We have described the different steps of the annotation process and we have given details about the generated dependency structures that the treebank provides, discussing the annotation options chosen. We have also provided the statistics of the treebank and the evaluation results. In the future, we plan to annotate more sentences and to include in the treebank semantic roles by extracting them from the MRS semantic representation.
 References
 Abstract This paper presents the IULA Spanish LSP Treebank, an open-source treebank of over 40,000 sentences, developed in the framework of the European project METANET4U. The IULA Spanish LSP Treebank is the first technical corpus of Spanish annotated at surface syntactic level, following the dependency grammar theory. We present the method we used to create the resource and the linguistic annotations that the treebank provides, using examples and comparing with similar resources. We also provide the statistics of the treebank and the evaluation results. Keywords Spanish Treebank Dependency annotation Technical corpus 1 Introduction Syntactically annotated corpora X  treebanks  X  X onstitute a crucial resource for research in quantitative and qualitative studies of a wide range of phenomena in lexis, grammar, semantics, discourse, language variation, etc., as well as for natural language processing (NLP) research activities, such as training and evaluation data of data-driven parsing systems. Thus, in the past decades, there has been an increasing interest towards the construction of treebanks that provide constituent structure and/or dependency structure annotations.

First works on treebank projects were strongly influenced by the phrase structure grammar and most syntactically annotated corpora conformed to annotations of hierarchical constituent structures, along the lines of the pioneer Lancaster Parsed Corpus (Garside et al. 1992 ) and Penn English Treebank (Marcus et al. 1993 ). But, due to the recent advances in both grammar-driven dependency-based parsing systems (Karlsson 1990 ; Karlsson et al. 1995 ; Maruyama 1990 ; Harper and Helzerman 1995 ;Ja  X  rvinen and Tapanainen 1998 ; Menzel and Schro  X  der 1998 ; Eisner 2000 ; Covington 2001 ; Oflazer 2003 ) and data-driven dependency-based parsing systems (Eisner 1996a , b ; Collins et al. 1999 ; Samuelsson 2000 ; Bangalore 2003 ; Yamada and Matsumoto 2003 ; Nasr and Rambow 2004 ; Nivre et al. 2004 ; Wang et al. 2004 ; McDonald et al. 2005 ) more and more interest is being placed on the annotation of syntactic structure in the form of labeled dependency trees, derived from dependency grammar theories. The seminal work in this direction was the Prague Dependency Treebank (Bo  X  hmova  X  et al. 2003 ), and nowadays dependency treebanks have been built, on a smaller or larger scale, for at least 30 languages, natively or by means of algorithms that convert automatically available phrase structure treebanks to dependency structure notations. Descriptions of available annotated corpora can be found in Abeille  X  ( 2003 ) and in the proceedings from the annual editions of the International Workshop on Treebanks and Linguistic Theories (TLT). Ku  X  bler et al. ( 2009 ) give a thorough introduction to the methods that are most widely used today in dependency parsing, and Kakkonen ( 2005 ) presents the state of the art of dependency-based treebanks.

This paper presents the IULA 1 Spanish LSP 2 Treebank, a dependency treebank developed in the framework of the European project METANET4U. 3 While other existing Spanish treebanks (Moreno et al. 2000 ;Taule  X  et al. 2008 ) are newspaper text, the IULA Spanish LSP Treebank is the first technical corpus of Spanish annotated at surface syntactic level followingthe dependencygrammar theory and,therefore,itisthe only one that can be used in linguistic studies and NLP research activities for this text type in Spanish. The treebank is accessible with a browser that provides concordance-based search functions 4 and it has been made publicly and freely available from the META-SHARE platform 5 with a Creative Commons Attribution 3.0 Unported License. 6
After this introductory section, this article is organized as follows: Sect. 2 presents the main features of the corpus; in Sect. 3 we set out the annotation process; in Sect. 4 we give details about the generated dependency representations; Sect. 5 gives the statistics of the treebank; Sect. 6 presents the methods used to evaluate the quality of the resource; and, finally, Sect. 7 summarizes and presents the conclusions. 2 Description of the corpus The main purpose of this project was to add syntactic information to the Corpus T X cnic de l X  X ULA , a collection of written texts from the fields of Law, Economics, Computer Science, Environment, and Medicine, which includes a range of vertical variation ranging from science divulgation articles to research papers of contem-porary language and which is PoS tagged (Cabre  X  et al. 2006 ; Vivaldi 2009 ). This corpus, of 1,389 documents, contains 31,436,451 words distributed among 412,707 sentences. The distribution of the sentences in the corpus is such that the total amount of sentences whose length ranges from 4 to 30 words represents 65.1 %. Figure 1 shows the ratio of number of sentences per sentence length for the different domains and Table 1 shows a few sample sentences form the Computer Science field. 7
The IULA Spanish LSP Treebank contains over 40,000 syntactically annotated sentences, from 4 to 30 words. In order to annotate a representative sample of the Corpus T X cnic de l X  X ULA which could be used to create a model for automatic annotation, these sentences were chosen at random from the above mentioned range and with the same proportion in terms of number of sentences per length and domain. 8 Table 2 shows the number of sentences per sentence length and Table 3 shows the number of sentences, words, distinct words, and distinct lemmas distributed among the different domains.
 3 The annotation process The corpus was linguistically annotated in three different steps.

First, it was analyzed by means of the FreeLing toolkit 9 (Padro  X  and Stanilovsky 2012 ), which morphologically annotated each word according to the EAGLES tagset for Spanish 10 by dictionary look-up, performed Hidden Markov Model disambiguation, and identified punctuation symbols, mu lti-word units, and Named Entities (NEs). Figure 2 shows an annotation sample with the sentence (1), which includes the tags  X  X P00000 X  and  X  X  X  that FreeLing assigned to proper names and dates, respectively (other tags for NEs are:  X  X  X  for numbers,  X  X  m X  for currencies, and  X  X u X  for measures). (1) El Reino de Espan  X  a aplicara  X   X   X  ntegramente el Second, we parsed the PoS tagged sentences 11 using the Deep Linguistic Processing with HPSG Initiative (DELPH-IN) 12 open-source processing frame-work, also used in several treebank projects (Oepen et al. 2002 ; Hashimoto et al. 2007 ; Branco et al. 2010 ; Kordoni and Zhang 2009 ; Marimon 2010 ; Flickinger et al. 2012 ). The DELPH-IN processing framework offers a range of facilities: (a) the annotation is based on the manual selection of the correct analysis among all the analyses that are produced by a symbolic grammar, instead of using human annotation only 13 ; (b) the use of a stochastic learner that, based on the decisions taken by the annotators, sorts and reduces the outputs generated by the grammar, with a reduction of the manual annotation effort, especially for long sentences; (c) finally, the disambiguation decisions can be reused to update the treebank semi-automatically with a revised version of the grammar.
 In our treebank project, we used a broad-coverage Head-driven Phrase Structure Grammar (HPSG) (Pollard and Sag 1987 , 1994 ) grammar of Spanish implemented in the Linguistic Knowledge Builder (LKB) system (Copestake 2002 ): Spanish Resource Grammar (SRG). A detailed description of the grammar may be found in Marimon ( 2013 ).

The manual selection of the correct parse was done by the help of an interface X  the [incr tstb()] profiling environment (Oepen and Carroll 2000 ) X  X hat allowed the annotator to reduce the set of parses incrementally, through the choice of so-called discriminants (Carter 1997 ); i.e. by selecting (or, alternatively, rejecting) the features that distinguished between the different parses, until the appropriate parse was left. If none of the displayed parses was the correct one, all parses were rejected and an error analysis was performed to evaluate the performance of both the grammar and FreeLing and to identify and correct the grammar deficiencies w.r.t. coverage, errors, and unanticipated interactions. Then, we updated the treebank with the revised version of the grammar. 14 ; 15
As it is always the case with symbolic grammars, SRG produces several hundreds of analyses for a sentence. The DELPH-IN framework, however, provides a MaxEnt based stochastic ranker (Toutanova et al. 2005 ) that sorts the parses produced by the grammar. While this stochastic ranker could not be used to select the correct parse automatically without introducing a considerable amount of errors, it allowed the annotators to reduce the forest to the 500-top readings, such that the disambiguation should not require more than 9 decisions. Statistics were gathered from disambig-uated parses and the MaxEnt model was updated as the number of annotated sentences increased. 16
Finally, an automatic converter was developed to transform selected parses, represented as derivation trees, into dependency trees. 3.1 The conversion procedure: the source and target formats The linguistic analysis produced by the LKB system for each parsed sentence is represented as a parse tree with standard HPSG typed feature structures at each phrasal and lexical node. From this richly annotated output, all kinds of linguistic information can be extracted and represented in different formats that include (a) a binary branching phrase structure tree representing constituency structure, (b) a Minimal Recursion Semantic (MRS) semantic representation (Copestake et al. 2006 ) representing structural semantics (i.e. predicate-argument relations), and (c) a derivation tree representing coarse-grained dependency relations. For the purpose of this paper, we restrict ourselves to the derivation tree, which is the only format we considered to generate the dependency trees.

In the LKB format, derivation trees are encoded in a nested, parenthesized structure whose elements correspond to the identifiers of the phrase structure rules and the lexical items involved in the parsing. Phrase structure rules X  X arked by the suffix  X  _c  X  (for construction) X  X dentify the daughter sequence, separated by a hyphen, and, in headed-phrase constructions, a basic dependency relation between sentence constituents, namely: subject-head ( sb-hd ), head-complement ( hd-cmp ), and head-punctuation ( hd-pt ). Lexical items are annotated with part-of-speech information (e.g. NCMS000, VMIF3S0) and their lexical entry identifier (e.g. arancel_n, aplicar_v-np). 17 Figure 3 shows an example of a derivation tree with the sentence (1).

From this derivation tree, we obtained the information for the dependency structures that the IULA Spanish LSP Treebank provides in the CoNLL standardized format (Buchholz and Marsi 2006 ). In this target annotation, the syntactic analysis assigned to a sentence takes the form of lexical elements linked by asymmetrical dependency relations in which one of the related elements is considered the head of the relation and the other one is its dependent. In this dependency structure, only dependencies between actual words in the sentence are marked, so no elliptical elements are inserted, for example to identify null-subjects in finite clauses (pro-drop) or in infinitive-VP complements. Figure 4 shows the dependency tree for the same sentence as in Fig. 3 .

The conversion is a fully automatic and unambiguous process. A deterministic conversion algorithm makes use of the identifiers of the phrase structure rules to identify the heads, the dependents, and some dependency types that are directly transferred onto the dependency structure, e.g., subject, specifier, and modifier. The identifiers of the lexical entries, which include the syntactic category of the subcategorised elements, enable the identification of the argument-related depen-dency labels, e.g. direct object and indirect object. 4 The syntactic annotation Stemming from the theory of structural syntax developed by Tesnie ` re ( 1959 ), dependency grammar includes a large family of grammatical theories and formalisms that include Word Grammar (Hudson 1984 , 1990 ), Functional Generative Description (Sgall et al. 1986 ), Dependency Unification Grammar (Hellwig 1986 , 2003 ), Meaning-Text Theory (Mel X  X   X  uk 1988 ), Constraint Depen-dency Grammar (Maruyama 1990 ; Harper and Helzerman 1995 ; Menzel and Schro  X  der 1998 ), and Functional Dependency Grammar (Ja  X  rvinen and Tapanainen 1998 ), among others.

Centered upon the notion of dependency, the syntactic structure of a sentence that these frameworks provide is based in asymmetrical relations between a head and a dependent. These frameworks also provide a common analysis for a core of syntactic constructions. However, they differ in the criteria for identifying the head and the dependent in the relations, as well as in the analysis of certain types of syntactic constructions. In addition, the connections between theoretical frame-works and computational systems are often rather loose for dependency-based analysis (cf. Nivre et al. 2005 ), and the same loose connection is observed between theoretical frameworks and dependency treebanks, specially in those treebanks which have been derived from phrase structure annotations.

In this section we present, using examples and comparing with other treebanks, the linguistic annotations that the IULA Spanish LSP Treebank provides following the dependency grammar model. We start with the criteria for identifying the head and the dependent in the relations and the presentation of the dependency relations that we have compiled, then, we discuss the analysis that the treebank provides for coordination constructions and headless constructions. 4.1 Dependency relations, heads, and dependents While head-complement and head-modifier structures receive a fairly unified analysis in existing dependency treebanks, and they only differ with respect to the inventory of specific dependency labels, no agreement has been reached on the analysis of those constructions that involve functional words e.g. determiners, auxiliaries, complementizers, and case-marking prepositions. Based on semantic criteria, some versions treat the content word as the head of the relation. There are also theories and formalisms that make the opposite assumption following syntactic criteria. The IULA Spanish LSP Treebank annotation mostly follows syntactic criteria, as we detail below.  X  Nouns are the heads of noun phrases, and all determiners are their dependents,  X  For prepositional phrases, the treebank also provides the most standard approach  X  In the analysis of subcategorized subordinate clauses introduced by the 4.2 Coordination structures Coordination structures are often cited as one of the major problems in dependency grammar, since, even in their simplest case (i.e. a coordinating conjunction joins two syntactically compatible words or phrases), it is not possible to characterize them as asymmetrical relations between a head and a dependent. 23
In an early solution proposed by Tesnie ` re ( 1959 ), all conjuncts are attached directly to the head by horizontal edges and to the conjunction by vertical edges. Since then, many different alternatives have been proposed and adopted in the different treebank projects.

One alternative, proposed by Sgall et al. ( 1986 ) and used, for instance, by Beek Smrz et al. ( 2008 ), and Husain et al. ( 2010 ) is to assume that all conjuncts are headed by the coordinating conjunction (Fig. 9 a).

In a different analysis, originally proposed by Mel X  X   X  uk ( 1988 ), the first conjunct is the head of the other elements, which are organized in a chain; i.e. the conjunction is a dependent of the first conjunct and the second conjunct of the conjunction (in multi-conjunct coordination, the conjunction depends on the penultimate conjunct and the last conjunct on the conjunction) (Fig. 9 b). This approach has been followed in Brants et al. ( 2004 ), Ja  X  rvinen and Tapanainen ( 1998 ), Nilsson et al. ( 2005 ), Vincze et al. ( 2010 ), and Seeker and Kuhn ( 2012 ).

Finally, the first conjunct is the head and all other elements (including the conjunction) are attached directly to it (Afonso et al. 2002 ; Montemagni et al. 2003 ; Simov and Osenova 2005 ; Taule  X  et al. 2008 ) (Fig. 9 c).
 Figure 9 shows schematics of the three possibilities.

Various arguments can be found to support the particular choices. Sgall et al. ( 1986 ) X  X  approach provides more expressive power than Mel X  X   X  uk ( 1988 ) X  X  option, since it allows to distinguish between dependents that affect the entire coordination and dependents that affect only a particular conjunct. Mel X  X   X  uk ( 1988 ) X  X  has been proved to be best suited to dependency parsing (Nilsson et al. 2006 ).
Since one of the purposes of the treebank is to be a training corpus for the development of data-driven dependency-parsing, we have taken Mel X  X   X  uk ( 1988 ) X  X  approach, and coordinated elements are organized in a chain. This is illustrated in Fig. 10 with the noun phrase (9). (9) Una agenda y algunas relaciones sociales o profesionales In multi-conjunct coordinated constructions, we use the label ENUM, instead of CONJ, in all but the last coordinated element, as we illustrate in Fig. 11 with the sentence (10). (10) Esta dif X   X  cil tarea requiere tacto, sentido comu  X  n, compasio  X  ny 4.3 Elliptical structures Headless constructions X  X .e. elliptical structures where the head is elided X  X re one of the weaker points in dependency grammar approaches, since they assume that the dependency representation is restricted to the surface of the sentence and it is not clear where the dependents of an elided head should be attached.

For elliptical noun phrases, the standard strategy in dependency corpora is the following: the modifier of the elided head is chosen to become the head of the construction and it is labeled with the syntactic function of the elided head.
For elliptical finite verbs in e.g. gapping constructions, a number of idiosyncratic solutions have been proposed. One solution is to choose one of the dependents of a headless phrase to become the head, as in Brants et al. ( 2004 ).

In another solution, Mel X  X   X  uk ( 1988 ) introduces a zero word form (i.e. a phonetically empty head) into the dependency tree to provide an attachment point for the dependents of the ellipsis. Empty heads are used in several treebank projects, and Kuhn ( 2012 ), since they allow to preserve the parallelism in the syntactic structure of the two conjuncts; however, no statistical dependency parsing method models phonetically empty heads convincingly and performs on a satisfactory level. A third solution is the analysis we have adopted, also found in Ja  X  rvinen and Tapanainen ( 1998 ), Bo  X  hmova  X  et al. ( 2003 ), Kromann ( 2003 ), and Oflazer et al. ( 2003 ), where the coordinating conjunction (or a comma) represents the missing verb and inherits all its properties, such that subjects, complements, and adjuncts are linked to it, marked as SUBJ-GAP, COMP-GAP, and MOD-GAP.

Figure 12 illustrates the analysis of both elliptical noun phrases and gapping that the treebank provides with the sentence (11), in which the subject of the elliptical finite verb is a noun phrase whose head is elided. (11) Se necesita el m X   X  nimo cuando esta  X  n en orden inverso y 5 Statistics of the treebank As we have already mentioned in Sect. 2 , the IULA Spanish LSP Treebank contains 40,106 sentences distributed among different domains. The details about the statistics is shown in Table 3 . It is worth mentioning that 11.59 % of the words in the treebank are tagged as verb, 25 % as common noun, and 9.81 % as adjectives, as we show in Table 5 , which displays the relative frequency of the syntactic categories in the corpus. Finally, Table 6 gives some figures for the occurrences of the dependency tags identified in the treebank. 6 Quality evaluation To guarantee consistency, that is, that the same phenomena get the same annotation through the corpus, is crucial for any of the possible uses of the treebank. We measured the consistency level of the annotation using inter-annotator agreement analysis. 24
Three tests were done on three different series of 100 sentences (chosen at random from all domains) with two annotators (Ph.D. students) in three different moments in a six month period. We measured full agreement in selecting the analysis produced by the HPSG grammar. The agreements achieved in these tests were 75, 60, and 78 %.

Close examination of the disagreements allowed us to categorize them as follows:  X  Misunderstanding of the annotation guidelines which discussed the meaning of  X  Distinction between complements and modifiers. Whether a phrase is a nominal  X  The choice of the appropriate lexical entry of some words in certain contexts.  X  Adverbs caused analysis differences among annotators, especially in relation to  X  The inherent linguistic ambiguity of PP-attachment.  X  Complex syntactic issues. This included several types of syntactic constructions,  X  Annotators X  fatigue. Although some types of errors decreased when the 7 Conclusions This paper has described the IULA Spanish LSP Treebank, a dependency treebank of over 40,000 sentences, developed in the framework of the European project METANET4U. The IULA Spanish LSP Treebank is the first technical corpus of Spanish annotated at surface syntactic level, following the dependency grammar theory. We have described the different steps of the annotation process and we have given details about the generated dependency structures that the treebank provides, discussing the annotation options chosen. We have also provided the statistics of the treebank and the evaluation results. In the future, we plan to annotate more sentences and to include in the treebank semantic roles by extracting them from the MRS semantic representation.
 References
