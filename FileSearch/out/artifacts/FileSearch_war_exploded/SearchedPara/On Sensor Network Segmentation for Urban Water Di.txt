 In cities across the world, city councils and corporations are desperately taking measures to conserve the consumable water so as to prevent the water getting scarce save the water and maintain a substantial level of water for consumption purposes. On the other hand, there are certain defects in the water distribution system which could potentially lose water that is being so carefully collected and saved. The major cause dissipate treated valuable water into the ground which often causes further damage. 
The timely identification of such leaks is very critical. There are existing methods to deal with water pipe leakage detection [2] [3] but in general, they do not fare very foreseeable that investments would be made to detect and attend water leakage in the pipelines effectively and efficiently. development of sensor nodes are being widely utilised with relatively low cost incurred. The increased deployment of sensor nodes for environmental monitoring leak detection in water pipes and in general water flow management in the water pipelines. 
The goal of this paper is investigation towards feasibility of deployment of a simple sensor network solution for leak detection. The mentioned simplicity is mainly only basic data collection required. 
We design the model of the sensor network that is used for the purpose and then propose a computational model to hierarchical ly determine the leaks in the water pipe systems with certain pre-specified accuracy in a given time interval. The main focus multi-level testing approach to pipes X  failure detection. We show a method for sensors the optimal network segmentation problem is expected to be very hard. The paper shows a heuristic method to build effective hierarchy of the network segmentation. 
The solution presented is surrounded by several but realistic assumptions that could be gradually dropped when more advanced model will be devoted to this problem. To maintain a realistic view on the water systems, we assume more than one water source for a modelled regional water distribution system. The number of water sources is typically small in practice. This implies that the direction of the water flow among certain water pipes cannot be predetermined; at the same pipe water may flow in any direction at a given time. The unpredictability of the direction of water flow in the water pipe segments arise from the variance in the consumption level at the usage points and the water pressure maintained in the distribution system. 
Additionally, we distinguish usage points (consumption units) located in the residential or business units where the water is consumed. The number of such units is rather large, in order of thousands, as schematically depicted on figure 1. 
The intersection/connection points of the water pipes are defined as the junction points where the pipes are split into two or more pipes for distribution purposes. We define a water pipe segment as a water pipe where there are other water pipes connected nowhere other than its end points. Hence the water pipe segment is segment could be a pipe which terminates at one point and is connected to the network only at one intersection point. 
More generally, by the network segment we name any sub-network with potentially many end points; being either original water source(s) or artificially constructed by pipe X  X  split imposed by the definition of the segments. This notion will be illustrated later in a greater level of details. 
Further, we make another realistic assumption that the water pipes are full of water initially, with some dynamically changeable pressure due to the usage (consumption) and additional pumps X  actions. Let us consider the fixed network of pipes (no new consumptions points established during the testing sessions), equipped with k water sources of known supply capacity and with q consumption points with q &gt;&gt; k. 
Our goal is to design a sensor-based testing facility for leaking problem. The other words, we want to demonstrate that regular monitoring of the data collected by the deployed sensors will identify all water leaks on pipes X  segments with accuracy of the location to the predefined pipe length. 4.1 The Sensor Nodes measures the water usage on the end points of water distribution as well as at intermediate points so that the presence of leaks could be located with required accuracy. The sensors are positioned along the water pipe supply distribution system of the area under consideration. 
Our goal is show that required testing can be accomplished by a network with greatly simplified functional requirements for all deployed sensors. We assume that each sensor is capable to observe and temporarily store only two values at any given time/period of the measurement; 
Hence, further we assume that each sensor has a small data storage space and is capable to communicating to other nodes as dictated by the communication protocol. The very important assumption that is to be made is the presence of the time synchronisation of the network nodes. Since data collected from distributed nodes are point identified that is actually the timestamp on which the values that will be fused are recorded. There are certain dedicated appr oaches [6] [7] [8] employed in order to achieve time synchronisation. We further assume that acceptable time synchronisation is already established among the nodes of the network. 
There is a trade-off between some functional capabilities which are mainly the communication capacity of sensor nodes and the number of sensor nodes that are used functionalities (small transmission ranges) or there could be less dense set of sensors be stricken with a hierarchical level of sensor nodes deployed depending on their need and purpose in the network.

It is rather simple to observe that to be able to reason about in-flow water distribution to many consumption nodes along a main pipe (regardless of number of supply sources and water flow direction) one must get flow measurements in at least pipes in the network. However, due to accuracy being a parameter of the testing facility, this number may be larger reflecting actual length of the pipe. 4.2 The Sensor Network Model presented above by the following mathematical model. We begin with introduction of essential notation. Let the water distribution network W = (S, C, P) consists of a set and a set of connected main pipes 12 m P = {p , p , ..., p } . Given such water distribution network, we now define sensors network for W, SN (W) by adding the next layer where sensor nodes, to measure water in-flow and consumption, are positioned and connected to form a sensor network. 
As mentioned before, we distinguish two types of nodes in the network those associated with the consumption nodes and the distribution nodes. With each consumption point i c we associate a sensor node placed at that network point, essentially a sensor located on the water meter which measure the water consumption of that position. Without any loss of specification precision, we use the same notation for these sensors as for corresponding water network nodes, we call them i c , where i = (1, 2, ..., q). 
Further, we extend collection of sensors deployed by the SN by defining another d and 2 j d denotes a pair of sensor nodes placed one each at both the ends of the pipe segment j pP  X  in W. 
The next important question to be addressed is the number of required sensors and their exact positioning along the pipes to achieve desired leak testing quality. Before we address this challenging question let us focus now on data to be collected by this sensors environment and the infrastructural physical requirements for the sensing devices to effectively accomplish the collection. 
For correct correlation purpose, all measurements must be time stamped and cover flow volume as well as direction of the flow at the given time. Collection of this data type requires specialised physical device capable to function accordingly with the change of the direction of the water flow. In each network X  X  segment, over a period of time the direction change may occur several times, each redirection must be reflected by the data collected and allied with the corresponding volumes. Each sensor i c is capable of measuring of water flow volume i v( ) s t where s t is SN global timestamp generated in regular intervals of T time units. 
The consumption sensors can be designed in such a way so as to get activated and distribution sensors we must look one more time on flow directions in a pipe of W. 
As we mentioned previously, the direction of water can change over some unpredictable periods of time. The flow direction can only be specified in relation to we introduce the direction of water towards a network segment in later sections. In the flown into and flown away from the whole pipe from either or both directions. 
In accordance with our specification of the location of the distribution nodes earlier, if we consider a pipe segment j pP  X  , then the distribution sensor nodes at the water consumed by the consumption nodes placed all over the pipe j p . The location of these computations does not come under the scope of this paper and it is assumed that those computations happen pertaining to the communication methodology. The expression for computing a leak in a single pipe is given clearly in the next section. 4.3 Sensors Numbers and Positioning When designing a sensor network, important consideration is related to establishing the minimum number of sensors to be adopted, their unique positions to offer required data collection facilities and communication between collaborating nodes. In this in this application can be arranged by adopting solutions presented in [9] [10]. 
Before we consider data monitoring mechanism for an arbitrary pipes network W let us consider a special case of our problem; W consisting only a single pipe j p. 
Thus if our problem is of the distribution nodes location identification then the solution in this special case is obvious; we need only two distribution sensors located requirements; in case that pipe j p is longer than the length of monitoring segment set for accuracy. Leak identification can be achieved by considering the following simple expression (1) that checks the balance between the volumes of water used with the volume of the water supplied to pipe j p. Let 1  X  c , ..., c be the consumption nodes that measured at d j 1 at s t and the other notations are self explanatory. 
If this equation does not hold true, then it is implied that all the water flowing into the pipe is not being consumed by the consumption units over it. Thus there are one or expression that holds good only for single pipe considerations as the notions of IN and OUT lose credible balance when we extend our interest to finding leaks for a segment of a network rather than a pipe alone. 
Thus, to extend this consideration to more general network structure, we assume now that W has a tree structure embedded within itself as depicted in figure 4 below. number of simple pipes; each link of a tree is a single pipe. Thus the location of the distribution nodes can be derived from the simple case presented above. As we sensors, if we are interested on the region covered by the above network segment. Especially nodes positioned on end points of links sharing the junction points can be regarded as redundant. 
In other words, the nodes that are not leaf nodes will have distribution nodes present over the links stemming out from them and the readings from those distribution nodes are not actually needed to detect the presence of a leak considering the whole network segment. In the figure above, the distribution nodes covered by shaded circles are not needed for evaluating the presence of leak in the whole segment because they do not contribute to the inflow and outflow of water with respect to the whole network segment. 
However, nodes on all end points of the tree are indispensable for identifying water leakage. As before, we are able to es tablish the minimum number of distribution requirement may increase th is number accordingly. 
Let 1k d , ..., d be the set of distribution nodes which are placed in all the leaf nodes located within this tree segment. Now, still we can use the IN and OUT functions to just next to the pipe junction points. 
It is to be observed here that (2) is a general version of (1) wherein we have more than two distribution nodes at the end of the segment which is under consideration. In segment. segment the network on any arbitrary point over a pipe, which is detailed in the following section. 
Thus by simple observations and generalisation of the special cases presented we can see how to approach leak det ection in an arbitrary network W. 4.4 Network Segmentation systematically, regularly compare all in-flows from water supply sources with all legitimate out-flows at the consumption points. However, in practice such leak pipe system, the change in the pressure of flows, subtle delays in actual water measurements, some accepted and unavoidable losses and more complicated flow X  X  physics of hydrological nature potentially add great deal of noise into the data used. about individual pipes) is not required. 
The challenge is to strike the right balance of measures to guarantee the expected accuracy and not measure too often at too many points. 
The most natural approach seems to be a hierarchical based on sub-regions of level of individual pipes sections (acco rding to the set accuracy parameters). 
Since we understand how to monitor larger segments of W (not only limited to individual pipes), the remaining challenge is to design segmentation of the pipe network controlled. By segmentation, we mean to identify cut points over the pipes, on which if a cut is made the network will be rendered into a certain amount of segments. 
The distinction here from the previous cases is that the distribution nodes will have to be placed at the cut points over the pipes which mark end points of network segments. In those nodes, the notion of IN and OUT does not hold any value because participates in two network segments and will be the end point in both the segments. Each distribution node placed in a cut point will be measuring the flow of water considered inflow for one segment and outflow for the other segment. This is formally explained in the following paragraphs. 
Let W be a pipe network supporting region A. The accuracy consideration calls for introduction of function length L defined for all pipes; j (p ) L . Further, we use L to indicate the total length of all pipes in W; The problem of the network segmentation can be formulated as follows. corresponding i W as the intersection of i A with W in a natural way. 
For a given W with length L over A, find such a cover of A by 12 p A , A , ..., A that  X  , 
Clearly, in general, the number of such covers can be large, what is characteristic computationally intensive being an exponential problem. In this paper will not search segmentation. 
In order to define the inflow and outflow with respect to the segments, let us consider pipe segments that are present in that particular segment. If II  X  X  X  X  ij , where i , j = 1,2,...,p then it means that those two segments I i and I j share one or more pipes. 
Let us consider 
J represents all the shared pipes between the network segments I i and I i . To define inflow and outflow, we focus on one element of ij J , p o . 
Hence, calculating the amount of water flown through a cut point used to partition performed, can be done using the previous expression as inputs. For a particular pipe o , the amount of water flown at a cut point in timestamp s t is recorded and is used accordingly for leak identification in different network segments. 4.5 Heuristic Method for Network Segmentation We begin with demonstration that two different network fragmentations leads to different pipes X  crossing points. For the sake of simplicity we do not show i A regions on the following figure. Without any loss of generality, we do not consider consumpt-ion nodes but mainly concentrate on positioning, only indispensable to the overall testing problem, distribution sensor nodes. 
Our pipe network model can be interpre ted as a planar, directed graph with corresponding to the direction of the pipe. 
The heuristic method developed is based on the Euler formula [11] showing for every planar graph correspondence between numbers of nodes n, links l and closed components c of the graph as follows Our segmentation method can be presented by listing its main two steps; 
Step 1  X  Transforming the network into a tree by splitting (cutting) all closed components, 
Step 2  X  Following the branches of the tree in a bottom-up fashion, cut further links to get required size (length) of the network segment. 
Step 1 delivers all additional end points that must be equipped with the distribution measurement facility. This number can be well estimated by the following figure c= l-(n+1). Note that there are many possibilities in choosing the link to be cut for a close component; meaning that many different trees can be constructed by the step 1. 
Step 2 increases the number of the new end points by no more than 2m where m is the tree in order to construct the segments. 
The heuristic method presented is effective but may not deliver the optimum solution. It is to be observed at this juncture that the cut points on the links within one segment carry no value as only the end points of the segment alone matter. 
This approach presented o ffers a hierarchical way to monitor water supply by network segmentation mechanism. Tests are designed at the segments level, and only if a negative result is recorded further sear ch for the leak location is carried out. The segment under examination is now treated as the network and the same method is applied on the finer granularity of segments. The total number of required distribution sensors can be easily estimated based on the topology of the pipe network and required accuracy but at any give time only a small subset of them will be active; only those that are located at all end pints of all segments. 
Let us conclude this discussion on the segmentation of the network by providing the expression to determine the presence of leaks in such segments. For any segment 
I , let i C be the set of all consumption units X  nodes. Let i D be the set of all new 
I . For instance, 1 C is the set containing all the consumption nodes which are present in the network segment 1 I and 1 D is the set of all distribution nodes that are located in the end points of that segment. previous discussions that each element of the set 1 D will be a repeated elsewhere in another set of , 1  X  k Dk because those nodes cut a link forming two segments thereby participating in both the segments. 
For the purpose of having simple expressions, let us define the amount of water consumed by any consumption unit, say 1 1 c is given by 1 1 () s ct . Let 1 water consumed by (flown into) the segment 1 I measured at 1 1 d in time s t . detect the leak) is as follows expression to identify the presence of leak for any arbitrary network segment. The idea of deploying sensor nodes along the water pipe lines in order to monitor and manage the water flow has got more than the obvious significant advantages. As mentioned earlier, the setup and deployment of such sensors is instrumental in finding the leaks in the underground water pipes with a lot more ease and efficiency than the existing conventional methods. 
The other benefit of such an approach could be to visualise the water usage pattern of a particular region. Given the additional storage capacity in the distribution nodes, complex patterns of water flow and diffusion could be recorded to incredible level of consumption nodes steadily measure the water flown through them to the regular intervals. The recording of the general usage pattern could be deduced based on the previously stored data or a convolution performed on historical data or it could and the residential units X  water consumption in one particular suburb could be stored approximation of the average pattern could be deduced. If the observed water usage The advantage of this is that, these types of anomalies could be identified at a convenient level of hierarchy and then th e focus could be shifted to the needed granular level. 
The other benefit of the whole approach is that the water flow in the pipeline distribution system could be identified and the knowledge about measurement and the directions of the flow could assist in determining the decisions regarding the switching of water pumps, water pressure to be maintained etc. In this paper, we have proposed the deployment of sensor networks for identifying leaks over the urban water distribution system. We have discussed the issues involved in segmenting sensor network for efficient monitoring of water distribution in a hierarchical level. Starting with very simple cases in the network scenario, we showed the complexities involved in segmentation for complex network sub-structures. Providing a heuristic to the network segmentation, we have left the examination of the nature of the optimal solution for the same as an open question and expect to investigate on it further. We would like to extend our thanks to Mr. Andris Krumins and Mr. Shashi Mallappa of Brisbane water, for their enthusiastic assistance and inputs which enabled us to progress with a realistic assumption base. 
