 In this paper, we describe the process of discovering underlying knowledge in a set of isokinetic tests, using a new algorithm to find similar patterns in a set of temporal series. An isokinetic machine is basically a physical support on which patients exercise one of their joints, in this case the knee, according to different ranges of movement and at a constant speed. The data on muscle strength supplied by the machine are processed by an expert system that has built-in knowledge elicited from an expert in isokinetics. It cleans and pre-processes the data and conducts an intelligent analysis of the parameters and morphology of the isokinetic curves. Then, Data Mining methods based on the discovery of sequential patterns in time series by means of which to find similarities and differences among exercises were applied to the processed information to characterise injuries of those patients. The results obtained were applied in two environments: one for the blind and another for elite athletes. H.2.8: Information Systems. Database Management. Database Applications. Data Mining Knowledge Discovery, Data Mining, Time Series. Historically, medicine has been a crucial domain for computer science applications. Many well-known models and methods have been designed to solve medical problems. The sheer volume of the data for collection, the need for better procedures and techniques to assist physicians in their work and, generally, the need for subtle or routine processes to be automated are some of the reasons behind this state of affairs. Data Mining is not an exception. A better comprehension of medical data is a must for improving medical effectiveness. Moreover, there is a shortage of good models for certain injuries that could reduce the rate of wrong decisions being made in a host of fields. 
Permission to make digital or hard copies of part or all of this work or personal or classroom use is granted without fee provided that copies are not made or distributed for profit or commercial advantage and that copies bear this notice and the full citation on the first page. To copy otherwise, to permission and/or a fee.

KDD 2000, Boston, MA USA  X  ACM 2000 1 -58113 -233 -6/00/0 8 ...$5.00 intelligent understanding and interpretation of the strength curves obtained through the isokinetic exercises on which the assessments are based. This paper will focus on the Data Mining techniques that have been developped to analyze strength curves and characteryze possible injuries. The analysis of time-ordered data sets is essential in many fields, including engineering, medicine or the business world. The future behaviour of a particular variable can be predicted by studying how it has behaved up to a given time. Similarly, determining what other values have behaved similarly can be an aid for deciding on the actions to be taken either to conserve or drastically modify the present evolution. Data mining techniques are very useful tools for doing this. There is a growing need to search databases for data time series that resemble a particular one. For example, it could be a matter of finding companies with a similar growth pattern or discovering products with similar sales patterns. One important question is to decide what similarity means. The simplest solution is to calculate any sort of distance, like the Euclidean or Manhattan distance, between two time series, which are considered similar if the above distance is less than a given threshold value. In an attempt at reducing the time taken to calculate the distance, some authors, like [2] and [12], have proposed the use of the Fourier transform to transfer the series from the time to the frequency domain, using only the first coefficients to filter the dissimilar series. [2] divides the queries concerning similarity between time series into two categories: total comparison, that is, the sequences for comparison have the same length, or partial comparison, which involves merely checking whether a sequence appears as part of another. With regard to total comparison, most of the papers written so far have focused on the search for a particular sequence within a set of time series or on searching for all the sequences that are similar to a given one. [2] or [12] propose indexing all the time series, using some sort of spatial access met hod, like the R* trees proposed by [7], as an indexing method. This index will contain the first coefficients of the Fourier transform of the series. Thus, it will suffice to run through the sequences to are close together in the R* tree rather than through all the sequences to find the similar ones. In [24] and [8], wavelets [23] are used as a means of moving from the time to the frequency domain, although both use the Euclidean distance as a method for evaluating similarity. Partial comparison, that is, the search for subseries that are repeated throughout a particular series, has gained in importance recently. [3] developed an A priori algorithm-based technique to discover sequential patterns. [22] address the problem of recognising frequent episodes in event collections, where episode is defined as a collection of events that occur at given intervals of time in a given partial order. The A priori property is also used in [19]. In this case, however, it is used to prune infrequent patterns. In this paper, patterns of any length are detected, while the pruning of infrequent patterns succeeds in providing a very high efficiency. Despite the growing interest in the study of time series, there are fields of research in which there is still much work to be done. competition athletes since the early 90s. An extensive collection of tests and exercises has been gathered since then, albeit unmethodically. Every time an isokinetic test is run, a series of isokinetic system database registers are created. These were kept in this database until the hard disk was full and were then dumped to diskettes. The tests were saved on different diskettes, depending on the sport in question, and in the internally coded format of the isokinetic system, which uses the imperial system of measures. Therefore, most of the data were stored and coded across a set of diskettes. The sex of the patient was not defined in any of the tests and personal particulars were missing in many, because they are of no interest for muscle analysis. Additionally, some tests do not include all the exercises defined in the protocol for a variety of reasons. Hence, we had a set of heterodox, unclassified data files in different format, which were, partly, incomplete. On the positive side, the quality of the strength data within each exercise was unquestionable, as the protocols had been respected in the huge majority of cases, the isokinetic system used was of proven quality and the personnel who operate it had been properly trained. This collection of data was composed of close to 1580 isokinetic tests (this number grew throughout the project life cycle). In order to calculate the volume of information, it is important to take into account that the tests are formed by the personal particulars of the patient and 6 isokinetic exercises. Each exercise is a series of from 350 to 600 triplets of real numbers (strength, angle, time). All this amounted to just over 103 Mbytes of information at the start. A series of tasks, detailed in this section, had to be carried out before the available data set could be used (not only for KD tasks but also for expert analysis itself). Although the planning of objectives and milestones was very important in this domain, it was very difficult to establish a long-term plan from the start, as it was hard to foresee the final outcome of some of the phases. Instead we set short-term milestones which, when achieved, were used as a basis for planning the next steps. Figure 2 shows a diagram of the main data preparation tasks. Each of these is described in detail below. The data came from a commercial application (the isokinetic system) that has its own internal data format, which are compressed and coded using special methods. Therefore, the current isokinetic system database could not be used (after loading the information from all the diskettes) to process the data, and each test had to be exported to text format. Apart from this being hard work, there was an added difficulty, as the format of this text file had to be decoded. This was not immediate, as the use of the imperial system of measures caused some confusion. The creation of the I4 database, which was to organised and store the isokinetic tests run and would allow these and future tests to be used rationally, was a must for the success of the project. In view of the circumstances mentioned before, it is not hard to imagine that the process of database creation was long and  X  = Removal of incorrect tests. This pre-processing task has the  X  = Elimination of incorrect extensions and flexions. Even if the Having validated all the exercises as a whole and each exercise individually, they have to be filtered to remove irregularities that are not caused by patients. Again expert knowledge had to be used to be able to automatically identify the irregularities caused by the strength employed by patients and any that are due to the isokinetic machine. So, the strength curves are pre-processed in order to eliminate flexion peaks, that is, maximum peaks produced by machine inertia. This is detected when the angle at which the maximum peak is produced deviates a lot from the norm. Figure 3 shows a graph with peaks and the same graph after they have been removed. Data mining techniques were required to analyse isokinetic exercises in order to discover new and useful information for later use in a range of applications. Patterns discovered in isokinetic exercises performed by injured patients were very useful, in particular for monitoring injuries, detecting potential injuries early or discovering fraudulent sickness leaves. Data mining algorithms can only be applied to the isokinetic exercises stored in the database if they are represented in a suitable format for processing. Therefore, an isokinetic exercise was considered as a sequence of numbers that represent values at a point of time. One of the most important potential applications of data mining algorithms for this sort of time series is to detect any parts of the graph that are representative of any irregularity. As far as isokinetic exercises are concerned, the presence of this sort of alterations could correspond to some kind of injury, and correct identification of the alteration could be an aid for detecting the injury in time. So, the identification of patterns, that is, portions of data that are repeated in more than one graph, is of vital importance for being able to establish criteria by means of which to classify the exercises and, therefore, patients. Isokinetic exercises have a series of characteristics that cannot be overlooked when designing an algorithm to identify patterns. Remember that each datum in an isokinetic exercise is a measure of the distance. As mentioned above, the main problem of searching for what are originally unknown patterns is the exhaustive use of memory and the amount of time it can take an algorithm to run through all the isokinetic exercises stored in the database. One way of making the search space smaller is to use the property known as A priori [1]. This states that if a pattern is not frequent, that is, if its confidence is not over the threshold value, no pattern of a longer period that contains it will be able to be frequent. This means that rather than checking all the patterns, only patterns containing infrequent sub-patterns have to be inspected, that is, the patterns of period i will be used as filters for the candidates of period i+1. 3.2 Data Mining Method The process of developing a data mining algorithm that detects patterns in isokinetic exercises and identifies patterns that potentially characterise some sort of injury was divided into two phases: a) Develop an algorithm that detects patterns in exercises. b) Develop an algorithm that uses the algorithm developed in A pattern search tree was built in order to speed up pattern-searching algorithm operation by applying the A priori property. Each depth level of this tree coincides with the period of each pattern, that is, a branch of depth 2 corresponds with a given pattern of period 2. An example of this sort of trees is given in Figure 4. Each branch of the tree will contain a counter that will specify the number of exercises in which the pattern appears. Further appearances of one pattern within the same exercise will not be taken into account. This counter can be used to prune any branches under the threshold in question, and the pattern will be ignored in the future. The patterns are formed by running through the exercises using a window of the same size as the period under consideration. So, the algorithm will be capable of forming all the patterns of any period, ending when there are no more branches to run through or when the period of the pattern is greater than the length of the longest isokinetic exercise. For example, if a frequency of 10 were established for the tree shown in Figure 4, branch A would be pruned, because pattern {14, 16, 18} was only found in five exercises, which does not meet the minimum requirement. Any pattern {14, 16, 18, xi, ...,xj} will be ignored in the future. Below we will present two pattern-searching algorithms, which we applied in the research. One considers identical sequences as patterns and the other adds the Euclidean distance to compare patterns. The difference between the two is significant and has a very considerable impact on algorithm performance. In the algorithm that does not consider distance, each pattern corresponds to one and only one branch of the search tree. Therefore, the pattern search in the tree ends when the respective branch is found. This is not possible in the algorithm that takes into account distance, as a pattern has more than one correspondence in the search tree. For example, pattern {12, 14, 16, 18} and pattern {12, 14, 16, 19} would be considered as similar at distance 1, and the tree should increase the counter of the respective branches for both patterns. This is why we had to develop another algorithm that enhances the potential of the one described above, using the notion of distance among patterns for this purpose. After adding the pattern search distance, the algorithm becomes more complicated and has to be completely modified. Just one run through the tree could form all the patterns of a given period before. However, the number of appearances of a pattern can now change owing to other similar patterns appearing. Therefore, the tree has to be run through again to add the actual number of times a pattern appears, that is, not only the exact appearances but also occurrences of other similar patterns. Also special care has to be taken not to prune patterns, which, although not frequent themselves, play a role in making another pattern frequent. If this sort of patterns were pruned, the algorithm would not be complete, that is, would not find all the possible patterns. Therefore, the pruning condition must be modified. Any patterns that are not frequent and whose minimum distance from the other patterns is further than the required distance will be pruned. When the patterns are presented, only the frequent ones will be displayed, although not all the patterns in the tree are frequent owing to the above pruning condition. The form chosen for the new algorithm was to use a variant on the above, which retained both the number of series in which a pattern appeared and a reference to the series in which it appeared. The series are run through using a window, which forms patterns, alters the counter and enters the series in which they appear. Before moving on to the pruning phase, the patterns must be run through again, this time to count the appearances attributed to similar patterns. The presence of the series entered by each pattern is helpful in this respect. For each pattern, all the patterns in the tree that are at a lesser distance than the threshold d are searched, and as they are considered similar patterns, the counters of both must be increased. Figure 5 shows a formal description of this algorithm. The algorithm is applied directly to detect irregularities in the graphs that possibly identify the presence of injuries. All the series of the databases are used for this purpose, and series that indicated a given injury are separated from any that did not. The above algorithm was simply applied to the two sets, getting two collections of patterns. Any patterns that appeared in the graphs of injured patients and did not appear in the graphs of healthy patients were identified as injury patterns and, after assessment by the expert, were used to indicate an injury. The graphs obtained from subsequent isokinetic tests will then be able to be searched for these patterns to check whether or not there is an injury. The pattern shown in Figure 7 is a magnification of a region common to the three graphs, specifically the region between the times 100 and 161. It is important to note that although the pattern appears more or less in the same region of the three exercises in this example, this is not generally the case. Additionally, the pattern does not necessarily have to appear in all the database exercises, but it must appear in enough to comply with the required confidence. The I4 project has produced two applications -the initial versions of these are described in [5] -which are quite similar, except for the interface. One, called ES for Isokinetics Interpretation (ISOCIN), was designed for use by sight-impaired physicians, so the interface includes complete voice synthesis of every piece of information presented to the user. That is, it includes information on how to use the system, the options open at any time and, of course, the isokinetic data and their interpretation. The system can be used without a display. ISOCIN is currently being used by blind physicians at EFONCE to analyse injuries and assess their evolution, adapting the physiotherapy administered and rehabilitation process. The other application, an ES for Interpreting Isokinetics in Sport (ISODEPOR), is being used at the National High Performance  X  = Analysis of the full isokinetic strength curve is possible,  X  = Furthermore, the I4 system will provide more knowledge of The development of an ES and its later refinement is mainly based on eliciting and entering experts X  present knowledge of the subject into the system. At later stages, more domain knowledge of the problem was added to the system on the basis of the experience gained by the experts in the meantime. However, all this knowledge was not able to cope with every problem we faced. Thanks to data mining techniques, a more efficient and objective process can be applied that is complementary to the above for developing an ES, provided enough data are available from which new knowledge can be discovered. The I4 project, is an example of this approach applied to the expert processing of isokinetic data. Initially, the expert knowledge of the isokinetic physician was entered into the system in order to conduct an intelligent analysis of the numerical parameters and morphology of the strength curves produced by the isokinetic tests. Later and considering the volume of tests there were, data mining techniques were applied, based on time series processing to discover patterns characterizing injuries. This new knowledge, evaluated and validated by the expert, was entered into the system and produced a system that performed better and was more efficient than the one directly elicited from the expert. This has meant that it has been able to be applied at the Spanish National Centre for Sports Research and at the School of Physiotherapy of the Spanish National Organisation for the Blind. With regard to the application of a methodological KDD process for extracting the knowledge from the data, it is noteworthy that the data preparation was so domain dependent that we were unable to set out a general-purpose methodological approach that could be extrapolated to any other system. The same conclusion is applicable to the selection and design of the DM techniques best suited to the problem. Domain dependency is total, with regard to both the data in question and the planned use to which they are to be put. Therefore, it is impossible to generalise a mechanism of selection of mining techniques. We would like to thank  X frica L X pez-Illescas, Fernando Alonso and Cesar Montes for their co-operation in the I4 project and useful comments, and  X scar Marb X n, Agustin Santamar X a y Jos X  Carlos-Roca for their implementation work. The I4 project was partly funded by CICYT project no. TIC98-0248-C02-01. This 
