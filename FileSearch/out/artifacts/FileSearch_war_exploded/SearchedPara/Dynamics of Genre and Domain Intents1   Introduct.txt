 The diversity of the content available on the web has dramatically increased in recent years. Multimedia content such as images, videos, maps, has been pub-lished more often than before. Document genres have also been diversified, for instance, news, blogs, FAQs, wikipedia. Such growth in the diversity of informa-tion on the web raises two main questions . First, do users actu ally access various categories of documents to satisfy their information need? Second, are there par-ticular patterns in how users access the se various categories of documents?
Understanding the information need behind a user query, i.e. the query intent , is an important goal in web search. There are different ways to classify query intents. A query intent may refer to the type of interaction, e.g. navigational, transactional or informational. It may also relate to some predefined general topics, e.g. travel, sport, shopping. Finally, it may refer to the category of in-formation being sought, e.g. image, video, blog. In this paper, we are concerned with the latter, more precisely, in domain (e.g., image, video) and genre (e.g., blog, wikipedia) intents.

In this paper, we analysed the Microsoft 2006 RFP click dataset to understand query intents in terms of domain and genre. We looked at three domains, namely, image, video, and map, and three genres, namely, news, blog and wikipedia. All other categories of intent were viewed as standard  X  X eb X , i.e. the typical web search result. These six  X  X on-web X  1 categories of intent were chosen on the basis of a survey [4], which shows that images, news, and videos were the three most frequently accessed  X  X on-web X  results. Map and wikipedia were chosen because results of these categories are now frequently included within the top ten result list by major search engines. This paper has two parts. We first propose a methodology to identify domain and genre intents, allowing us to learn whether users actually access documents of various c ategories to satisfy their information need. We then study the dynamics of these intents to uncover patterns in how users access documents of various categories. We used the Microsoft 2006 RFP Dataset, containing 13,279,076 log entries [6] corresponding to a subset of web search logs from US users spanning over a month. Each log entry corresponds to a click and contains the following information: 1. The timestamp (time and date), used to order the clicks within a session. 2. A unique session id representing a search session. A session is the entire 3. A unique query id given to each distinct query submitted during a search 4. The query terms used by the search engine to display results. 5. The URL of the clicked result.
 We used three sources of evidence: (1) t he query itself, more precisely the use of intent-specific terms such as  X  X ideo X ,  X  X ap X , etc; (2) the clicked URLs; and (3) the titles of the corresponding web documents. Previous work, e.g. [3], has shown that result snippets (title, URL and excerpt) of the clicked web documents could be used to determine query intents . For instance, a log entry in our dataset corresponds to a document with title  X  X mages and diagrams of human muscular system X  after having entered the quer y  X  X uscular system X . The term image in the document title, and the fact that t he user has accessed that document, may be a good indication that the user is looking for images.

We did not use document excerpts as we did not have access to them. As the data set did not contain the titles of the clicked documents, we had to retrieve these. We therefore downloaded the clicked documents. Given the time lag between when the dataset was created and our download of the clicked documents (approximately 3 years), we were able to obtain the titles for only 50% of the clicked documents. We then used those sessions for which we could download the titles for all clicked documents. The statistics reported in Table 1 correspond to these log entries. The first stage of our work is to determine the intended domains and genres for given queries. We first used a rule-based classifier, whose output was used to build the features used by a machine learning classifier.
 3.1 Rule-Based Classifier Our aim here is to classify as accurately as possible some of the log entries. This was important as these classifications were to be used as inputs to calculate the features for the machine learning approach. To build a high precision classifier, we used the most reliable source of evidence, namely the query terms. For example, if the user has explicitly typed photo in the query, we deduced that the user is looking for image, i.e. has an image intent. Here photo is referred to as an  X  X ntent-specific X  term. We use the followi ng intent-specific terms to classify the clicks into domains/genres: Image: image, images, photo, photos, picture, pictures .
 Video: video, videos, movie, movies .
 News: news .
 Map: map, maps .
 Blog: blog, blogs .

Wikipedia: wiki, wikipedia . Although not exhaustive, these intent-specific terms are a good approximation of how users would search, in terms of the queries they would submit to a search en-gine, for documents of particular domains or genres. With this approach, 268,491 log entries (i.e. clicked URLs), that is 4% of the total log entries, were identified to be of one of the six intents. 3.2 Machine Learning Classifier To identify additional non-web intents, we make use of machine learning tech-niques. This requires (1) a manually labelled set of log entries; (2) designing features correlated with the possible int ents that can be computed for every log entry; (3) training a classifier to predict the intent given (1) and (2). Finally, we predict the intent of the non-manually classified log entries using the classifier given their features.

For (1), we randomly sampled 3800 log entries and manually classified them into one of the following six category intents  X  image, video, blog, map, wikipedia, and news. A click was classified as having a web intent (our un-classified category) when it could not be classified into any of the above six categories. A web intent corresponds mo stly to the typical web search result, and we expect it to be the predominant intent. We used the query terms, the URL and the document title for this purpose. The outcomes of the manual clas-sification is shown in Table 3, the N column. As expected, web corresponds to the predominant query intent.

Step (2) aims at defining a set of features associated with each log entry, where each feature should be a good predictor for identifying a subset of intents (ideally one). In our case, the set of features wer e based on the language models computed from the dataset (classified intents) obtained through the rule-based approach. We build a language model for each source of evidence and each category. We also build a background language model for the source of evidence itself, which estimates the probability of a term to appear in the given source regardless of the intent. We chose to model separately the three sources of evidence since they are of very different nature.

Our hypothesis is that each category uses a vocabulary often associated with explicit intent-specific terms. For insta nce, in a query, if  X  X niston X  is often asso-ciated with  X  X hoto X , the term  X  X niston X  will be associated to a large number of log entries classified as an image intent by the rule-based classifier. As a result, the query language model for the intent  X  X mage X  will give a higher probability to  X  X niston X  than the background language model, and thus comparing both prob-abilities gives the classifier an indication of how likely a term (or a set of terms) is generated by an intent-specific language model rather than by the background one. We estimated the parameters of each language model 2 , one for each source of evidence s and intent i (21 in total, i.e. one for each of the 3 sources and for each of the 6 intents plus the background model). We estimated the probabil-ity that a term t occurs using the standard maximum likelihood estimate, and smoothed it using the background language model for a given source of evidence. The probability P ML is the maximum likelihood estimate of the probability of a term occurring in a given source of evidence s , and if given, for the intent i (otherwise, it is the background language model). Here, c i , s ( t ) denotes the number of times the term t appeared for source s with the intent i ,and c s ( t )isthe number of times term t appeared for source s . These were computed from the set of automatically classified clicks using the rule-based classifier. The smoothing parameter  X  was heuristically set to 0.95, to emphasize the importance of the intent. We then compute the probability that a sequence of terms T is generated by any of the language models by We then use the logarithmic ratio of the probability (for a given source) of observing T given the intent to the probability of observing T : whose value is above 0 if it is more likely that the text was generated given the intent than in general, and below 0 in the opposite case. This gives rise to a set of 18 features (one for each of the 6 categories and 3 sources) that are used as an input to build a multi-class classifier.

We use an SVM classifier 3 [1] because it performed the best when evaluated with a 10-fold cross-validation, described further below (using nine tenth of the manually classified data to learn, and one tenth to compute the performance, and repeating this operation 10 times). Du ring the selection process, we preferred models that predicted either the correct or the web intents, over those with better performance that predicted an incorrect non-web intent.
 The SVM classifier was then trained using a 3-fold cross validation and a Gaussian radial basis function. With respect to the manually labelled data, to give less importance to the web intent, we down-sampled the number of cor-responding examples and only chose 20% of those, which gives a total of 817 manually labelled examples. In addition, we added an equal number of auto-matically labelled log entries (randomly sampled among the 224,241 classified log entries), using the same rules as in Section 3.1 but using the title and URL as sources of evidence. We experimenta lly found that using this set of data for training did improve the performance of the classifier.
Table 3 (Right) shows the confusion matrix with our final settings. The correct classification rate is low (between 0.27 and 0.87), but most of the time, when a click is misclassified its predicted intent is web. The only exceptions are for image (18% are classified as video) and blog (20% are classified as either image or video). Nonetheless, given that web is our unclassified category, the results show that we have improved recall without hurting precision too much.
Table 3 (Left) shows the statistics about the intent classification (rule-based, using SVM as our machine learning approach, and merged together) of all the log entries. It is this merged labelled log that was used in the remaining analysis of this paper. We see that approximately 8% of the total log entries were iden-tified to have a domain or genre intent other than web. This is not negligible considering the large size of the log data analyzed, and is compatible (although not directly comparable) to the results reported in [5]. To study the domain and genre intents, and their dynamics, we posit the fol-lowing three research questions, each investigated in separate sections next: ( R1 ) What are the frequent combinations of domain and genre intents within a search session? ( R2 ) Do domain and genre intents evolve according to some pat-terns? and ( R3 ) Is there a relation between query reformulation and a change of intent?
From Table 2, column  X  X riginal X , around 96.48% of the sessions have only one underlying intent. However, most sessions are composed of one or two clicks (85%, computed from Table 1), and web is the most likely intent (92.28% in Table 3 Left). We can expect that a high percentage of sessions will be one-or two-click sessions with a web intent, and h ence will be single-intent sessions. It is therefore not possible to know whether our statistics of 96.48% is due to the fact that users do not combine intents, or that the click and intent distributions are highly skewed. To overcome this, we compare statistics with those obtained from a random log . This random log is exactly similar to the real log, but instead of using a classifier to assign an intent to each log entry we have to select one by random, in accordance with the intent distributions presented in Table 1. The random log is a log where the intent would be independent of what the user is searching for, and of his or her search history. To compute statistics for this random log, we average over all the possible random intent assignments. We thus report statistics computed for both the real and the random logs. Going back to the example of the 96.48% of single-intent sessions in Table 2, we can see (Table 2, column  X  X andom X ) that we would expect 93.14% of the sessions to be single-intent in the random log. This sets the following limit: if the real number was below this limit (even with a percentage as high as 90%), then we could say that users tend to c ombine more than one intent within a session; instead, we observe that our statistic is higher (96.48%) which means that sessions are indeed generally single-intent.
 We investigate the existence of frequent combinations of query intents in search sessions ( R1 ). We compute how often query intents, as classified with the ap-proach described in Section 3, co-occu r within the same search session. Table 2 shows the percentage of sessions that contain two or more different intents. We observe that there are very few sessions with more than two different query intents. This is in accordance with the study reported in [5].

The ratio between the original and the random log statistics show that the fact that a session is associated with a low number of intents is not due to chance. Moreover, the ratio increases as the num ber of intents increase, which shows that when users have diverse intents, it is generally restricted to at most two. Therefore, we computed the percentage of sessions where at least two intents appeared among sessions with two intents or more (Table 4). For instance, the value 0.01% for  X  X b X  means that there are very few sessions with a blog and a news intents. We also computed for each pair of intents the % that given one intent the second was observed within the same session, and vice versa (3rd and 4th group of columns). For instance, for  X  X w X , the value 2.1% means that 2.1% of the sessions that had a video intent also had a wikipedia intent.
We can observe that most users do not mi x intents. Indeed, rows  X  X m X  to  X  X w X  and rows  X  X W X  to  X  X W X  show that users are less likely to combine two different intents in the same session than what would be expected by random (around 3 times less likely in average). Looking at the rows  X  X b X  to  X  X i X , it is on average around ten times more likely that users repeat a click on the same intent than what would be expected by random. In sessions made of two or more clicks, when one intent is map, video, image or news, then there is above 35% of chance to observe a second click with the same intent (third and fourth group of columns). For blog and wikipedia, the probability is lower although still high (around 19%). This could be because users might consider wikipedia and blog result pages as web pages and hence do not differentiate them as belonging to dif-ferent categories. We however observe some potential exceptions for the pairs blog/wikipedia ( X  X w X ), image/blog ( X  X b X ), and video/blog ( X  X b X ). These three pairs occur more often together that would be expected by random. However, the difference in percentages (  X  0.01) are so low that this is likely due to noise from the classification.

A last observation is that when there are two intents, these are often a web intent and any non-web intent, as shown in the last series of rows in the table. This is not surprising, and means that search results should continue to contain mostly web results, and when appropriate, images, videos, blogs, etc in addition. This is nowadays the approach followed by all major search engines. We investigate how domain and genre intents evolve within search sessions ( R2 ). We restrict ourselves to sessions with t wo query intents. We consider the five most frequent co-occurrences of two que ry intents (other co-occurrences were too low): image+web, wiki+web, video+web, news+web, map+web. For each such pair intent+web, we looked at all possible sequences of changes of query intents. The four most frequent ones, for all five pairs, were of the form, web  X  intent, intent  X  web, intent  X  web  X  intent, and web  X  intent  X  web. In Table 5, we report for each pair the percentage of sessions containing each of the identified four sequences. All the others come under  X  X ther X . In our calculation, we excluded sessions with less than three clicks, to avoid results biased towards the large number of two-click sessions.
 First, for the wikipedia intent, users do not follow any particular pattern. Indeed, the sequences obtained are clo se to what would be expected by random. This confirms the findings of the previous section, where we made the hypothesis that users do not differentiate between wikipedia and web documents. Second, when the intent is news, video and map, users switch from one intent to another, but do not tend to switch back to the first intent. By random we would expect more users to move back and forth between intents. This can be seen in the difference between the random and real logs for the four sequences. Third, in the case of image intents, we observe that users are less likely to move back and forth between intents. However, different from news, video and map intents, users are more likely to begin with a web intent before looking at images, rather than start with an image intent and then switching to a web intent.

There is a common sequence in the intent s for all except for wikipedia. Users have a tendency to go from one intent to the other, and then to end the session, rather than switching several times bet ween intents within the same session. We study both quantitatively (how many) and qualitatively (how) the effect of a change of intent on a user query ( R3 ). We thus compare pairs of consecutive queries with two different intents, within the same session. For each such pair, we computed the numbers of queries tha t were exactly the same, modified or completely different. Results are shown in Table 6.

For blog and wikipedia, over 50% of the users did not usually change their query (going from a blog or wikipedia intent to web intent or vice versa). It is likely that this happens because both types of results are present in the top ranked documents for the same query. Users do not have to change their queries to obtain results from blog/wikipedia and then web sources (and vice versa). The situation is reversed for news, image, v ideo, and map. Most of the time, users did change their query (over 65%). We also observed that there was a slight dif-ference between news/map/video and image intents. For the former, users issued different queries, whereas for the latter, in half of the cases, users modified their queries by adding or removing terms. We found that, for news/map/video, often users often changed their search topic (e.g.  X  X overeign bank center trenton X  to  X  X rt of 1769 X ) and hence modified the query completely, whereas for image users seem to have looked at the results and then added intent-specific terms (e.g.,  X  X hoto X ).
When a query was modified, we also looked at which terms were added or removed. We easily identified terms linked with an intent, i.e. intent-specific terms; e.g.  X  X ikipedia X ,  X  X hat X ,  X  X ow X  for wikipedia;  X  X log X ,  X  X ow X , for blogs; X   X  X ews X ,  X  X ewspaper X , and  X  X ress X  for a news intent; etc. Some of these terms were present in the rule-based cla ssifier described in Section 3.1. We analysed a click dataset to obtain an understanding of domain (image, video, and map) and genre (news, blog and wikipedia) intents, and their dynamics. The first step was to identify the domain and genre intents behind a query. Using a rule-based and an SVM classifier, we classified approximately 8% of the total click dataset to have one of the six domain or genre intents. We looked at how intents co-occur within a session. We observed that users do not often mix intents, and if they do, they mostly use two intents. Furthermore, these were often a web intent and any of the non-web one. Second, we investigated if these intent combinations evolve a ccording to some patterns. Our results show that, except with wikipedia, users in general tend to follow the same intent for a while and then switch to another intent. In other words, users do not switch back and forth between intents. Third, we were interested to see if there were relations between query re-formulation and change of intent. We observed that for video, news and map inten ts, often completely different queries were submitted, whereas, for blog and wikipedia intents, the same query was used. Further, intent-specific terms wer e often used when the query was modified. Acknowledgements. This work was carried out in the context of research partly funded by a Yahoo! Research Alliance Gift.

