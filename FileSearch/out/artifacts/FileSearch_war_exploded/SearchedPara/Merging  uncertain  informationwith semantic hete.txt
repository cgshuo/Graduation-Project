 REGULAR PAPER Anthony Hunter  X  Weiru Liu Abstract Semistructured information can be merged in a logic-based framework [ 6 , 7 ]. This framework has been extended to deal with uncertainty, in the form of probability values, degrees of beliefs, or necessity measures, associated with leaves (i.e. textentries) in the XML documents [ 3 ]. In this paper we further ex-tend this approach to modelling and merging uncertain information that is defined at different levels of granularity of XML textentries, and to modelling and rea-soning with XML documents that contain semantically heterogeneous uncertain information on more complex elements in XML subtrees. We present the formal definitions for modelling, propagating and merging semantically heterogeneous uncertain information and explain how they can be handled using logic-based fu-sion techniques.
 Keywords Knowledge fusion  X  Uncertainty  X  Information fusion  X  Information integration 1 Introduction With XML fast emerging as the dominant standard for representing and exchang-mation has begun to be addressed. In [ 11 ], a probabilistic approach is taken to model and reason with uncertain information at different levels of tags in a single XML document. The final probability of the value of a specific tag is calculated via multiple conditional probabilities on its ancesters X  tags. In another approach [ 15 ], probability values are also attached to tags, but it requires that the proba-bilities of a set of values associated with a single tag must sum to 1 . 0, a condi-tion that was not required in [ 11 ]. A simple merging method is also provided to integrate two probabilistic XML trees in [ 15 ], whilst [ 11 ] did not consider mul-tiple XML documents. Since [ 15 ] does not use much of the background knowl-edge to verify the probabilistic XML documents before merging, even two simple XML files as input can produce a huge number of possible XML documents as output (see Conclusion for details), which makes the method difficult to use in practice.
 fusion framework [ 5 ] where background knowledge can provide additional in-formation to facilitate merging and reduce redundancy and inconsistency among information. In this paper, we focus on structured reports. The format of a struc-tured report is an XML document where the tagnames provide the semantic struc-(1) individual words or simple phrases from a scientific nomenclature/terminology port on deposits of a particular underground location can be represented using the tagnames deposit with textentries such as water , oil , gas ,and sand , etc.
 Example 1 Consider the following two structured reports which are for the same area being explored. Both of them define a mass function on the textentry deposit . and let X be a variable. A fusion predicate Dempster ( X  1 , X  2 , X ) defined later in Sect. 2 takes these two XML documents as inputs and generates a merged struc-tured report that grounds X with the combined mass function segment as shown below. each structured report can be captured in a logical language. We have also de-fined a range of predicates, in a Prolog knowledgebase, that capture useful re-dependent logic-based approach to merging that is sensitive to the uncertain infor-mation in the structured reports and to the background knowledge in the Prolog knowledgebase.
 probabilities, mass functions in the Dempster X  X hafer theory of evidence (DS theory) [ 13 ] and necessity measures in possibility theory [ 1 , 2 ], was proposed. Example 1 illustrates how a mass function can be encoded into XML format and a combined XML document. Details of the formal definition and merging procedure will be reviewed in Sect. 2.
 domain. The main purpose of petroleum exploration is to analyse qualitatively resistance, micro-electrode resistance, natural gamma ray, etc. They are collected by well-logging equipment inside the well from the ground level to some depth underground. The whole depth from the ground level to the bottom of the well is divided into layers (such as, 100  X  150 m) based on the digital data collected and the values of these physical features can give indications of layers with possible deposits. The first two XML documents in Example 1 show how an expert can of the layer. Since equipment used is subject to noise and inaccuracy, multiple the general analysis of the broader area of the physical features of the location often provides some additional information for predication. This knowledge can equally be represented as XML documents and be used to assist predication when necessary.
 associated with textentries in XML documents. Multiple pieces of uncertain infor-mation concerning the same issue (such as deposit in the above example) are assumed to be specified on the same set of possible values. However, [ 3 ] does not consider situations where one piece of information uses more specific values than another nor the situation where one piece of information is described on one set of values and another is on a different set of values where these two sets of values are inter-connected.
 Then we use a set of values { solid , liquid } to bear any information we have about the layer. However, we could make this information more specific by giving different types of solid and liquid substances, such as, stone, sand, water, gas, oil . Therefore some uncertain information can be described on this detailed set of values { stone , sand , water , gas , oil } . This latter set of values has a finer granularity than the former one. Furthermore, since possible deposits of a layer are often drawn through interpreting well-logging data other than being observed directly, well-logging data will directly influence the prediction. For instance, it is commonly known that a set of data is first interpreted in terms of geographical features, and then the assumed features are used to predict possible deposits. In this situation, the information is represented on one set of values (geographical features, e.g., lithology) and the conclusion is on another set (e.g., deposit). The information from the given set of values should be propagated to the destination paper, we extend our approach to merging multiple pieces of uncertain information where  X  evidence is specified at different levels of granularity on the same concept as  X  evidence is specified on inter-related concepts as textentries. We refer to two  X  evidence is assigned to heterogeneous subtrees involving multiple concepts. spectively and the third type of uncertain information is demonstrated by Example 4 .
 Example 2 Consider the two structured reports about a specific underground layer. The first report gives more precise descriptions of the possible deposit under a particular layer with probabilities whilst the other gives a more general sugges-tion of the possible deposit. These two reports describe the same problem with different levels of abstraction (different granularities), so they have uncertain in-formation that is semantically homogeneous . water , gas , etc.) would have impact on a coarser granularity (e.g., deposit with values liquid , solid , etc.) or vice versa. It is sensible to consider both pieces of evidence at the same level of granularity if one piece of evidence can be paper.
 Example 3 The following two structured reports provide two different but evidence in the left-hand XML document reports directly on the potential information can come from the general knowledge about the area. Whilst the second XML document reports on the observations in terms of lithology made by the equipment. From the lithological features, we can determine the physical nature of the deposit (or vice versa). To make use of this second XML report in prediction, we need to have a proper mapping function which specifies how the interpretations of lithology imply deposits, and then both of these reports can be merged. Since these two reports provide uncertain information on two different but inter-related concepts i.e., deposit and lithology , we refer to them as semantically heterogeneous . Propagating a piece of uncertain information from in this paper. Example 4 Consider the following two structured reports which again are for the same layer of the same well. In the left report, there are two probability distri-butions on two textentries, respectively. When we use this information to make a prediction, we can either use the information about the deposit or lithology since the former may have been derived from the later or vice versa. Whilst in the right report, the child of the prob value =  X  ...  X  tag is not a textentry, it is in fact a subtree involving two concepts deposit and lithology .Thisin-formation can be the summary of general knowledge about this area saying what deposit is associated with what lithologies. For the purpose of prediction, uncer-tainties assigned to the pairs of values (e.g., ( water , L1 ) )havetobere-assigned to values of deposit such as water , oil , etc. Following this uncertainty re-assignment, the newly derived uncertain information on deposit can be merged with the information in the left XML. These two pieces of uncertain information are also referred to as semantically heterogeneous , however, they require a differ-ent method to propagate before they can be merged. Subtree uncertain information is the third topic we will study in this paper.
So the purpose of this paper is to significantly extend our previous paper on han-dling uncertainty [ 3 ] by presenting techniques for merging structured reports with uncertainty expressed: (1) at different levels of granularity; (2) on different but inter-related sets of values; and (3) on subtrees. We will proceed as follows. In Sect. 2 , we present formal definitions of logical representations of XML docu-ments, review the basics of DS theory, and provide formal definitions of mod-elling and merging uncertain information in structured reports in the form of mass functions on the same textentry of two XML documents. In Sect. 3 , we consider propagating and merging uncertain information at different levels of granularity. In Sect. 4 , we investigate methods of reasoning with semantically heterogeneous uncertain information on subtrees. In Sect. 5 , we compare our work with related research. Finally, in Sect. 6 we provide conclusions. 2 Structured reports We now briefly review definitions for structured reports, Dempster X  X hafer the-ory of evidence (DS theory), for representing uncertain information in structured reports. 2.1 Basic definitions Each structured report is an XML document, but not vice versa, as defined below. This restriction means that we can easily represent each structured report by a ground term in classical logic.
 Definition 1 [Structured report:] If  X  is a tagname (i.e. an element name), and  X  is a textentry, then  X   X  / X  is a structured report. If  X  isatagname(i.e.an element name),  X  is a textentry,  X  is an attribute name, and  X  is an attribute value, then  X  X  =  X   X  / X  is a structured report. If  X  is a tagname and  X  1 ,..., X  n are structured reports, then  X   X  1 ... X  n / X  is a structured report.
 expect a DTD for a given domain. For instance, we would expect that for an im-plemented system that merges petroleum exploration reports, there would be a corresponding DTD. One of the roles of a DTD, say for petroleum exploration reports, would be to specify the minimum constellation of tags that would be ex-pected of a petroleum exploration report. We may also expect integrity constraints represented in classical logic to further restrict appropriate structured reports for a domain [ 5 ]. In this paper, we will impose some further constraints on structured reports, in Sect. 2.3 , to support the handling of uncertainty.
 being the tagnames and the leaf nodes being the textentries. When we refer to a subtree (of a structured report), we mean a subtree formed from the tree represen-tation of the structured report, where the root of the subtree is a tagname and the leaves are textentries. We formalize this as follows.
 Definition 2 [Subtree:] Let  X  be a structured report and let  X  be a tree that is isomorphic to  X  .Atree  X  is a subtree of  X  iff (1) the set of nodes in  X  isasubset report, and  X  is isomorphic to  X  ,thenwedescribe  X  asasubtreeof  X  .
 logic) where each tagname is a function symbol and each textentry is a constant symbol.
 Definition 3 [Abstract term:] Each structured report is isomorphic with a ground term (of classical logic) called an abstract term. This isomorphism is defined in-tentry, then  X ( X ) is an abstract term that is isomorphic with  X   X  / X  ;(2)If  X  X  =  X   X  / X  is a structured report, where  X  is a textentry, then  X ( X ,  X ) is an abstract term that is isomorphic with  X  X  =  X   X  / X  ; and (3) If  X   X  1 .. X  n / X  is  X  n is an abstract term that is isomorphic with term that is isomorphic with  X   X  1 ... X  n / X  .
 by using the branch of the isomorphic structured report, and we can refer to a sub-tree of an abstract term by using the subtree of the isomorphic structured report. Note, Definition 1 describes how an XML document can be defined recursively sociated with the tagname. Also Definition 3 specifies how a tree structure like XML document can be equally described as a logical term which also reflects the relationships between tagnames and their values. For instance, XML informa-tion date 03 / 03 / 99 / date is denoted as date ( 03 / 03 / 99 ) in logics where 03 / 03 / 99 can be understood as the value of attribute date .
 Example 5 Consider the following structured report. In this abstract term, fieldreport / log / deposit is a branch. 2.2 Basics of Dempster X  X hafer theory of evidence The Dempster X  X hafer theory (DS theory) of evidence provides a mechanism for cially when it is not possible to assign a proportion of the total belief to single elements of a set of values. DS theory [ 13 , 14 ] has a commonly accepted advan-tage over probability theory in terms of assigning a proportion of an agent X  X  belief to a subset of a set of possible values rather than only on singletons, and assigning any unspecified proportion to the whole set. This is especially useful when the evidence supporting an agent X  X  belief is not accurate or incomplete. Furthermore, multiple pieces of evidence can be accumulated over time on the same subject and these pieces of evidence can be combined/merged in some way in order to draw a conclusion out of them. Dempster X  X  combination rule in DS theory provides a sim-ple mechanism to achieve this objective. Due to these two advantages provided by DS theory, we have chosen it to model, reason and merge uncertain information in structured reports.
 a question. is called the frame of discernment .A mass function , also called a basic probability assignment , captures the impact of a piece of evidence on subsets of . A mass functions m :  X ()  X  X  0 , 1 ] satisfies: subset A , i.e. the extent to which all available evidence supports A ,weneedtosum all the mass assigned to all subsets of A .A belief function , Bel :  X ()  X  X  0 , 1 ] , is defined as A plausibility function , denoted Pl :  X ()  X  X  0 , 1 ] ,isdefinedas Dempster X  X  rule of combination below shows how two mass functions m 1 and m 2 on the same frame of discernment from independent sources, can be combined to produce a merged mass function. theory as a special case of DS theory. 2.3 Representing uncertain information To support the representation of uncertain information in structured reports, we reserved for representing uncertain information. Second, we assume some con-straints on the use of these tags so that we can ensure they are used in a mean-ingful way with respect to probability theory and Dempster X  X hafer theory of ev-idence. The set of key uncertainty tagnames for this paper are probability and belfunction .Thesetof subsidiary uncertainty tagnames for this paper are prob , multiitem , mass ,and massitem . The union of the key uncer-tainty tagnames and the subsidiary uncertainty tagnames is the set of reserved tagnames .
 Definition 4 ([ 3 ]) The following structured report is called a probability-valid component (ProVC) iff each  X  i  X  X   X  1 , ..,  X  n } is of the form prob value =  X   X  / prob ,where  X   X  X  0 , 1 ] and  X  is a textentry. pre-defined set containing mutually exclusive and exhaustive values that the re-lated tagname can take.
 Example 6 The following is a ProVC which corresponds to a probability distribu-tion p ( water ) = 0 . 2and p ( gas ) = 0 . 8. Definition 5 The structured report probability  X  1 ,..., X  n / probability is called a subtree probability-valid component (ProSC) iff for each  X   X  X   X  and for each  X  i j  X  X   X  i 1 ,..., X  i m } ,  X  i j is of the form  X  i j Example 7 The following is a ProSC that models a probability distribution on a are multiple concepts in this uncertain information. In the above example, each probability value is attached to a compound element combining deposit and lithology .
 Definition 6 ([ 3 ]) The following structured report is called a belfunction-valid component (BelVC) iff for each  X  i  X  X   X  1 ,..., X  n }  X  is of the form mass value =  X  i  X  i / mass and  X  i is in the form where  X  i  X  X  0 , 1 ] and  X  is a textentry. To make the subsequent notation simpler, we also let  X  i ={  X  i 1 ,..., X  i x } . In this way, a BelVC can be represented as a collection of (subset, mass value) pairs, ( X  i , X  i ), i = 1 ,..., n . Example 8 The following is a BelVC on a single tagname deposit . For this, let tually exclusive and exhaustive values for the related tagname as in the case for ProVCs. We now provide the definition of mass functions on subtrees.
 Definition 7 The structured report belfunction  X  1 ,..., X  n / belfunction is called a subtree belfunction-valid component (BelSC) iff for each  X   X  i is in the form and each  X  i j in {  X  i 1 ,..., X  i x } is in the form where  X  i  X  X  0 , 1 ] ,  X  i j can be used to stand for a subset with mass value  X  i where the subset consists of elements with multiple atom values. Example 9 The following is a BelSC providing a mass function on a subtree. ements should come from different frames. So the tagnames should be distinct. In addition, if the subtree involves n tagnames, then in each ( multiitem , / multiitem ) pair, there should be n tagnames. These are the two constraints we impose on BelSCs. When a tagname among these n names is missing, this part of the XML can be extended to include the missing tagname. More specifically, if we are defining a mass function for a subtree involving frames 1 and 2 ,then for a mass assignment that involves elements from just one of the two frames, we can extend it to include all the elements in the other frame. For example, the mass functioninExample9gives 0 . 4 , then it can be extended into m ( { gas , L1 , gas , L2 ,..., gas , L10 } ) = 0 . 4 . This means gas is compatible with all the lithologies. Therefore, in the fol-lowing, we always assume that a BelSC complies with these two constraints. ponents and are normally part of larger structured reports. Normally, we would expect that for an application, the DTD for the structured reports would exclude a key uncertainty tag as the root of a structured report. In other words, the key un-certainty tags are roots of subtrees nested within larger structured reports. We also assume various integrity constraints on the use of the uncertainty components. Definition 8 Let probability  X  1 ,..., X  n / probability be a ProVC or a ProSC, and let  X  i  X  X   X  1 ,..., X  n } be either of the form prob value =  X  / multiitem / prob . This component adheres to the full probability distribution constraint iff the following two conditions hold: Definition 9 Let belfunction  X  1 ,..., X  n / belfunction beaBelVCor in the component. This component adheres to the full belfunction distribution constraint iff the following two conditions hold: When there are two BelVCs referring to the same textentry, we need to merge them. The following procedure implements Dempster X  X  combination rule. Definition 10 ([ 3 ]) Let the following be two BelVCs where 1.  X  1 i  X  X   X  1 1 ,..., X  1 p } is of the form mass value =  X  1 i  X  1 i / mass 3.  X  2 j  X  X   X  2 1 ,..., X  2 q } is of the form mass value =  X  2 j  X  2 j / mass Let the combined BelVC be belfunction  X  1 ,..., X  s / belfunction where each  X  k  X  X   X  1 ,..., X  s } is of the form mass value =  X  k  X  k / mass and for the ( X  1 n , X  1 n ) and ( X  2 m , X  2 m ) pairs, and  X  k is of the following form much of the total belief has been committed to the empty set while combining two pieces of uncertain information. A higher  X   X  value reflects either an inconsistency among the two sources or lower confidence in any of the possible outcomes from both sources.
 Definition 11 Let the abstract terms  X  1 and  X  2 each denote a BelVC and let X be to  X  Definition 10 .
 tual merge. Looking back at Example 1 again, if we let  X  1 and  X  2 be the abstract merged abstract term isomorphic to the third XML document in the example. 3 Merging uncertain information on textentries with compatible frames In this section, we concentrate on merging structured reports with uncertain infor-mation (uncertainty valid components) on textentries where either the uncertainty is expressed at different levels of granularity (which we describe as semantically homogeneous ) or on different but inter-related sets of values (which we describe as semantically heterogeneous ). We consider both probabilistic and belief function information and take probability theory as a special case of belief function theory. We leave the topic of merging semantically heterogeneous uncertainty-valid com-ponents on subtrees from multiple structured reports to the next section. nent and one without, we take the latter as a special case of the former and assign value 1 . 0 (no matter whether it stands for a probability value or a mass value) to the corresponding textentry (or textentries). Then, these two structured reports can be merged using one of the rules defined below.
 need to emphasize that in this paper any two uncertainty components to be merged are assumed to refer to the same or related issue (or topic) that are being consid-ered. For instance, both uncertainty components are either about the deposit of layer X of NorthSea for WellNo A , or about the deposit or lithology of NorthSea for WellNo A , layer Y . If it is the case that one uncertainty component is about the deposit of NorthSea for WellNo A and another is about the lithology of NorthSea for WellNo B , then these two uncertainty components cannot be merged. The method to verify semantically whether two given uncertainty components are eligible for merging is given in [ 5 ]. In the rest of this paper, whenever we intend to merge two such components, we assume their eligibility has been checked and we will not repeat this prerequisite any further. 3.1 Propagation operation in DS theory When two mass functions are not given on the same frame, they cannot be com-bined directly, rather one mass function has to be propagated to the frame of an-other mass function. Let us now look at several situations when this propagation can take place.
 Definition 12 Let 1 and 2 be two frames of discernment and be a mapping refinement of 1 ,and 1 is called a coarsening of 2 . is called a refinement mapping . as a special case of mass function) on frame 1 ={ liquid , solid } and another on frame 2 ={ water , oil , gas , sand , stone } , respectively. 2 is in fact a refinement of 1 , if we define the refinement mapping function as Through a refinement mapping , we can also define a coarsening mapping func-tion : 2  X  1 as: For instance, the coarsening mapping function of the above refinement mapping function gives Lemma 1 Let 2 be a refinement of frame 1 by a refinement mapping and let m 1 be a mass function on 1 . Function m 2 defined below is a mass function on m 2 ( T ) = m 1 ( S ), s . t . T = be a mass function on 1 . Applying Lemma 1 , is a mass function on 2 .
 Lemma 2 Let 1 be a coarsening of frame 2 by a coarsening mapping function function on 1 . m 1 ( S ) = T m 2 ( T ) s.t. S = based on Lemma 2 , this mass function generates a mass function on 1 as m 1 ( { liquid } ) = 0 . 2 + 0 . 8 = 1.
 Definition 13 Let 1 and 2 be two frames of discernment containing possible values to two related questions Q 1 and Q 2 .Let be a mapping function : the true answer to question Q 2 must be one of the elements in ( X  1 i ) = X  , and for and 2 are said to be compatible .
 patibility mapping can be defined from 2 to 1 . A refinement (or coarsening) mapping is a special case of compatibility mapping.
 Lemma 3 Let 1 and 2 be two related frames with a compatibility mapping . Let m 1 be a mass function on 1 . Then function m 2 defined below is a mass function on 2 . m 2 ( T ) = S m 1 ( S ), s . t . T = gies (captured by 3 ) can be established through a mapping : 2  X  2 3 as ( water ) ={ L1 , L2 } , ( oil ) ={ L3 , L4 } , ( gas ) ={ L2 , L5 , L6 } , ( sand ) ={ L8 , L9 } , ( stone ) ={ L7 , L8 } .
 Using this mapping relationship, the uncertain information on 3 in the second XML document in Example 3 can be propagated to 2 to obtain a new mass function on deposit as 3.2 Predicate for belief propagation on textentries We now define a formal procedure to perform the above propagations as discussed in Sect. 3.1 and define a predicate to call the procedure.
 Definition 14 Let belfunction  X  1 1 ,..., X  1 p / belfunction be a BelVC where 1.  X  1 i  X  X   X  1 1 ,..., X  1 p } is of the form mass value =  X  1 i  X  1 i / mass / belfunction where each  X  2 j  X  X   X  2 1 ,..., X  2 q } is of the form mass value =  X  2 and  X  2 j is of the form massitem  X  2 j / massitem Definition 15 Let the abstract term  X  beaBelVCon 1 .Let be a compat-ibility mapping : 1  X  2 2 ,and X be a logical variable. The predicate Propagate ( X , , X ) is such that X is evaluated to  X  where  X  is the abstract term denoting the propagated BelVC on 2 obtained by Definition 14 .
 from an existing BelVC on another frame, no matter whether the relationship be-tween the two frames is a refinement, or a coarsening, or compatible. again here.
 Definition 16 Let abstract term  X  be the following ProVC and each  X  i  X  X   X  1 ,..., X  n } is of the form prob value =  X   X  / prob where  X   X  X  0 , 1 ] and  X  is a textentry. Then  X  is the abstract term denoting the following BelVC where each  X  i  X  X   X  1 ,..., X  n } is of the form and  X   X  X  0 , 1 ] ,and  X  is a textentry.
 Definition 17 If the abstract term  X  is a ProVC and X is a logical variable, then BayesBelief ( X , X ) is a predicate such that X is evaluated to  X  where  X  is the abstract term denoting the BelVC obtained from  X  by Definition 16 .
 ProSC can be converted into a BelSC.
 Definition 18 Let abstract term  X  be the following ProSC and each  X  i  X  X   X  1 ,..., X  n } is of the form prob value =  X  i  X  i / prob where  X   X  X  0 , 1 ] and  X  Then  X  is the abstract term denoting the following BelSC where each  X  i  X  X   X  1 ,..., X  n } is of the form mass value =  X  i  X  i / mass and  X   X  X  0 , 1 ] ,and  X  Definition 19 Let the abstract term  X  be a ProSC and let X be a logical variable. The predicate BayesBelief ( X , X ) is such that X is evaluated to  X  where  X  is the abstract term denoting the BelSC obtained from  X  by Definition 18 . Example 10 Letusre-visitExample 2 .Let  X  1 and  X  2 be the abstract terms for the two XML documents in this example left and right. Both of the ProVCs can be converted by calling predicates BayesBelief ( X  1 , X 1 ) and BayesBelief ( X  2 , X 2 ) ,where X 1 and X 2 are ground by abstract terms  X  1 and  X  2 respectively where  X  1 and  X  2 are the converted BelVCs represented by the XML documents left and right below (respectively). either answer solid or liquid will be sufficient, then uncertain information Propagate ( X 1 , , X 3 ) where is a coarsening mapping and X 3 is ground to  X  as follows. final result where X 3 is ground by  X  3 and X 2 is ground by  X  2 . The whole sequence of calls to the Prolog predicates can be summarized as: Propagate ( X 1 , , X 3 ) is replaced by Propagate ( X 2 , , X 3 ) where the mass function on the general level of frame will be propagated to the finer frame through a refinement mapping . In this case, the sequence of executions of pred-icates is revised as: Example 11 Consider the following three uncertainty valid components where  X  1 ,  X  are the abstract terms of the left and right BelVCs, and  X  3 is the corresponding abstract term for the ProVC. tain location at the most general level. Q can be answered by the following string of calls to several predicates.

Propagate ( X  1 , , X 1 )  X  Dempster ( X 1 , X  2 , X 2 )  X  BayesBelief ( X  3 , X 3 ) mapping ) as its first argument and combines it with the second BelVC (on the right-hand side) to produce a merged result denoted by X 2 . This newly generated BelVC is then combined with another converted BelVC denoted by variable X 4 (from probability, using condition literal BayesBelief ( X  3 , X 3 ) first and then propagated to the right frame) using predicate Dempster to obtain the final re-sult which is denoted by X 5 . { liquid } , so the combined result gives a higher confidence in the choice pre-ferred by all of them and a lower confidence in the less preferred one. This is due to the fact that these sources are in agreement with each other. Therefore, when multiple sources are not in conflict, merging them will produce a more complete and comprehensive solution than individual sources. Methods for detecting incon-sistencies among multiple sources have been discussed and provided in [ 3 ]and we will not discuss them further here. 4 Merging uncertain information on subtrees To develop predicates for merging subtree uncertainty components, we need to look at the approaches to propagating mass functions among compound frames, since a subtree uncertainty component contains two or more frames of discern-components. 4.1 Extension and projection operations in DS theory The concept of compatible frames (or compatibility relations) can be extended to situations where a frame is in fact a Cartesian product (or a subset of the product) of several frames.
 Definition 20 Let i , i = 1 ,..., n be n frames of discernment each of which contains mutually exclusive and exhaustive solutions to a related question or a variable. Frame = X  i i is a joint frame containing solutions to the joint question or the joint variable.
 What deposit is it? ,and 2 be a frame containing values (answers) to question What lithology is it? ,then 1  X  2 is the frame containing values for the joint question What deposit and what lithology is it? with values that are in the form  X  false, that is,  X  1 i and  X  2 j are not compatible, 1  X  2 is then a proper subset of the set product consisting of only those pairs with compatible elements from individual frames. Values of a frame are also referred to as configurations of the question or variable associated with the frame. For example, if we let g and h be two variables that can take values from 1 and 1  X  2 , respectively, then value water is a configuration of g and value water , L1 is a configuration of h .
 Let V p  X  V and V q  X  V be two subsets of variables where V p  X  V q ,and Q  X  V q be a set of configurations of V q . Then, the projection of Q to V p ,
V p , then the extension of H to V q , denoted by H a set of configurations for variable set V q .
 it.
 Let V p ={ r 1 , r 2 } and V q ={ r 1 , r 2 , r 3 } be two subsets of vari-ables and Q ={  X  11 , X  21 , X  31 ,  X  12 , X  23 , X  31 } be a set of configurations for V q ,then Q  X  V p ={  X  11 , X  21 ,  X  12 , X  23 } is a set of configurations for V p .
 V , its extension to variable set V q would be Q = H  X  V q ={  X  11 , X  21 , X  31 ,  X  This set of configurations is different from Q although the projection of Q is H too.
 Definition 22 Let V p  X  V and V q  X  V be two subsets of variables where  X  = V marginal of m on V p for the joint variable V p , denoted by m  X  V p defined below, is a mass function on V p marginal of m on V q for the joint variable V q , denoted by m  X  V q defined below, is a mass function on V q Example 13 Consider the following two uncertainty components.
The left-hand XML document defines a mass function on frame 2 = { water , oil , gas , sand , stone } as m 2 ( { water , gas } ) = 0 . 2and m 2 ( { sand } ) = 0 . 8, and the right-hand XML document defines another mass function on frame 2  X  3 where 3 ={ L1 , L2 , L3 , L4 , L5 } as m 2  X  3 ( { water , L1 , oil , L3 } ) = 0 . 4and m 2  X  3 ( { gas , L2 } ) = 0 . 6. Assume an agent is interested in knowing the joint impact of these two pieces of evidence on the value set 2 , then the impact of the mass function on 2  X  3 has to be marginalized on 2 . Based on Definition 22 , m 2  X  3 gives a new mass function on 2 as m can be merged with m 2 using Dempster ( X  1 , X  2 , X ) to obtain the final result m ( { water } ) = 0 . 4and m ( { gas } ) = 0 . 6, if we assume that these two pieces of evidence are from independent sources. 4.2 Predicate for belief marginalization on subtrees Now we provide a procedure that implements the marginalization of a mass func-tion from a larger variable set to a smaller set defined in Definition 22 . Definition 23 Let the following be a BelSC belfunction  X  1 1 ,..., 1.  X  1 i  X  X   X  1 1 ,..., X  1 q } is of the form mass value =  X  1 i  X  1 i / mass 2.  X  1 i is of the form multiitem  X  1 i 3. each  X  1 i 4. and  X  1 i V and each  X  2 j and  X  2 When | V p |= 1, let the marginalized BelVC on V p be each  X  2 j is of the form and and  X  2 is a tagname that is associated with the set of values in V p . reduced to a BelVC.
 Definition 24 Let the abstract term  X  be a BelSC on a subtree with vari-PropagateTree ( X , V q , X ) is such that X is evaluated to  X  where  X  is the abstract term denoting the propagated BelSC (or BelVC) on V p obtained by Definition 23 .
 Example 14 Let  X  denote the BelSC in Example 13 . For this, we obtain a new BelVC as follows by applying predicate PropagateTree ( X , { deposit } , X ) , subtree structure is reduced to a BelVC on a textentry.
 procedure and predicate to marginalize a mass function from V p to V q through (with more variables) is not as useful as the projection operation which derives a mass function on a smaller frame, therefore we will not include these detailed definitions in this paper. 5 Comparison with related approaches In [ 11 ], a probabilistic XML model was presented to deal with information with uncertainty that was in the form of probabilities. Using this model, we can con-struct an XML report as illustrated below. Two types of probability assignments are distinguished, mutually exclusive or not mutually exclusive. For the first type, probabilities are assigned to single atoms where only one of these atoms can be precipitation ). For the second type, two single atoms can be compatible, so the total sum of probabilities can be greater than 1 (as for cities ). this occurs, the probability of an element is true is conditioned upon the existence example, if we would like to know the probability of sunny in London ,wehave as the conditional probability under its parent. A query is answered by tracing the relevant branches with the textentries specified by the query, and calculating probabilities using the conditional probabilities along these branches. These de-rived probabilities are then either multiplied or added depending on whether the  X  X nd X  or the  X  X r X  operation are used in the original query. For instance, the query  X  X ondon is either sunny or rain on 19/3/02 X  is evaluated as: to multiple levels of subtrees and provides a means to calculate the joint probabil-ity from them. However, it does not merge multiple probabilistic XML documents on the same issue. On the contrary, our uncertainty XML model focuses on multi-ple XML datasets and provides a set of means to merge opinions with uncertainty from different sources on textentries and subtrees. Therefore, our modelling and reasoning method is more general than that in [ 11 ].
 that stand for probabilities (denoted as  X  ); (2) tags that stand for possible values associated with probabilities (denoted as  X  ); and (3) ordinary tag names (denoted as  X  X m X  stands for  X  X ame X  and  X  X el X  stands for  X  X elephone number X .
 the example (or any other examples) to explicitly show how these types of tags are represented, we created an XML document for this example based on our of redundant information in this XML document, such as all the tags related to possible values are not strictly required, since a possible tag will al-ways sit between a probability tag and a normal tag. This example can be equivalently represented in our ProSC format with a more compact structure as show in Fig. 2 right.
 (tag, value) and the combination of these pairs are treated as possible worlds .The merging of two probabilistic XML documents is to generate all the combinations of possible worlds from the two documents. As a consequence, there can be a huge number of branches in the merged XML document and there can be varieties of the document. For instance, one example given in the paper consists of two simple XML documents about persons with certainty (no probabilities). One document has details for four person s with each person has tags firstname , lastname , phone , room and associated values, the other document has de-tails for two person s with the same set of tag names and corresponding values. Interestingly, merging these two simple documents in [ 15 ] generates 3201 possi-ble worlds which results in a very large and complex tree. Most of the branches in the tree are completely meaningless. However, using our logic-based merging tool, coupled with the background knowledge that only persons with the same firstname and lastname may refer to the same person, the merging result is a very simple XML document with four segments for four persons and with some prob-ability components to indicate multiple values for same tags, such as room . be dealt with using discounting operation in DS theory and it will provide the same effect as the conditional probabilities in [ 11 ]. Discussions on modelling and merging this type of uncertain information are considered in [ 4 ].
 centrated on semantic meanings of concepts that carry the uncertain information. In this paper we have not considered the semantic heterogeneity of XML branches. wish to treat some branches as equivalent to others. So for example, in an applica-tion, we may wish to consider a branch report / deposit / zone and a branch report / deposit / sector as carrying information for the same location if they both have the same textentry. It is possible to axiomatize such equivalences on an application-dependent basis. 6Conclusion This paper significantly extends our previous paper [ 3 ] on merging structured re-ports that contain uncertain information. In this paper, we have discussed methods to model and merge mass functions and probabilities assigned to textentries with trees involving multiple frames where uncertain information is semantic hetero-geneous.
 developments into an XML framework and how to merge XML documents that involve uncertainties in the format of mass functions, we did not include research results that justify the propagations and combinations of mass functions reported Instead, we emphasized on how such information, when encoded into XML struc-tures, can be merged and how this procedure can be formally described in logical terminologies and then be executed as Prolog predicates. Developing this frame-work has involved a number of design decisions that we believe have resulted in a set of definitions for handling and merging uncertain information in a viable and useful way. Whilst other authors have considered some of these goals, we have shown in Sect. 5 how our approach is superior.
 References
