 We present a detailed study of network evolution by analyzing four large online social networks with full temporal information about node and edge arrivals. For the first time at such a large scale, we study individual node arrival and edge creation processes that collectively lead to macroscopic properties of networks. Using a methodology based on the maximum-likelihood principle, we in-vestigate a wide variety of network formation strategies, and show that edge locality plays a critical role in evolution of networks. Our findings supplement earlier network models based on the inherently non-local preferential attachment.

Based on our observations, we develop a complete model of net-work evolution, where nodes arrive at a prespecified rate and select their lifetimes. Each node then i ndependently initiates edges ac-cording to a  X  X ap X  process, selecting a destination for each edge ac-cording to a simple triangle-closing model free of any parameters. We show analytically that the combination of the gap distribution with the node lifetime leads to a power law out-degree distribution that accurately reflects the true network in all four cases. Finally, we give model parameter settings that allow automatic evolution and generation of realistic synthe tic networks of arbitrary scale. Categories and Subject Descriptors: H.2.8 [Database Manage-ment] : Database applications X  Data mining General Terms: Measurement, Experimentation Keywords: Social networks, Graph generators, Network evolu-tion, Maximum likelihood, Triadic closure, Transitivity
In recent years a wide variety of models have been proposed for the growth of complex networks. These models are typically advanced in order to reproduce statistical network properties ob-served in real-world data. They are evaluated on the fidelity with which they reproduce these global network statistics and patterns. In many cases, the goal is to define individual node behaviors that result in a global structure such as power law node degree distri-butions; in other cases, the goal is to match some other network property such as small diameter.

Part of this work was done while the first and second authors were visiting Yahoo! Research.

For example, the observation of heavy-tailed degree distribu-tions [10] led to hypothesis about edge creation processes (e.g., preferential attachment [1]) that could lead to this observation. In fact, there are several edge creation processes that all lead to heavy-tailed degree distributions and it is not clear which among them captures reality best.

Here we take a different approach. Instead of only focusing on the global network structure and then hypothesizing about what kind of microscopic node behavior would reproduce the observed macroscopic network structure, we focus directly on the micro-scopic node behavior per se . For the first time at such a large scale, we study a sequence of millions of individual edge arrivals, which allows us to directly evaluate and compare microscopic processes that give rise to global network structure.
 Evaluation based on likelihood. Given that the microscopic be-havior of nodes solely determines the macroscopic network proper-ties, a good network model should match real-world data on global statistics, while maximizing the likelihood of the low-level pro-cesses generating the data. Towards this goal, we propose the use of model likelihood of individual edges as a way to evaluate and compare various network evolution models.

Likelihood has not been considered to date in the analysis of evolution of large social networks mainly due to lack of data and computational issues. Many early network datasets contained only a single or a small number of snapshots of the data, making like-lihood computations for evolutionary models infeasible. We study four large social networks with exact temporal information about individual arrivals of millions of nodes and edges. Here we are therefore able to consider edge-by-edge evolution of networks, and hence efficiently compute the likelihood that a particular model would have produced a particular edge, given the current state of the network. In contrast to previous work on evolution of large net-works that used a series of snapshots to consider patterns at global scale, we study the exact edge arrival sequence, which means we are able to directly observe and model the fine-grained network evolutionary processes that are directly responsible for global net-work patterns and statistics.

A likelihood-based approach has several advantages over ap-proaches based purely on global statistics: (1) Models may be compared directly in a unified way, rather than arguing whether faithful reproduction of, e.g., diameter is more important than clustering coefficient and so forth. (2) As our understanding of real-world networks improves, the evaluation criterion, i.e., likelihood, remains unchanged while the generative models improve to incorporate the new understanding. Success in modeling can therefore be effectively tracked. (3) Models may be meaningfully distinguished based on as-yet-undiscovered properties of real-world data. Data and model structure. We consider four large online social network datasets  X  F LICKR ( flickr.com , a photo-sharing web-site), D ELICIOUS ( del.icio.us , a collaborative bookmark tag-ging website), Y AHOO !A NSWERS ( answers.yahoo.com ,a knowledge sharing website), and L INKED I N ( linkedin.com ,a professional contacts website)  X  where nodes represent people and edges represent social relationships. These networks are large with up to millions of nodes a nd edges, and the time span of the data ranges from four months to almost four years. All the networks are in early stages of their evolution with the connected component being small and the clustering coefficient increasing over time.
We consider models that can be decomposed into three core pro-cesses, namely, the node arrival process (governs the arrival of new nodes into the network), the edge initiation process (determines for each node when it will initiate a new edge), and the edge destina-tion selection process (determines the destination of a newly initi-ated edge). Our networks do not include removal of nodes or edges, so we do not model deletion (although we do model the  X  X eath X  of a node in the sense that it ceases producing new edges). Our results. We begin with a series of analyses of our four net-works, capturing the evolution of key network parameters, and eval-uation of the extent to which the edge destination selection process subscribes to preferential attachment. We show that the inherently non-local nature of preferential attachment is fundamentally unable to capture important characteristics in these networks. To the best of our knowledge, this is the first direct large-scale validation of the preferential attachment model in real networks.

Next, we provide a detailed analysis of the data in order to con-sider parsimonious models for edge destination selection that incor-porate locality. We evaluate a wide variety of such models using the maximum-likelihood principle and choose a simple triangle-closing model that is free of parameters. Based on the findings, we then propose a complete network evolution model that accurately captures a variety of network properties. We summarize our model based on the three processes listed earlier.
 Node arrival process. We find large variation in node arrival rates over the four networks, ranging from exponential to sub-linear growth. Thus we treat node arrival rate as input to our model.
 Edge initiation process. Upon arrival, a node draws its lifetime and then keeps adding edges until reaching its lifetime, with edges inter-arrival rate following a power law with exponential cut-off distribution. We find that edge initiations are accelerating with node degree (age), and prove that this leads to power law out degree distributions. The model produces accurate fits and high likelihood. Edge destination selection process. We find that most edges (30% X  60%) are local as they close triangles, i.e., the destination is only two hops from the source. We consider a variety of triangle-closing mechanisms and show that a simple scheme, where a source node chooses an intermediate node uniformly from among its neighbors, and then the intermediate node does the same, has high likelihood.
Our model is simple and easy to implement. It precisely de-fines the network evolution process, and we also give parameter settings that allow others to generate networks at arbitrary scale or to take a current existing network and further evolve it. We show that our model produces realistic social network evolution follow-ing the true evolution of network properties such as clustering co-efficient and diameter; our purely local model gives rise to accurate global properties.
Many studies on online social networks, world wide web, and bi-ological networks focused on macroscopic properties of static net-works such as degree distributions, diameter, clustering coefficient, communities, etc; work in this area includes [10, 21, 2, 18, 8, 7]. Similarly, macroscopic properties of network evolution, like densi-fication and shrinking diameters, were examined [16, 11, 19, 13].
Given that the classical Erd X s X  X  X nyi model cannot capture the above network characteristics, a number of alternate network mod-els have been proposed. The copying [14] and the preferential at-tachment [1] models belong to this category. The Forest Fire model [16] attempts to explain the densification and decreasing-diameter phenomena observed in real networks. See [6] for a topic survey.
Recently, researchers examined the finer aspects of edge creation by focusing on a small set of network snapshots. The role of com-mon friends in community formation was analyzed by Backstrom et al. [3]. Kleinberg and Liben-Nowell [17] studied the predictabil-ity of edges in social networks. The role of triangle closure in so-cial networks was long known to sociologists. Simmel theorized that people with common friends are more likely to create friend-ships and Krackhardt and Handcock [12] applied this theory to ex-plain the evolution of triangle closures. A network model based on closed triangles was proposed by Shi et al. [20].

The maximum-likelihood principle has been typically used to estimate network model parameters [15, 22, 23] or for model se-lection [4], which often requires expensive computations of high dimensional integrals over all possible node arrival sequences. In contrast, we use the likelihood in a much more direct way to evalu-ate and compare different modeling choices at a microscopic level. Datasets. For each of our four large network datasets, we know the exact time of all the node/edge arrivals. Table 1 gives the ba-sic statistics of the four networks. All the networks slowly densify with a densification exponent [16]  X   X  1 . 2 . All the networks, ex-cept D ELICIOUS , have shrinking diameter. In F LICKR ,A NSWERS and L INKED I N , the effective diameter reaches the maximum value of 10 when the network has around 50,000 nodes, and then slowly decreases to the around 7.5; in D ELICIOUS , the diameter is prac-tically constant. Also, in all the networks, a majority of edges are bidirectional (column E b ). The reciprocity is 73% in F LICKR in D ELICIOUS , and 58% in A NSWERS ;L INKED I N is undirected, but we know the edge in itiator. The fraction of nodes that belongs to the largest weakly connected component is 69% in F LICKR in D ELICIOUS , 81% in A NSWERS , and 91% in L INKED I N . Notation. Let N, E, and T denote the total number of nodes, edges, and the span of the data in days. Let G t be a network com-posed from the earliest t edges, e 1 ,...,e t for t  X  X  1 ,...,E Let t ( e ) be the time when the edge e is created, let t time when the node u joined the network, and let t k ( u ) when the k th edge of the node u is created. Then a t ( u denotes the age of the node u at time t .Let d t ( u ) denote the degree of the node u at time t and d ( u )= d T ( u ) .Weuse [  X  ] predicate (takes value of 1 if expression is true, else 0). Maximum-likelihood principle. The maximum-likelihood esti-mation (MLE) principle can be applied to compare a family of pa-rameterized models in terms of their likelihood of generating the observed data, and as a result, pick the  X  X est X  model (and parame-ters) to explain the data. To apply the likelihood principle, we con-sider the following setting: we evolve the network edge by edge, and  X  is the decay exponent ( E h  X  exp(  X   X h ) ) of the number of edges E Figure 1: Probability p e ( d ) of a new edge e choosing a destina-tion at a node of degree d . and for every edge that arrives into the network, we measure the likelihood that the particular edge endpoints would be chosen under some model. The product of these likelihoods over all edges will give the likelihood of the model. A higher likelihood means a  X  X et-ter X  model in the sense that it offers a more likely explanation of the observed data. For numerical purposes, we use log-likelihoods.
In this section we study the bias in selection of an edge X  X  source and destination based on the degree and age of the node.
The preferential attachment (PA) model [1] postulates that when a new node joins the network, it creates a constant number of edges, where the destination node of each edge is chosen proportional to the destination X  X  degree. Using our data, we compute the probabil-ity p e ( d ) that a new edge chooses a destination node of degree d ; p ( d ) is normalized by the number of nodes of degree d that exist just before this step. We compute:
First, Figure 1(a) shows p e ( d ) for the Erd  X  os X  X  X nyi [9] random network, G np , with p =12 /n .In G np , since the destination node is chosen independently of its degree, the line is flat. Similarly, in the PA model, where nodes are chosen proportionally to their degree, we get a linear relationship p e ( d )  X  d ; see Figure 1(b). Figure 2: Average number of edges created by a node of age a .
Next we turn to our four networks and fit the function p e d .InF LICKR , Figure 1(c), degree 1 nodes have low er probability of being linked as in the PA model; the rest of the edges could be explained well by PA. In D ELICIOUS , Figure 1(d), the fit nicely fol-lows PA. In A NSWERS , Figure 1(e), the presence of PA is slightly weaker, with p e ( d )  X  d 0 . 9 .L INKED I N has a very different pattern: edges to the low degree nodes do not attach preferentially (the fit is d 0 . 6 ), whereas edges to higher degree nodes are more  X  X ticky X  (the fit is d 1 . 2 ). This suggests that high-degree nodes in L super-preferential treatment. To summarize, even though there are minor differences in the exponents  X  for each of the four networks, we can treat  X   X  1 , meaning, the attachment is essentially linear.
Next, we examine the effect of a node X  X  age on the number of edges it creates. The hypothesis is that older, more experienced users of a social networking website are also more engaged and thus create more edges.

Figure 2 plots the fraction of edges initiated by nodes of a certain age. Then e ( a ) , the average number of edges created by nodes of age a , is the number of edges created by nodes of age a normalized by the number of nodes that achieved age a : where t is the time when the last node in the network joined.
Notice a spike at nodes of age 0. These correspond to the people who receive an invite to join the network, create a first edge, and then never come back. For all other ages, the level of activity seems to be uniform over time, except for L INKED I N , in which activity of older nodes slowly increases over time.
Using the MLE principle, we study the combined effect of node age and degree by considering the following four parameterized models for choosing the edge endpoints at time t . ( t ) A: a t ( v )  X  DA: d t ( v )  X  a t ( v )  X   X  D: The probability of selecting a node v is proportional to its current degree raised to power  X  : d t ( v )  X  .  X  DR: With probability  X  , the node v is selected preferentially (proportionally to its degree), and with probability (1  X  formly at random:  X   X  d t ( v )+(1  X   X  )  X  1 /N ( t ) .  X  A: The probability of selecting a node is proportional to its age raised to power  X  : a t ( v )  X   X  DA: The probability of selecting a node v is proportional the product of its current degree and its age raised to the power  X  : d ( v )  X  a t ( v )  X  .

Figure 3 plots the log-likelihoods under different models, as a function of  X  . The red curve plots the log-likelihood of selecting a source node and the green curve for selecting the destination node of an edge.

In F LICKR the selection of destination is purely preferential: model D achieves the maximum likelihood at  X  =1 , and model DA is very biased to model D , i.e.,  X   X  1 . Model A has worse like-lihood but model DA improves the overall log-likelihood by around 10%. Edge attachment in D ELICIOUS seems to be the most  X  X an-dom X : model D has worse likelihood than model DR . Moreover the likelihood of model DR achieves maximum at  X  =0 . 5 sug-gesting that about 50% of the D ELICIOUS edges attach randomly. Model A has better likelihood than the degree-based models, show-ing edges are highly biased towards young nodes. For A NSWERS models D , A ,and DR have roughly equal likelihoods (at the optimal choice of  X  ), while model DA further improves the log-likelihood by 20%, showing some age bias. In L INKED I N , age-biased models are worse than degree-biased models. We also note strong degree preferential bias of the edges. As in F LICKR , model DA improves the log-likelihood by 10%.

We notice that selecting an edge X  X  destination node is harder than selecting its source (the green curve is usually below the red). Also, selecting a destination appears more random than selecting a source  X  the maximum likelihood  X  of the destination node (green curve) for models D and DR is shifted to the left when compared to the source node (red), which means the degree bias is weaker. Simi-larly, there is a stronger bias towards young nodes in selecting an edge X  X  source than in selecting its destination. Based on the obser-vations, we conclude that PA (model D ) performs reasonably well compared to more sophisticated variants based on degree and age.
Even though our analysis suggests that PA is a reasonable model for edge destination selection, it is inherently  X  X on-local X  in that edges are no more likely to form between nodes which already have friends in common. In this section we perform a detailed study of the locality properties of edge destination selection.

We first consider the following notion of edge locality: for each new edge ( u, w ) , we measure the number of hops it spans, i.e., the length of the shortest path between nodes u and w immediately before the edge was created. In Figure 4 we study the distribution of these shortest path values induced by each new edge for G p =12 /n ), PA, and the four social networks. (The isolated dot on the left counts the number of edges that connected previously disconnected components of the network.)
For G np most new edges span nodes that were originally six hops away, and then the number decays polynomially in the hops. In the PA model, we see a lot of long-range edges; most of them span four hops but none spans more than seven. The hop distribu-tions corresponding to the four real-world networks look similar to one another, and strikingly different from both G np and PA. The Figure 4: Number of edges E h created to nodes h hops away. h =0 counts the number of edges that connected previously disconnected components. number of edges decays exponentially with the hop distance be-tween the nodes (see Table 1 for fitted decay exponents  X  ). This means that most edges are created locally between nodes that are close. The exponential decay suggests that the creation of a large fraction of edges can be attributed to locality in the network struc-ture, namely most of the times people who are close in the network (e.g., have a common friend) become friends themselves.
These results involve counting the number of edges that link nodes certain distance away. In a sense, this overcounts edges ( u, w ) for which u and w are far away, as there are many more distant candidates to choose from  X  it appears that the number of long-range edges decays exponentially while the number of long-range candidates grows exponentially. To explore this phenomenon, we count the number of hops each new edge spans but then nor-malize the count by the total number of nodes at h hops. More precisely, we compute p
First, Figures 5(a) and (b) show the results for G np and PA mod-els. (Again, the isolated dot at h =0 plots the probability of a new edge connecting disconnected components.) In G np , edges are created uniformly at random, a nd so the proba bility of linking is independent of the number of hops between the nodes. In PA, due to degree correlations short (local) edges prevail. However, a non-trivial amount of pr obability goes to edges that span more than two hops. (Notice the logarithmic y -axis.)
Figures 5(c) X (f) show the plots for the four networks. Notice the probability of linking to a node h hops away decays double-exponentially, i.e., p e ( h )  X  exp(exp(  X  h )) , since the number of edges at h hops increases exponentially with h .Thisbehavioris drastically different from both the PA and G np models. Also note that almost all of the probability mass is on edges that close length-two paths. This means that edges are most likely to close triangles, i.e., connect people with common friends. Figure 5: Probability of linking to a random node at h hops from source node. Value at h =0 hops is for edges that connect previously disconnected components.
 Figure 6: Triangle-closing model: node u creates an edge by selecting intermediate node v , which then selects target node w to which the edge ( u, w ) is created.

Column E  X  in Table 1 further illustrates this point by presenting the number of triangle-closing edges. F LICKR and L INKED the highest fraction of triangle-closing edges, whereas A and D ELICIOUS have substantially less such edges. Note that here we are not measuring the fraction of nodes participating in trian-gles. Rather, we unroll the evolution of the network, and for every new edge check to see if it closes a new triangle or not.
Given that such a high fraction of edges close triangles, we aim to model how a length-two path should be selected. We consider a scenario in which a source node u has decided to add an edge to some node w two hops away, and we are faced with various alter-natives for the choice of node w . Figure 6 illustrates the setting. Edges arrive one by one and the simplest model to close a trian-gle (edge ( u, w ) in the figure) is to have u select a destination w randomly from all nodes at two hops from u .

To improve upon this baseline model we consider various models of choosing node w . We consider processes in which u first selects a neighbor v according to some mechanism, and v then selects a neighbor w according to some (possibly different) mechanism. The edge ( u, w ) is then created and the triangle ( u, v, w ) selection of both v and w involves picking a neighbor of a node. We consider five different models to pick a neighbor v of u , namely, node v is chosen Table 2: Triangle-closing models. First pick intermediate node v (fix column), then target node w (fix row). The cell gives per-cent improvement over the log-likelihood of picking a random node two hops away (baseline).  X  random: uniformly at random,  X  deg  X  : proportional to degree raised to power  X  , d ( v  X  com: prop. to the number of common friends c ( u, v ) with u ,  X  last  X  : proportional to the time passed since v last created an edge raised to power  X  ,  X  comlast  X  : proportional to the product of the number of com-mon friends with u and the last activity time, raised to power  X  .
As stated before, we can compose any two of these basic mod-els to choose a two-hop neighbor, i.e., a way to close the triangle. For instance, the last 0 . 1 -com model will work as follows: u will employ the last 0 . 1 model to select node v , v will employ the com model to select node w ,andthen u will add an edge to w ,closing the triangle ( u, v, w ) . We consider all 25 five possible composite models for selecting a two-hop neighbor and evaluate them by the likelihood that the model generated all the edges that closed length-two paths in the real network.

Table 2 shows the percent improvement of various triangle-closing models over the log-likelihood of choosing a two-hop neighbor uni-formly at random as a destination of the edge (the baseline). The simplest model, random-random , works remarkably well and has many desirable properties. It gives higher probability to nodes with more length-two paths, discounting each path by roughly 1 Moreover, it is also biased towards high-degree nodes, as they have multiple paths leading towards them.

The deg 1 . 0 -random model weighs each node w by roughly the number of length-two paths between u and w .However,wefind that it performs worse than random-random . For the more gen-eral deg  X  -random , the optimal value of  X  varies from 0 over all the four networks, and this model provides meaningful im-provements only for the A NSWERS network.

The com model considers the strength of a tie between u and v , which we approximate by the number of common friends c ( u, v nodes u and v ; the larger the value, the stronger the tie. By selecting v with probability proportional to c ( u, v ) , we get a substantial gain in model likelihood. A factor that further improves the model is the recency of activity by v , captured by last  X  . By selecting nodes that have recently participated in a new edge with higher probability, we get another sizable improvement in the model likelihood. These two capture the finer details of network evolution.

In summary, while degree helps marginally, for all the networks, the random-random model gives a sizable chunk of the perfor-mance gain over the baseline (10%). Due its simplicity, we choose this as the triangle-closing model for the rest of the paper.
Note that the above methodology could be extended to edge creations other than triangle-closing. We chose to focus on the triangle-closing edges for two reasons. First, a high fraction of all edges created fall into this category, and hence an understanding of triangle-closing edges is an important first step towards understand-ing the overall network evolution. Second, with the exception of quite simplistic models, it is computationally infeasible to compute the likelihood at a distance greater than two hops as the number of nodes and possible paths increases dramatically.
In this section we turn our focus to the edge initiation process that determines which node is responsible for creating a new edge (Section 6.1), and then to the process by which new nodes arrive into the network (Section 6.2).
In the following we assume that the sequence and timing of node arrivals is given, and we model the process by which nodes initiate edges. We begin by studying how long a node remains active in the social network, and then during this active lifetime, we study the specific times at which the node initiates new edges.
To avoid truncation effects, we only consider those nodes whose last-created edge is in the first half of all edges in the data. Recall that the lifetime of a node u is a ( u )= t d ( u ) ( u )  X  evaluate the likelihood of various distributions and observe that node lifetimes are best modeled by an exponential distribution, p ( a )=  X  exp(  X   X a ) . Figure 7 gives the plot of the data and the exponential fits, where time is measured in days. In Table 5, the row corresponding to  X  gives the values of fitted exponents. We note that the exponential distribution does not fit well the nodes with very short lifetimes, i.e., nodes that are invited into the net-work, create an edge and never return. But the distribution provides a very clean fit for nodes whose lifetime is more than a week. Table 3: Edge gap distribution: percent improvement of the log-likelihood at MLE over the exponential distribution. Figure 8: Edge gap distribution for a node to obtain the second edge,  X  (1) , and MLE power law with exponential cutoff fits.
Now that we have a model for the lifetime of a node u ,wemust model that amount of elapsed time between edge initiations from with current degree d to create its ( d +1) -st out-edge; we call  X  the edge gap . Again, we examine several candidate distributions to model edge gaps. Table 3 shows the percent improvement of the log-likelihood at the MLE over the exponential distribution. The best likelihood is provided by a power law with exponential cutoff: p gree of the node. (Note that the distribution is neither exponential nor Poisson, as one might be tempted to assume.) We confirm these results in Figure 8, in which we plot the MLE estimates to gap dis-tribution  X  (1) , i.e., distribution of times that it took a node of degree 1 to add the second edge. In fact, we find that all gaps distributions  X  ( d ) are best modeled by a power law with exponential cut-off (Ta-ble 3 gives improvements in log-likelihoods for d =1 ,..., the average for d =1 ,..., 20 .)
For each  X  ( d ) we fit a separate distribution and Figure 9 shows the evolution of the parameters  X  and  X  of the gap distribution, as a function of the degree d of the node. Interestingly, the power law exponent  X  ( d ) remains constant as a function of d ,atalmost the same value for all four networks. On the other hand, the expo-nential cutoff parameter  X  ( d ) increases linearly with d ,andvaries by an order of magnitude across networks; this variation models the extent to which the  X  X ich get richer X  phenomenon manifests in each network. This means that the slope  X  of power-law part remains constant, only the exponential cutoff part (parameter  X  ) starts to kick in sooner and sooner. So, nodes add their ( edge faster than their d th edge, i.e., nodes start to create more and more edges (sleeping times get shorter) as they get older (and have higher degree). So, based on Figure 9, the overall gap distribution can be modeled by p g (  X  | d ;  X ,  X  )  X   X   X   X  exp(  X   X d X  Figure 9: Evolution of the  X  and  X  parameters with the current node degree d .  X  remains constant, and  X  linearly increases.
Given the above observation, a natural hypothesis would be that nodes that will attain high degree in the network are in some way a priori special, i.e., they correspond to  X  X ore social X  people who would inherently tend to have shorter gap times and enthusiasti-cally invite friends at a higher rate than others, attaining high de-gree quickly due to their increased activity level. However, this phenomenon does not occur in any of the networks. We com-puted the correlation coefficient between  X  (1) and the final degree d ( u ) . The correlation values are  X  0 . 069 for D ELICIOUS for F LICKR ,  X  0 . 036 for A NSWERS ,and  X  0 . 027 for L Thus, there is almost no correlation, which shows that the gap dis-tribution is independent of a node X  X  final degree. It only depends on node lifetime, i.e., high degree nodes are not a priori special, they just live longer, and accumulate many edges.
Finally, we turn to the question of modeling node arrivals into the system. Figure 10 shows the number of users in each of our net-works over time, and Table 4 captures the best fits. F LICKR exponentially over much of our network, while the growth of other networks is much slower. D ELICIOUS grows slightly superlinearly, L
INKED I N quadratically, and A NSWERS sublinearly. Given these wild variations we conclude the node arrival process needs to be specified in advance as it varies greatly across networks due to ex-ternal factors.
We first take stock of what we have measured and observed so far. In Section 6.2, we analyzed the node arrival rates and showed that they are network-dependent and can be succinctly represented by a node arrival function N ( t ) that is either a polynomial or an exponential. In Section 6.1, we analyzed the node lifetimes and showed they are exponentially distributed with parameter  X  .In Section 4.1, we argued that the destination of the first edge of a node is chosen proportional to its degree (i.e., preferentially at-tached). In Section 6.1, we analyzed the time gaps between edge creation at a node and showed they can be captured by a power law with exponential cutoff, with parameters  X ,  X  . In Section 5, we showed that most of the edges span two hops, and the simple random -random triangle-closing model works well.

Motivated by these observations, we now present a complete net-work evolution model. Our model is parameterized by N (  X  ) and operates as follows. 1. Nodes arrive using the node arrival function N (  X  ) . 2. Node u arrives and samples its lifetime a from the exponen-3. Node u adds the first edge to node v with probability propor-4. A node u with degree d samples a time gap  X  from the distri-5. When a node wakes up, if its lifetime has not expired yet, it 6. If a node X  X  lifetime has expired, then it stops adding edges;
The values of N (  X  ) for the four networks are given in Table 4 and the values of  X ,  X ,  X  are given in Table 5.

Note that one could also use more sophisticated edge placement techniques, like random surfer model [5] or other triangle-closing techniques as discussed in Section 5.1. For example, in step 5, a node u can pick a sequence of nodes ( u = w 0 ,w 1 ,...,w where each w i is picked uniformly from the neighbors of w the sequence length k is chosen from the distribution in Figure 4. Node u then links to w .
We now show that our model, node lifetime combined with gaps, produces power law out-degree distribution. This is interesting as a model of temporal behavior (lifetime plus gaps) gives rise to a network property.

T HEOREM 1. The out-degrees are distributed according to a
P ROOF S KETCH . We first compute the normalizing constant Z of the gap distribution p g (  X  | d ;  X ,  X  ) : Let a be the lifetime sampled from the exponential distribution p ( a )=  X  exp(  X   X a ) . Recall the edge creation process: a node adds its first edge and samples the next gap  X  (1) according to p sleeps for  X  (1) time units, creates the second edge, samples a new gap  X  (2) according to p g (  X  ) , sleeps for  X  (2) units, and so on until it uses up all of its lifetime a . This means that for a node u with lifetime a = a ( u ) and final degree D = d ( u ) ,wehave predicted 1.74 2.30 1.75 2.08 Table 5: Predicted by Theorem 1 vs true degree exponents. Analogous to (1), we obtain the expected time gap E (  X  | a node of degree d : Combining (2) and (3), we relate the lifetime a and the expected final degree D of a node:
Notice that D d =1 d  X  1 = X (ln D ) . From (4), the final degree D of a node with lifetime a is Thus, D is an exponential function of the age a , i.e., D exp(  X a ) ,where  X  =  X (1  X   X  ) tially distributed with parameter  X  , we now compute the distribu-tion of D as a function of  X  and  X  as follows: D  X  p ( r  X  1 ( D )) d r Thus, the degree distribution in our gap model follows a power law with exponent 1+  X / X  , completing the proof.
 Validation of the model. We validate the accuracy of our model-ing assumptions by empirically estimating the lifetime  X  , and gap distribution  X ,  X  parameter values for each network. We then ap-ply Theorem 1, which yields the power-law degree exponents pro-duced by our model. Then we empirically measure the true power law degree exponents of the four networks and compare them to predictions of Theorem 1. Table 5 shows the results. Note the pre-dicted degree exponents remarkably agree with the true exponents, validating our model. This is interesting as we specified the model of temporal node behavior (lifetime+gaps) that results in a accurate structural network property (power-law degree distribution).
To further our understanding of the network evolution, espe-cially the edge creation process, we perform the following semi-simulation. We consider the real network G T/ 2 and evolve it from t = T/ 2 ,...,T using the random -random model to obtain a net-work G T . At the end of the evolution, we compare the macroscopic properties of G T and G T . For completeness, we also compare the results to the vanilla PA model.

More precisely, we evolve G T/ 2 by considering all the edges that were created after time T/ 2 between the nodes in G T/ 2 do not allow new nodes to join G T/ 2 .) We consider two different processes to place these new edges. In the first process (PA), we select two nodes preferentially , with probabilities p roportional to their degrees, and add an edge. In the second process (RR), we use the random -random triangle-closing model, i.e., we first select a node preferentially and then pick a node two hops away using the random -random model. second half, and compare the obtained networks with the real F network. Notice our model matches the macroscopic statistical properties of the true F LICKR networkverywell,andinfactmuchbetterthanPA.
Figure 11 shows results for F LICKR : clustering coefficient, de-gree distribution, and pairwise distance histogram for the true data, and the two simulations. The random -random model matches the true network well and outperforms than the PA process. Similar re-sults also hold for other networks; we omit these plots for brevity.
In this paper we present a microscopic analysis of the edge-by-edge evolution of four large online social networks. The use of the maximum-likelihood principle allows us to quantify the bias of new edges towards the degree and age of nodes, and to objectively com-pare various models such as preferential attachment. In fact, our work is the first to quantify the amount of preferential attachment that occurs in networks.

Our study shows that most new edges span very short distances, typically closing triangles. Motivated by these observations, we de-velop a complete model of network evolution, incorporating node arrivals, edge initiation, and edge destination selection processes. While node arrivals are mostly network-specific, the edge initia-tion process can be captured by exponential node lifetimes and a  X  X ap X  model based on a power law with exponential cutoff. We arrive at an extremely simple yet surprisingly accurate description of the edge destination selection in real networks. Our model of network evolution can be used to generate arbitrary-sized synthetic networks that closely mimic the m acroscopic characteristics of real social networks. [1] R. Albert and A.-L. Barabasi. Emergence of scaling in [2] R. Albert and A.-L. Barab X si. Statistical mechanics of [3] L. Backstrom, D. Huttenlocher, J. Kleinberg, and X. Lan. [4] I. Bez X kov X , A. Kalai, and R. Santhanam. Graph model [5] A. Blum, H. Chan, and M. Rwebangira. A random-surfer [6] B. Bollobas and O. Riordan. Mathematical results on [7] A. Broder, S. Kumar, F. Maghoul, P. Raghavan, [8] S. Dorogovtsev and J. Mendes. Evolution of Networks: From [9] P. Erd  X  os and A. R X nyi. On the evolution of random graphs. [10] M. Faloutsos, P. Faloutsos, and C. Faloutsos. On power-law [11] D. Fetterly, M. Manasse, M. Najork, and J. Wiener. A [12] D. Krackhardt and M. Handcock. Heider vs. Simmel: [13] R. Kumar, J. Novak, and A. Tomkins. Structure and [14] R. Kumar, P. Raghavan, S. Rajagopalan, D. Sivakumar, [15] J. Leskovec and C. Faloutsos. Scalable modeling of real [16] J. Leskovec, J. M. Kleinberg, and C. Faloutsos. Graph [17] D. Liben-Nowell and J. Kleinberg. The link prediction [18] M. Newman. The structure and function of complex [19] A. Ntoulas, J. Cho, and C. Olston. What X  X  new on the web? [20] X. Shi, L. A. Adamic, and M. J. Strauss. Networks of strong [21] S. Strogatz. Exploring complex networks. Nature , 410, 2001. [22] S. Wasserman and P. Pattison. Logit models and logistic [23] C. Wiuf, M. Brameier, O. Hagberg, and M. P. Stumpf. A
