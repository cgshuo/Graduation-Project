 The problem of point of interest (POI) recommendation is to provide personalized recommendations of places of in-terests, such as restaurants, for mobile users. Due to its complexity and its connection to location based social net-works (LBSNs), the decision process of a user choose a POI is complex and can be influenced by various factors, such as user preferences, geographical influences, and user mobility behaviors. While there are some studies on POI recommen-dations, it lacks of integrated analysis of the joint effect of multiple factors. To this end, in this paper, we propose a novel geographical probabilistic factor analysis framework which strategically takes various factors into consideration. Specifically, this framework allows to capture the geograph-ical influences on a user X  X  check-in behavior. Also, the user mobility behaviors can be effectively exploited in the rec-ommendation model. Moreover, the recommendation model can effectively make use of user check-in count data as im-plicity user feedback for modeling user preferences. Finally, experimental results on real-world LBSNs data show that the proposed recommendation method outperforms state-of-the-art latent factor models with a significant margin. H.2.8 [ Database Management ]: Database Applications X  Data mining Algorithms, Experimentation Location-based Social Networks, Point-of-Interest, Recom-mender Systems, Human Mobility, User Profiling
Recent years have witnessed the increased development and popularity of location-based social network (LBSN) ser-vices, such as Foursquare, Gowalla, and Facebook Places.  X  C ontact Author.
 LBSNs allow users to explore Point-of-Interest (POIs), such as restaurants and shopping malls, for better services by sharing their check-in experiences and opinions on the POIs which they have checked in. Indeed, the task of POI rec-ommendation is to provide personalized recommendations of places of interests to mobile users. It plays an important role in providing better location based services in location based social networks. In fact, both LBSN users and POI owners can benefit from effective POI recommendations. For mobile users, they can identify favorite POIs and have better user experiences by the right POI recommendations. Also, for POI owners, they could exploit POI recommendation for acquiring more target customers.

There are several unique characteristics of LBSNs which distinguish POI recommendations from traditional recom-mendation tasks.
Indeed, traditional recommender systems usually assume that the user and item data are independent and identically distributed. This assumption ignores the interrelationships among items. In fact, the decision process of a user choose a POI is complex and can be influenced by many factors. First, geographical distance plays an important role. Ac-cording to the Tobler X  X  first law of geography and the law of demand, the propensity of a user for a POI is inversely proportional to the distance between the user and the POI, which is similar to the probability of purchasing an item is inversely proportional to the cost. Second, utility matters. In economics, utility is an index of preferences over some sets of items and services when a user makes purchase de-cisions. In other words, a user may prefer a far away POI than a nearby one for better satisfaction. Third, popular-i ty affects purchase behaviors. In fact, the probability of a user purchasing a product is largely affected by the word-of-mouth about the product. Finally, the LBSN users have dynamic mobility behaviors, which impose the challenges on the modeling of check-in decision.

Another unique characteristic of POI recommendations is that user check-in count data follow a power law distribu-tion. This is different from the rating data in traditional rec-ommender systems. In other words, a user can visit a POI only once and another POI hundreds of times. Since we do not have explicit user rates for POIs, we can only make use of implicit user behavior data in the check-in records for POI recommendations. All the above demands a reconsideration of the recommendation model.

While there are some studies on POI recommendations, it lacks of integrated analysis of the joint effect of the above factors, such as user preferences, geographical influences, and user mobility behaviors. Therefore, in this paper, we propose a geographical probabilistic factor analysis frame-work which can strategically takes various factors into con-sideration. This framework allows to capture the geographi-cal influences on a user X  X  check-in behaviors, effectively model the user mobility patterns, and deal with the skewed distri-bution of check-in count data. Specifically, a Gaussian dis-tribution is used to represent a POI over a sampled region. This can reflect the first law of geography; that is, similar POIs are more related than distant POIs. Also, we use a multinomial distribution over latent regions to model user mobility behaviors over different activity regions. These la-tent regions reflect the activity areas for all the users through a collective influence. Moreover, a latent model is developed to capture user preferences. This model takes geographical influence, regional popularity and user mobility into consid-eration, and can effectively handle the skewed data distri-bution of POI count data.
 Finally, experimental results on real-world LBSNs and POI data show that the proposed POI recommendation method outperforms state-of-the-art probabilistic latent factor mod-els with a significant margin in terms of Top-K recommen-dation. Also, we provide a location-marketing segmenta-tion study by comparing the latent regions identified by our model with those derived from traditional marketing seg-mentation methods.
In this section, we introduce a geographical probabilistic factor analysis framework for POI recommendations.
The problem of personalized POI recommendation is to recommend POIs to a user. Let U = { u 1 , u 2 , ..., u M } be a set of LBSN users, where each user has a location l i and observable properties x i (e.g. a user X  X  profile). The user location l i is usually unknown due to user mobility. Let V = { v 1 , v 2 , ..., v N } be a set of POIs, where each POI has a location l j = { lon j , lat j } in terms of longitude and lati-tude, observable properties x j (e.g. a textual description of a POI), and a popularity score  X  j . Typically, a tiny propor-tion of check-in records of users for POIs are given with y as the number of times user u i visited POI v j . For conve-nience, we refer i as user and j as POI unless stated oth-Figure 1: A graphical representation of the proposed model. T he model priors have been excluded for the simplicity of description.
 erwise. Also, we use POI and item interchangeably. Some i mportant notations used in this paper are listed in Table 1.
To learn geographical user preferences, we need a model to encode the spatial influence and user mobility into the user check-in decision process. By Tobler X  X  first law of geography, POIs with similar services are likely to be clustered into the same geographical area. To capture this, we assume that the geographical locations have been clustered into R latent regions and denoted as R . Also, as shown in Figure 2, LBSN users are most likely to check in a number of POIs and these POIs are usually limited to some geographical regions. We apply a multinomial distribution, r  X  p ( r |  X  i ), to model user mobility over the regions R with  X  i being a user dependent distribution over latent regions for user i . Then we assume a Gaussian geographical distribution for each region r  X  R , and the location for POI j is characterized by l j  X  N (  X  with  X  r and  X  r being the mean vector and covariance matrix of the region.

To model a user X  X  propensity of a POI, we assume the following factors that will affect the user check-in decision process: (1) each user i is associated with an interest  X  ( i, j ) with respect to POI j ; (2) each POI j has popularity  X  j and (3) the distance between the user and the POI d ( i, j ). As a result, the probability of observing a pair (i, j) is di-rectly proportional to the user interest and the popularity of the entity, and monotonically decreases with the distance between them. We use a power-law like parametric term ( d 0 + d ( i, j )) model the distance factor in the decision making process. This motivated by the following observations: the probabil-ity user u i checking-in at POI v j decays as the power-law of the distance between them.

Because we use implicit user check-in count data to model user preferences and the distribution of check-in counts are usually skewed, we adapt a Bayesian probabilistic non-negative ( d 0 + d ( i, j ))  X   X  for encoding both the spatial influence and personalized preferences.
The check-in decision process of user i for POI j can be viewed in a generative way. First, a user samples a re-gion from all R regions following a multinomial distribution r  X  Multinomial(  X  i ), and a POI is draw from the sampled region l j  X  N (  X  r ,  X  r ). Then, depending on user prefer-ences, the popularity of the selected POI in that sampled region, and the distance between the user and the POI, the user makes a check-in decision following certain distribution. The user i  X  X  preference for POI j can be represented as a user and item observable properties x  X  i W y j . As shown in Figure 1, the geographical probabilistic generative process for a user i to choose a POI j can be expressed as follows: 1. Draw a region r  X  Multinomial(  X  i ) . 2. Draw a location l j  X  N (  X  r ,  X  r ). 3. Draw a user preference 4. y ij  X  P ( f ij ) where
In the generative model, u u u a nd v v v are user and item fac-tors, x i and x j are user and item observable properties re-spectively, and W is a matrix that is used to transfer the observable prosperity space into the latent space to capture the affinity between the observed features and the user-item pair. Note that the proposed model is general and can be extended by different factor models. The model details will be described in Section 2.4.
This section introduces detailed model specifications.
A user may check in POIs in different geographical areas as shown in Figure 2. Indeed, a LBSN user may travel to dif-ferent regions (Figure 2b), and the recommendation problem becomes difficult when this user travels to a new place. Also, it is important to capture users X  mobility behaviors and find users X  preferences. As shown in Figure 2, LBSN users are most likely to check in a number of POIs and these POIs are usually limited to some geographical regions. To model a user X  X  propensity of a POI, we first need to choose the region where the POI is associated. We apply a multino-mial model [10] to model the region r  X  p ( r |  X  i ), where  X  is a user dependent distribution over latent regions for user i . Each POI location l j is drawn from a region-dependent multivariate normal distribution: l j  X  N (  X  r ,  X  r ) .
Also, due to the mobility pattern, the explicit location  X  (  X  ) of a user is unknown. We use the region r to represent the user activity area and model the user-POI distance as
Popularity can affect the user check-in behaviors to a great extent. Usually, an individual X  X  decision to check in a POI is largely affected by the word-of-mouth opinions, which can be represented as the popularity of the POI. We propose to normalize the popularity score in a region level. On the one hand, two POIs with similar or the same semantic terms can be rated differently in a region. On the other hand, as a user choose a POI from a pool of choices in a region, the popular-ity score represents the user satisfaction level. A POI with a higher popularity score potentially provide better user ex-periences according to word-of-mouth opinions.

For example, in Foursuare, we know the total number of people have visited a specific POI j , totalPeo j , and total times they check in there, totalCk j (refer the example in Table 2). We normalize the popularity score for a POI j in area r to (0 , 1] by the following equation [15].  X  = 1 where max j  X  r { totalPeo j } and max j  X  r { totalCk j } are the max-imum total number of people and total check-in number in the region respectively.
Latent factor models aim on learning latent factors to model user-item interactions by associating user latent fac-tor  X  i for each user and item latent factors  X  j for each item. Then, the rating is modeled as p ( y ij | i, j ) = p y ij Latent factor models, such as probabilistic matrix factor-ization (PMF) [18], have become popular in recommenda-tion. One drawback of latent factor models is the so called cold-start problem, in which latent factor models perform poorly when there are many unseen users or items. Another drawback of previous work on using latent factors for rec-o mmendation is that they assume a normal distribution for p y ij |  X   X  i  X  j ;  X  and apply a logistic function to bound the predicted values. Therefore, it is not suitable for recommen-dation problems where the user-item data have skewed fre-quency values. For POI recommendation, the user check-in frequency data actually follows the power law distribution.
To circumvent these two drawbacks of latent factor mod-els for POI recommendations, we propose a Geographical-Topical Bayesian Non-negative Matrix Factorization ( GT -BNMF) model by incorporating the geographical influence and textual information in terms of topic distribution.
To better explore the observable features, we first profile users and POIs through an aggregated LDA model proposed in our earlier work [15]. The Latent Dirichlet Allocation (LDA) model [4] is a popular technique to identify latent topic from a large document collection. In aggregated LDA, we aggregate all the documents of the POIs, user u i have checked in, into a user document d u i . The topics of d u represent user u i  X  X  preferences in terms of interest topics. Each document corresponds to a LBSN user. As a result, the topic distribution of document d u i represents the inter-ests of u i . Each user u is associated with a multinomial dis-tribution over topics, represented by  X  . Each interest topic is associated with a multinomial distribution over check-in textual terms, represented by  X  . The generation process of the region aware user interest topic is as follows. 1. For each topic z  X  { 1 , ..., K } , draw a multinomial dis-2. For the document d u i given a user u i
Then, we have: (1) Matrix  X  M  X  K , where M is the number of users and K is the number of topics.  X  ij represents the probability that user i is interested in topic t j . (2) Matrix  X 
K  X  V where K is the number of topics and V is the number of unique terms in the dataset. Vector  X  i  X  is the probability distribution of topic i over the V terms. We further infer the topic distribution  X  j of POI v j based on the learned user topic term distribution  X  K  X  V .
 Comments: In our newly proposed geographical proba-bilistic factor model as described in Section 2.3, we assume both user and item observable properties x i and x j . Here, we apply an aggregated LDA model to mine the topic dis-tribution, and replace x i and x j with topic distributions  X  and  X  j . The aggregated LDA here does not improve the computation complexity of the proposed model.
 GT -BNMF.

The implicit feedback user-item count matrix Y can be factorized as Y  X  P ( U U UV V V ), and priors P ( u u u i can be further specified. Consider the count data character-istic, we expect user factor U U U and item factor V V V to be non-negative. Some previous work such as [17, 5] assumed a Pois-son distribution for Y  X  P ( U U UV V V ) and further placed Gamma priors on U U U and V V V . Actually, the Poisson factor analysis can be equal to NMF in certain condition [14]. Euclidean dis-tance based optimization leads to Gaussian NMF, and KL-divergence based optimization leads to Poisson NMF. For computation efficiency purpose, we here adopt a Bayesian non-negative matrix factorization (BNMF) method [19]; but our framework is flexible, thus it is also suitable for Poisson factor model among others.

More specifically, we assume a rectified normal 1 distribu-tion on Y  X  P ( U U UV V V ) with variance  X  2 I . with non-negative constrains. Further, we place an expo-nential distribution, which is a special case of Gamma dis-tribution with shape equals to 1, on U U U and V V V , and an inverse gamma distribution on  X  2 with shape a and scale b . Each element u ik  X  U U U encodes the preference of user i to  X  X opic X  k , and each element v ik  X  V V V reflects the topical affin-ity of item j to topic k .

Also, we utilize the user topic distribution  X  i and item topic distribution  X  j to ease the cold-start drawback of la-tent factor models. We add another term depends on  X  i and  X  . Then we have the following generative process. 1. Generate user latent factor u ik  X  Exp(  X  k ) . 2. Generate item latent factor v jk  X  Exp(  X  k ) . 3. User-item preference  X  ( i, j ) = u u u  X  i v v v j +  X 
By combining the geographical influence and latent factor, we have GT -BNMF as Here, W is a matrix that used to transfer the topic space into the latent space to capture the affinity between the observed features and the user-item pair. and  X  = {  X ,  X , a, b } be the hyperparamters. Given the ob-served data collection D = { y ij , l j } I ij where y ij check-in count and l j is the location of v j ; and I ij is the indicator function with I ij = 1 when user u i visited POI v and I ij = 0 otherwise. The posterior probability is To estimate the parameters  X , we use a mixing Expecta-tion Maximization (EM) and sampling algorithm to learn all the parameters. We treat latent region r as a latent variable and introduce the hidden variable P ( r | l j ,  X ), which is the probability of l j  X  r given POI location l j and  X . The algorithm iteratively updates the parameters by mutu-ally enhancement between Geo-clustering and GT -BNMF. The Geo-clustering updates the latent regions base on both location and check-in behaviors; and GT -BNMF learns the graphical preference factors.
I n the E-step , we iteratively draw latent region assign-ments for all POIs. For each POI, a latent region r is firstly drawn from the following distribution. where P ( r |  X   X   X  ( t ) ) updates region assignment in terms of user mobil-normal distribution with mean vector and variance matrix obtained in last iteration, and P ( y  X  j | r,  X  ( t ) ) updates region assignment through collaborative user effects.
In the M-step , we maximize the log likelihood of the model with respect to model parameters by fixing all regions obtained in the E-step. Since we sample the regions in the where #( j, r ) is the number of POIs assigned to region r . Through imposing a conjugate Dirichlet prior Dir(  X   X   X  ), we of POIs being assigned to region r for user i , and C i  X  the the number of POIs of all the regions for user i .
After updating region R ( t +1) , we update  X  ( t +1) that max-imizes the expectation Q ( X  |  X  ( t ) ).
 L ( U U U, V V V ,  X  2 , W | R ( t +1) , D ) =  X 
X Here  X  j is the distance factor of user i for POI j as described in Section 2.4.1.

We apply an iterated conditional modes (ICM) [19] to update U U U, V V V ,  X  2
Since the elements in each column of U U U and V V V are condi-tionally independent, we can update entire column of U U U and V V V simultaneously. When M  X  N  X  K  X  ( M + N )  X  K , it can save a lot of computation. A gradient based method is applied to update W : W ( t +1) = W ( t )  X   X   X   X  L  X  X  w here  X  is the learning rate.
 Comments: Note that the region R is updated in each E-step, so as the popularity and user-POI distance. The model parameters are updated upon the new region information.
After parameters  X  are learned, the GT -BNMF model predicts the number of check-ins of a user for a given POI as E ( y ij | u i , v j ) = u u u  X  i v v v j +  X   X  i W  X  We make recommendations based on the predicted check-in times, the larger the predicted value, the more likely the user will choose this POI. Since POI recommendation in LBSNs is highly location sensitive, the recommendation list should be within a user X  X  activity region. Our GT -BNMF model learn the latent region. Therefore, we make recommenda-tions based on the learned latent region.
Here, we provide an empirical evaluation of the perfor-mances of the proposed model. All the experiments were performed on a large real-world LBSN dataset collected from Foursquare ( www.foursquare.com ), one of the most popular LBSN communities.
The dataset is formulated as follows [15, 7]. Foursquare users usually report their check-ins of POIs via Twitter. When a LBSN user posted a Tweet, which shows a check-in of a POI, we consider it as the user has checked in the POI physically. As shown in Table 2, for POIs in Foursquare, we have geographical description information such as location information, textual information, and popularity informa-tion in terms of the total number of people and the total number of check-ins. The dateset includes POIs across the Unites States (except Hawaii and Alaska), and the geograph-ical distribution of all POIs is shown in Figure 2a. T able 2: An example POI and its associated information.
According to the Twitter reports from Foursuqre users, we finalized a dataset of 12 , 422 users for 46 , 194 POIs with 738 , 445 check-in observations. The user POI check-in count matrix has a sparsity of 99 . 87%; it is very sparse. Each user checked in 59 . 44 POIs on average, only a very small fraction of all the POIs. The number of check-ins for a POI is ranged from 1 to 786. This range is very wide as show in Figure 3.
Since there is no explicit rating for validation, we evaluate the models in terms of ranking. We present each user with N POIs sorted by the predicted values and evaluate based on which of these POIs were actually visited by the user. Precision and Recall. Given a top-N recommendation list S
N, rec sorted in descending order of the prediction values in Figure 3: An example of wide range user check-in count data f or a randomly chosen user. a region, precision and recall are defined as Precision@ N = are the POIs a user have visited in the test data. The preci-sion and recall for the entire recommender system are com-puted by averaging all the precision and recall for all the users respectively. r-Recall and r-Precision. In addition to using absolute precision and recall for evaluation, we also compare the mod-els in terms of relative precision and recall. Let C denote the candidate POIs, the precision and recall in a top-N list of the relative precision and recall [24] are defined as
The relative precision and recall have the same value. As a result, we only need to show one of them, and we will name it as the relative performance, which measures the improvement over a random recommendation.
We first compare our proposed GT -BNMF model with four traditional recommendation methods: singular value decomposition (SVD) [12], probabilistic matrix factorization (PMF) [18], Nonnegative matrix factorization (NMF) [14], and Bayesian nonnegative matrix factorization (BNMF) [19]. SVD and PMF are the standard algorithms for rating based recommendations. As mentioned before, the check-in count date have a wide range, so we also use NMF and BNMF for comparison. Moreover, we also compare our model with the fused method [6], which fuse the geographical influence into factor models. Since BNMF also exploits the count check-in characteristics, we fuse the geographical influence into BNMF and denote it as F -BNMF.
Since POI recommendation in LBSNs is highly location sensitive, the recommendation should be within the user X  X  current region. Therefore, we measure the Top N perfor-mances by considering the recommendation within a region. We first cluster all the POIs into R regions. This is the ini-tialization of the GT -BNMF model. For SVD, PMF, NMF, BNMF and F -BNMF methods, we make top-N recommen-dation within the initialized R clustered regions by K -means. For the proposed GT -BNMF model, we recommend top-N POIs within each learned latent region.
We randomly divided the data into training (80%) and test(20%) data. We set  X  U = 0 . 01 and  X  C = 0 . 01 for PMF. Table 3: Precision @N with different latent dimensions K . Table 4: Recall @N with two different latent dimensions K . W e set the topic number K topic = 30,  X  = 50 /K topic and  X  = 0 . 1 in the aggregated LDA model to derive the user and POI profile topic distribution. For the GT -BNMF model, we set  X  = 1 and  X  = 1 for latent priors, a = 1 and b = 1 for prior  X  2 , 1 / R for user region multinominal prior  X  , and  X  = 1 for the distance model. We set the number of regions R = 49, which is the number of regions partitioned according to all the states in USA (except HI and AK).
In this subsection, we present the performance comparison on recommendation accuracies between our model and the baseline methods. We compare the results by setting two latent dimensions K = 10 and K = 20.
 Precision and Recall @N. Table 3 and Table 4 show the precision and recall@N ( N = 1 , 5 , 10) of all the methods. It is clear that GT -BNMF is significantly better than all the baseline methods. For example, for top 10 recommendation when K = 10, SVD and PMF have precisions around 0 . 008, NMF and BNMF improve SVD and PMF about 1 . 5 times. F -BNMF can slightly improve BNMF, and GT -BNMF signif-icantly outperforms F -BNMF. More clear comparisons can be observed in relative performance as described below. Relative performance @N. There are two reasons that relative performance @N serves as a better metric than the absolute precision and recall. First, please note that for baseline methods, we make top-N recommendation within the initialized R clustered regions by K -means; for the pro-posed GT -BNMF model, we recommend top-N POIs within each learned latent region. So the candidate POIs can be different. We need a metric can handle such a change of can-didate POIs. Second, we need to see how the models actually outperform a universal baseline, the random recommenda-tion. The relative performance as defined in Equation (15) can satisfy these two requirements. A relative performance value equal to 1 indicates a random recommendation.
The relative performances as shown in Table 5 give a more clear comparisons between our GT -BNMF and base-line methods. The relative performance values for SVD and PMF are around 1, which means that the performances of these two methods are close to a random guess. For top-1 recommendation, when latent dimension K = 10, GT -BNMF can achieve a 41 . 8 times improvements as compared 3 . 7 for NMF, 7 . 1 for BNMF, and 7 . 3 for F -BNMF. For top-5 Table 5: The relative performance @N with two different l atent dimensions (initiated by K -means). It measures the improvement over a random recommendation. and top-10 recommendation, our proposed method can also achieve 20 . 0 times and 15 . 1 times improvements respectively, which are significantly better than all the baselines 2 . The improvements can be clearly observed.
 Summary. Due to the assumption of a Gaussian over the product of user and item latent factors u u u  X  v v v , SVD and PMF perform poorly as they cannot handle the skewed count data. Some previous studies, such as [18], suggest to normalize the data through some transfer function and bound the results by a logistic function. This can work well if the data range is small. However, when the data is skewed, this method can make the normalized values indistinguishable. Thus, we call for a reconsideration of the recommendation assumption when we face the wide range count data in implicit feed-back recommendation scenarios. We observe improvements by NMF and BNMF over SVD and PMF. The F -BNMF method which exploits an ad hoc two-steps to fuse the ge-ographical influence into user preferences can only slightly improve BNMF. Therefore, an integrated analysis of multi-ple factors is needed for POI recommendations.

The GT -BNMF model not only considers the geographical information of POIs, regional popularity and user mobility patterns for recommendation, but also updates the latent regions by considering these three sources of information. The learned regions reflect the collaborative user activity pattern. As a result, we can observe significant improve-ments over all the baseline algorithms.
In addition to improving recommendation performances, our proposed model also provides an unique perspective on POI marketing segmentation in the form of the learned re-gions. Traditional geographic segmentation for target mar-ket is segmented according to geographic criteria such as states [13] and K -means. Here, we intend to answer how the proposed method with learned latent regions improves the method based on traditional geographic segmentation ac-cording to administrative region division (states)? The rec-ommendation comparisons initialized by K -means are shown in Section 3.6.
 Performance Comparisons. We first evaluate whether the GT -BNMF model is robust to region initiations. We compare the relative performances initiated by K -means and initiated by administrative region partition (state). Instead of using K -means for initial region clustering, we initialize our model with region partition according to administra-tive region division of states. Table 6 shows the relative performance comparisons of our proposed GT -BNMF model Table 6: The relative performance @N initialized according t o administrative region partition. and baseline methods. The comparison results are similar as discussed before. For baseline methods, we make top-N recommendation within the initialized regions according to administrative region division (states). For the proposed GT -BNMF model, we recommend top-N POIs within each learned latent region by the model. We can observe simi-lar performance improvements of our proposed method over baselines as that initiated by K -means.

Figure 4 shows the relative performance initiated by two methods. We can see that GT -BNMF initiated by states out-performs GT -BNMF initiated by K -means for top 1 and top 10 recommendation, but GT -BNMF initiated by K -means outperforms GT -BNMF initiated by states for top 5 recom-mendation. In general, the GT -BNMF model can achieve a relative stable performance initiated by two methods. Note that the GT -BNMF model can update the latent regions towards a region segmentation that reflects geographical in-fluence and user activity efforts. Figure 4: Relative performance of G T -BNMF initiated by K -means and initiated according to state partition. Latent Region Analysis. We then analyze the latent re-gions identified by our model. Figure 6 shows the Voronoi vi-sualization of regions identified by the proposed GT -BNMF model compared with two different initiations, K -means and according to state partition. Figure 6b shows the regions identified by GT -BNMF vs its initiation by K -means (Fig-ure 6a). Figure 6d shows the region update by GT -BNMF vs its initiation according to state partition (Figure 6c).
We take a representative hotspot, California, as an exam-ple to analyze the region update learned by the GT -BNMF model. Figure 5 shows the zoom in visualization of latent regions (Figure 5b) learned from our model vs its initiation by K -means (Figure 5a) in California. Though we have no ground truth about an optimal POI region segmentation, we can infer the user activity regions in CA through the collab-orative check-in behaviors of users who have visited CA and view the region clusters formulated by collaborative check in effort as ground truth (as shown in Figure 5c). Through an-alyzing the collaborative check-in frequency by those users, as shown in Figure 5c, we can see two clear clusters in north F igure 5: Voronoi visualization of POI segmentation in Cal-ifornia area. (b) latent regions learned from our model and (a) initiation by K -means. (c) true user collaborative activ-ity clusters. Deeper color (red) indicates more check-ins for a POI, as contrary to light color (green). Best view in color. California area among other scattered POIs around, one in Los Angeles area, one in San Diego, and some scattered POIs between south and north California. K -means only depends on POI distances to cluster POIs for region segmentation. As shown in Figure 5a, K -means segments north California area into four different regions, and segments Los Angeles into two regions. However, by considering the user check-in behaviors and geographical factors, our model identified a more meaningful region partition as shown in Figure 5b, which is more coherent to real user activity as shown in Figure 5c. Similar results can also be observed in Figure 6 when GT -BNMF is initiated according to administrative region partition. GT -BNMF initiated by K -means leads to better POI segmentation. We can see that GT -BNMF mod-els not only improves recommendation performances, but also provides an interesting perspective on POI marketing segmentation in the form of the learned regions.
Recommender systems can be developed based on explicit user feedback. In other words, users rate items and the user-item preference relationship can be modeled on the basis of the user ratings. In contrast, recommender systems can also be developed based on implicit user feedback [11], such as the search and click on a web site [17, 5], and the check-in be-haviors in LBSNs as we discussed in this paper. In this case, the recommender system has to infer user preferences from implicity user feedback. Here, latent factor models which are suitable for implicit user feedback are preferred. For in-stance, NMF [14] based method is used in recommendation due to its effectiveness in modeling implicity user feedback. Some studies [17, 5] assumed a Poisson factor model with Gamma priors. Actually, the Poisson factor analysis can be equal to NMF in certain condition [14]. Euclidean dis-tance based optimization leads to Gaussian NMF, and KL-divergence based optimization leads to Poisson NMF. For the purpose of efficiency, we adopt a Bayesian probabilistic non-negative matrix factorization (NMF) method [19]. One drawback of latent factor models is the so called cold-start problem, in which latent factor models perform poorly when there are unseen users or items. Recent works such as [22, 1, 2] incorporated side information into latent factor models by exploring user observable features and item observable features. In this paper, we applied a topic model to get the observable user features and item features, and leverage the topic distribution for the cold-start problem.

Some previous studies on POI recommendations mainly relied on user trajectory data to infer user preferences. For example, previous works [27, 26, 9, 16] applied collabora-tive filtering (CF) based method to recommend locations and travel packages based on user trajectory data. Actually, these works only consider one dimension factor of user POI check-in decision process. More recent works, such as [23, 3], began to explore user preferences, social influence, and geographical influence for POI recommendations. However, it only used a simple CF algorithm to fuse these information, and thus lacking a comprehensive way to model how these information collectively influence user POI check-in decision. Work [15] tried to explore side information to improve POI recommendations, but it does not explore user mobility in-formation and does not take the skewed data characteristics of implicit user check-in counts into the consideration.
More recently, Cheng et al. [6] considered the geographi-cal influence, the multi-center of user check-in patterns, the skewed user check-in frequency and social networks for POI recommendation. However, this work applied an ad hoc two-step method to fuse the geographical influence into user pref-erences. It considered the multi-center pattern of user check-in behaviors, but it did not really consider the user mobility and lacked an integrated consideration of factors that can in-fluence POI recommendation. Moreover, the greedy cluster-ing method applied to derive the personalized multi-centers would easily lead to overfitting problems in that it focuses on the regions a user has visited. Instead, our work is an integrated analysis of geographical influences, user mobility, word-of-mouth and skewed data for POI recommendation.
In addition, our work has a connection with recent works on mobility modeling [10, 8]. However, their tasks were different. Work [10] used similar multinomial assumption over different regions to model geographical topics in Twit-ter stream, paper [8] investigated human mobility for social network analysis. Also, people have used gaussian geograph-ical distribution to model region over locations [20, 25, 10].
As described above, while there are some studies on POI recommendation, it lacks of an integrated analysis of the joint effects of multiple factors that influence the decision process of a user choosing a POI. These factors include user preferences, geographical influences, user mobility pattern, word-of-mouth, and the skewed implicit user check-in counts data. The proposed method strategically takes all these fac-tors into consideration and presents a flexible probabilistic generative model for POI recommendations.
In this paper, we presented an integrated analysis of the joint effect of multiple factors which influence the decision process of a user choosing a POI and proposed a general framework to learn geographical preferences for POI rec-ommendation in LBSNs. The proposed geographical proba-bilistic factor analysis framework strategically takes all these factors, which influence the user check-in decision process, into consideration. There are several advantages of the pro-posed recommendation method. First, the model captures the geographical influence on a user X  X  check-in behavior by taking into consideration of geographical factors in LBSNs, such as the regional popularity and the Tobler X  X  first law of geography. Second, the methods effectively modeled the user mobility patterns, which are important for location based services. Third, the proposed approach extended the latent factor in explicit rating recommendation to implicit feedback recommendation settings by considering the skewed count data characteristic of LBSN check-in behaviors. Last but not least, the proposed model is flexible and could be extended to incorporate different later factor models which are suit-able for both explicit and implicit feedback recommendation settings. Finally, experimental results on real-world LBSNs data validated the performances of the proposed method. This research was partially supported by National Science Foundation (NSF) via grant numbers CCF-1018151 and IIS-1256016. Also, it was supported in part by Natural Science Foundation of China (71028002). [1] D. Agarwal and B.-C. Chen. flda: matrix factorization [2] D. Agarwal and B.-C. Chen. Regression-based latent [3] J. Bao, Y. Zheng, and M. F. Mokbel. Location-based [4] D. M. Blei, A. Y. Ng, and M. I. Jordan. Latent [5] Y. Chen, M. Kapralov, D. Pavlov, and J. Canny. [6] C. Cheng, H. Yang, I. King, and M. R. Lyu. Fused [7] Z. Cheng, J. Caverlee, K. Y. Kamath, and K. Lee. [8] E. Cho, S. A. Myers, and J. Leskovec. Friendship and [9] Y. Ge, H. Xiong, A. Tuzhilin, K. Xiao, M. Gruteser, [10] L. Hong, A. Ahmed, S. Gurumurthy, A. J. Smola, and [11] Y. Hu, Y. Koren, and C. Volinsky. Collaborative [12] Y. Koren, R. Bell, and C. Volinsky. Matrix [13] P. Kotler, K. Keller, M. Brady, M. Goodman, and [14] D. D. Lee and H. S. Seung. Algorithms for [15] B. Liu and H. Xiong. Point-of-interest [16] Q. Liu, Y. Ge, Z. Li, E. Chen, and H. Xiong. [17] H. Ma, C. Liu, I. King, and M. R. Lyu. Probabilistic [18] R. Salakhutdinov and A. Mnih. Probabilistic matrix [19] M. N. Schmidt, O. Winther, and L. K. Hansen. [20] S. Sizov. Geofolk: latent spatial semantics in web 2.0 [21] W. Tobler. A computer movie simulating urban [22] C. Wang and D. M. Blei. Collaborative topic modeling [23] M. Ye, P. Yin, W.-C. Lee, and D.-L. Lee. Exploiting [24] P. Yin, P. Luo, W.-C. Lee, and M. Wang. App [25] Z. Yin, L. Cao, J. Han, C. Zhai, and T. Huang. [26] V. W. Zheng, Y. Zheng, X. Xie, and Q. Yang.
 [27] Y. Zheng, L. Zhang, X. Xie, and W.-Y. Ma. Mining
