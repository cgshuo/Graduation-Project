 Information about urban air quality, e.g., the concentration of PM 2.5 , is of great importance to protect human health and control air pollution. While there are limited air-quality-monitor-stations in a city , air quality varies in urban spaces non-linearly and depends on multiple factors, such as meteorology, traffic volume, and land uses. In this paper, we infer the real-time and fine-grained air quality information throughout a city , based on the (historical and real-time) air quality data reported by existing monitor stations and a variety of data sources we observed in the city, such as meteorolo gy, traffic flow, human mobility , structure of road networks, and point of interests (POI s). We propose a semi-supervised learning approach based on a co-training framework that consists of two separated classifiers. One is a spatial classifier based on an artificial neural network (ANN), which tak es spatial ly-related features (e.g., the density of POIs and length of highways) as input to model the spatial correlation between air qualities of different locations. The other is a temporal classifier based on a linear-chain conditional random field (CRF), involving temporally-related features (e.g., traffic and meteorology) to model the temporal dependency of air quality in a location. We evaluated our approach with extensive experiments based on five real data sources obtained in Beijing and Shanghai. The results show the advantages of our method over four categories of baselines, including linear/Gaussian interpolations, classical dispersion models, well-known classification models like decision tree and CRF , and ANN. H.2.8 [Database Management]: Database Applications -data mining, Spatial databases and GIS; Algorithms, Management, Experimentation Air quality, city dynamics, human mobility, spatial trajectories. Real-time air quality information, such as the concentration of NO 2 , PM 2.5 , and PM 10 , is of great importance to support air pollution control and protect humans from damage by air pollution. In reality, however, there are insufficient air quality measurement stations in a city due to the expensive cost of building and maintaining such a station. A s demonstrated in Figure 1 A) , an air quality monitor station usually needs a certain size of land, non-trivi al money (about 200,000 USD for construction and 30,000 USD per year for maintenance), and human resources to regularly take care of it. As a result, for instance, Beijing only has 22 stations covering a 50  X  50km land (113 km 2 /per station) , as illustrated in Figure 1 B) . Unfortunately, urban air quality varies by locations non-linearly and depends on multiple factors, such as meteorology, traffic, land use, and urban structures . As depicted in Figure 2 A), the air quality indices (AQIs) reported by stations and are quite different at 1 1am on 3/27/2013, though they are geospatially close (about 3km away). As shown in Figure 2 B), the phenomenon is not a coincidence according to the distribution of the deviation between the PM 2.5 of the two stations reported at the same time of day (from Feb. 8 to May 27, 2013). Over 37 percent of the cases have a deviation greater than 100. Figure 2 C) further shows the mean deviation among the 22 stations in Beijing, changing over time of day. Figure 2 D) presents the distribution of the deviation among these 22 stations cross 3 months. All these results well demonstrate the skew of air quality in urban spaces. In this paper, we infer the real-time and fine-grained air quality information throughout a city using (historical and real-time) air quality data reported by a limited number of existing monitor stations and a variety of data sets we observed in the city, such as meteorology, traffic flow, human mobility , structure of road networks, and POIs. Although environment scientists have been proposing models to approximate the relation between air quality and some factors like traffic and wind , these models are usually based on empirical assumptions and parameters that may not be applicable to all urban environments [9] (detailed in the related work section). The methodology based on crowd and participatory sensing (e.g., using sensor-equipped mobile phones) could work for a very few kinds of gas like CO 2 but not applicable to aerosol s and other pollutants, such as PM 2.5 , PM 10 , and NO for detecting the latter pollutants are not easily portable and usually need a relatively long sensing period (e.g., 1~2hours) before generating an accurate AQI. Recently, big data reflecting city dynamics have become widely available [11][1 4] , e.g., traffic flow, human mobility, and meteorology , enabling us to solve this challenging problem from a data perspective. According to existing studies [9], these data have a strong correlation with air qualities (detailed in Section 3). Using machine learning and data mining techniques , we build a network between air quality labels and features observed across multiple heterogeneous data sources. Figure 3 A) shows an example (Sept. 19, 2012 1pm in Beijing) of the results inferred by our method (U -Air), demonstrating the advantage beyond linear-interpolation, as depicted in Figure 3 B) . To verify the validity of our method, we first remove two stations ( and ) from Beijing (marked with two boxes) and predict the AQIs of the two w ith the rest of stations (denoted by gray points). T he reports of the two stations are then employ ed as a ground truth ( =M, =G) to evaluate the prediction (refer to Table 1 for the semantic meaning s of the colors and AQI descriptors) . Clearly , our method well reflects the ground truth, while linear interpolation generated incorrect results ( = =U-S) . The result also indicates another story. Besides providing accurate information of air quality, the research reported here can also suggest a location to setup a monitor station, wh ere the inference of U-Air always diffe rs from that of linear interpolation . The challenges of our approach lie in three aspects. The first is to identify discriminative features from a variety of data sources. The second one is how to incorporate heterogeneous features into a data analytics model effective ly. Equally treating these features does not work well. Third, the labeled data is insufficient though we have many observations represented by big data. While having many places to infer, only a few stations generate training data. The contribution of this paper lies in the following three aspects:  X  We propose a co-training-based semi-supervised learning  X  We identify spatially-related (such as POI s, road networks ,  X  We evaluated our approach using 5 data sources consisting Definition 1 : Air quality index . AQI is a number used by government agencies to communicate to the public how polluted the air is currently. As the AQI increases, an increasingly large percentage of the population is likely to experience increasingly severe adverse health effects. To compute the AQI requires an air pollutant concentration from a monitor or model. The function used to convert from air pollutant concentration to AQI varies by pollutant s, and is different in different countries. Air quality index values are divided into ranges, and e ach range is assigned a descriptor and a color code . In this paper, we use the sta ndard issued by United States Environmental Protection Agency , as shown in Table 1 . The descriptor of each AQI level is regarded as color is employed in the following visualization figures . Definition 2 : Trajectory . A spatial trajectory is a sequence of time-ordered spatial points, , where each point has a geospatial coordinate set and a timestamp, . Definition 3 : POI . A point of interest POI is a venu e (like a school and shopping mall) in the physical world, having a name, address, coordinates, category, and other attributes. De finition 4 : Road Network . A road network is comprised of a set of road segments connected among each other in a format of graph. Each road segment is a directed edge having two terminal points, a list of intermediate points describing the segment , a length , and a level denoting its capacity. Definition 5 : Grid and Affecting Region . We divide a city into disjointed grids (e.g., 1km  X  1km in the experiments) as illustrated in Figure 4 A) , assuming the air quality in a grid is uniform (while different grids may have different results) . Each has a geospatial coordinate and a set of AQI label s quality monitor station located . Here, denotes the type of pollutants, and (defined in Table 1) means the AQI label of the k -th type of pollutant, such as PM 10 . W e believe the air quality of a grid (filled by slashes in Figure 4 A)) would be influenced by the data (e.g., trajectories and POIs) observed in the affecting region that consists of the grid and its eight neighbor grids, as shown in Figure 4 B). As shown in Figure 5, our framework consists of two major parts, offline learning and online inference, which generate three kinds of data flows: preprocessing, inference, and learning data flows. Preprocessing data flow : In this flow (denote d by dotted black arrows), we receive spatial trajectories generated by vehicles (taxicabs in the experiments) and map each trajectory onto a road network using a map-matching algorithm [12]. The mapped data is then stored in a trajectory database for offline learning and also geo-indexed to improve the efficiency of online inference. Learning data flow : In this data flow (represented by broken blue arrows), we first extract features for each grid from a variety of data observed in its affecting region. In terms of spatio-temporal properties, these features can be categorized into two sets. O ne set is temporally-related (i.e., the value of the feature s vary with time), such as temperature, humidity, and average speed of vehicles , which are extracted from meteorological data and the spatial trajectories. The other feature set is only spatially-related, e.g., the density of POIs and the length of roads in a region, extracted from POI and road network databases. See Section 3 for details. If an air quality monitor station is located in a grid , the grid is labeled by the AQIs reported from the station. The features extracted from the data observed in the affecting region of such a grid and the corresponding labels formulate a training set. As we only have a few air quality stations in a city while there are many places to infer, the data with labels are very few. To address this issue, we propose a semi-supervised learning approach based on co-training, where unlabeled data are used to improve the inference accuracy. Two separate classifiers are firs t trained respectively based on the labeled data using two separated feature sets. One is a temporal classifier ( TC ) based on a linear-chain conditional random field (CRF ), which uses temporally-related features to estimate the temporal transformation of air quality in a location. The other is an artificial neural network (ANN)-based spatial classifier ( SC ) that uses spatially-related features to model the spatial correlations between air qualities of different locations. The AQIs reported by existing stations are also employed as an input in the SC . As different air pollutants (e.g., NO are influenced by these factors differently, we build an individual model for each kind of pollutant, as detail ed in Section 4. Inference data flow : In this flow (denoted as the red solid arrows) , we calculate the features for each grid based on the data observed in the grid  X  s affecting region. While the spatially-related features like distribution of POIs can be calculated offline, the temporally-related features are computed online; e.g., the traffic-related features are extracted based on the spatio-temporal (ST )-index built in the preprocessing flow. For each grid, we respectively feed the spatially-related features into the SC and temporally-related features into TC , generating two probability scores. B y multiplying the two scores, we can select the most possible class as a label. As monitor stations usually update the reports every hour, we conduct the inference every hour. Detailed in Section 4. Problem statement Given a collection of grids , where trajectory dataset passing , and meteorological data of , we aim to infer , at periodic intervals, e.g., every 1 hour. The concentration of air pollutants is influenced by meteorology . Accordingly, we identify five features: temperature, humidity, barometer pressure, wind speed, and weather (such as cloudy, foggy, rainy, sunny , and snowy). Figure 6 shows the correlation matrix between the AQI of PM 10 and the first four features, using the data we collected from August to Dec. 2012 in Beijing, where each row/column denote s one feature and a plot means the AQI label of a location. Apparently, a high wind speed disperses the concentration of PM 10 , and high humidity usually causes a high concentration. A high pressure would result in a good AQI. The impact of temperature is not very clear, but, a good AQI is more likely when temperature is high and humidity is low, or when pressure is high and temperate is low. In short, these features are very discriminative in AQI inferences. It is widely believed that traffic flow is one of the major sources generating air pollutants that could damage air quality [9], though researchers are still explo ring the specific correlation. Here, we identify the following three features for each grid. These features are calculated from the spatial trajectories of vehicles traversing the grid in the past hour : 1) Expectation of speeds : . Given a spatial trajectory generated by a vehicle, we retrieve the points that fall in the affecting region of each gird (let us say ). We calculate the distance between any two consecutive points, then compute the speed of each vehicle at each point according to Equation 1. As the sampling rate of each GPS device is different, we calculate the expectation of speed w.r.t. time as Equation 2, which denotes the overall travel speed of vehicles in . 2) Standard deviation of speeds : . We calculate the feature according to Equation 3, which reflects how variably different vehicles were traveling in in the past hour. Similar to Equation 2, it is normalized based on time. 3) Th e distribution of speeds : . We employ a widely-used empirical setting to discretize the speed into three intervals (i.e., 0 20, 20 40 , and 40 ), calculating the distribution of speeds over the three intervals in terms of Equation 4. Figure 7 shows the correlation matrix between the aforementioned traffic features and NO 2 , where each row/column still denotes one feature and a plot denotes the AQI of a grid . Here, is extracted from a GPS trajectory dataset generated by over 30,000 taxicabs. As taxis generate about 20% of traffic flow on road surfaces of Beijing [14], the dataset is big enough to represent the traffic patterns there . Additionally , GPS-equipped taxis can be regarded as mobile sensors probing the travel speed of each road. As a result, the features w.r.t. speeds are reliable [13]. Clearly, the more vehicles traveling with a speed smaller than 20km/h, i.e., when 20) becomes larger , more instances of unhealthy and very unhealthy occurred . On the contrary, the larger 40) is the better AQI would be (e.g., see the sub chart on the first row and the third column).This is very intuitive to understand given the fact that more air pollutants would be issued by a vehicle when traveling in a traffic jam, i.e., the gasoline would not be burned efficiently. A surprising discovery is that a bigger indicates a better air quality while a smaller one has a very high probability of resulting in a worse AQI of NO depicted in the fifth column of Figure 7 . It is actually very reasonable if we consider the speed limitation of different road segments. If there is no traffic jam, vehicles should travel with quite different speeds on different roads, e.g. , vehicles traveling on highways (with a speed limitation of 120 km /h) should move much faster than those on a local street (usually with a speed limitation of 40km/h). As a grid could contain road segments of different speed limitations , tends to be large when the traffic condition in the grid is not bad. On the contrary, every vehicle has to move very slowly in a traffic jam, leading to a small . The results well matches the commonsense that traffic jams cause much heavier air pollution than normal traffic conditions. is comprised of two features, denoting the number of people arriving at ( ) and departing from ( ) a grid  X  s affecting region air-pollutant-generators . Human mobility, however, implies useful information, such as land use of a location , traffic flow, and function of a region (like residential or business areas) [11] , which could contribute to air quality inference. In the experiment, we extract the two features from the aforementioned taxi trajectories because the data tell the pickup and drop off points of each trip. The feature can actually be extracted from other data sources or a combination of multiple datasets, like mobile phone signal. Figure 8 shows the correlation between AQIs and the human mobility features . Apparently, the concentration of PM 10 becomes denser when the number of people arriving at and departing from increases. When and becomes very small, however, there might be two results. One is a very good AQI; the other is very unhealthy. Both results actually make sense, as these places may have nature parks (good) or factories (unhealthy) with very few people traveling to. While the traffic-related and human mobility features are calculated online, the feature extraction is very time-consuming. To address this issue , we build a ST -index between grids and the trajectories [5], as illustrated in Figure 9, where each grid is associated with two first-in -first-out lists respectively storing the taxi ID s traversing a grid and the pickup/drop-off points falling in the grid in the past hour. The two lists are sorted by arriving time and pickup/drop-off time respectively, and the trajectory data of a taxi is connected to the taxi ID by a hash table. Given an affecting region consisting of 9 grids (refer to Figure 4 as an example), we merge the taxi ID s falling in the se grids by checking the sorted list. We can then quickly retrieve the point data falling in the time interval from each trajectory by searching for the hash table. The structure of a road network has a strong correlation with its traffic patterns, therefore providing a good complement to traffic modeling. As demonstrated in Figure 4 A), we identify the following three featur es for each grid based on a road network database : 1) total length of highways , 2) total length of other (low-level) road segments , and 3) the number of intersections in the grid  X  s affecting region. Figure 10 presents the portion of instances with different AQI classes (NO 2 ) changing over and , by analyzing the data we collected in Beijing . The increase of road segments in a region significantly brings down the portion of good instances, enhancing the presence of U-S and beyond instances. We however did not see the phenomenon w.r.t. highways . We could say highways are relatively greener than other road segments in terms of generating air pollutants (as it does not usually contain traffic lights) . This is also the reason why we need to separate from . The category of POIs and their density in a region indicate the land use and the function of the region as well as the traffic patterns in the region, therefore contributing to the air quality inference of the region. Some POI category may even have direct causal relation with air quality. For example, if a region has some chemical factories, its air quality tends to be bad. A park, however, usually leads to a good air quality. Accordingly, we identify the following three features for each grid: 1) The number of POIs in some categories in : . We count the number of POIs belonging to the categories shown in Table 3. 2) The portion of vacant places in : . As illustrated in Figure 4 C), we further divide a grid into small cells, counting the number of cells without a POI located. In short, the bigger the larger vacant places contained in a grid, therefore facilitating the dispersion of air pollutants; e.g., the upper subfigure in Figure 4 C) shows more vacant places than the bottom one due to the presence of a lake. 3) The change in the number of POIs : . We compare the POI data of two consecutive quarters, calculating the change in the number of POIs in the following five categories (C and C 12 ) in each grid  X  s affecting region. The change implies the construction in which infrastructure w as built or removed from a region . According to [9], construction is one of the major sources of air pollutants, such as PM 10 and NO 2 . We propose the model based on the framework of co-training and the philosophy shown in Figure 11, where a circle denotes a location and a plane means the states of these locations at a timestamp. We can understand the philosophy of the model from the perspective of the state of air quality. First , air quality has temporal dependency on its current observations and that of its previous state. For example, the AQI of a location tends to be good if the AQI of the past hour is also good . Second, the air quality of a location is also reflected by its spatial neighbors. For instance, the AQI of a location is like ly to be bad if the air quality of the places close to the location is bad. We can also understand the model from the perspective of the generation of air pollutants . The AQI of a location is determined by the air pollutants issued in the location and that propagated from other locations. Co -training is a semi-supervised learning technique that requires two views of the data. It assumes that each example is described by two different feature sets that provide different and complementary information about an instance. Ideally, the two feature sets of each instance are conditionally independent given the class, and the class of an instance can be accurately predicted from each view alone. Co-training can generate a better inference result as one of the classifiers correctly labels data that the other classifier previously misclassified [8]. Aligning with the co-training framework, we propose a spatial classifier ( SC ) to model the spatial correlation and a temporal classifier ( TC ) to model the temporal dependency of AQI. The two models are integrated into a co-training-based learning framework presented in Algorithm 1. As shown in line 3 and 4, we first train the two classifiers with two separated sets of features. The trained SC and TC are then used to infer unlabeled grids iteratively, adding the most confidently classified examples into the labeled dataset for the next round of training, until becomes empty or a certain rounds have been performed. When this algorithm ends, SC and TC are returned. At the inference time, we apply and to the corresponding features separately, determining the AQI of a grid by the product of the two probability scores ( and ) generated by the two classifiers, defined in Equation 5. The temporal classifier infers the air quality of a grid given the temporally-related features consisting of , , and of the grid , using a linear-chain CRF, which is a discriminative undirected probabilistic graphical model for parsing sequential data like natural language texts [4]. The advantage of CRFs over hidden Markov models is the relaxation of the independence assumptions between features. Additionally, CRFs avoid the label bias problem exhibited by maximum entropy Markov models. Figure 12 shows the graphical structure of the temporal classifier, which consists of two kinds of nodes . The gray nodes represent hidden state variables to be inferred given the sequence of observations denoted by white nodes , , , , } ( is a timestamp by hour, e.g., 8am). The is structured to form a chain with an edge between each and , as well as having an AQI "label " belonging to . When conditioned on , the random variables obey the Markov property with respect to the graph : where means and are neighbors in . The probability of a particular label sequence given observation sequence is defined as a normalized product of potential functions as follows: where is a transition feature function of the entire observation sequence and the label at positions and ; the observation sequence; and are parameters to be estimated from training data. Writing , we transfer Equation 6 to where is a normalized factor [4]. This can be informally thought of as measurements on the input sequence that partially determine the likelihood of each possible value for . The model assigns each feature a numerical weight and combines them to determine the probability of a certain value for . Given sequences of the training data { }, learning the parameters is done by maximum likelihood learning , which can be solved by gradient descent . The spatial classifier infers the AQI of a grid, using its own geospatial features and that of some grids having a monitor station. As depicted in Figure 13 , the SC consists of two parts: input generation (in the left box ) and an artificial neural network, where , , , and denotes the POI features, road network features, location, and the AQI label of grid k ; is the grid to be inferred; is a distance function between features (e.g., we use the Pearson correlation in the experiments) and calculates the geo-distance between the center of two grids, e.g. , Input generation : In this phase, we randomly choose grids with labels, , to pair with the grid to be inferred (we found =3 achieves the best inference accuracy in the experiments). The input of the ANN is then calculated according to Equation 9 to 11 . To learn the impact of different scales of distance between grids, we perform this pairwise process times to formulate a collection of inputs. The labeled grids involved in each round of input formulation should have at least different grids from existing ones, formally defined as: means at least one out of the three grids is different from those used previously . Another reason for doing so is to vary the input. As the POI and road network features extracted from a grid are static, the input ( , , ) do not change over if we always select the same three grids. Accordingly, the three inputs will be neglected by the ANN model in the training process. Artificial neural network : Though many ANNs can be applied to our framework, we choose the widely-used Back-propagation (BP) neural network with one hidden layer in the experiments for its simplicity and generality . We set a linear function for the neuron s (each of which accepts all the features) in the input layer and a sigmoid function for th ose in the hidden and output layer s, formally defined as follows: (  X  (  X  (  X  ) ) ) , (12 ) where is a feature of input; , , and are the biases associated with the neuron in different layers; , , and denote the weight associated with the input of different layers. In the inference process, we also pair a grid to be inferred with a certain sets of labeled grids, generating a prediction of AQI label for each set. The frequency of each inferred label is then used as the probability score of the label, and the most frequent label will be selected as the final prediction result. The prediction of the SC can actually be regarded as a non-linear interpolation over geo-spaces, considering the road network and POIs of these locations . This classifier is effective as road network and POI data are good supplementary of traffic data. In the evaluation we use the following five real datasets detailed in Table 4 , where the first four sources are available in Beijing and Shanghai . 1) Meteorological data : We collect fine -grained meteorological data, consisting of weather, temperature, humidity, barometer pressure, wind strength, from a public website every hour. 2) Air quality records : We collect both real valued and labeled AQI of four kinds of air pollutants, consisting of SO 2 , NO and PM 10 , reported by ground-based air quality monitor stations in the four cities every hour. As a station may not have reports sometimes, we present the hours of effective records in Table 4. 3) POIs : We employ a POI database from Bing Maps to extract for each city. The data of the first and third quarters of 2012 are used to identify the number of POIs changed in the five categories defined in Section 3.4.2. Figure 14 shows the POI distributions of Beijing and Shanghai. 4) Road networks : The road network data is also from Bing Maps. 5) Taxi trajectories : We use a GPS trajectory dataset generated by over 32,000 taxicabs in Beijing from August 21 to Nov. 30, 2012 to calculate and . GPS-equipped taxis can be regarded as mobile sensors probing the travel speed on roads, and the data also tell the pick-up and drop-off points of each trip . The total distance of the dataset is over 495 million kilometers, and the number of points reaches 1.45 billion. We found over 32 million occupied trips. As taxis generate about 20 percent of traffic flow on road surfaces of Beijing [14], the dataset is big enough to represent the traffic patterns there. Of course, the features can be extracted from other data sources or a combination of multiple datasets, like mobile phone signal. We compare our method (U -Air) with five baselines: 1) Linear interpolation (Linear) : This is a distance-weighted interpolation algorithm using the AQI values reported by existing monitor stations, as shown in Equation 11, where denotes the geo-distance between the location and the -th monitor station. 2) Another interpolation method is based on a Gaussian distribution ( Gaussian ) , where is the average distance between any two existing air quality monitor stations in a city. Formally defined as We use continuous values in the interpolation and then discretiz e the aggregated result into AQI labels for evaluation. 3) Classical Dispersion Model (Classical) : This is a simple (also well-known) mathematical model that is typically applied to point source emitters, simulating them as point or line emission source propagating as a Gaussian plume. We use a widely-used tool CALPUFF [10 ] with default values for the parameters (as these parameters, e.g., vehicle emission rates, are difficult to obtain). 4) Decision tree (DT) : We choo se this baseline to answer people  X  s question why not just use a simple supervised learning model. I n this baseline, we feed all the features equally into a decision tree . 5) CRF-ALL and ANN-ALL : Instead of dividing the features into two sets, the two baselines feed all features equally into the SC and TC respectively . We choose them as baselines to justify the features are used effectively in our approach. Ground Truth : We deliberately remove a station from a grid and infer its air quality with the AQIs from other stations. The actual AQI reported by the station is then used as the ground truth to measure the inference. Each grid with a station is tested in this way every hour. For example, Beijing has 22 stations, generating 528 (22 24) test instances per day and 3,696 instances per week. In addition, we separate the training data from the test data by time, guaranteeing they have no overlap. Moreover, we apply the model trained in Beijing to the other cities, further verifying its effectiveness and adaptability to different cities. Evaluation on Features : We first justify the effectiveness of the features, using the data shown in Table 5, where a DT model is employed to study the performance of individual features and the ir combinations. Clearly, adding one feature set into the model brings a significant improvement on both precision and recall. Overall Results : Figure 15 shows the performance of U-Air and the five aforementioned baselines, where U-Air outperforms other methods in terms of the mean precision and mean recall over time of day. The results demonstrate the advantage of our method over linear and Gaussian interpolation s, and classical air pollutant dispersion models (though the latter may have a better performance with all the parameters accurately obtained , getting such parameters could be even difficult than building the model). Additionally, simply using some supervised machine learning models (like DT and CRF) or ANN is less effective than the co-training-based approach. Results of Co -Training : Figure 16 further reveals the co-training progress of our approach, where we add an instance into the score over 0.85 (i.e., very confidently inferred). The unlabeled data gradually improves the inference performance, justifying the ability of the co-training framework in dealing with data sparsity. Table 6 shows the confusion matrix of U-Air in inferring PM Beijing (we do not show other pollutants given the limited spaces) . Results of SC : To further study the ability of our approach in differentiating between more AQI labels, we solely test the spatial classifier (no traffic-related features needed). Note that this is the result of SC rather than co-training. We use a half of the data for training and the rest for testing, ensuring both parts of data have a relatively balanced distribution over different AQI labels. Unbalanced data will result in impractically high accuracy in the test. We also apply the spatial classifier (trained based on Beijing data) to Shanghai data. As depicted in Figure 17 A), our SC has almost the same performance as that of Beijing, justifying its ability adapting to different urban environments. As shown in Figure 17 B), pairing a location with three stations in the SC generates a better result than using other number of stations (e.g., 2 or 4). Results of TC : Figure 18 presents the performance of our T C respectively using temporally-related features and all features to infer PM 10 in Beijing, showing two discoveries. First, feeding all features into the TC does not help, in most cases, becoming even worse than only using temporal features. Second, the performances of two times slots (around 8am and 6pm) are higher than others. The two time slots actually correspond to the morning and evening rush hours of Beijing, in which traffic flows would be the major cause of air pollutants. Another reason is we also have enough number of taxi trajectories representing the traffic flow in the two slots (i.e., people travel a lot by taxis). Efficiency : Table 8 presents the online efficiency of our approach, which was tested on a 64-bit server with a Quad-Core 2.67G CPU and 16GB RAM. On average, we can infer the air quality of a grid in 131ms, generating the AQIs for entire Beijing in 5 minutes. Visualization : We infer the AQI of each location in the urban areas of Beijing and Shanghai by using our approach, coming up with two visualizations shown in Figure 19 A) and B), where green and red grids respectively denote the top 100 locations that could have the best and worst AQIs in the two cities during the corresponding periods. The visualization can benefit air pollution analytics by identifying the locations always having a bad AQI. There are two major ways calculating the air quality of a location using the emission observed at ground surfaces, called  X  bottom-up  X  methods. One is interpolation using the reports from nearby air quality monitor stations. The method is usually employed by public websites releasing AQIs. As air quality varies in locations non -linearly, the inference accuracy is quite low (see Figure 15). The other is classical dispersion models, such as Gaussian Plume models, Operational Street Canyon models, and Computational Fluid Dynamics. These models are in most cases a function of meteorology, street geometry, receptor locations, traffic volumes, and emission factors (e.g., g/km per single vehicle), based on a number of empirical assumptions and parameters that might not be applicable to all urban environments [9]. For example, Gaussian Plume model requires vehicle emission rates (e.g., g/km per hour) as input and assumes that the concentration is dispersed in the vertical and horizontal directions in a Gaussian manner. Some models may even require the height, length, and orientation of a street canyon, the gaps between buildings , as well as the roughness coefficient of the urban surface. As these parameters are difficult to obtain precisely, the results generated by such kinds of models may not be very accurate either. Compared with these models, our approach does not need empirical assumptions and parameters. Therefore, it is easy to conduct and applicable to different city environments. Satellite remote sensing of surface air quality has been studied intensively in past decades [7], which can be regarded as top-down methods. For example, [1] compared PM 2.5 inferred from the moderate resolution imaging spectroradiameter (MODIS) with surface PM 2.5 measurements in Canada and the United States. Likewise, [6] estimated surface NO 2 concentrations by applying local scaling factors from a global three-dimensional model to tropospheric NO 2 columns retrieved from the Ozone Monitoring Instrument onboard the Aura satellite. However, this category of methods is extremely influenced by clouds and would be sensitive to other factors, such as humidity, temperature, and location [1]. In addition, the results inferred from Satellite images only reflect the air quality of atmosphere rather than the ground air quality that people care more about. Crowdsourcing or participatory sensing [2][3] may be a potential solution solving this problem in the future, if every person can carry a gas-sensor-equipped smart phone to probe the air quality around them. While this approach is feasible for some gasses like CO 2 , it is not practical for other air pollutants like PM so far as the devices for sensing such kinds of air pollutants are not easily portable (refer to Figure 1) . In addition, the devices need a long period of sensing time (e.g., 1 hour) before generating accurate results. A series of research on urban computing has been done recently, using big data to tackle the big challenges in big cities. For instance, Jing et al. inferred the functional regions in a city using human mobility data and POIs [11 ]. Zheng et al. detected the underlying problems in a city  X  s transportation network using taxi trajectories [ 14]. Zhang et al. sense the urban refueling behavior based on GPS-equipped vehicles [15 ]. The research reported in this paper is also a step towards urban computing. In this paper, from the perspective of big data, we infer the fine-granularity air quality in a city based on the AQIs reported by a few air quality monitor stations and f our datasets (meteorological data, taxi trajectories, road networks, and POIs) observed in the city. W e identify five sets of features ( , , , , and ) based on the datasets and propose a co-training-based semi-supervised learning approach consisting of a spatial classifier and a temporal classifier. W e first evaluated our co-training-based approach using the data obtained in Beijing, resulting in an overall (Precision=0.828, Recall=0.826) for PM 10 and (Precision=0.808, Recall=0.798) for NO 2 . The results outperform that of linear interpolation, a classical dispersion model, and some well-known supervised learning models like Decision Tree and CRF . Solely applying all features to the SC or TC is worse than our co-training-based approach. We applied the SC learnt from Beijing data to Shanghai, obtaining a result as good as that generated in Beijing (about 0.76). These results demonstrate our approach is applicable to different city environments and seasons. The key experiences we learned from the research lies in three aspects . First, features should be selected carefully from the data and used properly in the inference models. Second, the design of SC and TC is helpful as they respectively model the temporal dependency of air quality in a location and the spatial correlation between locations. Third, the co-training-based framework does a good job of addressing the data sparsity problem by leveraging the unlabeled data and the mutual reinforcement relationship between the two feature sets (e.g., POIs and road networks are good complementary of traffic-related features) . In the future, we would like to apply our approach to more cities and study the root causes of air pollution . 
